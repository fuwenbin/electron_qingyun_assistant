"use strict";var Yu=Object.defineProperty;var Ju=(t,e,r)=>e in t?Yu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var oe=(t,e,r)=>(Ju(t,typeof e!="symbol"?e+"":e,r),r),Zi=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var ke=(t,e,r)=>(Zi(t,e,"read from private field"),r?r.call(t):e.get(t)),qt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ze=(t,e,r,i)=>(Zi(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r);var Cr=(t,e,r,i)=>({set _(s){ze(t,e,s,r)},get _(){return ke(t,e,i)}});const se=require("electron"),Q=require("path"),ae=require("fs"),ar=require("child_process"),Ye=require("os"),Rt=require("util"),ct=require("events"),ur=require("http"),cr=require("https"),Ku=require("ws"),lr=require("assert"),Qu=require("zlib"),Oi=require("url"),Ti=require("tty"),je=require("crypto"),Zu=require("querystring"),ec=require("string_decoder"),tc=require("timers"),wa=require("stream"),rc=require("constants");function nc(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const Dr=nc(ae);require("iconv-lite");function xt(t){return Buffer.from(t,"base64").toString("utf-8")}function er(t){switch(Q.extname(t).toLowerCase()){case".mp4":return"video/mp4";case".webm":return"video/webm";case".mov":return"video/quicktime";case".avi":return"video/x-msvideo";case".mkv":return"video/x-matroska";case".mp3":return"audio/mpeg";case".wav":return"audio/wav";case".ogg":return"audio/ogg";case".aac":return"audio/aac";case".flac":return"audio/flac";case".jpg":case".jpeg":return"image/jpeg";case".png":return"image/png";default:return"application/octet-stream"}}function eo(t){return new ReadableStream({start(e){t.on("data",r=>{e.enqueue(r)}),t.on("end",()=>{e.close()}),t.on("error",r=>{e.error(r)})},cancel(){t.destroy()}})}function to(t){return process.platform==="win32"?t.replace(/\\/g,"\\\\").replace(/:/g,"\\:"):t.replace(/(\s)/g,"\\$1")}function ic(){se.ipcMain.handle("show-save-dialog",async(t,e)=>await se.dialog.showSaveDialog({title:e.title||"保存文件",defaultPath:e.defaultPath||se.app.getPath("documents"),filters:e.filters||[{name:"MP4 Videos",extensions:["mp4"]},{name:"All Files",extensions:["*"]}]})),se.ipcMain.handle("select-directory",async(t,e)=>{const r=e&&JSON.parse(xt(e)),i=await se.dialog.showOpenDialog({properties:["openDirectory"],title:"选择保存目录",defaultPath:(r==null?void 0:r.defaultPath)||se.app.getPath("documents")});return!i.canceled&&i.filePaths.length>0?i.filePaths[0]:null})}function oc(){se.ipcMain.handle("open-file",async(t,e)=>{const{shell:r}=require("electron");await r.openPath(e)})}var ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function sc(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),r}var tr={exports:{}},Fr={exports:{}},ro;function Ea(){return ro||(ro=1,function(t){let e={};try{e=require("electron")}catch{}e.ipcRenderer&&r(e),t.exports=r;function r({contextBridge:i,ipcRenderer:s}){if(!s)return;s.on("__ELECTRON_LOG_IPC__",(o,a)=>{window.postMessage({cmd:"message",...a})}),s.invoke("__ELECTRON_LOG__",{cmd:"getOptions"}).catch(o=>console.error(new Error(`electron-log isn't initialized in the main process. Please call log.initialize() before. ${o.message}`)));const n={sendToMain(o){try{s.send("__ELECTRON_LOG__",o)}catch(a){console.error("electronLog.sendToMain ",a,"data:",o),s.send("__ELECTRON_LOG__",{cmd:"errorHandler",error:{message:a==null?void 0:a.message,stack:a==null?void 0:a.stack},errorName:"sendToMain"})}},log(...o){n.sendToMain({data:o,level:"info"})}};for(const o of["error","warn","info","verbose","debug","silly"])n[o]=(...a)=>n.sendToMain({data:a,level:o});if(i&&process.contextIsolated)try{i.exposeInMainWorld("__electronLog",n)}catch{}typeof window=="object"?window.__electronLog=n:__electronLog=n}}(Fr)),Fr.exports}var _r={exports:{}},Ar,no;function ac(){if(no)return Ar;no=1,Ar=t;function t(e){return Object.defineProperties(r,{defaultLabel:{value:"",writable:!0},labelPadding:{value:!0,writable:!0},maxLabelLength:{value:0,writable:!0},labelLength:{get(){switch(typeof r.labelPadding){case"boolean":return r.labelPadding?r.maxLabelLength:0;case"number":return r.labelPadding;default:return 0}}}});function r(i){r.maxLabelLength=Math.max(r.maxLabelLength,i.length);const s={};for(const n of e.levels)s[n]=(...o)=>e.logData(o,{level:n,scope:i});return s.log=s.info,s}}return Ar}var xr,io;function uc(){if(io)return xr;io=1;class t{constructor({processMessage:r}){this.processMessage=r,this.buffer=[],this.enabled=!1,this.begin=this.begin.bind(this),this.commit=this.commit.bind(this),this.reject=this.reject.bind(this)}addMessage(r){this.buffer.push(r)}begin(){this.enabled=[]}commit(){this.enabled=!1,this.buffer.forEach(r=>this.processMessage(r)),this.buffer=[]}reject(){this.enabled=!1,this.buffer=[]}}return xr=t,xr}var Nr,oo;function ba(){if(oo)return Nr;oo=1;const t=ac(),e=uc(),i=class i{constructor({allowUnknownLevel:n=!1,dependencies:o={},errorHandler:a,eventLogger:u,initializeFn:h,isDev:c=!1,levels:f=["error","warn","info","verbose","debug","silly"],logId:l,transportFactories:d={},variables:y}={}){oe(this,"dependencies",{});oe(this,"errorHandler",null);oe(this,"eventLogger",null);oe(this,"functions",{});oe(this,"hooks",[]);oe(this,"isDev",!1);oe(this,"levels",null);oe(this,"logId",null);oe(this,"scope",null);oe(this,"transports",{});oe(this,"variables",{});this.addLevel=this.addLevel.bind(this),this.create=this.create.bind(this),this.initialize=this.initialize.bind(this),this.logData=this.logData.bind(this),this.processMessage=this.processMessage.bind(this),this.allowUnknownLevel=n,this.buffering=new e(this),this.dependencies=o,this.initializeFn=h,this.isDev=c,this.levels=f,this.logId=l,this.scope=t(this),this.transportFactories=d,this.variables=y||{};for(const v of this.levels)this.addLevel(v,!1);this.log=this.info,this.functions.log=this.log,this.errorHandler=a,a==null||a.setOptions({...o,logFn:this.error}),this.eventLogger=u,u==null||u.setOptions({...o,logger:this});for(const[v,E]of Object.entries(d))this.transports[v]=E(this,o);i.instances[l]=this}static getInstance({logId:n}){return this.instances[n]||this.instances.default}addLevel(n,o=this.levels.length){o!==!1&&this.levels.splice(o,0,n),this[n]=(...a)=>this.logData(a,{level:n}),this.functions[n]=this[n]}catchErrors(n){return this.processMessage({data:["log.catchErrors is deprecated. Use log.errorHandler instead"],level:"warn"},{transports:["console"]}),this.errorHandler.startCatching(n)}create(n){return typeof n=="string"&&(n={logId:n}),new i({dependencies:this.dependencies,errorHandler:this.errorHandler,initializeFn:this.initializeFn,isDev:this.isDev,transportFactories:this.transportFactories,variables:{...this.variables},...n})}compareLevels(n,o,a=this.levels){const u=a.indexOf(n),h=a.indexOf(o);return h===-1||u===-1?!0:h<=u}initialize(n={}){this.initializeFn({logger:this,...this.dependencies,...n})}logData(n,o={}){this.buffering.enabled?this.buffering.addMessage({data:n,date:new Date,...o}):this.processMessage({data:n,...o})}processMessage(n,{transports:o=this.transports}={}){if(n.cmd==="errorHandler"){this.errorHandler.handle(n.error,{errorName:n.errorName,processType:"renderer",showDialog:!!n.showDialog});return}let a=n.level;this.allowUnknownLevel||(a=this.levels.includes(n.level)?n.level:"info");const u={date:new Date,logId:this.logId,...n,level:a,variables:{...this.variables,...n.variables}};for(const[h,c]of this.transportEntries(o))if(!(typeof c!="function"||c.level===!1)&&this.compareLevels(c.level,n.level))try{const f=this.hooks.reduce((l,d)=>l&&d(l,c,h),u);f&&c({...f,data:[...f.data]})}catch(f){this.processInternalErrorFn(f)}}processInternalErrorFn(n){}transportEntries(n=this.transports){return(Array.isArray(n)?n:Object.entries(n)).map(a=>{switch(typeof a){case"string":return this.transports[a]?[a,this.transports[a]]:null;case"function":return[a.name,a];default:return Array.isArray(a)?a:null}}).filter(Boolean)}};oe(i,"instances",{});let r=i;return Nr=r,Nr}var Ir,so;function cc(){if(so)return Ir;so=1;const t=console.error;class e{constructor({logFn:i=null}={}){oe(this,"logFn",null);oe(this,"onError",null);oe(this,"showDialog",!1);oe(this,"preventDefault",!0);this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.startCatching=this.startCatching.bind(this),this.logFn=i}handle(i,{logFn:s=this.logFn,errorName:n="",onError:o=this.onError,showDialog:a=this.showDialog}={}){try{(o==null?void 0:o({error:i,errorName:n,processType:"renderer"}))!==!1&&s({error:i,errorName:n,showDialog:a})}catch{t(i)}}setOptions({logFn:i,onError:s,preventDefault:n,showDialog:o}){typeof i=="function"&&(this.logFn=i),typeof s=="function"&&(this.onError=s),typeof n=="boolean"&&(this.preventDefault=n),typeof o=="boolean"&&(this.showDialog=o)}startCatching({onError:i,showDialog:s}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:i,showDialog:s}),window.addEventListener("error",n=>{var o;this.preventDefault&&((o=n.preventDefault)==null||o.call(n)),this.handleError(n.error||n)}),window.addEventListener("unhandledrejection",n=>{var o;this.preventDefault&&((o=n.preventDefault)==null||o.call(n)),this.handleRejection(n.reason||n)}))}handleError(i){this.handle(i,{errorName:"Unhandled"})}handleRejection(i){const s=i instanceof Error?i:new Error(JSON.stringify(i));this.handle(s,{errorName:"Unhandled rejection"})}}return Ir=e,Ir}var Pr,ao;function lt(){if(ao)return Pr;ao=1,Pr={transform:t};function t({logger:e,message:r,transport:i,initialData:s=(r==null?void 0:r.data)||[],transforms:n=i==null?void 0:i.transforms}){return n.reduce((o,a)=>typeof a=="function"?a({data:o,logger:e,message:r,transport:i}):o,s)}return Pr}var Lr,uo;function lc(){if(uo)return Lr;uo=1;const{transform:t}=lt();Lr=r;const e={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};function r(s){return Object.assign(n,{format:"{h}:{i}:{s}.{ms}{scope} › {text}",transforms:[i],writeFn({message:{level:o,data:a}}){const u=e[o]||e.info;setTimeout(()=>u(...a))}});function n(o){n.writeFn({message:{...o,data:t({logger:s,message:o,transport:n})}})}}function i({data:s=[],logger:n={},message:o={},transport:a={}}){if(typeof a.format=="function")return a.format({data:s,level:(o==null?void 0:o.level)||"info",logger:n,message:o,transport:a});if(typeof a.format!="string")return s;s.unshift(a.format),typeof s[1]=="string"&&s[1].match(/%[1cdfiOos]/)&&(s=[`${s[0]}${s[1]}`,...s.slice(2)]);const u=o.date||new Date;return s[0]=s[0].replace(/\{(\w+)}/g,(h,c)=>{var f,l;switch(c){case"level":return o.level;case"logId":return o.logId;case"scope":{const d=o.scope||((f=n.scope)==null?void 0:f.defaultLabel);return d?` (${d})`:""}case"text":return"";case"y":return u.getFullYear().toString(10);case"m":return(u.getMonth()+1).toString(10).padStart(2,"0");case"d":return u.getDate().toString(10).padStart(2,"0");case"h":return u.getHours().toString(10).padStart(2,"0");case"i":return u.getMinutes().toString(10).padStart(2,"0");case"s":return u.getSeconds().toString(10).padStart(2,"0");case"ms":return u.getMilliseconds().toString(10).padStart(3,"0");case"iso":return u.toISOString();default:return((l=o.variables)==null?void 0:l[c])||h}}).trim(),s}return Lr}var Mr,co;function fc(){if(co)return Mr;co=1;const{transform:t}=lt();Mr=r;const e=new Set([Promise,WeakMap,WeakSet]);function r(n){return Object.assign(o,{depth:5,transforms:[s]});function o(a){if(!window.__electronLog){n.processMessage({data:["electron-log: logger isn't initialized in the main process"],level:"error"},{transports:["console"]});return}try{const u=t({initialData:a,logger:n,message:a,transport:o});__electronLog.sendToMain(u)}catch(u){n.transports.console({data:["electronLog.transports.ipc",u,"data:",a.data],level:"error"})}}}function i(n){return Object(n)!==n}function s({data:n,depth:o,seen:a=new WeakSet,transport:u={}}={}){const h=o||u.depth||5;return a.has(n)?"[Circular]":h<1?i(n)?n:Array.isArray(n)?"[Array]":`[${typeof n}]`:["function","symbol"].includes(typeof n)?n.toString():i(n)?n:e.has(n.constructor)?`[${n.constructor.name}]`:Array.isArray(n)?n.map(c=>s({data:c,depth:h-1,seen:a})):n instanceof Date?n.toISOString():n instanceof Error?n.stack:n instanceof Map?new Map(Array.from(n).map(([c,f])=>[s({data:c,depth:h-1,seen:a}),s({data:f,depth:h-1,seen:a})])):n instanceof Set?new Set(Array.from(n).map(c=>s({data:c,depth:h-1,seen:a}))):(a.add(n),Object.fromEntries(Object.entries(n).map(([c,f])=>[c,s({data:f,depth:h-1,seen:a})])))}return Mr}var lo;function hc(){return lo||(lo=1,function(t){const e=ba(),r=cc(),i=lc(),s=fc();t.exports=n(),t.exports.Logger=e,t.exports.default=t.exports;function n(){const o=new e({allowUnknownLevel:!0,errorHandler:new r,initializeFn:()=>{},logId:"default",transportFactories:{console:i,ipc:s},variables:{processType:"renderer"}});return o.errorHandler.setOptions({logFn({error:a,errorName:u,showDialog:h}){o.transports.console({data:[u,a].filter(Boolean),level:"error"}),o.transports.ipc({cmd:"errorHandler",error:{cause:a==null?void 0:a.cause,code:a==null?void 0:a.code,name:a==null?void 0:a.name,message:a==null?void 0:a.message,stack:a==null?void 0:a.stack},errorName:u,logId:o.logId,showDialog:h})}}),typeof window=="object"&&window.addEventListener("message",a=>{const{cmd:u,logId:h,...c}=a.data||{},f=e.getInstance({logId:h});u==="message"&&f.processMessage(c,{transports:["console"]})}),new Proxy(o,{get(a,u){return typeof a[u]<"u"?a[u]:(...h)=>o.logData(h,{level:u})}})}}(_r)),_r.exports}var $r,fo;function pc(){if(fo)return $r;fo=1;const t=ae,e=Q;$r={findAndReadPackageJson:r,tryReadJsonAt:i};function r(){return i(o())||i(n())||i(process.resourcesPath,"app.asar")||i(process.resourcesPath,"app")||i(process.cwd())||{name:void 0,version:void 0}}function i(...a){if(a[0])try{const u=e.join(...a),h=s("package.json",u);if(!h)return;const c=JSON.parse(t.readFileSync(h,"utf8")),f=(c==null?void 0:c.productName)||(c==null?void 0:c.name);return!f||f.toLowerCase()==="electron"?void 0:f?{name:f,version:c==null?void 0:c.version}:void 0}catch{return}}function s(a,u){let h=u;for(;;){const c=e.parse(h),f=c.root,l=c.dir;if(t.existsSync(e.join(h,a)))return e.resolve(e.join(h,a));if(h===f)return null;h=l}}function n(){const a=process.argv.filter(h=>h.indexOf("--user-data-dir=")===0);return a.length===0||typeof a[0]!="string"?null:a[0].replace("--user-data-dir=","")}function o(){var a;try{return(a=require.main)==null?void 0:a.filename}catch{return}}return $r}var Rr,ho;function Sa(){if(ho)return Rr;ho=1;const t=ar,e=Ye,r=Q,i=pc();class s{constructor(){oe(this,"appName");oe(this,"appPackageJson");oe(this,"platform",process.platform)}getAppLogPath(o=this.getAppName()){return this.platform==="darwin"?r.join(this.getSystemPathHome(),"Library/Logs",o):r.join(this.getAppUserDataPath(o),"logs")}getAppName(){var a;const o=this.appName||((a=this.getAppPackageJson())==null?void 0:a.name);if(!o)throw new Error("electron-log can't determine the app name. It tried these methods:\n1. Use `electron.app.name`\n2. Use productName or name from the nearest package.json`\nYou can also set it through log.transports.file.setAppName()");return o}getAppPackageJson(){return typeof this.appPackageJson!="object"&&(this.appPackageJson=i.findAndReadPackageJson()),this.appPackageJson}getAppUserDataPath(o=this.getAppName()){return o?r.join(this.getSystemPathAppData(),o):void 0}getAppVersion(){var o;return(o=this.getAppPackageJson())==null?void 0:o.version}getElectronLogPath(){return this.getAppLogPath()}getMacOsVersion(){const o=Number(e.release().split(".")[0]);return o<=19?`10.${o-4}`:o-9}getOsVersion(){let o=e.type().replace("_"," "),a=e.release();return o==="Darwin"&&(o="macOS",a=this.getMacOsVersion()),`${o} ${a}`}getPathVariables(){const o=this.getAppName(),a=this.getAppVersion(),u=this;return{appData:this.getSystemPathAppData(),appName:o,appVersion:a,get electronDefaultDir(){return u.getElectronLogPath()},home:this.getSystemPathHome(),libraryDefaultDir:this.getAppLogPath(o),libraryTemplate:this.getAppLogPath("{appName}"),temp:this.getSystemPathTemp(),userData:this.getAppUserDataPath(o)}}getSystemPathAppData(){const o=this.getSystemPathHome();switch(this.platform){case"darwin":return r.join(o,"Library/Application Support");case"win32":return process.env.APPDATA||r.join(o,"AppData/Roaming");default:return process.env.XDG_CONFIG_HOME||r.join(o,".config")}}getSystemPathHome(){var o;return((o=e.homedir)==null?void 0:o.call(e))||process.env.HOME}getSystemPathTemp(){return e.tmpdir()}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:void 0,os:this.getOsVersion()}}isDev(){return process.env.NODE_ENV==="development"||process.env.ELECTRON_IS_DEV==="1"}isElectron(){return!!process.versions.electron}onAppEvent(o,a){}onAppReady(o){o()}onEveryWebContentsEvent(o,a){}onIpc(o,a){}onIpcInvoke(o,a){}openUrl(o,a=console.error){const h={darwin:"open",win32:"start",linux:"xdg-open"}[process.platform]||"xdg-open";t.exec(`${h} ${o}`,{},c=>{c&&a(c)})}setAppName(o){this.appName=o}setPlatform(o){this.platform=o}setPreloadFileForSessions({filePath:o,includeFutureSession:a=!0,getSessions:u=()=>[]}){}sendIpc(o,a){}showErrorBox(o,a){}}return Rr=s,Rr}var kr,po;function dc(){if(po)return kr;po=1;const t=Q,e=Sa();class r extends e{constructor({electron:n}={}){super();oe(this,"electron");this.electron=n}getAppName(){var o,a;let n;try{n=this.appName||((o=this.electron.app)==null?void 0:o.name)||((a=this.electron.app)==null?void 0:a.getName())}catch{}return n||super.getAppName()}getAppUserDataPath(n){return this.getPath("userData")||super.getAppUserDataPath(n)}getAppVersion(){var o;let n;try{n=(o=this.electron.app)==null?void 0:o.getVersion()}catch{}return n||super.getAppVersion()}getElectronLogPath(){return this.getPath("logs")||super.getElectronLogPath()}getPath(n){var o;try{return(o=this.electron.app)==null?void 0:o.getPath(n)}catch{return}}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:`Electron ${process.versions.electron}`,os:this.getOsVersion()}}getSystemPathAppData(){return this.getPath("appData")||super.getSystemPathAppData()}isDev(){var n;return((n=this.electron.app)==null?void 0:n.isPackaged)!==void 0?!this.electron.app.isPackaged:typeof process.execPath=="string"?t.basename(process.execPath).toLowerCase().startsWith("electron"):super.isDev()}onAppEvent(n,o){var a;return(a=this.electron.app)==null||a.on(n,o),()=>{var u;(u=this.electron.app)==null||u.off(n,o)}}onAppReady(n){var o,a,u;(o=this.electron.app)!=null&&o.isReady()?n():(a=this.electron.app)!=null&&a.once?(u=this.electron.app)==null||u.once("ready",n):n()}onEveryWebContentsEvent(n,o){var u,h,c;return(h=(u=this.electron.webContents)==null?void 0:u.getAllWebContents())==null||h.forEach(f=>{f.on(n,o)}),(c=this.electron.app)==null||c.on("web-contents-created",a),()=>{var f,l;(f=this.electron.webContents)==null||f.getAllWebContents().forEach(d=>{d.off(n,o)}),(l=this.electron.app)==null||l.off("web-contents-created",a)};function a(f,l){l.on(n,o)}}onIpc(n,o){var a;(a=this.electron.ipcMain)==null||a.on(n,o)}onIpcInvoke(n,o){var a,u;(u=(a=this.electron.ipcMain)==null?void 0:a.handle)==null||u.call(a,n,o)}openUrl(n,o=console.error){var a;(a=this.electron.shell)==null||a.openExternal(n).catch(o)}setPreloadFileForSessions({filePath:n,includeFutureSession:o=!0,getSessions:a=()=>{var u;return[(u=this.electron.session)==null?void 0:u.defaultSession]}}){for(const h of a().filter(Boolean))u(h);o&&this.onAppEvent("session-created",h=>{u(h)});function u(h){typeof h.registerPreloadScript=="function"?h.registerPreloadScript({filePath:n,id:"electron-log-preload",type:"frame"}):h.setPreloads([...h.getPreloads(),n])}}sendIpc(n,o){var a,u;(u=(a=this.electron.BrowserWindow)==null?void 0:a.getAllWindows())==null||u.forEach(h=>{var c,f;((c=h.webContents)==null?void 0:c.isDestroyed())===!1&&((f=h.webContents)==null?void 0:f.isCrashed())===!1&&h.webContents.send(n,o)})}showErrorBox(n,o){var a;(a=this.electron.dialog)==null||a.showErrorBox(n,o)}}return kr=r,kr}var jr,mo;function mc(){if(mo)return jr;mo=1;const t=ae,e=Ye,r=Q,i=Ea();jr={initialize({externalApi:o,getSessions:a,includeFutureSession:u,logger:h,preload:c=!0,spyRendererConsole:f=!1}){o.onAppReady(()=>{try{c&&s({externalApi:o,getSessions:a,includeFutureSession:u,preloadOption:c}),f&&n({externalApi:o,logger:h})}catch(l){h.warn(l)}})}};function s({externalApi:o,getSessions:a,includeFutureSession:u,preloadOption:h}){let c=typeof h=="string"?h:void 0;try{c=r.resolve(__dirname,"../renderer/electron-log-preload.js")}catch{}if(!c||!t.existsSync(c)){c=r.join(o.getAppUserDataPath()||e.tmpdir(),"electron-log-preload.js");const f=`
      try {
        (${i.toString()})(require('electron'));
      } catch(e) {
        console.error(e);
      }
    `;t.writeFileSync(c,f,"utf8")}o.setPreloadFileForSessions({filePath:c,includeFutureSession:u,getSessions:a})}function n({externalApi:o,logger:a}){const u=["debug","info","warn","error"];o.onEveryWebContentsEvent("console-message",(h,c,f)=>{a.processMessage({data:[f],level:u[c],variables:{processType:"renderer"}})})}return jr}var qr,yo;function yc(){if(yo)return qr;yo=1;class t{constructor({externalApi:i,logFn:s=void 0,onError:n=void 0,showDialog:o=void 0}={}){oe(this,"externalApi");oe(this,"isActive",!1);oe(this,"logFn");oe(this,"onError");oe(this,"showDialog",!0);this.createIssue=this.createIssue.bind(this),this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.setOptions({externalApi:i,logFn:s,onError:n,showDialog:o}),this.startCatching=this.startCatching.bind(this),this.stopCatching=this.stopCatching.bind(this)}handle(i,{logFn:s=this.logFn,onError:n=this.onError,processType:o="browser",showDialog:a=this.showDialog,errorName:u=""}={}){var h;i=e(i);try{if(typeof n=="function"){const c=((h=this.externalApi)==null?void 0:h.getVersions())||{},f=this.createIssue;if(n({createIssue:f,error:i,errorName:u,processType:o,versions:c})===!1)return}u?s(u,i):s(i),a&&!u.includes("rejection")&&this.externalApi&&this.externalApi.showErrorBox(`A JavaScript error occurred in the ${o} process`,i.stack)}catch{console.error(i)}}setOptions({externalApi:i,logFn:s,onError:n,showDialog:o}){typeof i=="object"&&(this.externalApi=i),typeof s=="function"&&(this.logFn=s),typeof n=="function"&&(this.onError=n),typeof o=="boolean"&&(this.showDialog=o)}startCatching({onError:i,showDialog:s}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:i,showDialog:s}),process.on("uncaughtException",this.handleError),process.on("unhandledRejection",this.handleRejection))}stopCatching(){this.isActive=!1,process.removeListener("uncaughtException",this.handleError),process.removeListener("unhandledRejection",this.handleRejection)}createIssue(i,s){var n;(n=this.externalApi)==null||n.openUrl(`${i}?${new URLSearchParams(s).toString()}`)}handleError(i){this.handle(i,{errorName:"Unhandled"})}handleRejection(i){const s=i instanceof Error?i:new Error(JSON.stringify(i));this.handle(s,{errorName:"Unhandled rejection"})}}function e(r){if(r instanceof Error)return r;if(r&&typeof r=="object"){if(r.message)return Object.assign(new Error(r.message),r);try{return new Error(JSON.stringify(r))}catch(i){return new Error(`Couldn't normalize error ${String(r)}: ${i}`)}}return new Error(`Can't normalize error ${String(r)}`)}return qr=t,qr}var Br,go;function gc(){if(go)return Br;go=1;class t{constructor(r={}){oe(this,"disposers",[]);oe(this,"format","{eventSource}#{eventName}:");oe(this,"formatters",{app:{"certificate-error":({args:r})=>this.arrayToObject(r.slice(1,4),["url","error","certificate"]),"child-process-gone":({args:r})=>r.length===1?r[0]:r,"render-process-gone":({args:[r,i]})=>i&&typeof i=="object"?{...i,...this.getWebContentsDetails(r)}:[]},webContents:{"console-message":({args:[r,i,s,n]})=>{if(!(r<3))return{message:i,source:`${n}:${s}`}},"did-fail-load":({args:r})=>this.arrayToObject(r,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"did-fail-provisional-load":({args:r})=>this.arrayToObject(r,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"plugin-crashed":({args:r})=>this.arrayToObject(r,["name","version"]),"preload-error":({args:r})=>this.arrayToObject(r,["preloadPath","error"])}});oe(this,"events",{app:{"certificate-error":!0,"child-process-gone":!0,"render-process-gone":!0},webContents:{"did-fail-load":!0,"did-fail-provisional-load":!0,"plugin-crashed":!0,"preload-error":!0,unresponsive:!0}});oe(this,"externalApi");oe(this,"level","error");oe(this,"scope","");this.setOptions(r)}setOptions({events:r,externalApi:i,level:s,logger:n,format:o,formatters:a,scope:u}){typeof r=="object"&&(this.events=r),typeof i=="object"&&(this.externalApi=i),typeof s=="string"&&(this.level=s),typeof n=="object"&&(this.logger=n),(typeof o=="string"||typeof o=="function")&&(this.format=o),typeof a=="object"&&(this.formatters=a),typeof u=="string"&&(this.scope=u)}startLogging(r={}){this.setOptions(r),this.disposeListeners();for(const i of this.getEventNames(this.events.app))this.disposers.push(this.externalApi.onAppEvent(i,(...s)=>{this.handleEvent({eventSource:"app",eventName:i,handlerArgs:s})}));for(const i of this.getEventNames(this.events.webContents))this.disposers.push(this.externalApi.onEveryWebContentsEvent(i,(...s)=>{this.handleEvent({eventSource:"webContents",eventName:i,handlerArgs:s})}))}stopLogging(){this.disposeListeners()}arrayToObject(r,i){const s={};return i.forEach((n,o)=>{s[n]=r[o]}),r.length>i.length&&(s.unknownArgs=r.slice(i.length)),s}disposeListeners(){this.disposers.forEach(r=>r()),this.disposers=[]}formatEventLog({eventName:r,eventSource:i,handlerArgs:s}){var f;const[n,...o]=s;if(typeof this.format=="function")return this.format({args:o,event:n,eventName:r,eventSource:i});const a=(f=this.formatters[i])==null?void 0:f[r];let u=o;if(typeof a=="function"&&(u=a({args:o,event:n,eventName:r,eventSource:i})),!u)return;const h={};return Array.isArray(u)?h.args=u:typeof u=="object"&&Object.assign(h,u),i==="webContents"&&Object.assign(h,this.getWebContentsDetails(n==null?void 0:n.sender)),[this.format.replace("{eventSource}",i==="app"?"App":"WebContents").replace("{eventName}",r),h]}getEventNames(r){return!r||typeof r!="object"?[]:Object.entries(r).filter(([i,s])=>s).map(([i])=>i)}getWebContentsDetails(r){if(!(r!=null&&r.loadURL))return{};try{return{webContents:{id:r.id,url:r.getURL()}}}catch{return{}}}handleEvent({eventName:r,eventSource:i,handlerArgs:s}){var o;const n=this.formatEventLog({eventName:r,eventSource:i,handlerArgs:s});if(n){const a=this.scope?this.logger.scope(this.scope):this.logger;(o=a==null?void 0:a[this.level])==null||o.call(a,...n)}}}return Br=t,Br}var Ur,vo;function Oa(){if(vo)return Ur;vo=1;const{transform:t}=lt();Ur={concatFirstStringElements:e,formatScope:i,formatText:n,formatVariables:s,timeZoneFromOffset:r,format({message:o,logger:a,transport:u,data:h=o==null?void 0:o.data}){switch(typeof u.format){case"string":return t({message:o,logger:a,transforms:[s,i,n],transport:u,initialData:[u.format,...h]});case"function":return u.format({data:h,level:(o==null?void 0:o.level)||"info",logger:a,message:o,transport:u});default:return h}}};function e({data:o}){return typeof o[0]!="string"||typeof o[1]!="string"||o[0].match(/%[1cdfiOos]/)?o:[`${o[0]} ${o[1]}`,...o.slice(2)]}function r(o){const a=Math.abs(o),u=o>0?"-":"+",h=Math.floor(a/60).toString().padStart(2,"0"),c=(a%60).toString().padStart(2,"0");return`${u}${h}:${c}`}function i({data:o,logger:a,message:u}){const{defaultLabel:h,labelLength:c}=(a==null?void 0:a.scope)||{},f=o[0];let l=u.scope;l||(l=h);let d;return l===""?d=c>0?"".padEnd(c+3):"":typeof l=="string"?d=` (${l})`.padEnd(c+3):d="",o[0]=f.replace("{scope}",d),o}function s({data:o,message:a}){let u=o[0];if(typeof u!="string")return o;u=u.replace("{level}]",`${a.level}]`.padEnd(6," "));const h=a.date||new Date;return o[0]=u.replace(/\{(\w+)}/g,(c,f)=>{var l;switch(f){case"level":return a.level||"info";case"logId":return a.logId;case"y":return h.getFullYear().toString(10);case"m":return(h.getMonth()+1).toString(10).padStart(2,"0");case"d":return h.getDate().toString(10).padStart(2,"0");case"h":return h.getHours().toString(10).padStart(2,"0");case"i":return h.getMinutes().toString(10).padStart(2,"0");case"s":return h.getSeconds().toString(10).padStart(2,"0");case"ms":return h.getMilliseconds().toString(10).padStart(3,"0");case"z":return r(h.getTimezoneOffset());case"iso":return h.toISOString();default:return((l=a.variables)==null?void 0:l[f])||c}}).trim(),o}function n({data:o}){const a=o[0];if(typeof a!="string")return o;if(a.lastIndexOf("{text}")===a.length-6)return o[0]=a.replace(/\s?{text}/,""),o[0]===""&&o.shift(),o;const h=a.split("{text}");let c=[];return h[0]!==""&&c.push(h[0]),c=c.concat(o.slice(1)),h[1]!==""&&c.push(h[1]),c}return Ur}var Xr={exports:{}},wo;function fr(){return wo||(wo=1,function(t){const e=Rt;t.exports={serialize:i,maxDepth({data:s,transport:n,depth:o=(n==null?void 0:n.depth)??6}){if(!s)return s;if(o<1)return Array.isArray(s)?"[array]":typeof s=="object"&&s?"[object]":s;if(Array.isArray(s))return s.map(u=>t.exports.maxDepth({data:u,depth:o-1}));if(typeof s!="object"||s&&typeof s.toISOString=="function")return s;if(s===null)return null;if(s instanceof Error)return s;const a={};for(const u in s)Object.prototype.hasOwnProperty.call(s,u)&&(a[u]=t.exports.maxDepth({data:s[u],depth:o-1}));return a},toJSON({data:s}){return JSON.parse(JSON.stringify(s,r()))},toString({data:s,transport:n}){const o=(n==null?void 0:n.inspectOptions)||{},a=s.map(u=>{if(u!==void 0)try{const h=JSON.stringify(u,r(),"  ");return h===void 0?void 0:JSON.parse(h)}catch{return u}});return e.formatWithOptions(o,...a)}};function r(s={}){const n=new WeakSet;return function(o,a){if(typeof a=="object"&&a!==null){if(n.has(a))return;n.add(a)}return i(o,a,s)}}function i(s,n,o={}){const a=(o==null?void 0:o.serializeMapAndSet)!==!1;return n instanceof Error?n.stack:n&&(typeof n=="function"?`[function] ${n.toString()}`:n instanceof Date?n.toISOString():a&&n instanceof Map&&Object.fromEntries?Object.fromEntries(n):a&&n instanceof Set&&Array.from?Array.from(n):n)}}(Xr)),Xr.exports}var Vr,Eo;function Ci(){if(Eo)return Vr;Eo=1,Vr={transformStyles:i,applyAnsiStyles({data:s}){return i(s,e,r)},removeStyles({data:s}){return i(s,()=>"")}};const t={unset:"\x1B[0m",black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"};function e(s){const n=s.replace(/color:\s*(\w+).*/,"$1").toLowerCase();return t[n]||""}function r(s){return s+t.unset}function i(s,n,o){const a={};return s.reduce((u,h,c,f)=>{if(a[c])return u;if(typeof h=="string"){let l=c,d=!1;h=h.replace(/%[1cdfiOos]/g,y=>{if(l+=1,y!=="%c")return y;const v=f[l];return typeof v=="string"?(a[l]=!0,d=!0,n(v,h)):y}),d&&o&&(h=o(h))}return u.push(h),u},[])}return Vr}var zr,bo;function vc(){if(bo)return zr;bo=1;const{concatFirstStringElements:t,format:e}=Oa(),{maxDepth:r,toJSON:i}=fr(),{applyAnsiStyles:s,removeStyles:n}=Ci(),{transform:o}=lt(),a={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};zr=c;const h=`%c{h}:{i}:{s}.{ms}{scope}%c ${process.platform==="win32"?">":"›"} {text}`;Object.assign(c,{DEFAULT_FORMAT:h});function c(v){return Object.assign(E,{format:h,level:"silly",transforms:[f,e,d,t,r,i],useStyles:process.env.FORCE_STYLES,writeFn({message:A}){(a[A.level]||a.info)(...A.data)}});function E(A){const w=o({logger:v,message:A,transport:E});E.writeFn({message:{...A,data:w}})}}function f({data:v,message:E,transport:A}){return typeof A.format!="string"||!A.format.includes("%c")?v:[`color:${y(E.level)}`,"color:unset",...v]}function l(v,E){if(typeof v=="boolean")return v;const w=E==="error"||E==="warn"?process.stderr:process.stdout;return w&&w.isTTY}function d(v){const{message:E,transport:A}=v;return(l(A.useStyles,E.level)?s:n)(v)}function y(v){const E={error:"red",warn:"yellow",info:"cyan",default:"unset"};return E[v]||E.default}return zr}var Wr,So;function Ta(){if(So)return Wr;So=1;const t=ct,e=ae,r=Ye;class i extends t{constructor({path:a,writeOptions:u={encoding:"utf8",flag:"a",mode:438},writeAsync:h=!1}){super();oe(this,"asyncWriteQueue",[]);oe(this,"bytesWritten",0);oe(this,"hasActiveAsyncWriting",!1);oe(this,"path",null);oe(this,"initialSize");oe(this,"writeOptions",null);oe(this,"writeAsync",!1);this.path=a,this.writeOptions=u,this.writeAsync=h}get size(){return this.getSize()}clear(){try{return e.writeFileSync(this.path,"",{mode:this.writeOptions.mode,flag:"w"}),this.reset(),!0}catch(a){return a.code==="ENOENT"?!0:(this.emit("error",a,this),!1)}}crop(a){try{const u=s(this.path,a||4096);this.clear(),this.writeLine(`[log cropped]${r.EOL}${u}`)}catch(u){this.emit("error",new Error(`Couldn't crop file ${this.path}. ${u.message}`),this)}}getSize(){if(this.initialSize===void 0)try{const a=e.statSync(this.path);this.initialSize=a.size}catch{this.initialSize=0}return this.initialSize+this.bytesWritten}increaseBytesWrittenCounter(a){this.bytesWritten+=Buffer.byteLength(a,this.writeOptions.encoding)}isNull(){return!1}nextAsyncWrite(){const a=this;if(this.hasActiveAsyncWriting||this.asyncWriteQueue.length===0)return;const u=this.asyncWriteQueue.join("");this.asyncWriteQueue=[],this.hasActiveAsyncWriting=!0,e.writeFile(this.path,u,this.writeOptions,h=>{a.hasActiveAsyncWriting=!1,h?a.emit("error",new Error(`Couldn't write to ${a.path}. ${h.message}`),this):a.increaseBytesWrittenCounter(u),a.nextAsyncWrite()})}reset(){this.initialSize=void 0,this.bytesWritten=0}toString(){return this.path}writeLine(a){if(a+=r.EOL,this.writeAsync){this.asyncWriteQueue.push(a),this.nextAsyncWrite();return}try{e.writeFileSync(this.path,a,this.writeOptions),this.increaseBytesWrittenCounter(a)}catch(u){this.emit("error",new Error(`Couldn't write to ${this.path}. ${u.message}`),this)}}}Wr=i;function s(n,o){const a=Buffer.alloc(o),u=e.statSync(n),h=Math.min(u.size,o),c=Math.max(0,u.size-o),f=e.openSync(n,"r"),l=e.readSync(f,a,0,h,c);return e.closeSync(f),a.toString("utf8",0,l)}return Wr}var Hr,Oo;function wc(){if(Oo)return Hr;Oo=1;const t=Ta();class e extends t{clear(){}crop(){}getSize(){return 0}isNull(){return!0}writeLine(){}}return Hr=e,Hr}var Gr,To;function Ec(){if(To)return Gr;To=1;const t=ct,e=ae,r=Q,i=Ta(),s=wc();class n extends t{constructor(){super();oe(this,"store",{});this.emitError=this.emitError.bind(this)}provide({filePath:u,writeOptions:h={},writeAsync:c=!1}){let f;try{if(u=r.resolve(u),this.store[u])return this.store[u];f=this.createFile({filePath:u,writeOptions:h,writeAsync:c})}catch(l){f=new s({path:u}),this.emitError(l,f)}return f.on("error",this.emitError),this.store[u]=f,f}createFile({filePath:u,writeOptions:h,writeAsync:c}){return this.testFileWriting({filePath:u,writeOptions:h}),new i({path:u,writeOptions:h,writeAsync:c})}emitError(u,h){this.emit("error",u,h)}testFileWriting({filePath:u,writeOptions:h}){e.mkdirSync(r.dirname(u),{recursive:!0}),e.writeFileSync(u,"",{flag:"a",mode:h.mode})}}return Gr=n,Gr}var Yr,Co;function bc(){if(Co)return Yr;Co=1;const t=ae,e=Ye,r=Q,i=Ec(),{transform:s}=lt(),{removeStyles:n}=Ci(),{format:o,concatFirstStringElements:a}=Oa(),{toString:u}=fr();Yr=c;const h=new i;function c(l,{registry:d=h,externalApi:y}={}){let v;return d.listenerCount("error")<1&&d.on("error",(D,S)=>{w(`Can't write to ${S}`,D)}),Object.assign(E,{fileName:f(l.variables.processType),format:"[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}]{scope} {text}",getFile:g,inspectOptions:{depth:5},level:"silly",maxSize:1024**2,readAllLogs:C,sync:!0,transforms:[n,o,a,u],writeOptions:{flag:"a",mode:438,encoding:"utf8"},archiveLogFn(D){const S=D.toString(),F=r.parse(S);try{t.renameSync(S,r.join(F.dir,`${F.name}.old${F.ext}`))}catch(T){w("Could not rotate log",T);const p=Math.round(E.maxSize/4);D.crop(Math.min(p,256*1024))}},resolvePathFn(D){return r.join(D.libraryDefaultDir,D.fileName)},setAppName(D){l.dependencies.externalApi.setAppName(D)}});function E(D){const S=g(D);E.maxSize>0&&S.size>E.maxSize&&(E.archiveLogFn(S),S.reset());const T=s({logger:l,message:D,transport:E});S.writeLine(T)}function A(){v||(v=Object.create(Object.prototype,{...Object.getOwnPropertyDescriptors(y.getPathVariables()),fileName:{get(){return E.fileName},enumerable:!0}}),typeof E.archiveLog=="function"&&(E.archiveLogFn=E.archiveLog,w("archiveLog is deprecated. Use archiveLogFn instead")),typeof E.resolvePath=="function"&&(E.resolvePathFn=E.resolvePath,w("resolvePath is deprecated. Use resolvePathFn instead")))}function w(D,S=null,F="error"){const T=[`electron-log.transports.file: ${D}`];S&&T.push(S),l.transports.console({data:T,date:new Date,level:F})}function g(D){A();const S=E.resolvePathFn(v,D);return d.provide({filePath:S,writeAsync:!E.sync,writeOptions:E.writeOptions})}function C({fileFilter:D=S=>S.endsWith(".log")}={}){A();const S=r.dirname(E.resolvePathFn(v));return t.existsSync(S)?t.readdirSync(S).map(F=>r.join(S,F)).filter(D).map(F=>{try{return{path:F,lines:t.readFileSync(F,"utf8").split(e.EOL)}}catch{return null}}).filter(Boolean):[]}}function f(l=process.type){switch(l){case"renderer":return"renderer.log";case"worker":return"worker.log";default:return"main.log"}}return Yr}var Jr,Do;function Sc(){if(Do)return Jr;Do=1;const{maxDepth:t,toJSON:e}=fr(),{transform:r}=lt();Jr=i;function i(s,{externalApi:n}){return Object.assign(o,{depth:3,eventId:"__ELECTRON_LOG_IPC__",level:s.isDev?"silly":!1,transforms:[e,t]}),n!=null&&n.isElectron()?o:void 0;function o(a){var u;((u=a==null?void 0:a.variables)==null?void 0:u.processType)!=="renderer"&&(n==null||n.sendIpc(o.eventId,{...a,data:r({logger:s,message:a,transport:o})}))}}return Jr}var Kr,Fo;function Oc(){if(Fo)return Kr;Fo=1;const t=ur,e=cr,{transform:r}=lt(),{removeStyles:i}=Ci(),{toJSON:s,maxDepth:n}=fr();Kr=o;function o(a){return Object.assign(u,{client:{name:"electron-application"},depth:6,level:!1,requestOptions:{},transforms:[i,s,n],makeBodyFn({message:h}){return JSON.stringify({client:u.client,data:h.data,date:h.date.getTime(),level:h.level,scope:h.scope,variables:h.variables})},processErrorFn({error:h}){a.processMessage({data:[`electron-log: can't POST ${u.url}`,h],level:"warn"},{transports:["console","file"]})},sendRequestFn({serverUrl:h,requestOptions:c,body:f}){const d=(h.startsWith("https:")?e:t).request(h,{method:"POST",...c,headers:{"Content-Type":"application/json","Content-Length":f.length,...c.headers}});return d.write(f),d.end(),d}});function u(h){if(!u.url)return;const c=u.makeBodyFn({logger:a,message:{...h,data:r({logger:a,message:h,transport:u})},transport:u}),f=u.sendRequestFn({serverUrl:u.url,requestOptions:u.requestOptions,body:Buffer.from(c,"utf8")});f.on("error",l=>u.processErrorFn({error:l,logger:a,message:h,request:f,transport:u}))}}return Kr}var Qr,_o;function Ca(){if(_o)return Qr;_o=1;const t=ba(),e=yc(),r=gc(),i=vc(),s=bc(),n=Sc(),o=Oc();Qr=a;function a({dependencies:u,initializeFn:h}){var f;const c=new t({dependencies:u,errorHandler:new e,eventLogger:new r,initializeFn:h,isDev:(f=u.externalApi)==null?void 0:f.isDev(),logId:"default",transportFactories:{console:i,file:s,ipc:n,remote:o},variables:{processType:"main"}});return c.default=c,c.Logger=t,c.processInternalErrorFn=l=>{c.transports.console.writeFn({message:{data:["Unhandled electron-log error",l],level:"error"}})},c}return Qr}var Zr,Ao;function Tc(){if(Ao)return Zr;Ao=1;const t=se,e=dc(),{initialize:r}=mc(),i=Ca(),s=new e({electron:t}),n=i({dependencies:{externalApi:s},initializeFn:r});Zr=n,s.onIpc("__ELECTRON_LOG__",(a,u)=>{u.scope&&n.Logger.getInstance(u).scope(u.scope);const h=new Date(u.date);o({...u,date:h.getTime()?h:new Date})}),s.onIpcInvoke("__ELECTRON_LOG__",(a,{cmd:u="",logId:h})=>{switch(u){case"getOptions":return{levels:n.Logger.getInstance({logId:h}).levels,logId:h};default:return o({data:[`Unknown cmd '${u}'`],level:"error"}),{}}});function o(a){var u;(u=n.Logger.getInstance(a))==null||u.processMessage(a)}return Zr}var en,xo;function Cc(){if(xo)return en;xo=1;const t=Sa(),e=Ca(),r=new t;return en=e({dependencies:{externalApi:r}}),en}const Dc=typeof process>"u"||process.type==="renderer"||process.type==="worker",Fc=typeof process=="object"&&process.type==="browser";Dc?(Ea(),tr.exports=hc()):Fc?tr.exports=Tc():tr.exports=Cc();var _c=tr.exports;const re=vt(_c);var Bt,Ac=new Uint8Array(16);function Da(){if(!Bt&&(Bt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Bt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bt(Ac)}const xc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function hr(t){return typeof t=="string"&&xc.test(t)}var Se=[];for(var tn=0;tn<256;++tn)Se.push((tn+256).toString(16).substr(1));function pr(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Se[t[e+0]]+Se[t[e+1]]+Se[t[e+2]]+Se[t[e+3]]+"-"+Se[t[e+4]]+Se[t[e+5]]+"-"+Se[t[e+6]]+Se[t[e+7]]+"-"+Se[t[e+8]]+Se[t[e+9]]+"-"+Se[t[e+10]]+Se[t[e+11]]+Se[t[e+12]]+Se[t[e+13]]+Se[t[e+14]]+Se[t[e+15]]).toLowerCase();if(!hr(r))throw TypeError("Stringified UUID is invalid");return r}var No,rn,nn=0,on=0;function Nc(t,e,r){var i=e&&r||0,s=e||new Array(16);t=t||{};var n=t.node||No,o=t.clockseq!==void 0?t.clockseq:rn;if(n==null||o==null){var a=t.random||(t.rng||Da)();n==null&&(n=No=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=rn=(a[6]<<8|a[7])&16383)}var u=t.msecs!==void 0?t.msecs:Date.now(),h=t.nsecs!==void 0?t.nsecs:on+1,c=u-nn+(h-on)/1e4;if(c<0&&t.clockseq===void 0&&(o=o+1&16383),(c<0||u>nn)&&t.nsecs===void 0&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");nn=u,on=h,rn=o,u+=122192928e5;var f=((u&268435455)*1e4+h)%4294967296;s[i++]=f>>>24&255,s[i++]=f>>>16&255,s[i++]=f>>>8&255,s[i++]=f&255;var l=u/4294967296*1e4&268435455;s[i++]=l>>>8&255,s[i++]=l&255,s[i++]=l>>>24&15|16,s[i++]=l>>>16&255,s[i++]=o>>>8|128,s[i++]=o&255;for(var d=0;d<6;++d)s[i+d]=n[d];return e||pr(s)}function Fa(t){if(!hr(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function Ic(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var Pc="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Lc="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function _a(t,e,r){function i(s,n,o,a){if(typeof s=="string"&&(s=Ic(s)),typeof n=="string"&&(n=Fa(n)),n.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+s.length);if(u.set(n),u.set(s,n.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(var h=0;h<16;++h)o[a+h]=u[h];return o}return pr(u)}try{i.name=t}catch{}return i.DNS=Pc,i.URL=Lc,i}function Mc(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return $c(Rc(kc(t),t.length*8))}function $c(t){for(var e=[],r=t.length*32,i="0123456789abcdef",s=0;s<r;s+=8){var n=t[s>>5]>>>s%32&255,o=parseInt(i.charAt(n>>>4&15)+i.charAt(n&15),16);e.push(o)}return e}function Aa(t){return(t+64>>>9<<4)+14+1}function Rc(t,e){t[e>>5]|=128<<e%32,t[Aa(e)-1]=e;for(var r=1732584193,i=-271733879,s=-1732584194,n=271733878,o=0;o<t.length;o+=16){var a=r,u=i,h=s,c=n;r=Ce(r,i,s,n,t[o],7,-680876936),n=Ce(n,r,i,s,t[o+1],12,-389564586),s=Ce(s,n,r,i,t[o+2],17,606105819),i=Ce(i,s,n,r,t[o+3],22,-1044525330),r=Ce(r,i,s,n,t[o+4],7,-176418897),n=Ce(n,r,i,s,t[o+5],12,1200080426),s=Ce(s,n,r,i,t[o+6],17,-1473231341),i=Ce(i,s,n,r,t[o+7],22,-45705983),r=Ce(r,i,s,n,t[o+8],7,1770035416),n=Ce(n,r,i,s,t[o+9],12,-1958414417),s=Ce(s,n,r,i,t[o+10],17,-42063),i=Ce(i,s,n,r,t[o+11],22,-1990404162),r=Ce(r,i,s,n,t[o+12],7,1804603682),n=Ce(n,r,i,s,t[o+13],12,-40341101),s=Ce(s,n,r,i,t[o+14],17,-1502002290),i=Ce(i,s,n,r,t[o+15],22,1236535329),r=De(r,i,s,n,t[o+1],5,-165796510),n=De(n,r,i,s,t[o+6],9,-1069501632),s=De(s,n,r,i,t[o+11],14,643717713),i=De(i,s,n,r,t[o],20,-373897302),r=De(r,i,s,n,t[o+5],5,-701558691),n=De(n,r,i,s,t[o+10],9,38016083),s=De(s,n,r,i,t[o+15],14,-660478335),i=De(i,s,n,r,t[o+4],20,-405537848),r=De(r,i,s,n,t[o+9],5,568446438),n=De(n,r,i,s,t[o+14],9,-1019803690),s=De(s,n,r,i,t[o+3],14,-187363961),i=De(i,s,n,r,t[o+8],20,1163531501),r=De(r,i,s,n,t[o+13],5,-1444681467),n=De(n,r,i,s,t[o+2],9,-51403784),s=De(s,n,r,i,t[o+7],14,1735328473),i=De(i,s,n,r,t[o+12],20,-1926607734),r=Fe(r,i,s,n,t[o+5],4,-378558),n=Fe(n,r,i,s,t[o+8],11,-2022574463),s=Fe(s,n,r,i,t[o+11],16,1839030562),i=Fe(i,s,n,r,t[o+14],23,-35309556),r=Fe(r,i,s,n,t[o+1],4,-1530992060),n=Fe(n,r,i,s,t[o+4],11,1272893353),s=Fe(s,n,r,i,t[o+7],16,-155497632),i=Fe(i,s,n,r,t[o+10],23,-1094730640),r=Fe(r,i,s,n,t[o+13],4,681279174),n=Fe(n,r,i,s,t[o],11,-358537222),s=Fe(s,n,r,i,t[o+3],16,-722521979),i=Fe(i,s,n,r,t[o+6],23,76029189),r=Fe(r,i,s,n,t[o+9],4,-640364487),n=Fe(n,r,i,s,t[o+12],11,-421815835),s=Fe(s,n,r,i,t[o+15],16,530742520),i=Fe(i,s,n,r,t[o+2],23,-995338651),r=_e(r,i,s,n,t[o],6,-198630844),n=_e(n,r,i,s,t[o+7],10,1126891415),s=_e(s,n,r,i,t[o+14],15,-1416354905),i=_e(i,s,n,r,t[o+5],21,-57434055),r=_e(r,i,s,n,t[o+12],6,1700485571),n=_e(n,r,i,s,t[o+3],10,-1894986606),s=_e(s,n,r,i,t[o+10],15,-1051523),i=_e(i,s,n,r,t[o+1],21,-2054922799),r=_e(r,i,s,n,t[o+8],6,1873313359),n=_e(n,r,i,s,t[o+15],10,-30611744),s=_e(s,n,r,i,t[o+6],15,-1560198380),i=_e(i,s,n,r,t[o+13],21,1309151649),r=_e(r,i,s,n,t[o+4],6,-145523070),n=_e(n,r,i,s,t[o+11],10,-1120210379),s=_e(s,n,r,i,t[o+2],15,718787259),i=_e(i,s,n,r,t[o+9],21,-343485551),r=nt(r,a),i=nt(i,u),s=nt(s,h),n=nt(n,c)}return[r,i,s,n]}function kc(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(Aa(e)),i=0;i<e;i+=8)r[i>>5]|=(t[i/8]&255)<<i%32;return r}function nt(t,e){var r=(t&65535)+(e&65535),i=(t>>16)+(e>>16)+(r>>16);return i<<16|r&65535}function jc(t,e){return t<<e|t>>>32-e}function dr(t,e,r,i,s,n){return nt(jc(nt(nt(e,t),nt(i,n)),s),r)}function Ce(t,e,r,i,s,n,o){return dr(e&r|~e&i,t,e,s,n,o)}function De(t,e,r,i,s,n,o){return dr(e&i|r&~i,t,e,s,n,o)}function Fe(t,e,r,i,s,n,o){return dr(e^r^i,t,e,s,n,o)}function _e(t,e,r,i,s,n,o){return dr(r^(e|~i),t,e,s,n,o)}var qc=_a("v3",48,Mc);const Bc=qc;function Uc(t,e,r){t=t||{};var i=t.random||(t.rng||Da)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=i[s];return e}return pr(i)}function Xc(t,e,r,i){switch(t){case 0:return e&r^~e&i;case 1:return e^r^i;case 2:return e&r^e&i^r&i;case 3:return e^r^i}}function sn(t,e){return t<<e|t>>>32-e}function Vc(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var i=unescape(encodeURIComponent(t));t=[];for(var s=0;s<i.length;++s)t.push(i.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var n=t.length/4+2,o=Math.ceil(n/16),a=new Array(o),u=0;u<o;++u){for(var h=new Uint32Array(16),c=0;c<16;++c)h[c]=t[u*64+c*4]<<24|t[u*64+c*4+1]<<16|t[u*64+c*4+2]<<8|t[u*64+c*4+3];a[u]=h}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var f=0;f<o;++f){for(var l=new Uint32Array(80),d=0;d<16;++d)l[d]=a[f][d];for(var y=16;y<80;++y)l[y]=sn(l[y-3]^l[y-8]^l[y-14]^l[y-16],1);for(var v=r[0],E=r[1],A=r[2],w=r[3],g=r[4],C=0;C<80;++C){var D=Math.floor(C/20),S=sn(v,5)+Xc(D,E,A,w)+g+e[D]+l[C]>>>0;g=w,w=A,A=sn(E,30)>>>0,E=v,v=S}r[0]=r[0]+v>>>0,r[1]=r[1]+E>>>0,r[2]=r[2]+A>>>0,r[3]=r[3]+w>>>0,r[4]=r[4]+g>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var zc=_a("v5",80,Vc);const Wc=zc,Hc="00000000-0000-0000-0000-000000000000";function Gc(t){if(!hr(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const Yc=Object.freeze(Object.defineProperty({__proto__:null,NIL:Hc,parse:Fa,stringify:pr,v1:Nc,v3:Bc,v4:Uc,v5:Wc,validate:hr,version:Gc},Symbol.toStringTag,{value:"Module"})),Jc=sc(Yc),Kc=Ku,Ut=lr,{v1:im,v4:Qc}=Jc;let Zc=class{constructor(e){Ut(e,'must pass "config"'),Ut(e.url,'must pass "url"'),Ut(e.appkey,'must pass "appkey"'),Ut(e.token,"must first get token from cache or getToken interface"),this._config=e}start(e,r){if(typeof e!="function")throw new Error("expect function onmessage");if(typeof r!="function")throw new Error("expect function onclose");return this._ws=new Kc(this._config.url,{headers:{"X-NLS-Token":this._config.token},perMessageDeflate:!1}),this._ws.on("message",(i,s)=>{e(i,s)}),this._ws.on("close",()=>{r()}),new Promise((i,s)=>{this._ws.on("open",()=>{i()}),this._ws.on("error",n=>{s(n)})})}send(e,r){this._ws!=null&&this._ws.send(e,{binary:r})}setPing(e,r){this._ping=setInterval(()=>{this._ws.ping(r)},e)}clearPing(){this._ping&&clearInterval(this._ping)}shutdown(){this._ws!=null&&(this._ping!=null&&clearInterval(this._ping),this._ws.terminate())}uuid(){return Qc().split("-").join("")}defaultContext(){return{sdk:{name:"nls-nodejs-sdk",version:"0.0.1",language:"nodejs"}}}};var el=Zc;ct.EventEmitter;ct.EventEmitter;const tl=el,rl=ct.EventEmitter;class nl{constructor(e,r=!1){this._event=new rl,this._config=e,r?this._namespace="SpeechLongSynthesizer":this._namespace="SpeechSynthesizer"}defaultStartParams(e){return{voice:e,format:"wav",sample_rate:16e3,volume:50,speech_rate:0,pitch_rate:0,enable_subtitle:!1}}on(e,r){this._event.on(e,r)}async start(e,r,i){this._client=new tl(this._config),this._taskid=this._client.uuid();let s={header:{message_id:this._client.uuid(),task_id:this._taskid,namespace:this._namespace,name:"StartSynthesis",appkey:this._config.appkey},payload:e,context:this._client.defaultContext()};return new Promise(async(n,o)=>{try{await this._client.start((a,u)=>{if(u)this._event.emit("data",a);else{let h=a.toString(),c=JSON.parse(h);c.header.name==="MetaInfo"?this._event.emit("meta",h):c.header.name==="SynthesisCompleted"?(this._client.clearPing(),this._client.shutdown(),this._client=null,this._event.emit("completed",h),n(h)):c.header.name==="TaskFailed"&&(this._client.clearPing(),this._client.shutdown(),this._client=null,this._event.emit("TaskFailed",h),this._event.emit("failed",h),o(h))}},()=>{this._event.emit("closed")}),r&&(i||(i=6e3),this._client.setPing(i)),this._client.send(JSON.stringify(s),!1)}catch(a){o(a)}})}shutdown(){this._client!=null&&this._client.shutdown()}}var il=nl;const ol=vt(il),ir={accessKeyId:"LTAI5tFCh5eoiNZX4n2wEy7Y",accessKeySecret:"XWYRzwspo5z4Ukuo8lKxZX4pUSgQ86",appkey:"JbBUqMYRUt0DrMcK",endpoint:"https://nls-gateway.aliyuncs.com",regionId:"cn-shanghai",ttsUrl:"wss://nls-gateway-cn-shanghai.aliyuncs.com/ws/v1"};var mr={exports:{}},wt={},di={exports:{}},Xt={exports:{}},an,Io;function xa(){if(Io)return an;Io=1;var t=1e3,e=t*60,r=e*60,i=r*24,s=i*7,n=i*365.25;an=function(c,f){f=f||{};var l=typeof c;if(l==="string"&&c.length>0)return o(c);if(l==="number"&&isFinite(c))return f.long?u(c):a(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function o(c){if(c=String(c),!(c.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(f){var l=parseFloat(f[1]),d=(f[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return l*n;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*i;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*e;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}function a(c){var f=Math.abs(c);return f>=i?Math.round(c/i)+"d":f>=r?Math.round(c/r)+"h":f>=e?Math.round(c/e)+"m":f>=t?Math.round(c/t)+"s":c+"ms"}function u(c){var f=Math.abs(c);return f>=i?h(c,f,i,"day"):f>=r?h(c,f,r,"hour"):f>=e?h(c,f,e,"minute"):f>=t?h(c,f,t,"second"):c+" ms"}function h(c,f,l,d){var y=f>=l*1.5;return Math.round(c/l)+" "+d+(y?"s":"")}return an}var un,Po;function Na(){if(Po)return un;Po=1;function t(e){i.debug=i,i.default=i,i.coerce=h,i.disable=a,i.enable=n,i.enabled=u,i.humanize=xa(),i.destroy=c,Object.keys(e).forEach(f=>{i[f]=e[f]}),i.names=[],i.skips=[],i.formatters={};function r(f){let l=0;for(let d=0;d<f.length;d++)l=(l<<5)-l+f.charCodeAt(d),l|=0;return i.colors[Math.abs(l)%i.colors.length]}i.selectColor=r;function i(f){let l,d=null,y,v;function E(...A){if(!E.enabled)return;const w=E,g=Number(new Date),C=g-(l||g);w.diff=C,w.prev=l,w.curr=g,l=g,A[0]=i.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let D=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(F,T)=>{if(F==="%%")return"%";D++;const p=i.formatters[T];if(typeof p=="function"){const b=A[D];F=p.call(w,b),A.splice(D,1),D--}return F}),i.formatArgs.call(w,A),(w.log||i.log).apply(w,A)}return E.namespace=f,E.useColors=i.useColors(),E.color=i.selectColor(f),E.extend=s,E.destroy=i.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(y!==i.namespaces&&(y=i.namespaces,v=i.enabled(f)),v),set:A=>{d=A}}),typeof i.init=="function"&&i.init(E),E}function s(f,l){const d=i(this.namespace+(typeof l>"u"?":":l)+f);return d.log=this.log,d}function n(f){i.save(f),i.namespaces=f,i.names=[],i.skips=[];const l=(typeof f=="string"?f:"").trim().replace(" ",",").split(",").filter(Boolean);for(const d of l)d[0]==="-"?i.skips.push(d.slice(1)):i.names.push(d)}function o(f,l){let d=0,y=0,v=-1,E=0;for(;d<f.length;)if(y<l.length&&(l[y]===f[d]||l[y]==="*"))l[y]==="*"?(v=y,E=d,y++):(d++,y++);else if(v!==-1)y=v+1,E++,d=E;else return!1;for(;y<l.length&&l[y]==="*";)y++;return y===l.length}function a(){const f=[...i.names,...i.skips.map(l=>"-"+l)].join(",");return i.enable(""),f}function u(f){for(const l of i.skips)if(o(f,l))return!1;for(const l of i.names)if(o(f,l))return!0;return!1}function h(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}return un=t,un}var Lo;function sl(){return Lo||(Lo=1,function(t,e){e.formatArgs=i,e.save=s,e.load=n,e.useColors=r,e.storage=o(),e.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const h="color: "+this.color;u.splice(1,0,h,"color: inherit");let c=0,f=0;u[0].replace(/%[a-zA-Z%]/g,l=>{l!=="%%"&&(c++,l==="%c"&&(f=c))}),u.splice(f,0,h)}e.log=console.debug||console.log||(()=>{});function s(u){try{u?e.storage.setItem("debug",u):e.storage.removeItem("debug")}catch{}}function n(){let u;try{u=e.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=process.env.DEBUG),u}function o(){try{return localStorage}catch{}}t.exports=Na()(e);const{formatters:a}=t.exports;a.j=function(u){try{return JSON.stringify(u)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}(Xt,Xt.exports)),Xt.exports}var Vt={exports:{}},cn,Mo;function al(){return Mo||(Mo=1,cn=(t,e=process.argv)=>{const r=t.startsWith("-")?"":t.length===1?"-":"--",i=e.indexOf(r+t),s=e.indexOf("--");return i!==-1&&(s===-1||i<s)}),cn}var ln,$o;function Ia(){if($o)return ln;$o=1;const t=Ye,e=Ti,r=al(),{env:i}=process;let s;r("no-color")||r("no-colors")||r("color=false")||r("color=never")?s=0:(r("color")||r("colors")||r("color=true")||r("color=always"))&&(s=1),"FORCE_COLOR"in i&&(i.FORCE_COLOR==="true"?s=1:i.FORCE_COLOR==="false"?s=0:s=i.FORCE_COLOR.length===0?1:Math.min(parseInt(i.FORCE_COLOR,10),3));function n(u){return u===0?!1:{level:u,hasBasic:!0,has256:u>=2,has16m:u>=3}}function o(u,h){if(s===0)return 0;if(r("color=16m")||r("color=full")||r("color=truecolor"))return 3;if(r("color=256"))return 2;if(u&&!h&&s===void 0)return 0;const c=s||0;if(i.TERM==="dumb")return c;if(process.platform==="win32"){const f=t.release().split(".");return Number(f[0])>=10&&Number(f[2])>=10586?Number(f[2])>=14931?3:2:1}if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(f=>f in i)||i.CI_NAME==="codeship"?1:c;if("TEAMCITY_VERSION"in i)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION)?1:0;if(i.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in i){const f=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return f>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)||"COLORTERM"in i?1:c}function a(u){const h=o(u,u&&u.isTTY);return n(h)}return ln={supportsColor:a,stdout:n(o(!0,e.isatty(1))),stderr:n(o(!0,e.isatty(2)))},ln}var Ro;function ul(){return Ro||(Ro=1,function(t,e){const r=Ti,i=Rt;e.init=c,e.log=a,e.formatArgs=n,e.save=u,e.load=h,e.useColors=s,e.destroy=i.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),e.colors=[6,2,3,4,5,1];try{const l=Ia();l&&(l.stderr||l).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}e.inspectOpts=Object.keys(process.env).filter(l=>/^debug_/i.test(l)).reduce((l,d)=>{const y=d.substring(6).toLowerCase().replace(/_([a-z])/g,(E,A)=>A.toUpperCase());let v=process.env[d];return/^(yes|on|true|enabled)$/i.test(v)?v=!0:/^(no|off|false|disabled)$/i.test(v)?v=!1:v==="null"?v=null:v=Number(v),l[y]=v,l},{});function s(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:r.isatty(process.stderr.fd)}function n(l){const{namespace:d,useColors:y}=this;if(y){const v=this.color,E="\x1B[3"+(v<8?v:"8;5;"+v),A=`  ${E};1m${d} \x1B[0m`;l[0]=A+l[0].split(`
`).join(`
`+A),l.push(E+"m+"+t.exports.humanize(this.diff)+"\x1B[0m")}else l[0]=o()+d+" "+l[0]}function o(){return e.inspectOpts.hideDate?"":new Date().toISOString()+" "}function a(...l){return process.stderr.write(i.formatWithOptions(e.inspectOpts,...l)+`
`)}function u(l){l?process.env.DEBUG=l:delete process.env.DEBUG}function h(){return process.env.DEBUG}function c(l){l.inspectOpts={};const d=Object.keys(e.inspectOpts);for(let y=0;y<d.length;y++)l.inspectOpts[d[y]]=e.inspectOpts[d[y]]}t.exports=Na()(e);const{formatters:f}=t.exports;f.o=function(l){return this.inspectOpts.colors=this.useColors,i.inspect(l,this.inspectOpts).split(`
`).map(d=>d.trim()).join(" ")},f.O=function(l){return this.inspectOpts.colors=this.useColors,i.inspect(l,this.inspectOpts)}}(Vt,Vt.exports)),Vt.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?di.exports=sl():di.exports=ul();var Pa=di.exports;const ko=Qu,La=ur,Ma=cr,cl=Oi.parse,ll=Oi.format,Ue=Pa("httpx:body"),zt=Pa("httpx:header"),fl=new La.Agent({keepAlive:!0}),hl=new Ma.Agent({keepAlive:!0}),fn=3e3,et=Symbol("TIMER::READ_TIMER"),mi=Symbol("TIMER::READ_TIME_OUT"),$a=Symbol("TIMER::READ_TIMER_START_AT");function Ra(t){switch(t.headers["content-encoding"]){case"gzip":return t.pipe(ko.createGunzip());case"deflate":return t.pipe(ko.createInflate());default:return t}}var jo=function(t,e,r){return t.name=e+t.name,t.message=`${r}. ${t.message}`,t};const Ot=function(t){return t!==null&&!isNaN(t)};wt.request=function(t,e){e||(e={});const r=typeof t=="string"?cl(t):t;let i,s;Ot(e.readTimeout)||Ot(e.connectTimeout)?(i=Ot(e.readTimeout)?Number(e.readTimeout):fn,s=Ot(e.connectTimeout)?Number(e.connectTimeout):fn):Ot(e.timeout)?i=s=Number(e.timeout):i=s=fn;const n=r.protocol==="https:",o=(e.method||"GET").toUpperCase(),a=n?hl:fl,u=e.agent||a;var h={host:r.hostname||"localhost",path:r.path||"/",method:o,port:r.port||(r.protocol==="https:"?443:80),agent:u,headers:e.headers||{},key:e.key||"",cert:e.cert||"",ca:e.ca||"",timeout:s};n&&typeof e.rejectUnauthorized<"u"&&(h.rejectUnauthorized=e.rejectUnauthorized),e.compression&&(h.headers["accept-encoding"]="gzip,deflate");const c=n?Ma:La;return typeof e.beforeRequest=="function"&&(h=e.beforeRequest(h)),new Promise((f,l)=>{const d=c.request(h),y=e.data;var v=g=>{zt.enabled&&(g.req._header.split(`\r
`).forEach(D=>{zt("> %s",D)}),zt("< HTTP/%s %s %s",g.httpVersion,g.statusCode,g.statusMessage),Object.keys(g.headers).forEach(D=>{zt("< %s: %s",D,g.headers[D])})),f(g)},E=g=>{g.message+=`${o} ${ll(r)} failed.`,d.socket&&d.socket[et]&&clearTimeout(d.socket[et]),l(g)},A=g=>{d.abort(),E(g)};const w=function(g){const C=setTimeout(()=>{g[et]&&(clearTimeout(g[et]),g[et]=null);var D=new Error,S=`ReadTimeout(${i})`;A(jo(D,"RequestTimeout",S))},i);g[mi]=i,g[et]=C,g[$a]=Date.now(),C.unref()};!y||typeof y=="string"||y instanceof Buffer?(Ue.enabled&&Ue(y?typeof y=="string"?y:`Buffer <ignored>, Buffer length: ${y.length}`:"<no request body>"),d.end(y)):typeof y.pipe=="function"&&(y.pipe(d),Ue.enabled&&Ue("<request body is a stream>"),y.once("error",g=>{A(jo(g,"HttpX","Stream occor error"))})),d.on("timeout",()=>{var g=new Error;g.name="RequestTimeoutError",g.message=`ConnectTimeout: Connect ${t} failed.`,d.destroy(),l(g)}),d.on("response",v),d.on("error",E),d.once("socket",function(g){g.readyState==="opening"?g.once("connect",function(){w(g)}):w(g)})})};wt.read=function(t,e){const r=Ra(t);return new Promise((i,s)=>{const n=t.socket||t.client,o=()=>{const E=t.req;var A=new Error;return A.name="RequestTimeoutError",A.message=`ReadTimeout: ${n[mi]}. ${E.method} ${E.path} failed.`,A};let a;const u=n[et];if(!u){s(o());return}const h=n[mi]-(Date.now()-n[$a]);if(clearTimeout(u),h<=0){s(o());return}a=setTimeout(function(){s(o())},h);var c,f,l,d=function(){r.removeListener("error",c),r.removeListener("data",f),r.removeListener("end",l),a&&clearTimeout(a)};const y=[];var v=0;f=function(E){y.push(E),v+=E.length},c=function(E){d(),s(E)},l=function(){d();var E=Buffer.concat(y,v);if(Ue(""),e){const A=E.toString(e);return Ue(A),i(A)}Ue.enabled&&Ue(E.toString()),i(E)},r.on("error",c),r.on("data",f),r.on("end",l)})};function pl(t){return new Promise((e,r)=>{var i,s,n,o=function(){t.removeListener("error",n),t.removeListener("end",s),t.removeListener("readable",i)};i=function(){o(),e(!1)},s=function(){o(),e(!0)},n=function(a){o(),r(a)},t.once("readable",i),t.once("end",s),t.once("error",n)})}class ka{constructor(e,r,i,s){this.id=e,this.event=r,this.data=i,this.retry=s}}wt.Event=ka;const qo="data:",Bo="event:",Uo="id:",Xo="retry:";function dl(t){for(let e=0;e<t.length;e++){const r=t.charAt(e);if(r<"0"||r>"9")return!1}return t.length>0}function ml(t,e){const r=t+e;let i=0;const s=[];for(let o=0;o<r.length-1;o++){const a=r[o],u=r[o+1];if(a===`
`&&u===`
`){const c=r.substring(i,o).split(`
`),f=new ka;c.forEach(l=>{if(l.startsWith(qo))f.data=l.substring(qo.length).trim();else if(l.startsWith(Bo))f.event=l.substring(Bo.length).trim();else if(l.startsWith(Uo))f.id=l.substring(Uo.length).trim();else if(l.startsWith(Xo)){const d=l.substring(Xo.length).trim();dl(d)&&(f.retry=parseInt(d,10))}else l.startsWith(":")}),s.push(f),i=o+2}}const n=r.substring(i);return[s,n]}wt.readAsSSE=async function*(t){const e=Ra(t),r=t.socket||t.client;clearTimeout(r[et]);let i="";for(;;){if(await pl(e))return;let n;for(;(n=e.read())!==null;){const[o,a]=ml(i,n.toString());if(i=a,o&&o.length>0)for(const u of o)yield u}}};var Di={};(function(t){const e=ae,r=Ye,i=je;t.loadJSONSync=function(s){var n=e.readFileSync(s,"utf8");n.charCodeAt(0)===65279&&(n=n.slice(1));try{return JSON.parse(n)}catch(o){throw o.message=s+": "+o.message,o}},t.encode=function(s,n){return typeof s!="string"&&(s=""+s),new Buffer(s,n)},t.makeHasher=function(s){return function(n,o){var a=i.createHash(s);return a.update(n),a.digest(o)}},t.createHash=t.makeHasher,t.md5=t.makeHasher("md5"),t.createHmac=function(s){return function(n,o,a){return i.createHmac(s,o).update(n).digest(a)}},t.sha1=t.createHmac("sha1"),t.random=function(s,n){return Math.floor(s+Math.random()*(n-s))},t.makeNonce=function(){var s=0,n;const o=r.hostname(),a=process.pid;return function(){var u=Math.floor(Math.random()*1e12);u===n?s++:s=0,n=u;var h=`${o}${a}${u}${s}`;return t.md5(h,"hex")}}(),t.pad2=function(s){return s<10?"0"+s:""+s},t.pad3=function(s){return s<10?"00"+s:s<100?"0"+s:""+s},t.getYYYYMMDD=function(s){var n=s.getFullYear(),o=t.pad2(s.getMonth()+1),a=t.pad2(s.getDate());return""+n+o+a},t.sleep=function(s){return new Promise(n=>{setTimeout(n,s)})},t.getIPv4=function(){for(var s=r.networkInterfaces(),n=Object.keys(s),o=0;o<n.length;o++)for(var a=n[o],u=s[a],h=0;h<u.length;h++){var c=u[h];if(!c.internal&&c.family==="IPv4")return c.address}return""},t.getMac=function(){for(var s=r.networkInterfaces(),n=Object.keys(s),o=0;o<n.length;o++)for(var a=n[o],u=s[a],h=0;h<u.length;h++){var c=u[h];if(!c.internal&&c.family==="IPv4")return c.mac}return"00:00:00:00:00:00"}})(Di);var yr={exports:{}},ja={exports:{}},qa={exports:{}};(function(t){(function(e){var r,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,n=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",u=1e14,h=14,c=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],l=1e7,d=1e9;function y(S){var F,T,p,b=Y.prototype={constructor:Y,toString:null,valueOf:null},_=new Y(1),P=20,V=4,q=-7,B=21,z=-1e7,W=1e7,J=!1,K=1,Z=0,ne={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},ue="0123456789abcdefghijklmnopqrstuvwxyz",pe=!0;function Y(m,N){var I,k,M,$,X,L,R,U,j=this;if(!(j instanceof Y))return new Y(m,N);if(N==null){if(m&&m._isBigNumber===!0){j.s=m.s,!m.c||m.e>W?j.c=j.e=null:m.e<z?j.c=[j.e=0]:(j.e=m.e,j.c=m.c.slice());return}if((L=typeof m=="number")&&m*0==0){if(j.s=1/m<0?(m=-m,-1):1,m===~~m){for($=0,X=m;X>=10;X/=10,$++);$>W?j.c=j.e=null:(j.e=$,j.c=[m]);return}U=String(m)}else{if(!i.test(U=String(m)))return p(j,U,L);j.s=U.charCodeAt(0)==45?(U=U.slice(1),-1):1}($=U.indexOf("."))>-1&&(U=U.replace(".","")),(X=U.search(/e/i))>0?($<0&&($=X),$+=+U.slice(X+1),U=U.substring(0,X)):$<0&&($=U.length)}else{if(w(N,2,ue.length,"Base"),N==10&&pe)return j=new Y(m),O(j,P+j.e+1,V);if(U=String(m),L=typeof m=="number"){if(m*0!=0)return p(j,U,L,N);if(j.s=1/m<0?(U=U.slice(1),-1):1,Y.DEBUG&&U.replace(/^0\.0*|\./,"").length>15)throw Error(a+m)}else j.s=U.charCodeAt(0)===45?(U=U.slice(1),-1):1;for(I=ue.slice(0,N),$=X=0,R=U.length;X<R;X++)if(I.indexOf(k=U.charAt(X))<0){if(k=="."){if(X>$){$=R;continue}}else if(!M&&(U==U.toUpperCase()&&(U=U.toLowerCase())||U==U.toLowerCase()&&(U=U.toUpperCase()))){M=!0,X=-1,$=0;continue}return p(j,String(m),L,N)}L=!1,U=T(U,N,10,j.s),($=U.indexOf("."))>-1?U=U.replace(".",""):$=U.length}for(X=0;U.charCodeAt(X)===48;X++);for(R=U.length;U.charCodeAt(--R)===48;);if(U=U.slice(X,++R)){if(R-=X,L&&Y.DEBUG&&R>15&&(m>c||m!==n(m)))throw Error(a+j.s*m);if(($=$-X-1)>W)j.c=j.e=null;else if($<z)j.c=[j.e=0];else{if(j.e=$,j.c=[],X=($+1)%h,$<0&&(X+=h),X<R){for(X&&j.c.push(+U.slice(0,X)),R-=h;X<R;)j.c.push(+U.slice(X,X+=h));X=h-(U=U.slice(X)).length}else X-=R;for(;X--;U+="0");j.c.push(+U)}}else j.c=[j.e=0]}Y.clone=y,Y.ROUND_UP=0,Y.ROUND_DOWN=1,Y.ROUND_CEIL=2,Y.ROUND_FLOOR=3,Y.ROUND_HALF_UP=4,Y.ROUND_HALF_DOWN=5,Y.ROUND_HALF_EVEN=6,Y.ROUND_HALF_CEIL=7,Y.ROUND_HALF_FLOOR=8,Y.EUCLID=9,Y.config=Y.set=function(m){var N,I;if(m!=null)if(typeof m=="object"){if(m.hasOwnProperty(N="DECIMAL_PLACES")&&(I=m[N],w(I,0,d,N),P=I),m.hasOwnProperty(N="ROUNDING_MODE")&&(I=m[N],w(I,0,8,N),V=I),m.hasOwnProperty(N="EXPONENTIAL_AT")&&(I=m[N],I&&I.pop?(w(I[0],-d,0,N),w(I[1],0,d,N),q=I[0],B=I[1]):(w(I,-d,d,N),q=-(B=I<0?-I:I))),m.hasOwnProperty(N="RANGE"))if(I=m[N],I&&I.pop)w(I[0],-d,-1,N),w(I[1],1,d,N),z=I[0],W=I[1];else if(w(I,-d,d,N),I)z=-(W=I<0?-I:I);else throw Error(o+N+" cannot be zero: "+I);if(m.hasOwnProperty(N="CRYPTO"))if(I=m[N],I===!!I)if(I)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))J=I;else throw J=!I,Error(o+"crypto unavailable");else J=I;else throw Error(o+N+" not true or false: "+I);if(m.hasOwnProperty(N="MODULO_MODE")&&(I=m[N],w(I,0,9,N),K=I),m.hasOwnProperty(N="POW_PRECISION")&&(I=m[N],w(I,0,d,N),Z=I),m.hasOwnProperty(N="FORMAT"))if(I=m[N],typeof I=="object")ne=I;else throw Error(o+N+" not an object: "+I);if(m.hasOwnProperty(N="ALPHABET"))if(I=m[N],typeof I=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(I))pe=I.slice(0,10)=="0123456789",ue=I;else throw Error(o+N+" invalid: "+I)}else throw Error(o+"Object expected: "+m);return{DECIMAL_PLACES:P,ROUNDING_MODE:V,EXPONENTIAL_AT:[q,B],RANGE:[z,W],CRYPTO:J,MODULO_MODE:K,POW_PRECISION:Z,FORMAT:ne,ALPHABET:ue}},Y.isBigNumber=function(m){if(!m||m._isBigNumber!==!0)return!1;if(!Y.DEBUG)return!0;var N,I,k=m.c,M=m.e,$=m.s;e:if({}.toString.call(k)=="[object Array]"){if(($===1||$===-1)&&M>=-d&&M<=d&&M===n(M)){if(k[0]===0){if(M===0&&k.length===1)return!0;break e}if(N=(M+1)%h,N<1&&(N+=h),String(k[0]).length==N){for(N=0;N<k.length;N++)if(I=k[N],I<0||I>=u||I!==n(I))break e;if(I!==0)return!0}}}else if(k===null&&M===null&&($===null||$===1||$===-1))return!0;throw Error(o+"Invalid BigNumber: "+m)},Y.maximum=Y.max=function(){return Re(arguments,-1)},Y.minimum=Y.min=function(){return Re(arguments,1)},Y.random=function(){var m=9007199254740992,N=Math.random()*m&2097151?function(){return n(Math.random()*m)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(I){var k,M,$,X,L,R=0,U=[],j=new Y(_);if(I==null?I=P:w(I,0,d),X=s(I/h),J)if(crypto.getRandomValues){for(k=crypto.getRandomValues(new Uint32Array(X*=2));R<X;)L=k[R]*131072+(k[R+1]>>>11),L>=9e15?(M=crypto.getRandomValues(new Uint32Array(2)),k[R]=M[0],k[R+1]=M[1]):(U.push(L%1e14),R+=2);R=X/2}else if(crypto.randomBytes){for(k=crypto.randomBytes(X*=7);R<X;)L=(k[R]&31)*281474976710656+k[R+1]*1099511627776+k[R+2]*4294967296+k[R+3]*16777216+(k[R+4]<<16)+(k[R+5]<<8)+k[R+6],L>=9e15?crypto.randomBytes(7).copy(k,R):(U.push(L%1e14),R+=7);R=X/7}else throw J=!1,Error(o+"crypto unavailable");if(!J)for(;R<X;)L=N(),L<9e15&&(U[R++]=L%1e14);for(X=U[--R],I%=h,X&&I&&(L=f[h-I],U[R]=n(X/L)*L);U[R]===0;U.pop(),R--);if(R<0)U=[$=0];else{for($=-1;U[0]===0;U.splice(0,1),$-=h);for(R=1,L=U[0];L>=10;L/=10,R++);R<h&&($-=h-R)}return j.e=$,j.c=U,j}}(),Y.sum=function(){for(var m=1,N=arguments,I=new Y(N[0]);m<N.length;)I=I.plus(N[m++]);return I},T=function(){var m="0123456789";function N(I,k,M,$){for(var X,L=[0],R,U=0,j=I.length;U<j;){for(R=L.length;R--;L[R]*=k);for(L[0]+=$.indexOf(I.charAt(U++)),X=0;X<L.length;X++)L[X]>M-1&&(L[X+1]==null&&(L[X+1]=0),L[X+1]+=L[X]/M|0,L[X]%=M)}return L.reverse()}return function(I,k,M,$,X){var L,R,U,j,G,ee,te,fe,me=I.indexOf("."),we=P,le=V;for(me>=0&&(j=Z,Z=0,I=I.replace(".",""),fe=new Y(k),ee=fe.pow(I.length-me),Z=j,fe.c=N(D(E(ee.c),ee.e,"0"),10,M,m),fe.e=fe.c.length),te=N(I,k,M,X?(L=ue,m):(L=m,ue)),U=j=te.length;te[--j]==0;te.pop());if(!te[0])return L.charAt(0);if(me<0?--U:(ee.c=te,ee.e=U,ee.s=$,ee=F(ee,fe,we,le,M),te=ee.c,G=ee.r,U=ee.e),R=U+we+1,me=te[R],j=M/2,G=G||R<0||te[R+1]!=null,G=le<4?(me!=null||G)&&(le==0||le==(ee.s<0?3:2)):me>j||me==j&&(le==4||G||le==6&&te[R-1]&1||le==(ee.s<0?8:7)),R<1||!te[0])I=G?D(L.charAt(1),-we,L.charAt(0)):L.charAt(0);else{if(te.length=R,G)for(--M;++te[--R]>M;)te[R]=0,R||(++U,te=[1].concat(te));for(j=te.length;!te[--j];);for(me=0,I="";me<=j;I+=L.charAt(te[me++]));I=D(I,U,L.charAt(0))}return I}}(),F=function(){function m(k,M,$){var X,L,R,U,j=0,G=k.length,ee=M%l,te=M/l|0;for(k=k.slice();G--;)R=k[G]%l,U=k[G]/l|0,X=te*R+U*ee,L=ee*R+X%l*l+j,j=(L/$|0)+(X/l|0)+te*U,k[G]=L%$;return j&&(k=[j].concat(k)),k}function N(k,M,$,X){var L,R;if($!=X)R=$>X?1:-1;else for(L=R=0;L<$;L++)if(k[L]!=M[L]){R=k[L]>M[L]?1:-1;break}return R}function I(k,M,$,X){for(var L=0;$--;)k[$]-=L,L=k[$]<M[$]?1:0,k[$]=L*X+k[$]-M[$];for(;!k[0]&&k.length>1;k.splice(0,1));}return function(k,M,$,X,L){var R,U,j,G,ee,te,fe,me,we,le,he,Te,jt,Or,Tr,qe,St,Me=k.s==M.s?1:-1,xe=k.c,ye=M.c;if(!xe||!xe[0]||!ye||!ye[0])return new Y(!k.s||!M.s||(xe?ye&&xe[0]==ye[0]:!ye)?NaN:xe&&xe[0]==0||!ye?Me*0:Me/0);for(me=new Y(Me),we=me.c=[],U=k.e-M.e,Me=$+U+1,L||(L=u,U=v(k.e/h)-v(M.e/h),Me=Me/h|0),j=0;ye[j]==(xe[j]||0);j++);if(ye[j]>(xe[j]||0)&&U--,Me<0)we.push(1),G=!0;else{for(Or=xe.length,qe=ye.length,j=0,Me+=2,ee=n(L/(ye[0]+1)),ee>1&&(ye=m(ye,ee,L),xe=m(xe,ee,L),qe=ye.length,Or=xe.length),jt=qe,le=xe.slice(0,qe),he=le.length;he<qe;le[he++]=0);St=ye.slice(),St=[0].concat(St),Tr=ye[0],ye[1]>=L/2&&Tr++;do{if(ee=0,R=N(ye,le,qe,he),R<0){if(Te=le[0],qe!=he&&(Te=Te*L+(le[1]||0)),ee=n(Te/Tr),ee>1)for(ee>=L&&(ee=L-1),te=m(ye,ee,L),fe=te.length,he=le.length;N(te,le,fe,he)==1;)ee--,I(te,qe<fe?St:ye,fe,L),fe=te.length,R=1;else ee==0&&(R=ee=1),te=ye.slice(),fe=te.length;if(fe<he&&(te=[0].concat(te)),I(le,te,he,L),he=le.length,R==-1)for(;N(ye,le,qe,he)<1;)ee++,I(le,qe<he?St:ye,he,L),he=le.length}else R===0&&(ee++,le=[0]);we[j++]=ee,le[0]?le[he++]=xe[jt]||0:(le=[xe[jt]],he=1)}while((jt++<Or||le[0]!=null)&&Me--);G=le[0]!=null,we[0]||we.splice(0,1)}if(L==u){for(j=1,Me=we[0];Me>=10;Me/=10,j++);O(me,$+(me.e=j+U*h-1)+1,X,G)}else me.e=U,me.r=+G;return me}}();function ve(m,N,I,k){var M,$,X,L,R;if(I==null?I=V:w(I,0,8),!m.c)return m.toString();if(M=m.c[0],X=m.e,N==null)R=E(m.c),R=k==1||k==2&&(X<=q||X>=B)?C(R,X):D(R,X,"0");else if(m=O(new Y(m),N,I),$=m.e,R=E(m.c),L=R.length,k==1||k==2&&(N<=$||$<=q)){for(;L<N;R+="0",L++);R=C(R,$)}else if(N-=X,R=D(R,$,"0"),$+1>L){if(--N>0)for(R+=".";N--;R+="0");}else if(N+=$-L,N>0)for($+1==L&&(R+=".");N--;R+="0");return m.s<0&&M?"-"+R:R}function Re(m,N){for(var I,k,M=1,$=new Y(m[0]);M<m.length;M++)k=new Y(m[M]),(!k.s||(I=A($,k))===N||I===0&&$.s===N)&&($=k);return $}function x(m,N,I){for(var k=1,M=N.length;!N[--M];N.pop());for(M=N[0];M>=10;M/=10,k++);return(I=k+I*h-1)>W?m.c=m.e=null:I<z?m.c=[m.e=0]:(m.e=I,m.c=N),m}p=function(){var m=/^(-?)0([xbo])(?=\w[\w.]*$)/i,N=/^([^.]+)\.$/,I=/^\.([^.]+)$/,k=/^-?(Infinity|NaN)$/,M=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function($,X,L,R){var U,j=L?X:X.replace(M,"");if(k.test(j))$.s=isNaN(j)?null:j<0?-1:1;else{if(!L&&(j=j.replace(m,function(G,ee,te){return U=(te=te.toLowerCase())=="x"?16:te=="b"?2:8,!R||R==U?ee:G}),R&&(U=R,j=j.replace(N,"$1").replace(I,"0.$1")),X!=j))return new Y(j,U);if(Y.DEBUG)throw Error(o+"Not a"+(R?" base "+R:"")+" number: "+X);$.s=null}$.c=$.e=null}}();function O(m,N,I,k){var M,$,X,L,R,U,j,G=m.c,ee=f;if(G){e:{for(M=1,L=G[0];L>=10;L/=10,M++);if($=N-M,$<0)$+=h,X=N,R=G[U=0],j=n(R/ee[M-X-1]%10);else if(U=s(($+1)/h),U>=G.length)if(k){for(;G.length<=U;G.push(0));R=j=0,M=1,$%=h,X=$-h+1}else break e;else{for(R=L=G[U],M=1;L>=10;L/=10,M++);$%=h,X=$-h+M,j=X<0?0:n(R/ee[M-X-1]%10)}if(k=k||N<0||G[U+1]!=null||(X<0?R:R%ee[M-X-1]),k=I<4?(j||k)&&(I==0||I==(m.s<0?3:2)):j>5||j==5&&(I==4||k||I==6&&($>0?X>0?R/ee[M-X]:0:G[U-1])%10&1||I==(m.s<0?8:7)),N<1||!G[0])return G.length=0,k?(N-=m.e+1,G[0]=ee[(h-N%h)%h],m.e=-N||0):G[0]=m.e=0,m;if($==0?(G.length=U,L=1,U--):(G.length=U+1,L=ee[h-$],G[U]=X>0?n(R/ee[M-X]%ee[X])*L:0),k)for(;;)if(U==0){for($=1,X=G[0];X>=10;X/=10,$++);for(X=G[0]+=L,L=1;X>=10;X/=10,L++);$!=L&&(m.e++,G[0]==u&&(G[0]=1));break}else{if(G[U]+=L,G[U]!=u)break;G[U--]=0,L=1}for($=G.length;G[--$]===0;G.pop());}m.e>W?m.c=m.e=null:m.e<z&&(m.c=[m.e=0])}return m}function H(m){var N,I=m.e;return I===null?m.toString():(N=E(m.c),N=I<=q||I>=B?C(N,I):D(N,I,"0"),m.s<0?"-"+N:N)}return b.absoluteValue=b.abs=function(){var m=new Y(this);return m.s<0&&(m.s=1),m},b.comparedTo=function(m,N){return A(this,new Y(m,N))},b.decimalPlaces=b.dp=function(m,N){var I,k,M,$=this;if(m!=null)return w(m,0,d),N==null?N=V:w(N,0,8),O(new Y($),m+$.e+1,N);if(!(I=$.c))return null;if(k=((M=I.length-1)-v(this.e/h))*h,M=I[M])for(;M%10==0;M/=10,k--);return k<0&&(k=0),k},b.dividedBy=b.div=function(m,N){return F(this,new Y(m,N),P,V)},b.dividedToIntegerBy=b.idiv=function(m,N){return F(this,new Y(m,N),0,1)},b.exponentiatedBy=b.pow=function(m,N){var I,k,M,$,X,L,R,U,j,G=this;if(m=new Y(m),m.c&&!m.isInteger())throw Error(o+"Exponent not an integer: "+H(m));if(N!=null&&(N=new Y(N)),L=m.e>14,!G.c||!G.c[0]||G.c[0]==1&&!G.e&&G.c.length==1||!m.c||!m.c[0])return j=new Y(Math.pow(+H(G),L?m.s*(2-g(m)):+H(m))),N?j.mod(N):j;if(R=m.s<0,N){if(N.c?!N.c[0]:!N.s)return new Y(NaN);k=!R&&G.isInteger()&&N.isInteger(),k&&(G=G.mod(N))}else{if(m.e>9&&(G.e>0||G.e<-1||(G.e==0?G.c[0]>1||L&&G.c[1]>=24e7:G.c[0]<8e13||L&&G.c[0]<=9999975e7)))return $=G.s<0&&g(m)?-0:0,G.e>-1&&($=1/$),new Y(R?1/$:$);Z&&($=s(Z/h+2))}for(L?(I=new Y(.5),R&&(m.s=1),U=g(m)):(M=Math.abs(+H(m)),U=M%2),j=new Y(_);;){if(U){if(j=j.times(G),!j.c)break;$?j.c.length>$&&(j.c.length=$):k&&(j=j.mod(N))}if(M){if(M=n(M/2),M===0)break;U=M%2}else if(m=m.times(I),O(m,m.e+1,1),m.e>14)U=g(m);else{if(M=+H(m),M===0)break;U=M%2}G=G.times(G),$?G.c&&G.c.length>$&&(G.c.length=$):k&&(G=G.mod(N))}return k?j:(R&&(j=_.div(j)),N?j.mod(N):$?O(j,Z,V,X):j)},b.integerValue=function(m){var N=new Y(this);return m==null?m=V:w(m,0,8),O(N,N.e+1,m)},b.isEqualTo=b.eq=function(m,N){return A(this,new Y(m,N))===0},b.isFinite=function(){return!!this.c},b.isGreaterThan=b.gt=function(m,N){return A(this,new Y(m,N))>0},b.isGreaterThanOrEqualTo=b.gte=function(m,N){return(N=A(this,new Y(m,N)))===1||N===0},b.isInteger=function(){return!!this.c&&v(this.e/h)>this.c.length-2},b.isLessThan=b.lt=function(m,N){return A(this,new Y(m,N))<0},b.isLessThanOrEqualTo=b.lte=function(m,N){return(N=A(this,new Y(m,N)))===-1||N===0},b.isNaN=function(){return!this.s},b.isNegative=function(){return this.s<0},b.isPositive=function(){return this.s>0},b.isZero=function(){return!!this.c&&this.c[0]==0},b.minus=function(m,N){var I,k,M,$,X=this,L=X.s;if(m=new Y(m,N),N=m.s,!L||!N)return new Y(NaN);if(L!=N)return m.s=-N,X.plus(m);var R=X.e/h,U=m.e/h,j=X.c,G=m.c;if(!R||!U){if(!j||!G)return j?(m.s=-N,m):new Y(G?X:NaN);if(!j[0]||!G[0])return G[0]?(m.s=-N,m):new Y(j[0]?X:V==3?-0:0)}if(R=v(R),U=v(U),j=j.slice(),L=R-U){for(($=L<0)?(L=-L,M=j):(U=R,M=G),M.reverse(),N=L;N--;M.push(0));M.reverse()}else for(k=($=(L=j.length)<(N=G.length))?L:N,L=N=0;N<k;N++)if(j[N]!=G[N]){$=j[N]<G[N];break}if($&&(M=j,j=G,G=M,m.s=-m.s),N=(k=G.length)-(I=j.length),N>0)for(;N--;j[I++]=0);for(N=u-1;k>L;){if(j[--k]<G[k]){for(I=k;I&&!j[--I];j[I]=N);--j[I],j[k]+=u}j[k]-=G[k]}for(;j[0]==0;j.splice(0,1),--U);return j[0]?x(m,j,U):(m.s=V==3?-1:1,m.c=[m.e=0],m)},b.modulo=b.mod=function(m,N){var I,k,M=this;return m=new Y(m,N),!M.c||!m.s||m.c&&!m.c[0]?new Y(NaN):!m.c||M.c&&!M.c[0]?new Y(M):(K==9?(k=m.s,m.s=1,I=F(M,m,0,3),m.s=k,I.s*=k):I=F(M,m,0,K),m=M.minus(I.times(m)),!m.c[0]&&K==1&&(m.s=M.s),m)},b.multipliedBy=b.times=function(m,N){var I,k,M,$,X,L,R,U,j,G,ee,te,fe,me,we,le=this,he=le.c,Te=(m=new Y(m,N)).c;if(!he||!Te||!he[0]||!Te[0])return!le.s||!m.s||he&&!he[0]&&!Te||Te&&!Te[0]&&!he?m.c=m.e=m.s=null:(m.s*=le.s,!he||!Te?m.c=m.e=null:(m.c=[0],m.e=0)),m;for(k=v(le.e/h)+v(m.e/h),m.s*=le.s,R=he.length,G=Te.length,R<G&&(fe=he,he=Te,Te=fe,M=R,R=G,G=M),M=R+G,fe=[];M--;fe.push(0));for(me=u,we=l,M=G;--M>=0;){for(I=0,ee=Te[M]%we,te=Te[M]/we|0,X=R,$=M+X;$>M;)U=he[--X]%we,j=he[X]/we|0,L=te*U+j*ee,U=ee*U+L%we*we+fe[$]+I,I=(U/me|0)+(L/we|0)+te*j,fe[$--]=U%me;fe[$]=I}return I?++k:fe.splice(0,1),x(m,fe,k)},b.negated=function(){var m=new Y(this);return m.s=-m.s||null,m},b.plus=function(m,N){var I,k=this,M=k.s;if(m=new Y(m,N),N=m.s,!M||!N)return new Y(NaN);if(M!=N)return m.s=-N,k.minus(m);var $=k.e/h,X=m.e/h,L=k.c,R=m.c;if(!$||!X){if(!L||!R)return new Y(M/0);if(!L[0]||!R[0])return R[0]?m:new Y(L[0]?k:M*0)}if($=v($),X=v(X),L=L.slice(),M=$-X){for(M>0?(X=$,I=R):(M=-M,I=L),I.reverse();M--;I.push(0));I.reverse()}for(M=L.length,N=R.length,M-N<0&&(I=R,R=L,L=I,N=M),M=0;N;)M=(L[--N]=L[N]+R[N]+M)/u|0,L[N]=u===L[N]?0:L[N]%u;return M&&(L=[M].concat(L),++X),x(m,L,X)},b.precision=b.sd=function(m,N){var I,k,M,$=this;if(m!=null&&m!==!!m)return w(m,1,d),N==null?N=V:w(N,0,8),O(new Y($),m,N);if(!(I=$.c))return null;if(M=I.length-1,k=M*h+1,M=I[M]){for(;M%10==0;M/=10,k--);for(M=I[0];M>=10;M/=10,k++);}return m&&$.e+1>k&&(k=$.e+1),k},b.shiftedBy=function(m){return w(m,-c,c),this.times("1e"+m)},b.squareRoot=b.sqrt=function(){var m,N,I,k,M,$=this,X=$.c,L=$.s,R=$.e,U=P+4,j=new Y("0.5");if(L!==1||!X||!X[0])return new Y(!L||L<0&&(!X||X[0])?NaN:X?$:1/0);if(L=Math.sqrt(+H($)),L==0||L==1/0?(N=E(X),(N.length+R)%2==0&&(N+="0"),L=Math.sqrt(+N),R=v((R+1)/2)-(R<0||R%2),L==1/0?N="5e"+R:(N=L.toExponential(),N=N.slice(0,N.indexOf("e")+1)+R),I=new Y(N)):I=new Y(L+""),I.c[0]){for(R=I.e,L=R+U,L<3&&(L=0);;)if(M=I,I=j.times(M.plus(F($,M,U,1))),E(M.c).slice(0,L)===(N=E(I.c)).slice(0,L))if(I.e<R&&--L,N=N.slice(L-3,L+1),N=="9999"||!k&&N=="4999"){if(!k&&(O(M,M.e+P+2,0),M.times(M).eq($))){I=M;break}U+=4,L+=4,k=1}else{(!+N||!+N.slice(1)&&N.charAt(0)=="5")&&(O(I,I.e+P+2,1),m=!I.times(I).eq($));break}}return O(I,I.e+P+1,V,m)},b.toExponential=function(m,N){return m!=null&&(w(m,0,d),m++),ve(this,m,N,1)},b.toFixed=function(m,N){return m!=null&&(w(m,0,d),m=m+this.e+1),ve(this,m,N)},b.toFormat=function(m,N,I){var k,M=this;if(I==null)m!=null&&N&&typeof N=="object"?(I=N,N=null):m&&typeof m=="object"?(I=m,m=N=null):I=ne;else if(typeof I!="object")throw Error(o+"Argument not an object: "+I);if(k=M.toFixed(m,N),M.c){var $,X=k.split("."),L=+I.groupSize,R=+I.secondaryGroupSize,U=I.groupSeparator||"",j=X[0],G=X[1],ee=M.s<0,te=ee?j.slice(1):j,fe=te.length;if(R&&($=L,L=R,R=$,fe-=$),L>0&&fe>0){for($=fe%L||L,j=te.substr(0,$);$<fe;$+=L)j+=U+te.substr($,L);R>0&&(j+=U+te.slice($)),ee&&(j="-"+j)}k=G?j+(I.decimalSeparator||"")+((R=+I.fractionGroupSize)?G.replace(new RegExp("\\d{"+R+"}\\B","g"),"$&"+(I.fractionGroupSeparator||"")):G):j}return(I.prefix||"")+k+(I.suffix||"")},b.toFraction=function(m){var N,I,k,M,$,X,L,R,U,j,G,ee,te=this,fe=te.c;if(m!=null&&(L=new Y(m),!L.isInteger()&&(L.c||L.s!==1)||L.lt(_)))throw Error(o+"Argument "+(L.isInteger()?"out of range: ":"not an integer: ")+H(L));if(!fe)return new Y(te);for(N=new Y(_),U=I=new Y(_),k=R=new Y(_),ee=E(fe),$=N.e=ee.length-te.e-1,N.c[0]=f[(X=$%h)<0?h+X:X],m=!m||L.comparedTo(N)>0?$>0?N:U:L,X=W,W=1/0,L=new Y(ee),R.c[0]=0;j=F(L,N,0,1),M=I.plus(j.times(k)),M.comparedTo(m)!=1;)I=k,k=M,U=R.plus(j.times(M=U)),R=M,N=L.minus(j.times(M=N)),L=M;return M=F(m.minus(I),k,0,1),R=R.plus(M.times(U)),I=I.plus(M.times(k)),R.s=U.s=te.s,$=$*2,G=F(U,k,$,V).minus(te).abs().comparedTo(F(R,I,$,V).minus(te).abs())<1?[U,k]:[R,I],W=X,G},b.toNumber=function(){return+H(this)},b.toPrecision=function(m,N){return m!=null&&w(m,1,d),ve(this,m,N,2)},b.toString=function(m){var N,I=this,k=I.s,M=I.e;return M===null?k?(N="Infinity",k<0&&(N="-"+N)):N="NaN":(m==null?N=M<=q||M>=B?C(E(I.c),M):D(E(I.c),M,"0"):m===10&&pe?(I=O(new Y(I),P+M+1,V),N=D(E(I.c),I.e,"0")):(w(m,2,ue.length,"Base"),N=T(D(E(I.c),M,"0"),10,m,k,!0)),k<0&&I.c[0]&&(N="-"+N)),N},b.valueOf=b.toJSON=function(){return H(this)},b._isBigNumber=!0,S!=null&&Y.set(S),Y}function v(S){var F=S|0;return S>0||S===F?F:F-1}function E(S){for(var F,T,p=1,b=S.length,_=S[0]+"";p<b;){for(F=S[p++]+"",T=h-F.length;T--;F="0"+F);_+=F}for(b=_.length;_.charCodeAt(--b)===48;);return _.slice(0,b+1||1)}function A(S,F){var T,p,b=S.c,_=F.c,P=S.s,V=F.s,q=S.e,B=F.e;if(!P||!V)return null;if(T=b&&!b[0],p=_&&!_[0],T||p)return T?p?0:-V:P;if(P!=V)return P;if(T=P<0,p=q==B,!b||!_)return p?0:!b^T?1:-1;if(!p)return q>B^T?1:-1;for(V=(q=b.length)<(B=_.length)?q:B,P=0;P<V;P++)if(b[P]!=_[P])return b[P]>_[P]^T?1:-1;return q==B?0:q>B^T?1:-1}function w(S,F,T,p){if(S<F||S>T||S!==n(S))throw Error(o+(p||"Argument")+(typeof S=="number"?S<F||S>T?" out of range: ":" not an integer: ":" not a primitive number: ")+String(S))}function g(S){var F=S.c.length-1;return v(S.e/h)==F&&S.c[F]%2!=0}function C(S,F){return(S.length>1?S.charAt(0)+"."+S.slice(1):S)+(F<0?"e":"e+")+F}function D(S,F,T){var p,b;if(F<0){for(b=T+".";++F;b+=T);S=b+S}else if(p=S.length,++F>p){for(b=T,F-=p;--F;b+=T);S+=b}else F<p&&(S=S.slice(0,F)+"."+S.slice(F));return S}r=y(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(ie)})(qa);var Ba=qa.exports;(function(t){var e=Ba,r=t.exports;(function(){var i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s,n,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},a;function u(c){return i.lastIndex=0,i.test(c)?'"'+c.replace(i,function(f){var l=o[f];return typeof l=="string"?l:"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function h(c,f){var l,d,y,v,E=s,A,w=f[c],g=w!=null&&(w instanceof e||e.isBigNumber(w));switch(w&&typeof w=="object"&&typeof w.toJSON=="function"&&(w=w.toJSON(c)),typeof a=="function"&&(w=a.call(f,c,w)),typeof w){case"string":return g?w:u(w);case"number":return isFinite(w)?String(w):"null";case"boolean":case"null":case"bigint":return String(w);case"object":if(!w)return"null";if(s+=n,A=[],Object.prototype.toString.apply(w)==="[object Array]"){for(v=w.length,l=0;l<v;l+=1)A[l]=h(l,w)||"null";return y=A.length===0?"[]":s?`[
`+s+A.join(`,
`+s)+`
`+E+"]":"["+A.join(",")+"]",s=E,y}if(a&&typeof a=="object")for(v=a.length,l=0;l<v;l+=1)typeof a[l]=="string"&&(d=a[l],y=h(d,w),y&&A.push(u(d)+(s?": ":":")+y));else Object.keys(w).forEach(function(C){var D=h(C,w);D&&A.push(u(C)+(s?": ":":")+D)});return y=A.length===0?"{}":s?`{
`+s+A.join(`,
`+s)+`
`+E+"}":"{"+A.join(",")+"}",s=E,y}}typeof r.stringify!="function"&&(r.stringify=function(c,f,l){var d;if(s="",n="",typeof l=="number")for(d=0;d<l;d+=1)n+=" ";else typeof l=="string"&&(n=l);if(a=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return h("",{"":c})})})()})(ja);var yl=ja.exports,Wt=null;const gl=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,vl=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;var wl=function(t){var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction<"u")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction<"u")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var r,i,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},n,o=function(v){throw{name:"SyntaxError",message:v,at:r,text:n}},a=function(v){return v&&v!==i&&o("Expected '"+v+"' instead of '"+i+"'"),i=n.charAt(r),r+=1,i},u=function(){var v,E="";for(i==="-"&&(E="-",a("-"));i>="0"&&i<="9";)E+=i,a();if(i===".")for(E+=".";a()&&i>="0"&&i<="9";)E+=i;if(i==="e"||i==="E")for(E+=i,a(),(i==="-"||i==="+")&&(E+=i,a());i>="0"&&i<="9";)E+=i,a();if(v=+E,!isFinite(v))o("Bad number");else return Wt==null&&(Wt=Ba),E.length>15?e.storeAsString?E:e.useNativeBigInt?BigInt(E):new Wt(E):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(v):new Wt(v):v},h=function(){var v,E,A="",w;if(i==='"')for(var g=r;a();){if(i==='"')return r-1>g&&(A+=n.substring(g,r-1)),a(),A;if(i==="\\"){if(r-1>g&&(A+=n.substring(g,r-1)),a(),i==="u"){for(w=0,E=0;E<4&&(v=parseInt(a(),16),!!isFinite(v));E+=1)w=w*16+v;A+=String.fromCharCode(w)}else if(typeof s[i]=="string")A+=s[i];else break;g=r}}o("Bad string")},c=function(){for(;i&&i<=" ";)a()},f=function(){switch(i){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}o("Unexpected '"+i+"'")},l,d=function(){var v=[];if(i==="["){if(a("["),c(),i==="]")return a("]"),v;for(;i;){if(v.push(l()),c(),i==="]")return a("]"),v;a(","),c()}}o("Bad array")},y=function(){var v,E=Object.create(null);if(i==="{"){if(a("{"),c(),i==="}")return a("}"),E;for(;i;){if(v=h(),c(),a(":"),e.strict===!0&&Object.hasOwnProperty.call(E,v)&&o('Duplicate key "'+v+'"'),gl.test(v)===!0?e.protoAction==="error"?o("Object contains forbidden prototype property"):e.protoAction==="ignore"?l():E[v]=l():vl.test(v)===!0?e.constructorAction==="error"?o("Object contains forbidden constructor property"):e.constructorAction==="ignore"?l():E[v]=l():E[v]=l(),c(),i==="}")return a("}"),E;a(","),c()}}o("Bad object")};return l=function(){switch(c(),i){case"{":return y();case"[":return d();case'"':return h();case"-":return u();default:return i>="0"&&i<="9"?u():f()}},function(v,E){var A;return n=v+"",r=0,i=" ",A=l(),c(),i&&o("Syntax error"),typeof E=="function"?function w(g,C){var D,S=g[C];return S&&typeof S=="object"&&Object.keys(S).forEach(function(F){D=w(S,F),D!==void 0?S[F]=D:delete S[F]}),E.call(g,C,S)}({"":A},""):A}},El=wl,Ua=yl.stringify,Xa=El;yr.exports=function(t){return{parse:Xa(t),stringify:Ua}};yr.exports.parse=Xa();yr.exports.stringify=Ua;var Va=yr.exports,gr={};const bl="@alicloud/pop-core",Sl="1.8.0",Ol="AliCloud POP SDK core",Tl="index.js",Cl="lib/rpc.d.ts",Dl={lint:"eslint --fix lib test",test:"mocha -R spec test/*.test.js","test-cov":"nyc -r=html -r=text -r=lcov mocha -t 3000 -R spec test/*.test.js","test-integration":"mocha -R spec test/*.integration.js",ci:"npm run lint && npm run test-cov"},Fl=["Aliyun","AliCloud","OpenAPI","POP","SDK","Core"],_l="Jackson Tian",Al="MIT",xl={debug:"^3.1.0",httpx:"^2.1.2","json-bigint":"^1.0.0",kitx:"^1.2.1",xml2js:"^0.5.0"},Nl=["lib","index.js"],Il={eslint:"^6.6.0","expect.js":"^0.3.1",mocha:"^4",muk:"^0.5.3",nyc:"^12.0.2",rewire:"^4.0.1"},Pl={test:"test"},Ll={node:">=8.0.0"},Ml={type:"git",url:"git+https://github.com/aliyun/openapi-core-nodejs-sdk.git"},$l={url:"https://github.com/aliyun/openapi-core-nodejs-sdk/issues"},Rl="https://github.com/aliyun/openapi-core-nodejs-sdk#readme",kl={name:bl,version:Sl,description:Ol,main:Tl,types:Cl,scripts:Dl,keywords:Fl,author:_l,license:Al,dependencies:xl,files:Nl,devDependencies:Il,directories:Pl,engines:Ll,repository:Ml,bugs:$l,homepage:Rl},Vo=Ye,yi=kl;gr.DEFAULT_UA=`AlibabaCloud (${Vo.platform()}; ${Vo.arch()}) Node.js/${process.version} Core/${yi.version}`;gr.DEFAULT_CLIENT=`Node.js(${process.version}), ${yi.name}: ${yi.version}`;const Tt=lr,zo=wt,tt=Di,jl=Va,Wo=gr;function za(t){return t.slice(0,1).toUpperCase()+t.slice(1)}function ql(t){for(var e=Object.keys(t),r={},i=0;i<e.length;i++){var s=e[i];r[za(s)]=t[s]}return r}function Ho(){var t=new Date,e=t.getUTCFullYear(),r=tt.pad2(t.getUTCMonth()+1),i=tt.pad2(t.getUTCDate()),s=tt.pad2(t.getUTCHours()),n=tt.pad2(t.getUTCMinutes()),o=tt.pad2(t.getUTCSeconds());return`${e}-${r}-${i}T${s}:${n}:${o}Z`}function _t(t){var e=encodeURIComponent(t);return e.replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function gi(t,e,r){for(var i=0;i<r.length;i++){var s=r[i];if(Array.isArray(s))gi(t,`${e}.${i+1}`,s);else if(s&&typeof s=="object"){const o=Object.keys(s);for(var n=0;n<o.length;n++)Array.isArray(s[o[n]])?gi(t,`${e}.${i+1}.${o[n]}`,s[o[n]]):t[`${e}.${i+1}.${o[n]}`]=s[o[n]]}else t[`${e}.${i+1}`]=s}}function Bl(t){var e={},r=Object.keys(t);for(let n=0;n<r.length;n++){var i=r[n],s=t[i];Array.isArray(s)?gi(e,i,s):e[i]=s}return e}function Ul(t){var e=[],r=Bl(t),i=Object.keys(r).sort();for(let o=0;o<i.length;o++){var s=i[o],n=r[s];e.push([_t(s),_t(n)])}return e}function hn(t){for(var e=[],r=0;r<t.length;r++){var[i,s]=t[r];e.push(i+"="+s)}return e.join("&")}let Xl=class{constructor(e,r){if(Tt(e,'must pass "config"'),Tt(e.endpoint,'must pass "config.endpoint"'),!e.endpoint.startsWith("https://")&&!e.endpoint.startsWith("http://"))throw new Error(`"config.endpoint" must starts with 'https://' or 'http://'.`);if(Tt(e.apiVersion,'must pass "config.apiVersion"'),e.credentialsProvider){if(typeof e.credentialsProvider.getCredentials!="function")throw new Error('must pass "config.credentialsProvider" with function "getCredentials()"');this.credentialsProvider=e.credentialsProvider}else{Tt(e.accessKeyId,'must pass "config.accessKeyId"');var i=e.secretAccessKey||e.accessKeySecret;Tt(i,'must pass "config.accessKeySecret"'),this.accessKeyId=e.accessKeyId,this.accessKeySecret=i,this.securityToken=e.securityToken,this.credentialsProvider={getCredentials:async()=>({accessKeyId:e.accessKeyId,accessKeySecret:i,securityToken:e.securityToken})}}if(e.endpoint.endsWith("/")&&(e.endpoint=e.endpoint.slice(0,-1)),this.endpoint=e.endpoint,this.apiVersion=e.apiVersion,this.verbose=r===!0,this.codes=new Set([200,"200","OK","Success","success"]),e.codes)for(var s of e.codes)this.codes.add(s);this.opts=e.opts||{};var n=this.endpoint.startsWith("https://")?cr:ur;this.keepAliveAgent=new n.Agent({keepAlive:!0,keepAliveMsecs:3e3})}async request(e,r={},i={}){const s=await this.credentialsProvider.getCredentials();i=Object.assign({headers:{"x-sdk-client":Wo.DEFAULT_CLIENT,"user-agent":Wo.DEFAULT_UA,"x-acs-action":e,"x-acs-version":this.apiVersion}},this.opts,i),i.formatAction!==!1&&(e=za(e)),i.formatParams!==!1&&(r=ql(r));const n={Format:"JSON",Timestamp:Ho(),Version:this.apiVersion};s&&s.accessKeyId&&s.accessKeySecret&&(n.SignatureMethod="HMAC-SHA1",n.SignatureVersion="1.0",n.SignatureNonce=tt.makeNonce(),n.AccessKeyId=s.accessKeyId,s.securityToken&&(n.SecurityToken=s.securityToken)),r=Object.assign({Action:e},n,r);const o=(i.method||"GET").toUpperCase(),a=Ul(r);if(s&&s.accessKeyId&&s.accessKeySecret){const d=hn(a),y=`${o}&${_t("/")}&${_t(d)}`,v=s.accessKeySecret+"&",E=tt.sha1(y,v,"base64");a.push(["Signature",_t(E)])}const u=i.method==="POST"?`${this.endpoint}/`:`${this.endpoint}/?${hn(a)}`,h={url:u,request:null,response:null};i&&!i.agent&&(i.agent=this.keepAliveAgent),i.method==="POST"&&(i.headers=i.headers||{},i.headers["content-type"]="application/x-www-form-urlencoded",i.data=hn(a));const c=await zo.request(u,i);h.request={headers:c.req.getHeaders?c.req.getHeaders():c.req._headers},h.response={statusCode:c.statusCode,headers:c.headers};const f=await zo.read(c),l=jl.parse(f);if(l.Code&&!this.codes.has(l.Code)){const d=new Error(`${l.Message}, URL: ${u}`);throw d.name=l.Code+"Error",d.data=l,d.code=l.Code,d.url=u,d.entry=h,d}return this.verbose?[l,h]:l}_buildParams(){const e={Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureNonce:tt.makeNonce(),SignatureVersion:"1.0",Timestamp:Ho(),AccessKeyId:this.accessKeyId,Version:this.apiVersion};return this.securityToken&&(e.SecurityToken=this.securityToken),e}};var Wa=Xl,Ze={},pn={},Go;function Fi(){return Go||(Go=1,(function(){pn.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(ie)),pn}var dn={},We={},He={},Yo;function Je(){return Yo||(Yo=1,(function(){var t,e,r,i,s,n,o,a=[].slice,u={}.hasOwnProperty;t=function(){var h,c,f,l,d,y;if(y=arguments[0],d=2<=arguments.length?a.call(arguments,1):[],s(Object.assign))Object.assign.apply(null,arguments);else for(h=0,f=d.length;h<f;h++)if(l=d[h],l!=null)for(c in l)u.call(l,c)&&(y[c]=l[c]);return y},s=function(h){return!!h&&Object.prototype.toString.call(h)==="[object Function]"},n=function(h){var c;return!!h&&((c=typeof h)=="function"||c==="object")},r=function(h){return s(Array.isArray)?Array.isArray(h):Object.prototype.toString.call(h)==="[object Array]"},i=function(h){var c;if(r(h))return!h.length;for(c in h)if(u.call(h,c))return!1;return!0},o=function(h){var c,f;return n(h)&&(f=Object.getPrototypeOf(h))&&(c=f.constructor)&&typeof c=="function"&&c instanceof c&&Function.prototype.toString.call(c)===Function.prototype.toString.call(Object)},e=function(h){return s(h.valueOf)?h.valueOf():h},He.assign=t,He.isFunction=s,He.isObject=n,He.isArray=r,He.isEmpty=i,He.isPlainObject=o,He.getValue=e}).call(ie)),He}var mn={exports:{}},Jo;function Ha(){return Jo||(Jo=1,(function(){mn.exports=function(){function t(){}return t.prototype.hasFeature=function(e,r){return!0},t.prototype.createDocumentType=function(e,r,i){throw new Error("This DOM method is not implemented.")},t.prototype.createDocument=function(e,r,i){throw new Error("This DOM method is not implemented.")},t.prototype.createHTMLDocument=function(e){throw new Error("This DOM method is not implemented.")},t.prototype.getFeature=function(e,r){throw new Error("This DOM method is not implemented.")},t}()}).call(ie)),mn.exports}var yn={exports:{}},gn={exports:{}},vn={exports:{}},Ko;function Vl(){return Ko||(Ko=1,(function(){vn.exports=function(){function t(){}return t.prototype.handleError=function(e){throw new Error(e)},t}()}).call(ie)),vn.exports}var wn={exports:{}},Qo;function zl(){return Qo||(Qo=1,(function(){wn.exports=function(){function t(e){this.arr=e||[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.arr.length}}),t.prototype.item=function(e){return this.arr[e]||null},t.prototype.contains=function(e){return this.arr.indexOf(e)!==-1},t}()}).call(ie)),wn.exports}var Zo;function Wl(){return Zo||(Zo=1,(function(){var t,e;t=Vl(),e=zl(),gn.exports=function(){function r(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(r.prototype,"parameterNames",{get:function(){return new e(Object.keys(this.defaultParams))}}),r.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},r.prototype.canSetParameter=function(i,s){return!0},r.prototype.setParameter=function(i,s){return s!=null?this.params[i]=s:delete this.params[i]},r}()}).call(ie)),gn.exports}var En={exports:{}},bn={exports:{}},Sn={exports:{}},es;function ge(){return es||(es=1,(function(){Sn.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(ie)),Sn.exports}var On={exports:{}},ts;function Ga(){return ts||(ts=1,(function(){var t;t=ge(),$e(),On.exports=function(){function e(r,i,s){if(this.parent=r,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),i==null)throw new Error("Missing attribute name. "+this.debugInfo(i));this.name=this.stringify.name(i),this.value=this.stringify.attValue(s),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(r){return this.value=r||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(r){return this.options.writer.attribute(this,this.options.writer.filterOptions(r))},e.prototype.debugInfo=function(r){return r=r||this.name,r==null?"parent: <"+this.parent.name+">":"attribute: {"+r+"}, parent: <"+this.parent.name+">"},e.prototype.isEqualNode=function(r){return!(r.namespaceURI!==this.namespaceURI||r.prefix!==this.prefix||r.localName!==this.localName||r.value!==this.value)},e}()}).call(ie)),On.exports}var Tn={exports:{}},rs;function _i(){return rs||(rs=1,(function(){Tn.exports=function(){function t(e){this.nodes=e}return Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.getNamedItem=function(e){return this.nodes[e]},t.prototype.setNamedItem=function(e){var r;return r=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,r||null},t.prototype.removeNamedItem=function(e){var r;return r=this.nodes[e],delete this.nodes[e],r||null},t.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},t.prototype.getNamedItemNS=function(e,r){throw new Error("This DOM method is not implemented.")},t.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},t.prototype.removeNamedItemNS=function(e,r){throw new Error("This DOM method is not implemented.")},t}()}).call(ie)),Tn.exports}var ns;function Ai(){return ns||(ns=1,(function(){var t,e,r,i,s,n,o,a,u=function(c,f){for(var l in f)h.call(f,l)&&(c[l]=f[l]);function d(){this.constructor=c}return d.prototype=f.prototype,c.prototype=new d,c.__super__=f.prototype,c},h={}.hasOwnProperty;a=Je(),o=a.isObject,n=a.isFunction,s=a.getValue,i=$e(),t=ge(),e=Ga(),r=_i(),bn.exports=function(c){u(f,c);function f(l,d,y){var v,E,A,w;if(f.__super__.constructor.call(this,l),d==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(d),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,y!=null&&this.attribute(y),l.type===t.Document&&(this.isRoot=!0,this.documentObject=l,l.rootObject=this,l.children)){for(w=l.children,E=0,A=w.length;E<A;E++)if(v=w[E],v.type===t.DocType){v.name=this.name;break}}}return Object.defineProperty(f.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(f.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(f.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(f.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(f.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(f.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(f.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(f.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new r(this.attribs)),this.attributeMap}}),f.prototype.clone=function(){var l,d,y,v;y=Object.create(this),y.isRoot&&(y.documentObject=null),y.attribs={},v=this.attribs;for(d in v)h.call(v,d)&&(l=v[d],y.attribs[d]=l.clone());return y.children=[],this.children.forEach(function(E){var A;return A=E.clone(),A.parent=y,y.children.push(A)}),y},f.prototype.attribute=function(l,d){var y,v;if(l!=null&&(l=s(l)),o(l))for(y in l)h.call(l,y)&&(v=l[y],this.attribute(y,v));else n(d)&&(d=d.apply()),this.options.keepNullAttributes&&d==null?this.attribs[l]=new e(this,l,""):d!=null&&(this.attribs[l]=new e(this,l,d));return this},f.prototype.removeAttribute=function(l){var d,y,v;if(l==null)throw new Error("Missing attribute name. "+this.debugInfo());if(l=s(l),Array.isArray(l))for(y=0,v=l.length;y<v;y++)d=l[y],delete this.attribs[d];else delete this.attribs[l];return this},f.prototype.toString=function(l){return this.options.writer.element(this,this.options.writer.filterOptions(l))},f.prototype.att=function(l,d){return this.attribute(l,d)},f.prototype.a=function(l,d){return this.attribute(l,d)},f.prototype.getAttribute=function(l){return this.attribs.hasOwnProperty(l)?this.attribs[l].value:null},f.prototype.setAttribute=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getAttributeNode=function(l){return this.attribs.hasOwnProperty(l)?this.attribs[l]:null},f.prototype.setAttributeNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.removeAttributeNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByTagName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getAttributeNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.setAttributeNS=function(l,d,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.removeAttributeNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getAttributeNodeNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.setAttributeNodeNS=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByTagNameNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.hasAttribute=function(l){return this.attribs.hasOwnProperty(l)},f.prototype.hasAttributeNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.setIdAttribute=function(l,d){return this.attribs.hasOwnProperty(l)?this.attribs[l].isId:d},f.prototype.setIdAttributeNS=function(l,d,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.setIdAttributeNode=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByTagName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByTagNameNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByClassName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.isEqualNode=function(l){var d,y,v;if(!f.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.namespaceURI!==this.namespaceURI||l.prefix!==this.prefix||l.localName!==this.localName||l.attribs.length!==this.attribs.length)return!1;for(d=y=0,v=this.attribs.length-1;0<=v?y<=v:y>=v;d=0<=v?++y:--y)if(!this.attribs[d].isEqualNode(l.attribs[d]))return!1;return!0},f}(i)}).call(ie)),bn.exports}var Cn={exports:{}},Dn={exports:{}},is;function vr(){return is||(is=1,(function(){var t,e=function(i,s){for(var n in s)r.call(s,n)&&(i[n]=s[n]);function o(){this.constructor=i}return o.prototype=s.prototype,i.prototype=new o,i.__super__=s.prototype,i},r={}.hasOwnProperty;t=$e(),Dn.exports=function(i){e(s,i);function s(n){s.__super__.constructor.call(this,n),this.value=""}return Object.defineProperty(s.prototype,"data",{get:function(){return this.value},set:function(n){return this.value=n||""}}),Object.defineProperty(s.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(s.prototype,"textContent",{get:function(){return this.value},set:function(n){return this.value=n||""}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.substringData=function(n,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.appendData=function(n){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.insertData=function(n,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.deleteData=function(n,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceData=function(n,o,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.isEqualNode=function(n){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(n)||n.data!==this.data)},s}(t)}).call(ie)),Dn.exports}var os;function xi(){return os||(os=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=ge(),e=vr(),Cn.exports=function(s){r(n,s);function n(o,a){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(a)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.cdata(this,this.options.writer.filterOptions(o))},n}(e)}).call(ie)),Cn.exports}var Fn={exports:{}},ss;function Ni(){return ss||(ss=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=ge(),e=vr(),Fn.exports=function(s){r(n,s);function n(o,a){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(a)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.comment(this,this.options.writer.filterOptions(o))},n}(e)}).call(ie)),Fn.exports}var _n={exports:{}},as;function Ii(){return as||(as=1,(function(){var t,e,r,i=function(n,o){for(var a in o)s.call(o,a)&&(n[a]=o[a]);function u(){this.constructor=n}return u.prototype=o.prototype,n.prototype=new u,n.__super__=o.prototype,n},s={}.hasOwnProperty;r=Je().isObject,e=$e(),t=ge(),_n.exports=function(n){i(o,n);function o(a,u,h,c){var f;o.__super__.constructor.call(this,a),r(u)&&(f=u,u=f.version,h=f.encoding,c=f.standalone),u||(u="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(u),h!=null&&(this.encoding=this.stringify.xmlEncoding(h)),c!=null&&(this.standalone=this.stringify.xmlStandalone(c))}return o.prototype.toString=function(a){return this.options.writer.declaration(this,this.options.writer.filterOptions(a))},o}(e)}).call(ie)),_n.exports}var An={exports:{}},xn={exports:{}},us;function Pi(){return us||(us=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;e=$e(),t=ge(),xn.exports=function(s){r(n,s);function n(o,a,u,h,c,f){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(u==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(a));if(!h)throw new Error("Missing DTD attribute type. "+this.debugInfo(a));if(!c)throw new Error("Missing DTD attribute default. "+this.debugInfo(a));if(c.indexOf("#")!==0&&(c="#"+c),!c.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(a));if(f&&!c.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(a));this.elementName=this.stringify.name(a),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(u),this.attributeType=this.stringify.dtdAttType(h),f&&(this.defaultValue=this.stringify.dtdAttDefault(f)),this.defaultValueType=c}return n.prototype.toString=function(o){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(o))},n}(e)}).call(ie)),xn.exports}var Nn={exports:{}},cs;function Li(){return cs||(cs=1,(function(){var t,e,r,i=function(n,o){for(var a in o)s.call(o,a)&&(n[a]=o[a]);function u(){this.constructor=n}return u.prototype=o.prototype,n.prototype=new u,n.__super__=o.prototype,n},s={}.hasOwnProperty;r=Je().isObject,e=$e(),t=ge(),Nn.exports=function(n){i(o,n);function o(a,u,h,c){if(o.__super__.constructor.call(this,a),h==null)throw new Error("Missing DTD entity name. "+this.debugInfo(h));if(c==null)throw new Error("Missing DTD entity value. "+this.debugInfo(h));if(this.pe=!!u,this.name=this.stringify.name(h),this.type=t.EntityDeclaration,!r(c))this.value=this.stringify.dtdEntityValue(c),this.internal=!0;else{if(!c.pubID&&!c.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(h));if(c.pubID&&!c.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(h));if(this.internal=!1,c.pubID!=null&&(this.pubID=this.stringify.dtdPubID(c.pubID)),c.sysID!=null&&(this.sysID=this.stringify.dtdSysID(c.sysID)),c.nData!=null&&(this.nData=this.stringify.dtdNData(c.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(h))}}return Object.defineProperty(o.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(o.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(o.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(o.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(o.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(o.prototype,"xmlVersion",{get:function(){return null}}),o.prototype.toString=function(a){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(a))},o}(e)}).call(ie)),Nn.exports}var In={exports:{}},ls;function Mi(){return ls||(ls=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;e=$e(),t=ge(),In.exports=function(s){r(n,s);function n(o,a,u){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing DTD element name. "+this.debugInfo());u||(u="(#PCDATA)"),Array.isArray(u)&&(u="("+u.join(",")+")"),this.name=this.stringify.name(a),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(u)}return n.prototype.toString=function(o){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(o))},n}(e)}).call(ie)),In.exports}var Pn={exports:{}},fs;function $i(){return fs||(fs=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;e=$e(),t=ge(),Pn.exports=function(s){r(n,s);function n(o,a,u){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing DTD notation name. "+this.debugInfo(a));if(!u.pubID&&!u.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(a));this.name=this.stringify.name(a),this.type=t.NotationDeclaration,u.pubID!=null&&(this.pubID=this.stringify.dtdPubID(u.pubID)),u.sysID!=null&&(this.sysID=this.stringify.dtdSysID(u.sysID))}return Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),n.prototype.toString=function(o){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(o))},n}(e)}).call(ie)),Pn.exports}var hs;function Ri(){return hs||(hs=1,(function(){var t,e,r,i,s,n,o,a,u=function(c,f){for(var l in f)h.call(f,l)&&(c[l]=f[l]);function d(){this.constructor=c}return d.prototype=f.prototype,c.prototype=new d,c.__super__=f.prototype,c},h={}.hasOwnProperty;a=Je().isObject,o=$e(),t=ge(),e=Pi(),i=Li(),r=Mi(),s=$i(),n=_i(),An.exports=function(c){u(f,c);function f(l,d,y){var v,E,A,w,g,C;if(f.__super__.constructor.call(this,l),this.type=t.DocType,l.children){for(w=l.children,E=0,A=w.length;E<A;E++)if(v=w[E],v.type===t.Element){this.name=v.name;break}}this.documentObject=l,a(d)&&(g=d,d=g.pubID,y=g.sysID),y==null&&(C=[d,y],y=C[0],d=C[1]),d!=null&&(this.pubID=this.stringify.dtdPubID(d)),y!=null&&(this.sysID=this.stringify.dtdSysID(y))}return Object.defineProperty(f.prototype,"entities",{get:function(){var l,d,y,v,E;for(v={},E=this.children,d=0,y=E.length;d<y;d++)l=E[d],l.type===t.EntityDeclaration&&!l.pe&&(v[l.name]=l);return new n(v)}}),Object.defineProperty(f.prototype,"notations",{get:function(){var l,d,y,v,E;for(v={},E=this.children,d=0,y=E.length;d<y;d++)l=E[d],l.type===t.NotationDeclaration&&(v[l.name]=l);return new n(v)}}),Object.defineProperty(f.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(f.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(f.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),f.prototype.element=function(l,d){var y;return y=new r(this,l,d),this.children.push(y),this},f.prototype.attList=function(l,d,y,v,E){var A;return A=new e(this,l,d,y,v,E),this.children.push(A),this},f.prototype.entity=function(l,d){var y;return y=new i(this,!1,l,d),this.children.push(y),this},f.prototype.pEntity=function(l,d){var y;return y=new i(this,!0,l,d),this.children.push(y),this},f.prototype.notation=function(l,d){var y;return y=new s(this,l,d),this.children.push(y),this},f.prototype.toString=function(l){return this.options.writer.docType(this,this.options.writer.filterOptions(l))},f.prototype.ele=function(l,d){return this.element(l,d)},f.prototype.att=function(l,d,y,v,E){return this.attList(l,d,y,v,E)},f.prototype.ent=function(l,d){return this.entity(l,d)},f.prototype.pent=function(l,d){return this.pEntity(l,d)},f.prototype.not=function(l,d){return this.notation(l,d)},f.prototype.up=function(){return this.root()||this.documentObject},f.prototype.isEqualNode=function(l){return!(!f.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.name!==this.name||l.publicId!==this.publicId||l.systemId!==this.systemId)},f}(o)}).call(ie)),An.exports}var Ln={exports:{}},ps;function ki(){return ps||(ps=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=ge(),e=$e(),Ln.exports=function(s){r(n,s);function n(o,a){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(a)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.raw(this,this.options.writer.filterOptions(o))},n}(e)}).call(ie)),Ln.exports}var Mn={exports:{}},ds;function ji(){return ds||(ds=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=ge(),e=vr(),Mn.exports=function(s){r(n,s);function n(o,a){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(a)}return Object.defineProperty(n.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"wholeText",{get:function(){var o,a,u;for(u="",a=this.previousSibling;a;)u=a.data+u,a=a.previousSibling;for(u+=this.data,o=this.nextSibling;o;)u=u+o.data,o=o.nextSibling;return u}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.text(this,this.options.writer.filterOptions(o))},n.prototype.splitText=function(o){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceWholeText=function(o){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(e)}).call(ie)),Mn.exports}var $n={exports:{}},ms;function qi(){return ms||(ms=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=ge(),e=vr(),$n.exports=function(s){r(n,s);function n(o,a,u){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(a),this.name=this.target,u&&(this.value=this.stringify.insValue(u))}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(o))},n.prototype.isEqualNode=function(o){return!(!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(o)||o.target!==this.target)},n}(e)}).call(ie)),$n.exports}var Rn={exports:{}},ys;function Ya(){return ys||(ys=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;e=$e(),t=ge(),Rn.exports=function(s){r(n,s);function n(o){n.__super__.constructor.call(this,o),this.type=t.Dummy}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return""},n}(e)}).call(ie)),Rn.exports}var kn={exports:{}},gs;function Hl(){return gs||(gs=1,(function(){kn.exports=function(){function t(e){this.nodes=e}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes.length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.item=function(e){return this.nodes[e]||null},t}()}).call(ie)),kn.exports}var jn={exports:{}},vs;function Gl(){return vs||(vs=1,(function(){jn.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(ie)),jn.exports}var ws;function $e(){return ws||(ws=1,(function(){var t,e,r,i,s,n,o,a,u,h,c,f,l,d,y,v,E,A={}.hasOwnProperty;E=Je(),v=E.isObject,y=E.isFunction,d=E.isEmpty,l=E.getValue,a=null,r=null,i=null,s=null,n=null,c=null,f=null,h=null,o=null,e=null,u=null,t=null,En.exports=function(){function w(g){this.parent=g,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=Ai(),r=xi(),i=Ni(),s=Ii(),n=Ri(),c=ki(),f=ji(),h=qi(),o=Ya(),e=ge(),u=Hl(),_i(),t=Gl())}return Object.defineProperty(w.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(w.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(w.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(w.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(w.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new u(this.children)),this.childNodeList}}),Object.defineProperty(w.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(w.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(w.prototype,"previousSibling",{get:function(){var g;return g=this.parent.children.indexOf(this),this.parent.children[g-1]||null}}),Object.defineProperty(w.prototype,"nextSibling",{get:function(){var g;return g=this.parent.children.indexOf(this),this.parent.children[g+1]||null}}),Object.defineProperty(w.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(w.prototype,"textContent",{get:function(){var g,C,D,S,F;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(F="",S=this.children,C=0,D=S.length;C<D;C++)g=S[C],g.textContent&&(F+=g.textContent);return F}else return null},set:function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),w.prototype.setParent=function(g){var C,D,S,F,T;for(this.parent=g,g&&(this.options=g.options,this.stringify=g.stringify),F=this.children,T=[],D=0,S=F.length;D<S;D++)C=F[D],T.push(C.setParent(this));return T},w.prototype.element=function(g,C,D){var S,F,T,p,b,_,P,V,q,B,z;if(_=null,C===null&&D==null&&(q=[{},null],C=q[0],D=q[1]),C==null&&(C={}),C=l(C),v(C)||(B=[C,D],D=B[0],C=B[1]),g!=null&&(g=l(g)),Array.isArray(g))for(T=0,P=g.length;T<P;T++)F=g[T],_=this.element(F);else if(y(g))_=this.element(g.apply());else if(v(g)){for(b in g)if(A.call(g,b))if(z=g[b],y(z)&&(z=z.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&b.indexOf(this.stringify.convertAttKey)===0)_=this.attribute(b.substr(this.stringify.convertAttKey.length),z);else if(!this.options.separateArrayItems&&Array.isArray(z)&&d(z))_=this.dummy();else if(v(z)&&d(z))_=this.element(b);else if(!this.options.keepNullNodes&&z==null)_=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(z))for(p=0,V=z.length;p<V;p++)F=z[p],S={},S[b]=F,_=this.element(S);else v(z)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&b.indexOf(this.stringify.convertTextKey)===0?_=this.element(z):(_=this.element(b),_.element(z)):_=this.element(b,z)}else!this.options.keepNullNodes&&D===null?_=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&g.indexOf(this.stringify.convertTextKey)===0?_=this.text(D):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&g.indexOf(this.stringify.convertCDataKey)===0?_=this.cdata(D):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&g.indexOf(this.stringify.convertCommentKey)===0?_=this.comment(D):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&g.indexOf(this.stringify.convertRawKey)===0?_=this.raw(D):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&g.indexOf(this.stringify.convertPIKey)===0?_=this.instruction(g.substr(this.stringify.convertPIKey.length),D):_=this.node(g,C,D);if(_==null)throw new Error("Could not create any elements with: "+g+". "+this.debugInfo());return _},w.prototype.insertBefore=function(g,C,D){var S,F,T,p,b;if(g!=null&&g.type)return T=g,p=C,T.setParent(this),p?(F=children.indexOf(p),b=children.splice(F),children.push(T),Array.prototype.push.apply(children,b)):children.push(T),T;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(g));return F=this.parent.children.indexOf(this),b=this.parent.children.splice(F),S=this.parent.element(g,C,D),Array.prototype.push.apply(this.parent.children,b),S},w.prototype.insertAfter=function(g,C,D){var S,F,T;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(g));return F=this.parent.children.indexOf(this),T=this.parent.children.splice(F+1),S=this.parent.element(g,C,D),Array.prototype.push.apply(this.parent.children,T),S},w.prototype.remove=function(){var g;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return g=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[g,g-g+1].concat([])),this.parent},w.prototype.node=function(g,C,D){var S,F;return g!=null&&(g=l(g)),C||(C={}),C=l(C),v(C)||(F=[C,D],D=F[0],C=F[1]),S=new a(this,g,C),D!=null&&S.text(D),this.children.push(S),S},w.prototype.text=function(g){var C;return v(g)&&this.element(g),C=new f(this,g),this.children.push(C),this},w.prototype.cdata=function(g){var C;return C=new r(this,g),this.children.push(C),this},w.prototype.comment=function(g){var C;return C=new i(this,g),this.children.push(C),this},w.prototype.commentBefore=function(g){var C,D;return C=this.parent.children.indexOf(this),D=this.parent.children.splice(C),this.parent.comment(g),Array.prototype.push.apply(this.parent.children,D),this},w.prototype.commentAfter=function(g){var C,D;return C=this.parent.children.indexOf(this),D=this.parent.children.splice(C+1),this.parent.comment(g),Array.prototype.push.apply(this.parent.children,D),this},w.prototype.raw=function(g){var C;return C=new c(this,g),this.children.push(C),this},w.prototype.dummy=function(){var g;return g=new o(this),g},w.prototype.instruction=function(g,C){var D,S,F,T,p;if(g!=null&&(g=l(g)),C!=null&&(C=l(C)),Array.isArray(g))for(T=0,p=g.length;T<p;T++)D=g[T],this.instruction(D);else if(v(g))for(D in g)A.call(g,D)&&(S=g[D],this.instruction(D,S));else y(C)&&(C=C.apply()),F=new h(this,g,C),this.children.push(F);return this},w.prototype.instructionBefore=function(g,C){var D,S;return D=this.parent.children.indexOf(this),S=this.parent.children.splice(D),this.parent.instruction(g,C),Array.prototype.push.apply(this.parent.children,S),this},w.prototype.instructionAfter=function(g,C){var D,S;return D=this.parent.children.indexOf(this),S=this.parent.children.splice(D+1),this.parent.instruction(g,C),Array.prototype.push.apply(this.parent.children,S),this},w.prototype.declaration=function(g,C,D){var S,F;return S=this.document(),F=new s(S,g,C,D),S.children.length===0?S.children.unshift(F):S.children[0].type===e.Declaration?S.children[0]=F:S.children.unshift(F),S.root()||S},w.prototype.dtd=function(g,C){var D,S,F,T,p,b,_,P,V,q;for(S=this.document(),F=new n(S,g,C),V=S.children,T=p=0,_=V.length;p<_;T=++p)if(D=V[T],D.type===e.DocType)return S.children[T]=F,F;for(q=S.children,T=b=0,P=q.length;b<P;T=++b)if(D=q[T],D.isRoot)return S.children.splice(T,0,F),F;return S.children.push(F),F},w.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},w.prototype.root=function(){var g;for(g=this;g;){if(g.type===e.Document)return g.rootObject;if(g.isRoot)return g;g=g.parent}},w.prototype.document=function(){var g;for(g=this;g;){if(g.type===e.Document)return g;g=g.parent}},w.prototype.end=function(g){return this.document().end(g)},w.prototype.prev=function(){var g;if(g=this.parent.children.indexOf(this),g<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[g-1]},w.prototype.next=function(){var g;if(g=this.parent.children.indexOf(this),g===-1||g===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[g+1]},w.prototype.importDocument=function(g){var C;return C=g.root().clone(),C.parent=this,C.isRoot=!1,this.children.push(C),this},w.prototype.debugInfo=function(g){var C,D;return g=g||this.name,g==null&&!((C=this.parent)!=null&&C.name)?"":g==null?"parent: <"+this.parent.name+">":(D=this.parent)!=null&&D.name?"node: <"+g+">, parent: <"+this.parent.name+">":"node: <"+g+">"},w.prototype.ele=function(g,C,D){return this.element(g,C,D)},w.prototype.nod=function(g,C,D){return this.node(g,C,D)},w.prototype.txt=function(g){return this.text(g)},w.prototype.dat=function(g){return this.cdata(g)},w.prototype.com=function(g){return this.comment(g)},w.prototype.ins=function(g,C){return this.instruction(g,C)},w.prototype.doc=function(){return this.document()},w.prototype.dec=function(g,C,D){return this.declaration(g,C,D)},w.prototype.e=function(g,C,D){return this.element(g,C,D)},w.prototype.n=function(g,C,D){return this.node(g,C,D)},w.prototype.t=function(g){return this.text(g)},w.prototype.d=function(g){return this.cdata(g)},w.prototype.c=function(g){return this.comment(g)},w.prototype.r=function(g){return this.raw(g)},w.prototype.i=function(g,C){return this.instruction(g,C)},w.prototype.u=function(){return this.up()},w.prototype.importXMLBuilder=function(g){return this.importDocument(g)},w.prototype.replaceChild=function(g,C){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.removeChild=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.appendChild=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.hasChildNodes=function(){return this.children.length!==0},w.prototype.cloneNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.isSupported=function(g,C){return!0},w.prototype.hasAttributes=function(){return this.attribs.length!==0},w.prototype.compareDocumentPosition=function(g){var C,D;return C=this,C===g?0:this.document()!==g.document()?(D=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?D|=t.Preceding:D|=t.Following,D):C.isAncestor(g)?t.Contains|t.Preceding:C.isDescendant(g)?t.Contains|t.Following:C.isPreceding(g)?t.Preceding:t.Following},w.prototype.isSameNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.lookupPrefix=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.isDefaultNamespace=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.lookupNamespaceURI=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.isEqualNode=function(g){var C,D,S;if(g.nodeType!==this.nodeType||g.children.length!==this.children.length)return!1;for(C=D=0,S=this.children.length-1;0<=S?D<=S:D>=S;C=0<=S?++D:--D)if(!this.children[C].isEqualNode(g.children[C]))return!1;return!0},w.prototype.getFeature=function(g,C){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.setUserData=function(g,C,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getUserData=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.contains=function(g){return g?g===this||this.isDescendant(g):!1},w.prototype.isDescendant=function(g){var C,D,S,F,T;for(T=this.children,S=0,F=T.length;S<F;S++)if(C=T[S],g===C||(D=C.isDescendant(g),D))return!0;return!1},w.prototype.isAncestor=function(g){return g.isDescendant(this)},w.prototype.isPreceding=function(g){var C,D;return C=this.treePosition(g),D=this.treePosition(this),C===-1||D===-1?!1:C<D},w.prototype.isFollowing=function(g){var C,D;return C=this.treePosition(g),D=this.treePosition(this),C===-1||D===-1?!1:C>D},w.prototype.treePosition=function(g){var C,D;return D=0,C=!1,this.foreachTreeNode(this.document(),function(S){if(D++,!C&&S===g)return C=!0}),C?D:-1},w.prototype.foreachTreeNode=function(g,C){var D,S,F,T,p;for(g||(g=this.document()),T=g.children,S=0,F=T.length;S<F;S++){if(D=T[S],p=C(D))return p;if(p=this.foreachTreeNode(D,C),p)return p}},w}()}).call(ie)),En.exports}var qn={exports:{}},Es;function Ja(){return Es||(Es=1,(function(){var t=function(r,i){return function(){return r.apply(i,arguments)}},e={}.hasOwnProperty;qn.exports=function(){function r(i){this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this);var s,n,o;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),n=i.stringify||{};for(s in n)e.call(n,s)&&(o=n[s],this[s]=o)}return r.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},r.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},r.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},r.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},r.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},r.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},r.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},r.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},r.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},r.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},r.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(i){var s,n;if(this.options.noValidation)return i;if(s="",this.options.version==="1.0"){if(s=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=i.match(s))throw new Error("Invalid character in string: "+i+" at index "+n.index)}else if(this.options.version==="1.1"&&(s=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=i.match(s)))throw new Error("Invalid character in string: "+i+" at index "+n.index);return i},r.prototype.assertLegalName=function(i){var s;if(this.options.noValidation)return i;if(this.assertLegalChar(i),s=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(s))throw new Error("Invalid character in name");return i},r.prototype.textEscape=function(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},r.prototype.attEscape=function(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},r}()}).call(ie)),qn.exports}var Bn={exports:{}},Un={exports:{}},Xn={exports:{}},bs;function wr(){return bs||(bs=1,(function(){Xn.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(ie)),Xn.exports}var Ss;function Ka(){return Ss||(Ss=1,(function(){var t,e,r,i={}.hasOwnProperty;r=Je().assign,t=ge(),Ii(),Ri(),xi(),Ni(),Ai(),ki(),ji(),qi(),Ya(),Pi(),Mi(),Li(),$i(),e=wr(),Un.exports=function(){function s(n){var o,a,u;n||(n={}),this.options=n,a=n.writer||{};for(o in a)i.call(a,o)&&(u=a[o],this["_"+o]=this[o],this[o]=u)}return s.prototype.filterOptions=function(n){var o,a,u,h,c,f,l,d;return n||(n={}),n=r({},this.options,n),o={writer:this},o.pretty=n.pretty||!1,o.allowEmpty=n.allowEmpty||!1,o.indent=(a=n.indent)!=null?a:"  ",o.newline=(u=n.newline)!=null?u:`
`,o.offset=(h=n.offset)!=null?h:0,o.dontPrettyTextNodes=(c=(f=n.dontPrettyTextNodes)!=null?f:n.dontprettytextnodes)!=null?c:0,o.spaceBeforeSlash=(l=(d=n.spaceBeforeSlash)!=null?d:n.spacebeforeslash)!=null?l:"",o.spaceBeforeSlash===!0&&(o.spaceBeforeSlash=" "),o.suppressPrettyCount=0,o.user={},o.state=e.None,o},s.prototype.indent=function(n,o,a){var u;return!o.pretty||o.suppressPrettyCount?"":o.pretty&&(u=(a||0)+o.offset+1,u>0)?new Array(u).join(o.indent):""},s.prototype.endline=function(n,o,a){return!o.pretty||o.suppressPrettyCount?"":o.newline},s.prototype.attribute=function(n,o,a){var u;return this.openAttribute(n,o,a),u=" "+n.name+'="'+n.value+'"',this.closeAttribute(n,o,a),u},s.prototype.cdata=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<![CDATA[",o.state=e.InsideTag,u+=n.value,o.state=e.CloseTag,u+="]]>"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.comment=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!-- ",o.state=e.InsideTag,u+=n.value,o.state=e.CloseTag,u+=" -->"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.declaration=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<?xml",o.state=e.InsideTag,u+=' version="'+n.version+'"',n.encoding!=null&&(u+=' encoding="'+n.encoding+'"'),n.standalone!=null&&(u+=' standalone="'+n.standalone+'"'),o.state=e.CloseTag,u+=o.spaceBeforeSlash+"?>",u+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.docType=function(n,o,a){var u,h,c,f,l;if(a||(a=0),this.openNode(n,o,a),o.state=e.OpenTag,f=this.indent(n,o,a),f+="<!DOCTYPE "+n.root().name,n.pubID&&n.sysID?f+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.sysID&&(f+=' SYSTEM "'+n.sysID+'"'),n.children.length>0){for(f+=" [",f+=this.endline(n,o,a),o.state=e.InsideTag,l=n.children,h=0,c=l.length;h<c;h++)u=l[h],f+=this.writeChildNode(u,o,a+1);o.state=e.CloseTag,f+="]"}return o.state=e.CloseTag,f+=o.spaceBeforeSlash+">",f+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),f},s.prototype.element=function(n,o,a){var u,h,c,f,l,d,y,v,E,A,w,g,C,D;a||(a=0),A=!1,w="",this.openNode(n,o,a),o.state=e.OpenTag,w+=this.indent(n,o,a)+"<"+n.name,g=n.attribs;for(E in g)i.call(g,E)&&(u=g[E],w+=this.attribute(u,o,a));if(c=n.children.length,f=c===0?null:n.children[0],c===0||n.children.every(function(S){return(S.type===t.Text||S.type===t.Raw)&&S.value===""}))o.allowEmpty?(w+=">",o.state=e.CloseTag,w+="</"+n.name+">"+this.endline(n,o,a)):(o.state=e.CloseTag,w+=o.spaceBeforeSlash+"/>"+this.endline(n,o,a));else if(o.pretty&&c===1&&(f.type===t.Text||f.type===t.Raw)&&f.value!=null)w+=">",o.state=e.InsideTag,o.suppressPrettyCount++,A=!0,w+=this.writeChildNode(f,o,a+1),o.suppressPrettyCount--,A=!1,o.state=e.CloseTag,w+="</"+n.name+">"+this.endline(n,o,a);else{if(o.dontPrettyTextNodes){for(C=n.children,l=0,y=C.length;l<y;l++)if(h=C[l],(h.type===t.Text||h.type===t.Raw)&&h.value!=null){o.suppressPrettyCount++,A=!0;break}}for(w+=">"+this.endline(n,o,a),o.state=e.InsideTag,D=n.children,d=0,v=D.length;d<v;d++)h=D[d],w+=this.writeChildNode(h,o,a+1);o.state=e.CloseTag,w+=this.indent(n,o,a)+"</"+n.name+">",A&&o.suppressPrettyCount--,w+=this.endline(n,o,a),o.state=e.None}return this.closeNode(n,o,a),w},s.prototype.writeChildNode=function(n,o,a){switch(n.type){case t.CData:return this.cdata(n,o,a);case t.Comment:return this.comment(n,o,a);case t.Element:return this.element(n,o,a);case t.Raw:return this.raw(n,o,a);case t.Text:return this.text(n,o,a);case t.ProcessingInstruction:return this.processingInstruction(n,o,a);case t.Dummy:return"";case t.Declaration:return this.declaration(n,o,a);case t.DocType:return this.docType(n,o,a);case t.AttributeDeclaration:return this.dtdAttList(n,o,a);case t.ElementDeclaration:return this.dtdElement(n,o,a);case t.EntityDeclaration:return this.dtdEntity(n,o,a);case t.NotationDeclaration:return this.dtdNotation(n,o,a);default:throw new Error("Unknown XML node type: "+n.constructor.name)}},s.prototype.processingInstruction=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<?",o.state=e.InsideTag,u+=n.target,n.value&&(u+=" "+n.value),o.state=e.CloseTag,u+=o.spaceBeforeSlash+"?>",u+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.raw=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a),o.state=e.InsideTag,u+=n.value,o.state=e.CloseTag,u+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.text=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a),o.state=e.InsideTag,u+=n.value,o.state=e.CloseTag,u+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.dtdAttList=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!ATTLIST",o.state=e.InsideTag,u+=" "+n.elementName+" "+n.attributeName+" "+n.attributeType,n.defaultValueType!=="#DEFAULT"&&(u+=" "+n.defaultValueType),n.defaultValue&&(u+=' "'+n.defaultValue+'"'),o.state=e.CloseTag,u+=o.spaceBeforeSlash+">"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.dtdElement=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!ELEMENT",o.state=e.InsideTag,u+=" "+n.name+" "+n.value,o.state=e.CloseTag,u+=o.spaceBeforeSlash+">"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.dtdEntity=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!ENTITY",o.state=e.InsideTag,n.pe&&(u+=" %"),u+=" "+n.name,n.value?u+=' "'+n.value+'"':(n.pubID&&n.sysID?u+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.sysID&&(u+=' SYSTEM "'+n.sysID+'"'),n.nData&&(u+=" NDATA "+n.nData)),o.state=e.CloseTag,u+=o.spaceBeforeSlash+">"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.dtdNotation=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!NOTATION",o.state=e.InsideTag,u+=" "+n.name,n.pubID&&n.sysID?u+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.pubID?u+=' PUBLIC "'+n.pubID+'"':n.sysID&&(u+=' SYSTEM "'+n.sysID+'"'),o.state=e.CloseTag,u+=o.spaceBeforeSlash+">"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.openNode=function(n,o,a){},s.prototype.closeNode=function(n,o,a){},s.prototype.openAttribute=function(n,o,a){},s.prototype.closeAttribute=function(n,o,a){},s}()}).call(ie)),Un.exports}var Os;function Bi(){return Os||(Os=1,(function(){var t,e=function(i,s){for(var n in s)r.call(s,n)&&(i[n]=s[n]);function o(){this.constructor=i}return o.prototype=s.prototype,i.prototype=new o,i.__super__=s.prototype,i},r={}.hasOwnProperty;t=Ka(),Bn.exports=function(i){e(s,i);function s(n){s.__super__.constructor.call(this,n)}return s.prototype.document=function(n,o){var a,u,h,c,f;for(o=this.filterOptions(o),c="",f=n.children,u=0,h=f.length;u<h;u++)a=f[u],c+=this.writeChildNode(a,o,0);return o.pretty&&c.slice(-o.newline.length)===o.newline&&(c=c.slice(0,-o.newline.length)),c},s}(t)}).call(ie)),Bn.exports}var Ts;function Qa(){return Ts||(Ts=1,(function(){var t,e,r,i,s,n,o,a=function(h,c){for(var f in c)u.call(c,f)&&(h[f]=c[f]);function l(){this.constructor=h}return l.prototype=c.prototype,h.prototype=new l,h.__super__=c.prototype,h},u={}.hasOwnProperty;o=Je().isPlainObject,r=Ha(),e=Wl(),i=$e(),t=ge(),n=Ja(),s=Bi(),yn.exports=function(h){a(c,h);function c(f){c.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new e,f||(f={}),f.writer||(f.writer=new s),this.options=f,this.stringify=new n(f)}return Object.defineProperty(c.prototype,"implementation",{value:new r}),Object.defineProperty(c.prototype,"doctype",{get:function(){var f,l,d,y;for(y=this.children,l=0,d=y.length;l<d;l++)if(f=y[l],f.type===t.DocType)return f;return null}}),Object.defineProperty(c.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(c.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(c.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(c.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(c.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(c.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(c.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(c.prototype,"origin",{get:function(){return null}}),Object.defineProperty(c.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(c.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(c.prototype,"contentType",{get:function(){return null}}),c.prototype.end=function(f){var l;return l={},f?o(f)&&(l=f,f=this.options.writer):f=this.options.writer,f.document(this,f.filterOptions(l))},c.prototype.toString=function(f){return this.options.writer.document(this,this.options.writer.filterOptions(f))},c.prototype.createElement=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createTextNode=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createComment=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createCDATASection=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createProcessingInstruction=function(f,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createAttribute=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createEntityReference=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByTagName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.importNode=function(f,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createElementNS=function(f,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createAttributeNS=function(f,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByTagNameNS=function(f,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementById=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.adoptNode=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.renameNode=function(f,l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByClassName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createEvent=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createNodeIterator=function(f,l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createTreeWalker=function(f,l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c}(i)}).call(ie)),yn.exports}var Vn={exports:{}},Cs;function Yl(){return Cs||(Cs=1,(function(){var t,e,r,i,s,n,o,a,u,h,c,f,l,d,y,v,E,A,w,g,C,D,S,F={}.hasOwnProperty;S=Je(),C=S.isObject,g=S.isFunction,D=S.isPlainObject,w=S.getValue,t=ge(),f=Qa(),l=Ai(),i=xi(),s=Ni(),y=ki(),A=ji(),d=qi(),h=Ii(),c=Ri(),n=Pi(),a=Li(),o=Mi(),u=$i(),r=Ga(),E=Ja(),v=Bi(),e=wr(),Vn.exports=function(){function T(p,b,_){var P;this.name="?xml",this.type=t.Document,p||(p={}),P={},p.writer?D(p.writer)&&(P=p.writer,p.writer=new v):p.writer=new v,this.options=p,this.writer=p.writer,this.writerOptions=this.writer.filterOptions(P),this.stringify=new E(p),this.onDataCallback=b||function(){},this.onEndCallback=_||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return T.prototype.createChildNode=function(p){var b,_,P,V,q,B,z,W;switch(p.type){case t.CData:this.cdata(p.value);break;case t.Comment:this.comment(p.value);break;case t.Element:P={},z=p.attribs;for(_ in z)F.call(z,_)&&(b=z[_],P[_]=b.value);this.node(p.name,P);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(p.value);break;case t.Text:this.text(p.value);break;case t.ProcessingInstruction:this.instruction(p.target,p.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+p.constructor.name)}for(W=p.children,q=0,B=W.length;q<B;q++)V=W[q],this.createChildNode(V),V.type===t.Element&&this.up();return this},T.prototype.dummy=function(){return this},T.prototype.node=function(p,b,_){var P;if(p==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(p));return this.openCurrent(),p=w(p),b==null&&(b={}),b=w(b),C(b)||(P=[b,_],_=P[0],b=P[1]),this.currentNode=new l(this,p,b),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,_!=null&&this.text(_),this},T.prototype.element=function(p,b,_){var P,V,q,B,z,W;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(p)||C(p)||g(p))for(B=this.options.noValidation,this.options.noValidation=!0,W=new f(this.options).element("TEMP_ROOT"),W.element(p),this.options.noValidation=B,z=W.children,V=0,q=z.length;V<q;V++)P=z[V],this.createChildNode(P),P.type===t.Element&&this.up();else this.node(p,b,_);return this},T.prototype.attribute=function(p,b){var _,P;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(p));if(p!=null&&(p=w(p)),C(p))for(_ in p)F.call(p,_)&&(P=p[_],this.attribute(_,P));else g(b)&&(b=b.apply()),this.options.keepNullAttributes&&b==null?this.currentNode.attribs[p]=new r(this,p,""):b!=null&&(this.currentNode.attribs[p]=new r(this,p,b));return this},T.prototype.text=function(p){var b;return this.openCurrent(),b=new A(this,p),this.onData(this.writer.text(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.cdata=function(p){var b;return this.openCurrent(),b=new i(this,p),this.onData(this.writer.cdata(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.comment=function(p){var b;return this.openCurrent(),b=new s(this,p),this.onData(this.writer.comment(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.raw=function(p){var b;return this.openCurrent(),b=new y(this,p),this.onData(this.writer.raw(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.instruction=function(p,b){var _,P,V,q,B;if(this.openCurrent(),p!=null&&(p=w(p)),b!=null&&(b=w(b)),Array.isArray(p))for(_=0,q=p.length;_<q;_++)P=p[_],this.instruction(P);else if(C(p))for(P in p)F.call(p,P)&&(V=p[P],this.instruction(P,V));else g(b)&&(b=b.apply()),B=new d(this,p,b),this.onData(this.writer.processingInstruction(B,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},T.prototype.declaration=function(p,b,_){var P;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return P=new h(this,p,b,_),this.onData(this.writer.declaration(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.doctype=function(p,b,_){if(this.openCurrent(),p==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new c(this,b,_),this.currentNode.rootNodeName=p,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},T.prototype.dtdElement=function(p,b){var _;return this.openCurrent(),_=new o(this,p,b),this.onData(this.writer.dtdElement(_,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.attList=function(p,b,_,P,V){var q;return this.openCurrent(),q=new n(this,p,b,_,P,V),this.onData(this.writer.dtdAttList(q,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.entity=function(p,b){var _;return this.openCurrent(),_=new a(this,!1,p,b),this.onData(this.writer.dtdEntity(_,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.pEntity=function(p,b){var _;return this.openCurrent(),_=new a(this,!0,p,b),this.onData(this.writer.dtdEntity(_,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.notation=function(p,b){var _;return this.openCurrent(),_=new u(this,p,b),this.onData(this.writer.dtdNotation(_,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},T.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},T.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},T.prototype.openNode=function(p){var b,_,P,V;if(!p.isOpen){if(!this.root&&this.currentLevel===0&&p.type===t.Element&&(this.root=p),_="",p.type===t.Element){this.writerOptions.state=e.OpenTag,_=this.writer.indent(p,this.writerOptions,this.currentLevel)+"<"+p.name,V=p.attribs;for(P in V)F.call(V,P)&&(b=V[P],_+=this.writer.attribute(b,this.writerOptions,this.currentLevel));_+=(p.children?">":"/>")+this.writer.endline(p,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,_=this.writer.indent(p,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+p.rootNodeName,p.pubID&&p.sysID?_+=' PUBLIC "'+p.pubID+'" "'+p.sysID+'"':p.sysID&&(_+=' SYSTEM "'+p.sysID+'"'),p.children?(_+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,_+=">"),_+=this.writer.endline(p,this.writerOptions,this.currentLevel);return this.onData(_,this.currentLevel),p.isOpen=!0}},T.prototype.closeNode=function(p){var b;if(!p.isClosed)return b="",this.writerOptions.state=e.CloseTag,p.type===t.Element?b=this.writer.indent(p,this.writerOptions,this.currentLevel)+"</"+p.name+">"+this.writer.endline(p,this.writerOptions,this.currentLevel):b=this.writer.indent(p,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(p,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(b,this.currentLevel),p.isClosed=!0},T.prototype.onData=function(p,b){return this.documentStarted=!0,this.onDataCallback(p,b+1)},T.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},T.prototype.debugInfo=function(p){return p==null?"":"node: <"+p+">"},T.prototype.ele=function(){return this.element.apply(this,arguments)},T.prototype.nod=function(p,b,_){return this.node(p,b,_)},T.prototype.txt=function(p){return this.text(p)},T.prototype.dat=function(p){return this.cdata(p)},T.prototype.com=function(p){return this.comment(p)},T.prototype.ins=function(p,b){return this.instruction(p,b)},T.prototype.dec=function(p,b,_){return this.declaration(p,b,_)},T.prototype.dtd=function(p,b,_){return this.doctype(p,b,_)},T.prototype.e=function(p,b,_){return this.element(p,b,_)},T.prototype.n=function(p,b,_){return this.node(p,b,_)},T.prototype.t=function(p){return this.text(p)},T.prototype.d=function(p){return this.cdata(p)},T.prototype.c=function(p){return this.comment(p)},T.prototype.r=function(p){return this.raw(p)},T.prototype.i=function(p,b){return this.instruction(p,b)},T.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},T.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},T.prototype.ent=function(p,b){return this.entity(p,b)},T.prototype.pent=function(p,b){return this.pEntity(p,b)},T.prototype.not=function(p,b){return this.notation(p,b)},T}()}).call(ie)),Vn.exports}var zn={exports:{}},Ds;function Jl(){return Ds||(Ds=1,(function(){var t,e,r,i=function(n,o){for(var a in o)s.call(o,a)&&(n[a]=o[a]);function u(){this.constructor=n}return u.prototype=o.prototype,n.prototype=new u,n.__super__=o.prototype,n},s={}.hasOwnProperty;t=ge(),r=Ka(),e=wr(),zn.exports=function(n){i(o,n);function o(a,u){this.stream=a,o.__super__.constructor.call(this,u)}return o.prototype.endline=function(a,u,h){return a.isLastRootNode&&u.state===e.CloseTag?"":o.__super__.endline.call(this,a,u,h)},o.prototype.document=function(a,u){var h,c,f,l,d,y,v,E,A;for(v=a.children,c=f=0,d=v.length;f<d;c=++f)h=v[c],h.isLastRootNode=c===a.children.length-1;for(u=this.filterOptions(u),E=a.children,A=[],l=0,y=E.length;l<y;l++)h=E[l],A.push(this.writeChildNode(h,u,0));return A},o.prototype.attribute=function(a,u,h){return this.stream.write(o.__super__.attribute.call(this,a,u,h))},o.prototype.cdata=function(a,u,h){return this.stream.write(o.__super__.cdata.call(this,a,u,h))},o.prototype.comment=function(a,u,h){return this.stream.write(o.__super__.comment.call(this,a,u,h))},o.prototype.declaration=function(a,u,h){return this.stream.write(o.__super__.declaration.call(this,a,u,h))},o.prototype.docType=function(a,u,h){var c,f,l,d;if(h||(h=0),this.openNode(a,u,h),u.state=e.OpenTag,this.stream.write(this.indent(a,u,h)),this.stream.write("<!DOCTYPE "+a.root().name),a.pubID&&a.sysID?this.stream.write(' PUBLIC "'+a.pubID+'" "'+a.sysID+'"'):a.sysID&&this.stream.write(' SYSTEM "'+a.sysID+'"'),a.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(a,u,h)),u.state=e.InsideTag,d=a.children,f=0,l=d.length;f<l;f++)c=d[f],this.writeChildNode(c,u,h+1);u.state=e.CloseTag,this.stream.write("]")}return u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+">"),this.stream.write(this.endline(a,u,h)),u.state=e.None,this.closeNode(a,u,h)},o.prototype.element=function(a,u,h){var c,f,l,d,y,v,E,A,w;h||(h=0),this.openNode(a,u,h),u.state=e.OpenTag,this.stream.write(this.indent(a,u,h)+"<"+a.name),A=a.attribs;for(E in A)s.call(A,E)&&(c=A[E],this.attribute(c,u,h));if(l=a.children.length,d=l===0?null:a.children[0],l===0||a.children.every(function(g){return(g.type===t.Text||g.type===t.Raw)&&g.value===""}))u.allowEmpty?(this.stream.write(">"),u.state=e.CloseTag,this.stream.write("</"+a.name+">")):(u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+"/>"));else if(u.pretty&&l===1&&(d.type===t.Text||d.type===t.Raw)&&d.value!=null)this.stream.write(">"),u.state=e.InsideTag,u.suppressPrettyCount++,this.writeChildNode(d,u,h+1),u.suppressPrettyCount--,u.state=e.CloseTag,this.stream.write("</"+a.name+">");else{for(this.stream.write(">"+this.endline(a,u,h)),u.state=e.InsideTag,w=a.children,y=0,v=w.length;y<v;y++)f=w[y],this.writeChildNode(f,u,h+1);u.state=e.CloseTag,this.stream.write(this.indent(a,u,h)+"</"+a.name+">")}return this.stream.write(this.endline(a,u,h)),u.state=e.None,this.closeNode(a,u,h)},o.prototype.processingInstruction=function(a,u,h){return this.stream.write(o.__super__.processingInstruction.call(this,a,u,h))},o.prototype.raw=function(a,u,h){return this.stream.write(o.__super__.raw.call(this,a,u,h))},o.prototype.text=function(a,u,h){return this.stream.write(o.__super__.text.call(this,a,u,h))},o.prototype.dtdAttList=function(a,u,h){return this.stream.write(o.__super__.dtdAttList.call(this,a,u,h))},o.prototype.dtdElement=function(a,u,h){return this.stream.write(o.__super__.dtdElement.call(this,a,u,h))},o.prototype.dtdEntity=function(a,u,h){return this.stream.write(o.__super__.dtdEntity.call(this,a,u,h))},o.prototype.dtdNotation=function(a,u,h){return this.stream.write(o.__super__.dtdNotation.call(this,a,u,h))},o}(r)}).call(ie)),zn.exports}var Fs;function Kl(){return Fs||(Fs=1,(function(){var t,e,r,i,s,n,o,a,u,h;h=Je(),a=h.assign,u=h.isFunction,r=Ha(),i=Qa(),s=Yl(),o=Bi(),n=Jl(),t=ge(),e=wr(),We.create=function(c,f,l,d){var y,v;if(c==null)throw new Error("Root element needs a name.");return d=a({},f,l,d),y=new i(d),v=y.element(c),d.headless||(y.declaration(d),(d.pubID!=null||d.sysID!=null)&&y.dtd(d)),v},We.begin=function(c,f,l){var d;return u(c)&&(d=[c,f],f=d[0],l=d[1],c={}),f?new s(c,f,l):new i(c)},We.stringWriter=function(c){return new o(c)},We.streamWriter=function(c,f){return new n(c,f)},We.implementation=new r,We.nodeType=t,We.writerState=e}).call(ie)),We}var _s;function Ql(){return _s||(_s=1,(function(){var t,e,r,i,s,n={}.hasOwnProperty;t=Kl(),e=Fi().defaults,i=function(o){return typeof o=="string"&&(o.indexOf("&")>=0||o.indexOf(">")>=0||o.indexOf("<")>=0)},s=function(o){return"<![CDATA["+r(o)+"]]>"},r=function(o){return o.replace("]]>","]]]]><![CDATA[>")},dn.Builder=function(){function o(a){var u,h,c;this.options={},h=e["0.2"];for(u in h)n.call(h,u)&&(c=h[u],this.options[u]=c);for(u in a)n.call(a,u)&&(c=a[u],this.options[u]=c)}return o.prototype.buildObject=function(a){var u,h,c,f,l;return u=this.options.attrkey,h=this.options.charkey,Object.keys(a).length===1&&this.options.rootName===e["0.2"].rootName?(l=Object.keys(a)[0],a=a[l]):l=this.options.rootName,c=function(d){return function(y,v){var E,A,w,g,C,D;if(typeof v!="object")d.options.cdata&&i(v)?y.raw(s(v)):y.txt(v);else if(Array.isArray(v)){for(g in v)if(n.call(v,g)){A=v[g];for(C in A)w=A[C],y=c(y.ele(C),w).up()}}else for(C in v)if(n.call(v,C))if(A=v[C],C===u){if(typeof A=="object")for(E in A)D=A[E],y=y.att(E,D)}else if(C===h)d.options.cdata&&i(A)?y=y.raw(s(A)):y=y.txt(A);else if(Array.isArray(A))for(g in A)n.call(A,g)&&(w=A[g],typeof w=="string"?d.options.cdata&&i(w)?y=y.ele(C).raw(s(w)).up():y=y.ele(C,w).up():y=c(y.ele(C),w).up());else typeof A=="object"?y=c(y.ele(C),A).up():typeof A=="string"&&d.options.cdata&&i(A)?y=y.ele(C).raw(s(A)).up():(A==null&&(A=""),y=y.ele(C,A.toString()).up());return y}}(this),f=t.create(l,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),c(f,a).end(this.options.renderOpts)},o}()}).call(ie)),dn}var Wn={},Hn={},As;function Zl(){return As||(As=1,function(t){(function(e){e.parser=function(x,O){return new i(x,O)},e.SAXParser=i,e.SAXStream=c,e.createStream=h,e.MAX_BUFFER_LENGTH=64*1024;var r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function i(x,O){if(!(this instanceof i))return new i(x,O);var H=this;n(H),H.q=H.c="",H.bufferCheckPosition=e.MAX_BUFFER_LENGTH,H.opt=O||{},H.opt.lowercase=H.opt.lowercase||H.opt.lowercasetags,H.looseCase=H.opt.lowercase?"toLowerCase":"toUpperCase",H.tags=[],H.closed=H.closedRoot=H.sawRoot=!1,H.tag=H.error=null,H.strict=!!x,H.noscript=!!(x||H.opt.noscript),H.state=p.BEGIN,H.strictEntities=H.opt.strictEntities,H.ENTITIES=H.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),H.attribList=[],H.opt.xmlns&&(H.ns=Object.create(v)),H.opt.unquotedAttributeValues===void 0&&(H.opt.unquotedAttributeValues=!x),H.trackPosition=H.opt.position!==!1,H.trackPosition&&(H.position=H.line=H.column=0),_(H,"onready")}Object.create||(Object.create=function(x){function O(){}O.prototype=x;var H=new O;return H}),Object.keys||(Object.keys=function(x){var O=[];for(var H in x)x.hasOwnProperty(H)&&O.push(H);return O});function s(x){for(var O=Math.max(e.MAX_BUFFER_LENGTH,10),H=0,m=0,N=r.length;m<N;m++){var I=x[r[m]].length;if(I>O)switch(r[m]){case"textNode":V(x);break;case"cdata":P(x,"oncdata",x.cdata),x.cdata="";break;case"script":P(x,"onscript",x.script),x.script="";break;default:B(x,"Max buffer length exceeded: "+r[m])}H=Math.max(H,I)}var k=e.MAX_BUFFER_LENGTH-H;x.bufferCheckPosition=k+x.position}function n(x){for(var O=0,H=r.length;O<H;O++)x[r[O]]=""}function o(x){V(x),x.cdata!==""&&(P(x,"oncdata",x.cdata),x.cdata=""),x.script!==""&&(P(x,"onscript",x.script),x.script="")}i.prototype={end:function(){z(this)},write:Re,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var a;try{a=require("stream").Stream}catch{a=function(){}}a||(a=function(){});var u=e.EVENTS.filter(function(x){return x!=="error"&&x!=="end"});function h(x,O){return new c(x,O)}function c(x,O){if(!(this instanceof c))return new c(x,O);a.apply(this),this._parser=new i(x,O),this.writable=!0,this.readable=!0;var H=this;this._parser.onend=function(){H.emit("end")},this._parser.onerror=function(m){H.emit("error",m),H._parser.error=null},this._decoder=null,u.forEach(function(m){Object.defineProperty(H,"on"+m,{get:function(){return H._parser["on"+m]},set:function(N){if(!N)return H.removeAllListeners(m),H._parser["on"+m]=N,N;H.on(m,N)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(a.prototype,{constructor:{value:c}}),c.prototype.write=function(x){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(x)){if(!this._decoder){var O=ec.StringDecoder;this._decoder=new O("utf8")}x=this._decoder.write(x)}return this._parser.write(x.toString()),this.emit("data",x),!0},c.prototype.end=function(x){return x&&x.length&&this.write(x),this._parser.end(),!0},c.prototype.on=function(x,O){var H=this;return!H._parser["on"+x]&&u.indexOf(x)!==-1&&(H._parser["on"+x]=function(){var m=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);m.splice(0,0,x),H.emit.apply(H,m)}),a.prototype.on.call(H,x,O)};var f="[CDATA[",l="DOCTYPE",d="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/2000/xmlns/",v={xml:d,xmlns:y},E=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,w=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function C(x){return x===" "||x===`
`||x==="\r"||x==="	"}function D(x){return x==='"'||x==="'"}function S(x){return x===">"||C(x)}function F(x,O){return x.test(O)}function T(x,O){return!F(x,O)}var p=0;e.STATE={BEGIN:p++,BEGIN_WHITESPACE:p++,TEXT:p++,TEXT_ENTITY:p++,OPEN_WAKA:p++,SGML_DECL:p++,SGML_DECL_QUOTED:p++,DOCTYPE:p++,DOCTYPE_QUOTED:p++,DOCTYPE_DTD:p++,DOCTYPE_DTD_QUOTED:p++,COMMENT_STARTING:p++,COMMENT:p++,COMMENT_ENDING:p++,COMMENT_ENDED:p++,CDATA:p++,CDATA_ENDING:p++,CDATA_ENDING_2:p++,PROC_INST:p++,PROC_INST_BODY:p++,PROC_INST_ENDING:p++,OPEN_TAG:p++,OPEN_TAG_SLASH:p++,ATTRIB:p++,ATTRIB_NAME:p++,ATTRIB_NAME_SAW_WHITE:p++,ATTRIB_VALUE:p++,ATTRIB_VALUE_QUOTED:p++,ATTRIB_VALUE_CLOSED:p++,ATTRIB_VALUE_UNQUOTED:p++,ATTRIB_VALUE_ENTITY_Q:p++,ATTRIB_VALUE_ENTITY_U:p++,CLOSE_TAG:p++,CLOSE_TAG_SAW_WHITE:p++,SCRIPT:p++,SCRIPT_ENDING:p++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(x){var O=e.ENTITIES[x],H=typeof O=="number"?String.fromCharCode(O):O;e.ENTITIES[x]=H});for(var b in e.STATE)e.STATE[e.STATE[b]]=b;p=e.STATE;function _(x,O,H){x[O]&&x[O](H)}function P(x,O,H){x.textNode&&V(x),_(x,O,H)}function V(x){x.textNode=q(x.opt,x.textNode),x.textNode&&_(x,"ontext",x.textNode),x.textNode=""}function q(x,O){return x.trim&&(O=O.trim()),x.normalize&&(O=O.replace(/\s+/g," ")),O}function B(x,O){return V(x),x.trackPosition&&(O+=`
Line: `+x.line+`
Column: `+x.column+`
Char: `+x.c),O=new Error(O),x.error=O,_(x,"onerror",O),x}function z(x){return x.sawRoot&&!x.closedRoot&&W(x,"Unclosed root tag"),x.state!==p.BEGIN&&x.state!==p.BEGIN_WHITESPACE&&x.state!==p.TEXT&&B(x,"Unexpected end"),V(x),x.c="",x.closed=!0,_(x,"onend"),i.call(x,x.strict,x.opt),x}function W(x,O){if(typeof x!="object"||!(x instanceof i))throw new Error("bad call to strictFail");x.strict&&B(x,O)}function J(x){x.strict||(x.tagName=x.tagName[x.looseCase]());var O=x.tags[x.tags.length-1]||x,H=x.tag={name:x.tagName,attributes:{}};x.opt.xmlns&&(H.ns=O.ns),x.attribList.length=0,P(x,"onopentagstart",H)}function K(x,O){var H=x.indexOf(":"),m=H<0?["",x]:x.split(":"),N=m[0],I=m[1];return O&&x==="xmlns"&&(N="xmlns",I=""),{prefix:N,local:I}}function Z(x){if(x.strict||(x.attribName=x.attribName[x.looseCase]()),x.attribList.indexOf(x.attribName)!==-1||x.tag.attributes.hasOwnProperty(x.attribName)){x.attribName=x.attribValue="";return}if(x.opt.xmlns){var O=K(x.attribName,!0),H=O.prefix,m=O.local;if(H==="xmlns")if(m==="xml"&&x.attribValue!==d)W(x,"xml: prefix must be bound to "+d+`
Actual: `+x.attribValue);else if(m==="xmlns"&&x.attribValue!==y)W(x,"xmlns: prefix must be bound to "+y+`
Actual: `+x.attribValue);else{var N=x.tag,I=x.tags[x.tags.length-1]||x;N.ns===I.ns&&(N.ns=Object.create(I.ns)),N.ns[m]=x.attribValue}x.attribList.push([x.attribName,x.attribValue])}else x.tag.attributes[x.attribName]=x.attribValue,P(x,"onattribute",{name:x.attribName,value:x.attribValue});x.attribName=x.attribValue=""}function ne(x,O){if(x.opt.xmlns){var H=x.tag,m=K(x.tagName);H.prefix=m.prefix,H.local=m.local,H.uri=H.ns[m.prefix]||"",H.prefix&&!H.uri&&(W(x,"Unbound namespace prefix: "+JSON.stringify(x.tagName)),H.uri=m.prefix);var N=x.tags[x.tags.length-1]||x;H.ns&&N.ns!==H.ns&&Object.keys(H.ns).forEach(function(ee){P(x,"onopennamespace",{prefix:ee,uri:H.ns[ee]})});for(var I=0,k=x.attribList.length;I<k;I++){var M=x.attribList[I],$=M[0],X=M[1],L=K($,!0),R=L.prefix,U=L.local,j=R===""?"":H.ns[R]||"",G={name:$,value:X,prefix:R,local:U,uri:j};R&&R!=="xmlns"&&!j&&(W(x,"Unbound namespace prefix: "+JSON.stringify(R)),G.uri=R),x.tag.attributes[$]=G,P(x,"onattribute",G)}x.attribList.length=0}x.tag.isSelfClosing=!!O,x.sawRoot=!0,x.tags.push(x.tag),P(x,"onopentag",x.tag),O||(!x.noscript&&x.tagName.toLowerCase()==="script"?x.state=p.SCRIPT:x.state=p.TEXT,x.tag=null,x.tagName=""),x.attribName=x.attribValue="",x.attribList.length=0}function ue(x){if(!x.tagName){W(x,"Weird empty close tag."),x.textNode+="</>",x.state=p.TEXT;return}if(x.script){if(x.tagName!=="script"){x.script+="</"+x.tagName+">",x.tagName="",x.state=p.SCRIPT;return}P(x,"onscript",x.script),x.script=""}var O=x.tags.length,H=x.tagName;x.strict||(H=H[x.looseCase]());for(var m=H;O--;){var N=x.tags[O];if(N.name!==m)W(x,"Unexpected close tag");else break}if(O<0){W(x,"Unmatched closing tag: "+x.tagName),x.textNode+="</"+x.tagName+">",x.state=p.TEXT;return}x.tagName=H;for(var I=x.tags.length;I-- >O;){var k=x.tag=x.tags.pop();x.tagName=x.tag.name,P(x,"onclosetag",x.tagName);var M={};for(var $ in k.ns)M[$]=k.ns[$];var X=x.tags[x.tags.length-1]||x;x.opt.xmlns&&k.ns!==X.ns&&Object.keys(k.ns).forEach(function(L){var R=k.ns[L];P(x,"onclosenamespace",{prefix:L,uri:R})})}O===0&&(x.closedRoot=!0),x.tagName=x.attribValue=x.attribName="",x.attribList.length=0,x.state=p.TEXT}function pe(x){var O=x.entity,H=O.toLowerCase(),m,N="";return x.ENTITIES[O]?x.ENTITIES[O]:x.ENTITIES[H]?x.ENTITIES[H]:(O=H,O.charAt(0)==="#"&&(O.charAt(1)==="x"?(O=O.slice(2),m=parseInt(O,16),N=m.toString(16)):(O=O.slice(1),m=parseInt(O,10),N=m.toString(10))),O=O.replace(/^0+/,""),isNaN(m)||N.toLowerCase()!==O?(W(x,"Invalid character entity"),"&"+x.entity+";"):String.fromCodePoint(m))}function Y(x,O){O==="<"?(x.state=p.OPEN_WAKA,x.startTagPosition=x.position):C(O)||(W(x,"Non-whitespace before first tag."),x.textNode=O,x.state=p.TEXT)}function ve(x,O){var H="";return O<x.length&&(H=x.charAt(O)),H}function Re(x){var O=this;if(this.error)throw this.error;if(O.closed)return B(O,"Cannot write after close. Assign an onready handler.");if(x===null)return z(O);typeof x=="object"&&(x=x.toString());for(var H=0,m="";m=ve(x,H++),O.c=m,!!m;)switch(O.trackPosition&&(O.position++,m===`
`?(O.line++,O.column=0):O.column++),O.state){case p.BEGIN:if(O.state=p.BEGIN_WHITESPACE,m==="\uFEFF")continue;Y(O,m);continue;case p.BEGIN_WHITESPACE:Y(O,m);continue;case p.TEXT:if(O.sawRoot&&!O.closedRoot){for(var N=H-1;m&&m!=="<"&&m!=="&";)m=ve(x,H++),m&&O.trackPosition&&(O.position++,m===`
`?(O.line++,O.column=0):O.column++);O.textNode+=x.substring(N,H-1)}m==="<"&&!(O.sawRoot&&O.closedRoot&&!O.strict)?(O.state=p.OPEN_WAKA,O.startTagPosition=O.position):(!C(m)&&(!O.sawRoot||O.closedRoot)&&W(O,"Text data outside of root node."),m==="&"?O.state=p.TEXT_ENTITY:O.textNode+=m);continue;case p.SCRIPT:m==="<"?O.state=p.SCRIPT_ENDING:O.script+=m;continue;case p.SCRIPT_ENDING:m==="/"?O.state=p.CLOSE_TAG:(O.script+="<"+m,O.state=p.SCRIPT);continue;case p.OPEN_WAKA:if(m==="!")O.state=p.SGML_DECL,O.sgmlDecl="";else if(!C(m))if(F(E,m))O.state=p.OPEN_TAG,O.tagName=m;else if(m==="/")O.state=p.CLOSE_TAG,O.tagName="";else if(m==="?")O.state=p.PROC_INST,O.procInstName=O.procInstBody="";else{if(W(O,"Unencoded <"),O.startTagPosition+1<O.position){var I=O.position-O.startTagPosition;m=new Array(I).join(" ")+m}O.textNode+="<"+m,O.state=p.TEXT}continue;case p.SGML_DECL:if(O.sgmlDecl+m==="--"){O.state=p.COMMENT,O.comment="",O.sgmlDecl="";continue}O.doctype&&O.doctype!==!0&&O.sgmlDecl?(O.state=p.DOCTYPE_DTD,O.doctype+="<!"+O.sgmlDecl+m,O.sgmlDecl=""):(O.sgmlDecl+m).toUpperCase()===f?(P(O,"onopencdata"),O.state=p.CDATA,O.sgmlDecl="",O.cdata=""):(O.sgmlDecl+m).toUpperCase()===l?(O.state=p.DOCTYPE,(O.doctype||O.sawRoot)&&W(O,"Inappropriately located doctype declaration"),O.doctype="",O.sgmlDecl=""):m===">"?(P(O,"onsgmldeclaration",O.sgmlDecl),O.sgmlDecl="",O.state=p.TEXT):(D(m)&&(O.state=p.SGML_DECL_QUOTED),O.sgmlDecl+=m);continue;case p.SGML_DECL_QUOTED:m===O.q&&(O.state=p.SGML_DECL,O.q=""),O.sgmlDecl+=m;continue;case p.DOCTYPE:m===">"?(O.state=p.TEXT,P(O,"ondoctype",O.doctype),O.doctype=!0):(O.doctype+=m,m==="["?O.state=p.DOCTYPE_DTD:D(m)&&(O.state=p.DOCTYPE_QUOTED,O.q=m));continue;case p.DOCTYPE_QUOTED:O.doctype+=m,m===O.q&&(O.q="",O.state=p.DOCTYPE);continue;case p.DOCTYPE_DTD:m==="]"?(O.doctype+=m,O.state=p.DOCTYPE):m==="<"?(O.state=p.OPEN_WAKA,O.startTagPosition=O.position):D(m)?(O.doctype+=m,O.state=p.DOCTYPE_DTD_QUOTED,O.q=m):O.doctype+=m;continue;case p.DOCTYPE_DTD_QUOTED:O.doctype+=m,m===O.q&&(O.state=p.DOCTYPE_DTD,O.q="");continue;case p.COMMENT:m==="-"?O.state=p.COMMENT_ENDING:O.comment+=m;continue;case p.COMMENT_ENDING:m==="-"?(O.state=p.COMMENT_ENDED,O.comment=q(O.opt,O.comment),O.comment&&P(O,"oncomment",O.comment),O.comment=""):(O.comment+="-"+m,O.state=p.COMMENT);continue;case p.COMMENT_ENDED:m!==">"?(W(O,"Malformed comment"),O.comment+="--"+m,O.state=p.COMMENT):O.doctype&&O.doctype!==!0?O.state=p.DOCTYPE_DTD:O.state=p.TEXT;continue;case p.CDATA:m==="]"?O.state=p.CDATA_ENDING:O.cdata+=m;continue;case p.CDATA_ENDING:m==="]"?O.state=p.CDATA_ENDING_2:(O.cdata+="]"+m,O.state=p.CDATA);continue;case p.CDATA_ENDING_2:m===">"?(O.cdata&&P(O,"oncdata",O.cdata),P(O,"onclosecdata"),O.cdata="",O.state=p.TEXT):m==="]"?O.cdata+="]":(O.cdata+="]]"+m,O.state=p.CDATA);continue;case p.PROC_INST:m==="?"?O.state=p.PROC_INST_ENDING:C(m)?O.state=p.PROC_INST_BODY:O.procInstName+=m;continue;case p.PROC_INST_BODY:if(!O.procInstBody&&C(m))continue;m==="?"?O.state=p.PROC_INST_ENDING:O.procInstBody+=m;continue;case p.PROC_INST_ENDING:m===">"?(P(O,"onprocessinginstruction",{name:O.procInstName,body:O.procInstBody}),O.procInstName=O.procInstBody="",O.state=p.TEXT):(O.procInstBody+="?"+m,O.state=p.PROC_INST_BODY);continue;case p.OPEN_TAG:F(A,m)?O.tagName+=m:(J(O),m===">"?ne(O):m==="/"?O.state=p.OPEN_TAG_SLASH:(C(m)||W(O,"Invalid character in tag name"),O.state=p.ATTRIB));continue;case p.OPEN_TAG_SLASH:m===">"?(ne(O,!0),ue(O)):(W(O,"Forward-slash in opening tag not followed by >"),O.state=p.ATTRIB);continue;case p.ATTRIB:if(C(m))continue;m===">"?ne(O):m==="/"?O.state=p.OPEN_TAG_SLASH:F(E,m)?(O.attribName=m,O.attribValue="",O.state=p.ATTRIB_NAME):W(O,"Invalid attribute name");continue;case p.ATTRIB_NAME:m==="="?O.state=p.ATTRIB_VALUE:m===">"?(W(O,"Attribute without value"),O.attribValue=O.attribName,Z(O),ne(O)):C(m)?O.state=p.ATTRIB_NAME_SAW_WHITE:F(A,m)?O.attribName+=m:W(O,"Invalid attribute name");continue;case p.ATTRIB_NAME_SAW_WHITE:if(m==="=")O.state=p.ATTRIB_VALUE;else{if(C(m))continue;W(O,"Attribute without value"),O.tag.attributes[O.attribName]="",O.attribValue="",P(O,"onattribute",{name:O.attribName,value:""}),O.attribName="",m===">"?ne(O):F(E,m)?(O.attribName=m,O.state=p.ATTRIB_NAME):(W(O,"Invalid attribute name"),O.state=p.ATTRIB)}continue;case p.ATTRIB_VALUE:if(C(m))continue;D(m)?(O.q=m,O.state=p.ATTRIB_VALUE_QUOTED):(O.opt.unquotedAttributeValues||B(O,"Unquoted attribute value"),O.state=p.ATTRIB_VALUE_UNQUOTED,O.attribValue=m);continue;case p.ATTRIB_VALUE_QUOTED:if(m!==O.q){m==="&"?O.state=p.ATTRIB_VALUE_ENTITY_Q:O.attribValue+=m;continue}Z(O),O.q="",O.state=p.ATTRIB_VALUE_CLOSED;continue;case p.ATTRIB_VALUE_CLOSED:C(m)?O.state=p.ATTRIB:m===">"?ne(O):m==="/"?O.state=p.OPEN_TAG_SLASH:F(E,m)?(W(O,"No whitespace between attributes"),O.attribName=m,O.attribValue="",O.state=p.ATTRIB_NAME):W(O,"Invalid attribute name");continue;case p.ATTRIB_VALUE_UNQUOTED:if(!S(m)){m==="&"?O.state=p.ATTRIB_VALUE_ENTITY_U:O.attribValue+=m;continue}Z(O),m===">"?ne(O):O.state=p.ATTRIB;continue;case p.CLOSE_TAG:if(O.tagName)m===">"?ue(O):F(A,m)?O.tagName+=m:O.script?(O.script+="</"+O.tagName,O.tagName="",O.state=p.SCRIPT):(C(m)||W(O,"Invalid tagname in closing tag"),O.state=p.CLOSE_TAG_SAW_WHITE);else{if(C(m))continue;T(E,m)?O.script?(O.script+="</"+m,O.state=p.SCRIPT):W(O,"Invalid tagname in closing tag."):O.tagName=m}continue;case p.CLOSE_TAG_SAW_WHITE:if(C(m))continue;m===">"?ue(O):W(O,"Invalid characters in closing tag");continue;case p.TEXT_ENTITY:case p.ATTRIB_VALUE_ENTITY_Q:case p.ATTRIB_VALUE_ENTITY_U:var k,M;switch(O.state){case p.TEXT_ENTITY:k=p.TEXT,M="textNode";break;case p.ATTRIB_VALUE_ENTITY_Q:k=p.ATTRIB_VALUE_QUOTED,M="attribValue";break;case p.ATTRIB_VALUE_ENTITY_U:k=p.ATTRIB_VALUE_UNQUOTED,M="attribValue";break}if(m===";"){var $=pe(O);O.opt.unparsedEntities&&!Object.values(e.XML_ENTITIES).includes($)?(O.entity="",O.state=k,O.write($)):(O[M]+=$,O.entity="",O.state=k)}else F(O.entity.length?g:w,m)?O.entity+=m:(W(O,"Invalid character in entity name"),O[M]+="&"+O.entity+m,O.entity="",O.state=k);continue;default:throw new Error(O,"Unknown state: "+O.state)}return O.position>=O.bufferCheckPosition&&s(O),O}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var x=String.fromCharCode,O=Math.floor,H=function(){var m=16384,N=[],I,k,M=-1,$=arguments.length;if(!$)return"";for(var X="";++M<$;){var L=Number(arguments[M]);if(!isFinite(L)||L<0||L>1114111||O(L)!==L)throw RangeError("Invalid code point: "+L);L<=65535?N.push(L):(L-=65536,I=(L>>10)+55296,k=L%1024+56320,N.push(I,k)),(M+1===$||N.length>m)&&(X+=x.apply(null,N),N.length=0)}return X};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:H,configurable:!0,writable:!0}):String.fromCodePoint=H}()})(t)}(Hn)),Hn}var Gn={},xs;function ef(){return xs||(xs=1,(function(){Gn.stripBOM=function(t){return t[0]==="\uFEFF"?t.substring(1):t}}).call(ie)),Gn}var ot={},Ns;function Za(){return Ns||(Ns=1,(function(){var t;t=new RegExp(/(?!xmlns)^.*:/),ot.normalize=function(e){return e.toLowerCase()},ot.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},ot.stripPrefix=function(e){return e.replace(t,"")},ot.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},ot.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(ie)),ot}var Is;function tf(){return Is||(Is=1,function(t){(function(){var e,r,i,s,n,o,a,u,h=function(l,d){return function(){return l.apply(d,arguments)}},c=function(l,d){for(var y in d)f.call(d,y)&&(l[y]=d[y]);function v(){this.constructor=l}return v.prototype=d.prototype,l.prototype=new v,l.__super__=d.prototype,l},f={}.hasOwnProperty;a=Zl(),i=ct,e=ef(),o=Za(),u=tc.setImmediate,r=Fi().defaults,s=function(l){return typeof l=="object"&&l!=null&&Object.keys(l).length===0},n=function(l,d,y){var v,E,A;for(v=0,E=l.length;v<E;v++)A=l[v],d=A(d,y);return d},t.Parser=function(l){c(d,l);function d(y){this.parseStringPromise=h(this.parseStringPromise,this),this.parseString=h(this.parseString,this),this.reset=h(this.reset,this),this.assignOrPush=h(this.assignOrPush,this),this.processAsync=h(this.processAsync,this);var v,E,A;if(!(this instanceof t.Parser))return new t.Parser(y);this.options={},E=r["0.2"];for(v in E)f.call(E,v)&&(A=E[v],this.options[v]=A);for(v in y)f.call(y,v)&&(A=y[v],this.options[v]=A);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(o.normalize)),this.reset()}return d.prototype.processAsync=function(){var y,v;try{return this.remaining.length<=this.options.chunkSize?(y=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(y),this.saxParser.close()):(y=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(y),u(this.processAsync))}catch(E){if(v=E,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(v)}},d.prototype.assignOrPush=function(y,v,E){return v in y?(y[v]instanceof Array||(y[v]=[y[v]]),y[v].push(E)):this.options.explicitArray?y[v]=[E]:y[v]=E},d.prototype.reset=function(){var y,v,E,A;return this.removeAllListeners(),this.saxParser=a.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(w){return function(g){if(w.saxParser.resume(),!w.saxParser.errThrown)return w.saxParser.errThrown=!0,w.emit("error",g)}}(this),this.saxParser.onend=function(w){return function(){if(!w.saxParser.ended)return w.saxParser.ended=!0,w.emit("end",w.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,A=[],y=this.options.attrkey,v=this.options.charkey,this.saxParser.onopentag=function(w){return function(g){var C,D,S,F,T;if(S=Object.create(null),S[v]="",!w.options.ignoreAttrs){T=g.attributes;for(C in T)f.call(T,C)&&(!(y in S)&&!w.options.mergeAttrs&&(S[y]=Object.create(null)),D=w.options.attrValueProcessors?n(w.options.attrValueProcessors,g.attributes[C],C):g.attributes[C],F=w.options.attrNameProcessors?n(w.options.attrNameProcessors,C):C,w.options.mergeAttrs?w.assignOrPush(S,F,D):S[y][F]=D)}return S["#name"]=w.options.tagNameProcessors?n(w.options.tagNameProcessors,g.name):g.name,w.options.xmlns&&(S[w.options.xmlnskey]={uri:g.uri,local:g.local}),A.push(S)}}(this),this.saxParser.onclosetag=function(w){return function(){var g,C,D,S,F,T,p,b,_,P;if(T=A.pop(),F=T["#name"],(!w.options.explicitChildren||!w.options.preserveChildrenOrder)&&delete T["#name"],T.cdata===!0&&(g=T.cdata,delete T.cdata),_=A[A.length-1],T[v].match(/^\s*$/)&&!g?(C=T[v],delete T[v]):(w.options.trim&&(T[v]=T[v].trim()),w.options.normalize&&(T[v]=T[v].replace(/\s{2,}/g," ").trim()),T[v]=w.options.valueProcessors?n(w.options.valueProcessors,T[v],F):T[v],Object.keys(T).length===1&&v in T&&!w.EXPLICIT_CHARKEY&&(T=T[v])),s(T)&&(typeof w.options.emptyTag=="function"?T=w.options.emptyTag():T=w.options.emptyTag!==""?w.options.emptyTag:C),w.options.validator!=null&&(P="/"+function(){var V,q,B;for(B=[],V=0,q=A.length;V<q;V++)S=A[V],B.push(S["#name"]);return B}().concat(F).join("/"),function(){var V;try{return T=w.options.validator(P,_&&_[F],T)}catch(q){return V=q,w.emit("error",V)}}()),w.options.explicitChildren&&!w.options.mergeAttrs&&typeof T=="object"){if(!w.options.preserveChildrenOrder)S=Object.create(null),w.options.attrkey in T&&(S[w.options.attrkey]=T[w.options.attrkey],delete T[w.options.attrkey]),!w.options.charsAsChildren&&w.options.charkey in T&&(S[w.options.charkey]=T[w.options.charkey],delete T[w.options.charkey]),Object.getOwnPropertyNames(T).length>0&&(S[w.options.childkey]=T),T=S;else if(_){_[w.options.childkey]=_[w.options.childkey]||[],p=Object.create(null);for(D in T)f.call(T,D)&&(p[D]=T[D]);_[w.options.childkey].push(p),delete T["#name"],Object.keys(T).length===1&&v in T&&!w.EXPLICIT_CHARKEY&&(T=T[v])}}return A.length>0?w.assignOrPush(_,F,T):(w.options.explicitRoot&&(b=T,T=Object.create(null),T[F]=b),w.resultObject=T,w.saxParser.ended=!0,w.emit("end",w.resultObject))}}(this),E=function(w){return function(g){var C,D;if(D=A[A.length-1],D)return D[v]+=g,w.options.explicitChildren&&w.options.preserveChildrenOrder&&w.options.charsAsChildren&&(w.options.includeWhiteChars||g.replace(/\\n/g,"").trim()!=="")&&(D[w.options.childkey]=D[w.options.childkey]||[],C={"#name":"__text__"},C[v]=g,w.options.normalize&&(C[v]=C[v].replace(/\s{2,}/g," ").trim()),D[w.options.childkey].push(C)),D}}(this),this.saxParser.ontext=E,this.saxParser.oncdata=function(w){return function(g){var C;if(C=E(g),C)return C.cdata=!0}}()},d.prototype.parseString=function(y,v){var E;v!=null&&typeof v=="function"&&(this.on("end",function(A){return this.reset(),v(null,A)}),this.on("error",function(A){return this.reset(),v(A)}));try{return y=y.toString(),y.trim()===""?(this.emit("end",null),!0):(y=e.stripBOM(y),this.options.async?(this.remaining=y,u(this.processAsync),this.saxParser):this.saxParser.write(y).close())}catch(A){if(E=A,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw E}else return this.emit("error",E),this.saxParser.errThrown=!0}},d.prototype.parseStringPromise=function(y){return new Promise(function(v){return function(E,A){return v.parseString(y,function(w,g){return w?A(w):E(g)})}}(this))},d}(i),t.parseString=function(l,d,y){var v,E,A;return y!=null?(typeof y=="function"&&(v=y),typeof d=="object"&&(E=d)):(typeof d=="function"&&(v=d),E={}),A=new t.Parser(E),A.parseString(l,v)},t.parseStringPromise=function(l,d){var y,v;return typeof d=="object"&&(y=d),v=new t.Parser(y),v.parseStringPromise(l)}}).call(ie)}(Wn)),Wn}(function(){var t,e,r,i,s=function(o,a){for(var u in a)n.call(a,u)&&(o[u]=a[u]);function h(){this.constructor=o}return h.prototype=a.prototype,o.prototype=new h,o.__super__=a.prototype,o},n={}.hasOwnProperty;e=Fi(),t=Ql(),r=tf(),i=Za(),Ze.defaults=e.defaults,Ze.processors=i,Ze.ValidationError=function(o){s(a,o);function a(u){this.message=u}return a}(Error),Ze.Builder=t.Builder,Ze.Parser=r.Parser,Ze.parseString=r.parseString,Ze.parseStringPromise=r.parseStringPromise}).call(ie);var vi={exports:{}},Ht={exports:{}},Yn,Ps;function eu(){if(Ps)return Yn;Ps=1;function t(e){i.debug=i,i.default=i,i.coerce=h,i.disable=a,i.enable=o,i.enabled=u,i.humanize=xa(),Object.keys(e).forEach(function(c){i[c]=e[c]}),i.instances=[],i.names=[],i.skips=[],i.formatters={};function r(c){for(var f=0,l=0;l<c.length;l++)f=(f<<5)-f+c.charCodeAt(l),f|=0;return i.colors[Math.abs(f)%i.colors.length]}i.selectColor=r;function i(c){var f;function l(){if(l.enabled){for(var d=arguments.length,y=new Array(d),v=0;v<d;v++)y[v]=arguments[v];var E=l,A=Number(new Date),w=A-(f||A);E.diff=w,E.prev=f,E.curr=A,f=A,y[0]=i.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");var g=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,function(D,S){if(D==="%%")return D;g++;var F=i.formatters[S];if(typeof F=="function"){var T=y[g];D=F.call(E,T),y.splice(g,1),g--}return D}),i.formatArgs.call(E,y);var C=E.log||i.log;C.apply(E,y)}}return l.namespace=c,l.enabled=i.enabled(c),l.useColors=i.useColors(),l.color=r(c),l.destroy=s,l.extend=n,typeof i.init=="function"&&i.init(l),i.instances.push(l),l}function s(){var c=i.instances.indexOf(this);return c!==-1?(i.instances.splice(c,1),!0):!1}function n(c,f){return i(this.namespace+(typeof f>"u"?":":f)+c)}function o(c){i.save(c),i.names=[],i.skips=[];var f,l=(typeof c=="string"?c:"").split(/[\s,]+/),d=l.length;for(f=0;f<d;f++)l[f]&&(c=l[f].replace(/\*/g,".*?"),c[0]==="-"?i.skips.push(new RegExp("^"+c.substr(1)+"$")):i.names.push(new RegExp("^"+c+"$")));for(f=0;f<i.instances.length;f++){var y=i.instances[f];y.enabled=i.enabled(y.namespace)}}function a(){i.enable("")}function u(c){if(c[c.length-1]==="*")return!0;var f,l;for(f=0,l=i.skips.length;f<l;f++)if(i.skips[f].test(c))return!1;for(f=0,l=i.names.length;f<l;f++)if(i.names[f].test(c))return!0;return!1}function h(c){return c instanceof Error?c.stack||c.message:c}return i.enable(i.load()),i}return Yn=t,Yn}var Ls;function rf(){return Ls||(Ls=1,function(t,e){function r(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(l){return typeof l}:r=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},r(c)}e.log=n,e.formatArgs=s,e.save=o,e.load=a,e.useColors=i,e.storage=u(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!!this.useColors){var f="color: "+this.color;c.splice(1,0,f,"color: inherit");var l=0,d=0;c[0].replace(/%[a-zA-Z%]/g,function(y){y!=="%%"&&(l++,y==="%c"&&(d=l))}),c.splice(d,0,f)}}function n(){var c;return(typeof console>"u"?"undefined":r(console))==="object"&&console.log&&(c=console).log.apply(c,arguments)}function o(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function a(){var c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function u(){try{return localStorage}catch{}}t.exports=eu()(e);var h=t.exports.formatters;h.j=function(c){try{return JSON.stringify(c)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}}(Ht,Ht.exports)),Ht.exports}var Gt={exports:{}},Ms;function nf(){return Ms||(Ms=1,function(t,e){var r=Ti,i=Rt;e.init=f,e.log=u,e.formatArgs=o,e.save=h,e.load=c,e.useColors=n,e.colors=[6,2,3,4,5,1];try{var s=Ia();s&&(s.stderr||s).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}e.inspectOpts=Object.keys(process.env).filter(function(d){return/^debug_/i.test(d)}).reduce(function(d,y){var v=y.substring(6).toLowerCase().replace(/_([a-z])/g,function(A,w){return w.toUpperCase()}),E=process.env[y];return/^(yes|on|true|enabled)$/i.test(E)?E=!0:/^(no|off|false|disabled)$/i.test(E)?E=!1:E==="null"?E=null:E=Number(E),d[v]=E,d},{});function n(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:r.isatty(process.stderr.fd)}function o(d){var y=this.namespace,v=this.useColors;if(v){var E=this.color,A="\x1B[3"+(E<8?E:"8;5;"+E),w="  ".concat(A,";1m").concat(y," \x1B[0m");d[0]=w+d[0].split(`
`).join(`
`+w),d.push(A+"m+"+t.exports.humanize(this.diff)+"\x1B[0m")}else d[0]=a()+y+" "+d[0]}function a(){return e.inspectOpts.hideDate?"":new Date().toISOString()+" "}function u(){return process.stderr.write(i.format.apply(i,arguments)+`
`)}function h(d){d?process.env.DEBUG=d:delete process.env.DEBUG}function c(){return process.env.DEBUG}function f(d){d.inspectOpts={};for(var y=Object.keys(e.inspectOpts),v=0;v<y.length;v++)d.inspectOpts[y[v]]=e.inspectOpts[y[v]]}t.exports=eu()(e);var l=t.exports.formatters;l.o=function(d){return this.inspectOpts.colors=this.useColors,i.inspect(d,this.inspectOpts).split(`
`).map(function(y){return y.trim()}).join(" ")},l.O=function(d){return this.inspectOpts.colors=this.useColors,i.inspect(d,this.inspectOpts)}}(Gt,Gt.exports)),Gt.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?vi.exports=rf():vi.exports=nf();var of=vi.exports;const Ct=lr,sf=Oi,af=Zu,Dt=Di,$s=wt,uf=Ze,cf=Va,lf=of("roa"),Yt=gr;function ff(t){return t.replace(/[\t\n\r\f]/g," ")}function hf(t){const e=Object.keys(t),r={};for(let i=0;i<e.length;i++){const s=e[i];r[s.toLowerCase()]=t[s]}return r}function pf(t){const e="x-acs-",r=Object.keys(t),i=[];for(let n=0;n<r.length;n++){const o=r[n];o.startsWith(e)&&i.push(o)}i.sort();var s="";for(let n=0;n<i.length;n++){const o=i[n];s+=`${o}:${ff(t[o]).trim()}
`}return s}function df(t,e){const r=Object.keys(e).sort();if(r.length===0)return t;for(var i=[],s=0;s<r.length;s++){const n=r[s];i.push(`${n}=${e[n]}`)}return`${t}?${i.join("&")}`}function mf(t,e,r,i){const s=r.accept,n=r["content-md5"]||"",o=r["content-type"]||"",a=r.date||"",u=`${t}
${s}
${n}
${o}
${a}
`,h=pf(r),c=df(e,i);return`${u}${h}${c}`}function yf(t){const e=new uf.Parser({});return new Promise((r,i)=>{e.parseString(t,(s,n)=>{if(s)return i(s);r(n)})})}class gf extends Error{constructor(e){const r=e.Message[0],i=e.Code[0],s=e.HostId[0],n=e.RequestId[0];super(`${r} hostid: ${s}, requestid: ${n}`),this.code=i}}class vf{constructor(e){if(Ct(e,'must pass "config"'),Ct(e.endpoint,'must pass "config.endpoint"'),!e.endpoint.startsWith("https://")&&!e.endpoint.startsWith("http://"))throw new Error(`"config.endpoint" must starts with 'https://' or 'http://'.`);if(Ct(e.apiVersion,'must pass "config.apiVersion"'),e.credentialsProvider){if(typeof e.credentialsProvider.getCredentials!="function")throw new Error('must pass "config.credentialsProvider" with function "getCredentials()"');this.credentialsProvider=e.credentialsProvider}else Ct(e.accessKeyId,'must pass "config.accessKeyId"'),Ct(e.accessKeySecret,'must pass "config.accessKeySecret"'),this.accessKeyId=e.accessKeyId,this.accessKeySecret=e.accessKeySecret,this.securityToken=e.securityToken,this.credentialsProvider={getCredentials:async()=>({accessKeyId:e.accessKeyId,accessKeySecret:e.accessKeySecret,securityToken:e.securityToken})};this.endpoint=e.endpoint,this.apiVersion=e.apiVersion,this.host=sf.parse(this.endpoint).hostname,this.opts=e.opts;var r=this.endpoint.startsWith("https://")?cr:ur;this.keepAliveAgent=new r.Agent({keepAlive:!0,keepAliveMsecs:3e3})}buildHeaders(){var r={accept:"application/json",date:new Date().toGMTString(),host:this.host,"x-acs-signature-nonce":Dt.makeNonce(),"x-acs-signature-method":"HMAC-SHA1","x-acs-signature-version":"1.0","x-acs-version":this.apiVersion,"user-agent":Yt.DEFAULT_UA,"x-sdk-client":Yt.DEFAULT_CLIENT};return this.securityToken&&(r["x-acs-accesskey-id"]=this.accessKeyId,r["x-acs-security-token"]=this.securityToken),r}signature(e){const r=Buffer.from(e,"utf8");return Dt.sha1(r,this.accessKeySecret,"base64")}buildAuthorization(e){return`acs ${this.accessKeyId}:${this.signature(e)}`}async request(e,r,i={},s="",n={},o={}){const a=await this.credentialsProvider.getCredentials();var h={accept:"application/json",date:new Date().toGMTString(),host:this.host,"x-acs-signature-nonce":Dt.makeNonce(),"x-acs-version":this.apiVersion,"user-agent":Yt.DEFAULT_UA,"x-sdk-client":Yt.DEFAULT_CLIENT};a&&a.accessKeyId&&a.accessKeySecret&&(h["x-acs-signature-method"]="HMAC-SHA1",h["x-acs-signature-version"]="1.0",a.securityToken&&(h["x-acs-accesskey-id"]=a.accessKeyId,h["x-acs-security-token"]=a.securityToken));var c=Object.assign(h,hf(n)),f=null;f=Buffer.from(s,"utf8"),c["content-md5"]=Dt.md5(f,"base64"),c["content-length"]=f.length;var l=`${this.endpoint}${r}`;if(Object.keys(i).length&&(l+=`?${af.stringify(i)}`),a&&a.accessKeyId&&a.accessKeySecret){const g=mf(e,r,c,i);lf("stringToSign: %s",g);const C=Buffer.from(g,"utf8"),D=Dt.sha1(C,a.accessKeySecret,"base64");c.authorization=`acs ${a.accessKeyId}:${D}`}const d=Object.assign({method:e,agent:this.keepAliveAgent,headers:c,data:f},this.opts,o),y=await $s.request(l,d),v=await $s.read(y,"utf8");if(o.rawBody)return v;const E=y.headers["content-type"]||"";if(E.startsWith("application/json")){const g=y.statusCode;if(g===204)return v;var A;try{A=cf.parse(v)}catch(C){throw C.name="FormatError",C.message="parse response to json error",C.body=v,C}if(g>=400){const C=A.Message||A.errorMsg||"",D=A.Code||A.errorCode||"",S=A.RequestId||"";var w=new Error(`code: ${g}, ${C}, requestid: ${S}`);throw w.name=`${D}Error`,w.statusCode=g,w.result=A,w.code=D,w}return A}if(E.startsWith("text/xml")){const g=await yf(v);if(g.Error)throw new gf(g.Error);return g}return v}put(e,r,i,s,n){return this.request("PUT",e,r,i,s,n)}post(e,r,i,s,n){return this.request("POST",e,r,i,s,n)}get(e,r,i,s){return this.request("GET",e,r,"",i,s)}delete(e,r,i,s){return this.request("DELETE",e,r,"",i,s)}}var wf=vf;mr.exports=Wa;mr.exports.ROAClient=wf;mr.exports.RPCClient=Wa;var Ef=mr.exports;const bf=vt(Ef);async function Sf(){const t=new bf({accessKeyId:ir.accessKeyId,accessKeySecret:ir.accessKeySecret,endpoint:"http://nls-meta.cn-shanghai.aliyuncs.com",apiVersion:"2019-02-28"});try{return(await t.request("CreateToken")).Token.Id}catch(e){return console.error("Error creating token:",e),null}}var tu={exports:{}},Jn,Rs;function Of(){if(Rs)return Jn;Rs=1,Jn=i,i.sync=s;var t=ae;function e(n,o){var a=o.pathExt!==void 0?o.pathExt:process.env.PATHEXT;if(!a||(a=a.split(";"),a.indexOf("")!==-1))return!0;for(var u=0;u<a.length;u++){var h=a[u].toLowerCase();if(h&&n.substr(-h.length).toLowerCase()===h)return!0}return!1}function r(n,o,a){return!n.isSymbolicLink()&&!n.isFile()?!1:e(o,a)}function i(n,o,a){t.stat(n,function(u,h){a(u,u?!1:r(h,n,o))})}function s(n,o){return r(t.statSync(n),n,o)}return Jn}var Kn,ks;function Tf(){if(ks)return Kn;ks=1,Kn=e,e.sync=r;var t=ae;function e(n,o,a){t.stat(n,function(u,h){a(u,u?!1:i(h,o))})}function r(n,o){return i(t.statSync(n),o)}function i(n,o){return n.isFile()&&s(n,o)}function s(n,o){var a=n.mode,u=n.uid,h=n.gid,c=o.uid!==void 0?o.uid:process.getuid&&process.getuid(),f=o.gid!==void 0?o.gid:process.getgid&&process.getgid(),l=parseInt("100",8),d=parseInt("010",8),y=parseInt("001",8),v=l|d,E=a&y||a&d&&h===f||a&l&&u===c||a&v&&c===0;return E}return Kn}var or;process.platform==="win32"||ie.TESTING_WINDOWS?or=Of():or=Tf();var Cf=Ui;Ui.sync=Df;function Ui(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,s){Ui(t,e||{},function(n,o){n?s(n):i(o)})})}or(t,e||{},function(i,s){i&&(i.code==="EACCES"||e&&e.ignoreErrors)&&(i=null,s=!1),r(i,s)})}function Df(t,e){try{return or.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}var Ff=su;su.sync=Af;var wi=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",ru=Q,_f=wi?";":":",nu=Cf;function iu(t){var e=new Error("not found: "+t);return e.code="ENOENT",e}function ou(t,e){var r=e.colon||_f,i=e.path||process.env.PATH||"",s=[""];i=i.split(r);var n="";return wi&&(i.unshift(process.cwd()),n=e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM",s=n.split(r),t.indexOf(".")!==-1&&s[0]!==""&&s.unshift("")),(t.match(/\//)||wi&&t.match(/\\/))&&(i=[""]),{env:i,ext:s,extExe:n}}function su(t,e,r){typeof e=="function"&&(r=e,e={});var i=ou(t,e),s=i.env,n=i.ext,o=i.extExe,a=[];(function u(h,c){if(h===c)return e.all&&a.length?r(null,a):r(iu(t));var f=s[h];f.charAt(0)==='"'&&f.slice(-1)==='"'&&(f=f.slice(1,-1));var l=ru.join(f,t);!f&&/^\.[\\\/]/.test(t)&&(l=t.slice(0,2)+l),function d(y,v){if(y===v)return u(h+1,c);var E=n[y];nu(l+E,{pathExt:o},function(A,w){if(!A&&w)if(e.all)a.push(l+E);else return r(null,l+E);return d(y+1,v)})}(0,n.length)})(0,s.length)}function Af(t,e){e=e||{};for(var r=ou(t,e),i=r.env,s=r.ext,n=r.extExe,o=[],a=0,u=i.length;a<u;a++){var h=i[a];h.charAt(0)==='"'&&h.slice(-1)==='"'&&(h=h.slice(1,-1));var c=ru.join(h,t);!h&&/^\.[\\\/]/.test(t)&&(c=t.slice(0,2)+c);for(var f=0,l=s.length;f<l;f++){var d=c+s[f],y;try{if(y=nu.sync(d,{pathExt:n}),y)if(e.all)o.push(d);else return d}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw iu(t)}ar.exec;var xf=Ye.platform().match(/win(32|64)/),Nf=Ff,js=/\r\n|\r|\n/g,Ft=/^\[?(.*?)\]?$/,qs=/[,]/,Jt={};function If(t){var e={};t=t.replace(/=\s+/g,"=").trim();for(var r=t.split(" "),i=0;i<r.length;i++){var s=r[i].split("=",2),n=s[0],o=s[1];if(typeof o>"u")return null;e[n]=o}return e}var Bs=tu.exports={isWindows:xf,streamRegexp:Ft,copy:function(t,e){Object.keys(t).forEach(function(r){e[r]=t[r]})},args:function(){var t=[],e=function(){arguments.length===1&&Array.isArray(arguments[0])?t=t.concat(arguments[0]):t=t.concat([].slice.call(arguments))};return e.clear=function(){t=[]},e.get=function(){return t},e.find=function(r,i){var s=t.indexOf(r);if(s!==-1)return t.slice(s+1,s+1+(i||0))},e.remove=function(r,i){var s=t.indexOf(r);s!==-1&&t.splice(s,(i||0)+1)},e.clone=function(){var r=Bs.args();return r(t),r},e},makeFilterStrings:function(t){return t.map(function(e){if(typeof e=="string")return e;var r="";return Array.isArray(e.inputs)?r+=e.inputs.map(function(i){return i.replace(Ft,"[$1]")}).join(""):typeof e.inputs=="string"&&(r+=e.inputs.replace(Ft,"[$1]")),r+=e.filter,e.options&&(typeof e.options=="string"||typeof e.options=="number"?r+="="+e.options:Array.isArray(e.options)?r+="="+e.options.map(function(i){return typeof i=="string"&&i.match(qs)?"'"+i+"'":i}).join(":"):Object.keys(e.options).length&&(r+="="+Object.keys(e.options).map(function(i){var s=e.options[i];return typeof s=="string"&&s.match(qs)&&(s="'"+s+"'"),i+"="+s}).join(":"))),Array.isArray(e.outputs)?r+=e.outputs.map(function(i){return i.replace(Ft,"[$1]")}).join(""):typeof e.outputs=="string"&&(r+=e.outputs.replace(Ft,"[$1]")),r})},which:function(t,e){if(t in Jt)return e(null,Jt[t]);Nf(t,function(r,i){if(r)return e(null,Jt[t]="");e(null,Jt[t]=i)})},timemarkToSeconds:function(t){if(typeof t=="number")return t;if(t.indexOf(":")===-1&&t.indexOf(".")>=0)return Number(t);var e=t.split(":"),r=Number(e.pop());return e.length&&(r+=Number(e.pop())*60),e.length&&(r+=Number(e.pop())*3600),r},extractCodecData:function(t,e,r){var i=/Input #[0-9]+, ([^ ]+),/,s=/Duration\: ([^,]+)/,n=/Audio\: (.*)/,o=/Video\: (.*)/;"inputStack"in r||(r.inputStack=[],r.inputIndex=-1,r.inInput=!1);var a=r.inputStack,u=r.inputIndex,h=r.inInput,c,f,l,d;if(c=e.match(i))h=r.inInput=!0,u=r.inputIndex=r.inputIndex+1,a[u]={format:c[1],audio:"",video:"",duration:""};else if(h&&(f=e.match(s)))a[u].duration=f[1];else if(h&&(l=e.match(n)))l=l[1].split(", "),a[u].audio=l[0],a[u].audio_details=l;else if(h&&(d=e.match(o)))d=d[1].split(", "),a[u].video=d[0],a[u].video_details=d;else if(/Output #\d+/.test(e))h=r.inInput=!1;else if(/Stream mapping:|Press (\[q\]|ctrl-c) to stop/.test(e))return t.emit.apply(t,["codecData"].concat(a)),!0;return!1},extractProgress:function(t,e){var r=If(e);if(r){var i={frames:parseInt(r.frame,10),currentFps:parseInt(r.fps,10),currentKbps:r.bitrate?parseFloat(r.bitrate.replace("kbits/s","")):0,targetSize:parseInt(r.size||r.Lsize,10),timemark:r.time};if(t._ffprobeData&&t._ffprobeData.format&&t._ffprobeData.format.duration){var s=Number(t._ffprobeData.format.duration);isNaN(s)||(i.percent=Bs.timemarkToSeconds(i.timemark)/s*100)}t.emit("progress",i)}},extractError:function(t){return t.split(js).reduce(function(e,r){return r.charAt(0)===" "||r.charAt(0)==="["?[]:(e.push(r),e)},[]).join(`
`)},linesRing:function(t){var e=[],r=[],i=null,s=!1,n=t-1;function o(a){e.forEach(function(u){u(a)})}return{callback:function(a){r.forEach(function(u){a(u)}),e.push(a)},append:function(a){if(!s&&(a instanceof Buffer&&(a=""+a),!(!a||a.length===0))){var u=a.split(js);u.length===1?i!==null?i=i+u.shift():i=u.shift():(i!==null&&(i=i+u.shift(),o(i),r.push(i)),i=u.pop(),u.forEach(function(h){o(h),r.push(h)}),n>-1&&r.length>n&&r.splice(0,r.length-n))}},get:function(){return i!==null?r.concat([i]).join(`
`):r.join(`
`)},close:function(){s||(i!==null&&(o(i),r.push(i),n>-1&&r.length>n&&r.shift(),i=null),s=!0)}}}},Ke=tu.exports,Qn,Us;function Pf(){if(Us)return Qn;Us=1;var t=Ke;return Qn=function(e){e.mergeAdd=e.addInput=e.input=function(r){var i=!1,s=!1;if(typeof r!="string"){if(!("readable"in r)||!r.readable)throw new Error("Invalid input");var n=this._inputs.some(function(a){return a.isStream});if(n)throw new Error("Only one input stream is supported");s=!0,r.pause()}else{var o=r.match(/^([a-z]{2,}):/i);i=!o||o[0]==="file"}return this._inputs.push(this._currentInput={source:r,isFile:i,isStream:s,options:t.args()}),this},e.withInputFormat=e.inputFormat=e.fromFormat=function(r){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-f",r),this},e.withInputFps=e.withInputFPS=e.withFpsInput=e.withFPSInput=e.inputFPS=e.inputFps=e.fpsInput=e.FPSInput=function(r){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-r",r),this},e.nativeFramerate=e.withNativeFramerate=e.native=function(){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-re"),this},e.setStartTime=e.seekInput=function(r){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-ss",r),this},e.loop=function(r){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-loop","1"),typeof r<"u"&&this.duration(r),this}},Qn}var Zn,Xs;function Lf(){if(Xs)return Zn;Xs=1;var t=Ke;return Zn=function(e){e.withNoAudio=e.noAudio=function(){return this._currentOutput.audio.clear(),this._currentOutput.audioFilters.clear(),this._currentOutput.audio("-an"),this},e.withAudioCodec=e.audioCodec=function(r){return this._currentOutput.audio("-acodec",r),this},e.withAudioBitrate=e.audioBitrate=function(r){return this._currentOutput.audio("-b:a",(""+r).replace(/k?$/,"k")),this},e.withAudioChannels=e.audioChannels=function(r){return this._currentOutput.audio("-ac",r),this},e.withAudioFrequency=e.audioFrequency=function(r){return this._currentOutput.audio("-ar",r),this},e.withAudioQuality=e.audioQuality=function(r){return this._currentOutput.audio("-aq",r),this},e.withAudioFilter=e.withAudioFilters=e.audioFilter=e.audioFilters=function(r){return arguments.length>1&&(r=[].slice.call(arguments)),Array.isArray(r)||(r=[r]),this._currentOutput.audioFilters(t.makeFilterStrings(r)),this}},Zn}var ei,Vs;function Mf(){if(Vs)return ei;Vs=1;var t=Ke;return ei=function(e){e.withNoVideo=e.noVideo=function(){return this._currentOutput.video.clear(),this._currentOutput.videoFilters.clear(),this._currentOutput.video("-vn"),this},e.withVideoCodec=e.videoCodec=function(r){return this._currentOutput.video("-vcodec",r),this},e.withVideoBitrate=e.videoBitrate=function(r,i){return r=(""+r).replace(/k?$/,"k"),this._currentOutput.video("-b:v",r),i&&this._currentOutput.video("-maxrate",r,"-minrate",r,"-bufsize","3M"),this},e.withVideoFilter=e.withVideoFilters=e.videoFilter=e.videoFilters=function(r){return arguments.length>1&&(r=[].slice.call(arguments)),Array.isArray(r)||(r=[r]),this._currentOutput.videoFilters(t.makeFilterStrings(r)),this},e.withOutputFps=e.withOutputFPS=e.withFpsOutput=e.withFPSOutput=e.withFps=e.withFPS=e.outputFPS=e.outputFps=e.fpsOutput=e.FPSOutput=e.fps=e.FPS=function(r){return this._currentOutput.video("-r",r),this},e.takeFrames=e.withFrames=e.frames=function(r){return this._currentOutput.video("-vframes",r),this}},ei}var ti,zs;function $f(){if(zs)return ti;zs=1;function t(r,i,s,n){return[{filter:"scale",options:{w:"if(gt(a,"+s+"),"+r+",trunc("+i+"*a/2)*2)",h:"if(lt(a,"+s+"),"+i+",trunc("+r+"/a/2)*2)"}},{filter:"pad",options:{w:r,h:i,x:"if(gt(a,"+s+"),0,("+r+"-iw)/2)",y:"if(lt(a,"+s+"),0,("+i+"-ih)/2)",color:n}}]}function e(r,i,s){var n=r.sizeData=r.sizeData||{};if(n[i]=s,!("size"in n))return[];var o=n.size.match(/([0-9]+)x([0-9]+)/),a=n.size.match(/([0-9]+)x\?/),u=n.size.match(/\?x([0-9]+)/),h=n.size.match(/\b([0-9]{1,3})%/),c,f,l;if(h){var d=Number(h[1])/100;return[{filter:"scale",options:{w:"trunc(iw*"+d+"/2)*2",h:"trunc(ih*"+d+"/2)*2"}}]}else{if(o)return c=Math.round(Number(o[1])/2)*2,f=Math.round(Number(o[2])/2)*2,l=c/f,n.pad?t(c,f,l,n.pad):[{filter:"scale",options:{w:c,h:f}}];if(a||u)return"aspect"in n?(c=a?a[1]:Math.round(Number(u[1])*n.aspect),f=u?u[1]:Math.round(Number(a[1])/n.aspect),c=Math.round(c/2)*2,f=Math.round(f/2)*2,n.pad?t(c,f,n.aspect,n.pad):[{filter:"scale",options:{w:c,h:f}}]):a?[{filter:"scale",options:{w:Math.round(Number(a[1])/2)*2,h:"trunc(ow/a/2)*2"}}]:[{filter:"scale",options:{w:"trunc(oh*a/2)*2",h:Math.round(Number(u[1])/2)*2}}];throw new Error("Invalid size specified: "+n.size)}}return ti=function(r){r.keepPixelAspect=r.keepDisplayAspect=r.keepDisplayAspectRatio=r.keepDAR=function(){return this.videoFilters([{filter:"scale",options:{w:"if(gt(sar,1),iw*sar,iw)",h:"if(lt(sar,1),ih/sar,ih)"}},{filter:"setsar",options:"1"}])},r.withSize=r.setSize=r.size=function(i){var s=e(this._currentOutput,"size",i);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(s),this},r.withAspect=r.withAspectRatio=r.setAspect=r.setAspectRatio=r.aspect=r.aspectRatio=function(i){var s=Number(i);if(isNaN(s)){var n=i.match(/^(\d+):(\d+)$/);if(n)s=Number(n[1])/Number(n[2]);else throw new Error("Invalid aspect ratio: "+i)}var o=e(this._currentOutput,"aspect",s);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(o),this},r.applyAutopadding=r.applyAutoPadding=r.applyAutopad=r.applyAutoPad=r.withAutopadding=r.withAutoPadding=r.withAutopad=r.withAutoPad=r.autoPad=r.autopad=function(i,s){typeof i=="string"&&(s=i,i=!0),typeof i>"u"&&(i=!0);var n=e(this._currentOutput,"pad",i?s||"black":!1);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(n),this}},ti}var ri,Ws;function Rf(){if(Ws)return ri;Ws=1;var t=Ke;return ri=function(e){e.addOutput=e.output=function(r,i){var s=!1;if(!r&&this._currentOutput)throw new Error("Invalid output");if(r&&typeof r!="string"){if(!("writable"in r)||!r.writable)throw new Error("Invalid output")}else if(typeof r=="string"){var n=r.match(/^([a-z]{2,}):/i);s=!n||n[0]==="file"}if(r&&!("target"in this._currentOutput))this._currentOutput.target=r,this._currentOutput.isFile=s,this._currentOutput.pipeopts=i||{};else{if(r&&typeof r!="string"){var o=this._outputs.some(function(u){return typeof u.target!="string"});if(o)throw new Error("Only one output stream is supported")}this._outputs.push(this._currentOutput={target:r,isFile:s,flags:{},pipeopts:i||{}});var a=this;["audio","audioFilters","video","videoFilters","sizeFilters","options"].forEach(function(u){a._currentOutput[u]=t.args()}),r||delete this._currentOutput.target}return this},e.seekOutput=e.seek=function(r){return this._currentOutput.options("-ss",r),this},e.withDuration=e.setDuration=e.duration=function(r){return this._currentOutput.options("-t",r),this},e.toFormat=e.withOutputFormat=e.outputFormat=e.format=function(r){return this._currentOutput.options("-f",r),this},e.map=function(r){return this._currentOutput.options("-map",r.replace(t.streamRegexp,"[$1]")),this},e.updateFlvMetadata=e.flvmeta=function(){return this._currentOutput.flags.flvmeta=!0,this}},ri}var ni,Hs;function kf(){if(Hs)return ni;Hs=1;var t=Ke;return ni=function(e){e.addInputOption=e.addInputOptions=e.withInputOption=e.withInputOptions=e.inputOption=e.inputOptions=function(r){if(!this._currentInput)throw new Error("No input specified");var i=!0;return arguments.length>1&&(r=[].slice.call(arguments),i=!1),Array.isArray(r)||(r=[r]),this._currentInput.options(r.reduce(function(s,n){var o=String(n).split(" ");return i&&o.length===2?s.push(o[0],o[1]):s.push(n),s},[])),this},e.addOutputOption=e.addOutputOptions=e.addOption=e.addOptions=e.withOutputOption=e.withOutputOptions=e.withOption=e.withOptions=e.outputOption=e.outputOptions=function(r){var i=!0;return arguments.length>1&&(r=[].slice.call(arguments),i=!1),Array.isArray(r)||(r=[r]),this._currentOutput.options(r.reduce(function(s,n){var o=String(n).split(" ");return i&&o.length===2?s.push(o[0],o[1]):s.push(n),s},[])),this},e.filterGraph=e.complexFilter=function(r,i){if(this._complexFilters.clear(),Array.isArray(r)||(r=[r]),this._complexFilters("-filter_complex",t.makeFilterStrings(r).join(";")),Array.isArray(i)){var s=this;i.forEach(function(n){s._complexFilters("-map",n.replace(t.streamRegexp,"[$1]"))})}else typeof i=="string"&&this._complexFilters("-map",i.replace(t.streamRegexp,"[$1]"));return this}},ni}function jf(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ii,Gs;function qf(){if(Gs)return ii;Gs=1;var t=Q;return ii=function(e){e.usingPreset=e.preset=function(r){if(typeof r=="function")r(this);else try{var i=t.join(this.options.presets,r),s=jf(i);if(typeof s.load=="function")s.load(this);else throw new Error("preset "+i+" has no load() function")}catch(n){throw new Error("preset "+i+" could not be loaded: "+n.message)}return this}},ii}var oi={exports:{}},Ys;function Xi(){return Ys||(Ys=1,function(t){(function(){var e={},r,i;r=this,r!=null&&(i=r.async),e.noConflict=function(){return r.async=i,e};function s(S){var F=!1;return function(){if(F)throw new Error("Callback was already called.");F=!0,S.apply(r,arguments)}}var n=function(S,F){if(S.forEach)return S.forEach(F);for(var T=0;T<S.length;T+=1)F(S[T],T,S)},o=function(S,F){if(S.map)return S.map(F);var T=[];return n(S,function(p,b,_){T.push(F(p,b,_))}),T},a=function(S,F,T){return S.reduce?S.reduce(F,T):(n(S,function(p,b,_){T=F(T,p,b,_)}),T)},u=function(S){if(Object.keys)return Object.keys(S);var F=[];for(var T in S)S.hasOwnProperty(T)&&F.push(T);return F};typeof process>"u"||!process.nextTick?typeof setImmediate=="function"?(e.nextTick=function(S){setImmediate(S)},e.setImmediate=e.nextTick):(e.nextTick=function(S){setTimeout(S,0)},e.setImmediate=e.nextTick):(e.nextTick=process.nextTick,typeof setImmediate<"u"?e.setImmediate=function(S){setImmediate(S)}:e.setImmediate=e.nextTick),e.each=function(S,F,T){if(T=T||function(){},!S.length)return T();var p=0;n(S,function(b){F(b,s(function(_){_?(T(_),T=function(){}):(p+=1,p>=S.length&&T(null))}))})},e.forEach=e.each,e.eachSeries=function(S,F,T){if(T=T||function(){},!S.length)return T();var p=0,b=function(){F(S[p],function(_){_?(T(_),T=function(){}):(p+=1,p>=S.length?T(null):b())})};b()},e.forEachSeries=e.eachSeries,e.eachLimit=function(S,F,T,p){var b=h(F);b.apply(null,[S,T,p])},e.forEachLimit=e.eachLimit;var h=function(S){return function(F,T,p){if(p=p||function(){},!F.length||S<=0)return p();var b=0,_=0,P=0;(function V(){if(b>=F.length)return p();for(;P<S&&_<F.length;)_+=1,P+=1,T(F[_-1],function(q){q?(p(q),p=function(){}):(b+=1,P-=1,b>=F.length?p():V())})})()}},c=function(S){return function(){var F=Array.prototype.slice.call(arguments);return S.apply(null,[e.each].concat(F))}},f=function(S,F){return function(){var T=Array.prototype.slice.call(arguments);return F.apply(null,[h(S)].concat(T))}},l=function(S){return function(){var F=Array.prototype.slice.call(arguments);return S.apply(null,[e.eachSeries].concat(F))}},d=function(S,F,T,p){var b=[];F=o(F,function(_,P){return{index:P,value:_}}),S(F,function(_,P){T(_.value,function(V,q){b[_.index]=q,P(V)})},function(_){p(_,b)})};e.map=c(d),e.mapSeries=l(d),e.mapLimit=function(S,F,T,p){return y(F)(S,T,p)};var y=function(S){return f(S,d)};e.reduce=function(S,F,T,p){e.eachSeries(S,function(b,_){T(F,b,function(P,V){F=V,_(P)})},function(b){p(b,F)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(S,F,T,p){var b=o(S,function(_){return _}).reverse();e.reduce(b,F,T,p)},e.foldr=e.reduceRight;var v=function(S,F,T,p){var b=[];F=o(F,function(_,P){return{index:P,value:_}}),S(F,function(_,P){T(_.value,function(V){V&&b.push(_),P()})},function(_){p(o(b.sort(function(P,V){return P.index-V.index}),function(P){return P.value}))})};e.filter=c(v),e.filterSeries=l(v),e.select=e.filter,e.selectSeries=e.filterSeries;var E=function(S,F,T,p){var b=[];F=o(F,function(_,P){return{index:P,value:_}}),S(F,function(_,P){T(_.value,function(V){V||b.push(_),P()})},function(_){p(o(b.sort(function(P,V){return P.index-V.index}),function(P){return P.value}))})};e.reject=c(E),e.rejectSeries=l(E);var A=function(S,F,T,p){S(F,function(b,_){T(b,function(P){P?(p(b),p=function(){}):_()})},function(b){p()})};e.detect=c(A),e.detectSeries=l(A),e.some=function(S,F,T){e.each(S,function(p,b){F(p,function(_){_&&(T(!0),T=function(){}),b()})},function(p){T(!1)})},e.any=e.some,e.every=function(S,F,T){e.each(S,function(p,b){F(p,function(_){_||(T(!1),T=function(){}),b()})},function(p){T(!0)})},e.all=e.every,e.sortBy=function(S,F,T){e.map(S,function(p,b){F(p,function(_,P){_?b(_):b(null,{value:p,criteria:P})})},function(p,b){if(p)return T(p);var _=function(P,V){var q=P.criteria,B=V.criteria;return q<B?-1:q>B?1:0};T(null,o(b.sort(_),function(P){return P.value}))})},e.auto=function(S,F){F=F||function(){};var T=u(S);if(!T.length)return F(null);var p={},b=[],_=function(q){b.unshift(q)},P=function(q){for(var B=0;B<b.length;B+=1)if(b[B]===q){b.splice(B,1);return}},V=function(){n(b.slice(0),function(q){q()})};_(function(){u(p).length===T.length&&(F(null,p),F=function(){})}),n(T,function(q){var B=S[q]instanceof Function?[S[q]]:S[q],z=function(Z){var ne=Array.prototype.slice.call(arguments,1);if(ne.length<=1&&(ne=ne[0]),Z){var ue={};n(u(p),function(pe){ue[pe]=p[pe]}),ue[q]=ne,F(Z,ue),F=function(){}}else p[q]=ne,e.setImmediate(V)},W=B.slice(0,Math.abs(B.length-1))||[],J=function(){return a(W,function(Z,ne){return Z&&p.hasOwnProperty(ne)},!0)&&!p.hasOwnProperty(q)};if(J())B[B.length-1](z,p);else{var K=function(){J()&&(P(K),B[B.length-1](z,p))};_(K)}})},e.waterfall=function(S,F){if(F=F||function(){},S.constructor!==Array){var T=new Error("First argument to waterfall must be an array of functions");return F(T)}if(!S.length)return F();var p=function(b){return function(_){if(_)F.apply(null,arguments),F=function(){};else{var P=Array.prototype.slice.call(arguments,1),V=b.next();V?P.push(p(V)):P.push(F),e.setImmediate(function(){b.apply(null,P)})}}};p(e.iterator(S))()};var w=function(S,F,T){if(T=T||function(){},F.constructor===Array)S.map(F,function(b,_){b&&b(function(P){var V=Array.prototype.slice.call(arguments,1);V.length<=1&&(V=V[0]),_.call(null,P,V)})},T);else{var p={};S.each(u(F),function(b,_){F[b](function(P){var V=Array.prototype.slice.call(arguments,1);V.length<=1&&(V=V[0]),p[b]=V,_(P)})},function(b){T(b,p)})}};e.parallel=function(S,F){w({map:e.map,each:e.each},S,F)},e.parallelLimit=function(S,F,T){w({map:y(F),each:h(F)},S,T)},e.series=function(S,F){if(F=F||function(){},S.constructor===Array)e.mapSeries(S,function(p,b){p&&p(function(_){var P=Array.prototype.slice.call(arguments,1);P.length<=1&&(P=P[0]),b.call(null,_,P)})},F);else{var T={};e.eachSeries(u(S),function(p,b){S[p](function(_){var P=Array.prototype.slice.call(arguments,1);P.length<=1&&(P=P[0]),T[p]=P,b(_)})},function(p){F(p,T)})}},e.iterator=function(S){var F=function(T){var p=function(){return S.length&&S[T].apply(null,arguments),p.next()};return p.next=function(){return T<S.length-1?F(T+1):null},p};return F(0)},e.apply=function(S){var F=Array.prototype.slice.call(arguments,1);return function(){return S.apply(null,F.concat(Array.prototype.slice.call(arguments)))}};var g=function(S,F,T,p){var b=[];S(F,function(_,P){T(_,function(V,q){b=b.concat(q||[]),P(V)})},function(_){p(_,b)})};e.concat=c(g),e.concatSeries=l(g),e.whilst=function(S,F,T){S()?F(function(p){if(p)return T(p);e.whilst(S,F,T)}):T()},e.doWhilst=function(S,F,T){S(function(p){if(p)return T(p);F()?e.doWhilst(S,F,T):T()})},e.until=function(S,F,T){S()?T():F(function(p){if(p)return T(p);e.until(S,F,T)})},e.doUntil=function(S,F,T){S(function(p){if(p)return T(p);F()?T():e.doUntil(S,F,T)})},e.queue=function(S,F){F===void 0&&(F=1);function T(_,P,V,q){P.constructor!==Array&&(P=[P]),n(P,function(B){var z={data:B,callback:typeof q=="function"?q:null};V?_.tasks.unshift(z):_.tasks.push(z),_.saturated&&_.tasks.length===F&&_.saturated(),e.setImmediate(_.process)})}var p=0,b={tasks:[],concurrency:F,saturated:null,empty:null,drain:null,push:function(_,P){T(b,_,!1,P)},unshift:function(_,P){T(b,_,!0,P)},process:function(){if(p<b.concurrency&&b.tasks.length){var _=b.tasks.shift();b.empty&&b.tasks.length===0&&b.empty(),p+=1;var P=function(){p-=1,_.callback&&_.callback.apply(_,arguments),b.drain&&b.tasks.length+p===0&&b.drain(),b.process()},V=s(P);S(_.data,V)}},length:function(){return b.tasks.length},running:function(){return p}};return b},e.cargo=function(S,F){var T=!1,p=[],b={tasks:p,payload:F,saturated:null,empty:null,drain:null,push:function(_,P){_.constructor!==Array&&(_=[_]),n(_,function(V){p.push({data:V,callback:typeof P=="function"?P:null}),b.saturated&&p.length===F&&b.saturated()}),e.setImmediate(b.process)},process:function _(){if(!T){if(p.length===0){b.drain&&b.drain();return}var P=typeof F=="number"?p.splice(0,F):p.splice(0),V=o(P,function(q){return q.data});b.empty&&b.empty(),T=!0,S(V,function(){T=!1;var q=arguments;n(P,function(B){B.callback&&B.callback.apply(null,q)}),_()})}},length:function(){return p.length},running:function(){return T}};return b};var C=function(S){return function(F){var T=Array.prototype.slice.call(arguments,1);F.apply(null,T.concat([function(p){var b=Array.prototype.slice.call(arguments,1);typeof console<"u"&&(p?console.error&&console.error(p):console[S]&&n(b,function(_){console[S](_)}))}]))}};e.log=C("log"),e.dir=C("dir"),e.memoize=function(S,F){var T={},p={};F=F||function(_){return _};var b=function(){var _=Array.prototype.slice.call(arguments),P=_.pop(),V=F.apply(null,_);V in T?P.apply(null,T[V]):V in p?p[V].push(P):(p[V]=[P],S.apply(null,_.concat([function(){T[V]=arguments;var q=p[V];delete p[V];for(var B=0,z=q.length;B<z;B++)q[B].apply(null,arguments)}])))};return b.memo=T,b.unmemoized=S,b},e.unmemoize=function(S){return function(){return(S.unmemoized||S).apply(null,arguments)}},e.times=function(S,F,T){for(var p=[],b=0;b<S;b++)p.push(b);return e.map(p,F,T)},e.timesSeries=function(S,F,T){for(var p=[],b=0;b<S;b++)p.push(b);return e.mapSeries(p,F,T)},e.compose=function(){var S=Array.prototype.reverse.call(arguments);return function(){var F=this,T=Array.prototype.slice.call(arguments),p=T.pop();e.reduce(S,T,function(b,_,P){_.apply(F,b.concat([function(){var V=arguments[0],q=Array.prototype.slice.call(arguments,1);P(V,q)}]))},function(b,_){p.apply(F,[b].concat(_))})}};var D=function(S,F){var T=function(){var b=this,_=Array.prototype.slice.call(arguments),P=_.pop();return S(F,function(V,q){V.apply(b,_.concat([q]))},P)};if(arguments.length>2){var p=Array.prototype.slice.call(arguments,2);return T.apply(this,p)}else return T};e.applyEach=c(D),e.applyEachSeries=l(D),e.forever=function(S,F){function T(p){if(p){if(F)return F(p);throw p}S(T)}T()},t.exports?t.exports=e:r.async=e})()}(oi)),oi.exports}var si,Js;function Bf(){if(Js)return si;Js=1;var t=ar.spawn,e=Xi(),r=Ke;function i(s){s._inputs[0].isStream||s.ffprobe(0,function(o,a){s._ffprobeData=a})}return si=function(s){s._spawnFfmpeg=function(n,o,a,u){typeof o=="function"&&(u=a,a=o,o={}),typeof u>"u"&&(u=a,a=function(){});var h="stdoutLines"in o?o.stdoutLines:this.options.stdoutLines;this._getFfmpegPath(function(c,f){if(c)return u(c);if(!f||f.length===0)return u(new Error("Cannot find ffmpeg"));o.niceness&&o.niceness!==0&&!r.isWindows&&(n.unshift("-n",o.niceness,f),f="nice");var l=r.linesRing(h),d=!1,y=r.linesRing(h),v=!1,E=t(f,n,o);E.stderr&&E.stderr.setEncoding("utf8"),E.on("error",function(C){u(C)});var A=null;function w(C){C&&(A=C),g&&(d||!o.captureStdout)&&v&&u(A,l,y)}var g=!1;E.on("exit",function(C,D){g=!0,D?w(new Error("ffmpeg was killed with signal "+D)):C?w(new Error("ffmpeg exited with code "+C)):w()}),o.captureStdout&&(E.stdout.on("data",function(C){l.append(C)}),E.stdout.on("close",function(){l.close(),d=!0,w()})),E.stderr.on("data",function(C){y.append(C)}),E.stderr.on("close",function(){y.close(),v=!0,w()}),a(E,l,y)})},s._getArguments=function(){var n=this._complexFilters.get(),o=this._outputs.some(function(a){return a.isFile});return[].concat(this._inputs.reduce(function(a,u){var h=typeof u.source=="string"?u.source:"pipe:0";return a.concat(u.options.get(),["-i",h])},[]),this._global.get(),o?["-y"]:[],n,this._outputs.reduce(function(a,u){var h=r.makeFilterStrings(u.sizeFilters.get()),c=u.audioFilters.get(),f=u.videoFilters.get().concat(h),l;return u.target?typeof u.target=="string"?l=[u.target]:l=["pipe:1"]:l=[],a.concat(u.audio.get(),c.length?["-filter:a",c.join(",")]:[],u.video.get(),f.length?["-filter:v",f.join(",")]:[],u.options.get(),l)},[]))},s._prepare=function(n,o){var a=this;e.waterfall([function(u){a._checkCapabilities(u)},function(u){if(!o)return u();a.ffprobe(0,function(h,c){h||(a._ffprobeData=c),u()})},function(u){var h=a._outputs.some(function(c){return c.flags.flvmeta&&!c.isFile&&(a.logger.warn("Updating flv metadata is only supported for files"),c.flags.flvmeta=!1),c.flags.flvmeta});h?a._getFlvtoolPath(function(c){u(c)}):u()},function(u){var h;try{h=a._getArguments()}catch(c){return u(c)}u(null,h)},function(u,h){a.availableEncoders(function(c,f){for(var l=0;l<u.length;l++)(u[l]==="-acodec"||u[l]==="-vcodec")&&(l++,u[l]in f&&f[u[l]].experimental&&(u.splice(l+1,0,"-strict","experimental"),l+=2));h(null,u)})}],n),o||(this.listeners("progress").length>0?i(this):this.once("newListener",function(u){u==="progress"&&i(this)}))},s.exec=s.execute=s.run=function(){var n=this,o=this._outputs.some(function(f){return"target"in f});if(!o)throw new Error("No output specified");var a=this._outputs.filter(function(f){return typeof f.target!="string"})[0],u=this._inputs.filter(function(f){return typeof f.source!="string"})[0],h=!1;function c(f,l,d){h||(h=!0,f?n.emit("error",f,l,d):n.emit("end",l,d))}return n._prepare(function(f,l){if(f)return c(f);n._spawnFfmpeg(l,{captureStdout:!a,niceness:n.options.niceness,cwd:n.options.cwd,windowsHide:!0},function(y,v,E){if(n.ffmpegProc=y,n.emit("start","ffmpeg "+l.join(" ")),u&&(u.source.on("error",function(g){var C=new Error("Input stream error: "+g.message);C.inputStreamError=g,c(C),y.kill()}),u.source.resume(),u.source.pipe(y.stdin),y.stdin.on("error",function(){})),n.options.timeout&&(n.processTimer=setTimeout(function(){var g="process ran into a timeout ("+n.options.timeout+"s)";c(new Error(g),v.get(),E.get()),y.kill()},n.options.timeout*1e3)),a&&(y.stdout.pipe(a.target,a.pipeopts),a.target.on("close",function(){n.logger.debug("Output stream closed, scheduling kill for ffmpeg process"),setTimeout(function(){c(new Error("Output stream closed")),y.kill()},20)}),a.target.on("error",function(g){n.logger.debug("Output stream error, killing ffmpeg process");var C=new Error("Output stream error: "+g.message);C.outputStreamError=g,c(C,v.get(),E.get()),y.kill("SIGKILL")})),E){if(n.listeners("stderr").length&&E.callback(function(g){n.emit("stderr",g)}),n.listeners("codecData").length){var A=!1,w={};E.callback(function(g){A||(A=r.extractCodecData(n,g,w))})}n.listeners("progress").length&&E.callback(function(g){r.extractProgress(n,g)})}},function(y,v,E){if(clearTimeout(n.processTimer),delete n.ffmpegProc,y)y.message.match(/ffmpeg exited with code/)&&(y.message+=": "+r.extractError(E.get())),c(y,v.get(),E.get());else{var A=n._outputs.filter(function(w){return w.flags.flvmeta});A.length?n._getFlvtoolPath(function(w,g){if(w)return c(w);e.each(A,function(C,D){t(g,["-U",C.target],{windowsHide:!0}).on("error",function(S){D(new Error("Error running "+g+" on "+C.target+": "+S.message))}).on("exit",function(S,F){S!==0||F?D(new Error(g+" "+(F?"received signal "+F:"exited with code "+S))+" when running on "+C.target):D()})},function(C){C?c(C):c(null,v.get(),E.get())})}):c(null,v.get(),E.get())}})}),this},s.renice=function(n){if(!r.isWindows&&(n=n||0,(n<-20||n>20)&&this.logger.warn("Invalid niceness value: "+n+", must be between -20 and 20"),n=Math.min(20,Math.max(-20,n)),this.options.niceness=n,this.ffmpegProc)){var o=this.logger,a=this.ffmpegProc.pid,u=t("renice",[n,"-p",a],{windowsHide:!0});u.on("error",function(h){o.warn("could not renice process "+a+": "+h.message)}),u.on("exit",function(h,c){c?o.warn("could not renice process "+a+": renice was killed by signal "+c):h?o.warn("could not renice process "+a+": renice exited with "+h):o.info("successfully reniced process "+a+" to "+n+" niceness")})}return this},s.kill=function(n){return this.ffmpegProc?this.ffmpegProc.kill(n||"SIGKILL"):this.logger.warn("No running ffmpeg process, cannot send signal"),this}},si}var ai,Ks;function Uf(){if(Ks)return ai;Ks=1;var t=ae,e=Q,r=Xi(),i=Ke,s=/^\s*([D ])([E ])([VAS])([S ])([D ])([T ]) ([^ ]+) +(.*)$/,n=/^\s*([D\.])([E\.])([VAS])([I\.])([L\.])([S\.]) ([^ ]+) +(.*)$/,o=/\(encoders:([^\)]+)\)/,a=/\(decoders:([^\)]+)\)/,u=/^\s*([VAS\.])([F\.])([S\.])([X\.])([B\.])([D\.]) ([^ ]+) +(.*)$/,h=/^\s*([D ])([E ])\s+([^ ]+)\s+(.*)$/,c=/\r\n|\r|\n/,f=/^(?: [T\.][S\.][C\.] )?([^ ]+) +(AA?|VV?|\|)->(AA?|VV?|\|) +(.*)$/,l={};return ai=function(d){d.setFfmpegPath=function(y){return l.ffmpegPath=y,this},d.setFfprobePath=function(y){return l.ffprobePath=y,this},d.setFlvtoolPath=function(y){return l.flvtoolPath=y,this},d._forgetPaths=function(){delete l.ffmpegPath,delete l.ffprobePath,delete l.flvtoolPath},d._getFfmpegPath=function(y){if("ffmpegPath"in l)return y(null,l.ffmpegPath);r.waterfall([function(v){process.env.FFMPEG_PATH?t.exists(process.env.FFMPEG_PATH,function(E){E?v(null,process.env.FFMPEG_PATH):v(null,"")}):v(null,"")},function(v,E){if(v.length)return E(null,v);i.which("ffmpeg",function(A,w){E(A,w)})}],function(v,E){v?y(v):y(null,l.ffmpegPath=E||"")})},d._getFfprobePath=function(y){var v=this;if("ffprobePath"in l)return y(null,l.ffprobePath);r.waterfall([function(E){process.env.FFPROBE_PATH?t.exists(process.env.FFPROBE_PATH,function(A){E(null,A?process.env.FFPROBE_PATH:"")}):E(null,"")},function(E,A){if(E.length)return A(null,E);i.which("ffprobe",function(w,g){A(w,g)})},function(E,A){if(E.length)return A(null,E);v._getFfmpegPath(function(w,g){if(w)A(w);else if(g.length){var C=i.isWindows?"ffprobe.exe":"ffprobe",D=e.join(e.dirname(g),C);t.exists(D,function(S){A(null,S?D:"")})}else A(null,"")})}],function(E,A){E?y(E):y(null,l.ffprobePath=A||"")})},d._getFlvtoolPath=function(y){if("flvtoolPath"in l)return y(null,l.flvtoolPath);r.waterfall([function(v){process.env.FLVMETA_PATH?t.exists(process.env.FLVMETA_PATH,function(E){v(null,E?process.env.FLVMETA_PATH:"")}):v(null,"")},function(v,E){if(v.length)return E(null,v);process.env.FLVTOOL2_PATH?t.exists(process.env.FLVTOOL2_PATH,function(A){E(null,A?process.env.FLVTOOL2_PATH:"")}):E(null,"")},function(v,E){if(v.length)return E(null,v);i.which("flvmeta",function(A,w){E(A,w)})},function(v,E){if(v.length)return E(null,v);i.which("flvtool2",function(A,w){E(A,w)})}],function(v,E){v?y(v):y(null,l.flvtoolPath=E||"")})},d.availableFilters=d.getAvailableFilters=function(y){if("filters"in l)return y(null,l.filters);this._spawnFfmpeg(["-filters"],{captureStdout:!0,stdoutLines:0},function(v,E){if(v)return y(v);var A=E.get(),w=A.split(`
`),g={},C={A:"audio",V:"video","|":"none"};w.forEach(function(D){var S=D.match(f);S&&(g[S[1]]={description:S[4],input:C[S[2].charAt(0)],multipleInputs:S[2].length>1,output:C[S[3].charAt(0)],multipleOutputs:S[3].length>1})}),y(null,l.filters=g)})},d.availableCodecs=d.getAvailableCodecs=function(y){if("codecs"in l)return y(null,l.codecs);this._spawnFfmpeg(["-codecs"],{captureStdout:!0,stdoutLines:0},function(v,E){if(v)return y(v);var A=E.get(),w=A.split(c),g={};w.forEach(function(C){var D=C.match(s);if(D&&D[7]!=="="&&(g[D[7]]={type:{V:"video",A:"audio",S:"subtitle"}[D[3]],description:D[8],canDecode:D[1]==="D",canEncode:D[2]==="E",drawHorizBand:D[4]==="S",directRendering:D[5]==="D",weirdFrameTruncation:D[6]==="T"}),D=C.match(n),D&&D[7]!=="="){var S=g[D[7]]={type:{V:"video",A:"audio",S:"subtitle"}[D[3]],description:D[8],canDecode:D[1]==="D",canEncode:D[2]==="E",intraFrameOnly:D[4]==="I",isLossy:D[5]==="L",isLossless:D[6]==="S"},F=S.description.match(o);F=F?F[1].trim().split(" "):[];var T=S.description.match(a);if(T=T?T[1].trim().split(" "):[],F.length||T.length){var p={};i.copy(S,p),delete p.canEncode,delete p.canDecode,F.forEach(function(b){g[b]={},i.copy(p,g[b]),g[b].canEncode=!0}),T.forEach(function(b){b in g||(g[b]={},i.copy(p,g[b])),g[b].canDecode=!0})}}}),y(null,l.codecs=g)})},d.availableEncoders=d.getAvailableEncoders=function(y){if("encoders"in l)return y(null,l.encoders);this._spawnFfmpeg(["-encoders"],{captureStdout:!0,stdoutLines:0},function(v,E){if(v)return y(v);var A=E.get(),w=A.split(c),g={};w.forEach(function(C){var D=C.match(u);D&&D[7]!=="="&&(g[D[7]]={type:{V:"video",A:"audio",S:"subtitle"}[D[1]],description:D[8],frameMT:D[2]==="F",sliceMT:D[3]==="S",experimental:D[4]==="X",drawHorizBand:D[5]==="B",directRendering:D[6]==="D"})}),y(null,l.encoders=g)})},d.availableFormats=d.getAvailableFormats=function(y){if("formats"in l)return y(null,l.formats);this._spawnFfmpeg(["-formats"],{captureStdout:!0,stdoutLines:0},function(v,E){if(v)return y(v);var A=E.get(),w=A.split(c),g={};w.forEach(function(C){var D=C.match(h);D&&D[3].split(",").forEach(function(S){S in g||(g[S]={description:D[4],canDemux:!1,canMux:!1}),D[1]==="D"&&(g[S].canDemux=!0),D[2]==="E"&&(g[S].canMux=!0)})}),y(null,l.formats=g)})},d._checkCapabilities=function(y){var v=this;r.waterfall([function(E){v.availableFormats(E)},function(E,A){var w;if(w=v._outputs.reduce(function(g,C){var D=C.options.find("-f",1);return D&&(!(D[0]in E)||!E[D[0]].canMux)&&g.push(D),g},[]),w.length===1)return A(new Error("Output format "+w[0]+" is not available"));if(w.length>1)return A(new Error("Output formats "+w.join(", ")+" are not available"));if(w=v._inputs.reduce(function(g,C){var D=C.options.find("-f",1);return D&&(!(D[0]in E)||!E[D[0]].canDemux)&&g.push(D[0]),g},[]),w.length===1)return A(new Error("Input format "+w[0]+" is not available"));if(w.length>1)return A(new Error("Input formats "+w.join(", ")+" are not available"));A()},function(E){v.availableEncoders(E)},function(E,A){var w;if(w=v._outputs.reduce(function(g,C){var D=C.audio.find("-acodec",1);return D&&D[0]!=="copy"&&(!(D[0]in E)||E[D[0]].type!=="audio")&&g.push(D[0]),g},[]),w.length===1)return A(new Error("Audio codec "+w[0]+" is not available"));if(w.length>1)return A(new Error("Audio codecs "+w.join(", ")+" are not available"));if(w=v._outputs.reduce(function(g,C){var D=C.video.find("-vcodec",1);return D&&D[0]!=="copy"&&(!(D[0]in E)||E[D[0]].type!=="video")&&g.push(D[0]),g},[]),w.length===1)return A(new Error("Video codec "+w[0]+" is not available"));if(w.length>1)return A(new Error("Video codecs "+w.join(", ")+" are not available"));A()}],y)}},ai}var ui,Qs;function Xf(){if(Qs)return ui;Qs=1;var t=ar.spawn;function e(s){return s.match(/^TAG:/)}function r(s){return s.match(/^DISPOSITION:/)}function i(s){var n=s.split(/\r\n|\r|\n/);n=n.filter(function(f){return f.length>0});var o={streams:[],format:{},chapters:[]};function a(f){for(var l={},d=n.shift();typeof d<"u";){if(d.toLowerCase()=="[/"+f+"]")return l;if(d.match(/^\[/)){d=n.shift();continue}var y=d.match(/^([^=]+)=(.*)$/);y&&(!y[1].match(/^TAG:/)&&y[2].match(/^[0-9]+(\.[0-9]+)?$/)?l[y[1]]=Number(y[2]):l[y[1]]=y[2]),d=n.shift()}return l}for(var u=n.shift();typeof u<"u";){if(u.match(/^\[stream/i)){var h=a("stream");o.streams.push(h)}else if(u.match(/^\[chapter/i)){var c=a("chapter");o.chapters.push(c)}else u.toLowerCase()==="[format]"&&(o.format=a("format"));u=n.shift()}return o}return ui=function(s){s.ffprobe=function(){var n,o=null,a=[],u,u=arguments[arguments.length-1],h=!1;function c(f,l){h||(h=!0,u(f,l))}switch(arguments.length){case 3:o=arguments[0],a=arguments[1];break;case 2:typeof arguments[0]=="number"?o=arguments[0]:Array.isArray(arguments[0])&&(a=arguments[0]);break}if(o===null){if(!this._currentInput)return c(new Error("No input specified"));n=this._currentInput}else if(n=this._inputs[o],!n)return c(new Error("Invalid input index"));this._getFfprobePath(function(f,l){if(f)return c(f);if(!l)return c(new Error("Cannot find ffprobe"));var d="",y=!1,v="",E=!1,A=n.isStream?"pipe:0":n.source,w=t(l,["-show_streams","-show_format"].concat(a,A),{windowsHide:!0});n.isStream&&(w.stdin.on("error",function(S){["ECONNRESET","EPIPE","EOF"].indexOf(S.code)>=0||c(S)}),w.stdin.on("close",function(){n.source.pause(),n.source.unpipe(w.stdin)}),n.source.pipe(w.stdin)),w.on("error",u);var g=null;function C(S){if(S&&(g=S),D&&y&&E){if(g)return v&&(g.message+=`
`+v),c(g);var F=i(d);[F.format].concat(F.streams).forEach(function(T){if(T){var p=Object.keys(T).filter(e);p.length&&(T.tags=T.tags||{},p.forEach(function(_){T.tags[_.substr(4)]=T[_],delete T[_]}));var b=Object.keys(T).filter(r);b.length&&(T.disposition=T.disposition||{},b.forEach(function(_){T.disposition[_.substr(12)]=T[_],delete T[_]}))}}),c(null,F)}}var D=!1;w.on("exit",function(S,F){D=!0,S?C(new Error("ffprobe exited with code "+S)):F?C(new Error("ffprobe was killed with signal "+F)):C()}),w.stdout.on("data",function(S){d+=S}),w.stdout.on("close",function(){y=!0,C()}),w.stderr.on("data",function(S){v+=S}),w.stderr.on("close",function(){E=!0,C()})})}},ui}var ci,Zs;function Vf(){if(Zs)return ci;Zs=1;var t=ae,e=Q,r=wa.PassThrough,i=Xi(),s=Ke;return ci=function(o){o.saveToFile=o.save=function(a){return this.output(a).run(),this},o.writeToStream=o.pipe=o.stream=function(a,u){if(a&&!("writable"in a)&&(u=a,a=void 0),!a){if(process.version.match(/v0\.8\./))throw new Error("PassThrough stream is not supported on node v0.8");a=new r}return this.output(a,u).run(),a},o.takeScreenshots=o.thumbnail=o.thumbnails=o.screenshot=o.screenshots=function(a,u){var h=this,c=this._currentInput.source;if(a=a||{count:1},typeof a=="number"&&(a={count:a}),"folder"in a||(a.folder=u||"."),"timestamps"in a&&(a.timemarks=a.timestamps),!("timemarks"in a)){if(!a.count)throw new Error("Cannot take screenshots: neither a count nor a timemark list are specified");var f=100/(1+a.count);a.timemarks=[];for(var l=0;l<a.count;l++)a.timemarks.push(f*(l+1)+"%")}if("size"in a){var d=a.size.match(/^(\d+)x(\d+)$/),y=a.size.match(/^(\d+)x\?$/),v=a.size.match(/^\?x(\d+)$/),E=a.size.match(/^(\d+)%$/);if(!d&&!y&&!v&&!E)throw new Error("Invalid size parameter: "+a.size)}var A;function w(g){A?g(null,A):h.ffprobe(function(C,D){A=D,g(C,D)})}return i.waterfall([function(C){if(a.timemarks.some(function(D){return(""+D).match(/^[\d.]+%$/)})){if(typeof c!="string")return C(new Error("Cannot compute screenshot timemarks with an input stream, please specify fixed timemarks"));w(function(D,S){if(D)C(D);else{var F=S.streams.reduce(function(p,b){return b.codec_type==="video"&&b.width*b.height>p.width*p.height?b:p},{width:0,height:0});if(F.width===0)return C(new Error("No video stream in input, cannot take screenshots"));var T=Number(F.duration);if(isNaN(T)&&(T=Number(S.format.duration)),isNaN(T))return C(new Error("Could not get input duration, please specify fixed timemarks"));a.timemarks=a.timemarks.map(function(p){return(""+p).match(/^([\d.]+)%$/)?T*parseFloat(p)/100:p}),C()}})}else C()},function(C){a.timemarks=a.timemarks.map(function(D){return s.timemarkToSeconds(D)}).sort(function(D,S){return D-S}),C()},function(C){var D=a.filename||"tn.png";if(D.indexOf(".")===-1&&(D+=".png"),a.timemarks.length>1&&!D.match(/%(s|0*i)/)){var S=e.extname(D);D=e.join(e.dirname(D),e.basename(D,S)+"_%i"+S)}C(null,D)},function(C,D){if(C.match(/%[bf]/)){if(typeof c!="string")return D(new Error("Cannot replace %f or %b when using an input stream"));C=C.replace(/%f/g,e.basename(c)).replace(/%b/g,e.basename(c,e.extname(c)))}D(null,C)},function(C,D){if(C.match(/%[whr]/)){if(d)return D(null,C,d[1],d[2]);w(function(S,F){if(S)return D(new Error("Could not determine video resolution to replace %w, %h or %r"));var T=F.streams.reduce(function(_,P){return P.codec_type==="video"&&P.width*P.height>_.width*_.height?P:_},{width:0,height:0});if(T.width===0)return D(new Error("No video stream in input, cannot replace %w, %h or %r"));var p=T.width,b=T.height;y?(b=b*Number(y[1])/p,p=Number(y[1])):v?(p=p*Number(v[1])/b,b=Number(v[1])):E&&(p=p*Number(E[1])/100,b=b*Number(E[1])/100),D(null,C,Math.round(p/2)*2,Math.round(b/2)*2)})}else D(null,C,-1,-1)},function(C,D,S,F){C=C.replace(/%r/g,"%wx%h").replace(/%w/g,D).replace(/%h/g,S),F(null,C)},function(C,D){var S=a.timemarks.map(function(F,T){return C.replace(/%s/g,s.timemarkToSeconds(F)).replace(/%(0*)i/g,function(p,b){var _=""+(T+1);return b.substr(0,Math.max(0,b.length+1-_.length))+_})});h.emit("filenames",S),D(null,S)},function(C,D){t.exists(a.folder,function(S){S?D(null,C):t.mkdir(a.folder,function(F){F?D(F):D(null,C)})})}],function(C,D){if(C)return h.emit("error",C);var S=a.timemarks.length,F,T=[F={filter:"split",options:S,outputs:[]}];if("size"in a){h.size(a.size);var p=h._currentOutput.sizeFilters.get().map(function(V,q){return q>0&&(V.inputs="size"+(q-1)),V.outputs="size"+q,V});F.inputs="size"+(p.length-1),T=p.concat(T),h._currentOutput.sizeFilters.clear()}for(var b=0,_=0;_<S;_++){var P="screen"+_;F.outputs.push(P),_===0&&(b=a.timemarks[_],h.seekInput(b)),h.output(e.join(a.folder,D[_])).frames(1).map(P),_>0&&h.seek(a.timemarks[_]-b)}h.complexFilter(T),h.run()}),this},o.mergeToFile=o.concatenate=o.concat=function(a,u){var h=this._inputs.filter(function(f){return!f.isStream})[0],c=this;return this.ffprobe(this._inputs.indexOf(h),function(f,l){if(f)return c.emit("error",f);var d=l.streams.some(function(v){return v.codec_type==="audio"}),y=l.streams.some(function(v){return v.codec_type==="video"});c.output(a,u).complexFilter({filter:"concat",options:{n:c._inputs.length,v:y?1:0,a:d?1:0}}).run()}),this}},ci}var zf=Q,Wf=Rt,au=ct.EventEmitter,Ei=Ke;function ce(t,e){if(!(this instanceof ce))return new ce(t,e);au.call(this),typeof t=="object"&&!("readable"in t)?e=t:(e=e||{},e.source=t),this._inputs=[],e.source&&this.input(e.source),this._outputs=[],this.output();var r=this;["_global","_complexFilters"].forEach(function(i){r[i]=Ei.args()}),e.stdoutLines="stdoutLines"in e?e.stdoutLines:100,e.presets=e.presets||e.preset||zf.join(__dirname,"presets"),e.niceness=e.niceness||e.priority||0,this.options=e,this.logger=e.logger||{debug:function(){},info:function(){},warn:function(){},error:function(){}}}Wf.inherits(ce,au);var Hf=ce;ce.prototype.clone=function(){var t=new ce,e=this;return t.options=this.options,t.logger=this.logger,t._inputs=this._inputs.map(function(r){return{source:r.source,options:r.options.clone()}}),"target"in this._outputs[0]?(t._outputs=[],t.output()):(t._outputs=[t._currentOutput={flags:{}}],["audio","audioFilters","video","videoFilters","sizeFilters","options"].forEach(function(r){t._currentOutput[r]=e._currentOutput[r].clone()}),this._currentOutput.sizeData&&(t._currentOutput.sizeData={},Ei.copy(this._currentOutput.sizeData,t._currentOutput.sizeData)),Ei.copy(this._currentOutput.flags,t._currentOutput.flags)),["_global","_complexFilters"].forEach(function(r){t[r]=e[r].clone()}),t};Pf()(ce.prototype);Lf()(ce.prototype);Mf()(ce.prototype);$f()(ce.prototype);Rf()(ce.prototype);kf()(ce.prototype);qf()(ce.prototype);Bf()(ce.prototype);Uf()(ce.prototype);ce.setFfmpegPath=function(t){new ce().setFfmpegPath(t)};ce.setFfprobePath=function(t){new ce().setFfprobePath(t)};ce.setFlvtoolPath=function(t){new ce().setFlvtoolPath(t)};ce.availableFilters=ce.getAvailableFilters=function(t){new ce().availableFilters(t)};ce.availableCodecs=ce.getAvailableCodecs=function(t){new ce().availableCodecs(t)};ce.availableFormats=ce.getAvailableFormats=function(t){new ce().availableFormats(t)};ce.availableEncoders=ce.getAvailableEncoders=function(t){new ce().availableEncoders(t)};Xf()(ce.prototype);ce.ffprobe=function(t){var e=new ce(t);e.ffprobe.apply(e,Array.prototype.slice.call(arguments,1))};Vf()(ce.prototype);var Nt=Hf;const Vi=vt(Nt);function Gf(){try{let t,e;if(se.app.isPackaged){const r=Q.join(process.resourcesPath,"bin");if(!ae.existsSync(r))throw new Error(`FFmpeg目录不存在: ${r}`);const i=process.platform==="win32"?".exe":"";if(t=Q.join(r,`ffmpeg${i}`),e=Q.join(r,`ffprobe${i}`),!ae.existsSync(t))throw new Error(`FFmpeg可执行文件不存在: ${t}`);if(!ae.existsSync(e))throw new Error(`FFprobe可执行文件不存在: ${e}`)}else{const r=Q.join(se.app.getAppPath(),"bin"),i=process.platform==="win32"?".exe":"";t=require("@ffmpeg-installer/ffmpeg").path,e=require("@ffprobe-installer/ffprobe").path}return Nt.setFfmpegPath(t),Nt.setFfprobePath(e),re.info("FFmpeg路径:",t),re.info("FFprobe路径:",e),{ffmpegPath:t,ffprobePath:e}}catch(t){throw re.error("FFmpeg初始化失败:",t),new Error(`视频处理引擎初始化失败: ${t.message}`)}}function It(t){return new Promise((e,r)=>{Nt.ffprobe(t,(i,s)=>{if(i)return r(i);e(s.format.duration||0)})})}async function Yf(t){return new Promise(e=>{Nt.ffprobe(t,(r,i)=>{if(r)return re.error("FFprobe检测音频流失败:",{filePath:t,error:r.message}),e(!1);const s=i.streams.some(n=>n.codec_type==="audio");re.verbose(`音频流检测结果: ${t} -> ${s?"有":"无"}音频`),e(s)})})}function Jf(){if(se.app.isPackaged)return Q.join(process.resourcesPath,"fonts");{const t=Q.join(__dirname,"../../fonts");if(ae.existsSync(t))return t;{const e={win32:"C:/Windows/Fonts/",darwin:"/System/Library/Fonts/",linux:"/usr/share/fonts/"},r=process.platform;return Q.join(e[r]||"")}}}const dt="zhushou";function Kf(){return se.app.isPackaged?Q.dirname(process.execPath):se.app.getAppPath()}function ft(){try{const t=Kf(),e=Q.join(t,"data");return ae.existsSync(e)||ae.mkdirSync(e,{recursive:!0}),e}catch(t){switch(console.error("Failed to create zhushou directory:",t),process.platform){case"win32":return Q.join(se.app.getPath("appData"),dt);case"darwin":return Q.join(se.app.getPath("appData"),dt);case"linux":return Q.join(se.app.getPath("appData"),dt);default:return Q.join(se.app.getPath("documents"),dt)}}}function uu(){try{const t=ft();ae.existsSync(t)||(ae.mkdirSync(t),console.log("Created zhushou directory at:",t));try{ae.accessSync(t,ae.constants.W_OK)}catch{return console.error("No write permission for zhushou directory, falling back to documents"),Q.join(se.app.getPath("documents"),dt)}return t}catch(t){return console.error("Failed to create zhushou directory:",t),Q.join(se.app.getPath("documents"),dt)}}function Qf(){se.ipcMain.handle("get-default-save-path",()=>uu())}async function cu(t){try{const e={text:t.text,voice:t.voice||"xiaoyun",format:t.format||"mp3",sample_rate:t.sample_rate||16e3,volume:t.volume||50,speech_rate:t.speech_rate||0,pitch_rate:t.pitch_rate||0},r=t.outputDir||ft(),i=t.outputFileName||`tts_${Date.now()}`,s=await Sf();Dr.existsSync(r)||Dr.mkdirSync(r,{recursive:!0});const n=new ol({url:ir.ttsUrl,appkey:ir.appkey,token:s}),o=Q.join(r,`${i}.${e.format||"mp3"}`),a=Dr.createWriteStream(o);return re.log(o),new Promise((u,h)=>{n.on("meta",c=>{re.info("接收到元信息:",c)}),n.on("data",c=>{try{a.write(c),re.debug(`接收到数据块，大小: ${c.length} bytes`)}catch(f){re.error("写入文件失败:",f),h(f)}}),n.on("completed",async()=>{a.end(),re.info("语音合成完成");const c=await It(o);re.info(`语音合成完成，时长: ${c}秒`),u({success:!0,outputFile:o,duration:Math.floor(c*1e3)/1e3})}),n.on("closed",()=>{re.info("连接已关闭")}),n.on("failed",c=>{a.end(),re.error("语音合成失败:",c),h(c)}),n.start(e,!0,6e3)})}catch(e){throw re.error("语音合成初始化失败:",e),e}}function Zf(){se.ipcMain.handle("text2voice",async(t,e)=>{const r=JSON.parse(xt(e));return re.log("accept params:"),re.log(JSON.stringify(r)),cu(r)})}const eh={...je.webcrypto.subtle,generateKey:async(t,e,r)=>je.webcrypto.subtle.generateKey(t,e,r)},th={getRandomValues:t=>{if(!t)return t;switch(!0){case t instanceof Int8Array:return je.webcrypto.getRandomValues(t);case t instanceof Uint8Array:return je.webcrypto.getRandomValues(t);case t instanceof Uint8ClampedArray:return je.webcrypto.getRandomValues(t);case t instanceof Int16Array:return je.webcrypto.getRandomValues(t);case t instanceof Uint16Array:return je.webcrypto.getRandomValues(t);case t instanceof Int32Array:return je.webcrypto.getRandomValues(t);case t instanceof Uint32Array:return je.webcrypto.getRandomValues(t);default:throw new Error("Unsupported ArrayBufferView type")}},randomUUID:()=>je.webcrypto.randomUUID(),subtle:eh};var Pe={},Ee={};Ee.fromCallback=function(t){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")t.apply(this,e);else return new Promise((r,i)=>{e.push((s,n)=>s!=null?i(s):r(n)),t.apply(this,e)})},"name",{value:t.name})};Ee.fromPromise=function(t){return Object.defineProperty(function(...e){const r=e[e.length-1];if(typeof r!="function")return t.apply(this,e);e.pop(),t.apply(this,e).then(i=>r(null,i),r)},"name",{value:t.name})};var Qe=rc,rh=process.cwd,rr=null,nh=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return rr||(rr=rh.call(process)),rr};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var ea=process.chdir;process.chdir=function(t){rr=null,ea.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,ea)}var ih=oh;function oh(t){Qe.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=n(t.chown),t.fchown=n(t.fchown),t.lchown=n(t.lchown),t.chmod=i(t.chmod),t.fchmod=i(t.fchmod),t.lchmod=i(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=s(t.chmodSync),t.fchmodSync=s(t.fchmodSync),t.lchmodSync=s(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=u(t.statSync),t.fstatSync=u(t.fstatSync),t.lstatSync=u(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(c,f,l){l&&process.nextTick(l)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(c,f,l,d){d&&process.nextTick(d)},t.lchownSync=function(){}),nh==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:function(c){function f(l,d,y){var v=Date.now(),E=0;c(l,d,function A(w){if(w&&(w.code==="EACCES"||w.code==="EPERM"||w.code==="EBUSY")&&Date.now()-v<6e4){setTimeout(function(){t.stat(d,function(g,C){g&&g.code==="ENOENT"?c(l,d,A):y(w)})},E),E<100&&(E+=10);return}y&&y(w)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(t.rename)),t.read=typeof t.read!="function"?t.read:function(c){function f(l,d,y,v,E,A){var w;if(A&&typeof A=="function"){var g=0;w=function(C,D,S){if(C&&C.code==="EAGAIN"&&g<10)return g++,c.call(t,l,d,y,v,E,w);A.apply(this,arguments)}}return c.call(t,l,d,y,v,E,w)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:function(c){return function(f,l,d,y,v){for(var E=0;;)try{return c.call(t,f,l,d,y,v)}catch(A){if(A.code==="EAGAIN"&&E<10){E++;continue}throw A}}}(t.readSync);function e(c){c.lchmod=function(f,l,d){c.open(f,Qe.O_WRONLY|Qe.O_SYMLINK,l,function(y,v){if(y){d&&d(y);return}c.fchmod(v,l,function(E){c.close(v,function(A){d&&d(E||A)})})})},c.lchmodSync=function(f,l){var d=c.openSync(f,Qe.O_WRONLY|Qe.O_SYMLINK,l),y=!0,v;try{v=c.fchmodSync(d,l),y=!1}finally{if(y)try{c.closeSync(d)}catch{}else c.closeSync(d)}return v}}function r(c){Qe.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(f,l,d,y){c.open(f,Qe.O_SYMLINK,function(v,E){if(v){y&&y(v);return}c.futimes(E,l,d,function(A){c.close(E,function(w){y&&y(A||w)})})})},c.lutimesSync=function(f,l,d){var y=c.openSync(f,Qe.O_SYMLINK),v,E=!0;try{v=c.futimesSync(y,l,d),E=!1}finally{if(E)try{c.closeSync(y)}catch{}else c.closeSync(y)}return v}):c.futimes&&(c.lutimes=function(f,l,d,y){y&&process.nextTick(y)},c.lutimesSync=function(){})}function i(c){return c&&function(f,l,d){return c.call(t,f,l,function(y){h(y)&&(y=null),d&&d.apply(this,arguments)})}}function s(c){return c&&function(f,l){try{return c.call(t,f,l)}catch(d){if(!h(d))throw d}}}function n(c){return c&&function(f,l,d,y){return c.call(t,f,l,d,function(v){h(v)&&(v=null),y&&y.apply(this,arguments)})}}function o(c){return c&&function(f,l,d){try{return c.call(t,f,l,d)}catch(y){if(!h(y))throw y}}}function a(c){return c&&function(f,l,d){typeof l=="function"&&(d=l,l=null);function y(v,E){E&&(E.uid<0&&(E.uid+=4294967296),E.gid<0&&(E.gid+=4294967296)),d&&d.apply(this,arguments)}return l?c.call(t,f,l,y):c.call(t,f,y)}}function u(c){return c&&function(f,l){var d=l?c.call(t,f,l):c.call(t,f);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function h(c){if(!c||c.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(c.code==="EINVAL"||c.code==="EPERM"))}}var ta=wa.Stream,sh=ah;function ah(t){return{ReadStream:e,WriteStream:r};function e(i,s){if(!(this instanceof e))return new e(i,s);ta.call(this);var n=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,s=s||{};for(var o=Object.keys(s),a=0,u=o.length;a<u;a++){var h=o[a];this[h]=s[h]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){n._read()});return}t.open(this.path,this.flags,this.mode,function(c,f){if(c){n.emit("error",c),n.readable=!1;return}n.fd=f,n.emit("open",f),n._read()})}function r(i,s){if(!(this instanceof r))return new r(i,s);ta.call(this),this.path=i,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,s=s||{};for(var n=Object.keys(s),o=0,a=n.length;o<a;o++){var u=n[o];this[u]=s[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var uh=lh,ch=Object.getPrototypeOf||function(t){return t.__proto__};function lh(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:ch(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var de=ae,fh=ih,hh=sh,ph=uh,Kt=Rt,Oe,sr;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Oe=Symbol.for("graceful-fs.queue"),sr=Symbol.for("graceful-fs.previous")):(Oe="___graceful-fs.queue",sr="___graceful-fs.previous");function dh(){}function lu(t,e){Object.defineProperty(t,Oe,{get:function(){return e}})}var ut=dh;Kt.debuglog?ut=Kt.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(ut=function(){var t=Kt.format.apply(Kt,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});if(!de[Oe]){var mh=ie[Oe]||[];lu(de,mh),de.close=function(t){function e(r,i){return t.call(de,r,function(s){s||ra(),typeof i=="function"&&i.apply(this,arguments)})}return Object.defineProperty(e,sr,{value:t}),e}(de.close),de.closeSync=function(t){function e(r){t.apply(de,arguments),ra()}return Object.defineProperty(e,sr,{value:t}),e}(de.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){ut(de[Oe]),lr.equal(de[Oe].length,0)})}ie[Oe]||lu(ie,de[Oe]);var Et=zi(ph(de));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!de.__patched&&(Et=zi(de),de.__patched=!0);function zi(t){fh(t),t.gracefulify=zi,t.createReadStream=D,t.createWriteStream=S;var e=t.readFile;t.readFile=r;function r(p,b,_){return typeof b=="function"&&(_=b,b=null),P(p,b,_);function P(V,q,B,z){return e(V,q,function(W){W&&(W.code==="EMFILE"||W.code==="ENFILE")?pt([P,[V,q,B],W,z||Date.now(),Date.now()]):typeof B=="function"&&B.apply(this,arguments)})}}var i=t.writeFile;t.writeFile=s;function s(p,b,_,P){return typeof _=="function"&&(P=_,_=null),V(p,b,_,P);function V(q,B,z,W,J){return i(q,B,z,function(K){K&&(K.code==="EMFILE"||K.code==="ENFILE")?pt([V,[q,B,z,W],K,J||Date.now(),Date.now()]):typeof W=="function"&&W.apply(this,arguments)})}}var n=t.appendFile;n&&(t.appendFile=o);function o(p,b,_,P){return typeof _=="function"&&(P=_,_=null),V(p,b,_,P);function V(q,B,z,W,J){return n(q,B,z,function(K){K&&(K.code==="EMFILE"||K.code==="ENFILE")?pt([V,[q,B,z,W],K,J||Date.now(),Date.now()]):typeof W=="function"&&W.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=u);function u(p,b,_,P){return typeof _=="function"&&(P=_,_=0),V(p,b,_,P);function V(q,B,z,W,J){return a(q,B,z,function(K){K&&(K.code==="EMFILE"||K.code==="ENFILE")?pt([V,[q,B,z,W],K,J||Date.now(),Date.now()]):typeof W=="function"&&W.apply(this,arguments)})}}var h=t.readdir;t.readdir=f;var c=/^v[0-5]\./;function f(p,b,_){typeof b=="function"&&(_=b,b=null);var P=c.test(process.version)?function(B,z,W,J){return h(B,V(B,z,W,J))}:function(B,z,W,J){return h(B,z,V(B,z,W,J))};return P(p,b,_);function V(q,B,z,W){return function(J,K){J&&(J.code==="EMFILE"||J.code==="ENFILE")?pt([P,[q,B,z],J,W||Date.now(),Date.now()]):(K&&K.sort&&K.sort(),typeof z=="function"&&z.call(this,J,K))}}}if(process.version.substr(0,4)==="v0.8"){var l=hh(t);A=l.ReadStream,g=l.WriteStream}var d=t.ReadStream;d&&(A.prototype=Object.create(d.prototype),A.prototype.open=w);var y=t.WriteStream;y&&(g.prototype=Object.create(y.prototype),g.prototype.open=C),Object.defineProperty(t,"ReadStream",{get:function(){return A},set:function(p){A=p},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return g},set:function(p){g=p},enumerable:!0,configurable:!0});var v=A;Object.defineProperty(t,"FileReadStream",{get:function(){return v},set:function(p){v=p},enumerable:!0,configurable:!0});var E=g;Object.defineProperty(t,"FileWriteStream",{get:function(){return E},set:function(p){E=p},enumerable:!0,configurable:!0});function A(p,b){return this instanceof A?(d.apply(this,arguments),this):A.apply(Object.create(A.prototype),arguments)}function w(){var p=this;T(p.path,p.flags,p.mode,function(b,_){b?(p.autoClose&&p.destroy(),p.emit("error",b)):(p.fd=_,p.emit("open",_),p.read())})}function g(p,b){return this instanceof g?(y.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}function C(){var p=this;T(p.path,p.flags,p.mode,function(b,_){b?(p.destroy(),p.emit("error",b)):(p.fd=_,p.emit("open",_))})}function D(p,b){return new t.ReadStream(p,b)}function S(p,b){return new t.WriteStream(p,b)}var F=t.open;t.open=T;function T(p,b,_,P){return typeof _=="function"&&(P=_,_=null),V(p,b,_,P);function V(q,B,z,W,J){return F(q,B,z,function(K,Z){K&&(K.code==="EMFILE"||K.code==="ENFILE")?pt([V,[q,B,z,W],K,J||Date.now(),Date.now()]):typeof W=="function"&&W.apply(this,arguments)})}}return t}function pt(t){ut("ENQUEUE",t[0].name,t[1]),de[Oe].push(t),Wi()}var Qt;function ra(){for(var t=Date.now(),e=0;e<de[Oe].length;++e)de[Oe][e].length>2&&(de[Oe][e][3]=t,de[Oe][e][4]=t);Wi()}function Wi(){if(clearTimeout(Qt),Qt=void 0,de[Oe].length!==0){var t=de[Oe].shift(),e=t[0],r=t[1],i=t[2],s=t[3],n=t[4];if(s===void 0)ut("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-s>=6e4){ut("TIMEOUT",e.name,r);var o=r.pop();typeof o=="function"&&o.call(null,i)}else{var a=Date.now()-n,u=Math.max(n-s,1),h=Math.min(u*1.2,100);a>=h?(ut("RETRY",e.name,r),e.apply(null,r.concat([s]))):de[Oe].push(t)}Qt===void 0&&(Qt=setTimeout(Wi,0))}}(function(t){const e=Ee.fromCallback,r=Et,i=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(s=>typeof r[s]=="function");Object.assign(t,r),i.forEach(s=>{t[s]=e(r[s])}),t.exists=function(s,n){return typeof n=="function"?r.exists(s,n):new Promise(o=>r.exists(s,o))},t.read=function(s,n,o,a,u,h){return typeof h=="function"?r.read(s,n,o,a,u,h):new Promise((c,f)=>{r.read(s,n,o,a,u,(l,d,y)=>{if(l)return f(l);c({bytesRead:d,buffer:y})})})},t.write=function(s,n,...o){return typeof o[o.length-1]=="function"?r.write(s,n,...o):new Promise((a,u)=>{r.write(s,n,...o,(h,c,f)=>{if(h)return u(h);a({bytesWritten:c,buffer:f})})})},t.readv=function(s,n,...o){return typeof o[o.length-1]=="function"?r.readv(s,n,...o):new Promise((a,u)=>{r.readv(s,n,...o,(h,c,f)=>{if(h)return u(h);a({bytesRead:c,buffers:f})})})},t.writev=function(s,n,...o){return typeof o[o.length-1]=="function"?r.writev(s,n,...o):new Promise((a,u)=>{r.writev(s,n,...o,(h,c,f)=>{if(h)return u(h);a({bytesWritten:c,buffers:f})})})},typeof r.realpath.native=="function"?t.realpath.native=e(r.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(Pe);var Hi={},fu={};const yh=Q;fu.checkPath=function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(yh.parse(e).root,""))){const i=new Error(`Path contains invalid characters: ${e}`);throw i.code="EINVAL",i}};const hu=Pe,{checkPath:pu}=fu,du=t=>{const e={mode:511};return typeof t=="number"?t:{...e,...t}.mode};Hi.makeDir=async(t,e)=>(pu(t),hu.mkdir(t,{mode:du(e),recursive:!0}));Hi.makeDirSync=(t,e)=>(pu(t),hu.mkdirSync(t,{mode:du(e),recursive:!0}));const gh=Ee.fromPromise,{makeDir:vh,makeDirSync:li}=Hi,fi=gh(vh);var Ve={mkdirs:fi,mkdirsSync:li,mkdirp:fi,mkdirpSync:li,ensureDir:fi,ensureDirSync:li};const wh=Ee.fromPromise,mu=Pe;function Eh(t){return mu.access(t).then(()=>!0).catch(()=>!1)}var ht={pathExists:wh(Eh),pathExistsSync:mu.existsSync};const mt=Pe,bh=Ee.fromPromise;async function Sh(t,e,r){const i=await mt.open(t,"r+");let s=null;try{await mt.futimes(i,e,r)}finally{try{await mt.close(i)}catch(n){s=n}}if(s)throw s}function Oh(t,e,r){const i=mt.openSync(t,"r+");return mt.futimesSync(i,e,r),mt.closeSync(i)}var yu={utimesMillis:bh(Sh),utimesMillisSync:Oh};const yt=Pe,be=Q,na=Ee.fromPromise;function Th(t,e,r){const i=r.dereference?s=>yt.stat(s,{bigint:!0}):s=>yt.lstat(s,{bigint:!0});return Promise.all([i(t),i(e).catch(s=>{if(s.code==="ENOENT")return null;throw s})]).then(([s,n])=>({srcStat:s,destStat:n}))}function Ch(t,e,r){let i;const s=r.dereference?o=>yt.statSync(o,{bigint:!0}):o=>yt.lstatSync(o,{bigint:!0}),n=s(t);try{i=s(e)}catch(o){if(o.code==="ENOENT")return{srcStat:n,destStat:null};throw o}return{srcStat:n,destStat:i}}async function Dh(t,e,r,i){const{srcStat:s,destStat:n}=await Th(t,e,i);if(n){if(kt(s,n)){const o=be.basename(t),a=be.basename(e);if(r==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:s,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!s.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(s.isDirectory()&&Gi(t,e))throw new Error(Er(t,e,r));return{srcStat:s,destStat:n}}function Fh(t,e,r,i){const{srcStat:s,destStat:n}=Ch(t,e,i);if(n){if(kt(s,n)){const o=be.basename(t),a=be.basename(e);if(r==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:s,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!s.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(s.isDirectory()&&Gi(t,e))throw new Error(Er(t,e,r));return{srcStat:s,destStat:n}}async function gu(t,e,r,i){const s=be.resolve(be.dirname(t)),n=be.resolve(be.dirname(r));if(n===s||n===be.parse(n).root)return;let o;try{o=await yt.stat(n,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(kt(e,o))throw new Error(Er(t,r,i));return gu(t,e,n,i)}function vu(t,e,r,i){const s=be.resolve(be.dirname(t)),n=be.resolve(be.dirname(r));if(n===s||n===be.parse(n).root)return;let o;try{o=yt.statSync(n,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(kt(e,o))throw new Error(Er(t,r,i));return vu(t,e,n,i)}function kt(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function Gi(t,e){const r=be.resolve(t).split(be.sep).filter(s=>s),i=be.resolve(e).split(be.sep).filter(s=>s);return r.every((s,n)=>i[n]===s)}function Er(t,e,r){return`Cannot ${r} '${t}' to a subdirectory of itself, '${e}'.`}var bt={checkPaths:na(Dh),checkPathsSync:Fh,checkParentPaths:na(gu),checkParentPathsSync:vu,isSrcSubdir:Gi,areIdentical:kt};const Ae=Pe,Pt=Q,{mkdirs:_h}=Ve,{pathExists:Ah}=ht,{utimesMillis:xh}=yu,Lt=bt;async function Nh(t,e,r={}){typeof r=="function"&&(r={filter:r}),r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");const{srcStat:i,destStat:s}=await Lt.checkPaths(t,e,"copy",r);if(await Lt.checkParentPaths(t,i,e,"copy"),!await wu(t,e,r))return;const o=Pt.dirname(e);await Ah(o)||await _h(o),await Eu(s,t,e,r)}async function wu(t,e,r){return r.filter?r.filter(t,e):!0}async function Eu(t,e,r,i){const n=await(i.dereference?Ae.stat:Ae.lstat)(e);if(n.isDirectory())return Mh(n,t,e,r,i);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return Ih(n,t,e,r,i);if(n.isSymbolicLink())return $h(t,e,r,i);throw n.isSocket()?new Error(`Cannot copy a socket file: ${e}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}async function Ih(t,e,r,i,s){if(!e)return ia(t,r,i,s);if(s.overwrite)return await Ae.unlink(i),ia(t,r,i,s);if(s.errorOnExist)throw new Error(`'${i}' already exists`)}async function ia(t,e,r,i){if(await Ae.copyFile(e,r),i.preserveTimestamps){Ph(t.mode)&&await Lh(r,t.mode);const s=await Ae.stat(e);await xh(r,s.atime,s.mtime)}return Ae.chmod(r,t.mode)}function Ph(t){return(t&128)===0}function Lh(t,e){return Ae.chmod(t,e|128)}async function Mh(t,e,r,i,s){e||await Ae.mkdir(i);const n=[];for await(const o of await Ae.opendir(r)){const a=Pt.join(r,o.name),u=Pt.join(i,o.name);n.push(wu(a,u,s).then(h=>{if(h)return Lt.checkPaths(a,u,"copy",s).then(({destStat:c})=>Eu(c,a,u,s))}))}await Promise.all(n),e||await Ae.chmod(i,t.mode)}async function $h(t,e,r,i){let s=await Ae.readlink(e);if(i.dereference&&(s=Pt.resolve(process.cwd(),s)),!t)return Ae.symlink(s,r);let n=null;try{n=await Ae.readlink(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return Ae.symlink(s,r);throw o}if(i.dereference&&(n=Pt.resolve(process.cwd(),n)),Lt.isSrcSubdir(s,n))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${n}'.`);if(Lt.isSrcSubdir(n,s))throw new Error(`Cannot overwrite '${n}' with '${s}'.`);return await Ae.unlink(r),Ae.symlink(s,r)}var Rh=Nh;const Ne=Et,Mt=Q,kh=Ve.mkdirsSync,jh=yu.utimesMillisSync,$t=bt;function qh(t,e,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:i,destStat:s}=$t.checkPathsSync(t,e,"copy",r);if($t.checkParentPathsSync(t,i,e,"copy"),r.filter&&!r.filter(t,e))return;const n=Mt.dirname(e);return Ne.existsSync(n)||kh(n),bu(s,t,e,r)}function bu(t,e,r,i){const n=(i.dereference?Ne.statSync:Ne.lstatSync)(e);if(n.isDirectory())return Hh(n,t,e,r,i);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return Bh(n,t,e,r,i);if(n.isSymbolicLink())return Jh(t,e,r,i);throw n.isSocket()?new Error(`Cannot copy a socket file: ${e}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}function Bh(t,e,r,i,s){return e?Uh(t,r,i,s):Su(t,r,i,s)}function Uh(t,e,r,i){if(i.overwrite)return Ne.unlinkSync(r),Su(t,e,r,i);if(i.errorOnExist)throw new Error(`'${r}' already exists`)}function Su(t,e,r,i){return Ne.copyFileSync(e,r),i.preserveTimestamps&&Xh(t.mode,e,r),Yi(r,t.mode)}function Xh(t,e,r){return Vh(t)&&zh(r,t),Wh(e,r)}function Vh(t){return(t&128)===0}function zh(t,e){return Yi(t,e|128)}function Yi(t,e){return Ne.chmodSync(t,e)}function Wh(t,e){const r=Ne.statSync(t);return jh(e,r.atime,r.mtime)}function Hh(t,e,r,i,s){return e?Ou(r,i,s):Gh(t.mode,r,i,s)}function Gh(t,e,r,i){return Ne.mkdirSync(r),Ou(e,r,i),Yi(r,t)}function Ou(t,e,r){const i=Ne.opendirSync(t);try{let s;for(;(s=i.readSync())!==null;)Yh(s.name,t,e,r)}finally{i.closeSync()}}function Yh(t,e,r,i){const s=Mt.join(e,t),n=Mt.join(r,t);if(i.filter&&!i.filter(s,n))return;const{destStat:o}=$t.checkPathsSync(s,n,"copy",i);return bu(o,s,n,i)}function Jh(t,e,r,i){let s=Ne.readlinkSync(e);if(i.dereference&&(s=Mt.resolve(process.cwd(),s)),t){let n;try{n=Ne.readlinkSync(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return Ne.symlinkSync(s,r);throw o}if(i.dereference&&(n=Mt.resolve(process.cwd(),n)),$t.isSrcSubdir(s,n))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${n}'.`);if($t.isSrcSubdir(n,s))throw new Error(`Cannot overwrite '${n}' with '${s}'.`);return Kh(s,r)}else return Ne.symlinkSync(s,r)}function Kh(t,e){return Ne.unlinkSync(e),Ne.symlinkSync(t,e)}var Qh=qh;const Zh=Ee.fromPromise;var Ji={copy:Zh(Rh),copySync:Qh};const Tu=Et,ep=Ee.fromCallback;function tp(t,e){Tu.rm(t,{recursive:!0,force:!0},e)}function rp(t){Tu.rmSync(t,{recursive:!0,force:!0})}var br={remove:ep(tp),removeSync:rp};const np=Ee.fromPromise,Cu=Pe,Du=Q,Fu=Ve,_u=br,oa=np(async function(e){let r;try{r=await Cu.readdir(e)}catch{return Fu.mkdirs(e)}return Promise.all(r.map(i=>_u.remove(Du.join(e,i))))});function sa(t){let e;try{e=Cu.readdirSync(t)}catch{return Fu.mkdirsSync(t)}e.forEach(r=>{r=Du.join(t,r),_u.removeSync(r)})}var ip={emptyDirSync:sa,emptydirSync:sa,emptyDir:oa,emptydir:oa};const op=Ee.fromPromise,Au=Q,Ge=Pe,xu=Ve;async function sp(t){let e;try{e=await Ge.stat(t)}catch{}if(e&&e.isFile())return;const r=Au.dirname(t);let i=null;try{i=await Ge.stat(r)}catch(s){if(s.code==="ENOENT"){await xu.mkdirs(r),await Ge.writeFile(t,"");return}else throw s}i.isDirectory()?await Ge.writeFile(t,""):await Ge.readdir(r)}function ap(t){let e;try{e=Ge.statSync(t)}catch{}if(e&&e.isFile())return;const r=Au.dirname(t);try{Ge.statSync(r).isDirectory()||Ge.readdirSync(r)}catch(i){if(i&&i.code==="ENOENT")xu.mkdirsSync(r);else throw i}Ge.writeFileSync(t,"")}var up={createFile:op(sp),createFileSync:ap};const cp=Ee.fromPromise,Nu=Q,rt=Pe,Iu=Ve,{pathExists:lp}=ht,{areIdentical:Pu}=bt;async function fp(t,e){let r;try{r=await rt.lstat(e)}catch{}let i;try{i=await rt.lstat(t)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}if(r&&Pu(i,r))return;const s=Nu.dirname(e);await lp(s)||await Iu.mkdirs(s),await rt.link(t,e)}function hp(t,e){let r;try{r=rt.lstatSync(e)}catch{}try{const n=rt.lstatSync(t);if(r&&Pu(n,r))return}catch(n){throw n.message=n.message.replace("lstat","ensureLink"),n}const i=Nu.dirname(e);return rt.existsSync(i)||Iu.mkdirsSync(i),rt.linkSync(t,e)}var pp={createLink:cp(fp),createLinkSync:hp};const it=Q,At=Pe,{pathExists:dp}=ht,mp=Ee.fromPromise;async function yp(t,e){if(it.isAbsolute(t)){try{await At.lstat(t)}catch(n){throw n.message=n.message.replace("lstat","ensureSymlink"),n}return{toCwd:t,toDst:t}}const r=it.dirname(e),i=it.join(r,t);if(await dp(i))return{toCwd:i,toDst:t};try{await At.lstat(t)}catch(n){throw n.message=n.message.replace("lstat","ensureSymlink"),n}return{toCwd:t,toDst:it.relative(r,t)}}function gp(t,e){if(it.isAbsolute(t)){if(!At.existsSync(t))throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}const r=it.dirname(e),i=it.join(r,t);if(At.existsSync(i))return{toCwd:i,toDst:t};if(!At.existsSync(t))throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:it.relative(r,t)}}var vp={symlinkPaths:mp(yp),symlinkPathsSync:gp};const Lu=Pe,wp=Ee.fromPromise;async function Ep(t,e){if(e)return e;let r;try{r=await Lu.lstat(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}function bp(t,e){if(e)return e;let r;try{r=Lu.lstatSync(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}var Sp={symlinkType:wp(Ep),symlinkTypeSync:bp};const Op=Ee.fromPromise,Mu=Q,Xe=Pe,{mkdirs:Tp,mkdirsSync:Cp}=Ve,{symlinkPaths:Dp,symlinkPathsSync:Fp}=vp,{symlinkType:_p,symlinkTypeSync:Ap}=Sp,{pathExists:xp}=ht,{areIdentical:$u}=bt;async function Np(t,e,r){let i;try{i=await Xe.lstat(e)}catch{}if(i&&i.isSymbolicLink()){const[a,u]=await Promise.all([Xe.stat(t),Xe.stat(e)]);if($u(a,u))return}const s=await Dp(t,e);t=s.toDst;const n=await _p(s.toCwd,r),o=Mu.dirname(e);return await xp(o)||await Tp(o),Xe.symlink(t,e,n)}function Ip(t,e,r){let i;try{i=Xe.lstatSync(e)}catch{}if(i&&i.isSymbolicLink()){const a=Xe.statSync(t),u=Xe.statSync(e);if($u(a,u))return}const s=Fp(t,e);t=s.toDst,r=Ap(s.toCwd,r);const n=Mu.dirname(e);return Xe.existsSync(n)||Cp(n),Xe.symlinkSync(t,e,r)}var Pp={createSymlink:Op(Np),createSymlinkSync:Ip};const{createFile:aa,createFileSync:ua}=up,{createLink:ca,createLinkSync:la}=pp,{createSymlink:fa,createSymlinkSync:ha}=Pp;var Lp={createFile:aa,createFileSync:ua,ensureFile:aa,ensureFileSync:ua,createLink:ca,createLinkSync:la,ensureLink:ca,ensureLinkSync:la,createSymlink:fa,createSymlinkSync:ha,ensureSymlink:fa,ensureSymlinkSync:ha};function Mp(t,{EOL:e=`
`,finalEOL:r=!0,replacer:i=null,spaces:s}={}){const n=r?e:"";return JSON.stringify(t,i,s).replace(/\n/g,e)+n}function $p(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}var Ki={stringify:Mp,stripBom:$p};let gt;try{gt=Et}catch{gt=ae}const Sr=Ee,{stringify:Ru,stripBom:ku}=Ki;async function Rp(t,e={}){typeof e=="string"&&(e={encoding:e});const r=e.fs||gt,i="throws"in e?e.throws:!0;let s=await Sr.fromCallback(r.readFile)(t,e);s=ku(s);let n;try{n=JSON.parse(s,e?e.reviver:null)}catch(o){if(i)throw o.message=`${t}: ${o.message}`,o;return null}return n}const kp=Sr.fromPromise(Rp);function jp(t,e={}){typeof e=="string"&&(e={encoding:e});const r=e.fs||gt,i="throws"in e?e.throws:!0;try{let s=r.readFileSync(t,e);return s=ku(s),JSON.parse(s,e.reviver)}catch(s){if(i)throw s.message=`${t}: ${s.message}`,s;return null}}async function qp(t,e,r={}){const i=r.fs||gt,s=Ru(e,r);await Sr.fromCallback(i.writeFile)(t,s,r)}const Bp=Sr.fromPromise(qp);function Up(t,e,r={}){const i=r.fs||gt,s=Ru(e,r);return i.writeFileSync(t,s,r)}const Xp={readFile:kp,readFileSync:jp,writeFile:Bp,writeFileSync:Up};var Vp=Xp;const Zt=Vp;var zp={readJson:Zt.readFile,readJsonSync:Zt.readFileSync,writeJson:Zt.writeFile,writeJsonSync:Zt.writeFileSync};const Wp=Ee.fromPromise,bi=Pe,ju=Q,qu=Ve,Hp=ht.pathExists;async function Gp(t,e,r="utf-8"){const i=ju.dirname(t);return await Hp(i)||await qu.mkdirs(i),bi.writeFile(t,e,r)}function Yp(t,...e){const r=ju.dirname(t);bi.existsSync(r)||qu.mkdirsSync(r),bi.writeFileSync(t,...e)}var Qi={outputFile:Wp(Gp),outputFileSync:Yp};const{stringify:Jp}=Ki,{outputFile:Kp}=Qi;async function Qp(t,e,r={}){const i=Jp(e,r);await Kp(t,i,r)}var Zp=Qp;const{stringify:ed}=Ki,{outputFileSync:td}=Qi;function rd(t,e,r){const i=ed(e,r);td(t,i,r)}var nd=rd;const id=Ee.fromPromise,Ie=zp;Ie.outputJson=id(Zp);Ie.outputJsonSync=nd;Ie.outputJSON=Ie.outputJson;Ie.outputJSONSync=Ie.outputJsonSync;Ie.writeJSON=Ie.writeJson;Ie.writeJSONSync=Ie.writeJsonSync;Ie.readJSON=Ie.readJson;Ie.readJSONSync=Ie.readJsonSync;var od=Ie;const sd=Pe,pa=Q,{copy:ad}=Ji,{remove:Bu}=br,{mkdirp:ud}=Ve,{pathExists:cd}=ht,da=bt;async function ld(t,e,r={}){const i=r.overwrite||r.clobber||!1,{srcStat:s,isChangingCase:n=!1}=await da.checkPaths(t,e,"move",r);await da.checkParentPaths(t,s,e,"move");const o=pa.dirname(e);return pa.parse(o).root!==o&&await ud(o),fd(t,e,i,n)}async function fd(t,e,r,i){if(!i){if(r)await Bu(e);else if(await cd(e))throw new Error("dest already exists.")}try{await sd.rename(t,e)}catch(s){if(s.code!=="EXDEV")throw s;await hd(t,e,r)}}async function hd(t,e,r){return await ad(t,e,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),Bu(t)}var pd=ld;const Uu=Et,Si=Q,dd=Ji.copySync,Xu=br.removeSync,md=Ve.mkdirpSync,ma=bt;function yd(t,e,r){r=r||{};const i=r.overwrite||r.clobber||!1,{srcStat:s,isChangingCase:n=!1}=ma.checkPathsSync(t,e,"move",r);return ma.checkParentPathsSync(t,s,e,"move"),gd(e)||md(Si.dirname(e)),vd(t,e,i,n)}function gd(t){const e=Si.dirname(t);return Si.parse(e).root===e}function vd(t,e,r,i){if(i)return hi(t,e,r);if(r)return Xu(e),hi(t,e,r);if(Uu.existsSync(e))throw new Error("dest already exists.");return hi(t,e,r)}function hi(t,e,r){try{Uu.renameSync(t,e)}catch(i){if(i.code!=="EXDEV")throw i;return wd(t,e,r)}}function wd(t,e,r){return dd(t,e,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),Xu(t)}var Ed=yd;const bd=Ee.fromPromise;var Sd={move:bd(pd),moveSync:Ed},Od={...Pe,...Ji,...ip,...Lp,...od,...Ve,...Sd,...Qi,...ht,...br};const Td=vt(Od);function Cd(){const t=!se.app.isPackaged;re.initialize({preload:!0,spyRendererConsole:t});const e=Q.join(ft(),"logs"),r=Q.join(e,"app.log");Td.ensureDirSync(e),re.transports.file.level=t?"debug":"info",re.transports.file.resolvePathFn=()=>r,re.transports.file.maxSize=10*1024*1024,t&&(re.transports.console.level="debug",re.transports.file.format="[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}] {text}"),console.log(`[Logger] 日志文件路径: ${r}`)}var Vu={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(ie,function(){var r=1e3,i=6e4,s=36e5,n="millisecond",o="second",a="minute",u="hour",h="day",c="week",f="month",l="quarter",d="year",y="date",v="Invalid Date",E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,A=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(q){var B=["th","st","nd","rd"],z=q%100;return"["+q+(B[(z-20)%10]||B[z]||B[0])+"]"}},g=function(q,B,z){var W=String(q);return!W||W.length>=B?q:""+Array(B+1-W.length).join(z)+q},C={s:g,z:function(q){var B=-q.utcOffset(),z=Math.abs(B),W=Math.floor(z/60),J=z%60;return(B<=0?"+":"-")+g(W,2,"0")+":"+g(J,2,"0")},m:function q(B,z){if(B.date()<z.date())return-q(z,B);var W=12*(z.year()-B.year())+(z.month()-B.month()),J=B.clone().add(W,f),K=z-J<0,Z=B.clone().add(W+(K?-1:1),f);return+(-(W+(z-J)/(K?J-Z:Z-J))||0)},a:function(q){return q<0?Math.ceil(q)||0:Math.floor(q)},p:function(q){return{M:f,y:d,w:c,d:h,D:y,h:u,m:a,s:o,ms:n,Q:l}[q]||String(q||"").toLowerCase().replace(/s$/,"")},u:function(q){return q===void 0}},D="en",S={};S[D]=w;var F="$isDayjsObject",T=function(q){return q instanceof P||!(!q||!q[F])},p=function q(B,z,W){var J;if(!B)return D;if(typeof B=="string"){var K=B.toLowerCase();S[K]&&(J=K),z&&(S[K]=z,J=K);var Z=B.split("-");if(!J&&Z.length>1)return q(Z[0])}else{var ne=B.name;S[ne]=B,J=ne}return!W&&J&&(D=J),J||!W&&D},b=function(q,B){if(T(q))return q.clone();var z=typeof B=="object"?B:{};return z.date=q,z.args=arguments,new P(z)},_=C;_.l=p,_.i=T,_.w=function(q,B){return b(q,{locale:B.$L,utc:B.$u,x:B.$x,$offset:B.$offset})};var P=function(){function q(z){this.$L=p(z.locale,null,!0),this.parse(z),this.$x=this.$x||z.x||{},this[F]=!0}var B=q.prototype;return B.parse=function(z){this.$d=function(W){var J=W.date,K=W.utc;if(J===null)return new Date(NaN);if(_.u(J))return new Date;if(J instanceof Date)return new Date(J);if(typeof J=="string"&&!/Z$/i.test(J)){var Z=J.match(E);if(Z){var ne=Z[2]-1||0,ue=(Z[7]||"0").substring(0,3);return K?new Date(Date.UTC(Z[1],ne,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,ue)):new Date(Z[1],ne,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,ue)}}return new Date(J)}(z),this.init()},B.init=function(){var z=this.$d;this.$y=z.getFullYear(),this.$M=z.getMonth(),this.$D=z.getDate(),this.$W=z.getDay(),this.$H=z.getHours(),this.$m=z.getMinutes(),this.$s=z.getSeconds(),this.$ms=z.getMilliseconds()},B.$utils=function(){return _},B.isValid=function(){return this.$d.toString()!==v},B.isSame=function(z,W){var J=b(z);return this.startOf(W)<=J&&J<=this.endOf(W)},B.isAfter=function(z,W){return b(z)<this.startOf(W)},B.isBefore=function(z,W){return this.endOf(W)<b(z)},B.$g=function(z,W,J){return _.u(z)?this[W]:this.set(J,z)},B.unix=function(){return Math.floor(this.valueOf()/1e3)},B.valueOf=function(){return this.$d.getTime()},B.startOf=function(z,W){var J=this,K=!!_.u(W)||W,Z=_.p(z),ne=function(H,m){var N=_.w(J.$u?Date.UTC(J.$y,m,H):new Date(J.$y,m,H),J);return K?N:N.endOf(h)},ue=function(H,m){return _.w(J.toDate()[H].apply(J.toDate("s"),(K?[0,0,0,0]:[23,59,59,999]).slice(m)),J)},pe=this.$W,Y=this.$M,ve=this.$D,Re="set"+(this.$u?"UTC":"");switch(Z){case d:return K?ne(1,0):ne(31,11);case f:return K?ne(1,Y):ne(0,Y+1);case c:var x=this.$locale().weekStart||0,O=(pe<x?pe+7:pe)-x;return ne(K?ve-O:ve+(6-O),Y);case h:case y:return ue(Re+"Hours",0);case u:return ue(Re+"Minutes",1);case a:return ue(Re+"Seconds",2);case o:return ue(Re+"Milliseconds",3);default:return this.clone()}},B.endOf=function(z){return this.startOf(z,!1)},B.$set=function(z,W){var J,K=_.p(z),Z="set"+(this.$u?"UTC":""),ne=(J={},J[h]=Z+"Date",J[y]=Z+"Date",J[f]=Z+"Month",J[d]=Z+"FullYear",J[u]=Z+"Hours",J[a]=Z+"Minutes",J[o]=Z+"Seconds",J[n]=Z+"Milliseconds",J)[K],ue=K===h?this.$D+(W-this.$W):W;if(K===f||K===d){var pe=this.clone().set(y,1);pe.$d[ne](ue),pe.init(),this.$d=pe.set(y,Math.min(this.$D,pe.daysInMonth())).$d}else ne&&this.$d[ne](ue);return this.init(),this},B.set=function(z,W){return this.clone().$set(z,W)},B.get=function(z){return this[_.p(z)]()},B.add=function(z,W){var J,K=this;z=Number(z);var Z=_.p(W),ne=function(Y){var ve=b(K);return _.w(ve.date(ve.date()+Math.round(Y*z)),K)};if(Z===f)return this.set(f,this.$M+z);if(Z===d)return this.set(d,this.$y+z);if(Z===h)return ne(1);if(Z===c)return ne(7);var ue=(J={},J[a]=i,J[u]=s,J[o]=r,J)[Z]||1,pe=this.$d.getTime()+z*ue;return _.w(pe,this)},B.subtract=function(z,W){return this.add(-1*z,W)},B.format=function(z){var W=this,J=this.$locale();if(!this.isValid())return J.invalidDate||v;var K=z||"YYYY-MM-DDTHH:mm:ssZ",Z=_.z(this),ne=this.$H,ue=this.$m,pe=this.$M,Y=J.weekdays,ve=J.months,Re=J.meridiem,x=function(m,N,I,k){return m&&(m[N]||m(W,K))||I[N].slice(0,k)},O=function(m){return _.s(ne%12||12,m,"0")},H=Re||function(m,N,I){var k=m<12?"AM":"PM";return I?k.toLowerCase():k};return K.replace(A,function(m,N){return N||function(I){switch(I){case"YY":return String(W.$y).slice(-2);case"YYYY":return _.s(W.$y,4,"0");case"M":return pe+1;case"MM":return _.s(pe+1,2,"0");case"MMM":return x(J.monthsShort,pe,ve,3);case"MMMM":return x(ve,pe);case"D":return W.$D;case"DD":return _.s(W.$D,2,"0");case"d":return String(W.$W);case"dd":return x(J.weekdaysMin,W.$W,Y,2);case"ddd":return x(J.weekdaysShort,W.$W,Y,3);case"dddd":return Y[W.$W];case"H":return String(ne);case"HH":return _.s(ne,2,"0");case"h":return O(1);case"hh":return O(2);case"a":return H(ne,ue,!0);case"A":return H(ne,ue,!1);case"m":return String(ue);case"mm":return _.s(ue,2,"0");case"s":return String(W.$s);case"ss":return _.s(W.$s,2,"0");case"SSS":return _.s(W.$ms,3,"0");case"Z":return Z}return null}(m)||Z.replace(":","")})},B.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},B.diff=function(z,W,J){var K,Z=this,ne=_.p(W),ue=b(z),pe=(ue.utcOffset()-this.utcOffset())*i,Y=this-ue,ve=function(){return _.m(Z,ue)};switch(ne){case d:K=ve()/12;break;case f:K=ve();break;case l:K=ve()/3;break;case c:K=(Y-pe)/6048e5;break;case h:K=(Y-pe)/864e5;break;case u:K=Y/s;break;case a:K=Y/i;break;case o:K=Y/r;break;default:K=Y}return J?K:_.a(K)},B.daysInMonth=function(){return this.endOf(f).$D},B.$locale=function(){return S[this.$L]},B.locale=function(z,W){if(!z)return this.$L;var J=this.clone(),K=p(z,W,!0);return K&&(J.$L=K),J},B.clone=function(){return _.w(this.$d,this)},B.toDate=function(){return new Date(this.valueOf())},B.toJSON=function(){return this.isValid()?this.toISOString():null},B.toISOString=function(){return this.$d.toISOString()},B.toString=function(){return this.$d.toUTCString()},q}(),V=P.prototype;return b.prototype=V,[["$ms",n],["$s",o],["$m",a],["$H",u],["$W",h],["$M",f],["$y",d],["$D",y]].forEach(function(q){V[q[1]]=function(B){return this.$g(B,q[0],q[1])}}),b.extend=function(q,B){return q.$i||(q(B,P,b),q.$i=!0),b},b.locale=p,b.isDayjs=T,b.unix=function(q){return b(1e3*q)},b.en=S[D],b.Ls=S,b.p={},b})})(Vu);var Dd=Vu.exports;const Fd=vt(Dd);class _d{constructor(e){oe(this,"value");oe(this,"next");this.value=e}}var Le,st,at;class Ad{constructor(){qt(this,Le,void 0);qt(this,st,void 0);qt(this,at,void 0);this.clear()}enqueue(e){const r=new _d(e);ke(this,Le)?(ke(this,st).next=r,ze(this,st,r)):(ze(this,Le,r),ze(this,st,r)),Cr(this,at)._++}dequeue(){const e=ke(this,Le);if(e)return ze(this,Le,ke(this,Le).next),Cr(this,at)._--,e.value}peek(){if(ke(this,Le))return ke(this,Le).value}clear(){ze(this,Le,void 0),ze(this,st,void 0),ze(this,at,0)}get size(){return ke(this,at)}*[Symbol.iterator](){let e=ke(this,Le);for(;e;)yield e.value,e=e.next}*drain(){for(;ke(this,Le);)yield this.dequeue()}}Le=new WeakMap,st=new WeakMap,at=new WeakMap;function xd(t){ya(t);const e=new Ad;let r=0;const i=()=>{r<t&&e.size>0&&(e.dequeue()(),r++)},s=()=>{r--,i()},n=async(u,h,c)=>{const f=(async()=>u(...c))();h(f);try{await f}catch{}s()},o=(u,h,c)=>{new Promise(f=>{e.enqueue(f)}).then(n.bind(void 0,u,h,c)),(async()=>(await Promise.resolve(),r<t&&i()))()},a=(u,...h)=>new Promise(c=>{o(u,c,h)});return Object.defineProperties(a,{activeCount:{get:()=>r},pendingCount:{get:()=>e.size},clearQueue:{value(){e.clear()}},concurrency:{get:()=>t,set(u){ya(u),t=u,queueMicrotask(()=>{for(;r<t&&e.size>0;)i()})}}}),a}function ya(t){if(!((Number.isInteger(t)||t===Number.POSITIVE_INFINITY)&&t>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up")}const Nd=xd(Math.max(1,Math.floor(require("os").cpus().length*.8)-1));async function Id(t){const{videoPath:e,audioPath:r,isOpenOriginAudio:i,startTime:s,currentDuration:n,outputPath:o,videoWidth:a,videoHeight:u,assFilePath:h}=t;return new Promise(async(c,f)=>{const l=Vi().input(e).input(r),d=[{filter:"trim",options:{start:s,duration:n},inputs:"0:v",outputs:"trimmed_video"},{filter:"setpts",options:"PTS-STARTPTS",inputs:"trimmed_video",outputs:"video_pts"},{filter:"scale",options:{w:a,h:u,force_original_aspect_ratio:"decrease",eval:"frame"},inputs:"video_pts",outputs:"scaled_video"},{filter:"pad",options:{width:a,height:u,x:"(ow-iw)/2",y:"(oh-ih)/2",color:"black"},inputs:"scaled_video",outputs:"padded_video"}],y=Jf();d.push({filter:"subtitles",options:{filename:`'${to(h)}'`,fontsdir:`'${to(y)}'`,original_size:`${a}x${u}`,stream_index:"0"},inputs:"padded_video",outputs:"video_with_subtitles"});const v=[];let E="";i&&await Yf(e)?(v.push({filter:"atrim",options:{start:s,duration:n},inputs:"0:a",outputs:"trimmed_original"},{filter:"asetpts",options:"PTS-STARTPTS",inputs:"trimmed_original",outputs:"original_pts"},{filter:"volume",options:"1.0",inputs:"original_pts",outputs:"original_audio"},{filter:"atrim",options:{start:0,duration:n},inputs:"1:a",outputs:"trimmed_new"},{filter:"asetpts",options:"PTS-STARTPTS",inputs:"trimmed_new",outputs:"new_pts"},{filter:"volume",options:"1.0",inputs:"new_pts",outputs:"new_audio"},{filter:"amix",options:{inputs:2,duration:"longest"},inputs:["original_audio","new_audio"],outputs:"mixed_audio"}),E="mixed_audio"):(v.push({filter:"atrim",options:{start:0,duration:n},inputs:"1:a",outputs:"trimmed_new"},{filter:"asetpts",options:"PTS-STARTPTS",inputs:"trimmed_new",outputs:"new_pts"},{filter:"volume",options:"1.0",inputs:"new_pts",outputs:"new_audio"}),E="new_audio"),l.complexFilter([...d,...v]).outputOptions(["-map [video_with_subtitles]",`-map [${E}]`,"-c:v libx264","-c:a aac","-preset fast"]),l.on("start",A=>{console.log("start to execute command: "+A)}).on("progress",A=>{console.log(`processing: ${Math.round(A.percent)}%`)}).on("end",()=>{console.log(`segment process done: ${o}`),c()}).on("error",A=>{console.error(`segment process error: ${A.message}`),f(A)}).save(o)})}async function Pd(t,e,r,i){const s=i.videoRatio,o=i.videoResolution.split("x").map(A=>parseInt(A)),a=s==="9:16"?o[0]:o[1],u=s==="9:16"?o[1]:o[0],h=t.zimuConfig.datas[0];if(!h.path){const A=t.zimuConfig.audioConfig,w=`${r}_${t.name}_${h.title}_${Fd().format("YYYYMMDDHHmmss")}`,g=await cu({text:h.text,voice:A.voice,speech_rate:A.speech_rate,volume:A.volume,pitch_rate:A.pitch_rate,outputFileName:w});h.path=g.outputFile,h.duration=g.duration}const c=h.path;let f=h.duration??await It(c);f=Math.ceil(f*100)/100;const l=t.videoList,d=t.isOpenOriginAudio??!0,y=[],v=`${r}_${t.name}_`,E=t.assFilePath;for(const A of l){const w=A.path,g=A.duration??await It(w),C=f,D=Math.ceil(g/C),S=v+Q.basename(w,Q.extname(w));for(let F=0;F<D;F++){const T=F*C,p=A.duration-T,b=Math.min(C,p),_=Q.join(e,`${S}_part${F+1}_${T}-${T+b}.mp4`);y.push({videoPath:w,audioPath:c,outputPath:_,startTime:T,currentDuration:b,isOpenOriginAudio:d,videoWidth:a,videoHeight:u,assFilePath:E})}}return y}async function Ld(t,e){return new Promise((r,i)=>{const s=Q.basename(e,Q.extname(e))+"_temp.txt";ae.writeFileSync(s,t.map(n=>`file '${n}'`).join(`
`)),Vi().input(s).inputFormat("concat").inputOptions(["-safe 0"]).outputOptions(["-c copy"]).on("start",n=>console.log("执行命令:",n)).on("progress",n=>console.log(`处理进度: ${Math.round(n.percent)}%`)).on("end",()=>{ae.unlinkSync(s),r()}).on("error",n=>{ae.unlinkSync(s),i(n)}).save(e)})}async function Md(t){var h;re.log("accept params："),re.log(JSON.stringify(t));const e=t.clips,r=t.outputFileName,i=t.globalConfig,s=i.outputDir||ft();for(const c of e)c.segments=await Pd(c,s,r,i);re.log("split clip to segments done："),re.log(JSON.stringify(e));const n=[];for(const c of e)n.push(...c.segments);re.info("segments:"),re.info(JSON.stringify(n));const o=n.map(c=>Nd(()=>Id(c)));await Promise.all(o),re.log("segment process done："),re.log(JSON.stringify(n));let a=1;for(const c of e)(a===1||c.segments.length>1&&c.segments.length<a)&&(a=c.segments.length);re.log(`we can generate ${a} videos`);const u=[];for(let c=0;c<a;c++){const f=[];let l=0;for(const d of e){const y=d.segments;let v;y.length===1?v=y[0]:v=y[c],f.push(v.outputPath),l+=v.currentDuration}u.push({videos:f,outputPath:Q.join(s,`${r}_${c+1}.mp4`),duration:l})}re.log("合成视频开始:");for(let c=0;c<u.length;c++){const f=u[c];re.log(`开始合成视频: ${c+1}/${u.length}, 视频路径：${u[c].outputPath}`),re.log(JSON.stringify(f));try{const l=new Promise((v,E)=>{setTimeout(()=>{E(new Error("视频合成操作超时（5分钟）"))},3e5)}),d=Ld(f.videos,f.outputPath);await Promise.race([d,l]),re.log(`成功合成视频:${c+1}/${u.length}`);const y=(h=i.backgroundAudioConfig)==null?void 0:h.audio.path;if(y&&ae.existsSync(y)){const v=Q.join(s,`${r}_${c+1}_bg.mp4`);re.log(`开始为视频添加背景音乐:${f.outputPath}`),await $d(f.outputPath,i.backgroundAudioConfig,v),u[c].outputPath=v}}catch(l){re.error(l),re.error(`合成视频失败:${c+1}/${u.length}`)}}return re.log("合成视频结束"),u.map(c=>({outputPath:c.outputPath,duration:c.duration}))}function $d(t,e,r){return new Promise((i,s)=>{const n=e.audio.path,o=e.volume/100,a=Vi().input(t).input(n).inputOptions(["-stream_loop -1"]),u=[{filter:"volume",options:o,inputs:"1:a",outputs:"scaled_audio"},{filter:"amix",options:{inputs:2,duration:"first"},inputs:["0:a","scaled_audio"],outputs:["mixed"]}];a.complexFilter(u).outputOptions(["-map 0:v","-map [mixed]","-c:v copy","-shortest"]).on("start",h=>console.log("开始添加背景音乐，执行命令:",h)).on("progress",h=>console.log(`处理进度: ${Math.round(h.percent)}%`)).on("end",()=>{console.log("背景音乐添加成功"),ae.unlinkSync(t),i(r)}).on("error",h=>{console.error("背景音乐添加失败:",h),s(h)}).save(r)})}function Rd(){se.ipcMain.handle("video-mix-and-cut",async(t,e)=>{const r=JSON.parse(xt(e));return Md(r)}),se.ipcMain.handle("get-media-duration",async(t,e)=>{const r=JSON.parse(xt(e));return It(r.path)})}const nr=Q.join(ft(),"config.json"),kd={lastOpenedDirectory:ft()};function zu(){try{ae.existsSync(nr)||ae.writeFileSync(nr,JSON.stringify(kd,null,2));const t=ae.readFileSync(nr,"utf-8");return JSON.parse(t)}catch{return}}function jd(t){const e=zu();return Xd(e,t)}function qd(t,e){const r=zu();Vd(r,t,e),ae.writeFileSync(nr,JSON.stringify(r,null,2))}function Bd(){let t;try{if(t=jd("lastOpenedDirectory"),!t&&ae.existsSync(t))return t}catch{return ft()}}function Ud(t){qd("lastOpenedDirectory",t)}function Xd(t,e){return e.split(".").reduce((r,i)=>r&&r[i]!==void 0?r[i]:void 0,t)}function Vd(t,e,r){const i=e.split(".");let s=t;for(let n=0;n<i.length-1;n++){const o=i[n];s[o]||(s[o]={}),s=s[o]}s[i[i.length-1]]=r}function zd(t){se.ipcMain.handle("open-file-dialog",async(e,r)=>{if(!t)return null;const i=(r==null?void 0:r.defaultPath)||Bd(),s=(r==null?void 0:r.properties)||["openFile"],n=(r==null?void 0:r.title)||"选择文件",o=(r==null?void 0:r.buttonLabel)||"选择",a=(r==null?void 0:r.filters)||[{name:"All Files",extensions:["*"]}];r!=null&&r.multiple&&!s.includes("multiSelections")&&s.push("multiSelections");const u=await se.dialog.showOpenDialog(t,{title:n,defaultPath:i,buttonLabel:o,filters:a,properties:s});if(u.canceled)return[];{const h=Q.dirname(u.filePaths[0]);Ud(h);const c=u.filePaths.map(async f=>{const l=await It(f),d=`media://${encodeURIComponent(f)}`;return{path:Q.normalize(f),name:Q.basename(f),ext:Q.extname(f),mimeType:er(f),duration:l,url:d}});return await Promise.all(c)}})}async function Wd(t){const e=Q.normalize(t);if(e!==t||e.includes(".."))return!1;try{return await ae.promises.access(e,ae.constants.R_OK),!0}catch{return!1}}function Hd(){se.protocol.handle("media",async t=>{try{const e=t.url.slice(8),r=decodeURIComponent(e).replace(/\//g,"\\").replace(/^\\/,""),i=Q.normalize(r);if(!await Wd(i))return new Response("Access Denied",{status:403});const s=await ae.promises.stat(i);if(!s.isFile())return new Response("Not a file",{status:400});const n=t.headers.get("range"),o=s.size,a={"Content-Type":er(i),"Cache-Control":"public, max-age=31536000"};if(n){const u=n.replace(/bytes=/,"").split("-"),h=parseInt(u[0],10),c=u[1]?parseInt(u[1],10):o-1,f=c-h+1,l=ae.createReadStream(i,{start:h,end:c}),d=eo(l);return new Response(d,{status:206,headers:{"Content-Range":`bytes ${h}-${c}/${o}`,"Accept-Ranges":"bytes","Content-Length":f.toString(),"Content-Type":await er(i),"Cache-Control":"public, max-age=31536000"}})}else{const u=ae.createReadStream(i),h=eo(u);return new Response(h,{headers:{"Content-Length":o.toString(),"Content-Type":await er(i),"Cache-Control":"public, max-age=31536000"}})}}catch{return new Response("Not Found",{status:404})}})}function Gd(t){se.globalShortcut.register("CommandOrControl+R",()=>{t&&t.reload()})}function Yd(){se.ipcMain.on("window-control",(t,e)=>{const r=se.BrowserWindow.fromWebContents(t.sender);if(r)switch(e){case"minimize":r.minimize();break;case"maximize":r.isMaximized()?r.unmaximize():r.maximize();break;case"close":r.close();break}})}function Jd(){const t=Ye.totalmem(),e=Math.floor(t/(1024*1024)/2),i=Math.max(e,4096);console.log(`System total memory: ${(t/(1024*1024*1024)).toFixed(2)}GB`),console.log(`Setting memory limit to: ${i}MB (${(i/1024).toFixed(2)}GB)`),se.app.commandLine.appendSwitch("js-flags",`--max-old-space-size=${i}`)}function Wu(t,e,r,i,s,n,o,a){const{fontFamily:u,fontSize:h,fontWeight:c,underline:f,italic:l,textAlign:d,customStyle:y}=e;let v=e.fontColor.replace("#",""),E="000000",A="000000",w={left:s==="subtitles"?1:7,center:s==="subtitles"?2:8,right:s==="subtitles"?3:9},g=1,C=2;y==="custom-style-1"?(E="1A1A1A",v="ffffff"):y==="custom-style-2"?(E="1A1A1A",v="627EE9"):y==="custom-style-3"?(E="1A1A1A",v="1A1A1A"):y==="custom-style-4"?(E="B463FE",v="B463FE"):y==="custom-style-5"?(E="FF9C20",v="FF9C20"):y==="custom-style-6"?(E="2278FF",v="2278FF"):y==="custom-style-7"?(g=3,v="1A1A1A",A="FFE306",C=4,E="FFE306"):y==="custom-style-8"?(E="1A1A1A",v="FAF5B0"):y==="custom-style-9"?(E="1A1A1A",v="FF9C20"):y==="custom-style-10"?(E="F09CAF",v="FFFFFF"):y==="custom-style-11"&&(E="F86F32",v="FDDC63");const D=`Style: ${a||s},Arial,${h},${pi(v)},&H000000FF&,${pi(E)},${pi(A,"80")},${c==="bold"?1:0},${l?1:0},${f?1:0},0,100,100,0,0,${g},${C},0,${w[d]},0,0,0,0`,S=`Dialogue: 0,${ga(r)},${ga(r+i)},${a||s},,0,0,0,,{\\pos(${n},${o})}${t}`;return{style:D,dialogue:S}}function Kd(t,e,r,i,s){const n=i,o=s,a=e.join(`
`),u=r.join(`
`),h=`
[Script Info]
Title: Dynamic Subtitles
ScriptType: v4.00+
PlayResX: ${n}
PlayResY: ${o}
ScaledBorderAndShadow: yes
WrapStyle: 0

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
${a}

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
${u}
  `;return ae.writeFileSync(t,h.trim()),t}function ga(t){const e=Math.floor(t/3600),r=Math.floor(t%3600/60),i=Math.floor(t%60),s=Math.floor((t-Math.floor(t))*100);return`${e}:${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}.${s.toString().padStart(2,"0")}`}function pi(t,e="00"){const r=`${t.slice(4,6)}${t.slice(2,4)}${t.slice(0,2)}`;return`&H${e}${r}&`}function Qd(t,e,r,i,s){const n=Hu(t,r.fontSize),o=Zd(n,e),a=[];for(let u=0;u<o.length;u++){const h=o[u],c=`subtitles-${u}`,f=h.end-h.start,l=Wu(h.text,r,h.start,f,"subtitles",i,s,c);a.push({style:l.style,dialogue:l.dialogue})}return a}function Hu(t,e){const r=[],i=em(e);re.log("#######################################"),re.log("字幕单行最长字符数："+i),re.log("#######################################");const n=i*1,o=t.split(/([。！？；\n])/).filter(a=>a.trim());re.log("字幕分句结果："),re.log(JSON.stringify(o));for(let a=0;a<o.length;a++){let u=o[a];if(u.length>n){const h=u.split(/([,，])/).filter(c=>c.trim());for(const c of h)if(c.length>n){const f=c.split(/\s+/);re.log("句子分词结果："),re.log(JSON.stringify(f));let l="";for(const d of f)if(l.length+d.length>n)if(d.length===n)l&&r.push(l),r.push(d);else{const y=l+(l?" ":"")+d;for(let v=0;v<y.length;){const E=Math.min(v+n,y.length);E<y.length?r.push(y.substring(v,E)):l=y.substring(v,E),v=E}}else l+=(l?" ":"")+d;l&&r.push(l)}else r.push(c)}else r.push(u)}return re.log("字幕分屏结果："),re.log(JSON.stringify(r)),r}function Zd(t,e){const r=[],s=t.reduce((o,a)=>o+a.length,0)/e;let n=0;for(const o of t){const a=o.length/s,u=Math.min(n+a,e);r.push({text:o,start:n,end:u}),n=u,n<e&&(n+=.2)}return r}function em(t){return Math.floor(1280/(t*.6)/2)}function tm(t,e,r,i){const s=r.videoRatio,o=r.videoResolution.split("x"),a=s==="9:16",u=a?o[0]:o[1],h=a?o[1]:o[0],c=Q.join(r.outputDir,i);console.log(c),console.log(i),console.log(r.outputDir);const f=[],l=[],d=e.datas[0],y=e.datas[0].duration,v=Qd(d.text,y,e.textConfig,e.posX,e.posY);if(f.push(...v.map(E=>E.style)),l.push(...v.map(E=>E.dialogue)),t){const E=t==null?void 0:t.datas[0],A=E.duration||y,g=Hu(E.text,E.textConfig.fontSize).join("\\n"),C=Wu(g,E.textConfig,E.start,A,"title",E.posX,E.posY,"title");f.push(C.style),l.push(C.dialogue)}return Kd(c,f,l,u,h),c}function rm(){se.ipcMain.handle("generate-ass-file",async(t,e)=>{const r=JSON.parse(xt(e));return tm(r.videoTitleConfig,r.zimuConfig,r.globalConfig,r.outputPath)})}global.crypto=th;process.env.LANG="zh_CN.UTF-8";process.env.LC_ALL="zh_CN.UTF-8";process.platform==="win32"&&(process.env.CHCP="65001");process.env.DIST=Q.join(__dirname,"../dist");process.env.VITE_PUBLIC=se.app.isPackaged?process.env.DIST:Q.join(process.env.DIST,"../public");Jd();let Be;const va=process.env.VITE_DEV_SERVER_URL;function Gu(){Be=new se.BrowserWindow({icon:Q.join(process.env.VITE_PUBLIC,"vite.svg"),webPreferences:{nodeIntegration:!0,contextIsolation:!0,scrollBounce:!0,directWrite:!1,preload:Q.join(__dirname,"preload.js")},autoHideMenuBar:!0}),Be.webContents.on("did-finish-load",()=>{Be==null||Be.webContents.send("main-process-message",new Date().toLocaleString())}),va?Be.loadURL(va):Be.loadFile(Q.join(process.env.DIST,"index.html"))}Cd();ic();oc();Zf();Qf();Rd();rm();se.app.whenReady().then(()=>{uu(),Gf(),Hd(),Gu(),zd(Be),Gd(Be),Yd()});se.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(se.app.quit(),Be=null)});se.app.on("activate",()=>{se.BrowserWindow.getAllWindows().length===0&&Gu()});se.app.on("will-quit",()=>{se.globalShortcut.unregisterAll()});
//# sourceMappingURL=main.js.map
