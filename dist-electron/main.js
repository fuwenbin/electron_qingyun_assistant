"use strict";var Us=Object.defineProperty;var Xs=(o,e,n)=>e in o?Us(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n;var Q=(o,e,n)=>(Xs(o,typeof e!="symbol"?e+"":e,n),n);const re=require("electron"),Z=require("path"),yt=require("util"),Be=require("events"),vt=require("child_process"),$e=require("os"),ae=require("fs"),Vs=require("stream"),wt=require("http"),Et=require("https"),zs=require("ws"),An=require("assert"),Ws=require("zlib"),Nn=require("url"),In=require("tty"),De=require("crypto"),Hs=require("querystring"),Gs=require("string_decoder"),Ks=require("timers");function Ys(o){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(o){for(const n in o)if(n!=="default"){const i=Object.getOwnPropertyDescriptor(o,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:()=>o[n]})}}return e.default=o,Object.freeze(e)}const Lt=Ys(ae);function Js(){re.ipcMain.handle("show-save-dialog",async(o,e)=>await re.dialog.showSaveDialog({title:e.title||"保存文件",defaultPath:e.defaultPath||re.app.getPath("documents"),filters:e.filters||[{name:"MP4 Videos",extensions:["mp4"]},{name:"All Files",extensions:["*"]}]})),re.ipcMain.handle("select-directory",async()=>{const o=await re.dialog.showOpenDialog({properties:["openDirectory"],title:"选择保存目录",defaultPath:re.app.getPath("documents")});return!o.canceled&&o.filePaths.length>0?o.filePaths[0]:null})}var ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bt(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function Qs(o){if(o.__esModule)return o;var e=o.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(o).forEach(function(i){var a=Object.getOwnPropertyDescriptor(o,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return o[i]}})}),n}var Jo={exports:{}},Mt,Kn;function Zs(){if(Kn)return Mt;Kn=1,Mt=i,i.sync=a;var o=ae;function e(t,r){var s=r.pathExt!==void 0?r.pathExt:process.env.PATHEXT;if(!s||(s=s.split(";"),s.indexOf("")!==-1))return!0;for(var u=0;u<s.length;u++){var f=s[u].toLowerCase();if(f&&t.substr(-f.length).toLowerCase()===f)return!0}return!1}function n(t,r,s){return!t.isSymbolicLink()&&!t.isFile()?!1:e(r,s)}function i(t,r,s){o.stat(t,function(u,f){s(u,u?!1:n(f,t,r))})}function a(t,r){return n(o.statSync(t),t,r)}return Mt}var Rt,Yn;function ea(){if(Yn)return Rt;Yn=1,Rt=e,e.sync=n;var o=ae;function e(t,r,s){o.stat(t,function(u,f){s(u,u?!1:i(f,r))})}function n(t,r){return i(o.statSync(t),r)}function i(t,r){return t.isFile()&&a(t,r)}function a(t,r){var s=t.mode,u=t.uid,f=t.gid,l=r.uid!==void 0?r.uid:process.getuid&&process.getuid(),h=r.gid!==void 0?r.gid:process.getgid&&process.getgid(),c=parseInt("100",8),m=parseInt("010",8),v=parseInt("001",8),b=c|m,T=s&v||s&m&&f===h||s&c&&u===l||s&b&&l===0;return T}return Rt}var mt;process.platform==="win32"||ee.TESTING_WINDOWS?mt=Zs():mt=ea();var ta=_n;_n.sync=ra;function _n(o,e,n){if(typeof e=="function"&&(n=e,e={}),!n){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,a){_n(o,e||{},function(t,r){t?a(t):i(r)})})}mt(o,e||{},function(i,a){i&&(i.code==="EACCES"||e&&e.ignoreErrors)&&(i=null,a=!1),n(i,a)})}function ra(o,e){try{return mt.sync(o,e||{})}catch(n){if(e&&e.ignoreErrors||n.code==="EACCES")return!1;throw n}}var na=rs;rs.sync=oa;var vn=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Qo=Z,ia=vn?";":":",Zo=ta;function es(o){var e=new Error("not found: "+o);return e.code="ENOENT",e}function ts(o,e){var n=e.colon||ia,i=e.path||process.env.PATH||"",a=[""];i=i.split(n);var t="";return vn&&(i.unshift(process.cwd()),t=e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM",a=t.split(n),o.indexOf(".")!==-1&&a[0]!==""&&a.unshift("")),(o.match(/\//)||vn&&o.match(/\\/))&&(i=[""]),{env:i,ext:a,extExe:t}}function rs(o,e,n){typeof e=="function"&&(n=e,e={});var i=ts(o,e),a=i.env,t=i.ext,r=i.extExe,s=[];(function u(f,l){if(f===l)return e.all&&s.length?n(null,s):n(es(o));var h=a[f];h.charAt(0)==='"'&&h.slice(-1)==='"'&&(h=h.slice(1,-1));var c=Qo.join(h,o);!h&&/^\.[\\\/]/.test(o)&&(c=o.slice(0,2)+c),function m(v,b){if(v===b)return u(f+1,l);var T=t[v];Zo(c+T,{pathExt:r},function(x,y){if(!x&&y)if(e.all)s.push(c+T);else return n(null,c+T);return m(v+1,b)})}(0,t.length)})(0,a.length)}function oa(o,e){e=e||{};for(var n=ts(o,e),i=n.env,a=n.ext,t=n.extExe,r=[],s=0,u=i.length;s<u;s++){var f=i[s];f.charAt(0)==='"'&&f.slice(-1)==='"'&&(f=f.slice(1,-1));var l=Qo.join(f,o);!f&&/^\.[\\\/]/.test(o)&&(l=o.slice(0,2)+l);for(var h=0,c=a.length;h<c;h++){var m=l+a[h],v;try{if(v=Zo.sync(m,{pathExt:t}),v)if(e.all)r.push(m);else return m}catch{}}}if(e.all&&r.length)return r;if(e.nothrow)return null;throw es(o)}vt.exec;var sa=$e.platform().match(/win(32|64)/),aa=na,Jn=/\r\n|\r|\n/g,He=/^\[?(.*?)\]?$/,Qn=/[,]/,nt={};function ua(o){var e={};o=o.replace(/=\s+/g,"=").trim();for(var n=o.split(" "),i=0;i<n.length;i++){var a=n[i].split("=",2),t=a[0],r=a[1];if(typeof r>"u")return null;e[t]=r}return e}var Zn=Jo.exports={isWindows:sa,streamRegexp:He,copy:function(o,e){Object.keys(o).forEach(function(n){e[n]=o[n]})},args:function(){var o=[],e=function(){arguments.length===1&&Array.isArray(arguments[0])?o=o.concat(arguments[0]):o=o.concat([].slice.call(arguments))};return e.clear=function(){o=[]},e.get=function(){return o},e.find=function(n,i){var a=o.indexOf(n);if(a!==-1)return o.slice(a+1,a+1+(i||0))},e.remove=function(n,i){var a=o.indexOf(n);a!==-1&&o.splice(a,(i||0)+1)},e.clone=function(){var n=Zn.args();return n(o),n},e},makeFilterStrings:function(o){return o.map(function(e){if(typeof e=="string")return e;var n="";return Array.isArray(e.inputs)?n+=e.inputs.map(function(i){return i.replace(He,"[$1]")}).join(""):typeof e.inputs=="string"&&(n+=e.inputs.replace(He,"[$1]")),n+=e.filter,e.options&&(typeof e.options=="string"||typeof e.options=="number"?n+="="+e.options:Array.isArray(e.options)?n+="="+e.options.map(function(i){return typeof i=="string"&&i.match(Qn)?"'"+i+"'":i}).join(":"):Object.keys(e.options).length&&(n+="="+Object.keys(e.options).map(function(i){var a=e.options[i];return typeof a=="string"&&a.match(Qn)&&(a="'"+a+"'"),i+"="+a}).join(":"))),Array.isArray(e.outputs)?n+=e.outputs.map(function(i){return i.replace(He,"[$1]")}).join(""):typeof e.outputs=="string"&&(n+=e.outputs.replace(He,"[$1]")),n})},which:function(o,e){if(o in nt)return e(null,nt[o]);aa(o,function(n,i){if(n)return e(null,nt[o]="");e(null,nt[o]=i)})},timemarkToSeconds:function(o){if(typeof o=="number")return o;if(o.indexOf(":")===-1&&o.indexOf(".")>=0)return Number(o);var e=o.split(":"),n=Number(e.pop());return e.length&&(n+=Number(e.pop())*60),e.length&&(n+=Number(e.pop())*3600),n},extractCodecData:function(o,e,n){var i=/Input #[0-9]+, ([^ ]+),/,a=/Duration\: ([^,]+)/,t=/Audio\: (.*)/,r=/Video\: (.*)/;"inputStack"in n||(n.inputStack=[],n.inputIndex=-1,n.inInput=!1);var s=n.inputStack,u=n.inputIndex,f=n.inInput,l,h,c,m;if(l=e.match(i))f=n.inInput=!0,u=n.inputIndex=n.inputIndex+1,s[u]={format:l[1],audio:"",video:"",duration:""};else if(f&&(h=e.match(a)))s[u].duration=h[1];else if(f&&(c=e.match(t)))c=c[1].split(", "),s[u].audio=c[0],s[u].audio_details=c;else if(f&&(m=e.match(r)))m=m[1].split(", "),s[u].video=m[0],s[u].video_details=m;else if(/Output #\d+/.test(e))f=n.inInput=!1;else if(/Stream mapping:|Press (\[q\]|ctrl-c) to stop/.test(e))return o.emit.apply(o,["codecData"].concat(s)),!0;return!1},extractProgress:function(o,e){var n=ua(e);if(n){var i={frames:parseInt(n.frame,10),currentFps:parseInt(n.fps,10),currentKbps:n.bitrate?parseFloat(n.bitrate.replace("kbits/s","")):0,targetSize:parseInt(n.size||n.Lsize,10),timemark:n.time};if(o._ffprobeData&&o._ffprobeData.format&&o._ffprobeData.format.duration){var a=Number(o._ffprobeData.format.duration);isNaN(a)||(i.percent=Zn.timemarkToSeconds(i.timemark)/a*100)}o.emit("progress",i)}},extractError:function(o){return o.split(Jn).reduce(function(e,n){return n.charAt(0)===" "||n.charAt(0)==="["?[]:(e.push(n),e)},[]).join(`
`)},linesRing:function(o){var e=[],n=[],i=null,a=!1,t=o-1;function r(s){e.forEach(function(u){u(s)})}return{callback:function(s){n.forEach(function(u){s(u)}),e.push(s)},append:function(s){if(!a&&(s instanceof Buffer&&(s=""+s),!(!s||s.length===0))){var u=s.split(Jn);u.length===1?i!==null?i=i+u.shift():i=u.shift():(i!==null&&(i=i+u.shift(),r(i),n.push(i)),i=u.pop(),u.forEach(function(f){r(f),n.push(f)}),t>-1&&n.length>t&&n.splice(0,n.length-t))}},get:function(){return i!==null?n.concat([i]).join(`
`):n.join(`
`)},close:function(){a||(i!==null&&(r(i),n.push(i),t>-1&&n.length>t&&n.shift(),i=null),a=!0)}}}},Se=Jo.exports,jt,ei;function ca(){if(ei)return jt;ei=1;var o=Se;return jt=function(e){e.mergeAdd=e.addInput=e.input=function(n){var i=!1,a=!1;if(typeof n!="string"){if(!("readable"in n)||!n.readable)throw new Error("Invalid input");var t=this._inputs.some(function(s){return s.isStream});if(t)throw new Error("Only one input stream is supported");a=!0,n.pause()}else{var r=n.match(/^([a-z]{2,}):/i);i=!r||r[0]==="file"}return this._inputs.push(this._currentInput={source:n,isFile:i,isStream:a,options:o.args()}),this},e.withInputFormat=e.inputFormat=e.fromFormat=function(n){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-f",n),this},e.withInputFps=e.withInputFPS=e.withFpsInput=e.withFPSInput=e.inputFPS=e.inputFps=e.fpsInput=e.FPSInput=function(n){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-r",n),this},e.nativeFramerate=e.withNativeFramerate=e.native=function(){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-re"),this},e.setStartTime=e.seekInput=function(n){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-ss",n),this},e.loop=function(n){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-loop","1"),typeof n<"u"&&this.duration(n),this}},jt}var qt,ti;function fa(){if(ti)return qt;ti=1;var o=Se;return qt=function(e){e.withNoAudio=e.noAudio=function(){return this._currentOutput.audio.clear(),this._currentOutput.audioFilters.clear(),this._currentOutput.audio("-an"),this},e.withAudioCodec=e.audioCodec=function(n){return this._currentOutput.audio("-acodec",n),this},e.withAudioBitrate=e.audioBitrate=function(n){return this._currentOutput.audio("-b:a",(""+n).replace(/k?$/,"k")),this},e.withAudioChannels=e.audioChannels=function(n){return this._currentOutput.audio("-ac",n),this},e.withAudioFrequency=e.audioFrequency=function(n){return this._currentOutput.audio("-ar",n),this},e.withAudioQuality=e.audioQuality=function(n){return this._currentOutput.audio("-aq",n),this},e.withAudioFilter=e.withAudioFilters=e.audioFilter=e.audioFilters=function(n){return arguments.length>1&&(n=[].slice.call(arguments)),Array.isArray(n)||(n=[n]),this._currentOutput.audioFilters(o.makeFilterStrings(n)),this}},qt}var $t,ri;function la(){if(ri)return $t;ri=1;var o=Se;return $t=function(e){e.withNoVideo=e.noVideo=function(){return this._currentOutput.video.clear(),this._currentOutput.videoFilters.clear(),this._currentOutput.video("-vn"),this},e.withVideoCodec=e.videoCodec=function(n){return this._currentOutput.video("-vcodec",n),this},e.withVideoBitrate=e.videoBitrate=function(n,i){return n=(""+n).replace(/k?$/,"k"),this._currentOutput.video("-b:v",n),i&&this._currentOutput.video("-maxrate",n,"-minrate",n,"-bufsize","3M"),this},e.withVideoFilter=e.withVideoFilters=e.videoFilter=e.videoFilters=function(n){return arguments.length>1&&(n=[].slice.call(arguments)),Array.isArray(n)||(n=[n]),this._currentOutput.videoFilters(o.makeFilterStrings(n)),this},e.withOutputFps=e.withOutputFPS=e.withFpsOutput=e.withFPSOutput=e.withFps=e.withFPS=e.outputFPS=e.outputFps=e.fpsOutput=e.FPSOutput=e.fps=e.FPS=function(n){return this._currentOutput.video("-r",n),this},e.takeFrames=e.withFrames=e.frames=function(n){return this._currentOutput.video("-vframes",n),this}},$t}var kt,ni;function pa(){if(ni)return kt;ni=1;function o(n,i,a,t){return[{filter:"scale",options:{w:"if(gt(a,"+a+"),"+n+",trunc("+i+"*a/2)*2)",h:"if(lt(a,"+a+"),"+i+",trunc("+n+"/a/2)*2)"}},{filter:"pad",options:{w:n,h:i,x:"if(gt(a,"+a+"),0,("+n+"-iw)/2)",y:"if(lt(a,"+a+"),0,("+i+"-ih)/2)",color:t}}]}function e(n,i,a){var t=n.sizeData=n.sizeData||{};if(t[i]=a,!("size"in t))return[];var r=t.size.match(/([0-9]+)x([0-9]+)/),s=t.size.match(/([0-9]+)x\?/),u=t.size.match(/\?x([0-9]+)/),f=t.size.match(/\b([0-9]{1,3})%/),l,h,c;if(f){var m=Number(f[1])/100;return[{filter:"scale",options:{w:"trunc(iw*"+m+"/2)*2",h:"trunc(ih*"+m+"/2)*2"}}]}else{if(r)return l=Math.round(Number(r[1])/2)*2,h=Math.round(Number(r[2])/2)*2,c=l/h,t.pad?o(l,h,c,t.pad):[{filter:"scale",options:{w:l,h}}];if(s||u)return"aspect"in t?(l=s?s[1]:Math.round(Number(u[1])*t.aspect),h=u?u[1]:Math.round(Number(s[1])/t.aspect),l=Math.round(l/2)*2,h=Math.round(h/2)*2,t.pad?o(l,h,t.aspect,t.pad):[{filter:"scale",options:{w:l,h}}]):s?[{filter:"scale",options:{w:Math.round(Number(s[1])/2)*2,h:"trunc(ow/a/2)*2"}}]:[{filter:"scale",options:{w:"trunc(oh*a/2)*2",h:Math.round(Number(u[1])/2)*2}}];throw new Error("Invalid size specified: "+t.size)}}return kt=function(n){n.keepPixelAspect=n.keepDisplayAspect=n.keepDisplayAspectRatio=n.keepDAR=function(){return this.videoFilters([{filter:"scale",options:{w:"if(gt(sar,1),iw*sar,iw)",h:"if(lt(sar,1),ih/sar,ih)"}},{filter:"setsar",options:"1"}])},n.withSize=n.setSize=n.size=function(i){var a=e(this._currentOutput,"size",i);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(a),this},n.withAspect=n.withAspectRatio=n.setAspect=n.setAspectRatio=n.aspect=n.aspectRatio=function(i){var a=Number(i);if(isNaN(a)){var t=i.match(/^(\d+):(\d+)$/);if(t)a=Number(t[1])/Number(t[2]);else throw new Error("Invalid aspect ratio: "+i)}var r=e(this._currentOutput,"aspect",a);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(r),this},n.applyAutopadding=n.applyAutoPadding=n.applyAutopad=n.applyAutoPad=n.withAutopadding=n.withAutoPadding=n.withAutopad=n.withAutoPad=n.autoPad=n.autopad=function(i,a){typeof i=="string"&&(a=i,i=!0),typeof i>"u"&&(i=!0);var t=e(this._currentOutput,"pad",i?a||"black":!1);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(t),this}},kt}var Bt,ii;function ha(){if(ii)return Bt;ii=1;var o=Se;return Bt=function(e){e.addOutput=e.output=function(n,i){var a=!1;if(!n&&this._currentOutput)throw new Error("Invalid output");if(n&&typeof n!="string"){if(!("writable"in n)||!n.writable)throw new Error("Invalid output")}else if(typeof n=="string"){var t=n.match(/^([a-z]{2,}):/i);a=!t||t[0]==="file"}if(n&&!("target"in this._currentOutput))this._currentOutput.target=n,this._currentOutput.isFile=a,this._currentOutput.pipeopts=i||{};else{if(n&&typeof n!="string"){var r=this._outputs.some(function(u){return typeof u.target!="string"});if(r)throw new Error("Only one output stream is supported")}this._outputs.push(this._currentOutput={target:n,isFile:a,flags:{},pipeopts:i||{}});var s=this;["audio","audioFilters","video","videoFilters","sizeFilters","options"].forEach(function(u){s._currentOutput[u]=o.args()}),n||delete this._currentOutput.target}return this},e.seekOutput=e.seek=function(n){return this._currentOutput.options("-ss",n),this},e.withDuration=e.setDuration=e.duration=function(n){return this._currentOutput.options("-t",n),this},e.toFormat=e.withOutputFormat=e.outputFormat=e.format=function(n){return this._currentOutput.options("-f",n),this},e.map=function(n){return this._currentOutput.options("-map",n.replace(o.streamRegexp,"[$1]")),this},e.updateFlvMetadata=e.flvmeta=function(){return this._currentOutput.flags.flvmeta=!0,this}},Bt}var Ut,oi;function da(){if(oi)return Ut;oi=1;var o=Se;return Ut=function(e){e.addInputOption=e.addInputOptions=e.withInputOption=e.withInputOptions=e.inputOption=e.inputOptions=function(n){if(!this._currentInput)throw new Error("No input specified");var i=!0;return arguments.length>1&&(n=[].slice.call(arguments),i=!1),Array.isArray(n)||(n=[n]),this._currentInput.options(n.reduce(function(a,t){var r=String(t).split(" ");return i&&r.length===2?a.push(r[0],r[1]):a.push(t),a},[])),this},e.addOutputOption=e.addOutputOptions=e.addOption=e.addOptions=e.withOutputOption=e.withOutputOptions=e.withOption=e.withOptions=e.outputOption=e.outputOptions=function(n){var i=!0;return arguments.length>1&&(n=[].slice.call(arguments),i=!1),Array.isArray(n)||(n=[n]),this._currentOutput.options(n.reduce(function(a,t){var r=String(t).split(" ");return i&&r.length===2?a.push(r[0],r[1]):a.push(t),a},[])),this},e.filterGraph=e.complexFilter=function(n,i){if(this._complexFilters.clear(),Array.isArray(n)||(n=[n]),this._complexFilters("-filter_complex",o.makeFilterStrings(n).join(";")),Array.isArray(i)){var a=this;i.forEach(function(t){a._complexFilters("-map",t.replace(o.streamRegexp,"[$1]"))})}else typeof i=="string"&&this._complexFilters("-map",i.replace(o.streamRegexp,"[$1]"));return this}},Ut}function ma(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xt,si;function ga(){if(si)return Xt;si=1;var o=Z;return Xt=function(e){e.usingPreset=e.preset=function(n){if(typeof n=="function")n(this);else try{var i=o.join(this.options.presets,n),a=ma(i);if(typeof a.load=="function")a.load(this);else throw new Error("preset "+i+" has no load() function")}catch(t){throw new Error("preset "+i+" could not be loaded: "+t.message)}return this}},Xt}var Vt={exports:{}},ai;function xn(){return ai||(ai=1,function(o){(function(){var e={},n,i;n=this,n!=null&&(i=n.async),e.noConflict=function(){return n.async=i,e};function a(E){var A=!1;return function(){if(A)throw new Error("Callback was already called.");A=!0,E.apply(n,arguments)}}var t=function(E,A){if(E.forEach)return E.forEach(A);for(var O=0;O<E.length;O+=1)A(E[O],O,E)},r=function(E,A){if(E.map)return E.map(A);var O=[];return t(E,function(p,C,F){O.push(A(p,C,F))}),O},s=function(E,A,O){return E.reduce?E.reduce(A,O):(t(E,function(p,C,F){O=A(O,p,C,F)}),O)},u=function(E){if(Object.keys)return Object.keys(E);var A=[];for(var O in E)E.hasOwnProperty(O)&&A.push(O);return A};typeof process>"u"||!process.nextTick?typeof setImmediate=="function"?(e.nextTick=function(E){setImmediate(E)},e.setImmediate=e.nextTick):(e.nextTick=function(E){setTimeout(E,0)},e.setImmediate=e.nextTick):(e.nextTick=process.nextTick,typeof setImmediate<"u"?e.setImmediate=function(E){setImmediate(E)}:e.setImmediate=e.nextTick),e.each=function(E,A,O){if(O=O||function(){},!E.length)return O();var p=0;t(E,function(C){A(C,a(function(F){F?(O(F),O=function(){}):(p+=1,p>=E.length&&O(null))}))})},e.forEach=e.each,e.eachSeries=function(E,A,O){if(O=O||function(){},!E.length)return O();var p=0,C=function(){A(E[p],function(F){F?(O(F),O=function(){}):(p+=1,p>=E.length?O(null):C())})};C()},e.forEachSeries=e.eachSeries,e.eachLimit=function(E,A,O,p){var C=f(A);C.apply(null,[E,O,p])},e.forEachLimit=e.eachLimit;var f=function(E){return function(A,O,p){if(p=p||function(){},!A.length||E<=0)return p();var C=0,F=0,M=0;(function U(){if(C>=A.length)return p();for(;M<E&&F<A.length;)F+=1,M+=1,O(A[F-1],function(W){W?(p(W),p=function(){}):(C+=1,M-=1,C>=A.length?p():U())})})()}},l=function(E){return function(){var A=Array.prototype.slice.call(arguments);return E.apply(null,[e.each].concat(A))}},h=function(E,A){return function(){var O=Array.prototype.slice.call(arguments);return A.apply(null,[f(E)].concat(O))}},c=function(E){return function(){var A=Array.prototype.slice.call(arguments);return E.apply(null,[e.eachSeries].concat(A))}},m=function(E,A,O,p){var C=[];A=r(A,function(F,M){return{index:M,value:F}}),E(A,function(F,M){O(F.value,function(U,W){C[F.index]=W,M(U)})},function(F){p(F,C)})};e.map=l(m),e.mapSeries=c(m),e.mapLimit=function(E,A,O,p){return v(A)(E,O,p)};var v=function(E){return h(E,m)};e.reduce=function(E,A,O,p){e.eachSeries(E,function(C,F){O(A,C,function(M,U){A=U,F(M)})},function(C){p(C,A)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(E,A,O,p){var C=r(E,function(F){return F}).reverse();e.reduce(C,A,O,p)},e.foldr=e.reduceRight;var b=function(E,A,O,p){var C=[];A=r(A,function(F,M){return{index:M,value:F}}),E(A,function(F,M){O(F.value,function(U){U&&C.push(F),M()})},function(F){p(r(C.sort(function(M,U){return M.index-U.index}),function(M){return M.value}))})};e.filter=l(b),e.filterSeries=c(b),e.select=e.filter,e.selectSeries=e.filterSeries;var T=function(E,A,O,p){var C=[];A=r(A,function(F,M){return{index:M,value:F}}),E(A,function(F,M){O(F.value,function(U){U||C.push(F),M()})},function(F){p(r(C.sort(function(M,U){return M.index-U.index}),function(M){return M.value}))})};e.reject=l(T),e.rejectSeries=c(T);var x=function(E,A,O,p){E(A,function(C,F){O(C,function(M){M?(p(C),p=function(){}):F()})},function(C){p()})};e.detect=l(x),e.detectSeries=c(x),e.some=function(E,A,O){e.each(E,function(p,C){A(p,function(F){F&&(O(!0),O=function(){}),C()})},function(p){O(!1)})},e.any=e.some,e.every=function(E,A,O){e.each(E,function(p,C){A(p,function(F){F||(O(!1),O=function(){}),C()})},function(p){O(!0)})},e.all=e.every,e.sortBy=function(E,A,O){e.map(E,function(p,C){A(p,function(F,M){F?C(F):C(null,{value:p,criteria:M})})},function(p,C){if(p)return O(p);var F=function(M,U){var W=M.criteria,H=U.criteria;return W<H?-1:W>H?1:0};O(null,r(C.sort(F),function(M){return M.value}))})},e.auto=function(E,A){A=A||function(){};var O=u(E);if(!O.length)return A(null);var p={},C=[],F=function(W){C.unshift(W)},M=function(W){for(var H=0;H<C.length;H+=1)if(C[H]===W){C.splice(H,1);return}},U=function(){t(C.slice(0),function(W){W()})};F(function(){u(p).length===O.length&&(A(null,p),A=function(){})}),t(O,function(W){var H=E[W]instanceof Function?[E[W]]:E[W],J=function(he){var le=Array.prototype.slice.call(arguments,1);if(le.length<=1&&(le=le[0]),he){var Ee={};t(u(p),function(Le){Ee[Le]=p[Le]}),Ee[W]=le,A(he,Ee),A=function(){}}else p[W]=le,e.setImmediate(U)},Y=H.slice(0,Math.abs(H.length-1))||[],Te=function(){return s(Y,function(he,le){return he&&p.hasOwnProperty(le)},!0)&&!p.hasOwnProperty(W)};if(Te())H[H.length-1](J,p);else{var Oe=function(){Te()&&(M(Oe),H[H.length-1](J,p))};F(Oe)}})},e.waterfall=function(E,A){if(A=A||function(){},E.constructor!==Array){var O=new Error("First argument to waterfall must be an array of functions");return A(O)}if(!E.length)return A();var p=function(C){return function(F){if(F)A.apply(null,arguments),A=function(){};else{var M=Array.prototype.slice.call(arguments,1),U=C.next();U?M.push(p(U)):M.push(A),e.setImmediate(function(){C.apply(null,M)})}}};p(e.iterator(E))()};var y=function(E,A,O){if(O=O||function(){},A.constructor===Array)E.map(A,function(C,F){C&&C(function(M){var U=Array.prototype.slice.call(arguments,1);U.length<=1&&(U=U[0]),F.call(null,M,U)})},O);else{var p={};E.each(u(A),function(C,F){A[C](function(M){var U=Array.prototype.slice.call(arguments,1);U.length<=1&&(U=U[0]),p[C]=U,F(M)})},function(C){O(C,p)})}};e.parallel=function(E,A){y({map:e.map,each:e.each},E,A)},e.parallelLimit=function(E,A,O){y({map:v(A),each:f(A)},E,O)},e.series=function(E,A){if(A=A||function(){},E.constructor===Array)e.mapSeries(E,function(p,C){p&&p(function(F){var M=Array.prototype.slice.call(arguments,1);M.length<=1&&(M=M[0]),C.call(null,F,M)})},A);else{var O={};e.eachSeries(u(E),function(p,C){E[p](function(F){var M=Array.prototype.slice.call(arguments,1);M.length<=1&&(M=M[0]),O[p]=M,C(F)})},function(p){A(p,O)})}},e.iterator=function(E){var A=function(O){var p=function(){return E.length&&E[O].apply(null,arguments),p.next()};return p.next=function(){return O<E.length-1?A(O+1):null},p};return A(0)},e.apply=function(E){var A=Array.prototype.slice.call(arguments,1);return function(){return E.apply(null,A.concat(Array.prototype.slice.call(arguments)))}};var g=function(E,A,O,p){var C=[];E(A,function(F,M){O(F,function(U,W){C=C.concat(W||[]),M(U)})},function(F){p(F,C)})};e.concat=l(g),e.concatSeries=c(g),e.whilst=function(E,A,O){E()?A(function(p){if(p)return O(p);e.whilst(E,A,O)}):O()},e.doWhilst=function(E,A,O){E(function(p){if(p)return O(p);A()?e.doWhilst(E,A,O):O()})},e.until=function(E,A,O){E()?O():A(function(p){if(p)return O(p);e.until(E,A,O)})},e.doUntil=function(E,A,O){E(function(p){if(p)return O(p);A()?O():e.doUntil(E,A,O)})},e.queue=function(E,A){A===void 0&&(A=1);function O(F,M,U,W){M.constructor!==Array&&(M=[M]),t(M,function(H){var J={data:H,callback:typeof W=="function"?W:null};U?F.tasks.unshift(J):F.tasks.push(J),F.saturated&&F.tasks.length===A&&F.saturated(),e.setImmediate(F.process)})}var p=0,C={tasks:[],concurrency:A,saturated:null,empty:null,drain:null,push:function(F,M){O(C,F,!1,M)},unshift:function(F,M){O(C,F,!0,M)},process:function(){if(p<C.concurrency&&C.tasks.length){var F=C.tasks.shift();C.empty&&C.tasks.length===0&&C.empty(),p+=1;var M=function(){p-=1,F.callback&&F.callback.apply(F,arguments),C.drain&&C.tasks.length+p===0&&C.drain(),C.process()},U=a(M);E(F.data,U)}},length:function(){return C.tasks.length},running:function(){return p}};return C},e.cargo=function(E,A){var O=!1,p=[],C={tasks:p,payload:A,saturated:null,empty:null,drain:null,push:function(F,M){F.constructor!==Array&&(F=[F]),t(F,function(U){p.push({data:U,callback:typeof M=="function"?M:null}),C.saturated&&p.length===A&&C.saturated()}),e.setImmediate(C.process)},process:function F(){if(!O){if(p.length===0){C.drain&&C.drain();return}var M=typeof A=="number"?p.splice(0,A):p.splice(0),U=r(M,function(W){return W.data});C.empty&&C.empty(),O=!0,E(U,function(){O=!1;var W=arguments;t(M,function(H){H.callback&&H.callback.apply(null,W)}),F()})}},length:function(){return p.length},running:function(){return O}};return C};var D=function(E){return function(A){var O=Array.prototype.slice.call(arguments,1);A.apply(null,O.concat([function(p){var C=Array.prototype.slice.call(arguments,1);typeof console<"u"&&(p?console.error&&console.error(p):console[E]&&t(C,function(F){console[E](F)}))}]))}};e.log=D("log"),e.dir=D("dir"),e.memoize=function(E,A){var O={},p={};A=A||function(F){return F};var C=function(){var F=Array.prototype.slice.call(arguments),M=F.pop(),U=A.apply(null,F);U in O?M.apply(null,O[U]):U in p?p[U].push(M):(p[U]=[M],E.apply(null,F.concat([function(){O[U]=arguments;var W=p[U];delete p[U];for(var H=0,J=W.length;H<J;H++)W[H].apply(null,arguments)}])))};return C.memo=O,C.unmemoized=E,C},e.unmemoize=function(E){return function(){return(E.unmemoized||E).apply(null,arguments)}},e.times=function(E,A,O){for(var p=[],C=0;C<E;C++)p.push(C);return e.map(p,A,O)},e.timesSeries=function(E,A,O){for(var p=[],C=0;C<E;C++)p.push(C);return e.mapSeries(p,A,O)},e.compose=function(){var E=Array.prototype.reverse.call(arguments);return function(){var A=this,O=Array.prototype.slice.call(arguments),p=O.pop();e.reduce(E,O,function(C,F,M){F.apply(A,C.concat([function(){var U=arguments[0],W=Array.prototype.slice.call(arguments,1);M(U,W)}]))},function(C,F){p.apply(A,[C].concat(F))})}};var N=function(E,A){var O=function(){var C=this,F=Array.prototype.slice.call(arguments),M=F.pop();return E(A,function(U,W){U.apply(C,F.concat([W]))},M)};if(arguments.length>2){var p=Array.prototype.slice.call(arguments,2);return O.apply(this,p)}else return O};e.applyEach=l(N),e.applyEachSeries=c(N),e.forever=function(E,A){function O(p){if(p){if(A)return A(p);throw p}E(O)}O()},o.exports?o.exports=e:n.async=e})()}(Vt)),Vt.exports}var zt,ui;function ya(){if(ui)return zt;ui=1;var o=vt.spawn,e=xn(),n=Se;function i(a){a._inputs[0].isStream||a.ffprobe(0,function(r,s){a._ffprobeData=s})}return zt=function(a){a._spawnFfmpeg=function(t,r,s,u){typeof r=="function"&&(u=s,s=r,r={}),typeof u>"u"&&(u=s,s=function(){});var f="stdoutLines"in r?r.stdoutLines:this.options.stdoutLines;this._getFfmpegPath(function(l,h){if(l)return u(l);if(!h||h.length===0)return u(new Error("Cannot find ffmpeg"));r.niceness&&r.niceness!==0&&!n.isWindows&&(t.unshift("-n",r.niceness,h),h="nice");var c=n.linesRing(f),m=!1,v=n.linesRing(f),b=!1,T=o(h,t,r);T.stderr&&T.stderr.setEncoding("utf8"),T.on("error",function(D){u(D)});var x=null;function y(D){D&&(x=D),g&&(m||!r.captureStdout)&&b&&u(x,c,v)}var g=!1;T.on("exit",function(D,N){g=!0,N?y(new Error("ffmpeg was killed with signal "+N)):D?y(new Error("ffmpeg exited with code "+D)):y()}),r.captureStdout&&(T.stdout.on("data",function(D){c.append(D)}),T.stdout.on("close",function(){c.close(),m=!0,y()})),T.stderr.on("data",function(D){v.append(D)}),T.stderr.on("close",function(){v.close(),b=!0,y()}),s(T,c,v)})},a._getArguments=function(){var t=this._complexFilters.get(),r=this._outputs.some(function(s){return s.isFile});return[].concat(this._inputs.reduce(function(s,u){var f=typeof u.source=="string"?u.source:"pipe:0";return s.concat(u.options.get(),["-i",f])},[]),this._global.get(),r?["-y"]:[],t,this._outputs.reduce(function(s,u){var f=n.makeFilterStrings(u.sizeFilters.get()),l=u.audioFilters.get(),h=u.videoFilters.get().concat(f),c;return u.target?typeof u.target=="string"?c=[u.target]:c=["pipe:1"]:c=[],s.concat(u.audio.get(),l.length?["-filter:a",l.join(",")]:[],u.video.get(),h.length?["-filter:v",h.join(",")]:[],u.options.get(),c)},[]))},a._prepare=function(t,r){var s=this;e.waterfall([function(u){s._checkCapabilities(u)},function(u){if(!r)return u();s.ffprobe(0,function(f,l){f||(s._ffprobeData=l),u()})},function(u){var f=s._outputs.some(function(l){return l.flags.flvmeta&&!l.isFile&&(s.logger.warn("Updating flv metadata is only supported for files"),l.flags.flvmeta=!1),l.flags.flvmeta});f?s._getFlvtoolPath(function(l){u(l)}):u()},function(u){var f;try{f=s._getArguments()}catch(l){return u(l)}u(null,f)},function(u,f){s.availableEncoders(function(l,h){for(var c=0;c<u.length;c++)(u[c]==="-acodec"||u[c]==="-vcodec")&&(c++,u[c]in h&&h[u[c]].experimental&&(u.splice(c+1,0,"-strict","experimental"),c+=2));f(null,u)})}],t),r||(this.listeners("progress").length>0?i(this):this.once("newListener",function(u){u==="progress"&&i(this)}))},a.exec=a.execute=a.run=function(){var t=this,r=this._outputs.some(function(h){return"target"in h});if(!r)throw new Error("No output specified");var s=this._outputs.filter(function(h){return typeof h.target!="string"})[0],u=this._inputs.filter(function(h){return typeof h.source!="string"})[0],f=!1;function l(h,c,m){f||(f=!0,h?t.emit("error",h,c,m):t.emit("end",c,m))}return t._prepare(function(h,c){if(h)return l(h);t._spawnFfmpeg(c,{captureStdout:!s,niceness:t.options.niceness,cwd:t.options.cwd,windowsHide:!0},function(v,b,T){if(t.ffmpegProc=v,t.emit("start","ffmpeg "+c.join(" ")),u&&(u.source.on("error",function(g){var D=new Error("Input stream error: "+g.message);D.inputStreamError=g,l(D),v.kill()}),u.source.resume(),u.source.pipe(v.stdin),v.stdin.on("error",function(){})),t.options.timeout&&(t.processTimer=setTimeout(function(){var g="process ran into a timeout ("+t.options.timeout+"s)";l(new Error(g),b.get(),T.get()),v.kill()},t.options.timeout*1e3)),s&&(v.stdout.pipe(s.target,s.pipeopts),s.target.on("close",function(){t.logger.debug("Output stream closed, scheduling kill for ffmpeg process"),setTimeout(function(){l(new Error("Output stream closed")),v.kill()},20)}),s.target.on("error",function(g){t.logger.debug("Output stream error, killing ffmpeg process");var D=new Error("Output stream error: "+g.message);D.outputStreamError=g,l(D,b.get(),T.get()),v.kill("SIGKILL")})),T){if(t.listeners("stderr").length&&T.callback(function(g){t.emit("stderr",g)}),t.listeners("codecData").length){var x=!1,y={};T.callback(function(g){x||(x=n.extractCodecData(t,g,y))})}t.listeners("progress").length&&T.callback(function(g){n.extractProgress(t,g)})}},function(v,b,T){if(clearTimeout(t.processTimer),delete t.ffmpegProc,v)v.message.match(/ffmpeg exited with code/)&&(v.message+=": "+n.extractError(T.get())),l(v,b.get(),T.get());else{var x=t._outputs.filter(function(y){return y.flags.flvmeta});x.length?t._getFlvtoolPath(function(y,g){if(y)return l(y);e.each(x,function(D,N){o(g,["-U",D.target],{windowsHide:!0}).on("error",function(E){N(new Error("Error running "+g+" on "+D.target+": "+E.message))}).on("exit",function(E,A){E!==0||A?N(new Error(g+" "+(A?"received signal "+A:"exited with code "+E))+" when running on "+D.target):N()})},function(D){D?l(D):l(null,b.get(),T.get())})}):l(null,b.get(),T.get())}})}),this},a.renice=function(t){if(!n.isWindows&&(t=t||0,(t<-20||t>20)&&this.logger.warn("Invalid niceness value: "+t+", must be between -20 and 20"),t=Math.min(20,Math.max(-20,t)),this.options.niceness=t,this.ffmpegProc)){var r=this.logger,s=this.ffmpegProc.pid,u=o("renice",[t,"-p",s],{windowsHide:!0});u.on("error",function(f){r.warn("could not renice process "+s+": "+f.message)}),u.on("exit",function(f,l){l?r.warn("could not renice process "+s+": renice was killed by signal "+l):f?r.warn("could not renice process "+s+": renice exited with "+f):r.info("successfully reniced process "+s+" to "+t+" niceness")})}return this},a.kill=function(t){return this.ffmpegProc?this.ffmpegProc.kill(t||"SIGKILL"):this.logger.warn("No running ffmpeg process, cannot send signal"),this}},zt}var Wt,ci;function va(){if(ci)return Wt;ci=1;var o=ae,e=Z,n=xn(),i=Se,a=/^\s*([D ])([E ])([VAS])([S ])([D ])([T ]) ([^ ]+) +(.*)$/,t=/^\s*([D\.])([E\.])([VAS])([I\.])([L\.])([S\.]) ([^ ]+) +(.*)$/,r=/\(encoders:([^\)]+)\)/,s=/\(decoders:([^\)]+)\)/,u=/^\s*([VAS\.])([F\.])([S\.])([X\.])([B\.])([D\.]) ([^ ]+) +(.*)$/,f=/^\s*([D ])([E ])\s+([^ ]+)\s+(.*)$/,l=/\r\n|\r|\n/,h=/^(?: [T\.][S\.][C\.] )?([^ ]+) +(AA?|VV?|\|)->(AA?|VV?|\|) +(.*)$/,c={};return Wt=function(m){m.setFfmpegPath=function(v){return c.ffmpegPath=v,this},m.setFfprobePath=function(v){return c.ffprobePath=v,this},m.setFlvtoolPath=function(v){return c.flvtoolPath=v,this},m._forgetPaths=function(){delete c.ffmpegPath,delete c.ffprobePath,delete c.flvtoolPath},m._getFfmpegPath=function(v){if("ffmpegPath"in c)return v(null,c.ffmpegPath);n.waterfall([function(b){process.env.FFMPEG_PATH?o.exists(process.env.FFMPEG_PATH,function(T){T?b(null,process.env.FFMPEG_PATH):b(null,"")}):b(null,"")},function(b,T){if(b.length)return T(null,b);i.which("ffmpeg",function(x,y){T(x,y)})}],function(b,T){b?v(b):v(null,c.ffmpegPath=T||"")})},m._getFfprobePath=function(v){var b=this;if("ffprobePath"in c)return v(null,c.ffprobePath);n.waterfall([function(T){process.env.FFPROBE_PATH?o.exists(process.env.FFPROBE_PATH,function(x){T(null,x?process.env.FFPROBE_PATH:"")}):T(null,"")},function(T,x){if(T.length)return x(null,T);i.which("ffprobe",function(y,g){x(y,g)})},function(T,x){if(T.length)return x(null,T);b._getFfmpegPath(function(y,g){if(y)x(y);else if(g.length){var D=i.isWindows?"ffprobe.exe":"ffprobe",N=e.join(e.dirname(g),D);o.exists(N,function(E){x(null,E?N:"")})}else x(null,"")})}],function(T,x){T?v(T):v(null,c.ffprobePath=x||"")})},m._getFlvtoolPath=function(v){if("flvtoolPath"in c)return v(null,c.flvtoolPath);n.waterfall([function(b){process.env.FLVMETA_PATH?o.exists(process.env.FLVMETA_PATH,function(T){b(null,T?process.env.FLVMETA_PATH:"")}):b(null,"")},function(b,T){if(b.length)return T(null,b);process.env.FLVTOOL2_PATH?o.exists(process.env.FLVTOOL2_PATH,function(x){T(null,x?process.env.FLVTOOL2_PATH:"")}):T(null,"")},function(b,T){if(b.length)return T(null,b);i.which("flvmeta",function(x,y){T(x,y)})},function(b,T){if(b.length)return T(null,b);i.which("flvtool2",function(x,y){T(x,y)})}],function(b,T){b?v(b):v(null,c.flvtoolPath=T||"")})},m.availableFilters=m.getAvailableFilters=function(v){if("filters"in c)return v(null,c.filters);this._spawnFfmpeg(["-filters"],{captureStdout:!0,stdoutLines:0},function(b,T){if(b)return v(b);var x=T.get(),y=x.split(`
`),g={},D={A:"audio",V:"video","|":"none"};y.forEach(function(N){var E=N.match(h);E&&(g[E[1]]={description:E[4],input:D[E[2].charAt(0)],multipleInputs:E[2].length>1,output:D[E[3].charAt(0)],multipleOutputs:E[3].length>1})}),v(null,c.filters=g)})},m.availableCodecs=m.getAvailableCodecs=function(v){if("codecs"in c)return v(null,c.codecs);this._spawnFfmpeg(["-codecs"],{captureStdout:!0,stdoutLines:0},function(b,T){if(b)return v(b);var x=T.get(),y=x.split(l),g={};y.forEach(function(D){var N=D.match(a);if(N&&N[7]!=="="&&(g[N[7]]={type:{V:"video",A:"audio",S:"subtitle"}[N[3]],description:N[8],canDecode:N[1]==="D",canEncode:N[2]==="E",drawHorizBand:N[4]==="S",directRendering:N[5]==="D",weirdFrameTruncation:N[6]==="T"}),N=D.match(t),N&&N[7]!=="="){var E=g[N[7]]={type:{V:"video",A:"audio",S:"subtitle"}[N[3]],description:N[8],canDecode:N[1]==="D",canEncode:N[2]==="E",intraFrameOnly:N[4]==="I",isLossy:N[5]==="L",isLossless:N[6]==="S"},A=E.description.match(r);A=A?A[1].trim().split(" "):[];var O=E.description.match(s);if(O=O?O[1].trim().split(" "):[],A.length||O.length){var p={};i.copy(E,p),delete p.canEncode,delete p.canDecode,A.forEach(function(C){g[C]={},i.copy(p,g[C]),g[C].canEncode=!0}),O.forEach(function(C){C in g||(g[C]={},i.copy(p,g[C])),g[C].canDecode=!0})}}}),v(null,c.codecs=g)})},m.availableEncoders=m.getAvailableEncoders=function(v){if("encoders"in c)return v(null,c.encoders);this._spawnFfmpeg(["-encoders"],{captureStdout:!0,stdoutLines:0},function(b,T){if(b)return v(b);var x=T.get(),y=x.split(l),g={};y.forEach(function(D){var N=D.match(u);N&&N[7]!=="="&&(g[N[7]]={type:{V:"video",A:"audio",S:"subtitle"}[N[1]],description:N[8],frameMT:N[2]==="F",sliceMT:N[3]==="S",experimental:N[4]==="X",drawHorizBand:N[5]==="B",directRendering:N[6]==="D"})}),v(null,c.encoders=g)})},m.availableFormats=m.getAvailableFormats=function(v){if("formats"in c)return v(null,c.formats);this._spawnFfmpeg(["-formats"],{captureStdout:!0,stdoutLines:0},function(b,T){if(b)return v(b);var x=T.get(),y=x.split(l),g={};y.forEach(function(D){var N=D.match(f);N&&N[3].split(",").forEach(function(E){E in g||(g[E]={description:N[4],canDemux:!1,canMux:!1}),N[1]==="D"&&(g[E].canDemux=!0),N[2]==="E"&&(g[E].canMux=!0)})}),v(null,c.formats=g)})},m._checkCapabilities=function(v){var b=this;n.waterfall([function(T){b.availableFormats(T)},function(T,x){var y;if(y=b._outputs.reduce(function(g,D){var N=D.options.find("-f",1);return N&&(!(N[0]in T)||!T[N[0]].canMux)&&g.push(N),g},[]),y.length===1)return x(new Error("Output format "+y[0]+" is not available"));if(y.length>1)return x(new Error("Output formats "+y.join(", ")+" are not available"));if(y=b._inputs.reduce(function(g,D){var N=D.options.find("-f",1);return N&&(!(N[0]in T)||!T[N[0]].canDemux)&&g.push(N[0]),g},[]),y.length===1)return x(new Error("Input format "+y[0]+" is not available"));if(y.length>1)return x(new Error("Input formats "+y.join(", ")+" are not available"));x()},function(T){b.availableEncoders(T)},function(T,x){var y;if(y=b._outputs.reduce(function(g,D){var N=D.audio.find("-acodec",1);return N&&N[0]!=="copy"&&(!(N[0]in T)||T[N[0]].type!=="audio")&&g.push(N[0]),g},[]),y.length===1)return x(new Error("Audio codec "+y[0]+" is not available"));if(y.length>1)return x(new Error("Audio codecs "+y.join(", ")+" are not available"));if(y=b._outputs.reduce(function(g,D){var N=D.video.find("-vcodec",1);return N&&N[0]!=="copy"&&(!(N[0]in T)||T[N[0]].type!=="video")&&g.push(N[0]),g},[]),y.length===1)return x(new Error("Video codec "+y[0]+" is not available"));if(y.length>1)return x(new Error("Video codecs "+y.join(", ")+" are not available"));x()}],v)}},Wt}var Ht,fi;function wa(){if(fi)return Ht;fi=1;var o=vt.spawn;function e(a){return a.match(/^TAG:/)}function n(a){return a.match(/^DISPOSITION:/)}function i(a){var t=a.split(/\r\n|\r|\n/);t=t.filter(function(h){return h.length>0});var r={streams:[],format:{},chapters:[]};function s(h){for(var c={},m=t.shift();typeof m<"u";){if(m.toLowerCase()=="[/"+h+"]")return c;if(m.match(/^\[/)){m=t.shift();continue}var v=m.match(/^([^=]+)=(.*)$/);v&&(!v[1].match(/^TAG:/)&&v[2].match(/^[0-9]+(\.[0-9]+)?$/)?c[v[1]]=Number(v[2]):c[v[1]]=v[2]),m=t.shift()}return c}for(var u=t.shift();typeof u<"u";){if(u.match(/^\[stream/i)){var f=s("stream");r.streams.push(f)}else if(u.match(/^\[chapter/i)){var l=s("chapter");r.chapters.push(l)}else u.toLowerCase()==="[format]"&&(r.format=s("format"));u=t.shift()}return r}return Ht=function(a){a.ffprobe=function(){var t,r=null,s=[],u,u=arguments[arguments.length-1],f=!1;function l(h,c){f||(f=!0,u(h,c))}switch(arguments.length){case 3:r=arguments[0],s=arguments[1];break;case 2:typeof arguments[0]=="number"?r=arguments[0]:Array.isArray(arguments[0])&&(s=arguments[0]);break}if(r===null){if(!this._currentInput)return l(new Error("No input specified"));t=this._currentInput}else if(t=this._inputs[r],!t)return l(new Error("Invalid input index"));this._getFfprobePath(function(h,c){if(h)return l(h);if(!c)return l(new Error("Cannot find ffprobe"));var m="",v=!1,b="",T=!1,x=t.isStream?"pipe:0":t.source,y=o(c,["-show_streams","-show_format"].concat(s,x),{windowsHide:!0});t.isStream&&(y.stdin.on("error",function(E){["ECONNRESET","EPIPE","EOF"].indexOf(E.code)>=0||l(E)}),y.stdin.on("close",function(){t.source.pause(),t.source.unpipe(y.stdin)}),t.source.pipe(y.stdin)),y.on("error",u);var g=null;function D(E){if(E&&(g=E),N&&v&&T){if(g)return b&&(g.message+=`
`+b),l(g);var A=i(m);[A.format].concat(A.streams).forEach(function(O){if(O){var p=Object.keys(O).filter(e);p.length&&(O.tags=O.tags||{},p.forEach(function(F){O.tags[F.substr(4)]=O[F],delete O[F]}));var C=Object.keys(O).filter(n);C.length&&(O.disposition=O.disposition||{},C.forEach(function(F){O.disposition[F.substr(12)]=O[F],delete O[F]}))}}),l(null,A)}}var N=!1;y.on("exit",function(E,A){N=!0,E?D(new Error("ffprobe exited with code "+E)):A?D(new Error("ffprobe was killed with signal "+A)):D()}),y.stdout.on("data",function(E){m+=E}),y.stdout.on("close",function(){v=!0,D()}),y.stderr.on("data",function(E){b+=E}),y.stderr.on("close",function(){T=!0,D()})})}},Ht}var Gt,li;function Ea(){if(li)return Gt;li=1;var o=ae,e=Z,n=Vs.PassThrough,i=xn(),a=Se;return Gt=function(r){r.saveToFile=r.save=function(s){return this.output(s).run(),this},r.writeToStream=r.pipe=r.stream=function(s,u){if(s&&!("writable"in s)&&(u=s,s=void 0),!s){if(process.version.match(/v0\.8\./))throw new Error("PassThrough stream is not supported on node v0.8");s=new n}return this.output(s,u).run(),s},r.takeScreenshots=r.thumbnail=r.thumbnails=r.screenshot=r.screenshots=function(s,u){var f=this,l=this._currentInput.source;if(s=s||{count:1},typeof s=="number"&&(s={count:s}),"folder"in s||(s.folder=u||"."),"timestamps"in s&&(s.timemarks=s.timestamps),!("timemarks"in s)){if(!s.count)throw new Error("Cannot take screenshots: neither a count nor a timemark list are specified");var h=100/(1+s.count);s.timemarks=[];for(var c=0;c<s.count;c++)s.timemarks.push(h*(c+1)+"%")}if("size"in s){var m=s.size.match(/^(\d+)x(\d+)$/),v=s.size.match(/^(\d+)x\?$/),b=s.size.match(/^\?x(\d+)$/),T=s.size.match(/^(\d+)%$/);if(!m&&!v&&!b&&!T)throw new Error("Invalid size parameter: "+s.size)}var x;function y(g){x?g(null,x):f.ffprobe(function(D,N){x=N,g(D,N)})}return i.waterfall([function(D){if(s.timemarks.some(function(N){return(""+N).match(/^[\d.]+%$/)})){if(typeof l!="string")return D(new Error("Cannot compute screenshot timemarks with an input stream, please specify fixed timemarks"));y(function(N,E){if(N)D(N);else{var A=E.streams.reduce(function(p,C){return C.codec_type==="video"&&C.width*C.height>p.width*p.height?C:p},{width:0,height:0});if(A.width===0)return D(new Error("No video stream in input, cannot take screenshots"));var O=Number(A.duration);if(isNaN(O)&&(O=Number(E.format.duration)),isNaN(O))return D(new Error("Could not get input duration, please specify fixed timemarks"));s.timemarks=s.timemarks.map(function(p){return(""+p).match(/^([\d.]+)%$/)?O*parseFloat(p)/100:p}),D()}})}else D()},function(D){s.timemarks=s.timemarks.map(function(N){return a.timemarkToSeconds(N)}).sort(function(N,E){return N-E}),D()},function(D){var N=s.filename||"tn.png";if(N.indexOf(".")===-1&&(N+=".png"),s.timemarks.length>1&&!N.match(/%(s|0*i)/)){var E=e.extname(N);N=e.join(e.dirname(N),e.basename(N,E)+"_%i"+E)}D(null,N)},function(D,N){if(D.match(/%[bf]/)){if(typeof l!="string")return N(new Error("Cannot replace %f or %b when using an input stream"));D=D.replace(/%f/g,e.basename(l)).replace(/%b/g,e.basename(l,e.extname(l)))}N(null,D)},function(D,N){if(D.match(/%[whr]/)){if(m)return N(null,D,m[1],m[2]);y(function(E,A){if(E)return N(new Error("Could not determine video resolution to replace %w, %h or %r"));var O=A.streams.reduce(function(F,M){return M.codec_type==="video"&&M.width*M.height>F.width*F.height?M:F},{width:0,height:0});if(O.width===0)return N(new Error("No video stream in input, cannot replace %w, %h or %r"));var p=O.width,C=O.height;v?(C=C*Number(v[1])/p,p=Number(v[1])):b?(p=p*Number(b[1])/C,C=Number(b[1])):T&&(p=p*Number(T[1])/100,C=C*Number(T[1])/100),N(null,D,Math.round(p/2)*2,Math.round(C/2)*2)})}else N(null,D,-1,-1)},function(D,N,E,A){D=D.replace(/%r/g,"%wx%h").replace(/%w/g,N).replace(/%h/g,E),A(null,D)},function(D,N){var E=s.timemarks.map(function(A,O){return D.replace(/%s/g,a.timemarkToSeconds(A)).replace(/%(0*)i/g,function(p,C){var F=""+(O+1);return C.substr(0,Math.max(0,C.length+1-F.length))+F})});f.emit("filenames",E),N(null,E)},function(D,N){o.exists(s.folder,function(E){E?N(null,D):o.mkdir(s.folder,function(A){A?N(A):N(null,D)})})}],function(D,N){if(D)return f.emit("error",D);var E=s.timemarks.length,A,O=[A={filter:"split",options:E,outputs:[]}];if("size"in s){f.size(s.size);var p=f._currentOutput.sizeFilters.get().map(function(U,W){return W>0&&(U.inputs="size"+(W-1)),U.outputs="size"+W,U});A.inputs="size"+(p.length-1),O=p.concat(O),f._currentOutput.sizeFilters.clear()}for(var C=0,F=0;F<E;F++){var M="screen"+F;A.outputs.push(M),F===0&&(C=s.timemarks[F],f.seekInput(C)),f.output(e.join(s.folder,N[F])).frames(1).map(M),F>0&&f.seek(s.timemarks[F]-C)}f.complexFilter(O),f.run()}),this},r.mergeToFile=r.concatenate=r.concat=function(s,u){var f=this._inputs.filter(function(h){return!h.isStream})[0],l=this;return this.ffprobe(this._inputs.indexOf(f),function(h,c){if(h)return l.emit("error",h);var m=c.streams.some(function(b){return b.codec_type==="audio"}),v=c.streams.some(function(b){return b.codec_type==="video"});l.output(s,u).complexFilter({filter:"concat",options:{n:l._inputs.length,v:v?1:0,a:m?1:0}}).run()}),this}},Gt}var ba=Z,Ta=yt,ns=Be.EventEmitter,wn=Se;function te(o,e){if(!(this instanceof te))return new te(o,e);ns.call(this),typeof o=="object"&&!("readable"in o)?e=o:(e=e||{},e.source=o),this._inputs=[],e.source&&this.input(e.source),this._outputs=[],this.output();var n=this;["_global","_complexFilters"].forEach(function(i){n[i]=wn.args()}),e.stdoutLines="stdoutLines"in e?e.stdoutLines:100,e.presets=e.presets||e.preset||ba.join(__dirname,"presets"),e.niceness=e.niceness||e.priority||0,this.options=e,this.logger=e.logger||{debug:function(){},info:function(){},warn:function(){},error:function(){}}}Ta.inherits(te,ns);var Oa=te;te.prototype.clone=function(){var o=new te,e=this;return o.options=this.options,o.logger=this.logger,o._inputs=this._inputs.map(function(n){return{source:n.source,options:n.options.clone()}}),"target"in this._outputs[0]?(o._outputs=[],o.output()):(o._outputs=[o._currentOutput={flags:{}}],["audio","audioFilters","video","videoFilters","sizeFilters","options"].forEach(function(n){o._currentOutput[n]=e._currentOutput[n].clone()}),this._currentOutput.sizeData&&(o._currentOutput.sizeData={},wn.copy(this._currentOutput.sizeData,o._currentOutput.sizeData)),wn.copy(this._currentOutput.flags,o._currentOutput.flags)),["_global","_complexFilters"].forEach(function(n){o[n]=e[n].clone()}),o};ca()(te.prototype);fa()(te.prototype);la()(te.prototype);pa()(te.prototype);ha()(te.prototype);da()(te.prototype);ga()(te.prototype);ya()(te.prototype);va()(te.prototype);te.setFfmpegPath=function(o){new te().setFfmpegPath(o)};te.setFfprobePath=function(o){new te().setFfprobePath(o)};te.setFlvtoolPath=function(o){new te().setFlvtoolPath(o)};te.availableFilters=te.getAvailableFilters=function(o){new te().availableFilters(o)};te.availableCodecs=te.getAvailableCodecs=function(o){new te().availableCodecs(o)};te.availableFormats=te.getAvailableFormats=function(o){new te().availableFormats(o)};te.availableEncoders=te.getAvailableEncoders=function(o){new te().availableEncoders(o)};wa()(te.prototype);te.ffprobe=function(o){var e=new te(o);e.ffprobe.apply(e,Array.prototype.slice.call(arguments,1))};Ea()(te.prototype);var is=Oa;const Ze=bt(is);var ht={exports:{}},Kt={exports:{}},pi;function os(){return pi||(pi=1,function(o){let e={};try{e=require("electron")}catch{}e.ipcRenderer&&n(e),o.exports=n;function n({contextBridge:i,ipcRenderer:a}){if(!a)return;a.on("__ELECTRON_LOG_IPC__",(r,s)=>{window.postMessage({cmd:"message",...s})}),a.invoke("__ELECTRON_LOG__",{cmd:"getOptions"}).catch(r=>console.error(new Error(`electron-log isn't initialized in the main process. Please call log.initialize() before. ${r.message}`)));const t={sendToMain(r){try{a.send("__ELECTRON_LOG__",r)}catch(s){console.error("electronLog.sendToMain ",s,"data:",r),a.send("__ELECTRON_LOG__",{cmd:"errorHandler",error:{message:s==null?void 0:s.message,stack:s==null?void 0:s.stack},errorName:"sendToMain"})}},log(...r){t.sendToMain({data:r,level:"info"})}};for(const r of["error","warn","info","verbose","debug","silly"])t[r]=(...s)=>t.sendToMain({data:s,level:r});if(i&&process.contextIsolated)try{i.exposeInMainWorld("__electronLog",t)}catch{}typeof window=="object"?window.__electronLog=t:__electronLog=t}}(Kt)),Kt.exports}var Yt={exports:{}},Jt,hi;function Ca(){if(hi)return Jt;hi=1,Jt=o;function o(e){return Object.defineProperties(n,{defaultLabel:{value:"",writable:!0},labelPadding:{value:!0,writable:!0},maxLabelLength:{value:0,writable:!0},labelLength:{get(){switch(typeof n.labelPadding){case"boolean":return n.labelPadding?n.maxLabelLength:0;case"number":return n.labelPadding;default:return 0}}}});function n(i){n.maxLabelLength=Math.max(n.maxLabelLength,i.length);const a={};for(const t of e.levels)a[t]=(...r)=>e.logData(r,{level:t,scope:i});return a.log=a.info,a}}return Jt}var Qt,di;function Da(){if(di)return Qt;di=1;class o{constructor({processMessage:n}){this.processMessage=n,this.buffer=[],this.enabled=!1,this.begin=this.begin.bind(this),this.commit=this.commit.bind(this),this.reject=this.reject.bind(this)}addMessage(n){this.buffer.push(n)}begin(){this.enabled=[]}commit(){this.enabled=!1,this.buffer.forEach(n=>this.processMessage(n)),this.buffer=[]}reject(){this.enabled=!1,this.buffer=[]}}return Qt=o,Qt}var Zt,mi;function ss(){if(mi)return Zt;mi=1;const o=Ca(),e=Da(),i=class i{constructor({allowUnknownLevel:t=!1,dependencies:r={},errorHandler:s,eventLogger:u,initializeFn:f,isDev:l=!1,levels:h=["error","warn","info","verbose","debug","silly"],logId:c,transportFactories:m={},variables:v}={}){Q(this,"dependencies",{});Q(this,"errorHandler",null);Q(this,"eventLogger",null);Q(this,"functions",{});Q(this,"hooks",[]);Q(this,"isDev",!1);Q(this,"levels",null);Q(this,"logId",null);Q(this,"scope",null);Q(this,"transports",{});Q(this,"variables",{});this.addLevel=this.addLevel.bind(this),this.create=this.create.bind(this),this.initialize=this.initialize.bind(this),this.logData=this.logData.bind(this),this.processMessage=this.processMessage.bind(this),this.allowUnknownLevel=t,this.buffering=new e(this),this.dependencies=r,this.initializeFn=f,this.isDev=l,this.levels=h,this.logId=c,this.scope=o(this),this.transportFactories=m,this.variables=v||{};for(const b of this.levels)this.addLevel(b,!1);this.log=this.info,this.functions.log=this.log,this.errorHandler=s,s==null||s.setOptions({...r,logFn:this.error}),this.eventLogger=u,u==null||u.setOptions({...r,logger:this});for(const[b,T]of Object.entries(m))this.transports[b]=T(this,r);i.instances[c]=this}static getInstance({logId:t}){return this.instances[t]||this.instances.default}addLevel(t,r=this.levels.length){r!==!1&&this.levels.splice(r,0,t),this[t]=(...s)=>this.logData(s,{level:t}),this.functions[t]=this[t]}catchErrors(t){return this.processMessage({data:["log.catchErrors is deprecated. Use log.errorHandler instead"],level:"warn"},{transports:["console"]}),this.errorHandler.startCatching(t)}create(t){return typeof t=="string"&&(t={logId:t}),new i({dependencies:this.dependencies,errorHandler:this.errorHandler,initializeFn:this.initializeFn,isDev:this.isDev,transportFactories:this.transportFactories,variables:{...this.variables},...t})}compareLevels(t,r,s=this.levels){const u=s.indexOf(t),f=s.indexOf(r);return f===-1||u===-1?!0:f<=u}initialize(t={}){this.initializeFn({logger:this,...this.dependencies,...t})}logData(t,r={}){this.buffering.enabled?this.buffering.addMessage({data:t,date:new Date,...r}):this.processMessage({data:t,...r})}processMessage(t,{transports:r=this.transports}={}){if(t.cmd==="errorHandler"){this.errorHandler.handle(t.error,{errorName:t.errorName,processType:"renderer",showDialog:!!t.showDialog});return}let s=t.level;this.allowUnknownLevel||(s=this.levels.includes(t.level)?t.level:"info");const u={date:new Date,logId:this.logId,...t,level:s,variables:{...this.variables,...t.variables}};for(const[f,l]of this.transportEntries(r))if(!(typeof l!="function"||l.level===!1)&&this.compareLevels(l.level,t.level))try{const h=this.hooks.reduce((c,m)=>c&&m(c,l,f),u);h&&l({...h,data:[...h.data]})}catch(h){this.processInternalErrorFn(h)}}processInternalErrorFn(t){}transportEntries(t=this.transports){return(Array.isArray(t)?t:Object.entries(t)).map(s=>{switch(typeof s){case"string":return this.transports[s]?[s,this.transports[s]]:null;case"function":return[s.name,s];default:return Array.isArray(s)?s:null}}).filter(Boolean)}};Q(i,"instances",{});let n=i;return Zt=n,Zt}var er,gi;function Aa(){if(gi)return er;gi=1;const o=console.error;class e{constructor({logFn:i=null}={}){Q(this,"logFn",null);Q(this,"onError",null);Q(this,"showDialog",!1);Q(this,"preventDefault",!0);this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.startCatching=this.startCatching.bind(this),this.logFn=i}handle(i,{logFn:a=this.logFn,errorName:t="",onError:r=this.onError,showDialog:s=this.showDialog}={}){try{(r==null?void 0:r({error:i,errorName:t,processType:"renderer"}))!==!1&&a({error:i,errorName:t,showDialog:s})}catch{o(i)}}setOptions({logFn:i,onError:a,preventDefault:t,showDialog:r}){typeof i=="function"&&(this.logFn=i),typeof a=="function"&&(this.onError=a),typeof t=="boolean"&&(this.preventDefault=t),typeof r=="boolean"&&(this.showDialog=r)}startCatching({onError:i,showDialog:a}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:i,showDialog:a}),window.addEventListener("error",t=>{var r;this.preventDefault&&((r=t.preventDefault)==null||r.call(t)),this.handleError(t.error||t)}),window.addEventListener("unhandledrejection",t=>{var r;this.preventDefault&&((r=t.preventDefault)==null||r.call(t)),this.handleRejection(t.reason||t)}))}handleError(i){this.handle(i,{errorName:"Unhandled"})}handleRejection(i){const a=i instanceof Error?i:new Error(JSON.stringify(i));this.handle(a,{errorName:"Unhandled rejection"})}}return er=e,er}var tr,yi;function Ue(){if(yi)return tr;yi=1,tr={transform:o};function o({logger:e,message:n,transport:i,initialData:a=(n==null?void 0:n.data)||[],transforms:t=i==null?void 0:i.transforms}){return t.reduce((r,s)=>typeof s=="function"?s({data:r,logger:e,message:n,transport:i}):r,a)}return tr}var rr,vi;function Na(){if(vi)return rr;vi=1;const{transform:o}=Ue();rr=n;const e={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};function n(a){return Object.assign(t,{format:"{h}:{i}:{s}.{ms}{scope} › {text}",transforms:[i],writeFn({message:{level:r,data:s}}){const u=e[r]||e.info;setTimeout(()=>u(...s))}});function t(r){t.writeFn({message:{...r,data:o({logger:a,message:r,transport:t})}})}}function i({data:a=[],logger:t={},message:r={},transport:s={}}){if(typeof s.format=="function")return s.format({data:a,level:(r==null?void 0:r.level)||"info",logger:t,message:r,transport:s});if(typeof s.format!="string")return a;a.unshift(s.format),typeof a[1]=="string"&&a[1].match(/%[1cdfiOos]/)&&(a=[`${a[0]} ${a[1]}`,...a.slice(2)]);const u=r.date||new Date;return a[0]=a[0].replace(/\{(\w+)}/g,(f,l)=>{var h,c;switch(l){case"level":return r.level;case"logId":return r.logId;case"scope":{const m=r.scope||((h=t.scope)==null?void 0:h.defaultLabel);return m?` (${m})`:""}case"text":return"";case"y":return u.getFullYear().toString(10);case"m":return(u.getMonth()+1).toString(10).padStart(2,"0");case"d":return u.getDate().toString(10).padStart(2,"0");case"h":return u.getHours().toString(10).padStart(2,"0");case"i":return u.getMinutes().toString(10).padStart(2,"0");case"s":return u.getSeconds().toString(10).padStart(2,"0");case"ms":return u.getMilliseconds().toString(10).padStart(3,"0");case"iso":return u.toISOString();default:return((c=r.variables)==null?void 0:c[l])||f}}).trim(),a}return rr}var nr,wi;function Ia(){if(wi)return nr;wi=1;const{transform:o}=Ue();nr=n;const e=new Set([Promise,WeakMap,WeakSet]);function n(t){return Object.assign(r,{depth:5,transforms:[a]});function r(s){if(!window.__electronLog){t.processMessage({data:["electron-log: logger isn't initialized in the main process"],level:"error"},{transports:["console"]});return}try{const u=o({initialData:s,logger:t,message:s,transport:r});__electronLog.sendToMain(u)}catch(u){t.transports.console({data:["electronLog.transports.ipc",u,"data:",s.data],level:"error"})}}}function i(t){return Object(t)!==t}function a({data:t,depth:r,seen:s=new WeakSet,transport:u={}}={}){const f=r||u.depth||5;return s.has(t)?"[Circular]":f<1?i(t)?t:Array.isArray(t)?"[Array]":`[${typeof t}]`:["function","symbol"].includes(typeof t)?t.toString():i(t)?t:e.has(t.constructor)?`[${t.constructor.name}]`:Array.isArray(t)?t.map(l=>a({data:l,depth:f-1,seen:s})):t instanceof Date?t.toISOString():t instanceof Error?t.stack:t instanceof Map?new Map(Array.from(t).map(([l,h])=>[a({data:l,depth:f-1,seen:s}),a({data:h,depth:f-1,seen:s})])):t instanceof Set?new Set(Array.from(t).map(l=>a({data:l,depth:f-1,seen:s}))):(s.add(t),Object.fromEntries(Object.entries(t).map(([l,h])=>[l,a({data:h,depth:f-1,seen:s})])))}return nr}var Ei;function _a(){return Ei||(Ei=1,function(o){const e=ss(),n=Aa(),i=Na(),a=Ia();o.exports=t(),o.exports.Logger=e,o.exports.default=o.exports;function t(){const r=new e({allowUnknownLevel:!0,errorHandler:new n,initializeFn:()=>{},logId:"default",transportFactories:{console:i,ipc:a},variables:{processType:"renderer"}});return r.errorHandler.setOptions({logFn({error:s,errorName:u,showDialog:f}){r.transports.console({data:[u,s].filter(Boolean),level:"error"}),r.transports.ipc({cmd:"errorHandler",error:{cause:s==null?void 0:s.cause,code:s==null?void 0:s.code,name:s==null?void 0:s.name,message:s==null?void 0:s.message,stack:s==null?void 0:s.stack},errorName:u,logId:r.logId,showDialog:f})}}),typeof window=="object"&&window.addEventListener("message",s=>{const{cmd:u,logId:f,...l}=s.data||{},h=e.getInstance({logId:f});u==="message"&&h.processMessage(l,{transports:["console"]})}),new Proxy(r,{get(s,u){return typeof s[u]<"u"?s[u]:(...f)=>r.logData(f,{level:u})}})}}(Yt)),Yt.exports}var ir,bi;function xa(){if(bi)return ir;bi=1;const o=ae,e=Z;ir={findAndReadPackageJson:n,tryReadJsonAt:i};function n(){return i(r())||i(t())||i(process.resourcesPath,"app.asar")||i(process.resourcesPath,"app")||i(process.cwd())||{name:void 0,version:void 0}}function i(...s){if(s[0])try{const u=e.join(...s),f=a("package.json",u);if(!f)return;const l=JSON.parse(o.readFileSync(f,"utf8")),h=(l==null?void 0:l.productName)||(l==null?void 0:l.name);return!h||h.toLowerCase()==="electron"?void 0:h?{name:h,version:l==null?void 0:l.version}:void 0}catch{return}}function a(s,u){let f=u;for(;;){const l=e.parse(f),h=l.root,c=l.dir;if(o.existsSync(e.join(f,s)))return e.resolve(e.join(f,s));if(f===h)return null;f=c}}function t(){const s=process.argv.filter(f=>f.indexOf("--user-data-dir=")===0);return s.length===0||typeof s[0]!="string"?null:s[0].replace("--user-data-dir=","")}function r(){var s;try{return(s=require.main)==null?void 0:s.filename}catch{return}}return ir}var or,Ti;function as(){if(Ti)return or;Ti=1;const o=vt,e=$e,n=Z,i=xa();class a{constructor(){Q(this,"appName");Q(this,"appPackageJson");Q(this,"platform",process.platform)}getAppLogPath(r=this.getAppName()){return this.platform==="darwin"?n.join(this.getSystemPathHome(),"Library/Logs",r):n.join(this.getAppUserDataPath(r),"logs")}getAppName(){var s;const r=this.appName||((s=this.getAppPackageJson())==null?void 0:s.name);if(!r)throw new Error("electron-log can't determine the app name. It tried these methods:\n1. Use `electron.app.name`\n2. Use productName or name from the nearest package.json`\nYou can also set it through log.transports.file.setAppName()");return r}getAppPackageJson(){return typeof this.appPackageJson!="object"&&(this.appPackageJson=i.findAndReadPackageJson()),this.appPackageJson}getAppUserDataPath(r=this.getAppName()){return r?n.join(this.getSystemPathAppData(),r):void 0}getAppVersion(){var r;return(r=this.getAppPackageJson())==null?void 0:r.version}getElectronLogPath(){return this.getAppLogPath()}getMacOsVersion(){const r=Number(e.release().split(".")[0]);return r<=19?`10.${r-4}`:r-9}getOsVersion(){let r=e.type().replace("_"," "),s=e.release();return r==="Darwin"&&(r="macOS",s=this.getMacOsVersion()),`${r} ${s}`}getPathVariables(){const r=this.getAppName(),s=this.getAppVersion(),u=this;return{appData:this.getSystemPathAppData(),appName:r,appVersion:s,get electronDefaultDir(){return u.getElectronLogPath()},home:this.getSystemPathHome(),libraryDefaultDir:this.getAppLogPath(r),libraryTemplate:this.getAppLogPath("{appName}"),temp:this.getSystemPathTemp(),userData:this.getAppUserDataPath(r)}}getSystemPathAppData(){const r=this.getSystemPathHome();switch(this.platform){case"darwin":return n.join(r,"Library/Application Support");case"win32":return process.env.APPDATA||n.join(r,"AppData/Roaming");default:return process.env.XDG_CONFIG_HOME||n.join(r,".config")}}getSystemPathHome(){var r;return((r=e.homedir)==null?void 0:r.call(e))||process.env.HOME}getSystemPathTemp(){return e.tmpdir()}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:void 0,os:this.getOsVersion()}}isDev(){return process.env.NODE_ENV==="development"||process.env.ELECTRON_IS_DEV==="1"}isElectron(){return!!process.versions.electron}onAppEvent(r,s){}onAppReady(r){r()}onEveryWebContentsEvent(r,s){}onIpc(r,s){}onIpcInvoke(r,s){}openUrl(r,s=console.error){const f={darwin:"open",win32:"start",linux:"xdg-open"}[process.platform]||"xdg-open";o.exec(`${f} ${r}`,{},l=>{l&&s(l)})}setAppName(r){this.appName=r}setPlatform(r){this.platform=r}setPreloadFileForSessions({filePath:r,includeFutureSession:s=!0,getSessions:u=()=>[]}){}sendIpc(r,s){}showErrorBox(r,s){}}return or=a,or}var sr,Oi;function Fa(){if(Oi)return sr;Oi=1;const o=Z,e=as();class n extends e{constructor({electron:t}={}){super();Q(this,"electron");this.electron=t}getAppName(){var r,s;let t;try{t=this.appName||((r=this.electron.app)==null?void 0:r.name)||((s=this.electron.app)==null?void 0:s.getName())}catch{}return t||super.getAppName()}getAppUserDataPath(t){return this.getPath("userData")||super.getAppUserDataPath(t)}getAppVersion(){var r;let t;try{t=(r=this.electron.app)==null?void 0:r.getVersion()}catch{}return t||super.getAppVersion()}getElectronLogPath(){return this.getPath("logs")||super.getElectronLogPath()}getPath(t){var r;try{return(r=this.electron.app)==null?void 0:r.getPath(t)}catch{return}}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:`Electron ${process.versions.electron}`,os:this.getOsVersion()}}getSystemPathAppData(){return this.getPath("appData")||super.getSystemPathAppData()}isDev(){var t;return((t=this.electron.app)==null?void 0:t.isPackaged)!==void 0?!this.electron.app.isPackaged:typeof process.execPath=="string"?o.basename(process.execPath).toLowerCase().startsWith("electron"):super.isDev()}onAppEvent(t,r){var s;return(s=this.electron.app)==null||s.on(t,r),()=>{var u;(u=this.electron.app)==null||u.off(t,r)}}onAppReady(t){var r,s,u;(r=this.electron.app)!=null&&r.isReady()?t():(s=this.electron.app)!=null&&s.once?(u=this.electron.app)==null||u.once("ready",t):t()}onEveryWebContentsEvent(t,r){var u,f,l;return(f=(u=this.electron.webContents)==null?void 0:u.getAllWebContents())==null||f.forEach(h=>{h.on(t,r)}),(l=this.electron.app)==null||l.on("web-contents-created",s),()=>{var h,c;(h=this.electron.webContents)==null||h.getAllWebContents().forEach(m=>{m.off(t,r)}),(c=this.electron.app)==null||c.off("web-contents-created",s)};function s(h,c){c.on(t,r)}}onIpc(t,r){var s;(s=this.electron.ipcMain)==null||s.on(t,r)}onIpcInvoke(t,r){var s,u;(u=(s=this.electron.ipcMain)==null?void 0:s.handle)==null||u.call(s,t,r)}openUrl(t,r=console.error){var s;(s=this.electron.shell)==null||s.openExternal(t).catch(r)}setPreloadFileForSessions({filePath:t,includeFutureSession:r=!0,getSessions:s=()=>{var u;return[(u=this.electron.session)==null?void 0:u.defaultSession]}}){for(const f of s().filter(Boolean))u(f);r&&this.onAppEvent("session-created",f=>{u(f)});function u(f){typeof f.registerPreloadScript=="function"?f.registerPreloadScript({filePath:t,id:"electron-log-preload",type:"frame"}):f.setPreloads([...f.getPreloads(),t])}}sendIpc(t,r){var s,u;(u=(s=this.electron.BrowserWindow)==null?void 0:s.getAllWindows())==null||u.forEach(f=>{var l,h;((l=f.webContents)==null?void 0:l.isDestroyed())===!1&&((h=f.webContents)==null?void 0:h.isCrashed())===!1&&f.webContents.send(t,r)})}showErrorBox(t,r){var s;(s=this.electron.dialog)==null||s.showErrorBox(t,r)}}return sr=n,sr}var ar,Ci;function Sa(){if(Ci)return ar;Ci=1;const o=ae,e=$e,n=Z,i=os();ar={initialize({externalApi:r,getSessions:s,includeFutureSession:u,logger:f,preload:l=!0,spyRendererConsole:h=!1}){r.onAppReady(()=>{try{l&&a({externalApi:r,getSessions:s,includeFutureSession:u,preloadOption:l}),h&&t({externalApi:r,logger:f})}catch(c){f.warn(c)}})}};function a({externalApi:r,getSessions:s,includeFutureSession:u,preloadOption:f}){let l=typeof f=="string"?f:void 0;try{l=n.resolve(__dirname,"../renderer/electron-log-preload.js")}catch{}if(!l||!o.existsSync(l)){l=n.join(r.getAppUserDataPath()||e.tmpdir(),"electron-log-preload.js");const h=`
      try {
        (${i.toString()})(require('electron'));
      } catch(e) {
        console.error(e);
      }
    `;o.writeFileSync(l,h,"utf8")}r.setPreloadFileForSessions({filePath:l,includeFutureSession:u,getSessions:s})}function t({externalApi:r,logger:s}){const u=["debug","info","warn","error"];r.onEveryWebContentsEvent("console-message",(f,l,h)=>{s.processMessage({data:[h],level:u[l],variables:{processType:"renderer"}})})}return ar}var ur,Di;function Pa(){if(Di)return ur;Di=1;class o{constructor({externalApi:i,logFn:a=void 0,onError:t=void 0,showDialog:r=void 0}={}){Q(this,"externalApi");Q(this,"isActive",!1);Q(this,"logFn");Q(this,"onError");Q(this,"showDialog",!0);this.createIssue=this.createIssue.bind(this),this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.setOptions({externalApi:i,logFn:a,onError:t,showDialog:r}),this.startCatching=this.startCatching.bind(this),this.stopCatching=this.stopCatching.bind(this)}handle(i,{logFn:a=this.logFn,onError:t=this.onError,processType:r="browser",showDialog:s=this.showDialog,errorName:u=""}={}){var f;i=e(i);try{if(typeof t=="function"){const l=((f=this.externalApi)==null?void 0:f.getVersions())||{},h=this.createIssue;if(t({createIssue:h,error:i,errorName:u,processType:r,versions:l})===!1)return}u?a(u,i):a(i),s&&!u.includes("rejection")&&this.externalApi&&this.externalApi.showErrorBox(`A JavaScript error occurred in the ${r} process`,i.stack)}catch{console.error(i)}}setOptions({externalApi:i,logFn:a,onError:t,showDialog:r}){typeof i=="object"&&(this.externalApi=i),typeof a=="function"&&(this.logFn=a),typeof t=="function"&&(this.onError=t),typeof r=="boolean"&&(this.showDialog=r)}startCatching({onError:i,showDialog:a}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:i,showDialog:a}),process.on("uncaughtException",this.handleError),process.on("unhandledRejection",this.handleRejection))}stopCatching(){this.isActive=!1,process.removeListener("uncaughtException",this.handleError),process.removeListener("unhandledRejection",this.handleRejection)}createIssue(i,a){var t;(t=this.externalApi)==null||t.openUrl(`${i}?${new URLSearchParams(a).toString()}`)}handleError(i){this.handle(i,{errorName:"Unhandled"})}handleRejection(i){const a=i instanceof Error?i:new Error(JSON.stringify(i));this.handle(a,{errorName:"Unhandled rejection"})}}function e(n){if(n instanceof Error)return n;if(n&&typeof n=="object"){if(n.message)return Object.assign(new Error(n.message),n);try{return new Error(JSON.stringify(n))}catch(i){return new Error(`Couldn't normalize error ${String(n)}: ${i}`)}}return new Error(`Can't normalize error ${String(n)}`)}return ur=o,ur}var cr,Ai;function La(){if(Ai)return cr;Ai=1;class o{constructor(n={}){Q(this,"disposers",[]);Q(this,"format","{eventSource}#{eventName}:");Q(this,"formatters",{app:{"certificate-error":({args:n})=>this.arrayToObject(n.slice(1,4),["url","error","certificate"]),"child-process-gone":({args:n})=>n.length===1?n[0]:n,"render-process-gone":({args:[n,i]})=>i&&typeof i=="object"?{...i,...this.getWebContentsDetails(n)}:[]},webContents:{"console-message":({args:[n,i,a,t]})=>{if(!(n<3))return{message:i,source:`${t}:${a}`}},"did-fail-load":({args:n})=>this.arrayToObject(n,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"did-fail-provisional-load":({args:n})=>this.arrayToObject(n,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"plugin-crashed":({args:n})=>this.arrayToObject(n,["name","version"]),"preload-error":({args:n})=>this.arrayToObject(n,["preloadPath","error"])}});Q(this,"events",{app:{"certificate-error":!0,"child-process-gone":!0,"render-process-gone":!0},webContents:{"did-fail-load":!0,"did-fail-provisional-load":!0,"plugin-crashed":!0,"preload-error":!0,unresponsive:!0}});Q(this,"externalApi");Q(this,"level","error");Q(this,"scope","");this.setOptions(n)}setOptions({events:n,externalApi:i,level:a,logger:t,format:r,formatters:s,scope:u}){typeof n=="object"&&(this.events=n),typeof i=="object"&&(this.externalApi=i),typeof a=="string"&&(this.level=a),typeof t=="object"&&(this.logger=t),(typeof r=="string"||typeof r=="function")&&(this.format=r),typeof s=="object"&&(this.formatters=s),typeof u=="string"&&(this.scope=u)}startLogging(n={}){this.setOptions(n),this.disposeListeners();for(const i of this.getEventNames(this.events.app))this.disposers.push(this.externalApi.onAppEvent(i,(...a)=>{this.handleEvent({eventSource:"app",eventName:i,handlerArgs:a})}));for(const i of this.getEventNames(this.events.webContents))this.disposers.push(this.externalApi.onEveryWebContentsEvent(i,(...a)=>{this.handleEvent({eventSource:"webContents",eventName:i,handlerArgs:a})}))}stopLogging(){this.disposeListeners()}arrayToObject(n,i){const a={};return i.forEach((t,r)=>{a[t]=n[r]}),n.length>i.length&&(a.unknownArgs=n.slice(i.length)),a}disposeListeners(){this.disposers.forEach(n=>n()),this.disposers=[]}formatEventLog({eventName:n,eventSource:i,handlerArgs:a}){var h;const[t,...r]=a;if(typeof this.format=="function")return this.format({args:r,event:t,eventName:n,eventSource:i});const s=(h=this.formatters[i])==null?void 0:h[n];let u=r;if(typeof s=="function"&&(u=s({args:r,event:t,eventName:n,eventSource:i})),!u)return;const f={};return Array.isArray(u)?f.args=u:typeof u=="object"&&Object.assign(f,u),i==="webContents"&&Object.assign(f,this.getWebContentsDetails(t==null?void 0:t.sender)),[this.format.replace("{eventSource}",i==="app"?"App":"WebContents").replace("{eventName}",n),f]}getEventNames(n){return!n||typeof n!="object"?[]:Object.entries(n).filter(([i,a])=>a).map(([i])=>i)}getWebContentsDetails(n){if(!(n!=null&&n.loadURL))return{};try{return{webContents:{id:n.id,url:n.getURL()}}}catch{return{}}}handleEvent({eventName:n,eventSource:i,handlerArgs:a}){var r;const t=this.formatEventLog({eventName:n,eventSource:i,handlerArgs:a});if(t){const s=this.scope?this.logger.scope(this.scope):this.logger;(r=s==null?void 0:s[this.level])==null||r.call(s,...t)}}}return cr=o,cr}var fr,Ni;function us(){if(Ni)return fr;Ni=1;const{transform:o}=Ue();fr={concatFirstStringElements:e,formatScope:i,formatText:t,formatVariables:a,timeZoneFromOffset:n,format({message:r,logger:s,transport:u,data:f=r==null?void 0:r.data}){switch(typeof u.format){case"string":return o({message:r,logger:s,transforms:[a,i,t],transport:u,initialData:[u.format,...f]});case"function":return u.format({data:f,level:(r==null?void 0:r.level)||"info",logger:s,message:r,transport:u});default:return f}}};function e({data:r}){return typeof r[0]!="string"||typeof r[1]!="string"||r[0].match(/%[1cdfiOos]/)?r:[`${r[0]} ${r[1]}`,...r.slice(2)]}function n(r){const s=Math.abs(r),u=r>0?"-":"+",f=Math.floor(s/60).toString().padStart(2,"0"),l=(s%60).toString().padStart(2,"0");return`${u}${f}:${l}`}function i({data:r,logger:s,message:u}){const{defaultLabel:f,labelLength:l}=(s==null?void 0:s.scope)||{},h=r[0];let c=u.scope;c||(c=f);let m;return c===""?m=l>0?"".padEnd(l+3):"":typeof c=="string"?m=` (${c})`.padEnd(l+3):m="",r[0]=h.replace("{scope}",m),r}function a({data:r,message:s}){let u=r[0];if(typeof u!="string")return r;u=u.replace("{level}]",`${s.level}]`.padEnd(6," "));const f=s.date||new Date;return r[0]=u.replace(/\{(\w+)}/g,(l,h)=>{var c;switch(h){case"level":return s.level||"info";case"logId":return s.logId;case"y":return f.getFullYear().toString(10);case"m":return(f.getMonth()+1).toString(10).padStart(2,"0");case"d":return f.getDate().toString(10).padStart(2,"0");case"h":return f.getHours().toString(10).padStart(2,"0");case"i":return f.getMinutes().toString(10).padStart(2,"0");case"s":return f.getSeconds().toString(10).padStart(2,"0");case"ms":return f.getMilliseconds().toString(10).padStart(3,"0");case"z":return n(f.getTimezoneOffset());case"iso":return f.toISOString();default:return((c=s.variables)==null?void 0:c[h])||l}}).trim(),r}function t({data:r}){const s=r[0];if(typeof s!="string")return r;if(s.lastIndexOf("{text}")===s.length-6)return r[0]=s.replace(/\s?{text}/,""),r[0]===""&&r.shift(),r;const f=s.split("{text}");let l=[];return f[0]!==""&&l.push(f[0]),l=l.concat(r.slice(1)),f[1]!==""&&l.push(f[1]),l}return fr}var lr={exports:{}},Ii;function Tt(){return Ii||(Ii=1,function(o){const e=yt;o.exports={serialize:i,maxDepth({data:a,transport:t,depth:r=(t==null?void 0:t.depth)??6}){if(!a)return a;if(r<1)return Array.isArray(a)?"[array]":typeof a=="object"&&a?"[object]":a;if(Array.isArray(a))return a.map(u=>o.exports.maxDepth({data:u,depth:r-1}));if(typeof a!="object"||a&&typeof a.toISOString=="function")return a;if(a===null)return null;if(a instanceof Error)return a;const s={};for(const u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=o.exports.maxDepth({data:a[u],depth:r-1}));return s},toJSON({data:a}){return JSON.parse(JSON.stringify(a,n()))},toString({data:a,transport:t}){const r=(t==null?void 0:t.inspectOptions)||{},s=a.map(u=>{if(u!==void 0)try{const f=JSON.stringify(u,n(),"  ");return f===void 0?void 0:JSON.parse(f)}catch{return u}});return e.formatWithOptions(r,...s)}};function n(a={}){const t=new WeakSet;return function(r,s){if(typeof s=="object"&&s!==null){if(t.has(s))return;t.add(s)}return i(r,s,a)}}function i(a,t,r={}){const s=(r==null?void 0:r.serializeMapAndSet)!==!1;return t instanceof Error?t.stack:t&&(typeof t=="function"?`[function] ${t.toString()}`:t instanceof Date?t.toISOString():s&&t instanceof Map&&Object.fromEntries?Object.fromEntries(t):s&&t instanceof Set&&Array.from?Array.from(t):t)}}(lr)),lr.exports}var pr,_i;function Fn(){if(_i)return pr;_i=1,pr={transformStyles:i,applyAnsiStyles({data:a}){return i(a,e,n)},removeStyles({data:a}){return i(a,()=>"")}};const o={unset:"\x1B[0m",black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"};function e(a){const t=a.replace(/color:\s*(\w+).*/,"$1").toLowerCase();return o[t]||""}function n(a){return a+o.unset}function i(a,t,r){const s={};return a.reduce((u,f,l,h)=>{if(s[l])return u;if(typeof f=="string"){let c=l,m=!1;f=f.replace(/%[1cdfiOos]/g,v=>{if(c+=1,v!=="%c")return v;const b=h[c];return typeof b=="string"?(s[c]=!0,m=!0,t(b,f)):v}),m&&r&&(f=r(f))}return u.push(f),u},[])}return pr}var hr,xi;function Ma(){if(xi)return hr;xi=1;const{concatFirstStringElements:o,format:e}=us(),{maxDepth:n,toJSON:i}=Tt(),{applyAnsiStyles:a,removeStyles:t}=Fn(),{transform:r}=Ue(),s={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};hr=l;const f=`%c{h}:{i}:{s}.{ms}{scope}%c ${process.platform==="win32"?">":"›"} {text}`;Object.assign(l,{DEFAULT_FORMAT:f});function l(b){return Object.assign(T,{format:f,level:"silly",transforms:[h,e,m,o,n,i],useStyles:process.env.FORCE_STYLES,writeFn({message:x}){(s[x.level]||s.info)(...x.data)}});function T(x){const y=r({logger:b,message:x,transport:T});T.writeFn({message:{...x,data:y}})}}function h({data:b,message:T,transport:x}){return x.format!==f?b:[`color:${v(T.level)}`,"color:unset",...b]}function c(b,T){if(typeof b=="boolean")return b;const y=T==="error"||T==="warn"?process.stderr:process.stdout;return y&&y.isTTY}function m(b){const{message:T,transport:x}=b;return(c(x.useStyles,T.level)?a:t)(b)}function v(b){const T={error:"red",warn:"yellow",info:"cyan",default:"unset"};return T[b]||T.default}return hr}var dr,Fi;function cs(){if(Fi)return dr;Fi=1;const o=Be,e=ae,n=$e;class i extends o{constructor({path:s,writeOptions:u={encoding:"utf8",flag:"a",mode:438},writeAsync:f=!1}){super();Q(this,"asyncWriteQueue",[]);Q(this,"bytesWritten",0);Q(this,"hasActiveAsyncWriting",!1);Q(this,"path",null);Q(this,"initialSize");Q(this,"writeOptions",null);Q(this,"writeAsync",!1);this.path=s,this.writeOptions=u,this.writeAsync=f}get size(){return this.getSize()}clear(){try{return e.writeFileSync(this.path,"",{mode:this.writeOptions.mode,flag:"w"}),this.reset(),!0}catch(s){return s.code==="ENOENT"?!0:(this.emit("error",s,this),!1)}}crop(s){try{const u=a(this.path,s||4096);this.clear(),this.writeLine(`[log cropped]${n.EOL}${u}`)}catch(u){this.emit("error",new Error(`Couldn't crop file ${this.path}. ${u.message}`),this)}}getSize(){if(this.initialSize===void 0)try{const s=e.statSync(this.path);this.initialSize=s.size}catch{this.initialSize=0}return this.initialSize+this.bytesWritten}increaseBytesWrittenCounter(s){this.bytesWritten+=Buffer.byteLength(s,this.writeOptions.encoding)}isNull(){return!1}nextAsyncWrite(){const s=this;if(this.hasActiveAsyncWriting||this.asyncWriteQueue.length===0)return;const u=this.asyncWriteQueue.join("");this.asyncWriteQueue=[],this.hasActiveAsyncWriting=!0,e.writeFile(this.path,u,this.writeOptions,f=>{s.hasActiveAsyncWriting=!1,f?s.emit("error",new Error(`Couldn't write to ${s.path}. ${f.message}`),this):s.increaseBytesWrittenCounter(u),s.nextAsyncWrite()})}reset(){this.initialSize=void 0,this.bytesWritten=0}toString(){return this.path}writeLine(s){if(s+=n.EOL,this.writeAsync){this.asyncWriteQueue.push(s),this.nextAsyncWrite();return}try{e.writeFileSync(this.path,s,this.writeOptions),this.increaseBytesWrittenCounter(s)}catch(u){this.emit("error",new Error(`Couldn't write to ${this.path}. ${u.message}`),this)}}}dr=i;function a(t,r){const s=Buffer.alloc(r),u=e.statSync(t),f=Math.min(u.size,r),l=Math.max(0,u.size-r),h=e.openSync(t,"r"),c=e.readSync(h,s,0,f,l);return e.closeSync(h),s.toString("utf8",0,c)}return dr}var mr,Si;function Ra(){if(Si)return mr;Si=1;const o=cs();class e extends o{clear(){}crop(){}getSize(){return 0}isNull(){return!0}writeLine(){}}return mr=e,mr}var gr,Pi;function ja(){if(Pi)return gr;Pi=1;const o=Be,e=ae,n=Z,i=cs(),a=Ra();class t extends o{constructor(){super();Q(this,"store",{});this.emitError=this.emitError.bind(this)}provide({filePath:u,writeOptions:f={},writeAsync:l=!1}){let h;try{if(u=n.resolve(u),this.store[u])return this.store[u];h=this.createFile({filePath:u,writeOptions:f,writeAsync:l})}catch(c){h=new a({path:u}),this.emitError(c,h)}return h.on("error",this.emitError),this.store[u]=h,h}createFile({filePath:u,writeOptions:f,writeAsync:l}){return this.testFileWriting({filePath:u,writeOptions:f}),new i({path:u,writeOptions:f,writeAsync:l})}emitError(u,f){this.emit("error",u,f)}testFileWriting({filePath:u,writeOptions:f}){e.mkdirSync(n.dirname(u),{recursive:!0}),e.writeFileSync(u,"",{flag:"a",mode:f.mode})}}return gr=t,gr}var yr,Li;function qa(){if(Li)return yr;Li=1;const o=ae,e=$e,n=Z,i=ja(),{transform:a}=Ue(),{removeStyles:t}=Fn(),{format:r,concatFirstStringElements:s}=us(),{toString:u}=Tt();yr=l;const f=new i;function l(c,{registry:m=f,externalApi:v}={}){let b;return m.listenerCount("error")<1&&m.on("error",(N,E)=>{y(`Can't write to ${E}`,N)}),Object.assign(T,{fileName:h(c.variables.processType),format:"[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}]{scope} {text}",getFile:g,inspectOptions:{depth:5},level:"silly",maxSize:1024**2,readAllLogs:D,sync:!0,transforms:[t,r,s,u],writeOptions:{flag:"a",mode:438,encoding:"utf8"},archiveLogFn(N){const E=N.toString(),A=n.parse(E);try{o.renameSync(E,n.join(A.dir,`${A.name}.old${A.ext}`))}catch(O){y("Could not rotate log",O);const p=Math.round(T.maxSize/4);N.crop(Math.min(p,256*1024))}},resolvePathFn(N){return n.join(N.libraryDefaultDir,N.fileName)},setAppName(N){c.dependencies.externalApi.setAppName(N)}});function T(N){const E=g(N);T.maxSize>0&&E.size>T.maxSize&&(T.archiveLogFn(E),E.reset());const O=a({logger:c,message:N,transport:T});E.writeLine(O)}function x(){b||(b=Object.create(Object.prototype,{...Object.getOwnPropertyDescriptors(v.getPathVariables()),fileName:{get(){return T.fileName},enumerable:!0}}),typeof T.archiveLog=="function"&&(T.archiveLogFn=T.archiveLog,y("archiveLog is deprecated. Use archiveLogFn instead")),typeof T.resolvePath=="function"&&(T.resolvePathFn=T.resolvePath,y("resolvePath is deprecated. Use resolvePathFn instead")))}function y(N,E=null,A="error"){const O=[`electron-log.transports.file: ${N}`];E&&O.push(E),c.transports.console({data:O,date:new Date,level:A})}function g(N){x();const E=T.resolvePathFn(b,N);return m.provide({filePath:E,writeAsync:!T.sync,writeOptions:T.writeOptions})}function D({fileFilter:N=E=>E.endsWith(".log")}={}){x();const E=n.dirname(T.resolvePathFn(b));return o.existsSync(E)?o.readdirSync(E).map(A=>n.join(E,A)).filter(N).map(A=>{try{return{path:A,lines:o.readFileSync(A,"utf8").split(e.EOL)}}catch{return null}}).filter(Boolean):[]}}function h(c=process.type){switch(c){case"renderer":return"renderer.log";case"worker":return"worker.log";default:return"main.log"}}return yr}var vr,Mi;function $a(){if(Mi)return vr;Mi=1;const{maxDepth:o,toJSON:e}=Tt(),{transform:n}=Ue();vr=i;function i(a,{externalApi:t}){return Object.assign(r,{depth:3,eventId:"__ELECTRON_LOG_IPC__",level:a.isDev?"silly":!1,transforms:[e,o]}),t!=null&&t.isElectron()?r:void 0;function r(s){var u;((u=s==null?void 0:s.variables)==null?void 0:u.processType)!=="renderer"&&(t==null||t.sendIpc(r.eventId,{...s,data:n({logger:a,message:s,transport:r})}))}}return vr}var wr,Ri;function ka(){if(Ri)return wr;Ri=1;const o=wt,e=Et,{transform:n}=Ue(),{removeStyles:i}=Fn(),{toJSON:a,maxDepth:t}=Tt();wr=r;function r(s){return Object.assign(u,{client:{name:"electron-application"},depth:6,level:!1,requestOptions:{},transforms:[i,a,t],makeBodyFn({message:f}){return JSON.stringify({client:u.client,data:f.data,date:f.date.getTime(),level:f.level,scope:f.scope,variables:f.variables})},processErrorFn({error:f}){s.processMessage({data:[`electron-log: can't POST ${u.url}`,f],level:"warn"},{transports:["console","file"]})},sendRequestFn({serverUrl:f,requestOptions:l,body:h}){const m=(f.startsWith("https:")?e:o).request(f,{method:"POST",...l,headers:{"Content-Type":"application/json","Content-Length":h.length,...l.headers}});return m.write(h),m.end(),m}});function u(f){if(!u.url)return;const l=u.makeBodyFn({logger:s,message:{...f,data:n({logger:s,message:f,transport:u})},transport:u}),h=u.sendRequestFn({serverUrl:u.url,requestOptions:u.requestOptions,body:Buffer.from(l,"utf8")});h.on("error",c=>u.processErrorFn({error:c,logger:s,message:f,request:h,transport:u}))}}return wr}var Er,ji;function fs(){if(ji)return Er;ji=1;const o=ss(),e=Pa(),n=La(),i=Ma(),a=qa(),t=$a(),r=ka();Er=s;function s({dependencies:u,initializeFn:f}){var h;const l=new o({dependencies:u,errorHandler:new e,eventLogger:new n,initializeFn:f,isDev:(h=u.externalApi)==null?void 0:h.isDev(),logId:"default",transportFactories:{console:i,file:a,ipc:t,remote:r},variables:{processType:"main"}});return l.default=l,l.Logger=o,l.processInternalErrorFn=c=>{l.transports.console.writeFn({message:{data:["Unhandled electron-log error",c],level:"error"}})},l}return Er}var br,qi;function Ba(){if(qi)return br;qi=1;const o=re,e=Fa(),{initialize:n}=Sa(),i=fs(),a=new e({electron:o}),t=i({dependencies:{externalApi:a},initializeFn:n});br=t,a.onIpc("__ELECTRON_LOG__",(s,u)=>{u.scope&&t.Logger.getInstance(u).scope(u.scope);const f=new Date(u.date);r({...u,date:f.getTime()?f:new Date})}),a.onIpcInvoke("__ELECTRON_LOG__",(s,{cmd:u="",logId:f})=>{switch(u){case"getOptions":return{levels:t.Logger.getInstance({logId:f}).levels,logId:f};default:return r({data:[`Unknown cmd '${u}'`],level:"error"}),{}}});function r(s){var u;(u=t.Logger.getInstance(s))==null||u.processMessage(s)}return br}var Tr,$i;function Ua(){if($i)return Tr;$i=1;const o=as(),e=fs(),n=new o;return Tr=e({dependencies:{externalApi:n}}),Tr}const Xa=typeof process>"u"||process.type==="renderer"||process.type==="worker",Va=typeof process=="object"&&process.type==="browser";Xa?(os(),ht.exports=_a()):Va?ht.exports=Ba():ht.exports=Ua();var za=ht.exports;const se=bt(za),ki=require("iconv-lite");function Wa(o){try{const e=ki.decode(Buffer.from(o,"binary"),"gbk");return/[^\u0000-\uFFFF]/.test(e)?o.split(Z.sep).map(n=>{try{return ki.decode(Buffer.from(n,"binary"),"gbk")}catch{return n}}).join(Z.sep):e}catch{return o}}async function Bi(o){const e=Wa(o),n=Z.normalize(e);if(console.log(n),!ae.existsSync(n)){if(o!==n&&ae.existsSync(o))return o;throw new Error(`文件不存在: ${n}
原始路径: ${o}`)}return n}function En(o){return Buffer.from(o,"base64").toString("utf-8")}function dt(o){switch(Z.extname(o).toLowerCase()){case".mp4":return"video/mp4";case".webm":return"video/webm";case".mov":return"video/quicktime";case".avi":return"video/x-msvideo";case".mkv":return"video/x-matroska";case".mp3":return"audio/mpeg";case".wav":return"audio/wav";case".ogg":return"audio/ogg";case".aac":return"audio/aac";case".flac":return"audio/flac";case".jpg":case".jpeg":return"image/jpeg";case".png":return"image/png";default:return"application/octet-stream"}}function Ui(o){return new ReadableStream({start(e){o.on("data",n=>{e.enqueue(n)}),o.on("end",()=>{e.close()}),o.on("error",n=>{e.error(n)})},cancel(){o.destroy()}})}function Ha(){try{let o,e;if(re.app.isPackaged){const n=Z.join(process.resourcesPath,"app.asar.unpacked","bin");o=Z.join(n,process.platform==="win32"?"ffmpeg.exe":"ffmpeg"),e=Z.join(n,process.platform==="win32"?"ffprobe.exe":"ffprobe")}else{const n=require("ffmpeg-static"),i=require("ffprobe-static");o=n,e=i.path}return console.log("FFmpeg路径:",o),console.log("FFprobe路径:",e),Ze.setFfmpegPath(o),Ze.setFfprobePath(e),{ffmpegPath:o,ffprobePath:e}}catch(o){throw console.error("FFmpeg初始化失败:",o),new Error(`视频处理引擎初始化失败: ${o.message}`)}}function Ga(){re.ipcMain.handle("merge-media",async(o,e)=>{const{videoPaths:n,audioPaths:i,outputPath:a,audioVolumes:t=[]}=e,r=[...await Promise.all(n.map(Bi)),...await Promise.all(i.map(Bi))];return new Promise((s,u)=>{const f=Ze();r.forEach(b=>f.input(b));const l=[],h=n.map((b,T)=>`[${T}:v]scale=1280:720,setsar=1[v${T}]`);l.push(h.join(";"));const c=n.map((b,T)=>`[v${T}]`).join("");l.push(`${c}concat=n=${n.length}:v=1:a=0[vout]`);const m=i.map((b,T)=>`[${T+n.length}:a]aformat=sample_fmts=fltp[a${T}]`);l.push(m.join(";"));const v=i.map((b,T)=>`[a${T}]`).join("");l.push(`${v}amix=inputs=${i.length}:duration=longest[aout]`),se.log(l.join(";")),f.complexFilter(l.join(";")).outputOptions(["-map [vout]","-map [aout]","-c:v libx264","-preset fast","-crf 22","-c:a aac","-b:a 192k","-shortest"]).save(a).on("progress",b=>{const T=b.percent?Math.min(100,b.percent):0;o.sender.send("merge-progress",T)}).on("end",()=>s(a)).on("error",(b,T,x)=>{console.error("FFmpeg Error:",b.message),console.error("FFmpeg Stderr:",x),u(b)})})})}function Ka(){re.ipcMain.handle("open-file",async(o,e)=>{const{shell:n}=require("electron");await n.openPath(e)})}var it,Ya=new Uint8Array(16);function ls(){if(!it&&(it=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!it))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return it(Ya)}const Ja=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ot(o){return typeof o=="string"&&Ja.test(o)}var de=[];for(var Or=0;Or<256;++Or)de.push((Or+256).toString(16).substr(1));function Ct(o){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(de[o[e+0]]+de[o[e+1]]+de[o[e+2]]+de[o[e+3]]+"-"+de[o[e+4]]+de[o[e+5]]+"-"+de[o[e+6]]+de[o[e+7]]+"-"+de[o[e+8]]+de[o[e+9]]+"-"+de[o[e+10]]+de[o[e+11]]+de[o[e+12]]+de[o[e+13]]+de[o[e+14]]+de[o[e+15]]).toLowerCase();if(!Ot(n))throw TypeError("Stringified UUID is invalid");return n}var Xi,Cr,Dr=0,Ar=0;function Qa(o,e,n){var i=e&&n||0,a=e||new Array(16);o=o||{};var t=o.node||Xi,r=o.clockseq!==void 0?o.clockseq:Cr;if(t==null||r==null){var s=o.random||(o.rng||ls)();t==null&&(t=Xi=[s[0]|1,s[1],s[2],s[3],s[4],s[5]]),r==null&&(r=Cr=(s[6]<<8|s[7])&16383)}var u=o.msecs!==void 0?o.msecs:Date.now(),f=o.nsecs!==void 0?o.nsecs:Ar+1,l=u-Dr+(f-Ar)/1e4;if(l<0&&o.clockseq===void 0&&(r=r+1&16383),(l<0||u>Dr)&&o.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Dr=u,Ar=f,Cr=r,u+=122192928e5;var h=((u&268435455)*1e4+f)%4294967296;a[i++]=h>>>24&255,a[i++]=h>>>16&255,a[i++]=h>>>8&255,a[i++]=h&255;var c=u/4294967296*1e4&268435455;a[i++]=c>>>8&255,a[i++]=c&255,a[i++]=c>>>24&15|16,a[i++]=c>>>16&255,a[i++]=r>>>8|128,a[i++]=r&255;for(var m=0;m<6;++m)a[i+m]=t[m];return e||Ct(a)}function ps(o){if(!Ot(o))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(o.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(o.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(o.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(o.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(o.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function Za(o){o=unescape(encodeURIComponent(o));for(var e=[],n=0;n<o.length;++n)e.push(o.charCodeAt(n));return e}var eu="6ba7b810-9dad-11d1-80b4-00c04fd430c8",tu="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function hs(o,e,n){function i(a,t,r,s){if(typeof a=="string"&&(a=Za(a)),typeof t=="string"&&(t=ps(t)),t.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+a.length);if(u.set(t),u.set(a,t.length),u=n(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,r){s=s||0;for(var f=0;f<16;++f)r[s+f]=u[f];return r}return Ct(u)}try{i.name=o}catch{}return i.DNS=eu,i.URL=tu,i}function ru(o){if(typeof o=="string"){var e=unescape(encodeURIComponent(o));o=new Uint8Array(e.length);for(var n=0;n<e.length;++n)o[n]=e.charCodeAt(n)}return nu(iu(ou(o),o.length*8))}function nu(o){for(var e=[],n=o.length*32,i="0123456789abcdef",a=0;a<n;a+=8){var t=o[a>>5]>>>a%32&255,r=parseInt(i.charAt(t>>>4&15)+i.charAt(t&15),16);e.push(r)}return e}function ds(o){return(o+64>>>9<<4)+14+1}function iu(o,e){o[e>>5]|=128<<e%32,o[ds(e)-1]=e;for(var n=1732584193,i=-271733879,a=-1732584194,t=271733878,r=0;r<o.length;r+=16){var s=n,u=i,f=a,l=t;n=ge(n,i,a,t,o[r],7,-680876936),t=ge(t,n,i,a,o[r+1],12,-389564586),a=ge(a,t,n,i,o[r+2],17,606105819),i=ge(i,a,t,n,o[r+3],22,-1044525330),n=ge(n,i,a,t,o[r+4],7,-176418897),t=ge(t,n,i,a,o[r+5],12,1200080426),a=ge(a,t,n,i,o[r+6],17,-1473231341),i=ge(i,a,t,n,o[r+7],22,-45705983),n=ge(n,i,a,t,o[r+8],7,1770035416),t=ge(t,n,i,a,o[r+9],12,-1958414417),a=ge(a,t,n,i,o[r+10],17,-42063),i=ge(i,a,t,n,o[r+11],22,-1990404162),n=ge(n,i,a,t,o[r+12],7,1804603682),t=ge(t,n,i,a,o[r+13],12,-40341101),a=ge(a,t,n,i,o[r+14],17,-1502002290),i=ge(i,a,t,n,o[r+15],22,1236535329),n=ye(n,i,a,t,o[r+1],5,-165796510),t=ye(t,n,i,a,o[r+6],9,-1069501632),a=ye(a,t,n,i,o[r+11],14,643717713),i=ye(i,a,t,n,o[r],20,-373897302),n=ye(n,i,a,t,o[r+5],5,-701558691),t=ye(t,n,i,a,o[r+10],9,38016083),a=ye(a,t,n,i,o[r+15],14,-660478335),i=ye(i,a,t,n,o[r+4],20,-405537848),n=ye(n,i,a,t,o[r+9],5,568446438),t=ye(t,n,i,a,o[r+14],9,-1019803690),a=ye(a,t,n,i,o[r+3],14,-187363961),i=ye(i,a,t,n,o[r+8],20,1163531501),n=ye(n,i,a,t,o[r+13],5,-1444681467),t=ye(t,n,i,a,o[r+2],9,-51403784),a=ye(a,t,n,i,o[r+7],14,1735328473),i=ye(i,a,t,n,o[r+12],20,-1926607734),n=ve(n,i,a,t,o[r+5],4,-378558),t=ve(t,n,i,a,o[r+8],11,-2022574463),a=ve(a,t,n,i,o[r+11],16,1839030562),i=ve(i,a,t,n,o[r+14],23,-35309556),n=ve(n,i,a,t,o[r+1],4,-1530992060),t=ve(t,n,i,a,o[r+4],11,1272893353),a=ve(a,t,n,i,o[r+7],16,-155497632),i=ve(i,a,t,n,o[r+10],23,-1094730640),n=ve(n,i,a,t,o[r+13],4,681279174),t=ve(t,n,i,a,o[r],11,-358537222),a=ve(a,t,n,i,o[r+3],16,-722521979),i=ve(i,a,t,n,o[r+6],23,76029189),n=ve(n,i,a,t,o[r+9],4,-640364487),t=ve(t,n,i,a,o[r+12],11,-421815835),a=ve(a,t,n,i,o[r+15],16,530742520),i=ve(i,a,t,n,o[r+2],23,-995338651),n=we(n,i,a,t,o[r],6,-198630844),t=we(t,n,i,a,o[r+7],10,1126891415),a=we(a,t,n,i,o[r+14],15,-1416354905),i=we(i,a,t,n,o[r+5],21,-57434055),n=we(n,i,a,t,o[r+12],6,1700485571),t=we(t,n,i,a,o[r+3],10,-1894986606),a=we(a,t,n,i,o[r+10],15,-1051523),i=we(i,a,t,n,o[r+1],21,-2054922799),n=we(n,i,a,t,o[r+8],6,1873313359),t=we(t,n,i,a,o[r+15],10,-30611744),a=we(a,t,n,i,o[r+6],15,-1560198380),i=we(i,a,t,n,o[r+13],21,1309151649),n=we(n,i,a,t,o[r+4],6,-145523070),t=we(t,n,i,a,o[r+11],10,-1120210379),a=we(a,t,n,i,o[r+2],15,718787259),i=we(i,a,t,n,o[r+9],21,-343485551),n=qe(n,s),i=qe(i,u),a=qe(a,f),t=qe(t,l)}return[n,i,a,t]}function ou(o){if(o.length===0)return[];for(var e=o.length*8,n=new Uint32Array(ds(e)),i=0;i<e;i+=8)n[i>>5]|=(o[i/8]&255)<<i%32;return n}function qe(o,e){var n=(o&65535)+(e&65535),i=(o>>16)+(e>>16)+(n>>16);return i<<16|n&65535}function su(o,e){return o<<e|o>>>32-e}function Dt(o,e,n,i,a,t){return qe(su(qe(qe(e,o),qe(i,t)),a),n)}function ge(o,e,n,i,a,t,r){return Dt(e&n|~e&i,o,e,a,t,r)}function ye(o,e,n,i,a,t,r){return Dt(e&i|n&~i,o,e,a,t,r)}function ve(o,e,n,i,a,t,r){return Dt(e^n^i,o,e,a,t,r)}function we(o,e,n,i,a,t,r){return Dt(n^(e|~i),o,e,a,t,r)}var au=hs("v3",48,ru);const uu=au;function cu(o,e,n){o=o||{};var i=o.random||(o.rng||ls)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(var a=0;a<16;++a)e[n+a]=i[a];return e}return Ct(i)}function fu(o,e,n,i){switch(o){case 0:return e&n^~e&i;case 1:return e^n^i;case 2:return e&n^e&i^n&i;case 3:return e^n^i}}function Nr(o,e){return o<<e|o>>>32-e}function lu(o){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof o=="string"){var i=unescape(encodeURIComponent(o));o=[];for(var a=0;a<i.length;++a)o.push(i.charCodeAt(a))}else Array.isArray(o)||(o=Array.prototype.slice.call(o));o.push(128);for(var t=o.length/4+2,r=Math.ceil(t/16),s=new Array(r),u=0;u<r;++u){for(var f=new Uint32Array(16),l=0;l<16;++l)f[l]=o[u*64+l*4]<<24|o[u*64+l*4+1]<<16|o[u*64+l*4+2]<<8|o[u*64+l*4+3];s[u]=f}s[r-1][14]=(o.length-1)*8/Math.pow(2,32),s[r-1][14]=Math.floor(s[r-1][14]),s[r-1][15]=(o.length-1)*8&4294967295;for(var h=0;h<r;++h){for(var c=new Uint32Array(80),m=0;m<16;++m)c[m]=s[h][m];for(var v=16;v<80;++v)c[v]=Nr(c[v-3]^c[v-8]^c[v-14]^c[v-16],1);for(var b=n[0],T=n[1],x=n[2],y=n[3],g=n[4],D=0;D<80;++D){var N=Math.floor(D/20),E=Nr(b,5)+fu(N,T,x,y)+g+e[N]+c[D]>>>0;g=y,y=x,x=Nr(T,30)>>>0,T=b,b=E}n[0]=n[0]+b>>>0,n[1]=n[1]+T>>>0,n[2]=n[2]+x>>>0,n[3]=n[3]+y>>>0,n[4]=n[4]+g>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var pu=hs("v5",80,lu);const hu=pu,du="00000000-0000-0000-0000-000000000000";function mu(o){if(!Ot(o))throw TypeError("Invalid UUID");return parseInt(o.substr(14,1),16)}const gu=Object.freeze(Object.defineProperty({__proto__:null,NIL:du,parse:ps,stringify:Ct,v1:Qa,v3:uu,v4:cu,v5:hu,validate:Ot,version:mu},Symbol.toStringTag,{value:"Module"})),yu=Qs(gu),vu=zs,ot=An,{v1:nf,v4:wu}=yu;let Eu=class{constructor(e){ot(e,'must pass "config"'),ot(e.url,'must pass "url"'),ot(e.appkey,'must pass "appkey"'),ot(e.token,"must first get token from cache or getToken interface"),this._config=e}start(e,n){if(typeof e!="function")throw new Error("expect function onmessage");if(typeof n!="function")throw new Error("expect function onclose");return this._ws=new vu(this._config.url,{headers:{"X-NLS-Token":this._config.token},perMessageDeflate:!1}),this._ws.on("message",(i,a)=>{e(i,a)}),this._ws.on("close",()=>{n()}),new Promise((i,a)=>{this._ws.on("open",()=>{i()}),this._ws.on("error",t=>{a(t)})})}send(e,n){this._ws!=null&&this._ws.send(e,{binary:n})}setPing(e,n){this._ping=setInterval(()=>{this._ws.ping(n)},e)}clearPing(){this._ping&&clearInterval(this._ping)}shutdown(){this._ws!=null&&(this._ping!=null&&clearInterval(this._ping),this._ws.terminate())}uuid(){return wu().split("-").join("")}defaultContext(){return{sdk:{name:"nls-nodejs-sdk",version:"0.0.1",language:"nodejs"}}}};var bu=Eu;Be.EventEmitter;Be.EventEmitter;const Tu=bu,Ou=Be.EventEmitter;class Cu{constructor(e,n=!1){this._event=new Ou,this._config=e,n?this._namespace="SpeechLongSynthesizer":this._namespace="SpeechSynthesizer"}defaultStartParams(e){return{voice:e,format:"wav",sample_rate:16e3,volume:50,speech_rate:0,pitch_rate:0,enable_subtitle:!1}}on(e,n){this._event.on(e,n)}async start(e,n,i){this._client=new Tu(this._config),this._taskid=this._client.uuid();let a={header:{message_id:this._client.uuid(),task_id:this._taskid,namespace:this._namespace,name:"StartSynthesis",appkey:this._config.appkey},payload:e,context:this._client.defaultContext()};return new Promise(async(t,r)=>{try{await this._client.start((s,u)=>{if(u)this._event.emit("data",s);else{let f=s.toString(),l=JSON.parse(f);l.header.name==="MetaInfo"?this._event.emit("meta",f):l.header.name==="SynthesisCompleted"?(this._client.clearPing(),this._client.shutdown(),this._client=null,this._event.emit("completed",f),t(f)):l.header.name==="TaskFailed"&&(this._client.clearPing(),this._client.shutdown(),this._client=null,this._event.emit("TaskFailed",f),this._event.emit("failed",f),r(f))}},()=>{this._event.emit("closed")}),n&&(i||(i=6e3),this._client.setPing(i)),this._client.send(JSON.stringify(a),!1)}catch(s){r(s)}})}shutdown(){this._client!=null&&this._client.shutdown()}}var Du=Cu;const Au=bt(Du),gt={accessKeyId:"LTAI5tFCh5eoiNZX4n2wEy7Y",accessKeySecret:"XWYRzwspo5z4Ukuo8lKxZX4pUSgQ86",appkey:"JbBUqMYRUt0DrMcK",endpoint:"https://nls-gateway.aliyuncs.com",regionId:"cn-shanghai",ttsUrl:"wss://nls-gateway-cn-shanghai.aliyuncs.com/ws/v1"};var At={exports:{}},ze={},bn={exports:{}},st={exports:{}},Ir,Vi;function ms(){if(Vi)return Ir;Vi=1;var o=1e3,e=o*60,n=e*60,i=n*24,a=i*7,t=i*365.25;Ir=function(l,h){h=h||{};var c=typeof l;if(c==="string"&&l.length>0)return r(l);if(c==="number"&&isFinite(l))return h.long?u(l):s(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function r(l){if(l=String(l),!(l.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(h){var c=parseFloat(h[1]),m=(h[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return c*t;case"weeks":case"week":case"w":return c*a;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*e;case"seconds":case"second":case"secs":case"sec":case"s":return c*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}function s(l){var h=Math.abs(l);return h>=i?Math.round(l/i)+"d":h>=n?Math.round(l/n)+"h":h>=e?Math.round(l/e)+"m":h>=o?Math.round(l/o)+"s":l+"ms"}function u(l){var h=Math.abs(l);return h>=i?f(l,h,i,"day"):h>=n?f(l,h,n,"hour"):h>=e?f(l,h,e,"minute"):h>=o?f(l,h,o,"second"):l+" ms"}function f(l,h,c,m){var v=h>=c*1.5;return Math.round(l/c)+" "+m+(v?"s":"")}return Ir}var _r,zi;function gs(){if(zi)return _r;zi=1;function o(e){i.debug=i,i.default=i,i.coerce=f,i.disable=s,i.enable=t,i.enabled=u,i.humanize=ms(),i.destroy=l,Object.keys(e).forEach(h=>{i[h]=e[h]}),i.names=[],i.skips=[],i.formatters={};function n(h){let c=0;for(let m=0;m<h.length;m++)c=(c<<5)-c+h.charCodeAt(m),c|=0;return i.colors[Math.abs(c)%i.colors.length]}i.selectColor=n;function i(h){let c,m=null,v,b;function T(...x){if(!T.enabled)return;const y=T,g=Number(new Date),D=g-(c||g);y.diff=D,y.prev=c,y.curr=g,c=g,x[0]=i.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let N=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(A,O)=>{if(A==="%%")return"%";N++;const p=i.formatters[O];if(typeof p=="function"){const C=x[N];A=p.call(y,C),x.splice(N,1),N--}return A}),i.formatArgs.call(y,x),(y.log||i.log).apply(y,x)}return T.namespace=h,T.useColors=i.useColors(),T.color=i.selectColor(h),T.extend=a,T.destroy=i.destroy,Object.defineProperty(T,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(v!==i.namespaces&&(v=i.namespaces,b=i.enabled(h)),b),set:x=>{m=x}}),typeof i.init=="function"&&i.init(T),T}function a(h,c){const m=i(this.namespace+(typeof c>"u"?":":c)+h);return m.log=this.log,m}function t(h){i.save(h),i.namespaces=h,i.names=[],i.skips=[];const c=(typeof h=="string"?h:"").trim().replace(" ",",").split(",").filter(Boolean);for(const m of c)m[0]==="-"?i.skips.push(m.slice(1)):i.names.push(m)}function r(h,c){let m=0,v=0,b=-1,T=0;for(;m<h.length;)if(v<c.length&&(c[v]===h[m]||c[v]==="*"))c[v]==="*"?(b=v,T=m,v++):(m++,v++);else if(b!==-1)v=b+1,T++,m=T;else return!1;for(;v<c.length&&c[v]==="*";)v++;return v===c.length}function s(){const h=[...i.names,...i.skips.map(c=>"-"+c)].join(",");return i.enable(""),h}function u(h){for(const c of i.skips)if(r(h,c))return!1;for(const c of i.names)if(r(h,c))return!0;return!1}function f(h){return h instanceof Error?h.stack||h.message:h}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}return _r=o,_r}var Wi;function Nu(){return Wi||(Wi=1,function(o,e){e.formatArgs=i,e.save=a,e.load=t,e.useColors=n,e.storage=r(),e.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+o.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;u.splice(1,0,f,"color: inherit");let l=0,h=0;u[0].replace(/%[a-zA-Z%]/g,c=>{c!=="%%"&&(l++,c==="%c"&&(h=l))}),u.splice(h,0,f)}e.log=console.debug||console.log||(()=>{});function a(u){try{u?e.storage.setItem("debug",u):e.storage.removeItem("debug")}catch{}}function t(){let u;try{u=e.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=process.env.DEBUG),u}function r(){try{return localStorage}catch{}}o.exports=gs()(e);const{formatters:s}=o.exports;s.j=function(u){try{return JSON.stringify(u)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}}(st,st.exports)),st.exports}var at={exports:{}},xr,Hi;function Iu(){return Hi||(Hi=1,xr=(o,e=process.argv)=>{const n=o.startsWith("-")?"":o.length===1?"-":"--",i=e.indexOf(n+o),a=e.indexOf("--");return i!==-1&&(a===-1||i<a)}),xr}var Fr,Gi;function ys(){if(Gi)return Fr;Gi=1;const o=$e,e=In,n=Iu(),{env:i}=process;let a;n("no-color")||n("no-colors")||n("color=false")||n("color=never")?a=0:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(a=1),"FORCE_COLOR"in i&&(i.FORCE_COLOR==="true"?a=1:i.FORCE_COLOR==="false"?a=0:a=i.FORCE_COLOR.length===0?1:Math.min(parseInt(i.FORCE_COLOR,10),3));function t(u){return u===0?!1:{level:u,hasBasic:!0,has256:u>=2,has16m:u>=3}}function r(u,f){if(a===0)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(u&&!f&&a===void 0)return 0;const l=a||0;if(i.TERM==="dumb")return l;if(process.platform==="win32"){const h=o.release().split(".");return Number(h[0])>=10&&Number(h[2])>=10586?Number(h[2])>=14931?3:2:1}if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(h=>h in i)||i.CI_NAME==="codeship"?1:l;if("TEAMCITY_VERSION"in i)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION)?1:0;if(i.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in i){const h=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return h>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)||"COLORTERM"in i?1:l}function s(u){const f=r(u,u&&u.isTTY);return t(f)}return Fr={supportsColor:s,stdout:t(r(!0,e.isatty(1))),stderr:t(r(!0,e.isatty(2)))},Fr}var Ki;function _u(){return Ki||(Ki=1,function(o,e){const n=In,i=yt;e.init=l,e.log=s,e.formatArgs=t,e.save=u,e.load=f,e.useColors=a,e.destroy=i.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),e.colors=[6,2,3,4,5,1];try{const c=ys();c&&(c.stderr||c).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}e.inspectOpts=Object.keys(process.env).filter(c=>/^debug_/i.test(c)).reduce((c,m)=>{const v=m.substring(6).toLowerCase().replace(/_([a-z])/g,(T,x)=>x.toUpperCase());let b=process.env[m];return/^(yes|on|true|enabled)$/i.test(b)?b=!0:/^(no|off|false|disabled)$/i.test(b)?b=!1:b==="null"?b=null:b=Number(b),c[v]=b,c},{});function a(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:n.isatty(process.stderr.fd)}function t(c){const{namespace:m,useColors:v}=this;if(v){const b=this.color,T="\x1B[3"+(b<8?b:"8;5;"+b),x=`  ${T};1m${m} \x1B[0m`;c[0]=x+c[0].split(`
`).join(`
`+x),c.push(T+"m+"+o.exports.humanize(this.diff)+"\x1B[0m")}else c[0]=r()+m+" "+c[0]}function r(){return e.inspectOpts.hideDate?"":new Date().toISOString()+" "}function s(...c){return process.stderr.write(i.formatWithOptions(e.inspectOpts,...c)+`
`)}function u(c){c?process.env.DEBUG=c:delete process.env.DEBUG}function f(){return process.env.DEBUG}function l(c){c.inspectOpts={};const m=Object.keys(e.inspectOpts);for(let v=0;v<m.length;v++)c.inspectOpts[m[v]]=e.inspectOpts[m[v]]}o.exports=gs()(e);const{formatters:h}=o.exports;h.o=function(c){return this.inspectOpts.colors=this.useColors,i.inspect(c,this.inspectOpts).split(`
`).map(m=>m.trim()).join(" ")},h.O=function(c){return this.inspectOpts.colors=this.useColors,i.inspect(c,this.inspectOpts)}}(at,at.exports)),at.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?bn.exports=Nu():bn.exports=_u();var vs=bn.exports;const Yi=Ws,ws=wt,Es=Et,xu=Nn.parse,Fu=Nn.format,_e=vs("httpx:body"),ut=vs("httpx:header"),Su=new ws.Agent({keepAlive:!0}),Pu=new Es.Agent({keepAlive:!0}),Sr=3e3,Re=Symbol("TIMER::READ_TIMER"),Tn=Symbol("TIMER::READ_TIME_OUT"),bs=Symbol("TIMER::READ_TIMER_START_AT");function Ts(o){switch(o.headers["content-encoding"]){case"gzip":return o.pipe(Yi.createGunzip());case"deflate":return o.pipe(Yi.createInflate());default:return o}}var Ji=function(o,e,n){return o.name=e+o.name,o.message=`${n}. ${o.message}`,o};const Ge=function(o){return o!==null&&!isNaN(o)};ze.request=function(o,e){e||(e={});const n=typeof o=="string"?xu(o):o;let i,a;Ge(e.readTimeout)||Ge(e.connectTimeout)?(i=Ge(e.readTimeout)?Number(e.readTimeout):Sr,a=Ge(e.connectTimeout)?Number(e.connectTimeout):Sr):Ge(e.timeout)?i=a=Number(e.timeout):i=a=Sr;const t=n.protocol==="https:",r=(e.method||"GET").toUpperCase(),s=t?Pu:Su,u=e.agent||s;var f={host:n.hostname||"localhost",path:n.path||"/",method:r,port:n.port||(n.protocol==="https:"?443:80),agent:u,headers:e.headers||{},key:e.key||"",cert:e.cert||"",ca:e.ca||"",timeout:a};t&&typeof e.rejectUnauthorized<"u"&&(f.rejectUnauthorized=e.rejectUnauthorized),e.compression&&(f.headers["accept-encoding"]="gzip,deflate");const l=t?Es:ws;return typeof e.beforeRequest=="function"&&(f=e.beforeRequest(f)),new Promise((h,c)=>{const m=l.request(f),v=e.data;var b=g=>{ut.enabled&&(g.req._header.split(`\r
`).forEach(N=>{ut("> %s",N)}),ut("< HTTP/%s %s %s",g.httpVersion,g.statusCode,g.statusMessage),Object.keys(g.headers).forEach(N=>{ut("< %s: %s",N,g.headers[N])})),h(g)},T=g=>{g.message+=`${r} ${Fu(n)} failed.`,m.socket&&m.socket[Re]&&clearTimeout(m.socket[Re]),c(g)},x=g=>{m.abort(),T(g)};const y=function(g){const D=setTimeout(()=>{g[Re]&&(clearTimeout(g[Re]),g[Re]=null);var N=new Error,E=`ReadTimeout(${i})`;x(Ji(N,"RequestTimeout",E))},i);g[Tn]=i,g[Re]=D,g[bs]=Date.now(),D.unref()};!v||typeof v=="string"||v instanceof Buffer?(_e.enabled&&_e(v?typeof v=="string"?v:`Buffer <ignored>, Buffer length: ${v.length}`:"<no request body>"),m.end(v)):typeof v.pipe=="function"&&(v.pipe(m),_e.enabled&&_e("<request body is a stream>"),v.once("error",g=>{x(Ji(g,"HttpX","Stream occor error"))})),m.on("timeout",()=>{var g=new Error;g.name="RequestTimeoutError",g.message=`ConnectTimeout: Connect ${o} failed.`,m.destroy(),c(g)}),m.on("response",b),m.on("error",T),m.once("socket",function(g){g.readyState==="opening"?g.once("connect",function(){y(g)}):y(g)})})};ze.read=function(o,e){const n=Ts(o);return new Promise((i,a)=>{const t=o.socket||o.client,r=()=>{const T=o.req;var x=new Error;return x.name="RequestTimeoutError",x.message=`ReadTimeout: ${t[Tn]}. ${T.method} ${T.path} failed.`,x};let s;const u=t[Re];if(!u){a(r());return}const f=t[Tn]-(Date.now()-t[bs]);if(clearTimeout(u),f<=0){a(r());return}s=setTimeout(function(){a(r())},f);var l,h,c,m=function(){n.removeListener("error",l),n.removeListener("data",h),n.removeListener("end",c),s&&clearTimeout(s)};const v=[];var b=0;h=function(T){v.push(T),b+=T.length},l=function(T){m(),a(T)},c=function(){m();var T=Buffer.concat(v,b);if(_e(""),e){const x=T.toString(e);return _e(x),i(x)}_e.enabled&&_e(T.toString()),i(T)},n.on("error",l),n.on("data",h),n.on("end",c)})};function Lu(o){return new Promise((e,n)=>{var i,a,t,r=function(){o.removeListener("error",t),o.removeListener("end",a),o.removeListener("readable",i)};i=function(){r(),e(!1)},a=function(){r(),e(!0)},t=function(s){r(),n(s)},o.once("readable",i),o.once("end",a),o.once("error",t)})}class Os{constructor(e,n,i,a){this.id=e,this.event=n,this.data=i,this.retry=a}}ze.Event=Os;const Qi="data:",Zi="event:",eo="id:",to="retry:";function Mu(o){for(let e=0;e<o.length;e++){const n=o.charAt(e);if(n<"0"||n>"9")return!1}return o.length>0}function Ru(o,e){const n=o+e;let i=0;const a=[];for(let r=0;r<n.length-1;r++){const s=n[r],u=n[r+1];if(s===`
`&&u===`
`){const l=n.substring(i,r).split(`
`),h=new Os;l.forEach(c=>{if(c.startsWith(Qi))h.data=c.substring(Qi.length).trim();else if(c.startsWith(Zi))h.event=c.substring(Zi.length).trim();else if(c.startsWith(eo))h.id=c.substring(eo.length).trim();else if(c.startsWith(to)){const m=c.substring(to.length).trim();Mu(m)&&(h.retry=parseInt(m,10))}else c.startsWith(":")}),a.push(h),i=r+2}}const t=n.substring(i);return[a,t]}ze.readAsSSE=async function*(o){const e=Ts(o),n=o.socket||o.client;clearTimeout(n[Re]);let i="";for(;;){if(await Lu(e))return;let t;for(;(t=e.read())!==null;){const[r,s]=Ru(i,t.toString());if(i=s,r&&r.length>0)for(const u of r)yield u}}};var Sn={};(function(o){const e=ae,n=$e,i=De;o.loadJSONSync=function(a){var t=e.readFileSync(a,"utf8");t.charCodeAt(0)===65279&&(t=t.slice(1));try{return JSON.parse(t)}catch(r){throw r.message=a+": "+r.message,r}},o.encode=function(a,t){return typeof a!="string"&&(a=""+a),new Buffer(a,t)},o.makeHasher=function(a){return function(t,r){var s=i.createHash(a);return s.update(t),s.digest(r)}},o.createHash=o.makeHasher,o.md5=o.makeHasher("md5"),o.createHmac=function(a){return function(t,r,s){return i.createHmac(a,r).update(t).digest(s)}},o.sha1=o.createHmac("sha1"),o.random=function(a,t){return Math.floor(a+Math.random()*(t-a))},o.makeNonce=function(){var a=0,t;const r=n.hostname(),s=process.pid;return function(){var u=Math.floor(Math.random()*1e12);u===t?a++:a=0,t=u;var f=`${r}${s}${u}${a}`;return o.md5(f,"hex")}}(),o.pad2=function(a){return a<10?"0"+a:""+a},o.pad3=function(a){return a<10?"00"+a:a<100?"0"+a:""+a},o.getYYYYMMDD=function(a){var t=a.getFullYear(),r=o.pad2(a.getMonth()+1),s=o.pad2(a.getDate());return""+t+r+s},o.sleep=function(a){return new Promise(t=>{setTimeout(t,a)})},o.getIPv4=function(){for(var a=n.networkInterfaces(),t=Object.keys(a),r=0;r<t.length;r++)for(var s=t[r],u=a[s],f=0;f<u.length;f++){var l=u[f];if(!l.internal&&l.family==="IPv4")return l.address}return""},o.getMac=function(){for(var a=n.networkInterfaces(),t=Object.keys(a),r=0;r<t.length;r++)for(var s=t[r],u=a[s],f=0;f<u.length;f++){var l=u[f];if(!l.internal&&l.family==="IPv4")return l.mac}return"00:00:00:00:00:00"}})(Sn);var Nt={exports:{}},Cs={exports:{}},Ds={exports:{}};(function(o){(function(e){var n,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,t=Math.floor,r="[BigNumber Error] ",s=r+"Number primitive has more than 15 significant digits: ",u=1e14,f=14,l=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],c=1e7,m=1e9;function v(E){var A,O,p,C=z.prototype={constructor:z,toString:null,valueOf:null},F=new z(1),M=20,U=4,W=-7,H=21,J=-1e7,Y=1e7,Te=!1,Oe=1,he=0,le={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Ee="0123456789abcdefghijklmnopqrstuvwxyz",Le=!0;function z(d,_){var S,q,L,R,B,P,j,k,$=this;if(!($ instanceof z))return new z(d,_);if(_==null){if(d&&d._isBigNumber===!0){$.s=d.s,!d.c||d.e>Y?$.c=$.e=null:d.e<J?$.c=[$.e=0]:($.e=d.e,$.c=d.c.slice());return}if((P=typeof d=="number")&&d*0==0){if($.s=1/d<0?(d=-d,-1):1,d===~~d){for(R=0,B=d;B>=10;B/=10,R++);R>Y?$.c=$.e=null:($.e=R,$.c=[d]);return}k=String(d)}else{if(!i.test(k=String(d)))return p($,k,P);$.s=k.charCodeAt(0)==45?(k=k.slice(1),-1):1}(R=k.indexOf("."))>-1&&(k=k.replace(".","")),(B=k.search(/e/i))>0?(R<0&&(R=B),R+=+k.slice(B+1),k=k.substring(0,B)):R<0&&(R=k.length)}else{if(y(_,2,Ee.length,"Base"),_==10&&Le)return $=new z(d),w($,M+$.e+1,U);if(k=String(d),P=typeof d=="number"){if(d*0!=0)return p($,k,P,_);if($.s=1/d<0?(k=k.slice(1),-1):1,z.DEBUG&&k.replace(/^0\.0*|\./,"").length>15)throw Error(s+d)}else $.s=k.charCodeAt(0)===45?(k=k.slice(1),-1):1;for(S=Ee.slice(0,_),R=B=0,j=k.length;B<j;B++)if(S.indexOf(q=k.charAt(B))<0){if(q=="."){if(B>R){R=j;continue}}else if(!L&&(k==k.toUpperCase()&&(k=k.toLowerCase())||k==k.toLowerCase()&&(k=k.toUpperCase()))){L=!0,B=-1,R=0;continue}return p($,String(d),P,_)}P=!1,k=O(k,_,10,$.s),(R=k.indexOf("."))>-1?k=k.replace(".",""):R=k.length}for(B=0;k.charCodeAt(B)===48;B++);for(j=k.length;k.charCodeAt(--j)===48;);if(k=k.slice(B,++j)){if(j-=B,P&&z.DEBUG&&j>15&&(d>l||d!==t(d)))throw Error(s+$.s*d);if((R=R-B-1)>Y)$.c=$.e=null;else if(R<J)$.c=[$.e=0];else{if($.e=R,$.c=[],B=(R+1)%f,R<0&&(B+=f),B<j){for(B&&$.c.push(+k.slice(0,B)),j-=f;B<j;)$.c.push(+k.slice(B,B+=f));B=f-(k=k.slice(B)).length}else B-=j;for(;B--;k+="0");$.c.push(+k)}}else $.c=[$.e=0]}z.clone=v,z.ROUND_UP=0,z.ROUND_DOWN=1,z.ROUND_CEIL=2,z.ROUND_FLOOR=3,z.ROUND_HALF_UP=4,z.ROUND_HALF_DOWN=5,z.ROUND_HALF_EVEN=6,z.ROUND_HALF_CEIL=7,z.ROUND_HALF_FLOOR=8,z.EUCLID=9,z.config=z.set=function(d){var _,S;if(d!=null)if(typeof d=="object"){if(d.hasOwnProperty(_="DECIMAL_PLACES")&&(S=d[_],y(S,0,m,_),M=S),d.hasOwnProperty(_="ROUNDING_MODE")&&(S=d[_],y(S,0,8,_),U=S),d.hasOwnProperty(_="EXPONENTIAL_AT")&&(S=d[_],S&&S.pop?(y(S[0],-m,0,_),y(S[1],0,m,_),W=S[0],H=S[1]):(y(S,-m,m,_),W=-(H=S<0?-S:S))),d.hasOwnProperty(_="RANGE"))if(S=d[_],S&&S.pop)y(S[0],-m,-1,_),y(S[1],1,m,_),J=S[0],Y=S[1];else if(y(S,-m,m,_),S)J=-(Y=S<0?-S:S);else throw Error(r+_+" cannot be zero: "+S);if(d.hasOwnProperty(_="CRYPTO"))if(S=d[_],S===!!S)if(S)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Te=S;else throw Te=!S,Error(r+"crypto unavailable");else Te=S;else throw Error(r+_+" not true or false: "+S);if(d.hasOwnProperty(_="MODULO_MODE")&&(S=d[_],y(S,0,9,_),Oe=S),d.hasOwnProperty(_="POW_PRECISION")&&(S=d[_],y(S,0,m,_),he=S),d.hasOwnProperty(_="FORMAT"))if(S=d[_],typeof S=="object")le=S;else throw Error(r+_+" not an object: "+S);if(d.hasOwnProperty(_="ALPHABET"))if(S=d[_],typeof S=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(S))Le=S.slice(0,10)=="0123456789",Ee=S;else throw Error(r+_+" invalid: "+S)}else throw Error(r+"Object expected: "+d);return{DECIMAL_PLACES:M,ROUNDING_MODE:U,EXPONENTIAL_AT:[W,H],RANGE:[J,Y],CRYPTO:Te,MODULO_MODE:Oe,POW_PRECISION:he,FORMAT:le,ALPHABET:Ee}},z.isBigNumber=function(d){if(!d||d._isBigNumber!==!0)return!1;if(!z.DEBUG)return!0;var _,S,q=d.c,L=d.e,R=d.s;e:if({}.toString.call(q)=="[object Array]"){if((R===1||R===-1)&&L>=-m&&L<=m&&L===t(L)){if(q[0]===0){if(L===0&&q.length===1)return!0;break e}if(_=(L+1)%f,_<1&&(_+=f),String(q[0]).length==_){for(_=0;_<q.length;_++)if(S=q[_],S<0||S>=u||S!==t(S))break e;if(S!==0)return!0}}}else if(q===null&&L===null&&(R===null||R===1||R===-1))return!0;throw Error(r+"Invalid BigNumber: "+d)},z.maximum=z.max=function(){return tt(arguments,-1)},z.minimum=z.min=function(){return tt(arguments,1)},z.random=function(){var d=9007199254740992,_=Math.random()*d&2097151?function(){return t(Math.random()*d)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(S){var q,L,R,B,P,j=0,k=[],$=new z(F);if(S==null?S=M:y(S,0,m),B=a(S/f),Te)if(crypto.getRandomValues){for(q=crypto.getRandomValues(new Uint32Array(B*=2));j<B;)P=q[j]*131072+(q[j+1]>>>11),P>=9e15?(L=crypto.getRandomValues(new Uint32Array(2)),q[j]=L[0],q[j+1]=L[1]):(k.push(P%1e14),j+=2);j=B/2}else if(crypto.randomBytes){for(q=crypto.randomBytes(B*=7);j<B;)P=(q[j]&31)*281474976710656+q[j+1]*1099511627776+q[j+2]*4294967296+q[j+3]*16777216+(q[j+4]<<16)+(q[j+5]<<8)+q[j+6],P>=9e15?crypto.randomBytes(7).copy(q,j):(k.push(P%1e14),j+=7);j=B/7}else throw Te=!1,Error(r+"crypto unavailable");if(!Te)for(;j<B;)P=_(),P<9e15&&(k[j++]=P%1e14);for(B=k[--j],S%=f,B&&S&&(P=h[f-S],k[j]=t(B/P)*P);k[j]===0;k.pop(),j--);if(j<0)k=[R=0];else{for(R=-1;k[0]===0;k.splice(0,1),R-=f);for(j=1,P=k[0];P>=10;P/=10,j++);j<f&&(R-=f-j)}return $.e=R,$.c=k,$}}(),z.sum=function(){for(var d=1,_=arguments,S=new z(_[0]);d<_.length;)S=S.plus(_[d++]);return S},O=function(){var d="0123456789";function _(S,q,L,R){for(var B,P=[0],j,k=0,$=S.length;k<$;){for(j=P.length;j--;P[j]*=q);for(P[0]+=R.indexOf(S.charAt(k++)),B=0;B<P.length;B++)P[B]>L-1&&(P[B+1]==null&&(P[B+1]=0),P[B+1]+=P[B]/L|0,P[B]%=L)}return P.reverse()}return function(S,q,L,R,B){var P,j,k,$,V,G,K,ie,ue=S.indexOf("."),pe=M,ne=U;for(ue>=0&&($=he,he=0,S=S.replace(".",""),ie=new z(q),G=ie.pow(S.length-ue),he=$,ie.c=_(N(T(G.c),G.e,"0"),10,L,d),ie.e=ie.c.length),K=_(S,q,L,B?(P=Ee,d):(P=d,Ee)),k=$=K.length;K[--$]==0;K.pop());if(!K[0])return P.charAt(0);if(ue<0?--k:(G.c=K,G.e=k,G.s=R,G=A(G,ie,pe,ne,L),K=G.c,V=G.r,k=G.e),j=k+pe+1,ue=K[j],$=L/2,V=V||j<0||K[j+1]!=null,V=ne<4?(ue!=null||V)&&(ne==0||ne==(G.s<0?3:2)):ue>$||ue==$&&(ne==4||V||ne==6&&K[j-1]&1||ne==(G.s<0?8:7)),j<1||!K[0])S=V?N(P.charAt(1),-pe,P.charAt(0)):P.charAt(0);else{if(K.length=j,V)for(--L;++K[--j]>L;)K[j]=0,j||(++k,K=[1].concat(K));for($=K.length;!K[--$];);for(ue=0,S="";ue<=$;S+=P.charAt(K[ue++]));S=N(S,k,P.charAt(0))}return S}}(),A=function(){function d(q,L,R){var B,P,j,k,$=0,V=q.length,G=L%c,K=L/c|0;for(q=q.slice();V--;)j=q[V]%c,k=q[V]/c|0,B=K*j+k*G,P=G*j+B%c*c+$,$=(P/R|0)+(B/c|0)+K*k,q[V]=P%R;return $&&(q=[$].concat(q)),q}function _(q,L,R,B){var P,j;if(R!=B)j=R>B?1:-1;else for(P=j=0;P<R;P++)if(q[P]!=L[P]){j=q[P]>L[P]?1:-1;break}return j}function S(q,L,R,B){for(var P=0;R--;)q[R]-=P,P=q[R]<L[R]?1:0,q[R]=P*B+q[R]-L[R];for(;!q[0]&&q.length>1;q.splice(0,1));}return function(q,L,R,B,P){var j,k,$,V,G,K,ie,ue,pe,ne,oe,me,rt,St,Pt,Ne,We,Ce=q.s==L.s?1:-1,be=q.c,ce=L.c;if(!be||!be[0]||!ce||!ce[0])return new z(!q.s||!L.s||(be?ce&&be[0]==ce[0]:!ce)?NaN:be&&be[0]==0||!ce?Ce*0:Ce/0);for(ue=new z(Ce),pe=ue.c=[],k=q.e-L.e,Ce=R+k+1,P||(P=u,k=b(q.e/f)-b(L.e/f),Ce=Ce/f|0),$=0;ce[$]==(be[$]||0);$++);if(ce[$]>(be[$]||0)&&k--,Ce<0)pe.push(1),V=!0;else{for(St=be.length,Ne=ce.length,$=0,Ce+=2,G=t(P/(ce[0]+1)),G>1&&(ce=d(ce,G,P),be=d(be,G,P),Ne=ce.length,St=be.length),rt=Ne,ne=be.slice(0,Ne),oe=ne.length;oe<Ne;ne[oe++]=0);We=ce.slice(),We=[0].concat(We),Pt=ce[0],ce[1]>=P/2&&Pt++;do{if(G=0,j=_(ce,ne,Ne,oe),j<0){if(me=ne[0],Ne!=oe&&(me=me*P+(ne[1]||0)),G=t(me/Pt),G>1)for(G>=P&&(G=P-1),K=d(ce,G,P),ie=K.length,oe=ne.length;_(K,ne,ie,oe)==1;)G--,S(K,Ne<ie?We:ce,ie,P),ie=K.length,j=1;else G==0&&(j=G=1),K=ce.slice(),ie=K.length;if(ie<oe&&(K=[0].concat(K)),S(ne,K,oe,P),oe=ne.length,j==-1)for(;_(ce,ne,Ne,oe)<1;)G++,S(ne,Ne<oe?We:ce,oe,P),oe=ne.length}else j===0&&(G++,ne=[0]);pe[$++]=G,ne[0]?ne[oe++]=be[rt]||0:(ne=[be[rt]],oe=1)}while((rt++<St||ne[0]!=null)&&Ce--);V=ne[0]!=null,pe[0]||pe.splice(0,1)}if(P==u){for($=1,Ce=pe[0];Ce>=10;Ce/=10,$++);w(ue,R+(ue.e=$+k*f-1)+1,B,V)}else ue.e=k,ue.r=+V;return ue}}();function Xe(d,_,S,q){var L,R,B,P,j;if(S==null?S=U:y(S,0,8),!d.c)return d.toString();if(L=d.c[0],B=d.e,_==null)j=T(d.c),j=q==1||q==2&&(B<=W||B>=H)?D(j,B):N(j,B,"0");else if(d=w(new z(d),_,S),R=d.e,j=T(d.c),P=j.length,q==1||q==2&&(_<=R||R<=W)){for(;P<_;j+="0",P++);j=D(j,R)}else if(_-=B,j=N(j,R,"0"),R+1>P){if(--_>0)for(j+=".";_--;j+="0");}else if(_+=R-P,_>0)for(R+1==P&&(j+=".");_--;j+="0");return d.s<0&&L?"-"+j:j}function tt(d,_){for(var S,q,L=1,R=new z(d[0]);L<d.length;L++)q=new z(d[L]),(!q.s||(S=x(R,q))===_||S===0&&R.s===_)&&(R=q);return R}function I(d,_,S){for(var q=1,L=_.length;!_[--L];_.pop());for(L=_[0];L>=10;L/=10,q++);return(S=q+S*f-1)>Y?d.c=d.e=null:S<J?d.c=[d.e=0]:(d.e=S,d.c=_),d}p=function(){var d=/^(-?)0([xbo])(?=\w[\w.]*$)/i,_=/^([^.]+)\.$/,S=/^\.([^.]+)$/,q=/^-?(Infinity|NaN)$/,L=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(R,B,P,j){var k,$=P?B:B.replace(L,"");if(q.test($))R.s=isNaN($)?null:$<0?-1:1;else{if(!P&&($=$.replace(d,function(V,G,K){return k=(K=K.toLowerCase())=="x"?16:K=="b"?2:8,!j||j==k?G:V}),j&&(k=j,$=$.replace(_,"$1").replace(S,"0.$1")),B!=$))return new z($,k);if(z.DEBUG)throw Error(r+"Not a"+(j?" base "+j:"")+" number: "+B);R.s=null}R.c=R.e=null}}();function w(d,_,S,q){var L,R,B,P,j,k,$,V=d.c,G=h;if(V){e:{for(L=1,P=V[0];P>=10;P/=10,L++);if(R=_-L,R<0)R+=f,B=_,j=V[k=0],$=t(j/G[L-B-1]%10);else if(k=a((R+1)/f),k>=V.length)if(q){for(;V.length<=k;V.push(0));j=$=0,L=1,R%=f,B=R-f+1}else break e;else{for(j=P=V[k],L=1;P>=10;P/=10,L++);R%=f,B=R-f+L,$=B<0?0:t(j/G[L-B-1]%10)}if(q=q||_<0||V[k+1]!=null||(B<0?j:j%G[L-B-1]),q=S<4?($||q)&&(S==0||S==(d.s<0?3:2)):$>5||$==5&&(S==4||q||S==6&&(R>0?B>0?j/G[L-B]:0:V[k-1])%10&1||S==(d.s<0?8:7)),_<1||!V[0])return V.length=0,q?(_-=d.e+1,V[0]=G[(f-_%f)%f],d.e=-_||0):V[0]=d.e=0,d;if(R==0?(V.length=k,P=1,k--):(V.length=k+1,P=G[f-R],V[k]=B>0?t(j/G[L-B]%G[B])*P:0),q)for(;;)if(k==0){for(R=1,B=V[0];B>=10;B/=10,R++);for(B=V[0]+=P,P=1;B>=10;B/=10,P++);R!=P&&(d.e++,V[0]==u&&(V[0]=1));break}else{if(V[k]+=P,V[k]!=u)break;V[k--]=0,P=1}for(R=V.length;V[--R]===0;V.pop());}d.e>Y?d.c=d.e=null:d.e<J&&(d.c=[d.e=0])}return d}function X(d){var _,S=d.e;return S===null?d.toString():(_=T(d.c),_=S<=W||S>=H?D(_,S):N(_,S,"0"),d.s<0?"-"+_:_)}return C.absoluteValue=C.abs=function(){var d=new z(this);return d.s<0&&(d.s=1),d},C.comparedTo=function(d,_){return x(this,new z(d,_))},C.decimalPlaces=C.dp=function(d,_){var S,q,L,R=this;if(d!=null)return y(d,0,m),_==null?_=U:y(_,0,8),w(new z(R),d+R.e+1,_);if(!(S=R.c))return null;if(q=((L=S.length-1)-b(this.e/f))*f,L=S[L])for(;L%10==0;L/=10,q--);return q<0&&(q=0),q},C.dividedBy=C.div=function(d,_){return A(this,new z(d,_),M,U)},C.dividedToIntegerBy=C.idiv=function(d,_){return A(this,new z(d,_),0,1)},C.exponentiatedBy=C.pow=function(d,_){var S,q,L,R,B,P,j,k,$,V=this;if(d=new z(d),d.c&&!d.isInteger())throw Error(r+"Exponent not an integer: "+X(d));if(_!=null&&(_=new z(_)),P=d.e>14,!V.c||!V.c[0]||V.c[0]==1&&!V.e&&V.c.length==1||!d.c||!d.c[0])return $=new z(Math.pow(+X(V),P?d.s*(2-g(d)):+X(d))),_?$.mod(_):$;if(j=d.s<0,_){if(_.c?!_.c[0]:!_.s)return new z(NaN);q=!j&&V.isInteger()&&_.isInteger(),q&&(V=V.mod(_))}else{if(d.e>9&&(V.e>0||V.e<-1||(V.e==0?V.c[0]>1||P&&V.c[1]>=24e7:V.c[0]<8e13||P&&V.c[0]<=9999975e7)))return R=V.s<0&&g(d)?-0:0,V.e>-1&&(R=1/R),new z(j?1/R:R);he&&(R=a(he/f+2))}for(P?(S=new z(.5),j&&(d.s=1),k=g(d)):(L=Math.abs(+X(d)),k=L%2),$=new z(F);;){if(k){if($=$.times(V),!$.c)break;R?$.c.length>R&&($.c.length=R):q&&($=$.mod(_))}if(L){if(L=t(L/2),L===0)break;k=L%2}else if(d=d.times(S),w(d,d.e+1,1),d.e>14)k=g(d);else{if(L=+X(d),L===0)break;k=L%2}V=V.times(V),R?V.c&&V.c.length>R&&(V.c.length=R):q&&(V=V.mod(_))}return q?$:(j&&($=F.div($)),_?$.mod(_):R?w($,he,U,B):$)},C.integerValue=function(d){var _=new z(this);return d==null?d=U:y(d,0,8),w(_,_.e+1,d)},C.isEqualTo=C.eq=function(d,_){return x(this,new z(d,_))===0},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(d,_){return x(this,new z(d,_))>0},C.isGreaterThanOrEqualTo=C.gte=function(d,_){return(_=x(this,new z(d,_)))===1||_===0},C.isInteger=function(){return!!this.c&&b(this.e/f)>this.c.length-2},C.isLessThan=C.lt=function(d,_){return x(this,new z(d,_))<0},C.isLessThanOrEqualTo=C.lte=function(d,_){return(_=x(this,new z(d,_)))===-1||_===0},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&this.c[0]==0},C.minus=function(d,_){var S,q,L,R,B=this,P=B.s;if(d=new z(d,_),_=d.s,!P||!_)return new z(NaN);if(P!=_)return d.s=-_,B.plus(d);var j=B.e/f,k=d.e/f,$=B.c,V=d.c;if(!j||!k){if(!$||!V)return $?(d.s=-_,d):new z(V?B:NaN);if(!$[0]||!V[0])return V[0]?(d.s=-_,d):new z($[0]?B:U==3?-0:0)}if(j=b(j),k=b(k),$=$.slice(),P=j-k){for((R=P<0)?(P=-P,L=$):(k=j,L=V),L.reverse(),_=P;_--;L.push(0));L.reverse()}else for(q=(R=(P=$.length)<(_=V.length))?P:_,P=_=0;_<q;_++)if($[_]!=V[_]){R=$[_]<V[_];break}if(R&&(L=$,$=V,V=L,d.s=-d.s),_=(q=V.length)-(S=$.length),_>0)for(;_--;$[S++]=0);for(_=u-1;q>P;){if($[--q]<V[q]){for(S=q;S&&!$[--S];$[S]=_);--$[S],$[q]+=u}$[q]-=V[q]}for(;$[0]==0;$.splice(0,1),--k);return $[0]?I(d,$,k):(d.s=U==3?-1:1,d.c=[d.e=0],d)},C.modulo=C.mod=function(d,_){var S,q,L=this;return d=new z(d,_),!L.c||!d.s||d.c&&!d.c[0]?new z(NaN):!d.c||L.c&&!L.c[0]?new z(L):(Oe==9?(q=d.s,d.s=1,S=A(L,d,0,3),d.s=q,S.s*=q):S=A(L,d,0,Oe),d=L.minus(S.times(d)),!d.c[0]&&Oe==1&&(d.s=L.s),d)},C.multipliedBy=C.times=function(d,_){var S,q,L,R,B,P,j,k,$,V,G,K,ie,ue,pe,ne=this,oe=ne.c,me=(d=new z(d,_)).c;if(!oe||!me||!oe[0]||!me[0])return!ne.s||!d.s||oe&&!oe[0]&&!me||me&&!me[0]&&!oe?d.c=d.e=d.s=null:(d.s*=ne.s,!oe||!me?d.c=d.e=null:(d.c=[0],d.e=0)),d;for(q=b(ne.e/f)+b(d.e/f),d.s*=ne.s,j=oe.length,V=me.length,j<V&&(ie=oe,oe=me,me=ie,L=j,j=V,V=L),L=j+V,ie=[];L--;ie.push(0));for(ue=u,pe=c,L=V;--L>=0;){for(S=0,G=me[L]%pe,K=me[L]/pe|0,B=j,R=L+B;R>L;)k=oe[--B]%pe,$=oe[B]/pe|0,P=K*k+$*G,k=G*k+P%pe*pe+ie[R]+S,S=(k/ue|0)+(P/pe|0)+K*$,ie[R--]=k%ue;ie[R]=S}return S?++q:ie.splice(0,1),I(d,ie,q)},C.negated=function(){var d=new z(this);return d.s=-d.s||null,d},C.plus=function(d,_){var S,q=this,L=q.s;if(d=new z(d,_),_=d.s,!L||!_)return new z(NaN);if(L!=_)return d.s=-_,q.minus(d);var R=q.e/f,B=d.e/f,P=q.c,j=d.c;if(!R||!B){if(!P||!j)return new z(L/0);if(!P[0]||!j[0])return j[0]?d:new z(P[0]?q:L*0)}if(R=b(R),B=b(B),P=P.slice(),L=R-B){for(L>0?(B=R,S=j):(L=-L,S=P),S.reverse();L--;S.push(0));S.reverse()}for(L=P.length,_=j.length,L-_<0&&(S=j,j=P,P=S,_=L),L=0;_;)L=(P[--_]=P[_]+j[_]+L)/u|0,P[_]=u===P[_]?0:P[_]%u;return L&&(P=[L].concat(P),++B),I(d,P,B)},C.precision=C.sd=function(d,_){var S,q,L,R=this;if(d!=null&&d!==!!d)return y(d,1,m),_==null?_=U:y(_,0,8),w(new z(R),d,_);if(!(S=R.c))return null;if(L=S.length-1,q=L*f+1,L=S[L]){for(;L%10==0;L/=10,q--);for(L=S[0];L>=10;L/=10,q++);}return d&&R.e+1>q&&(q=R.e+1),q},C.shiftedBy=function(d){return y(d,-l,l),this.times("1e"+d)},C.squareRoot=C.sqrt=function(){var d,_,S,q,L,R=this,B=R.c,P=R.s,j=R.e,k=M+4,$=new z("0.5");if(P!==1||!B||!B[0])return new z(!P||P<0&&(!B||B[0])?NaN:B?R:1/0);if(P=Math.sqrt(+X(R)),P==0||P==1/0?(_=T(B),(_.length+j)%2==0&&(_+="0"),P=Math.sqrt(+_),j=b((j+1)/2)-(j<0||j%2),P==1/0?_="5e"+j:(_=P.toExponential(),_=_.slice(0,_.indexOf("e")+1)+j),S=new z(_)):S=new z(P+""),S.c[0]){for(j=S.e,P=j+k,P<3&&(P=0);;)if(L=S,S=$.times(L.plus(A(R,L,k,1))),T(L.c).slice(0,P)===(_=T(S.c)).slice(0,P))if(S.e<j&&--P,_=_.slice(P-3,P+1),_=="9999"||!q&&_=="4999"){if(!q&&(w(L,L.e+M+2,0),L.times(L).eq(R))){S=L;break}k+=4,P+=4,q=1}else{(!+_||!+_.slice(1)&&_.charAt(0)=="5")&&(w(S,S.e+M+2,1),d=!S.times(S).eq(R));break}}return w(S,S.e+M+1,U,d)},C.toExponential=function(d,_){return d!=null&&(y(d,0,m),d++),Xe(this,d,_,1)},C.toFixed=function(d,_){return d!=null&&(y(d,0,m),d=d+this.e+1),Xe(this,d,_)},C.toFormat=function(d,_,S){var q,L=this;if(S==null)d!=null&&_&&typeof _=="object"?(S=_,_=null):d&&typeof d=="object"?(S=d,d=_=null):S=le;else if(typeof S!="object")throw Error(r+"Argument not an object: "+S);if(q=L.toFixed(d,_),L.c){var R,B=q.split("."),P=+S.groupSize,j=+S.secondaryGroupSize,k=S.groupSeparator||"",$=B[0],V=B[1],G=L.s<0,K=G?$.slice(1):$,ie=K.length;if(j&&(R=P,P=j,j=R,ie-=R),P>0&&ie>0){for(R=ie%P||P,$=K.substr(0,R);R<ie;R+=P)$+=k+K.substr(R,P);j>0&&($+=k+K.slice(R)),G&&($="-"+$)}q=V?$+(S.decimalSeparator||"")+((j=+S.fractionGroupSize)?V.replace(new RegExp("\\d{"+j+"}\\B","g"),"$&"+(S.fractionGroupSeparator||"")):V):$}return(S.prefix||"")+q+(S.suffix||"")},C.toFraction=function(d){var _,S,q,L,R,B,P,j,k,$,V,G,K=this,ie=K.c;if(d!=null&&(P=new z(d),!P.isInteger()&&(P.c||P.s!==1)||P.lt(F)))throw Error(r+"Argument "+(P.isInteger()?"out of range: ":"not an integer: ")+X(P));if(!ie)return new z(K);for(_=new z(F),k=S=new z(F),q=j=new z(F),G=T(ie),R=_.e=G.length-K.e-1,_.c[0]=h[(B=R%f)<0?f+B:B],d=!d||P.comparedTo(_)>0?R>0?_:k:P,B=Y,Y=1/0,P=new z(G),j.c[0]=0;$=A(P,_,0,1),L=S.plus($.times(q)),L.comparedTo(d)!=1;)S=q,q=L,k=j.plus($.times(L=k)),j=L,_=P.minus($.times(L=_)),P=L;return L=A(d.minus(S),q,0,1),j=j.plus(L.times(k)),S=S.plus(L.times(q)),j.s=k.s=K.s,R=R*2,V=A(k,q,R,U).minus(K).abs().comparedTo(A(j,S,R,U).minus(K).abs())<1?[k,q]:[j,S],Y=B,V},C.toNumber=function(){return+X(this)},C.toPrecision=function(d,_){return d!=null&&y(d,1,m),Xe(this,d,_,2)},C.toString=function(d){var _,S=this,q=S.s,L=S.e;return L===null?q?(_="Infinity",q<0&&(_="-"+_)):_="NaN":(d==null?_=L<=W||L>=H?D(T(S.c),L):N(T(S.c),L,"0"):d===10&&Le?(S=w(new z(S),M+L+1,U),_=N(T(S.c),S.e,"0")):(y(d,2,Ee.length,"Base"),_=O(N(T(S.c),L,"0"),10,d,q,!0)),q<0&&S.c[0]&&(_="-"+_)),_},C.valueOf=C.toJSON=function(){return X(this)},C._isBigNumber=!0,E!=null&&z.set(E),z}function b(E){var A=E|0;return E>0||E===A?A:A-1}function T(E){for(var A,O,p=1,C=E.length,F=E[0]+"";p<C;){for(A=E[p++]+"",O=f-A.length;O--;A="0"+A);F+=A}for(C=F.length;F.charCodeAt(--C)===48;);return F.slice(0,C+1||1)}function x(E,A){var O,p,C=E.c,F=A.c,M=E.s,U=A.s,W=E.e,H=A.e;if(!M||!U)return null;if(O=C&&!C[0],p=F&&!F[0],O||p)return O?p?0:-U:M;if(M!=U)return M;if(O=M<0,p=W==H,!C||!F)return p?0:!C^O?1:-1;if(!p)return W>H^O?1:-1;for(U=(W=C.length)<(H=F.length)?W:H,M=0;M<U;M++)if(C[M]!=F[M])return C[M]>F[M]^O?1:-1;return W==H?0:W>H^O?1:-1}function y(E,A,O,p){if(E<A||E>O||E!==t(E))throw Error(r+(p||"Argument")+(typeof E=="number"?E<A||E>O?" out of range: ":" not an integer: ":" not a primitive number: ")+String(E))}function g(E){var A=E.c.length-1;return b(E.e/f)==A&&E.c[A]%2!=0}function D(E,A){return(E.length>1?E.charAt(0)+"."+E.slice(1):E)+(A<0?"e":"e+")+A}function N(E,A,O){var p,C;if(A<0){for(C=O+".";++A;C+=O);E=C+E}else if(p=E.length,++A>p){for(C=O,A-=p;--A;C+=O);E+=C}else A<p&&(E=E.slice(0,A)+"."+E.slice(A));return E}n=v(),n.default=n.BigNumber=n,o.exports?o.exports=n:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=n)})(ee)})(Ds);var As=Ds.exports;(function(o){var e=As,n=o.exports;(function(){var i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a,t,r={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s;function u(l){return i.lastIndex=0,i.test(l)?'"'+l.replace(i,function(h){var c=r[h];return typeof c=="string"?c:"\\u"+("0000"+h.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+l+'"'}function f(l,h){var c,m,v,b,T=a,x,y=h[l],g=y!=null&&(y instanceof e||e.isBigNumber(y));switch(y&&typeof y=="object"&&typeof y.toJSON=="function"&&(y=y.toJSON(l)),typeof s=="function"&&(y=s.call(h,l,y)),typeof y){case"string":return g?y:u(y);case"number":return isFinite(y)?String(y):"null";case"boolean":case"null":case"bigint":return String(y);case"object":if(!y)return"null";if(a+=t,x=[],Object.prototype.toString.apply(y)==="[object Array]"){for(b=y.length,c=0;c<b;c+=1)x[c]=f(c,y)||"null";return v=x.length===0?"[]":a?`[
`+a+x.join(`,
`+a)+`
`+T+"]":"["+x.join(",")+"]",a=T,v}if(s&&typeof s=="object")for(b=s.length,c=0;c<b;c+=1)typeof s[c]=="string"&&(m=s[c],v=f(m,y),v&&x.push(u(m)+(a?": ":":")+v));else Object.keys(y).forEach(function(D){var N=f(D,y);N&&x.push(u(D)+(a?": ":":")+N)});return v=x.length===0?"{}":a?`{
`+a+x.join(`,
`+a)+`
`+T+"}":"{"+x.join(",")+"}",a=T,v}}typeof n.stringify!="function"&&(n.stringify=function(l,h,c){var m;if(a="",t="",typeof c=="number")for(m=0;m<c;m+=1)t+=" ";else typeof c=="string"&&(t=c);if(s=h,h&&typeof h!="function"&&(typeof h!="object"||typeof h.length!="number"))throw new Error("JSON.stringify");return f("",{"":l})})})()})(Cs);var ju=Cs.exports,ct=null;const qu=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,$u=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;var ku=function(o){var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(o!=null){if(o.strict===!0&&(e.strict=!0),o.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=o.alwaysParseAsBig===!0?o.alwaysParseAsBig:!1,e.useNativeBigInt=o.useNativeBigInt===!0?o.useNativeBigInt:!1,typeof o.constructorAction<"u")if(o.constructorAction==="error"||o.constructorAction==="ignore"||o.constructorAction==="preserve")e.constructorAction=o.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${o.constructorAction}`);if(typeof o.protoAction<"u")if(o.protoAction==="error"||o.protoAction==="ignore"||o.protoAction==="preserve")e.protoAction=o.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${o.protoAction}`)}var n,i,a={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},t,r=function(b){throw{name:"SyntaxError",message:b,at:n,text:t}},s=function(b){return b&&b!==i&&r("Expected '"+b+"' instead of '"+i+"'"),i=t.charAt(n),n+=1,i},u=function(){var b,T="";for(i==="-"&&(T="-",s("-"));i>="0"&&i<="9";)T+=i,s();if(i===".")for(T+=".";s()&&i>="0"&&i<="9";)T+=i;if(i==="e"||i==="E")for(T+=i,s(),(i==="-"||i==="+")&&(T+=i,s());i>="0"&&i<="9";)T+=i,s();if(b=+T,!isFinite(b))r("Bad number");else return ct==null&&(ct=As),T.length>15?e.storeAsString?T:e.useNativeBigInt?BigInt(T):new ct(T):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(b):new ct(b):b},f=function(){var b,T,x="",y;if(i==='"')for(var g=n;s();){if(i==='"')return n-1>g&&(x+=t.substring(g,n-1)),s(),x;if(i==="\\"){if(n-1>g&&(x+=t.substring(g,n-1)),s(),i==="u"){for(y=0,T=0;T<4&&(b=parseInt(s(),16),!!isFinite(b));T+=1)y=y*16+b;x+=String.fromCharCode(y)}else if(typeof a[i]=="string")x+=a[i];else break;g=n}}r("Bad string")},l=function(){for(;i&&i<=" ";)s()},h=function(){switch(i){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null}r("Unexpected '"+i+"'")},c,m=function(){var b=[];if(i==="["){if(s("["),l(),i==="]")return s("]"),b;for(;i;){if(b.push(c()),l(),i==="]")return s("]"),b;s(","),l()}}r("Bad array")},v=function(){var b,T=Object.create(null);if(i==="{"){if(s("{"),l(),i==="}")return s("}"),T;for(;i;){if(b=f(),l(),s(":"),e.strict===!0&&Object.hasOwnProperty.call(T,b)&&r('Duplicate key "'+b+'"'),qu.test(b)===!0?e.protoAction==="error"?r("Object contains forbidden prototype property"):e.protoAction==="ignore"?c():T[b]=c():$u.test(b)===!0?e.constructorAction==="error"?r("Object contains forbidden constructor property"):e.constructorAction==="ignore"?c():T[b]=c():T[b]=c(),l(),i==="}")return s("}"),T;s(","),l()}}r("Bad object")};return c=function(){switch(l(),i){case"{":return v();case"[":return m();case'"':return f();case"-":return u();default:return i>="0"&&i<="9"?u():h()}},function(b,T){var x;return t=b+"",n=0,i=" ",x=c(),l(),i&&r("Syntax error"),typeof T=="function"?function y(g,D){var N,E=g[D];return E&&typeof E=="object"&&Object.keys(E).forEach(function(A){N=y(E,A),N!==void 0?E[A]=N:delete E[A]}),T.call(g,D,E)}({"":x},""):x}},Bu=ku,Ns=ju.stringify,Is=Bu;Nt.exports=function(o){return{parse:Is(o),stringify:Ns}};Nt.exports.parse=Is();Nt.exports.stringify=Ns;var _s=Nt.exports,It={};const Uu="@alicloud/pop-core",Xu="1.8.0",Vu="AliCloud POP SDK core",zu="index.js",Wu="lib/rpc.d.ts",Hu={lint:"eslint --fix lib test",test:"mocha -R spec test/*.test.js","test-cov":"nyc -r=html -r=text -r=lcov mocha -t 3000 -R spec test/*.test.js","test-integration":"mocha -R spec test/*.integration.js",ci:"npm run lint && npm run test-cov"},Gu=["Aliyun","AliCloud","OpenAPI","POP","SDK","Core"],Ku="Jackson Tian",Yu="MIT",Ju={debug:"^3.1.0",httpx:"^2.1.2","json-bigint":"^1.0.0",kitx:"^1.2.1",xml2js:"^0.5.0"},Qu=["lib","index.js"],Zu={eslint:"^6.6.0","expect.js":"^0.3.1",mocha:"^4",muk:"^0.5.3",nyc:"^12.0.2",rewire:"^4.0.1"},ec={test:"test"},tc={node:">=8.0.0"},rc={type:"git",url:"git+https://github.com/aliyun/openapi-core-nodejs-sdk.git"},nc={url:"https://github.com/aliyun/openapi-core-nodejs-sdk/issues"},ic="https://github.com/aliyun/openapi-core-nodejs-sdk#readme",oc={name:Uu,version:Xu,description:Vu,main:zu,types:Wu,scripts:Hu,keywords:Gu,author:Ku,license:Yu,dependencies:Ju,files:Qu,devDependencies:Zu,directories:ec,engines:tc,repository:rc,bugs:nc,homepage:ic},ro=$e,On=oc;It.DEFAULT_UA=`AlibabaCloud (${ro.platform()}; ${ro.arch()}) Node.js/${process.version} Core/${On.version}`;It.DEFAULT_CLIENT=`Node.js(${process.version}), ${On.name}: ${On.version}`;const Ke=An,no=ze,je=Sn,sc=_s,io=It;function xs(o){return o.slice(0,1).toUpperCase()+o.slice(1)}function ac(o){for(var e=Object.keys(o),n={},i=0;i<e.length;i++){var a=e[i];n[xs(a)]=o[a]}return n}function oo(){var o=new Date,e=o.getUTCFullYear(),n=je.pad2(o.getUTCMonth()+1),i=je.pad2(o.getUTCDate()),a=je.pad2(o.getUTCHours()),t=je.pad2(o.getUTCMinutes()),r=je.pad2(o.getUTCSeconds());return`${e}-${n}-${i}T${a}:${t}:${r}Z`}function Qe(o){var e=encodeURIComponent(o);return e.replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function Cn(o,e,n){for(var i=0;i<n.length;i++){var a=n[i];if(Array.isArray(a))Cn(o,`${e}.${i+1}`,a);else if(a&&typeof a=="object"){const r=Object.keys(a);for(var t=0;t<r.length;t++)Array.isArray(a[r[t]])?Cn(o,`${e}.${i+1}.${r[t]}`,a[r[t]]):o[`${e}.${i+1}.${r[t]}`]=a[r[t]]}else o[`${e}.${i+1}`]=a}}function uc(o){var e={},n=Object.keys(o);for(let t=0;t<n.length;t++){var i=n[t],a=o[i];Array.isArray(a)?Cn(e,i,a):e[i]=a}return e}function cc(o){var e=[],n=uc(o),i=Object.keys(n).sort();for(let r=0;r<i.length;r++){var a=i[r],t=n[a];e.push([Qe(a),Qe(t)])}return e}function Pr(o){for(var e=[],n=0;n<o.length;n++){var[i,a]=o[n];e.push(i+"="+a)}return e.join("&")}let fc=class{constructor(e,n){if(Ke(e,'must pass "config"'),Ke(e.endpoint,'must pass "config.endpoint"'),!e.endpoint.startsWith("https://")&&!e.endpoint.startsWith("http://"))throw new Error(`"config.endpoint" must starts with 'https://' or 'http://'.`);if(Ke(e.apiVersion,'must pass "config.apiVersion"'),e.credentialsProvider){if(typeof e.credentialsProvider.getCredentials!="function")throw new Error('must pass "config.credentialsProvider" with function "getCredentials()"');this.credentialsProvider=e.credentialsProvider}else{Ke(e.accessKeyId,'must pass "config.accessKeyId"');var i=e.secretAccessKey||e.accessKeySecret;Ke(i,'must pass "config.accessKeySecret"'),this.accessKeyId=e.accessKeyId,this.accessKeySecret=i,this.securityToken=e.securityToken,this.credentialsProvider={getCredentials:async()=>({accessKeyId:e.accessKeyId,accessKeySecret:i,securityToken:e.securityToken})}}if(e.endpoint.endsWith("/")&&(e.endpoint=e.endpoint.slice(0,-1)),this.endpoint=e.endpoint,this.apiVersion=e.apiVersion,this.verbose=n===!0,this.codes=new Set([200,"200","OK","Success","success"]),e.codes)for(var a of e.codes)this.codes.add(a);this.opts=e.opts||{};var t=this.endpoint.startsWith("https://")?Et:wt;this.keepAliveAgent=new t.Agent({keepAlive:!0,keepAliveMsecs:3e3})}async request(e,n={},i={}){const a=await this.credentialsProvider.getCredentials();i=Object.assign({headers:{"x-sdk-client":io.DEFAULT_CLIENT,"user-agent":io.DEFAULT_UA,"x-acs-action":e,"x-acs-version":this.apiVersion}},this.opts,i),i.formatAction!==!1&&(e=xs(e)),i.formatParams!==!1&&(n=ac(n));const t={Format:"JSON",Timestamp:oo(),Version:this.apiVersion};a&&a.accessKeyId&&a.accessKeySecret&&(t.SignatureMethod="HMAC-SHA1",t.SignatureVersion="1.0",t.SignatureNonce=je.makeNonce(),t.AccessKeyId=a.accessKeyId,a.securityToken&&(t.SecurityToken=a.securityToken)),n=Object.assign({Action:e},t,n);const r=(i.method||"GET").toUpperCase(),s=cc(n);if(a&&a.accessKeyId&&a.accessKeySecret){const m=Pr(s),v=`${r}&${Qe("/")}&${Qe(m)}`,b=a.accessKeySecret+"&",T=je.sha1(v,b,"base64");s.push(["Signature",Qe(T)])}const u=i.method==="POST"?`${this.endpoint}/`:`${this.endpoint}/?${Pr(s)}`,f={url:u,request:null,response:null};i&&!i.agent&&(i.agent=this.keepAliveAgent),i.method==="POST"&&(i.headers=i.headers||{},i.headers["content-type"]="application/x-www-form-urlencoded",i.data=Pr(s));const l=await no.request(u,i);f.request={headers:l.req.getHeaders?l.req.getHeaders():l.req._headers},f.response={statusCode:l.statusCode,headers:l.headers};const h=await no.read(l),c=sc.parse(h);if(c.Code&&!this.codes.has(c.Code)){const m=new Error(`${c.Message}, URL: ${u}`);throw m.name=c.Code+"Error",m.data=c,m.code=c.Code,m.url=u,m.entry=f,m}return this.verbose?[c,f]:c}_buildParams(){const e={Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureNonce:je.makeNonce(),SignatureVersion:"1.0",Timestamp:oo(),AccessKeyId:this.accessKeyId,Version:this.apiVersion};return this.securityToken&&(e.SecurityToken=this.securityToken),e}};var Fs=fc,Me={},Lr={},so;function Pn(){return so||(so=1,(function(){Lr.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(ee)),Lr}var Mr={},xe={},Fe={},ao;function Pe(){return ao||(ao=1,(function(){var o,e,n,i,a,t,r,s=[].slice,u={}.hasOwnProperty;o=function(){var f,l,h,c,m,v;if(v=arguments[0],m=2<=arguments.length?s.call(arguments,1):[],a(Object.assign))Object.assign.apply(null,arguments);else for(f=0,h=m.length;f<h;f++)if(c=m[f],c!=null)for(l in c)u.call(c,l)&&(v[l]=c[l]);return v},a=function(f){return!!f&&Object.prototype.toString.call(f)==="[object Function]"},t=function(f){var l;return!!f&&((l=typeof f)=="function"||l==="object")},n=function(f){return a(Array.isArray)?Array.isArray(f):Object.prototype.toString.call(f)==="[object Array]"},i=function(f){var l;if(n(f))return!f.length;for(l in f)if(u.call(f,l))return!1;return!0},r=function(f){var l,h;return t(f)&&(h=Object.getPrototypeOf(f))&&(l=h.constructor)&&typeof l=="function"&&l instanceof l&&Function.prototype.toString.call(l)===Function.prototype.toString.call(Object)},e=function(f){return a(f.valueOf)?f.valueOf():f},Fe.assign=o,Fe.isFunction=a,Fe.isObject=t,Fe.isArray=n,Fe.isEmpty=i,Fe.isPlainObject=r,Fe.getValue=e}).call(ee)),Fe}var Rr={exports:{}},uo;function Ss(){return uo||(uo=1,(function(){Rr.exports=function(){function o(){}return o.prototype.hasFeature=function(e,n){return!0},o.prototype.createDocumentType=function(e,n,i){throw new Error("This DOM method is not implemented.")},o.prototype.createDocument=function(e,n,i){throw new Error("This DOM method is not implemented.")},o.prototype.createHTMLDocument=function(e){throw new Error("This DOM method is not implemented.")},o.prototype.getFeature=function(e,n){throw new Error("This DOM method is not implemented.")},o}()}).call(ee)),Rr.exports}var jr={exports:{}},qr={exports:{}},$r={exports:{}},co;function lc(){return co||(co=1,(function(){$r.exports=function(){function o(){}return o.prototype.handleError=function(e){throw new Error(e)},o}()}).call(ee)),$r.exports}var kr={exports:{}},fo;function pc(){return fo||(fo=1,(function(){kr.exports=function(){function o(e){this.arr=e||[]}return Object.defineProperty(o.prototype,"length",{get:function(){return this.arr.length}}),o.prototype.item=function(e){return this.arr[e]||null},o.prototype.contains=function(e){return this.arr.indexOf(e)!==-1},o}()}).call(ee)),kr.exports}var lo;function hc(){return lo||(lo=1,(function(){var o,e;o=lc(),e=pc(),qr.exports=function(){function n(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new o,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(n.prototype,"parameterNames",{get:function(){return new e(Object.keys(this.defaultParams))}}),n.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},n.prototype.canSetParameter=function(i,a){return!0},n.prototype.setParameter=function(i,a){return a!=null?this.params[i]=a:delete this.params[i]},n}()}).call(ee)),qr.exports}var Br={exports:{}},Ur={exports:{}},Xr={exports:{}},po;function fe(){return po||(po=1,(function(){Xr.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(ee)),Xr.exports}var Vr={exports:{}},ho;function Ps(){return ho||(ho=1,(function(){var o;o=fe(),Ae(),Vr.exports=function(){function e(n,i,a){if(this.parent=n,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),i==null)throw new Error("Missing attribute name. "+this.debugInfo(i));this.name=this.stringify.name(i),this.value=this.stringify.attValue(a),this.type=o.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(n){return this.value=n||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(n){return this.options.writer.attribute(this,this.options.writer.filterOptions(n))},e.prototype.debugInfo=function(n){return n=n||this.name,n==null?"parent: <"+this.parent.name+">":"attribute: {"+n+"}, parent: <"+this.parent.name+">"},e.prototype.isEqualNode=function(n){return!(n.namespaceURI!==this.namespaceURI||n.prefix!==this.prefix||n.localName!==this.localName||n.value!==this.value)},e}()}).call(ee)),Vr.exports}var zr={exports:{}},mo;function Ln(){return mo||(mo=1,(function(){zr.exports=function(){function o(e){this.nodes=e}return Object.defineProperty(o.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),o.prototype.clone=function(){return this.nodes=null},o.prototype.getNamedItem=function(e){return this.nodes[e]},o.prototype.setNamedItem=function(e){var n;return n=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,n||null},o.prototype.removeNamedItem=function(e){var n;return n=this.nodes[e],delete this.nodes[e],n||null},o.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},o.prototype.getNamedItemNS=function(e,n){throw new Error("This DOM method is not implemented.")},o.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},o.prototype.removeNamedItemNS=function(e,n){throw new Error("This DOM method is not implemented.")},o}()}).call(ee)),zr.exports}var go;function Mn(){return go||(go=1,(function(){var o,e,n,i,a,t,r,s,u=function(l,h){for(var c in h)f.call(h,c)&&(l[c]=h[c]);function m(){this.constructor=l}return m.prototype=h.prototype,l.prototype=new m,l.__super__=h.prototype,l},f={}.hasOwnProperty;s=Pe(),r=s.isObject,t=s.isFunction,a=s.getValue,i=Ae(),o=fe(),e=Ps(),n=Ln(),Ur.exports=function(l){u(h,l);function h(c,m,v){var b,T,x,y;if(h.__super__.constructor.call(this,c),m==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(m),this.type=o.Element,this.attribs={},this.schemaTypeInfo=null,v!=null&&this.attribute(v),c.type===o.Document&&(this.isRoot=!0,this.documentObject=c,c.rootObject=this,c.children)){for(y=c.children,T=0,x=y.length;T<x;T++)if(b=y[T],b.type===o.DocType){b.name=this.name;break}}}return Object.defineProperty(h.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(h.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(h.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(h.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(h.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new n(this.attribs)),this.attributeMap}}),h.prototype.clone=function(){var c,m,v,b;v=Object.create(this),v.isRoot&&(v.documentObject=null),v.attribs={},b=this.attribs;for(m in b)f.call(b,m)&&(c=b[m],v.attribs[m]=c.clone());return v.children=[],this.children.forEach(function(T){var x;return x=T.clone(),x.parent=v,v.children.push(x)}),v},h.prototype.attribute=function(c,m){var v,b;if(c!=null&&(c=a(c)),r(c))for(v in c)f.call(c,v)&&(b=c[v],this.attribute(v,b));else t(m)&&(m=m.apply()),this.options.keepNullAttributes&&m==null?this.attribs[c]=new e(this,c,""):m!=null&&(this.attribs[c]=new e(this,c,m));return this},h.prototype.removeAttribute=function(c){var m,v,b;if(c==null)throw new Error("Missing attribute name. "+this.debugInfo());if(c=a(c),Array.isArray(c))for(v=0,b=c.length;v<b;v++)m=c[v],delete this.attribs[m];else delete this.attribs[c];return this},h.prototype.toString=function(c){return this.options.writer.element(this,this.options.writer.filterOptions(c))},h.prototype.att=function(c,m){return this.attribute(c,m)},h.prototype.a=function(c,m){return this.attribute(c,m)},h.prototype.getAttribute=function(c){return this.attribs.hasOwnProperty(c)?this.attribs[c].value:null},h.prototype.setAttribute=function(c,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNode=function(c){return this.attribs.hasOwnProperty(c)?this.attribs[c]:null},h.prototype.setAttributeNode=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.removeAttributeNode=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagName=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNS=function(c,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setAttributeNS=function(c,m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.removeAttributeNS=function(c,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNodeNS=function(c,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setAttributeNodeNS=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagNameNS=function(c,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.hasAttribute=function(c){return this.attribs.hasOwnProperty(c)},h.prototype.hasAttributeNS=function(c,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setIdAttribute=function(c,m){return this.attribs.hasOwnProperty(c)?this.attribs[c].isId:m},h.prototype.setIdAttributeNS=function(c,m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setIdAttributeNode=function(c,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagName=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagNameNS=function(c,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByClassName=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.isEqualNode=function(c){var m,v,b;if(!h.__super__.isEqualNode.apply(this,arguments).isEqualNode(c)||c.namespaceURI!==this.namespaceURI||c.prefix!==this.prefix||c.localName!==this.localName||c.attribs.length!==this.attribs.length)return!1;for(m=v=0,b=this.attribs.length-1;0<=b?v<=b:v>=b;m=0<=b?++v:--v)if(!this.attribs[m].isEqualNode(c.attribs[m]))return!1;return!0},h}(i)}).call(ee)),Ur.exports}var Wr={exports:{}},Hr={exports:{}},yo;function _t(){return yo||(yo=1,(function(){var o,e=function(i,a){for(var t in a)n.call(a,t)&&(i[t]=a[t]);function r(){this.constructor=i}return r.prototype=a.prototype,i.prototype=new r,i.__super__=a.prototype,i},n={}.hasOwnProperty;o=Ae(),Hr.exports=function(i){e(a,i);function a(t){a.__super__.constructor.call(this,t),this.value=""}return Object.defineProperty(a.prototype,"data",{get:function(){return this.value},set:function(t){return this.value=t||""}}),Object.defineProperty(a.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(a.prototype,"textContent",{get:function(){return this.value},set:function(t){return this.value=t||""}}),a.prototype.clone=function(){return Object.create(this)},a.prototype.substringData=function(t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.appendData=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.insertData=function(t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.deleteData=function(t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.replaceData=function(t,r,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.isEqualNode=function(t){return!(!a.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)||t.data!==this.data)},a}(o)}).call(ee)),Hr.exports}var vo;function Rn(){return vo||(vo=1,(function(){var o,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function s(){this.constructor=a}return s.prototype=t.prototype,a.prototype=new s,a.__super__=t.prototype,a},i={}.hasOwnProperty;o=fe(),e=_t(),Wr.exports=function(a){n(t,a);function t(r,s){if(t.__super__.constructor.call(this,r),s==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=o.CData,this.value=this.stringify.cdata(s)}return t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(r){return this.options.writer.cdata(this,this.options.writer.filterOptions(r))},t}(e)}).call(ee)),Wr.exports}var Gr={exports:{}},wo;function jn(){return wo||(wo=1,(function(){var o,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function s(){this.constructor=a}return s.prototype=t.prototype,a.prototype=new s,a.__super__=t.prototype,a},i={}.hasOwnProperty;o=fe(),e=_t(),Gr.exports=function(a){n(t,a);function t(r,s){if(t.__super__.constructor.call(this,r),s==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=o.Comment,this.value=this.stringify.comment(s)}return t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(r){return this.options.writer.comment(this,this.options.writer.filterOptions(r))},t}(e)}).call(ee)),Gr.exports}var Kr={exports:{}},Eo;function qn(){return Eo||(Eo=1,(function(){var o,e,n,i=function(t,r){for(var s in r)a.call(r,s)&&(t[s]=r[s]);function u(){this.constructor=t}return u.prototype=r.prototype,t.prototype=new u,t.__super__=r.prototype,t},a={}.hasOwnProperty;n=Pe().isObject,e=Ae(),o=fe(),Kr.exports=function(t){i(r,t);function r(s,u,f,l){var h;r.__super__.constructor.call(this,s),n(u)&&(h=u,u=h.version,f=h.encoding,l=h.standalone),u||(u="1.0"),this.type=o.Declaration,this.version=this.stringify.xmlVersion(u),f!=null&&(this.encoding=this.stringify.xmlEncoding(f)),l!=null&&(this.standalone=this.stringify.xmlStandalone(l))}return r.prototype.toString=function(s){return this.options.writer.declaration(this,this.options.writer.filterOptions(s))},r}(e)}).call(ee)),Kr.exports}var Yr={exports:{}},Jr={exports:{}},bo;function $n(){return bo||(bo=1,(function(){var o,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function s(){this.constructor=a}return s.prototype=t.prototype,a.prototype=new s,a.__super__=t.prototype,a},i={}.hasOwnProperty;e=Ae(),o=fe(),Jr.exports=function(a){n(t,a);function t(r,s,u,f,l,h){if(t.__super__.constructor.call(this,r),s==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(u==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(s));if(!f)throw new Error("Missing DTD attribute type. "+this.debugInfo(s));if(!l)throw new Error("Missing DTD attribute default. "+this.debugInfo(s));if(l.indexOf("#")!==0&&(l="#"+l),!l.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(s));if(h&&!l.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(s));this.elementName=this.stringify.name(s),this.type=o.AttributeDeclaration,this.attributeName=this.stringify.name(u),this.attributeType=this.stringify.dtdAttType(f),h&&(this.defaultValue=this.stringify.dtdAttDefault(h)),this.defaultValueType=l}return t.prototype.toString=function(r){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(r))},t}(e)}).call(ee)),Jr.exports}var Qr={exports:{}},To;function kn(){return To||(To=1,(function(){var o,e,n,i=function(t,r){for(var s in r)a.call(r,s)&&(t[s]=r[s]);function u(){this.constructor=t}return u.prototype=r.prototype,t.prototype=new u,t.__super__=r.prototype,t},a={}.hasOwnProperty;n=Pe().isObject,e=Ae(),o=fe(),Qr.exports=function(t){i(r,t);function r(s,u,f,l){if(r.__super__.constructor.call(this,s),f==null)throw new Error("Missing DTD entity name. "+this.debugInfo(f));if(l==null)throw new Error("Missing DTD entity value. "+this.debugInfo(f));if(this.pe=!!u,this.name=this.stringify.name(f),this.type=o.EntityDeclaration,!n(l))this.value=this.stringify.dtdEntityValue(l),this.internal=!0;else{if(!l.pubID&&!l.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(f));if(l.pubID&&!l.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(f));if(this.internal=!1,l.pubID!=null&&(this.pubID=this.stringify.dtdPubID(l.pubID)),l.sysID!=null&&(this.sysID=this.stringify.dtdSysID(l.sysID)),l.nData!=null&&(this.nData=this.stringify.dtdNData(l.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(f))}}return Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(r.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(r.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"xmlVersion",{get:function(){return null}}),r.prototype.toString=function(s){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(s))},r}(e)}).call(ee)),Qr.exports}var Zr={exports:{}},Oo;function Bn(){return Oo||(Oo=1,(function(){var o,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function s(){this.constructor=a}return s.prototype=t.prototype,a.prototype=new s,a.__super__=t.prototype,a},i={}.hasOwnProperty;e=Ae(),o=fe(),Zr.exports=function(a){n(t,a);function t(r,s,u){if(t.__super__.constructor.call(this,r),s==null)throw new Error("Missing DTD element name. "+this.debugInfo());u||(u="(#PCDATA)"),Array.isArray(u)&&(u="("+u.join(",")+")"),this.name=this.stringify.name(s),this.type=o.ElementDeclaration,this.value=this.stringify.dtdElementValue(u)}return t.prototype.toString=function(r){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(r))},t}(e)}).call(ee)),Zr.exports}var en={exports:{}},Co;function Un(){return Co||(Co=1,(function(){var o,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function s(){this.constructor=a}return s.prototype=t.prototype,a.prototype=new s,a.__super__=t.prototype,a},i={}.hasOwnProperty;e=Ae(),o=fe(),en.exports=function(a){n(t,a);function t(r,s,u){if(t.__super__.constructor.call(this,r),s==null)throw new Error("Missing DTD notation name. "+this.debugInfo(s));if(!u.pubID&&!u.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(s));this.name=this.stringify.name(s),this.type=o.NotationDeclaration,u.pubID!=null&&(this.pubID=this.stringify.dtdPubID(u.pubID)),u.sysID!=null&&(this.sysID=this.stringify.dtdSysID(u.sysID))}return Object.defineProperty(t.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(t.prototype,"systemId",{get:function(){return this.sysID}}),t.prototype.toString=function(r){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(r))},t}(e)}).call(ee)),en.exports}var Do;function Xn(){return Do||(Do=1,(function(){var o,e,n,i,a,t,r,s,u=function(l,h){for(var c in h)f.call(h,c)&&(l[c]=h[c]);function m(){this.constructor=l}return m.prototype=h.prototype,l.prototype=new m,l.__super__=h.prototype,l},f={}.hasOwnProperty;s=Pe().isObject,r=Ae(),o=fe(),e=$n(),i=kn(),n=Bn(),a=Un(),t=Ln(),Yr.exports=function(l){u(h,l);function h(c,m,v){var b,T,x,y,g,D;if(h.__super__.constructor.call(this,c),this.type=o.DocType,c.children){for(y=c.children,T=0,x=y.length;T<x;T++)if(b=y[T],b.type===o.Element){this.name=b.name;break}}this.documentObject=c,s(m)&&(g=m,m=g.pubID,v=g.sysID),v==null&&(D=[m,v],v=D[0],m=D[1]),m!=null&&(this.pubID=this.stringify.dtdPubID(m)),v!=null&&(this.sysID=this.stringify.dtdSysID(v))}return Object.defineProperty(h.prototype,"entities",{get:function(){var c,m,v,b,T;for(b={},T=this.children,m=0,v=T.length;m<v;m++)c=T[m],c.type===o.EntityDeclaration&&!c.pe&&(b[c.name]=c);return new t(b)}}),Object.defineProperty(h.prototype,"notations",{get:function(){var c,m,v,b,T;for(b={},T=this.children,m=0,v=T.length;m<v;m++)c=T[m],c.type===o.NotationDeclaration&&(b[c.name]=c);return new t(b)}}),Object.defineProperty(h.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(h.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(h.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),h.prototype.element=function(c,m){var v;return v=new n(this,c,m),this.children.push(v),this},h.prototype.attList=function(c,m,v,b,T){var x;return x=new e(this,c,m,v,b,T),this.children.push(x),this},h.prototype.entity=function(c,m){var v;return v=new i(this,!1,c,m),this.children.push(v),this},h.prototype.pEntity=function(c,m){var v;return v=new i(this,!0,c,m),this.children.push(v),this},h.prototype.notation=function(c,m){var v;return v=new a(this,c,m),this.children.push(v),this},h.prototype.toString=function(c){return this.options.writer.docType(this,this.options.writer.filterOptions(c))},h.prototype.ele=function(c,m){return this.element(c,m)},h.prototype.att=function(c,m,v,b,T){return this.attList(c,m,v,b,T)},h.prototype.ent=function(c,m){return this.entity(c,m)},h.prototype.pent=function(c,m){return this.pEntity(c,m)},h.prototype.not=function(c,m){return this.notation(c,m)},h.prototype.up=function(){return this.root()||this.documentObject},h.prototype.isEqualNode=function(c){return!(!h.__super__.isEqualNode.apply(this,arguments).isEqualNode(c)||c.name!==this.name||c.publicId!==this.publicId||c.systemId!==this.systemId)},h}(r)}).call(ee)),Yr.exports}var tn={exports:{}},Ao;function Vn(){return Ao||(Ao=1,(function(){var o,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function s(){this.constructor=a}return s.prototype=t.prototype,a.prototype=new s,a.__super__=t.prototype,a},i={}.hasOwnProperty;o=fe(),e=Ae(),tn.exports=function(a){n(t,a);function t(r,s){if(t.__super__.constructor.call(this,r),s==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=o.Raw,this.value=this.stringify.raw(s)}return t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(r){return this.options.writer.raw(this,this.options.writer.filterOptions(r))},t}(e)}).call(ee)),tn.exports}var rn={exports:{}},No;function zn(){return No||(No=1,(function(){var o,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function s(){this.constructor=a}return s.prototype=t.prototype,a.prototype=new s,a.__super__=t.prototype,a},i={}.hasOwnProperty;o=fe(),e=_t(),rn.exports=function(a){n(t,a);function t(r,s){if(t.__super__.constructor.call(this,r),s==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=o.Text,this.value=this.stringify.text(s)}return Object.defineProperty(t.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(t.prototype,"wholeText",{get:function(){var r,s,u;for(u="",s=this.previousSibling;s;)u=s.data+u,s=s.previousSibling;for(u+=this.data,r=this.nextSibling;r;)u=u+r.data,r=r.nextSibling;return u}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(r){return this.options.writer.text(this,this.options.writer.filterOptions(r))},t.prototype.splitText=function(r){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.replaceWholeText=function(r){throw new Error("This DOM method is not implemented."+this.debugInfo())},t}(e)}).call(ee)),rn.exports}var nn={exports:{}},Io;function Wn(){return Io||(Io=1,(function(){var o,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function s(){this.constructor=a}return s.prototype=t.prototype,a.prototype=new s,a.__super__=t.prototype,a},i={}.hasOwnProperty;o=fe(),e=_t(),nn.exports=function(a){n(t,a);function t(r,s,u){if(t.__super__.constructor.call(this,r),s==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=o.ProcessingInstruction,this.target=this.stringify.insTarget(s),this.name=this.target,u&&(this.value=this.stringify.insValue(u))}return t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(r){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(r))},t.prototype.isEqualNode=function(r){return!(!t.__super__.isEqualNode.apply(this,arguments).isEqualNode(r)||r.target!==this.target)},t}(e)}).call(ee)),nn.exports}var on={exports:{}},_o;function Ls(){return _o||(_o=1,(function(){var o,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function s(){this.constructor=a}return s.prototype=t.prototype,a.prototype=new s,a.__super__=t.prototype,a},i={}.hasOwnProperty;e=Ae(),o=fe(),on.exports=function(a){n(t,a);function t(r){t.__super__.constructor.call(this,r),this.type=o.Dummy}return t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(r){return""},t}(e)}).call(ee)),on.exports}var sn={exports:{}},xo;function dc(){return xo||(xo=1,(function(){sn.exports=function(){function o(e){this.nodes=e}return Object.defineProperty(o.prototype,"length",{get:function(){return this.nodes.length||0}}),o.prototype.clone=function(){return this.nodes=null},o.prototype.item=function(e){return this.nodes[e]||null},o}()}).call(ee)),sn.exports}var an={exports:{}},Fo;function mc(){return Fo||(Fo=1,(function(){an.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(ee)),an.exports}var So;function Ae(){return So||(So=1,(function(){var o,e,n,i,a,t,r,s,u,f,l,h,c,m,v,b,T,x={}.hasOwnProperty;T=Pe(),b=T.isObject,v=T.isFunction,m=T.isEmpty,c=T.getValue,s=null,n=null,i=null,a=null,t=null,l=null,h=null,f=null,r=null,e=null,u=null,o=null,Br.exports=function(){function y(g){this.parent=g,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,s||(s=Mn(),n=Rn(),i=jn(),a=qn(),t=Xn(),l=Vn(),h=zn(),f=Wn(),r=Ls(),e=fe(),u=dc(),Ln(),o=mc())}return Object.defineProperty(y.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(y.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(y.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(y.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(y.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new u(this.children)),this.childNodeList}}),Object.defineProperty(y.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(y.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(y.prototype,"previousSibling",{get:function(){var g;return g=this.parent.children.indexOf(this),this.parent.children[g-1]||null}}),Object.defineProperty(y.prototype,"nextSibling",{get:function(){var g;return g=this.parent.children.indexOf(this),this.parent.children[g+1]||null}}),Object.defineProperty(y.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(y.prototype,"textContent",{get:function(){var g,D,N,E,A;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(A="",E=this.children,D=0,N=E.length;D<N;D++)g=E[D],g.textContent&&(A+=g.textContent);return A}else return null},set:function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),y.prototype.setParent=function(g){var D,N,E,A,O;for(this.parent=g,g&&(this.options=g.options,this.stringify=g.stringify),A=this.children,O=[],N=0,E=A.length;N<E;N++)D=A[N],O.push(D.setParent(this));return O},y.prototype.element=function(g,D,N){var E,A,O,p,C,F,M,U,W,H,J;if(F=null,D===null&&N==null&&(W=[{},null],D=W[0],N=W[1]),D==null&&(D={}),D=c(D),b(D)||(H=[D,N],N=H[0],D=H[1]),g!=null&&(g=c(g)),Array.isArray(g))for(O=0,M=g.length;O<M;O++)A=g[O],F=this.element(A);else if(v(g))F=this.element(g.apply());else if(b(g)){for(C in g)if(x.call(g,C))if(J=g[C],v(J)&&(J=J.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&C.indexOf(this.stringify.convertAttKey)===0)F=this.attribute(C.substr(this.stringify.convertAttKey.length),J);else if(!this.options.separateArrayItems&&Array.isArray(J)&&m(J))F=this.dummy();else if(b(J)&&m(J))F=this.element(C);else if(!this.options.keepNullNodes&&J==null)F=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(J))for(p=0,U=J.length;p<U;p++)A=J[p],E={},E[C]=A,F=this.element(E);else b(J)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&C.indexOf(this.stringify.convertTextKey)===0?F=this.element(J):(F=this.element(C),F.element(J)):F=this.element(C,J)}else!this.options.keepNullNodes&&N===null?F=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&g.indexOf(this.stringify.convertTextKey)===0?F=this.text(N):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&g.indexOf(this.stringify.convertCDataKey)===0?F=this.cdata(N):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&g.indexOf(this.stringify.convertCommentKey)===0?F=this.comment(N):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&g.indexOf(this.stringify.convertRawKey)===0?F=this.raw(N):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&g.indexOf(this.stringify.convertPIKey)===0?F=this.instruction(g.substr(this.stringify.convertPIKey.length),N):F=this.node(g,D,N);if(F==null)throw new Error("Could not create any elements with: "+g+". "+this.debugInfo());return F},y.prototype.insertBefore=function(g,D,N){var E,A,O,p,C;if(g!=null&&g.type)return O=g,p=D,O.setParent(this),p?(A=children.indexOf(p),C=children.splice(A),children.push(O),Array.prototype.push.apply(children,C)):children.push(O),O;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(g));return A=this.parent.children.indexOf(this),C=this.parent.children.splice(A),E=this.parent.element(g,D,N),Array.prototype.push.apply(this.parent.children,C),E},y.prototype.insertAfter=function(g,D,N){var E,A,O;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(g));return A=this.parent.children.indexOf(this),O=this.parent.children.splice(A+1),E=this.parent.element(g,D,N),Array.prototype.push.apply(this.parent.children,O),E},y.prototype.remove=function(){var g;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return g=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[g,g-g+1].concat([])),this.parent},y.prototype.node=function(g,D,N){var E,A;return g!=null&&(g=c(g)),D||(D={}),D=c(D),b(D)||(A=[D,N],N=A[0],D=A[1]),E=new s(this,g,D),N!=null&&E.text(N),this.children.push(E),E},y.prototype.text=function(g){var D;return b(g)&&this.element(g),D=new h(this,g),this.children.push(D),this},y.prototype.cdata=function(g){var D;return D=new n(this,g),this.children.push(D),this},y.prototype.comment=function(g){var D;return D=new i(this,g),this.children.push(D),this},y.prototype.commentBefore=function(g){var D,N;return D=this.parent.children.indexOf(this),N=this.parent.children.splice(D),this.parent.comment(g),Array.prototype.push.apply(this.parent.children,N),this},y.prototype.commentAfter=function(g){var D,N;return D=this.parent.children.indexOf(this),N=this.parent.children.splice(D+1),this.parent.comment(g),Array.prototype.push.apply(this.parent.children,N),this},y.prototype.raw=function(g){var D;return D=new l(this,g),this.children.push(D),this},y.prototype.dummy=function(){var g;return g=new r(this),g},y.prototype.instruction=function(g,D){var N,E,A,O,p;if(g!=null&&(g=c(g)),D!=null&&(D=c(D)),Array.isArray(g))for(O=0,p=g.length;O<p;O++)N=g[O],this.instruction(N);else if(b(g))for(N in g)x.call(g,N)&&(E=g[N],this.instruction(N,E));else v(D)&&(D=D.apply()),A=new f(this,g,D),this.children.push(A);return this},y.prototype.instructionBefore=function(g,D){var N,E;return N=this.parent.children.indexOf(this),E=this.parent.children.splice(N),this.parent.instruction(g,D),Array.prototype.push.apply(this.parent.children,E),this},y.prototype.instructionAfter=function(g,D){var N,E;return N=this.parent.children.indexOf(this),E=this.parent.children.splice(N+1),this.parent.instruction(g,D),Array.prototype.push.apply(this.parent.children,E),this},y.prototype.declaration=function(g,D,N){var E,A;return E=this.document(),A=new a(E,g,D,N),E.children.length===0?E.children.unshift(A):E.children[0].type===e.Declaration?E.children[0]=A:E.children.unshift(A),E.root()||E},y.prototype.dtd=function(g,D){var N,E,A,O,p,C,F,M,U,W;for(E=this.document(),A=new t(E,g,D),U=E.children,O=p=0,F=U.length;p<F;O=++p)if(N=U[O],N.type===e.DocType)return E.children[O]=A,A;for(W=E.children,O=C=0,M=W.length;C<M;O=++C)if(N=W[O],N.isRoot)return E.children.splice(O,0,A),A;return E.children.push(A),A},y.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},y.prototype.root=function(){var g;for(g=this;g;){if(g.type===e.Document)return g.rootObject;if(g.isRoot)return g;g=g.parent}},y.prototype.document=function(){var g;for(g=this;g;){if(g.type===e.Document)return g;g=g.parent}},y.prototype.end=function(g){return this.document().end(g)},y.prototype.prev=function(){var g;if(g=this.parent.children.indexOf(this),g<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[g-1]},y.prototype.next=function(){var g;if(g=this.parent.children.indexOf(this),g===-1||g===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[g+1]},y.prototype.importDocument=function(g){var D;return D=g.root().clone(),D.parent=this,D.isRoot=!1,this.children.push(D),this},y.prototype.debugInfo=function(g){var D,N;return g=g||this.name,g==null&&!((D=this.parent)!=null&&D.name)?"":g==null?"parent: <"+this.parent.name+">":(N=this.parent)!=null&&N.name?"node: <"+g+">, parent: <"+this.parent.name+">":"node: <"+g+">"},y.prototype.ele=function(g,D,N){return this.element(g,D,N)},y.prototype.nod=function(g,D,N){return this.node(g,D,N)},y.prototype.txt=function(g){return this.text(g)},y.prototype.dat=function(g){return this.cdata(g)},y.prototype.com=function(g){return this.comment(g)},y.prototype.ins=function(g,D){return this.instruction(g,D)},y.prototype.doc=function(){return this.document()},y.prototype.dec=function(g,D,N){return this.declaration(g,D,N)},y.prototype.e=function(g,D,N){return this.element(g,D,N)},y.prototype.n=function(g,D,N){return this.node(g,D,N)},y.prototype.t=function(g){return this.text(g)},y.prototype.d=function(g){return this.cdata(g)},y.prototype.c=function(g){return this.comment(g)},y.prototype.r=function(g){return this.raw(g)},y.prototype.i=function(g,D){return this.instruction(g,D)},y.prototype.u=function(){return this.up()},y.prototype.importXMLBuilder=function(g){return this.importDocument(g)},y.prototype.replaceChild=function(g,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.removeChild=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.appendChild=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.hasChildNodes=function(){return this.children.length!==0},y.prototype.cloneNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.isSupported=function(g,D){return!0},y.prototype.hasAttributes=function(){return this.attribs.length!==0},y.prototype.compareDocumentPosition=function(g){var D,N;return D=this,D===g?0:this.document()!==g.document()?(N=o.Disconnected|o.ImplementationSpecific,Math.random()<.5?N|=o.Preceding:N|=o.Following,N):D.isAncestor(g)?o.Contains|o.Preceding:D.isDescendant(g)?o.Contains|o.Following:D.isPreceding(g)?o.Preceding:o.Following},y.prototype.isSameNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.lookupPrefix=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.isDefaultNamespace=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.lookupNamespaceURI=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.isEqualNode=function(g){var D,N,E;if(g.nodeType!==this.nodeType||g.children.length!==this.children.length)return!1;for(D=N=0,E=this.children.length-1;0<=E?N<=E:N>=E;D=0<=E?++N:--N)if(!this.children[D].isEqualNode(g.children[D]))return!1;return!0},y.prototype.getFeature=function(g,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.setUserData=function(g,D,N){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.getUserData=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.contains=function(g){return g?g===this||this.isDescendant(g):!1},y.prototype.isDescendant=function(g){var D,N,E,A,O;for(O=this.children,E=0,A=O.length;E<A;E++)if(D=O[E],g===D||(N=D.isDescendant(g),N))return!0;return!1},y.prototype.isAncestor=function(g){return g.isDescendant(this)},y.prototype.isPreceding=function(g){var D,N;return D=this.treePosition(g),N=this.treePosition(this),D===-1||N===-1?!1:D<N},y.prototype.isFollowing=function(g){var D,N;return D=this.treePosition(g),N=this.treePosition(this),D===-1||N===-1?!1:D>N},y.prototype.treePosition=function(g){var D,N;return N=0,D=!1,this.foreachTreeNode(this.document(),function(E){if(N++,!D&&E===g)return D=!0}),D?N:-1},y.prototype.foreachTreeNode=function(g,D){var N,E,A,O,p;for(g||(g=this.document()),O=g.children,E=0,A=O.length;E<A;E++){if(N=O[E],p=D(N))return p;if(p=this.foreachTreeNode(N,D),p)return p}},y}()}).call(ee)),Br.exports}var un={exports:{}},Po;function Ms(){return Po||(Po=1,(function(){var o=function(n,i){return function(){return n.apply(i,arguments)}},e={}.hasOwnProperty;un.exports=function(){function n(i){this.assertLegalName=o(this.assertLegalName,this),this.assertLegalChar=o(this.assertLegalChar,this);var a,t,r;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),t=i.stringify||{};for(a in t)e.call(t,a)&&(r=t[a],this[a]=r)}return n.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},n.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},n.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},n.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},n.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},n.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},n.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},n.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},n.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},n.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},n.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.convertAttKey="@",n.prototype.convertPIKey="?",n.prototype.convertTextKey="#text",n.prototype.convertCDataKey="#cdata",n.prototype.convertCommentKey="#comment",n.prototype.convertRawKey="#raw",n.prototype.assertLegalChar=function(i){var a,t;if(this.options.noValidation)return i;if(a="",this.options.version==="1.0"){if(a=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,t=i.match(a))throw new Error("Invalid character in string: "+i+" at index "+t.index)}else if(this.options.version==="1.1"&&(a=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,t=i.match(a)))throw new Error("Invalid character in string: "+i+" at index "+t.index);return i},n.prototype.assertLegalName=function(i){var a;if(this.options.noValidation)return i;if(this.assertLegalChar(i),a=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(a))throw new Error("Invalid character in name");return i},n.prototype.textEscape=function(i){var a;return this.options.noValidation?i:(a=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(a,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},n.prototype.attEscape=function(i){var a;return this.options.noValidation?i:(a=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(a,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},n}()}).call(ee)),un.exports}var cn={exports:{}},fn={exports:{}},ln={exports:{}},Lo;function xt(){return Lo||(Lo=1,(function(){ln.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(ee)),ln.exports}var Mo;function Rs(){return Mo||(Mo=1,(function(){var o,e,n,i={}.hasOwnProperty;n=Pe().assign,o=fe(),qn(),Xn(),Rn(),jn(),Mn(),Vn(),zn(),Wn(),Ls(),$n(),Bn(),kn(),Un(),e=xt(),fn.exports=function(){function a(t){var r,s,u;t||(t={}),this.options=t,s=t.writer||{};for(r in s)i.call(s,r)&&(u=s[r],this["_"+r]=this[r],this[r]=u)}return a.prototype.filterOptions=function(t){var r,s,u,f,l,h,c,m;return t||(t={}),t=n({},this.options,t),r={writer:this},r.pretty=t.pretty||!1,r.allowEmpty=t.allowEmpty||!1,r.indent=(s=t.indent)!=null?s:"  ",r.newline=(u=t.newline)!=null?u:`
`,r.offset=(f=t.offset)!=null?f:0,r.dontPrettyTextNodes=(l=(h=t.dontPrettyTextNodes)!=null?h:t.dontprettytextnodes)!=null?l:0,r.spaceBeforeSlash=(c=(m=t.spaceBeforeSlash)!=null?m:t.spacebeforeslash)!=null?c:"",r.spaceBeforeSlash===!0&&(r.spaceBeforeSlash=" "),r.suppressPrettyCount=0,r.user={},r.state=e.None,r},a.prototype.indent=function(t,r,s){var u;return!r.pretty||r.suppressPrettyCount?"":r.pretty&&(u=(s||0)+r.offset+1,u>0)?new Array(u).join(r.indent):""},a.prototype.endline=function(t,r,s){return!r.pretty||r.suppressPrettyCount?"":r.newline},a.prototype.attribute=function(t,r,s){var u;return this.openAttribute(t,r,s),u=" "+t.name+'="'+t.value+'"',this.closeAttribute(t,r,s),u},a.prototype.cdata=function(t,r,s){var u;return this.openNode(t,r,s),r.state=e.OpenTag,u=this.indent(t,r,s)+"<![CDATA[",r.state=e.InsideTag,u+=t.value,r.state=e.CloseTag,u+="]]>"+this.endline(t,r,s),r.state=e.None,this.closeNode(t,r,s),u},a.prototype.comment=function(t,r,s){var u;return this.openNode(t,r,s),r.state=e.OpenTag,u=this.indent(t,r,s)+"<!-- ",r.state=e.InsideTag,u+=t.value,r.state=e.CloseTag,u+=" -->"+this.endline(t,r,s),r.state=e.None,this.closeNode(t,r,s),u},a.prototype.declaration=function(t,r,s){var u;return this.openNode(t,r,s),r.state=e.OpenTag,u=this.indent(t,r,s)+"<?xml",r.state=e.InsideTag,u+=' version="'+t.version+'"',t.encoding!=null&&(u+=' encoding="'+t.encoding+'"'),t.standalone!=null&&(u+=' standalone="'+t.standalone+'"'),r.state=e.CloseTag,u+=r.spaceBeforeSlash+"?>",u+=this.endline(t,r,s),r.state=e.None,this.closeNode(t,r,s),u},a.prototype.docType=function(t,r,s){var u,f,l,h,c;if(s||(s=0),this.openNode(t,r,s),r.state=e.OpenTag,h=this.indent(t,r,s),h+="<!DOCTYPE "+t.root().name,t.pubID&&t.sysID?h+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(h+=' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(h+=" [",h+=this.endline(t,r,s),r.state=e.InsideTag,c=t.children,f=0,l=c.length;f<l;f++)u=c[f],h+=this.writeChildNode(u,r,s+1);r.state=e.CloseTag,h+="]"}return r.state=e.CloseTag,h+=r.spaceBeforeSlash+">",h+=this.endline(t,r,s),r.state=e.None,this.closeNode(t,r,s),h},a.prototype.element=function(t,r,s){var u,f,l,h,c,m,v,b,T,x,y,g,D,N;s||(s=0),x=!1,y="",this.openNode(t,r,s),r.state=e.OpenTag,y+=this.indent(t,r,s)+"<"+t.name,g=t.attribs;for(T in g)i.call(g,T)&&(u=g[T],y+=this.attribute(u,r,s));if(l=t.children.length,h=l===0?null:t.children[0],l===0||t.children.every(function(E){return(E.type===o.Text||E.type===o.Raw)&&E.value===""}))r.allowEmpty?(y+=">",r.state=e.CloseTag,y+="</"+t.name+">"+this.endline(t,r,s)):(r.state=e.CloseTag,y+=r.spaceBeforeSlash+"/>"+this.endline(t,r,s));else if(r.pretty&&l===1&&(h.type===o.Text||h.type===o.Raw)&&h.value!=null)y+=">",r.state=e.InsideTag,r.suppressPrettyCount++,x=!0,y+=this.writeChildNode(h,r,s+1),r.suppressPrettyCount--,x=!1,r.state=e.CloseTag,y+="</"+t.name+">"+this.endline(t,r,s);else{if(r.dontPrettyTextNodes){for(D=t.children,c=0,v=D.length;c<v;c++)if(f=D[c],(f.type===o.Text||f.type===o.Raw)&&f.value!=null){r.suppressPrettyCount++,x=!0;break}}for(y+=">"+this.endline(t,r,s),r.state=e.InsideTag,N=t.children,m=0,b=N.length;m<b;m++)f=N[m],y+=this.writeChildNode(f,r,s+1);r.state=e.CloseTag,y+=this.indent(t,r,s)+"</"+t.name+">",x&&r.suppressPrettyCount--,y+=this.endline(t,r,s),r.state=e.None}return this.closeNode(t,r,s),y},a.prototype.writeChildNode=function(t,r,s){switch(t.type){case o.CData:return this.cdata(t,r,s);case o.Comment:return this.comment(t,r,s);case o.Element:return this.element(t,r,s);case o.Raw:return this.raw(t,r,s);case o.Text:return this.text(t,r,s);case o.ProcessingInstruction:return this.processingInstruction(t,r,s);case o.Dummy:return"";case o.Declaration:return this.declaration(t,r,s);case o.DocType:return this.docType(t,r,s);case o.AttributeDeclaration:return this.dtdAttList(t,r,s);case o.ElementDeclaration:return this.dtdElement(t,r,s);case o.EntityDeclaration:return this.dtdEntity(t,r,s);case o.NotationDeclaration:return this.dtdNotation(t,r,s);default:throw new Error("Unknown XML node type: "+t.constructor.name)}},a.prototype.processingInstruction=function(t,r,s){var u;return this.openNode(t,r,s),r.state=e.OpenTag,u=this.indent(t,r,s)+"<?",r.state=e.InsideTag,u+=t.target,t.value&&(u+=" "+t.value),r.state=e.CloseTag,u+=r.spaceBeforeSlash+"?>",u+=this.endline(t,r,s),r.state=e.None,this.closeNode(t,r,s),u},a.prototype.raw=function(t,r,s){var u;return this.openNode(t,r,s),r.state=e.OpenTag,u=this.indent(t,r,s),r.state=e.InsideTag,u+=t.value,r.state=e.CloseTag,u+=this.endline(t,r,s),r.state=e.None,this.closeNode(t,r,s),u},a.prototype.text=function(t,r,s){var u;return this.openNode(t,r,s),r.state=e.OpenTag,u=this.indent(t,r,s),r.state=e.InsideTag,u+=t.value,r.state=e.CloseTag,u+=this.endline(t,r,s),r.state=e.None,this.closeNode(t,r,s),u},a.prototype.dtdAttList=function(t,r,s){var u;return this.openNode(t,r,s),r.state=e.OpenTag,u=this.indent(t,r,s)+"<!ATTLIST",r.state=e.InsideTag,u+=" "+t.elementName+" "+t.attributeName+" "+t.attributeType,t.defaultValueType!=="#DEFAULT"&&(u+=" "+t.defaultValueType),t.defaultValue&&(u+=' "'+t.defaultValue+'"'),r.state=e.CloseTag,u+=r.spaceBeforeSlash+">"+this.endline(t,r,s),r.state=e.None,this.closeNode(t,r,s),u},a.prototype.dtdElement=function(t,r,s){var u;return this.openNode(t,r,s),r.state=e.OpenTag,u=this.indent(t,r,s)+"<!ELEMENT",r.state=e.InsideTag,u+=" "+t.name+" "+t.value,r.state=e.CloseTag,u+=r.spaceBeforeSlash+">"+this.endline(t,r,s),r.state=e.None,this.closeNode(t,r,s),u},a.prototype.dtdEntity=function(t,r,s){var u;return this.openNode(t,r,s),r.state=e.OpenTag,u=this.indent(t,r,s)+"<!ENTITY",r.state=e.InsideTag,t.pe&&(u+=" %"),u+=" "+t.name,t.value?u+=' "'+t.value+'"':(t.pubID&&t.sysID?u+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(u+=' SYSTEM "'+t.sysID+'"'),t.nData&&(u+=" NDATA "+t.nData)),r.state=e.CloseTag,u+=r.spaceBeforeSlash+">"+this.endline(t,r,s),r.state=e.None,this.closeNode(t,r,s),u},a.prototype.dtdNotation=function(t,r,s){var u;return this.openNode(t,r,s),r.state=e.OpenTag,u=this.indent(t,r,s)+"<!NOTATION",r.state=e.InsideTag,u+=" "+t.name,t.pubID&&t.sysID?u+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.pubID?u+=' PUBLIC "'+t.pubID+'"':t.sysID&&(u+=' SYSTEM "'+t.sysID+'"'),r.state=e.CloseTag,u+=r.spaceBeforeSlash+">"+this.endline(t,r,s),r.state=e.None,this.closeNode(t,r,s),u},a.prototype.openNode=function(t,r,s){},a.prototype.closeNode=function(t,r,s){},a.prototype.openAttribute=function(t,r,s){},a.prototype.closeAttribute=function(t,r,s){},a}()}).call(ee)),fn.exports}var Ro;function Hn(){return Ro||(Ro=1,(function(){var o,e=function(i,a){for(var t in a)n.call(a,t)&&(i[t]=a[t]);function r(){this.constructor=i}return r.prototype=a.prototype,i.prototype=new r,i.__super__=a.prototype,i},n={}.hasOwnProperty;o=Rs(),cn.exports=function(i){e(a,i);function a(t){a.__super__.constructor.call(this,t)}return a.prototype.document=function(t,r){var s,u,f,l,h;for(r=this.filterOptions(r),l="",h=t.children,u=0,f=h.length;u<f;u++)s=h[u],l+=this.writeChildNode(s,r,0);return r.pretty&&l.slice(-r.newline.length)===r.newline&&(l=l.slice(0,-r.newline.length)),l},a}(o)}).call(ee)),cn.exports}var jo;function js(){return jo||(jo=1,(function(){var o,e,n,i,a,t,r,s=function(f,l){for(var h in l)u.call(l,h)&&(f[h]=l[h]);function c(){this.constructor=f}return c.prototype=l.prototype,f.prototype=new c,f.__super__=l.prototype,f},u={}.hasOwnProperty;r=Pe().isPlainObject,n=Ss(),e=hc(),i=Ae(),o=fe(),t=Ms(),a=Hn(),jr.exports=function(f){s(l,f);function l(h){l.__super__.constructor.call(this,null),this.name="#document",this.type=o.Document,this.documentURI=null,this.domConfig=new e,h||(h={}),h.writer||(h.writer=new a),this.options=h,this.stringify=new t(h)}return Object.defineProperty(l.prototype,"implementation",{value:new n}),Object.defineProperty(l.prototype,"doctype",{get:function(){var h,c,m,v;for(v=this.children,c=0,m=v.length;c<m;c++)if(h=v[c],h.type===o.DocType)return h;return null}}),Object.defineProperty(l.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(l.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(l.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(l.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===o.Declaration?this.children[0].encoding:null}}),Object.defineProperty(l.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===o.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(l.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===o.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(l.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(l.prototype,"origin",{get:function(){return null}}),Object.defineProperty(l.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(l.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(l.prototype,"contentType",{get:function(){return null}}),l.prototype.end=function(h){var c;return c={},h?r(h)&&(c=h,h=this.options.writer):h=this.options.writer,h.document(this,h.filterOptions(c))},l.prototype.toString=function(h){return this.options.writer.document(this,this.options.writer.filterOptions(h))},l.prototype.createElement=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createTextNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createComment=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createCDATASection=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createProcessingInstruction=function(h,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createAttribute=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createEntityReference=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.getElementsByTagName=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.importNode=function(h,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createElementNS=function(h,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createAttributeNS=function(h,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.getElementsByTagNameNS=function(h,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.getElementById=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.adoptNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.renameNode=function(h,c,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.getElementsByClassName=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createEvent=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createNodeIterator=function(h,c,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createTreeWalker=function(h,c,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},l}(i)}).call(ee)),jr.exports}var pn={exports:{}},qo;function gc(){return qo||(qo=1,(function(){var o,e,n,i,a,t,r,s,u,f,l,h,c,m,v,b,T,x,y,g,D,N,E,A={}.hasOwnProperty;E=Pe(),D=E.isObject,g=E.isFunction,N=E.isPlainObject,y=E.getValue,o=fe(),h=js(),c=Mn(),i=Rn(),a=jn(),v=Vn(),x=zn(),m=Wn(),f=qn(),l=Xn(),t=$n(),s=kn(),r=Bn(),u=Un(),n=Ps(),T=Ms(),b=Hn(),e=xt(),pn.exports=function(){function O(p,C,F){var M;this.name="?xml",this.type=o.Document,p||(p={}),M={},p.writer?N(p.writer)&&(M=p.writer,p.writer=new b):p.writer=new b,this.options=p,this.writer=p.writer,this.writerOptions=this.writer.filterOptions(M),this.stringify=new T(p),this.onDataCallback=C||function(){},this.onEndCallback=F||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return O.prototype.createChildNode=function(p){var C,F,M,U,W,H,J,Y;switch(p.type){case o.CData:this.cdata(p.value);break;case o.Comment:this.comment(p.value);break;case o.Element:M={},J=p.attribs;for(F in J)A.call(J,F)&&(C=J[F],M[F]=C.value);this.node(p.name,M);break;case o.Dummy:this.dummy();break;case o.Raw:this.raw(p.value);break;case o.Text:this.text(p.value);break;case o.ProcessingInstruction:this.instruction(p.target,p.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+p.constructor.name)}for(Y=p.children,W=0,H=Y.length;W<H;W++)U=Y[W],this.createChildNode(U),U.type===o.Element&&this.up();return this},O.prototype.dummy=function(){return this},O.prototype.node=function(p,C,F){var M;if(p==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(p));return this.openCurrent(),p=y(p),C==null&&(C={}),C=y(C),D(C)||(M=[C,F],F=M[0],C=M[1]),this.currentNode=new c(this,p,C),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,F!=null&&this.text(F),this},O.prototype.element=function(p,C,F){var M,U,W,H,J,Y;if(this.currentNode&&this.currentNode.type===o.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(p)||D(p)||g(p))for(H=this.options.noValidation,this.options.noValidation=!0,Y=new h(this.options).element("TEMP_ROOT"),Y.element(p),this.options.noValidation=H,J=Y.children,U=0,W=J.length;U<W;U++)M=J[U],this.createChildNode(M),M.type===o.Element&&this.up();else this.node(p,C,F);return this},O.prototype.attribute=function(p,C){var F,M;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(p));if(p!=null&&(p=y(p)),D(p))for(F in p)A.call(p,F)&&(M=p[F],this.attribute(F,M));else g(C)&&(C=C.apply()),this.options.keepNullAttributes&&C==null?this.currentNode.attribs[p]=new n(this,p,""):C!=null&&(this.currentNode.attribs[p]=new n(this,p,C));return this},O.prototype.text=function(p){var C;return this.openCurrent(),C=new x(this,p),this.onData(this.writer.text(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.cdata=function(p){var C;return this.openCurrent(),C=new i(this,p),this.onData(this.writer.cdata(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.comment=function(p){var C;return this.openCurrent(),C=new a(this,p),this.onData(this.writer.comment(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.raw=function(p){var C;return this.openCurrent(),C=new v(this,p),this.onData(this.writer.raw(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.instruction=function(p,C){var F,M,U,W,H;if(this.openCurrent(),p!=null&&(p=y(p)),C!=null&&(C=y(C)),Array.isArray(p))for(F=0,W=p.length;F<W;F++)M=p[F],this.instruction(M);else if(D(p))for(M in p)A.call(p,M)&&(U=p[M],this.instruction(M,U));else g(C)&&(C=C.apply()),H=new m(this,p,C),this.onData(this.writer.processingInstruction(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},O.prototype.declaration=function(p,C,F){var M;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return M=new f(this,p,C,F),this.onData(this.writer.declaration(M,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.doctype=function(p,C,F){if(this.openCurrent(),p==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new l(this,C,F),this.currentNode.rootNodeName=p,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},O.prototype.dtdElement=function(p,C){var F;return this.openCurrent(),F=new r(this,p,C),this.onData(this.writer.dtdElement(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.attList=function(p,C,F,M,U){var W;return this.openCurrent(),W=new t(this,p,C,F,M,U),this.onData(this.writer.dtdAttList(W,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.entity=function(p,C){var F;return this.openCurrent(),F=new s(this,!1,p,C),this.onData(this.writer.dtdEntity(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.pEntity=function(p,C){var F;return this.openCurrent(),F=new s(this,!0,p,C),this.onData(this.writer.dtdEntity(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.notation=function(p,C){var F;return this.openCurrent(),F=new u(this,p,C),this.onData(this.writer.dtdNotation(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},O.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},O.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},O.prototype.openNode=function(p){var C,F,M,U;if(!p.isOpen){if(!this.root&&this.currentLevel===0&&p.type===o.Element&&(this.root=p),F="",p.type===o.Element){this.writerOptions.state=e.OpenTag,F=this.writer.indent(p,this.writerOptions,this.currentLevel)+"<"+p.name,U=p.attribs;for(M in U)A.call(U,M)&&(C=U[M],F+=this.writer.attribute(C,this.writerOptions,this.currentLevel));F+=(p.children?">":"/>")+this.writer.endline(p,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,F=this.writer.indent(p,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+p.rootNodeName,p.pubID&&p.sysID?F+=' PUBLIC "'+p.pubID+'" "'+p.sysID+'"':p.sysID&&(F+=' SYSTEM "'+p.sysID+'"'),p.children?(F+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,F+=">"),F+=this.writer.endline(p,this.writerOptions,this.currentLevel);return this.onData(F,this.currentLevel),p.isOpen=!0}},O.prototype.closeNode=function(p){var C;if(!p.isClosed)return C="",this.writerOptions.state=e.CloseTag,p.type===o.Element?C=this.writer.indent(p,this.writerOptions,this.currentLevel)+"</"+p.name+">"+this.writer.endline(p,this.writerOptions,this.currentLevel):C=this.writer.indent(p,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(p,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(C,this.currentLevel),p.isClosed=!0},O.prototype.onData=function(p,C){return this.documentStarted=!0,this.onDataCallback(p,C+1)},O.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},O.prototype.debugInfo=function(p){return p==null?"":"node: <"+p+">"},O.prototype.ele=function(){return this.element.apply(this,arguments)},O.prototype.nod=function(p,C,F){return this.node(p,C,F)},O.prototype.txt=function(p){return this.text(p)},O.prototype.dat=function(p){return this.cdata(p)},O.prototype.com=function(p){return this.comment(p)},O.prototype.ins=function(p,C){return this.instruction(p,C)},O.prototype.dec=function(p,C,F){return this.declaration(p,C,F)},O.prototype.dtd=function(p,C,F){return this.doctype(p,C,F)},O.prototype.e=function(p,C,F){return this.element(p,C,F)},O.prototype.n=function(p,C,F){return this.node(p,C,F)},O.prototype.t=function(p){return this.text(p)},O.prototype.d=function(p){return this.cdata(p)},O.prototype.c=function(p){return this.comment(p)},O.prototype.r=function(p){return this.raw(p)},O.prototype.i=function(p,C){return this.instruction(p,C)},O.prototype.att=function(){return this.currentNode&&this.currentNode.type===o.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},O.prototype.a=function(){return this.currentNode&&this.currentNode.type===o.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},O.prototype.ent=function(p,C){return this.entity(p,C)},O.prototype.pent=function(p,C){return this.pEntity(p,C)},O.prototype.not=function(p,C){return this.notation(p,C)},O}()}).call(ee)),pn.exports}var hn={exports:{}},$o;function yc(){return $o||($o=1,(function(){var o,e,n,i=function(t,r){for(var s in r)a.call(r,s)&&(t[s]=r[s]);function u(){this.constructor=t}return u.prototype=r.prototype,t.prototype=new u,t.__super__=r.prototype,t},a={}.hasOwnProperty;o=fe(),n=Rs(),e=xt(),hn.exports=function(t){i(r,t);function r(s,u){this.stream=s,r.__super__.constructor.call(this,u)}return r.prototype.endline=function(s,u,f){return s.isLastRootNode&&u.state===e.CloseTag?"":r.__super__.endline.call(this,s,u,f)},r.prototype.document=function(s,u){var f,l,h,c,m,v,b,T,x;for(b=s.children,l=h=0,m=b.length;h<m;l=++h)f=b[l],f.isLastRootNode=l===s.children.length-1;for(u=this.filterOptions(u),T=s.children,x=[],c=0,v=T.length;c<v;c++)f=T[c],x.push(this.writeChildNode(f,u,0));return x},r.prototype.attribute=function(s,u,f){return this.stream.write(r.__super__.attribute.call(this,s,u,f))},r.prototype.cdata=function(s,u,f){return this.stream.write(r.__super__.cdata.call(this,s,u,f))},r.prototype.comment=function(s,u,f){return this.stream.write(r.__super__.comment.call(this,s,u,f))},r.prototype.declaration=function(s,u,f){return this.stream.write(r.__super__.declaration.call(this,s,u,f))},r.prototype.docType=function(s,u,f){var l,h,c,m;if(f||(f=0),this.openNode(s,u,f),u.state=e.OpenTag,this.stream.write(this.indent(s,u,f)),this.stream.write("<!DOCTYPE "+s.root().name),s.pubID&&s.sysID?this.stream.write(' PUBLIC "'+s.pubID+'" "'+s.sysID+'"'):s.sysID&&this.stream.write(' SYSTEM "'+s.sysID+'"'),s.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(s,u,f)),u.state=e.InsideTag,m=s.children,h=0,c=m.length;h<c;h++)l=m[h],this.writeChildNode(l,u,f+1);u.state=e.CloseTag,this.stream.write("]")}return u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+">"),this.stream.write(this.endline(s,u,f)),u.state=e.None,this.closeNode(s,u,f)},r.prototype.element=function(s,u,f){var l,h,c,m,v,b,T,x,y;f||(f=0),this.openNode(s,u,f),u.state=e.OpenTag,this.stream.write(this.indent(s,u,f)+"<"+s.name),x=s.attribs;for(T in x)a.call(x,T)&&(l=x[T],this.attribute(l,u,f));if(c=s.children.length,m=c===0?null:s.children[0],c===0||s.children.every(function(g){return(g.type===o.Text||g.type===o.Raw)&&g.value===""}))u.allowEmpty?(this.stream.write(">"),u.state=e.CloseTag,this.stream.write("</"+s.name+">")):(u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+"/>"));else if(u.pretty&&c===1&&(m.type===o.Text||m.type===o.Raw)&&m.value!=null)this.stream.write(">"),u.state=e.InsideTag,u.suppressPrettyCount++,this.writeChildNode(m,u,f+1),u.suppressPrettyCount--,u.state=e.CloseTag,this.stream.write("</"+s.name+">");else{for(this.stream.write(">"+this.endline(s,u,f)),u.state=e.InsideTag,y=s.children,v=0,b=y.length;v<b;v++)h=y[v],this.writeChildNode(h,u,f+1);u.state=e.CloseTag,this.stream.write(this.indent(s,u,f)+"</"+s.name+">")}return this.stream.write(this.endline(s,u,f)),u.state=e.None,this.closeNode(s,u,f)},r.prototype.processingInstruction=function(s,u,f){return this.stream.write(r.__super__.processingInstruction.call(this,s,u,f))},r.prototype.raw=function(s,u,f){return this.stream.write(r.__super__.raw.call(this,s,u,f))},r.prototype.text=function(s,u,f){return this.stream.write(r.__super__.text.call(this,s,u,f))},r.prototype.dtdAttList=function(s,u,f){return this.stream.write(r.__super__.dtdAttList.call(this,s,u,f))},r.prototype.dtdElement=function(s,u,f){return this.stream.write(r.__super__.dtdElement.call(this,s,u,f))},r.prototype.dtdEntity=function(s,u,f){return this.stream.write(r.__super__.dtdEntity.call(this,s,u,f))},r.prototype.dtdNotation=function(s,u,f){return this.stream.write(r.__super__.dtdNotation.call(this,s,u,f))},r}(n)}).call(ee)),hn.exports}var ko;function vc(){return ko||(ko=1,(function(){var o,e,n,i,a,t,r,s,u,f;f=Pe(),s=f.assign,u=f.isFunction,n=Ss(),i=js(),a=gc(),r=Hn(),t=yc(),o=fe(),e=xt(),xe.create=function(l,h,c,m){var v,b;if(l==null)throw new Error("Root element needs a name.");return m=s({},h,c,m),v=new i(m),b=v.element(l),m.headless||(v.declaration(m),(m.pubID!=null||m.sysID!=null)&&v.dtd(m)),b},xe.begin=function(l,h,c){var m;return u(l)&&(m=[l,h],h=m[0],c=m[1],l={}),h?new a(l,h,c):new i(l)},xe.stringWriter=function(l){return new r(l)},xe.streamWriter=function(l,h){return new t(l,h)},xe.implementation=new n,xe.nodeType=o,xe.writerState=e}).call(ee)),xe}var Bo;function wc(){return Bo||(Bo=1,(function(){var o,e,n,i,a,t={}.hasOwnProperty;o=vc(),e=Pn().defaults,i=function(r){return typeof r=="string"&&(r.indexOf("&")>=0||r.indexOf(">")>=0||r.indexOf("<")>=0)},a=function(r){return"<![CDATA["+n(r)+"]]>"},n=function(r){return r.replace("]]>","]]]]><![CDATA[>")},Mr.Builder=function(){function r(s){var u,f,l;this.options={},f=e["0.2"];for(u in f)t.call(f,u)&&(l=f[u],this.options[u]=l);for(u in s)t.call(s,u)&&(l=s[u],this.options[u]=l)}return r.prototype.buildObject=function(s){var u,f,l,h,c;return u=this.options.attrkey,f=this.options.charkey,Object.keys(s).length===1&&this.options.rootName===e["0.2"].rootName?(c=Object.keys(s)[0],s=s[c]):c=this.options.rootName,l=function(m){return function(v,b){var T,x,y,g,D,N;if(typeof b!="object")m.options.cdata&&i(b)?v.raw(a(b)):v.txt(b);else if(Array.isArray(b)){for(g in b)if(t.call(b,g)){x=b[g];for(D in x)y=x[D],v=l(v.ele(D),y).up()}}else for(D in b)if(t.call(b,D))if(x=b[D],D===u){if(typeof x=="object")for(T in x)N=x[T],v=v.att(T,N)}else if(D===f)m.options.cdata&&i(x)?v=v.raw(a(x)):v=v.txt(x);else if(Array.isArray(x))for(g in x)t.call(x,g)&&(y=x[g],typeof y=="string"?m.options.cdata&&i(y)?v=v.ele(D).raw(a(y)).up():v=v.ele(D,y).up():v=l(v.ele(D),y).up());else typeof x=="object"?v=l(v.ele(D),x).up():typeof x=="string"&&m.options.cdata&&i(x)?v=v.ele(D).raw(a(x)).up():(x==null&&(x=""),v=v.ele(D,x.toString()).up());return v}}(this),h=o.create(c,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),l(h,s).end(this.options.renderOpts)},r}()}).call(ee)),Mr}var dn={},mn={},Uo;function Ec(){return Uo||(Uo=1,function(o){(function(e){e.parser=function(I,w){return new i(I,w)},e.SAXParser=i,e.SAXStream=l,e.createStream=f,e.MAX_BUFFER_LENGTH=64*1024;var n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function i(I,w){if(!(this instanceof i))return new i(I,w);var X=this;t(X),X.q=X.c="",X.bufferCheckPosition=e.MAX_BUFFER_LENGTH,X.opt=w||{},X.opt.lowercase=X.opt.lowercase||X.opt.lowercasetags,X.looseCase=X.opt.lowercase?"toLowerCase":"toUpperCase",X.tags=[],X.closed=X.closedRoot=X.sawRoot=!1,X.tag=X.error=null,X.strict=!!I,X.noscript=!!(I||X.opt.noscript),X.state=p.BEGIN,X.strictEntities=X.opt.strictEntities,X.ENTITIES=X.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),X.attribList=[],X.opt.xmlns&&(X.ns=Object.create(b)),X.opt.unquotedAttributeValues===void 0&&(X.opt.unquotedAttributeValues=!I),X.trackPosition=X.opt.position!==!1,X.trackPosition&&(X.position=X.line=X.column=0),F(X,"onready")}Object.create||(Object.create=function(I){function w(){}w.prototype=I;var X=new w;return X}),Object.keys||(Object.keys=function(I){var w=[];for(var X in I)I.hasOwnProperty(X)&&w.push(X);return w});function a(I){for(var w=Math.max(e.MAX_BUFFER_LENGTH,10),X=0,d=0,_=n.length;d<_;d++){var S=I[n[d]].length;if(S>w)switch(n[d]){case"textNode":U(I);break;case"cdata":M(I,"oncdata",I.cdata),I.cdata="";break;case"script":M(I,"onscript",I.script),I.script="";break;default:H(I,"Max buffer length exceeded: "+n[d])}X=Math.max(X,S)}var q=e.MAX_BUFFER_LENGTH-X;I.bufferCheckPosition=q+I.position}function t(I){for(var w=0,X=n.length;w<X;w++)I[n[w]]=""}function r(I){U(I),I.cdata!==""&&(M(I,"oncdata",I.cdata),I.cdata=""),I.script!==""&&(M(I,"onscript",I.script),I.script="")}i.prototype={end:function(){J(this)},write:tt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){r(this)}};var s;try{s=require("stream").Stream}catch{s=function(){}}s||(s=function(){});var u=e.EVENTS.filter(function(I){return I!=="error"&&I!=="end"});function f(I,w){return new l(I,w)}function l(I,w){if(!(this instanceof l))return new l(I,w);s.apply(this),this._parser=new i(I,w),this.writable=!0,this.readable=!0;var X=this;this._parser.onend=function(){X.emit("end")},this._parser.onerror=function(d){X.emit("error",d),X._parser.error=null},this._decoder=null,u.forEach(function(d){Object.defineProperty(X,"on"+d,{get:function(){return X._parser["on"+d]},set:function(_){if(!_)return X.removeAllListeners(d),X._parser["on"+d]=_,_;X.on(d,_)},enumerable:!0,configurable:!1})})}l.prototype=Object.create(s.prototype,{constructor:{value:l}}),l.prototype.write=function(I){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(I)){if(!this._decoder){var w=Gs.StringDecoder;this._decoder=new w("utf8")}I=this._decoder.write(I)}return this._parser.write(I.toString()),this.emit("data",I),!0},l.prototype.end=function(I){return I&&I.length&&this.write(I),this._parser.end(),!0},l.prototype.on=function(I,w){var X=this;return!X._parser["on"+I]&&u.indexOf(I)!==-1&&(X._parser["on"+I]=function(){var d=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);d.splice(0,0,I),X.emit.apply(X,d)}),s.prototype.on.call(X,I,w)};var h="[CDATA[",c="DOCTYPE",m="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/2000/xmlns/",b={xml:m,xmlns:v},T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function D(I){return I===" "||I===`
`||I==="\r"||I==="	"}function N(I){return I==='"'||I==="'"}function E(I){return I===">"||D(I)}function A(I,w){return I.test(w)}function O(I,w){return!A(I,w)}var p=0;e.STATE={BEGIN:p++,BEGIN_WHITESPACE:p++,TEXT:p++,TEXT_ENTITY:p++,OPEN_WAKA:p++,SGML_DECL:p++,SGML_DECL_QUOTED:p++,DOCTYPE:p++,DOCTYPE_QUOTED:p++,DOCTYPE_DTD:p++,DOCTYPE_DTD_QUOTED:p++,COMMENT_STARTING:p++,COMMENT:p++,COMMENT_ENDING:p++,COMMENT_ENDED:p++,CDATA:p++,CDATA_ENDING:p++,CDATA_ENDING_2:p++,PROC_INST:p++,PROC_INST_BODY:p++,PROC_INST_ENDING:p++,OPEN_TAG:p++,OPEN_TAG_SLASH:p++,ATTRIB:p++,ATTRIB_NAME:p++,ATTRIB_NAME_SAW_WHITE:p++,ATTRIB_VALUE:p++,ATTRIB_VALUE_QUOTED:p++,ATTRIB_VALUE_CLOSED:p++,ATTRIB_VALUE_UNQUOTED:p++,ATTRIB_VALUE_ENTITY_Q:p++,ATTRIB_VALUE_ENTITY_U:p++,CLOSE_TAG:p++,CLOSE_TAG_SAW_WHITE:p++,SCRIPT:p++,SCRIPT_ENDING:p++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(I){var w=e.ENTITIES[I],X=typeof w=="number"?String.fromCharCode(w):w;e.ENTITIES[I]=X});for(var C in e.STATE)e.STATE[e.STATE[C]]=C;p=e.STATE;function F(I,w,X){I[w]&&I[w](X)}function M(I,w,X){I.textNode&&U(I),F(I,w,X)}function U(I){I.textNode=W(I.opt,I.textNode),I.textNode&&F(I,"ontext",I.textNode),I.textNode=""}function W(I,w){return I.trim&&(w=w.trim()),I.normalize&&(w=w.replace(/\s+/g," ")),w}function H(I,w){return U(I),I.trackPosition&&(w+=`
Line: `+I.line+`
Column: `+I.column+`
Char: `+I.c),w=new Error(w),I.error=w,F(I,"onerror",w),I}function J(I){return I.sawRoot&&!I.closedRoot&&Y(I,"Unclosed root tag"),I.state!==p.BEGIN&&I.state!==p.BEGIN_WHITESPACE&&I.state!==p.TEXT&&H(I,"Unexpected end"),U(I),I.c="",I.closed=!0,F(I,"onend"),i.call(I,I.strict,I.opt),I}function Y(I,w){if(typeof I!="object"||!(I instanceof i))throw new Error("bad call to strictFail");I.strict&&H(I,w)}function Te(I){I.strict||(I.tagName=I.tagName[I.looseCase]());var w=I.tags[I.tags.length-1]||I,X=I.tag={name:I.tagName,attributes:{}};I.opt.xmlns&&(X.ns=w.ns),I.attribList.length=0,M(I,"onopentagstart",X)}function Oe(I,w){var X=I.indexOf(":"),d=X<0?["",I]:I.split(":"),_=d[0],S=d[1];return w&&I==="xmlns"&&(_="xmlns",S=""),{prefix:_,local:S}}function he(I){if(I.strict||(I.attribName=I.attribName[I.looseCase]()),I.attribList.indexOf(I.attribName)!==-1||I.tag.attributes.hasOwnProperty(I.attribName)){I.attribName=I.attribValue="";return}if(I.opt.xmlns){var w=Oe(I.attribName,!0),X=w.prefix,d=w.local;if(X==="xmlns")if(d==="xml"&&I.attribValue!==m)Y(I,"xml: prefix must be bound to "+m+`
Actual: `+I.attribValue);else if(d==="xmlns"&&I.attribValue!==v)Y(I,"xmlns: prefix must be bound to "+v+`
Actual: `+I.attribValue);else{var _=I.tag,S=I.tags[I.tags.length-1]||I;_.ns===S.ns&&(_.ns=Object.create(S.ns)),_.ns[d]=I.attribValue}I.attribList.push([I.attribName,I.attribValue])}else I.tag.attributes[I.attribName]=I.attribValue,M(I,"onattribute",{name:I.attribName,value:I.attribValue});I.attribName=I.attribValue=""}function le(I,w){if(I.opt.xmlns){var X=I.tag,d=Oe(I.tagName);X.prefix=d.prefix,X.local=d.local,X.uri=X.ns[d.prefix]||"",X.prefix&&!X.uri&&(Y(I,"Unbound namespace prefix: "+JSON.stringify(I.tagName)),X.uri=d.prefix);var _=I.tags[I.tags.length-1]||I;X.ns&&_.ns!==X.ns&&Object.keys(X.ns).forEach(function(G){M(I,"onopennamespace",{prefix:G,uri:X.ns[G]})});for(var S=0,q=I.attribList.length;S<q;S++){var L=I.attribList[S],R=L[0],B=L[1],P=Oe(R,!0),j=P.prefix,k=P.local,$=j===""?"":X.ns[j]||"",V={name:R,value:B,prefix:j,local:k,uri:$};j&&j!=="xmlns"&&!$&&(Y(I,"Unbound namespace prefix: "+JSON.stringify(j)),V.uri=j),I.tag.attributes[R]=V,M(I,"onattribute",V)}I.attribList.length=0}I.tag.isSelfClosing=!!w,I.sawRoot=!0,I.tags.push(I.tag),M(I,"onopentag",I.tag),w||(!I.noscript&&I.tagName.toLowerCase()==="script"?I.state=p.SCRIPT:I.state=p.TEXT,I.tag=null,I.tagName=""),I.attribName=I.attribValue="",I.attribList.length=0}function Ee(I){if(!I.tagName){Y(I,"Weird empty close tag."),I.textNode+="</>",I.state=p.TEXT;return}if(I.script){if(I.tagName!=="script"){I.script+="</"+I.tagName+">",I.tagName="",I.state=p.SCRIPT;return}M(I,"onscript",I.script),I.script=""}var w=I.tags.length,X=I.tagName;I.strict||(X=X[I.looseCase]());for(var d=X;w--;){var _=I.tags[w];if(_.name!==d)Y(I,"Unexpected close tag");else break}if(w<0){Y(I,"Unmatched closing tag: "+I.tagName),I.textNode+="</"+I.tagName+">",I.state=p.TEXT;return}I.tagName=X;for(var S=I.tags.length;S-- >w;){var q=I.tag=I.tags.pop();I.tagName=I.tag.name,M(I,"onclosetag",I.tagName);var L={};for(var R in q.ns)L[R]=q.ns[R];var B=I.tags[I.tags.length-1]||I;I.opt.xmlns&&q.ns!==B.ns&&Object.keys(q.ns).forEach(function(P){var j=q.ns[P];M(I,"onclosenamespace",{prefix:P,uri:j})})}w===0&&(I.closedRoot=!0),I.tagName=I.attribValue=I.attribName="",I.attribList.length=0,I.state=p.TEXT}function Le(I){var w=I.entity,X=w.toLowerCase(),d,_="";return I.ENTITIES[w]?I.ENTITIES[w]:I.ENTITIES[X]?I.ENTITIES[X]:(w=X,w.charAt(0)==="#"&&(w.charAt(1)==="x"?(w=w.slice(2),d=parseInt(w,16),_=d.toString(16)):(w=w.slice(1),d=parseInt(w,10),_=d.toString(10))),w=w.replace(/^0+/,""),isNaN(d)||_.toLowerCase()!==w?(Y(I,"Invalid character entity"),"&"+I.entity+";"):String.fromCodePoint(d))}function z(I,w){w==="<"?(I.state=p.OPEN_WAKA,I.startTagPosition=I.position):D(w)||(Y(I,"Non-whitespace before first tag."),I.textNode=w,I.state=p.TEXT)}function Xe(I,w){var X="";return w<I.length&&(X=I.charAt(w)),X}function tt(I){var w=this;if(this.error)throw this.error;if(w.closed)return H(w,"Cannot write after close. Assign an onready handler.");if(I===null)return J(w);typeof I=="object"&&(I=I.toString());for(var X=0,d="";d=Xe(I,X++),w.c=d,!!d;)switch(w.trackPosition&&(w.position++,d===`
`?(w.line++,w.column=0):w.column++),w.state){case p.BEGIN:if(w.state=p.BEGIN_WHITESPACE,d==="\uFEFF")continue;z(w,d);continue;case p.BEGIN_WHITESPACE:z(w,d);continue;case p.TEXT:if(w.sawRoot&&!w.closedRoot){for(var _=X-1;d&&d!=="<"&&d!=="&";)d=Xe(I,X++),d&&w.trackPosition&&(w.position++,d===`
`?(w.line++,w.column=0):w.column++);w.textNode+=I.substring(_,X-1)}d==="<"&&!(w.sawRoot&&w.closedRoot&&!w.strict)?(w.state=p.OPEN_WAKA,w.startTagPosition=w.position):(!D(d)&&(!w.sawRoot||w.closedRoot)&&Y(w,"Text data outside of root node."),d==="&"?w.state=p.TEXT_ENTITY:w.textNode+=d);continue;case p.SCRIPT:d==="<"?w.state=p.SCRIPT_ENDING:w.script+=d;continue;case p.SCRIPT_ENDING:d==="/"?w.state=p.CLOSE_TAG:(w.script+="<"+d,w.state=p.SCRIPT);continue;case p.OPEN_WAKA:if(d==="!")w.state=p.SGML_DECL,w.sgmlDecl="";else if(!D(d))if(A(T,d))w.state=p.OPEN_TAG,w.tagName=d;else if(d==="/")w.state=p.CLOSE_TAG,w.tagName="";else if(d==="?")w.state=p.PROC_INST,w.procInstName=w.procInstBody="";else{if(Y(w,"Unencoded <"),w.startTagPosition+1<w.position){var S=w.position-w.startTagPosition;d=new Array(S).join(" ")+d}w.textNode+="<"+d,w.state=p.TEXT}continue;case p.SGML_DECL:if(w.sgmlDecl+d==="--"){w.state=p.COMMENT,w.comment="",w.sgmlDecl="";continue}w.doctype&&w.doctype!==!0&&w.sgmlDecl?(w.state=p.DOCTYPE_DTD,w.doctype+="<!"+w.sgmlDecl+d,w.sgmlDecl=""):(w.sgmlDecl+d).toUpperCase()===h?(M(w,"onopencdata"),w.state=p.CDATA,w.sgmlDecl="",w.cdata=""):(w.sgmlDecl+d).toUpperCase()===c?(w.state=p.DOCTYPE,(w.doctype||w.sawRoot)&&Y(w,"Inappropriately located doctype declaration"),w.doctype="",w.sgmlDecl=""):d===">"?(M(w,"onsgmldeclaration",w.sgmlDecl),w.sgmlDecl="",w.state=p.TEXT):(N(d)&&(w.state=p.SGML_DECL_QUOTED),w.sgmlDecl+=d);continue;case p.SGML_DECL_QUOTED:d===w.q&&(w.state=p.SGML_DECL,w.q=""),w.sgmlDecl+=d;continue;case p.DOCTYPE:d===">"?(w.state=p.TEXT,M(w,"ondoctype",w.doctype),w.doctype=!0):(w.doctype+=d,d==="["?w.state=p.DOCTYPE_DTD:N(d)&&(w.state=p.DOCTYPE_QUOTED,w.q=d));continue;case p.DOCTYPE_QUOTED:w.doctype+=d,d===w.q&&(w.q="",w.state=p.DOCTYPE);continue;case p.DOCTYPE_DTD:d==="]"?(w.doctype+=d,w.state=p.DOCTYPE):d==="<"?(w.state=p.OPEN_WAKA,w.startTagPosition=w.position):N(d)?(w.doctype+=d,w.state=p.DOCTYPE_DTD_QUOTED,w.q=d):w.doctype+=d;continue;case p.DOCTYPE_DTD_QUOTED:w.doctype+=d,d===w.q&&(w.state=p.DOCTYPE_DTD,w.q="");continue;case p.COMMENT:d==="-"?w.state=p.COMMENT_ENDING:w.comment+=d;continue;case p.COMMENT_ENDING:d==="-"?(w.state=p.COMMENT_ENDED,w.comment=W(w.opt,w.comment),w.comment&&M(w,"oncomment",w.comment),w.comment=""):(w.comment+="-"+d,w.state=p.COMMENT);continue;case p.COMMENT_ENDED:d!==">"?(Y(w,"Malformed comment"),w.comment+="--"+d,w.state=p.COMMENT):w.doctype&&w.doctype!==!0?w.state=p.DOCTYPE_DTD:w.state=p.TEXT;continue;case p.CDATA:d==="]"?w.state=p.CDATA_ENDING:w.cdata+=d;continue;case p.CDATA_ENDING:d==="]"?w.state=p.CDATA_ENDING_2:(w.cdata+="]"+d,w.state=p.CDATA);continue;case p.CDATA_ENDING_2:d===">"?(w.cdata&&M(w,"oncdata",w.cdata),M(w,"onclosecdata"),w.cdata="",w.state=p.TEXT):d==="]"?w.cdata+="]":(w.cdata+="]]"+d,w.state=p.CDATA);continue;case p.PROC_INST:d==="?"?w.state=p.PROC_INST_ENDING:D(d)?w.state=p.PROC_INST_BODY:w.procInstName+=d;continue;case p.PROC_INST_BODY:if(!w.procInstBody&&D(d))continue;d==="?"?w.state=p.PROC_INST_ENDING:w.procInstBody+=d;continue;case p.PROC_INST_ENDING:d===">"?(M(w,"onprocessinginstruction",{name:w.procInstName,body:w.procInstBody}),w.procInstName=w.procInstBody="",w.state=p.TEXT):(w.procInstBody+="?"+d,w.state=p.PROC_INST_BODY);continue;case p.OPEN_TAG:A(x,d)?w.tagName+=d:(Te(w),d===">"?le(w):d==="/"?w.state=p.OPEN_TAG_SLASH:(D(d)||Y(w,"Invalid character in tag name"),w.state=p.ATTRIB));continue;case p.OPEN_TAG_SLASH:d===">"?(le(w,!0),Ee(w)):(Y(w,"Forward-slash in opening tag not followed by >"),w.state=p.ATTRIB);continue;case p.ATTRIB:if(D(d))continue;d===">"?le(w):d==="/"?w.state=p.OPEN_TAG_SLASH:A(T,d)?(w.attribName=d,w.attribValue="",w.state=p.ATTRIB_NAME):Y(w,"Invalid attribute name");continue;case p.ATTRIB_NAME:d==="="?w.state=p.ATTRIB_VALUE:d===">"?(Y(w,"Attribute without value"),w.attribValue=w.attribName,he(w),le(w)):D(d)?w.state=p.ATTRIB_NAME_SAW_WHITE:A(x,d)?w.attribName+=d:Y(w,"Invalid attribute name");continue;case p.ATTRIB_NAME_SAW_WHITE:if(d==="=")w.state=p.ATTRIB_VALUE;else{if(D(d))continue;Y(w,"Attribute without value"),w.tag.attributes[w.attribName]="",w.attribValue="",M(w,"onattribute",{name:w.attribName,value:""}),w.attribName="",d===">"?le(w):A(T,d)?(w.attribName=d,w.state=p.ATTRIB_NAME):(Y(w,"Invalid attribute name"),w.state=p.ATTRIB)}continue;case p.ATTRIB_VALUE:if(D(d))continue;N(d)?(w.q=d,w.state=p.ATTRIB_VALUE_QUOTED):(w.opt.unquotedAttributeValues||H(w,"Unquoted attribute value"),w.state=p.ATTRIB_VALUE_UNQUOTED,w.attribValue=d);continue;case p.ATTRIB_VALUE_QUOTED:if(d!==w.q){d==="&"?w.state=p.ATTRIB_VALUE_ENTITY_Q:w.attribValue+=d;continue}he(w),w.q="",w.state=p.ATTRIB_VALUE_CLOSED;continue;case p.ATTRIB_VALUE_CLOSED:D(d)?w.state=p.ATTRIB:d===">"?le(w):d==="/"?w.state=p.OPEN_TAG_SLASH:A(T,d)?(Y(w,"No whitespace between attributes"),w.attribName=d,w.attribValue="",w.state=p.ATTRIB_NAME):Y(w,"Invalid attribute name");continue;case p.ATTRIB_VALUE_UNQUOTED:if(!E(d)){d==="&"?w.state=p.ATTRIB_VALUE_ENTITY_U:w.attribValue+=d;continue}he(w),d===">"?le(w):w.state=p.ATTRIB;continue;case p.CLOSE_TAG:if(w.tagName)d===">"?Ee(w):A(x,d)?w.tagName+=d:w.script?(w.script+="</"+w.tagName,w.tagName="",w.state=p.SCRIPT):(D(d)||Y(w,"Invalid tagname in closing tag"),w.state=p.CLOSE_TAG_SAW_WHITE);else{if(D(d))continue;O(T,d)?w.script?(w.script+="</"+d,w.state=p.SCRIPT):Y(w,"Invalid tagname in closing tag."):w.tagName=d}continue;case p.CLOSE_TAG_SAW_WHITE:if(D(d))continue;d===">"?Ee(w):Y(w,"Invalid characters in closing tag");continue;case p.TEXT_ENTITY:case p.ATTRIB_VALUE_ENTITY_Q:case p.ATTRIB_VALUE_ENTITY_U:var q,L;switch(w.state){case p.TEXT_ENTITY:q=p.TEXT,L="textNode";break;case p.ATTRIB_VALUE_ENTITY_Q:q=p.ATTRIB_VALUE_QUOTED,L="attribValue";break;case p.ATTRIB_VALUE_ENTITY_U:q=p.ATTRIB_VALUE_UNQUOTED,L="attribValue";break}if(d===";"){var R=Le(w);w.opt.unparsedEntities&&!Object.values(e.XML_ENTITIES).includes(R)?(w.entity="",w.state=q,w.write(R)):(w[L]+=R,w.entity="",w.state=q)}else A(w.entity.length?g:y,d)?w.entity+=d:(Y(w,"Invalid character in entity name"),w[L]+="&"+w.entity+d,w.entity="",w.state=q);continue;default:throw new Error(w,"Unknown state: "+w.state)}return w.position>=w.bufferCheckPosition&&a(w),w}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var I=String.fromCharCode,w=Math.floor,X=function(){var d=16384,_=[],S,q,L=-1,R=arguments.length;if(!R)return"";for(var B="";++L<R;){var P=Number(arguments[L]);if(!isFinite(P)||P<0||P>1114111||w(P)!==P)throw RangeError("Invalid code point: "+P);P<=65535?_.push(P):(P-=65536,S=(P>>10)+55296,q=P%1024+56320,_.push(S,q)),(L+1===R||_.length>d)&&(B+=I.apply(null,_),_.length=0)}return B};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:X,configurable:!0,writable:!0}):String.fromCodePoint=X}()})(o)}(mn)),mn}var gn={},Xo;function bc(){return Xo||(Xo=1,(function(){gn.stripBOM=function(o){return o[0]==="\uFEFF"?o.substring(1):o}}).call(ee)),gn}var ke={},Vo;function qs(){return Vo||(Vo=1,(function(){var o;o=new RegExp(/(?!xmlns)^.*:/),ke.normalize=function(e){return e.toLowerCase()},ke.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},ke.stripPrefix=function(e){return e.replace(o,"")},ke.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},ke.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(ee)),ke}var zo;function Tc(){return zo||(zo=1,function(o){(function(){var e,n,i,a,t,r,s,u,f=function(c,m){return function(){return c.apply(m,arguments)}},l=function(c,m){for(var v in m)h.call(m,v)&&(c[v]=m[v]);function b(){this.constructor=c}return b.prototype=m.prototype,c.prototype=new b,c.__super__=m.prototype,c},h={}.hasOwnProperty;s=Ec(),i=Be,e=bc(),r=qs(),u=Ks.setImmediate,n=Pn().defaults,a=function(c){return typeof c=="object"&&c!=null&&Object.keys(c).length===0},t=function(c,m,v){var b,T,x;for(b=0,T=c.length;b<T;b++)x=c[b],m=x(m,v);return m},o.Parser=function(c){l(m,c);function m(v){this.parseStringPromise=f(this.parseStringPromise,this),this.parseString=f(this.parseString,this),this.reset=f(this.reset,this),this.assignOrPush=f(this.assignOrPush,this),this.processAsync=f(this.processAsync,this);var b,T,x;if(!(this instanceof o.Parser))return new o.Parser(v);this.options={},T=n["0.2"];for(b in T)h.call(T,b)&&(x=T[b],this.options[b]=x);for(b in v)h.call(v,b)&&(x=v[b],this.options[b]=x);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(r.normalize)),this.reset()}return m.prototype.processAsync=function(){var v,b;try{return this.remaining.length<=this.options.chunkSize?(v=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(v),this.saxParser.close()):(v=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(v),u(this.processAsync))}catch(T){if(b=T,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(b)}},m.prototype.assignOrPush=function(v,b,T){return b in v?(v[b]instanceof Array||(v[b]=[v[b]]),v[b].push(T)):this.options.explicitArray?v[b]=[T]:v[b]=T},m.prototype.reset=function(){var v,b,T,x;return this.removeAllListeners(),this.saxParser=s.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(y){return function(g){if(y.saxParser.resume(),!y.saxParser.errThrown)return y.saxParser.errThrown=!0,y.emit("error",g)}}(this),this.saxParser.onend=function(y){return function(){if(!y.saxParser.ended)return y.saxParser.ended=!0,y.emit("end",y.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,x=[],v=this.options.attrkey,b=this.options.charkey,this.saxParser.onopentag=function(y){return function(g){var D,N,E,A,O;if(E=Object.create(null),E[b]="",!y.options.ignoreAttrs){O=g.attributes;for(D in O)h.call(O,D)&&(!(v in E)&&!y.options.mergeAttrs&&(E[v]=Object.create(null)),N=y.options.attrValueProcessors?t(y.options.attrValueProcessors,g.attributes[D],D):g.attributes[D],A=y.options.attrNameProcessors?t(y.options.attrNameProcessors,D):D,y.options.mergeAttrs?y.assignOrPush(E,A,N):E[v][A]=N)}return E["#name"]=y.options.tagNameProcessors?t(y.options.tagNameProcessors,g.name):g.name,y.options.xmlns&&(E[y.options.xmlnskey]={uri:g.uri,local:g.local}),x.push(E)}}(this),this.saxParser.onclosetag=function(y){return function(){var g,D,N,E,A,O,p,C,F,M;if(O=x.pop(),A=O["#name"],(!y.options.explicitChildren||!y.options.preserveChildrenOrder)&&delete O["#name"],O.cdata===!0&&(g=O.cdata,delete O.cdata),F=x[x.length-1],O[b].match(/^\s*$/)&&!g?(D=O[b],delete O[b]):(y.options.trim&&(O[b]=O[b].trim()),y.options.normalize&&(O[b]=O[b].replace(/\s{2,}/g," ").trim()),O[b]=y.options.valueProcessors?t(y.options.valueProcessors,O[b],A):O[b],Object.keys(O).length===1&&b in O&&!y.EXPLICIT_CHARKEY&&(O=O[b])),a(O)&&(typeof y.options.emptyTag=="function"?O=y.options.emptyTag():O=y.options.emptyTag!==""?y.options.emptyTag:D),y.options.validator!=null&&(M="/"+function(){var U,W,H;for(H=[],U=0,W=x.length;U<W;U++)E=x[U],H.push(E["#name"]);return H}().concat(A).join("/"),function(){var U;try{return O=y.options.validator(M,F&&F[A],O)}catch(W){return U=W,y.emit("error",U)}}()),y.options.explicitChildren&&!y.options.mergeAttrs&&typeof O=="object"){if(!y.options.preserveChildrenOrder)E=Object.create(null),y.options.attrkey in O&&(E[y.options.attrkey]=O[y.options.attrkey],delete O[y.options.attrkey]),!y.options.charsAsChildren&&y.options.charkey in O&&(E[y.options.charkey]=O[y.options.charkey],delete O[y.options.charkey]),Object.getOwnPropertyNames(O).length>0&&(E[y.options.childkey]=O),O=E;else if(F){F[y.options.childkey]=F[y.options.childkey]||[],p=Object.create(null);for(N in O)h.call(O,N)&&(p[N]=O[N]);F[y.options.childkey].push(p),delete O["#name"],Object.keys(O).length===1&&b in O&&!y.EXPLICIT_CHARKEY&&(O=O[b])}}return x.length>0?y.assignOrPush(F,A,O):(y.options.explicitRoot&&(C=O,O=Object.create(null),O[A]=C),y.resultObject=O,y.saxParser.ended=!0,y.emit("end",y.resultObject))}}(this),T=function(y){return function(g){var D,N;if(N=x[x.length-1],N)return N[b]+=g,y.options.explicitChildren&&y.options.preserveChildrenOrder&&y.options.charsAsChildren&&(y.options.includeWhiteChars||g.replace(/\\n/g,"").trim()!=="")&&(N[y.options.childkey]=N[y.options.childkey]||[],D={"#name":"__text__"},D[b]=g,y.options.normalize&&(D[b]=D[b].replace(/\s{2,}/g," ").trim()),N[y.options.childkey].push(D)),N}}(this),this.saxParser.ontext=T,this.saxParser.oncdata=function(y){return function(g){var D;if(D=T(g),D)return D.cdata=!0}}()},m.prototype.parseString=function(v,b){var T;b!=null&&typeof b=="function"&&(this.on("end",function(x){return this.reset(),b(null,x)}),this.on("error",function(x){return this.reset(),b(x)}));try{return v=v.toString(),v.trim()===""?(this.emit("end",null),!0):(v=e.stripBOM(v),this.options.async?(this.remaining=v,u(this.processAsync),this.saxParser):this.saxParser.write(v).close())}catch(x){if(T=x,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw T}else return this.emit("error",T),this.saxParser.errThrown=!0}},m.prototype.parseStringPromise=function(v){return new Promise(function(b){return function(T,x){return b.parseString(v,function(y,g){return y?x(y):T(g)})}}(this))},m}(i),o.parseString=function(c,m,v){var b,T,x;return v!=null?(typeof v=="function"&&(b=v),typeof m=="object"&&(T=m)):(typeof m=="function"&&(b=m),T={}),x=new o.Parser(T),x.parseString(c,b)},o.parseStringPromise=function(c,m){var v,b;return typeof m=="object"&&(v=m),b=new o.Parser(v),b.parseStringPromise(c)}}).call(ee)}(dn)),dn}(function(){var o,e,n,i,a=function(r,s){for(var u in s)t.call(s,u)&&(r[u]=s[u]);function f(){this.constructor=r}return f.prototype=s.prototype,r.prototype=new f,r.__super__=s.prototype,r},t={}.hasOwnProperty;e=Pn(),o=wc(),n=Tc(),i=qs(),Me.defaults=e.defaults,Me.processors=i,Me.ValidationError=function(r){a(s,r);function s(u){this.message=u}return s}(Error),Me.Builder=o.Builder,Me.Parser=n.Parser,Me.parseString=n.parseString,Me.parseStringPromise=n.parseStringPromise}).call(ee);var Dn={exports:{}},ft={exports:{}},yn,Wo;function $s(){if(Wo)return yn;Wo=1;function o(e){i.debug=i,i.default=i,i.coerce=f,i.disable=s,i.enable=r,i.enabled=u,i.humanize=ms(),Object.keys(e).forEach(function(l){i[l]=e[l]}),i.instances=[],i.names=[],i.skips=[],i.formatters={};function n(l){for(var h=0,c=0;c<l.length;c++)h=(h<<5)-h+l.charCodeAt(c),h|=0;return i.colors[Math.abs(h)%i.colors.length]}i.selectColor=n;function i(l){var h;function c(){if(c.enabled){for(var m=arguments.length,v=new Array(m),b=0;b<m;b++)v[b]=arguments[b];var T=c,x=Number(new Date),y=x-(h||x);T.diff=y,T.prev=h,T.curr=x,h=x,v[0]=i.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");var g=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,function(N,E){if(N==="%%")return N;g++;var A=i.formatters[E];if(typeof A=="function"){var O=v[g];N=A.call(T,O),v.splice(g,1),g--}return N}),i.formatArgs.call(T,v);var D=T.log||i.log;D.apply(T,v)}}return c.namespace=l,c.enabled=i.enabled(l),c.useColors=i.useColors(),c.color=n(l),c.destroy=a,c.extend=t,typeof i.init=="function"&&i.init(c),i.instances.push(c),c}function a(){var l=i.instances.indexOf(this);return l!==-1?(i.instances.splice(l,1),!0):!1}function t(l,h){return i(this.namespace+(typeof h>"u"?":":h)+l)}function r(l){i.save(l),i.names=[],i.skips=[];var h,c=(typeof l=="string"?l:"").split(/[\s,]+/),m=c.length;for(h=0;h<m;h++)c[h]&&(l=c[h].replace(/\*/g,".*?"),l[0]==="-"?i.skips.push(new RegExp("^"+l.substr(1)+"$")):i.names.push(new RegExp("^"+l+"$")));for(h=0;h<i.instances.length;h++){var v=i.instances[h];v.enabled=i.enabled(v.namespace)}}function s(){i.enable("")}function u(l){if(l[l.length-1]==="*")return!0;var h,c;for(h=0,c=i.skips.length;h<c;h++)if(i.skips[h].test(l))return!1;for(h=0,c=i.names.length;h<c;h++)if(i.names[h].test(l))return!0;return!1}function f(l){return l instanceof Error?l.stack||l.message:l}return i.enable(i.load()),i}return yn=o,yn}var Ho;function Oc(){return Ho||(Ho=1,function(o,e){function n(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(c){return typeof c}:n=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},n(l)}e.log=t,e.formatArgs=a,e.save=r,e.load=s,e.useColors=i,e.storage=u(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+o.exports.humanize(this.diff),!!this.useColors){var h="color: "+this.color;l.splice(1,0,h,"color: inherit");var c=0,m=0;l[0].replace(/%[a-zA-Z%]/g,function(v){v!=="%%"&&(c++,v==="%c"&&(m=c))}),l.splice(m,0,h)}}function t(){var l;return(typeof console>"u"?"undefined":n(console))==="object"&&console.log&&(l=console).log.apply(l,arguments)}function r(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function s(){var l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}function u(){try{return localStorage}catch{}}o.exports=$s()(e);var f=o.exports.formatters;f.j=function(l){try{return JSON.stringify(l)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}(ft,ft.exports)),ft.exports}var lt={exports:{}},Go;function Cc(){return Go||(Go=1,function(o,e){var n=In,i=yt;e.init=h,e.log=u,e.formatArgs=r,e.save=f,e.load=l,e.useColors=t,e.colors=[6,2,3,4,5,1];try{var a=ys();a&&(a.stderr||a).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}e.inspectOpts=Object.keys(process.env).filter(function(m){return/^debug_/i.test(m)}).reduce(function(m,v){var b=v.substring(6).toLowerCase().replace(/_([a-z])/g,function(x,y){return y.toUpperCase()}),T=process.env[v];return/^(yes|on|true|enabled)$/i.test(T)?T=!0:/^(no|off|false|disabled)$/i.test(T)?T=!1:T==="null"?T=null:T=Number(T),m[b]=T,m},{});function t(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:n.isatty(process.stderr.fd)}function r(m){var v=this.namespace,b=this.useColors;if(b){var T=this.color,x="\x1B[3"+(T<8?T:"8;5;"+T),y="  ".concat(x,";1m").concat(v," \x1B[0m");m[0]=y+m[0].split(`
`).join(`
`+y),m.push(x+"m+"+o.exports.humanize(this.diff)+"\x1B[0m")}else m[0]=s()+v+" "+m[0]}function s(){return e.inspectOpts.hideDate?"":new Date().toISOString()+" "}function u(){return process.stderr.write(i.format.apply(i,arguments)+`
`)}function f(m){m?process.env.DEBUG=m:delete process.env.DEBUG}function l(){return process.env.DEBUG}function h(m){m.inspectOpts={};for(var v=Object.keys(e.inspectOpts),b=0;b<v.length;b++)m.inspectOpts[v[b]]=e.inspectOpts[v[b]]}o.exports=$s()(e);var c=o.exports.formatters;c.o=function(m){return this.inspectOpts.colors=this.useColors,i.inspect(m,this.inspectOpts).split(`
`).map(function(v){return v.trim()}).join(" ")},c.O=function(m){return this.inspectOpts.colors=this.useColors,i.inspect(m,this.inspectOpts)}}(lt,lt.exports)),lt.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Dn.exports=Oc():Dn.exports=Cc();var Dc=Dn.exports;const Ye=An,Ac=Nn,Nc=Hs,Je=Sn,Ko=ze,Ic=Me,_c=_s,xc=Dc("roa"),pt=It;function Fc(o){return o.replace(/[\t\n\r\f]/g," ")}function Sc(o){const e=Object.keys(o),n={};for(let i=0;i<e.length;i++){const a=e[i];n[a.toLowerCase()]=o[a]}return n}function Pc(o){const e="x-acs-",n=Object.keys(o),i=[];for(let t=0;t<n.length;t++){const r=n[t];r.startsWith(e)&&i.push(r)}i.sort();var a="";for(let t=0;t<i.length;t++){const r=i[t];a+=`${r}:${Fc(o[r]).trim()}
`}return a}function Lc(o,e){const n=Object.keys(e).sort();if(n.length===0)return o;for(var i=[],a=0;a<n.length;a++){const t=n[a];i.push(`${t}=${e[t]}`)}return`${o}?${i.join("&")}`}function Mc(o,e,n,i){const a=n.accept,t=n["content-md5"]||"",r=n["content-type"]||"",s=n.date||"",u=`${o}
${a}
${t}
${r}
${s}
`,f=Pc(n),l=Lc(e,i);return`${u}${f}${l}`}function Rc(o){const e=new Ic.Parser({});return new Promise((n,i)=>{e.parseString(o,(a,t)=>{if(a)return i(a);n(t)})})}class jc extends Error{constructor(e){const n=e.Message[0],i=e.Code[0],a=e.HostId[0],t=e.RequestId[0];super(`${n} hostid: ${a}, requestid: ${t}`),this.code=i}}class qc{constructor(e){if(Ye(e,'must pass "config"'),Ye(e.endpoint,'must pass "config.endpoint"'),!e.endpoint.startsWith("https://")&&!e.endpoint.startsWith("http://"))throw new Error(`"config.endpoint" must starts with 'https://' or 'http://'.`);if(Ye(e.apiVersion,'must pass "config.apiVersion"'),e.credentialsProvider){if(typeof e.credentialsProvider.getCredentials!="function")throw new Error('must pass "config.credentialsProvider" with function "getCredentials()"');this.credentialsProvider=e.credentialsProvider}else Ye(e.accessKeyId,'must pass "config.accessKeyId"'),Ye(e.accessKeySecret,'must pass "config.accessKeySecret"'),this.accessKeyId=e.accessKeyId,this.accessKeySecret=e.accessKeySecret,this.securityToken=e.securityToken,this.credentialsProvider={getCredentials:async()=>({accessKeyId:e.accessKeyId,accessKeySecret:e.accessKeySecret,securityToken:e.securityToken})};this.endpoint=e.endpoint,this.apiVersion=e.apiVersion,this.host=Ac.parse(this.endpoint).hostname,this.opts=e.opts;var n=this.endpoint.startsWith("https://")?Et:wt;this.keepAliveAgent=new n.Agent({keepAlive:!0,keepAliveMsecs:3e3})}buildHeaders(){var n={accept:"application/json",date:new Date().toGMTString(),host:this.host,"x-acs-signature-nonce":Je.makeNonce(),"x-acs-signature-method":"HMAC-SHA1","x-acs-signature-version":"1.0","x-acs-version":this.apiVersion,"user-agent":pt.DEFAULT_UA,"x-sdk-client":pt.DEFAULT_CLIENT};return this.securityToken&&(n["x-acs-accesskey-id"]=this.accessKeyId,n["x-acs-security-token"]=this.securityToken),n}signature(e){const n=Buffer.from(e,"utf8");return Je.sha1(n,this.accessKeySecret,"base64")}buildAuthorization(e){return`acs ${this.accessKeyId}:${this.signature(e)}`}async request(e,n,i={},a="",t={},r={}){const s=await this.credentialsProvider.getCredentials();var f={accept:"application/json",date:new Date().toGMTString(),host:this.host,"x-acs-signature-nonce":Je.makeNonce(),"x-acs-version":this.apiVersion,"user-agent":pt.DEFAULT_UA,"x-sdk-client":pt.DEFAULT_CLIENT};s&&s.accessKeyId&&s.accessKeySecret&&(f["x-acs-signature-method"]="HMAC-SHA1",f["x-acs-signature-version"]="1.0",s.securityToken&&(f["x-acs-accesskey-id"]=s.accessKeyId,f["x-acs-security-token"]=s.securityToken));var l=Object.assign(f,Sc(t)),h=null;h=Buffer.from(a,"utf8"),l["content-md5"]=Je.md5(h,"base64"),l["content-length"]=h.length;var c=`${this.endpoint}${n}`;if(Object.keys(i).length&&(c+=`?${Nc.stringify(i)}`),s&&s.accessKeyId&&s.accessKeySecret){const g=Mc(e,n,l,i);xc("stringToSign: %s",g);const D=Buffer.from(g,"utf8"),N=Je.sha1(D,s.accessKeySecret,"base64");l.authorization=`acs ${s.accessKeyId}:${N}`}const m=Object.assign({method:e,agent:this.keepAliveAgent,headers:l,data:h},this.opts,r),v=await Ko.request(c,m),b=await Ko.read(v,"utf8");if(r.rawBody)return b;const T=v.headers["content-type"]||"";if(T.startsWith("application/json")){const g=v.statusCode;if(g===204)return b;var x;try{x=_c.parse(b)}catch(D){throw D.name="FormatError",D.message="parse response to json error",D.body=b,D}if(g>=400){const D=x.Message||x.errorMsg||"",N=x.Code||x.errorCode||"",E=x.RequestId||"";var y=new Error(`code: ${g}, ${D}, requestid: ${E}`);throw y.name=`${N}Error`,y.statusCode=g,y.result=x,y.code=N,y}return x}if(T.startsWith("text/xml")){const g=await Rc(b);if(g.Error)throw new jc(g.Error);return g}return b}put(e,n,i,a,t){return this.request("PUT",e,n,i,a,t)}post(e,n,i,a,t){return this.request("POST",e,n,i,a,t)}get(e,n,i,a){return this.request("GET",e,n,"",i,a)}delete(e,n,i,a){return this.request("DELETE",e,n,"",i,a)}}var $c=qc;At.exports=Fs;At.exports.ROAClient=$c;At.exports.RPCClient=Fs;var kc=At.exports;const Bc=bt(kc);async function Uc(){const o=new Bc({accessKeyId:gt.accessKeyId,accessKeySecret:gt.accessKeySecret,endpoint:"http://nls-meta.cn-shanghai.aliyuncs.com",apiVersion:"2019-02-28"});try{return(await o.request("CreateToken")).Token.Id}catch(e){return console.error("Error creating token:",e),null}}function et(o){return new Promise((e,n)=>{is.ffprobe(o,(i,a)=>{if(i)return n(i);e(a.format.duration||0)})})}const Ve="zhushou";function Ft(){switch(process.platform){case"win32":return Z.join(re.app.getPath("appData"),Ve);case"darwin":return Z.join(re.app.getPath("appData"),Ve);case"linux":return Z.join(re.app.getPath("appData"),Ve);default:return Z.join(re.app.getPath("documents"),Ve)}}function Gn(){try{const o=Ft();ae.existsSync(o)||(ae.mkdirSync(o),console.log("Created zhushou directory at:",o));try{ae.accessSync(o,ae.constants.W_OK)}catch{return console.error("No write permission for zhushou directory, falling back to documents"),Z.join(re.app.getPath("documents"),Ve)}return o}catch(o){return console.error("Failed to create zhushou directory:",o),Z.join(re.app.getPath("documents"),Ve)}}function Xc(){re.ipcMain.handle("get-default-save-path",()=>Gn())}function Vc(){re.ipcMain.handle("text2voice",async(o,e)=>{try{const n=JSON.parse(En(e)),i=n,a=n.outputDir||Ft(),t=n.outputFileName||`tts_${Date.now()}`,r=await Uc();Lt.existsSync(a)||Lt.mkdirSync(a,{recursive:!0});const s=new Au({url:gt.ttsUrl,appkey:gt.appkey,token:r}),u=Z.join(a,`${t}.${i.format||"mp3"}`),f=Lt.createWriteStream(u);return se.log(u),new Promise((l,h)=>{s.on("meta",c=>{se.info("接收到元信息:",c)}),s.on("data",c=>{try{f.write(c),se.debug(`接收到数据块，大小: ${c.length} bytes`)}catch(m){se.error("写入文件失败:",m),h(m)}}),s.on("completed",async()=>{f.end(),se.info("语音合成完成");const c=await et(u);se.info(`语音合成完成，时长: ${c}秒`),l({success:!0,outputFile:u,duration:c})}),s.on("closed",()=>{se.info("连接已关闭")}),s.on("failed",c=>{f.end(),se.error("语音合成失败:",c),h(c)}),s.start(i,!0,6e3)})}catch(n){throw se.error("语音合成初始化失败:",n),n}})}const zc={...De.webcrypto.subtle,generateKey:async(o,e,n)=>De.webcrypto.subtle.generateKey(o,e,n)},Wc={getRandomValues:o=>{if(!o)return o;switch(!0){case o instanceof Int8Array:return De.webcrypto.getRandomValues(o);case o instanceof Uint8Array:return De.webcrypto.getRandomValues(o);case o instanceof Uint8ClampedArray:return De.webcrypto.getRandomValues(o);case o instanceof Int16Array:return De.webcrypto.getRandomValues(o);case o instanceof Uint16Array:return De.webcrypto.getRandomValues(o);case o instanceof Int32Array:return De.webcrypto.getRandomValues(o);case o instanceof Uint32Array:return De.webcrypto.getRandomValues(o);default:throw new Error("Unsupported ArrayBufferView type")}},randomUUID:()=>De.webcrypto.randomUUID(),subtle:zc};function ks(){se.transports.file.level="info",se.transports.file.maxSize=5*1024*1024,se.transports.file.format="[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}] {text}";const o=se.transports.file.getFile().path;if(se.transports.file.stream=ae.createWriteStream(o,{flags:"a",encoding:"utf8"}),process.platform==="win32"){process.env.CHCP="65001";try{require("child_process").execSync("chcp 65001")}catch{}}const e=global.console;return global.console=se,{restore:()=>{global.console=e}}}ks();async function Hc(o,e,n=!0,i,a,t){return new Promise((r,s)=>{const u=Ze();n?u.input(o).input(e).inputOptions([`-ss ${i}`,`-t ${a}`]).outputOptions(["-map 0:v","-map 1:a","-c:v libx264","-c:a aac","-shortest"]):u.input(o).inputOptions([`-ss ${i}`,`-t ${a}`]).outputOptions(["-map 0:v","-map 1:a","-c:v libx264","-c:a aac","-shortest"]).input(e),u.on("start",f=>{console.log("执行命令: "+f)}).on("progress",f=>{console.log(`处理中: ${Math.round(f.percent)}%`)}).on("end",()=>{console.log(`分段处理完成: ${t}`),r()}).on("error",f=>{console.error(`处理错误: ${f.message}`),s(f)}).save(t)})}async function Gc(o,e,n){const i=o.zimuConfig.datas[0],a=i.path,t=i.duration??await et(a),r=o.videoList,s=o.isOpenOriginAudio??!0,u=[],f=`${n}_t${Date.now()}_`;for(const l of r){const h=l.path,c=l.duration??await et(h),m=t,v=Math.ceil(c/m),b=f+Z.basename(h,Z.extname(h));for(let T=0;T<v;T++){const x=T*m,y=l.duration-x,g=Math.min(m,y),D=Z.join(e,`${b}_part${T+1}_${x}-${x+g}.mp4`);u.push({videoPath:h,audioPath:a,outputPath:D,startTime:x,currentDuration:g,isOpenOriginAudio:s})}}return u}async function Kc(o,e){return new Promise((n,i)=>{const a=Ze();o.forEach(s=>{a.input(s)});let t="";const r=o.map((s,u)=>`[${u}:v] [${u}:a]`).join(" ");t+=`${r} concat=n=${o.length}:v=1:a=1 [v] [a]`,a.complexFilter([t]).outputOptions(["-map [v]","-map [a]","-c:v libx264","-c:a aac"]).on("end",n).on("error",i).save(e)})}async function Yc(o){se.log("accept params："),se.log(JSON.stringify(o));const e=o.clips,n=o.outputFileName,i=o.outputDir??Gn();De.randomUUID().replace(/-/g,"");for(const f of e)f.segments=await Gc(f,i,n);se.log("split clip to segments done："),se.log(JSON.stringify(e));const a=e.flatMap(f=>f.segments),t=a.map(f=>Hc(f.videoPath,f.audioPath,f.isOpenOriginAudio,f.startTime,f.currentDuration,f.outputPath));await Promise.all(t),se.log("segment process done："),se.log(JSON.stringify(a));let r=0;for(const f of e)f.segments.length!==1&&f.segments.length<r&&(r=f.segments.length);const s=[];for(let f=0;f<r;f++){const l=[];let h=0;for(const c of e){const m=c.segments;let v;m.length===1?v=m[0]:v=m[f],l.push(v.outputPath),h+=v.currentDuration}s.push({videos:l,outputPath:Z.join(i,`${n}_${f}.mp4`),duration:h})}se.log("concat videos start"),se.log(JSON.stringify(s));const u=s.map(f=>Kc(f.videos,f.outputPath));return await Promise.all(u),se.log("concat videos done："),se.log(JSON.stringify(s)),s.map(f=>({outputPath:f.outputPath,duration:f.duration}))}function Jc(){re.ipcMain.handle("video-mix-and-cut",async(o,e)=>{const n=JSON.parse(En(e));return Yc(n)}),re.ipcMain.handle("get-media-duration",async(o,e)=>{const n=JSON.parse(En(e));return et(n.path)})}function Qc(o){re.ipcMain.handle("open-file-dialog",async(e,n)=>{if(!o)return null;const i=(n==null?void 0:n.defaultPath)||Ft(),a=(n==null?void 0:n.properties)||["openFile"],t=(n==null?void 0:n.title)||"选择文件",r=(n==null?void 0:n.buttonLabel)||"选择",s=(n==null?void 0:n.filters)||[{name:"All Files",extensions:["*"]}];n!=null&&n.multiple&&!a.includes("multiSelections")&&a.push("multiSelections");const u=await re.dialog.showOpenDialog(o,{title:t,defaultPath:i,buttonLabel:r,filters:s,properties:a});if(u.canceled)return[];{const f=u.filePaths.map(async l=>{const h=await et(l),c=`media://${encodeURIComponent(l)}`;return{path:Z.normalize(l),name:Z.basename(l),ext:Z.extname(l),mimeType:dt(l),duration:h,url:c}});return await Promise.all(f)}})}async function Zc(o){const e=Z.normalize(o);if(e!==o||e.includes("..")||![re.app.getPath("documents"),re.app.getPath("downloads"),re.app.getPath("videos"),Ft()].map(a=>Z.normalize(a)).some(a=>e.startsWith(a+Z.sep)))return!1;try{return await ae.promises.access(e,ae.constants.R_OK),!0}catch{return!1}}function ef(){re.protocol.handle("media",async o=>{try{const e=o.url.slice(8),n=decodeURIComponent(e).replace(/\//g,"\\").replace(/^\\/,""),i=Z.normalize(n);if(!await Zc(i))return new Response("Access Denied",{status:403});const a=await ae.promises.stat(i);if(!a.isFile())return new Response("Not a file",{status:400});const t=o.headers.get("range"),r=a.size,s={"Content-Type":dt(i),"Cache-Control":"public, max-age=31536000"};if(t){const u=t.replace(/bytes=/,"").split("-"),f=parseInt(u[0],10),l=u[1]?parseInt(u[1],10):r-1,h=l-f+1,c=ae.createReadStream(i,{start:f,end:l}),m=Ui(c);return new Response(m,{status:206,headers:{"Content-Range":`bytes ${f}-${l}/${r}`,"Accept-Ranges":"bytes","Content-Length":h.toString(),"Content-Type":await dt(i),"Cache-Control":"public, max-age=31536000"}})}else{const u=ae.createReadStream(i),f=Ui(u);return new Response(f,{headers:{"Content-Length":r.toString(),"Content-Type":await dt(i),"Cache-Control":"public, max-age=31536000"}})}}catch{return new Response("Not Found",{status:404})}})}function tf(o){re.globalShortcut.register("CommandOrControl+R",()=>{o&&o.reload()})}global.crypto=Wc;process.env.LANG="zh_CN.UTF-8";process.env.LC_ALL="zh_CN.UTF-8";process.platform==="win32"&&(process.env.CHCP="65001");process.env.DIST=Z.join(__dirname,"../dist");process.env.VITE_PUBLIC=re.app.isPackaged?process.env.DIST:Z.join(process.env.DIST,"../public");let Ie;const Yo=process.env.VITE_DEV_SERVER_URL;function Bs(){Ie=new re.BrowserWindow({icon:Z.join(process.env.VITE_PUBLIC,"electron-vite.svg"),webPreferences:{nodeIntegration:!0,contextIsolation:!0,preload:Z.join(__dirname,"preload.js")}}),Ie.webContents.on("did-finish-load",()=>{Ie==null||Ie.webContents.send("main-process-message",new Date().toLocaleString())}),Yo?Ie.loadURL(Yo):Ie.loadFile(Z.join(process.env.DIST,"index.html"))}ks();Ga();Js();Ka();Vc();Xc();Jc();re.app.whenReady().then(()=>{Gn(),Ha(),ef(),Bs(),Qc(Ie),tf(Ie)});re.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(re.app.quit(),Ie=null)});re.app.on("activate",()=>{re.BrowserWindow.getAllWindows().length===0&&Bs()});re.app.on("will-quit",()=>{re.globalShortcut.unregisterAll()});
//# sourceMappingURL=main.js.map
