"use strict";var Ms=Object.defineProperty;var Rs=(s,e,n)=>e in s?Ms(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var Q=(s,e,n)=>(Rs(s,typeof e!="symbol"?e+"":e,n),n);const fe=require("electron"),ie=require("path"),pt=require("util"),Be=require("events"),dt=require("child_process"),$e=require("os"),Te=require("fs"),qs=require("stream"),mt=require("http"),gt=require("https"),js=require("ws"),Tn=require("assert"),$s=require("zlib"),bn=require("url"),On=require("tty"),Ae=require("crypto"),ks=require("querystring"),Bs=require("string_decoder"),Us=require("timers");function Xs(s){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(s){for(const n in s)if(n!=="default"){const i=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:()=>s[n]})}}return e.default=s,Object.freeze(e)}const _t=Xs(Te);function Vs(){fe.ipcMain.handle("show-save-dialog",async(s,e)=>await fe.dialog.showSaveDialog({title:e.title||"保存文件",defaultPath:e.defaultPath||fe.app.getPath("documents"),filters:e.filters||[{name:"MP4 Videos",extensions:["mp4"]},{name:"All Files",extensions:["*"]}]})),fe.ipcMain.handle("select-directory",async()=>{const s=await fe.dialog.showOpenDialog({properties:["openDirectory"],title:"选择保存目录",defaultPath:fe.app.getPath("documents")});return!s.canceled&&s.filePaths.length>0?s.filePaths[0]:null})}var Z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yt(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function zs(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(s).forEach(function(i){var a=Object.getOwnPropertyDescriptor(s,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return s[i]}})}),n}var Vo={exports:{}},xt,Xn;function Ws(){if(Xn)return xt;Xn=1,xt=i,i.sync=a;var s=Te;function e(t,r){var o=r.pathExt!==void 0?r.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var u=0;u<o.length;u++){var l=o[u].toLowerCase();if(l&&t.substr(-l.length).toLowerCase()===l)return!0}return!1}function n(t,r,o){return!t.isSymbolicLink()&&!t.isFile()?!1:e(r,o)}function i(t,r,o){s.stat(t,function(u,l){o(u,u?!1:n(l,t,r))})}function a(t,r){return n(s.statSync(t),t,r)}return xt}var Ft,Vn;function Hs(){if(Vn)return Ft;Vn=1,Ft=e,e.sync=n;var s=Te;function e(t,r,o){s.stat(t,function(u,l){o(u,u?!1:i(l,r))})}function n(t,r){return i(s.statSync(t),r)}function i(t,r){return t.isFile()&&a(t,r)}function a(t,r){var o=t.mode,u=t.uid,l=t.gid,f=r.uid!==void 0?r.uid:process.getuid&&process.getuid(),p=r.gid!==void 0?r.gid:process.getgid&&process.getgid(),c=parseInt("100",8),g=parseInt("010",8),E=parseInt("001",8),T=c|g,O=o&E||o&g&&l===p||o&c&&u===f||o&T&&f===0;return O}return Ft}var lt;process.platform==="win32"||Z.TESTING_WINDOWS?lt=Ws():lt=Hs();var Gs=Cn;Cn.sync=Ks;function Cn(s,e,n){if(typeof e=="function"&&(n=e,e={}),!n){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,a){Cn(s,e||{},function(t,r){t?a(t):i(r)})})}lt(s,e||{},function(i,a){i&&(i.code==="EACCES"||e&&e.ignoreErrors)&&(i=null,a=!1),n(i,a)})}function Ks(s,e){try{return lt.sync(s,e||{})}catch(n){if(e&&e.ignoreErrors||n.code==="EACCES")return!1;throw n}}var Ys=Ko;Ko.sync=Qs;var pn=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",zo=ie,Js=pn?";":":",Wo=Gs;function Ho(s){var e=new Error("not found: "+s);return e.code="ENOENT",e}function Go(s,e){var n=e.colon||Js,i=e.path||process.env.PATH||"",a=[""];i=i.split(n);var t="";return pn&&(i.unshift(process.cwd()),t=e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM",a=t.split(n),s.indexOf(".")!==-1&&a[0]!==""&&a.unshift("")),(s.match(/\//)||pn&&s.match(/\\/))&&(i=[""]),{env:i,ext:a,extExe:t}}function Ko(s,e,n){typeof e=="function"&&(n=e,e={});var i=Go(s,e),a=i.env,t=i.ext,r=i.extExe,o=[];(function u(l,f){if(l===f)return e.all&&o.length?n(null,o):n(Ho(s));var p=a[l];p.charAt(0)==='"'&&p.slice(-1)==='"'&&(p=p.slice(1,-1));var c=zo.join(p,s);!p&&/^\.[\\\/]/.test(s)&&(c=s.slice(0,2)+c),function g(E,T){if(E===T)return u(l+1,f);var O=t[E];Wo(c+O,{pathExt:r},function(F,v){if(!F&&v)if(e.all)o.push(c+O);else return n(null,c+O);return g(E+1,T)})}(0,t.length)})(0,a.length)}function Qs(s,e){e=e||{};for(var n=Go(s,e),i=n.env,a=n.ext,t=n.extExe,r=[],o=0,u=i.length;o<u;o++){var l=i[o];l.charAt(0)==='"'&&l.slice(-1)==='"'&&(l=l.slice(1,-1));var f=zo.join(l,s);!l&&/^\.[\\\/]/.test(s)&&(f=s.slice(0,2)+f);for(var p=0,c=a.length;p<c;p++){var g=f+a[p],E;try{if(E=Wo.sync(g,{pathExt:t}),E)if(e.all)r.push(g);else return g}catch{}}}if(e.all&&r.length)return r;if(e.nothrow)return null;throw Ho(s)}dt.exec;var Zs=$e.platform().match(/win(32|64)/),ea=Ys,zn=/\r\n|\r|\n/g,We=/^\[?(.*?)\]?$/,Wn=/[,]/,et={};function ta(s){var e={};s=s.replace(/=\s+/g,"=").trim();for(var n=s.split(" "),i=0;i<n.length;i++){var a=n[i].split("=",2),t=a[0],r=a[1];if(typeof r>"u")return null;e[t]=r}return e}var Hn=Vo.exports={isWindows:Zs,streamRegexp:We,copy:function(s,e){Object.keys(s).forEach(function(n){e[n]=s[n]})},args:function(){var s=[],e=function(){arguments.length===1&&Array.isArray(arguments[0])?s=s.concat(arguments[0]):s=s.concat([].slice.call(arguments))};return e.clear=function(){s=[]},e.get=function(){return s},e.find=function(n,i){var a=s.indexOf(n);if(a!==-1)return s.slice(a+1,a+1+(i||0))},e.remove=function(n,i){var a=s.indexOf(n);a!==-1&&s.splice(a,(i||0)+1)},e.clone=function(){var n=Hn.args();return n(s),n},e},makeFilterStrings:function(s){return s.map(function(e){if(typeof e=="string")return e;var n="";return Array.isArray(e.inputs)?n+=e.inputs.map(function(i){return i.replace(We,"[$1]")}).join(""):typeof e.inputs=="string"&&(n+=e.inputs.replace(We,"[$1]")),n+=e.filter,e.options&&(typeof e.options=="string"||typeof e.options=="number"?n+="="+e.options:Array.isArray(e.options)?n+="="+e.options.map(function(i){return typeof i=="string"&&i.match(Wn)?"'"+i+"'":i}).join(":"):Object.keys(e.options).length&&(n+="="+Object.keys(e.options).map(function(i){var a=e.options[i];return typeof a=="string"&&a.match(Wn)&&(a="'"+a+"'"),i+"="+a}).join(":"))),Array.isArray(e.outputs)?n+=e.outputs.map(function(i){return i.replace(We,"[$1]")}).join(""):typeof e.outputs=="string"&&(n+=e.outputs.replace(We,"[$1]")),n})},which:function(s,e){if(s in et)return e(null,et[s]);ea(s,function(n,i){if(n)return e(null,et[s]="");e(null,et[s]=i)})},timemarkToSeconds:function(s){if(typeof s=="number")return s;if(s.indexOf(":")===-1&&s.indexOf(".")>=0)return Number(s);var e=s.split(":"),n=Number(e.pop());return e.length&&(n+=Number(e.pop())*60),e.length&&(n+=Number(e.pop())*3600),n},extractCodecData:function(s,e,n){var i=/Input #[0-9]+, ([^ ]+),/,a=/Duration\: ([^,]+)/,t=/Audio\: (.*)/,r=/Video\: (.*)/;"inputStack"in n||(n.inputStack=[],n.inputIndex=-1,n.inInput=!1);var o=n.inputStack,u=n.inputIndex,l=n.inInput,f,p,c,g;if(f=e.match(i))l=n.inInput=!0,u=n.inputIndex=n.inputIndex+1,o[u]={format:f[1],audio:"",video:"",duration:""};else if(l&&(p=e.match(a)))o[u].duration=p[1];else if(l&&(c=e.match(t)))c=c[1].split(", "),o[u].audio=c[0],o[u].audio_details=c;else if(l&&(g=e.match(r)))g=g[1].split(", "),o[u].video=g[0],o[u].video_details=g;else if(/Output #\d+/.test(e))l=n.inInput=!1;else if(/Stream mapping:|Press (\[q\]|ctrl-c) to stop/.test(e))return s.emit.apply(s,["codecData"].concat(o)),!0;return!1},extractProgress:function(s,e){var n=ta(e);if(n){var i={frames:parseInt(n.frame,10),currentFps:parseInt(n.fps,10),currentKbps:n.bitrate?parseFloat(n.bitrate.replace("kbits/s","")):0,targetSize:parseInt(n.size||n.Lsize,10),timemark:n.time};if(s._ffprobeData&&s._ffprobeData.format&&s._ffprobeData.format.duration){var a=Number(s._ffprobeData.format.duration);isNaN(a)||(i.percent=Hn.timemarkToSeconds(i.timemark)/a*100)}s.emit("progress",i)}},extractError:function(s){return s.split(zn).reduce(function(e,n){return n.charAt(0)===" "||n.charAt(0)==="["?[]:(e.push(n),e)},[]).join(`
`)},linesRing:function(s){var e=[],n=[],i=null,a=!1,t=s-1;function r(o){e.forEach(function(u){u(o)})}return{callback:function(o){n.forEach(function(u){o(u)}),e.push(o)},append:function(o){if(!a&&(o instanceof Buffer&&(o=""+o),!(!o||o.length===0))){var u=o.split(zn);u.length===1?i!==null?i=i+u.shift():i=u.shift():(i!==null&&(i=i+u.shift(),r(i),n.push(i)),i=u.pop(),u.forEach(function(l){r(l),n.push(l)}),t>-1&&n.length>t&&n.splice(0,n.length-t))}},get:function(){return i!==null?n.concat([i]).join(`
`):n.join(`
`)},close:function(){a||(i!==null&&(r(i),n.push(i),t>-1&&n.length>t&&n.shift(),i=null),a=!0)}}}},Fe=Vo.exports,St,Gn;function ra(){if(Gn)return St;Gn=1;var s=Fe;return St=function(e){e.mergeAdd=e.addInput=e.input=function(n){var i=!1,a=!1;if(typeof n!="string"){if(!("readable"in n)||!n.readable)throw new Error("Invalid input");var t=this._inputs.some(function(o){return o.isStream});if(t)throw new Error("Only one input stream is supported");a=!0,n.pause()}else{var r=n.match(/^([a-z]{2,}):/i);i=!r||r[0]==="file"}return this._inputs.push(this._currentInput={source:n,isFile:i,isStream:a,options:s.args()}),this},e.withInputFormat=e.inputFormat=e.fromFormat=function(n){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-f",n),this},e.withInputFps=e.withInputFPS=e.withFpsInput=e.withFPSInput=e.inputFPS=e.inputFps=e.fpsInput=e.FPSInput=function(n){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-r",n),this},e.nativeFramerate=e.withNativeFramerate=e.native=function(){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-re"),this},e.setStartTime=e.seekInput=function(n){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-ss",n),this},e.loop=function(n){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-loop","1"),typeof n<"u"&&this.duration(n),this}},St}var Pt,Kn;function na(){if(Kn)return Pt;Kn=1;var s=Fe;return Pt=function(e){e.withNoAudio=e.noAudio=function(){return this._currentOutput.audio.clear(),this._currentOutput.audioFilters.clear(),this._currentOutput.audio("-an"),this},e.withAudioCodec=e.audioCodec=function(n){return this._currentOutput.audio("-acodec",n),this},e.withAudioBitrate=e.audioBitrate=function(n){return this._currentOutput.audio("-b:a",(""+n).replace(/k?$/,"k")),this},e.withAudioChannels=e.audioChannels=function(n){return this._currentOutput.audio("-ac",n),this},e.withAudioFrequency=e.audioFrequency=function(n){return this._currentOutput.audio("-ar",n),this},e.withAudioQuality=e.audioQuality=function(n){return this._currentOutput.audio("-aq",n),this},e.withAudioFilter=e.withAudioFilters=e.audioFilter=e.audioFilters=function(n){return arguments.length>1&&(n=[].slice.call(arguments)),Array.isArray(n)||(n=[n]),this._currentOutput.audioFilters(s.makeFilterStrings(n)),this}},Pt}var Lt,Yn;function ia(){if(Yn)return Lt;Yn=1;var s=Fe;return Lt=function(e){e.withNoVideo=e.noVideo=function(){return this._currentOutput.video.clear(),this._currentOutput.videoFilters.clear(),this._currentOutput.video("-vn"),this},e.withVideoCodec=e.videoCodec=function(n){return this._currentOutput.video("-vcodec",n),this},e.withVideoBitrate=e.videoBitrate=function(n,i){return n=(""+n).replace(/k?$/,"k"),this._currentOutput.video("-b:v",n),i&&this._currentOutput.video("-maxrate",n,"-minrate",n,"-bufsize","3M"),this},e.withVideoFilter=e.withVideoFilters=e.videoFilter=e.videoFilters=function(n){return arguments.length>1&&(n=[].slice.call(arguments)),Array.isArray(n)||(n=[n]),this._currentOutput.videoFilters(s.makeFilterStrings(n)),this},e.withOutputFps=e.withOutputFPS=e.withFpsOutput=e.withFPSOutput=e.withFps=e.withFPS=e.outputFPS=e.outputFps=e.fpsOutput=e.FPSOutput=e.fps=e.FPS=function(n){return this._currentOutput.video("-r",n),this},e.takeFrames=e.withFrames=e.frames=function(n){return this._currentOutput.video("-vframes",n),this}},Lt}var Mt,Jn;function oa(){if(Jn)return Mt;Jn=1;function s(n,i,a,t){return[{filter:"scale",options:{w:"if(gt(a,"+a+"),"+n+",trunc("+i+"*a/2)*2)",h:"if(lt(a,"+a+"),"+i+",trunc("+n+"/a/2)*2)"}},{filter:"pad",options:{w:n,h:i,x:"if(gt(a,"+a+"),0,("+n+"-iw)/2)",y:"if(lt(a,"+a+"),0,("+i+"-ih)/2)",color:t}}]}function e(n,i,a){var t=n.sizeData=n.sizeData||{};if(t[i]=a,!("size"in t))return[];var r=t.size.match(/([0-9]+)x([0-9]+)/),o=t.size.match(/([0-9]+)x\?/),u=t.size.match(/\?x([0-9]+)/),l=t.size.match(/\b([0-9]{1,3})%/),f,p,c;if(l){var g=Number(l[1])/100;return[{filter:"scale",options:{w:"trunc(iw*"+g+"/2)*2",h:"trunc(ih*"+g+"/2)*2"}}]}else{if(r)return f=Math.round(Number(r[1])/2)*2,p=Math.round(Number(r[2])/2)*2,c=f/p,t.pad?s(f,p,c,t.pad):[{filter:"scale",options:{w:f,h:p}}];if(o||u)return"aspect"in t?(f=o?o[1]:Math.round(Number(u[1])*t.aspect),p=u?u[1]:Math.round(Number(o[1])/t.aspect),f=Math.round(f/2)*2,p=Math.round(p/2)*2,t.pad?s(f,p,t.aspect,t.pad):[{filter:"scale",options:{w:f,h:p}}]):o?[{filter:"scale",options:{w:Math.round(Number(o[1])/2)*2,h:"trunc(ow/a/2)*2"}}]:[{filter:"scale",options:{w:"trunc(oh*a/2)*2",h:Math.round(Number(u[1])/2)*2}}];throw new Error("Invalid size specified: "+t.size)}}return Mt=function(n){n.keepPixelAspect=n.keepDisplayAspect=n.keepDisplayAspectRatio=n.keepDAR=function(){return this.videoFilters([{filter:"scale",options:{w:"if(gt(sar,1),iw*sar,iw)",h:"if(lt(sar,1),ih/sar,ih)"}},{filter:"setsar",options:"1"}])},n.withSize=n.setSize=n.size=function(i){var a=e(this._currentOutput,"size",i);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(a),this},n.withAspect=n.withAspectRatio=n.setAspect=n.setAspectRatio=n.aspect=n.aspectRatio=function(i){var a=Number(i);if(isNaN(a)){var t=i.match(/^(\d+):(\d+)$/);if(t)a=Number(t[1])/Number(t[2]);else throw new Error("Invalid aspect ratio: "+i)}var r=e(this._currentOutput,"aspect",a);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(r),this},n.applyAutopadding=n.applyAutoPadding=n.applyAutopad=n.applyAutoPad=n.withAutopadding=n.withAutoPadding=n.withAutopad=n.withAutoPad=n.autoPad=n.autopad=function(i,a){typeof i=="string"&&(a=i,i=!0),typeof i>"u"&&(i=!0);var t=e(this._currentOutput,"pad",i?a||"black":!1);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(t),this}},Mt}var Rt,Qn;function sa(){if(Qn)return Rt;Qn=1;var s=Fe;return Rt=function(e){e.addOutput=e.output=function(n,i){var a=!1;if(!n&&this._currentOutput)throw new Error("Invalid output");if(n&&typeof n!="string"){if(!("writable"in n)||!n.writable)throw new Error("Invalid output")}else if(typeof n=="string"){var t=n.match(/^([a-z]{2,}):/i);a=!t||t[0]==="file"}if(n&&!("target"in this._currentOutput))this._currentOutput.target=n,this._currentOutput.isFile=a,this._currentOutput.pipeopts=i||{};else{if(n&&typeof n!="string"){var r=this._outputs.some(function(u){return typeof u.target!="string"});if(r)throw new Error("Only one output stream is supported")}this._outputs.push(this._currentOutput={target:n,isFile:a,flags:{},pipeopts:i||{}});var o=this;["audio","audioFilters","video","videoFilters","sizeFilters","options"].forEach(function(u){o._currentOutput[u]=s.args()}),n||delete this._currentOutput.target}return this},e.seekOutput=e.seek=function(n){return this._currentOutput.options("-ss",n),this},e.withDuration=e.setDuration=e.duration=function(n){return this._currentOutput.options("-t",n),this},e.toFormat=e.withOutputFormat=e.outputFormat=e.format=function(n){return this._currentOutput.options("-f",n),this},e.map=function(n){return this._currentOutput.options("-map",n.replace(s.streamRegexp,"[$1]")),this},e.updateFlvMetadata=e.flvmeta=function(){return this._currentOutput.flags.flvmeta=!0,this}},Rt}var qt,Zn;function aa(){if(Zn)return qt;Zn=1;var s=Fe;return qt=function(e){e.addInputOption=e.addInputOptions=e.withInputOption=e.withInputOptions=e.inputOption=e.inputOptions=function(n){if(!this._currentInput)throw new Error("No input specified");var i=!0;return arguments.length>1&&(n=[].slice.call(arguments),i=!1),Array.isArray(n)||(n=[n]),this._currentInput.options(n.reduce(function(a,t){var r=String(t).split(" ");return i&&r.length===2?a.push(r[0],r[1]):a.push(t),a},[])),this},e.addOutputOption=e.addOutputOptions=e.addOption=e.addOptions=e.withOutputOption=e.withOutputOptions=e.withOption=e.withOptions=e.outputOption=e.outputOptions=function(n){var i=!0;return arguments.length>1&&(n=[].slice.call(arguments),i=!1),Array.isArray(n)||(n=[n]),this._currentOutput.options(n.reduce(function(a,t){var r=String(t).split(" ");return i&&r.length===2?a.push(r[0],r[1]):a.push(t),a},[])),this},e.filterGraph=e.complexFilter=function(n,i){if(this._complexFilters.clear(),Array.isArray(n)||(n=[n]),this._complexFilters("-filter_complex",s.makeFilterStrings(n).join(";")),Array.isArray(i)){var a=this;i.forEach(function(t){a._complexFilters("-map",t.replace(s.streamRegexp,"[$1]"))})}else typeof i=="string"&&this._complexFilters("-map",i.replace(s.streamRegexp,"[$1]"));return this}},qt}function ua(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jt,ei;function ca(){if(ei)return jt;ei=1;var s=ie;return jt=function(e){e.usingPreset=e.preset=function(n){if(typeof n=="function")n(this);else try{var i=s.join(this.options.presets,n),a=ua(i);if(typeof a.load=="function")a.load(this);else throw new Error("preset "+i+" has no load() function")}catch(t){throw new Error("preset "+i+" could not be loaded: "+t.message)}return this}},jt}var $t={exports:{}},ti;function Dn(){return ti||(ti=1,function(s){(function(){var e={},n,i;n=this,n!=null&&(i=n.async),e.noConflict=function(){return n.async=i,e};function a(w){var A=!1;return function(){if(A)throw new Error("Callback was already called.");A=!0,w.apply(n,arguments)}}var t=function(w,A){if(w.forEach)return w.forEach(A);for(var b=0;b<w.length;b+=1)A(w[b],b,w)},r=function(w,A){if(w.map)return w.map(A);var b=[];return t(w,function(h,C,x){b.push(A(h,C,x))}),b},o=function(w,A,b){return w.reduce?w.reduce(A,b):(t(w,function(h,C,x){b=A(b,h,C,x)}),b)},u=function(w){if(Object.keys)return Object.keys(w);var A=[];for(var b in w)w.hasOwnProperty(b)&&A.push(b);return A};typeof process>"u"||!process.nextTick?typeof setImmediate=="function"?(e.nextTick=function(w){setImmediate(w)},e.setImmediate=e.nextTick):(e.nextTick=function(w){setTimeout(w,0)},e.setImmediate=e.nextTick):(e.nextTick=process.nextTick,typeof setImmediate<"u"?e.setImmediate=function(w){setImmediate(w)}:e.setImmediate=e.nextTick),e.each=function(w,A,b){if(b=b||function(){},!w.length)return b();var h=0;t(w,function(C){A(C,a(function(x){x?(b(x),b=function(){}):(h+=1,h>=w.length&&b(null))}))})},e.forEach=e.each,e.eachSeries=function(w,A,b){if(b=b||function(){},!w.length)return b();var h=0,C=function(){A(w[h],function(x){x?(b(x),b=function(){}):(h+=1,h>=w.length?b(null):C())})};C()},e.forEachSeries=e.eachSeries,e.eachLimit=function(w,A,b,h){var C=l(A);C.apply(null,[w,b,h])},e.forEachLimit=e.eachLimit;var l=function(w){return function(A,b,h){if(h=h||function(){},!A.length||w<=0)return h();var C=0,x=0,M=0;(function U(){if(C>=A.length)return h();for(;M<w&&x<A.length;)x+=1,M+=1,b(A[x-1],function(W){W?(h(W),h=function(){}):(C+=1,M-=1,C>=A.length?h():U())})})()}},f=function(w){return function(){var A=Array.prototype.slice.call(arguments);return w.apply(null,[e.each].concat(A))}},p=function(w,A){return function(){var b=Array.prototype.slice.call(arguments);return A.apply(null,[l(w)].concat(b))}},c=function(w){return function(){var A=Array.prototype.slice.call(arguments);return w.apply(null,[e.eachSeries].concat(A))}},g=function(w,A,b,h){var C=[];A=r(A,function(x,M){return{index:M,value:x}}),w(A,function(x,M){b(x.value,function(U,W){C[x.index]=W,M(U)})},function(x){h(x,C)})};e.map=f(g),e.mapSeries=c(g),e.mapLimit=function(w,A,b,h){return E(A)(w,b,h)};var E=function(w){return p(w,g)};e.reduce=function(w,A,b,h){e.eachSeries(w,function(C,x){b(A,C,function(M,U){A=U,x(M)})},function(C){h(C,A)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(w,A,b,h){var C=r(w,function(x){return x}).reverse();e.reduce(C,A,b,h)},e.foldr=e.reduceRight;var T=function(w,A,b,h){var C=[];A=r(A,function(x,M){return{index:M,value:x}}),w(A,function(x,M){b(x.value,function(U){U&&C.push(x),M()})},function(x){h(r(C.sort(function(M,U){return M.index-U.index}),function(M){return M.value}))})};e.filter=f(T),e.filterSeries=c(T),e.select=e.filter,e.selectSeries=e.filterSeries;var O=function(w,A,b,h){var C=[];A=r(A,function(x,M){return{index:M,value:x}}),w(A,function(x,M){b(x.value,function(U){U||C.push(x),M()})},function(x){h(r(C.sort(function(M,U){return M.index-U.index}),function(M){return M.value}))})};e.reject=f(O),e.rejectSeries=c(O);var F=function(w,A,b,h){w(A,function(C,x){b(C,function(M){M?(h(C),h=function(){}):x()})},function(C){h()})};e.detect=f(F),e.detectSeries=c(F),e.some=function(w,A,b){e.each(w,function(h,C){A(h,function(x){x&&(b(!0),b=function(){}),C()})},function(h){b(!1)})},e.any=e.some,e.every=function(w,A,b){e.each(w,function(h,C){A(h,function(x){x||(b(!1),b=function(){}),C()})},function(h){b(!0)})},e.all=e.every,e.sortBy=function(w,A,b){e.map(w,function(h,C){A(h,function(x,M){x?C(x):C(null,{value:h,criteria:M})})},function(h,C){if(h)return b(h);var x=function(M,U){var W=M.criteria,H=U.criteria;return W<H?-1:W>H?1:0};b(null,r(C.sort(x),function(M){return M.value}))})},e.auto=function(w,A){A=A||function(){};var b=u(w);if(!b.length)return A(null);var h={},C=[],x=function(W){C.unshift(W)},M=function(W){for(var H=0;H<C.length;H+=1)if(C[H]===W){C.splice(H,1);return}},U=function(){t(C.slice(0),function(W){W()})};x(function(){u(h).length===b.length&&(A(null,h),A=function(){})}),t(b,function(W){var H=w[W]instanceof Function?[w[W]]:w[W],J=function(le){var ue=Array.prototype.slice.call(arguments,1);if(ue.length<=1&&(ue=ue[0]),le){var we={};t(u(h),function(Pe){we[Pe]=h[Pe]}),we[W]=ue,A(le,we),A=function(){}}else h[W]=ue,e.setImmediate(U)},Y=H.slice(0,Math.abs(H.length-1))||[],be=function(){return o(Y,function(le,ue){return le&&h.hasOwnProperty(ue)},!0)&&!h.hasOwnProperty(W)};if(be())H[H.length-1](J,h);else{var Oe=function(){be()&&(M(Oe),H[H.length-1](J,h))};x(Oe)}})},e.waterfall=function(w,A){if(A=A||function(){},w.constructor!==Array){var b=new Error("First argument to waterfall must be an array of functions");return A(b)}if(!w.length)return A();var h=function(C){return function(x){if(x)A.apply(null,arguments),A=function(){};else{var M=Array.prototype.slice.call(arguments,1),U=C.next();U?M.push(h(U)):M.push(A),e.setImmediate(function(){C.apply(null,M)})}}};h(e.iterator(w))()};var v=function(w,A,b){if(b=b||function(){},A.constructor===Array)w.map(A,function(C,x){C&&C(function(M){var U=Array.prototype.slice.call(arguments,1);U.length<=1&&(U=U[0]),x.call(null,M,U)})},b);else{var h={};w.each(u(A),function(C,x){A[C](function(M){var U=Array.prototype.slice.call(arguments,1);U.length<=1&&(U=U[0]),h[C]=U,x(M)})},function(C){b(C,h)})}};e.parallel=function(w,A){v({map:e.map,each:e.each},w,A)},e.parallelLimit=function(w,A,b){v({map:E(A),each:l(A)},w,b)},e.series=function(w,A){if(A=A||function(){},w.constructor===Array)e.mapSeries(w,function(h,C){h&&h(function(x){var M=Array.prototype.slice.call(arguments,1);M.length<=1&&(M=M[0]),C.call(null,x,M)})},A);else{var b={};e.eachSeries(u(w),function(h,C){w[h](function(x){var M=Array.prototype.slice.call(arguments,1);M.length<=1&&(M=M[0]),b[h]=M,C(x)})},function(h){A(h,b)})}},e.iterator=function(w){var A=function(b){var h=function(){return w.length&&w[b].apply(null,arguments),h.next()};return h.next=function(){return b<w.length-1?A(b+1):null},h};return A(0)},e.apply=function(w){var A=Array.prototype.slice.call(arguments,1);return function(){return w.apply(null,A.concat(Array.prototype.slice.call(arguments)))}};var m=function(w,A,b,h){var C=[];w(A,function(x,M){b(x,function(U,W){C=C.concat(W||[]),M(U)})},function(x){h(x,C)})};e.concat=f(m),e.concatSeries=c(m),e.whilst=function(w,A,b){w()?A(function(h){if(h)return b(h);e.whilst(w,A,b)}):b()},e.doWhilst=function(w,A,b){w(function(h){if(h)return b(h);A()?e.doWhilst(w,A,b):b()})},e.until=function(w,A,b){w()?b():A(function(h){if(h)return b(h);e.until(w,A,b)})},e.doUntil=function(w,A,b){w(function(h){if(h)return b(h);A()?b():e.doUntil(w,A,b)})},e.queue=function(w,A){A===void 0&&(A=1);function b(x,M,U,W){M.constructor!==Array&&(M=[M]),t(M,function(H){var J={data:H,callback:typeof W=="function"?W:null};U?x.tasks.unshift(J):x.tasks.push(J),x.saturated&&x.tasks.length===A&&x.saturated(),e.setImmediate(x.process)})}var h=0,C={tasks:[],concurrency:A,saturated:null,empty:null,drain:null,push:function(x,M){b(C,x,!1,M)},unshift:function(x,M){b(C,x,!0,M)},process:function(){if(h<C.concurrency&&C.tasks.length){var x=C.tasks.shift();C.empty&&C.tasks.length===0&&C.empty(),h+=1;var M=function(){h-=1,x.callback&&x.callback.apply(x,arguments),C.drain&&C.tasks.length+h===0&&C.drain(),C.process()},U=a(M);w(x.data,U)}},length:function(){return C.tasks.length},running:function(){return h}};return C},e.cargo=function(w,A){var b=!1,h=[],C={tasks:h,payload:A,saturated:null,empty:null,drain:null,push:function(x,M){x.constructor!==Array&&(x=[x]),t(x,function(U){h.push({data:U,callback:typeof M=="function"?M:null}),C.saturated&&h.length===A&&C.saturated()}),e.setImmediate(C.process)},process:function x(){if(!b){if(h.length===0){C.drain&&C.drain();return}var M=typeof A=="number"?h.splice(0,A):h.splice(0),U=r(M,function(W){return W.data});C.empty&&C.empty(),b=!0,w(U,function(){b=!1;var W=arguments;t(M,function(H){H.callback&&H.callback.apply(null,W)}),x()})}},length:function(){return h.length},running:function(){return b}};return C};var D=function(w){return function(A){var b=Array.prototype.slice.call(arguments,1);A.apply(null,b.concat([function(h){var C=Array.prototype.slice.call(arguments,1);typeof console<"u"&&(h?console.error&&console.error(h):console[w]&&t(C,function(x){console[w](x)}))}]))}};e.log=D("log"),e.dir=D("dir"),e.memoize=function(w,A){var b={},h={};A=A||function(x){return x};var C=function(){var x=Array.prototype.slice.call(arguments),M=x.pop(),U=A.apply(null,x);U in b?M.apply(null,b[U]):U in h?h[U].push(M):(h[U]=[M],w.apply(null,x.concat([function(){b[U]=arguments;var W=h[U];delete h[U];for(var H=0,J=W.length;H<J;H++)W[H].apply(null,arguments)}])))};return C.memo=b,C.unmemoized=w,C},e.unmemoize=function(w){return function(){return(w.unmemoized||w).apply(null,arguments)}},e.times=function(w,A,b){for(var h=[],C=0;C<w;C++)h.push(C);return e.map(h,A,b)},e.timesSeries=function(w,A,b){for(var h=[],C=0;C<w;C++)h.push(C);return e.mapSeries(h,A,b)},e.compose=function(){var w=Array.prototype.reverse.call(arguments);return function(){var A=this,b=Array.prototype.slice.call(arguments),h=b.pop();e.reduce(w,b,function(C,x,M){x.apply(A,C.concat([function(){var U=arguments[0],W=Array.prototype.slice.call(arguments,1);M(U,W)}]))},function(C,x){h.apply(A,[C].concat(x))})}};var N=function(w,A){var b=function(){var C=this,x=Array.prototype.slice.call(arguments),M=x.pop();return w(A,function(U,W){U.apply(C,x.concat([W]))},M)};if(arguments.length>2){var h=Array.prototype.slice.call(arguments,2);return b.apply(this,h)}else return b};e.applyEach=f(N),e.applyEachSeries=c(N),e.forever=function(w,A){function b(h){if(h){if(A)return A(h);throw h}w(b)}b()},s.exports?s.exports=e:n.async=e})()}($t)),$t.exports}var kt,ri;function fa(){if(ri)return kt;ri=1;var s=dt.spawn,e=Dn(),n=Fe;function i(a){a._inputs[0].isStream||a.ffprobe(0,function(r,o){a._ffprobeData=o})}return kt=function(a){a._spawnFfmpeg=function(t,r,o,u){typeof r=="function"&&(u=o,o=r,r={}),typeof u>"u"&&(u=o,o=function(){});var l="stdoutLines"in r?r.stdoutLines:this.options.stdoutLines;this._getFfmpegPath(function(f,p){if(f)return u(f);if(!p||p.length===0)return u(new Error("Cannot find ffmpeg"));r.niceness&&r.niceness!==0&&!n.isWindows&&(t.unshift("-n",r.niceness,p),p="nice");var c=n.linesRing(l),g=!1,E=n.linesRing(l),T=!1,O=s(p,t,r);O.stderr&&O.stderr.setEncoding("utf8"),O.on("error",function(D){u(D)});var F=null;function v(D){D&&(F=D),m&&(g||!r.captureStdout)&&T&&u(F,c,E)}var m=!1;O.on("exit",function(D,N){m=!0,N?v(new Error("ffmpeg was killed with signal "+N)):D?v(new Error("ffmpeg exited with code "+D)):v()}),r.captureStdout&&(O.stdout.on("data",function(D){c.append(D)}),O.stdout.on("close",function(){c.close(),g=!0,v()})),O.stderr.on("data",function(D){E.append(D)}),O.stderr.on("close",function(){E.close(),T=!0,v()}),o(O,c,E)})},a._getArguments=function(){var t=this._complexFilters.get(),r=this._outputs.some(function(o){return o.isFile});return[].concat(this._inputs.reduce(function(o,u){var l=typeof u.source=="string"?u.source:"pipe:0";return o.concat(u.options.get(),["-i",l])},[]),this._global.get(),r?["-y"]:[],t,this._outputs.reduce(function(o,u){var l=n.makeFilterStrings(u.sizeFilters.get()),f=u.audioFilters.get(),p=u.videoFilters.get().concat(l),c;return u.target?typeof u.target=="string"?c=[u.target]:c=["pipe:1"]:c=[],o.concat(u.audio.get(),f.length?["-filter:a",f.join(",")]:[],u.video.get(),p.length?["-filter:v",p.join(",")]:[],u.options.get(),c)},[]))},a._prepare=function(t,r){var o=this;e.waterfall([function(u){o._checkCapabilities(u)},function(u){if(!r)return u();o.ffprobe(0,function(l,f){l||(o._ffprobeData=f),u()})},function(u){var l=o._outputs.some(function(f){return f.flags.flvmeta&&!f.isFile&&(o.logger.warn("Updating flv metadata is only supported for files"),f.flags.flvmeta=!1),f.flags.flvmeta});l?o._getFlvtoolPath(function(f){u(f)}):u()},function(u){var l;try{l=o._getArguments()}catch(f){return u(f)}u(null,l)},function(u,l){o.availableEncoders(function(f,p){for(var c=0;c<u.length;c++)(u[c]==="-acodec"||u[c]==="-vcodec")&&(c++,u[c]in p&&p[u[c]].experimental&&(u.splice(c+1,0,"-strict","experimental"),c+=2));l(null,u)})}],t),r||(this.listeners("progress").length>0?i(this):this.once("newListener",function(u){u==="progress"&&i(this)}))},a.exec=a.execute=a.run=function(){var t=this,r=this._outputs.some(function(p){return"target"in p});if(!r)throw new Error("No output specified");var o=this._outputs.filter(function(p){return typeof p.target!="string"})[0],u=this._inputs.filter(function(p){return typeof p.source!="string"})[0],l=!1;function f(p,c,g){l||(l=!0,p?t.emit("error",p,c,g):t.emit("end",c,g))}return t._prepare(function(p,c){if(p)return f(p);t._spawnFfmpeg(c,{captureStdout:!o,niceness:t.options.niceness,cwd:t.options.cwd,windowsHide:!0},function(E,T,O){if(t.ffmpegProc=E,t.emit("start","ffmpeg "+c.join(" ")),u&&(u.source.on("error",function(m){var D=new Error("Input stream error: "+m.message);D.inputStreamError=m,f(D),E.kill()}),u.source.resume(),u.source.pipe(E.stdin),E.stdin.on("error",function(){})),t.options.timeout&&(t.processTimer=setTimeout(function(){var m="process ran into a timeout ("+t.options.timeout+"s)";f(new Error(m),T.get(),O.get()),E.kill()},t.options.timeout*1e3)),o&&(E.stdout.pipe(o.target,o.pipeopts),o.target.on("close",function(){t.logger.debug("Output stream closed, scheduling kill for ffmpeg process"),setTimeout(function(){f(new Error("Output stream closed")),E.kill()},20)}),o.target.on("error",function(m){t.logger.debug("Output stream error, killing ffmpeg process");var D=new Error("Output stream error: "+m.message);D.outputStreamError=m,f(D,T.get(),O.get()),E.kill("SIGKILL")})),O){if(t.listeners("stderr").length&&O.callback(function(m){t.emit("stderr",m)}),t.listeners("codecData").length){var F=!1,v={};O.callback(function(m){F||(F=n.extractCodecData(t,m,v))})}t.listeners("progress").length&&O.callback(function(m){n.extractProgress(t,m)})}},function(E,T,O){if(clearTimeout(t.processTimer),delete t.ffmpegProc,E)E.message.match(/ffmpeg exited with code/)&&(E.message+=": "+n.extractError(O.get())),f(E,T.get(),O.get());else{var F=t._outputs.filter(function(v){return v.flags.flvmeta});F.length?t._getFlvtoolPath(function(v,m){if(v)return f(v);e.each(F,function(D,N){s(m,["-U",D.target],{windowsHide:!0}).on("error",function(w){N(new Error("Error running "+m+" on "+D.target+": "+w.message))}).on("exit",function(w,A){w!==0||A?N(new Error(m+" "+(A?"received signal "+A:"exited with code "+w))+" when running on "+D.target):N()})},function(D){D?f(D):f(null,T.get(),O.get())})}):f(null,T.get(),O.get())}})}),this},a.renice=function(t){if(!n.isWindows&&(t=t||0,(t<-20||t>20)&&this.logger.warn("Invalid niceness value: "+t+", must be between -20 and 20"),t=Math.min(20,Math.max(-20,t)),this.options.niceness=t,this.ffmpegProc)){var r=this.logger,o=this.ffmpegProc.pid,u=s("renice",[t,"-p",o],{windowsHide:!0});u.on("error",function(l){r.warn("could not renice process "+o+": "+l.message)}),u.on("exit",function(l,f){f?r.warn("could not renice process "+o+": renice was killed by signal "+f):l?r.warn("could not renice process "+o+": renice exited with "+l):r.info("successfully reniced process "+o+" to "+t+" niceness")})}return this},a.kill=function(t){return this.ffmpegProc?this.ffmpegProc.kill(t||"SIGKILL"):this.logger.warn("No running ffmpeg process, cannot send signal"),this}},kt}var Bt,ni;function la(){if(ni)return Bt;ni=1;var s=Te,e=ie,n=Dn(),i=Fe,a=/^\s*([D ])([E ])([VAS])([S ])([D ])([T ]) ([^ ]+) +(.*)$/,t=/^\s*([D\.])([E\.])([VAS])([I\.])([L\.])([S\.]) ([^ ]+) +(.*)$/,r=/\(encoders:([^\)]+)\)/,o=/\(decoders:([^\)]+)\)/,u=/^\s*([VAS\.])([F\.])([S\.])([X\.])([B\.])([D\.]) ([^ ]+) +(.*)$/,l=/^\s*([D ])([E ])\s+([^ ]+)\s+(.*)$/,f=/\r\n|\r|\n/,p=/^(?: [T\.][S\.][C\.] )?([^ ]+) +(AA?|VV?|\|)->(AA?|VV?|\|) +(.*)$/,c={};return Bt=function(g){g.setFfmpegPath=function(E){return c.ffmpegPath=E,this},g.setFfprobePath=function(E){return c.ffprobePath=E,this},g.setFlvtoolPath=function(E){return c.flvtoolPath=E,this},g._forgetPaths=function(){delete c.ffmpegPath,delete c.ffprobePath,delete c.flvtoolPath},g._getFfmpegPath=function(E){if("ffmpegPath"in c)return E(null,c.ffmpegPath);n.waterfall([function(T){process.env.FFMPEG_PATH?s.exists(process.env.FFMPEG_PATH,function(O){O?T(null,process.env.FFMPEG_PATH):T(null,"")}):T(null,"")},function(T,O){if(T.length)return O(null,T);i.which("ffmpeg",function(F,v){O(F,v)})}],function(T,O){T?E(T):E(null,c.ffmpegPath=O||"")})},g._getFfprobePath=function(E){var T=this;if("ffprobePath"in c)return E(null,c.ffprobePath);n.waterfall([function(O){process.env.FFPROBE_PATH?s.exists(process.env.FFPROBE_PATH,function(F){O(null,F?process.env.FFPROBE_PATH:"")}):O(null,"")},function(O,F){if(O.length)return F(null,O);i.which("ffprobe",function(v,m){F(v,m)})},function(O,F){if(O.length)return F(null,O);T._getFfmpegPath(function(v,m){if(v)F(v);else if(m.length){var D=i.isWindows?"ffprobe.exe":"ffprobe",N=e.join(e.dirname(m),D);s.exists(N,function(w){F(null,w?N:"")})}else F(null,"")})}],function(O,F){O?E(O):E(null,c.ffprobePath=F||"")})},g._getFlvtoolPath=function(E){if("flvtoolPath"in c)return E(null,c.flvtoolPath);n.waterfall([function(T){process.env.FLVMETA_PATH?s.exists(process.env.FLVMETA_PATH,function(O){T(null,O?process.env.FLVMETA_PATH:"")}):T(null,"")},function(T,O){if(T.length)return O(null,T);process.env.FLVTOOL2_PATH?s.exists(process.env.FLVTOOL2_PATH,function(F){O(null,F?process.env.FLVTOOL2_PATH:"")}):O(null,"")},function(T,O){if(T.length)return O(null,T);i.which("flvmeta",function(F,v){O(F,v)})},function(T,O){if(T.length)return O(null,T);i.which("flvtool2",function(F,v){O(F,v)})}],function(T,O){T?E(T):E(null,c.flvtoolPath=O||"")})},g.availableFilters=g.getAvailableFilters=function(E){if("filters"in c)return E(null,c.filters);this._spawnFfmpeg(["-filters"],{captureStdout:!0,stdoutLines:0},function(T,O){if(T)return E(T);var F=O.get(),v=F.split(`
`),m={},D={A:"audio",V:"video","|":"none"};v.forEach(function(N){var w=N.match(p);w&&(m[w[1]]={description:w[4],input:D[w[2].charAt(0)],multipleInputs:w[2].length>1,output:D[w[3].charAt(0)],multipleOutputs:w[3].length>1})}),E(null,c.filters=m)})},g.availableCodecs=g.getAvailableCodecs=function(E){if("codecs"in c)return E(null,c.codecs);this._spawnFfmpeg(["-codecs"],{captureStdout:!0,stdoutLines:0},function(T,O){if(T)return E(T);var F=O.get(),v=F.split(f),m={};v.forEach(function(D){var N=D.match(a);if(N&&N[7]!=="="&&(m[N[7]]={type:{V:"video",A:"audio",S:"subtitle"}[N[3]],description:N[8],canDecode:N[1]==="D",canEncode:N[2]==="E",drawHorizBand:N[4]==="S",directRendering:N[5]==="D",weirdFrameTruncation:N[6]==="T"}),N=D.match(t),N&&N[7]!=="="){var w=m[N[7]]={type:{V:"video",A:"audio",S:"subtitle"}[N[3]],description:N[8],canDecode:N[1]==="D",canEncode:N[2]==="E",intraFrameOnly:N[4]==="I",isLossy:N[5]==="L",isLossless:N[6]==="S"},A=w.description.match(r);A=A?A[1].trim().split(" "):[];var b=w.description.match(o);if(b=b?b[1].trim().split(" "):[],A.length||b.length){var h={};i.copy(w,h),delete h.canEncode,delete h.canDecode,A.forEach(function(C){m[C]={},i.copy(h,m[C]),m[C].canEncode=!0}),b.forEach(function(C){C in m||(m[C]={},i.copy(h,m[C])),m[C].canDecode=!0})}}}),E(null,c.codecs=m)})},g.availableEncoders=g.getAvailableEncoders=function(E){if("encoders"in c)return E(null,c.encoders);this._spawnFfmpeg(["-encoders"],{captureStdout:!0,stdoutLines:0},function(T,O){if(T)return E(T);var F=O.get(),v=F.split(f),m={};v.forEach(function(D){var N=D.match(u);N&&N[7]!=="="&&(m[N[7]]={type:{V:"video",A:"audio",S:"subtitle"}[N[1]],description:N[8],frameMT:N[2]==="F",sliceMT:N[3]==="S",experimental:N[4]==="X",drawHorizBand:N[5]==="B",directRendering:N[6]==="D"})}),E(null,c.encoders=m)})},g.availableFormats=g.getAvailableFormats=function(E){if("formats"in c)return E(null,c.formats);this._spawnFfmpeg(["-formats"],{captureStdout:!0,stdoutLines:0},function(T,O){if(T)return E(T);var F=O.get(),v=F.split(f),m={};v.forEach(function(D){var N=D.match(l);N&&N[3].split(",").forEach(function(w){w in m||(m[w]={description:N[4],canDemux:!1,canMux:!1}),N[1]==="D"&&(m[w].canDemux=!0),N[2]==="E"&&(m[w].canMux=!0)})}),E(null,c.formats=m)})},g._checkCapabilities=function(E){var T=this;n.waterfall([function(O){T.availableFormats(O)},function(O,F){var v;if(v=T._outputs.reduce(function(m,D){var N=D.options.find("-f",1);return N&&(!(N[0]in O)||!O[N[0]].canMux)&&m.push(N),m},[]),v.length===1)return F(new Error("Output format "+v[0]+" is not available"));if(v.length>1)return F(new Error("Output formats "+v.join(", ")+" are not available"));if(v=T._inputs.reduce(function(m,D){var N=D.options.find("-f",1);return N&&(!(N[0]in O)||!O[N[0]].canDemux)&&m.push(N[0]),m},[]),v.length===1)return F(new Error("Input format "+v[0]+" is not available"));if(v.length>1)return F(new Error("Input formats "+v.join(", ")+" are not available"));F()},function(O){T.availableEncoders(O)},function(O,F){var v;if(v=T._outputs.reduce(function(m,D){var N=D.audio.find("-acodec",1);return N&&N[0]!=="copy"&&(!(N[0]in O)||O[N[0]].type!=="audio")&&m.push(N[0]),m},[]),v.length===1)return F(new Error("Audio codec "+v[0]+" is not available"));if(v.length>1)return F(new Error("Audio codecs "+v.join(", ")+" are not available"));if(v=T._outputs.reduce(function(m,D){var N=D.video.find("-vcodec",1);return N&&N[0]!=="copy"&&(!(N[0]in O)||O[N[0]].type!=="video")&&m.push(N[0]),m},[]),v.length===1)return F(new Error("Video codec "+v[0]+" is not available"));if(v.length>1)return F(new Error("Video codecs "+v.join(", ")+" are not available"));F()}],E)}},Bt}var Ut,ii;function ha(){if(ii)return Ut;ii=1;var s=dt.spawn;function e(a){return a.match(/^TAG:/)}function n(a){return a.match(/^DISPOSITION:/)}function i(a){var t=a.split(/\r\n|\r|\n/);t=t.filter(function(p){return p.length>0});var r={streams:[],format:{},chapters:[]};function o(p){for(var c={},g=t.shift();typeof g<"u";){if(g.toLowerCase()=="[/"+p+"]")return c;if(g.match(/^\[/)){g=t.shift();continue}var E=g.match(/^([^=]+)=(.*)$/);E&&(!E[1].match(/^TAG:/)&&E[2].match(/^[0-9]+(\.[0-9]+)?$/)?c[E[1]]=Number(E[2]):c[E[1]]=E[2]),g=t.shift()}return c}for(var u=t.shift();typeof u<"u";){if(u.match(/^\[stream/i)){var l=o("stream");r.streams.push(l)}else if(u.match(/^\[chapter/i)){var f=o("chapter");r.chapters.push(f)}else u.toLowerCase()==="[format]"&&(r.format=o("format"));u=t.shift()}return r}return Ut=function(a){a.ffprobe=function(){var t,r=null,o=[],u,u=arguments[arguments.length-1],l=!1;function f(p,c){l||(l=!0,u(p,c))}switch(arguments.length){case 3:r=arguments[0],o=arguments[1];break;case 2:typeof arguments[0]=="number"?r=arguments[0]:Array.isArray(arguments[0])&&(o=arguments[0]);break}if(r===null){if(!this._currentInput)return f(new Error("No input specified"));t=this._currentInput}else if(t=this._inputs[r],!t)return f(new Error("Invalid input index"));this._getFfprobePath(function(p,c){if(p)return f(p);if(!c)return f(new Error("Cannot find ffprobe"));var g="",E=!1,T="",O=!1,F=t.isStream?"pipe:0":t.source,v=s(c,["-show_streams","-show_format"].concat(o,F),{windowsHide:!0});t.isStream&&(v.stdin.on("error",function(w){["ECONNRESET","EPIPE","EOF"].indexOf(w.code)>=0||f(w)}),v.stdin.on("close",function(){t.source.pause(),t.source.unpipe(v.stdin)}),t.source.pipe(v.stdin)),v.on("error",u);var m=null;function D(w){if(w&&(m=w),N&&E&&O){if(m)return T&&(m.message+=`
`+T),f(m);var A=i(g);[A.format].concat(A.streams).forEach(function(b){if(b){var h=Object.keys(b).filter(e);h.length&&(b.tags=b.tags||{},h.forEach(function(x){b.tags[x.substr(4)]=b[x],delete b[x]}));var C=Object.keys(b).filter(n);C.length&&(b.disposition=b.disposition||{},C.forEach(function(x){b.disposition[x.substr(12)]=b[x],delete b[x]}))}}),f(null,A)}}var N=!1;v.on("exit",function(w,A){N=!0,w?D(new Error("ffprobe exited with code "+w)):A?D(new Error("ffprobe was killed with signal "+A)):D()}),v.stdout.on("data",function(w){g+=w}),v.stdout.on("close",function(){E=!0,D()}),v.stderr.on("data",function(w){T+=w}),v.stderr.on("close",function(){O=!0,D()})})}},Ut}var Xt,oi;function pa(){if(oi)return Xt;oi=1;var s=Te,e=ie,n=qs.PassThrough,i=Dn(),a=Fe;return Xt=function(r){r.saveToFile=r.save=function(o){return this.output(o).run(),this},r.writeToStream=r.pipe=r.stream=function(o,u){if(o&&!("writable"in o)&&(u=o,o=void 0),!o){if(process.version.match(/v0\.8\./))throw new Error("PassThrough stream is not supported on node v0.8");o=new n}return this.output(o,u).run(),o},r.takeScreenshots=r.thumbnail=r.thumbnails=r.screenshot=r.screenshots=function(o,u){var l=this,f=this._currentInput.source;if(o=o||{count:1},typeof o=="number"&&(o={count:o}),"folder"in o||(o.folder=u||"."),"timestamps"in o&&(o.timemarks=o.timestamps),!("timemarks"in o)){if(!o.count)throw new Error("Cannot take screenshots: neither a count nor a timemark list are specified");var p=100/(1+o.count);o.timemarks=[];for(var c=0;c<o.count;c++)o.timemarks.push(p*(c+1)+"%")}if("size"in o){var g=o.size.match(/^(\d+)x(\d+)$/),E=o.size.match(/^(\d+)x\?$/),T=o.size.match(/^\?x(\d+)$/),O=o.size.match(/^(\d+)%$/);if(!g&&!E&&!T&&!O)throw new Error("Invalid size parameter: "+o.size)}var F;function v(m){F?m(null,F):l.ffprobe(function(D,N){F=N,m(D,N)})}return i.waterfall([function(D){if(o.timemarks.some(function(N){return(""+N).match(/^[\d.]+%$/)})){if(typeof f!="string")return D(new Error("Cannot compute screenshot timemarks with an input stream, please specify fixed timemarks"));v(function(N,w){if(N)D(N);else{var A=w.streams.reduce(function(h,C){return C.codec_type==="video"&&C.width*C.height>h.width*h.height?C:h},{width:0,height:0});if(A.width===0)return D(new Error("No video stream in input, cannot take screenshots"));var b=Number(A.duration);if(isNaN(b)&&(b=Number(w.format.duration)),isNaN(b))return D(new Error("Could not get input duration, please specify fixed timemarks"));o.timemarks=o.timemarks.map(function(h){return(""+h).match(/^([\d.]+)%$/)?b*parseFloat(h)/100:h}),D()}})}else D()},function(D){o.timemarks=o.timemarks.map(function(N){return a.timemarkToSeconds(N)}).sort(function(N,w){return N-w}),D()},function(D){var N=o.filename||"tn.png";if(N.indexOf(".")===-1&&(N+=".png"),o.timemarks.length>1&&!N.match(/%(s|0*i)/)){var w=e.extname(N);N=e.join(e.dirname(N),e.basename(N,w)+"_%i"+w)}D(null,N)},function(D,N){if(D.match(/%[bf]/)){if(typeof f!="string")return N(new Error("Cannot replace %f or %b when using an input stream"));D=D.replace(/%f/g,e.basename(f)).replace(/%b/g,e.basename(f,e.extname(f)))}N(null,D)},function(D,N){if(D.match(/%[whr]/)){if(g)return N(null,D,g[1],g[2]);v(function(w,A){if(w)return N(new Error("Could not determine video resolution to replace %w, %h or %r"));var b=A.streams.reduce(function(x,M){return M.codec_type==="video"&&M.width*M.height>x.width*x.height?M:x},{width:0,height:0});if(b.width===0)return N(new Error("No video stream in input, cannot replace %w, %h or %r"));var h=b.width,C=b.height;E?(C=C*Number(E[1])/h,h=Number(E[1])):T?(h=h*Number(T[1])/C,C=Number(T[1])):O&&(h=h*Number(O[1])/100,C=C*Number(O[1])/100),N(null,D,Math.round(h/2)*2,Math.round(C/2)*2)})}else N(null,D,-1,-1)},function(D,N,w,A){D=D.replace(/%r/g,"%wx%h").replace(/%w/g,N).replace(/%h/g,w),A(null,D)},function(D,N){var w=o.timemarks.map(function(A,b){return D.replace(/%s/g,a.timemarkToSeconds(A)).replace(/%(0*)i/g,function(h,C){var x=""+(b+1);return C.substr(0,Math.max(0,C.length+1-x.length))+x})});l.emit("filenames",w),N(null,w)},function(D,N){s.exists(o.folder,function(w){w?N(null,D):s.mkdir(o.folder,function(A){A?N(A):N(null,D)})})}],function(D,N){if(D)return l.emit("error",D);var w=o.timemarks.length,A,b=[A={filter:"split",options:w,outputs:[]}];if("size"in o){l.size(o.size);var h=l._currentOutput.sizeFilters.get().map(function(U,W){return W>0&&(U.inputs="size"+(W-1)),U.outputs="size"+W,U});A.inputs="size"+(h.length-1),b=h.concat(b),l._currentOutput.sizeFilters.clear()}for(var C=0,x=0;x<w;x++){var M="screen"+x;A.outputs.push(M),x===0&&(C=o.timemarks[x],l.seekInput(C)),l.output(e.join(o.folder,N[x])).frames(1).map(M),x>0&&l.seek(o.timemarks[x]-C)}l.complexFilter(b),l.run()}),this},r.mergeToFile=r.concatenate=r.concat=function(o,u){var l=this._inputs.filter(function(p){return!p.isStream})[0],f=this;return this.ffprobe(this._inputs.indexOf(l),function(p,c){if(p)return f.emit("error",p);var g=c.streams.some(function(T){return T.codec_type==="audio"}),E=c.streams.some(function(T){return T.codec_type==="video"});f.output(o,u).complexFilter({filter:"concat",options:{n:f._inputs.length,v:E?1:0,a:g?1:0}}).run()}),this}},Xt}var da=ie,ma=pt,Yo=Be.EventEmitter,dn=Fe;function ee(s,e){if(!(this instanceof ee))return new ee(s,e);Yo.call(this),typeof s=="object"&&!("readable"in s)?e=s:(e=e||{},e.source=s),this._inputs=[],e.source&&this.input(e.source),this._outputs=[],this.output();var n=this;["_global","_complexFilters"].forEach(function(i){n[i]=dn.args()}),e.stdoutLines="stdoutLines"in e?e.stdoutLines:100,e.presets=e.presets||e.preset||da.join(__dirname,"presets"),e.niceness=e.niceness||e.priority||0,this.options=e,this.logger=e.logger||{debug:function(){},info:function(){},warn:function(){},error:function(){}}}ma.inherits(ee,Yo);var ga=ee;ee.prototype.clone=function(){var s=new ee,e=this;return s.options=this.options,s.logger=this.logger,s._inputs=this._inputs.map(function(n){return{source:n.source,options:n.options.clone()}}),"target"in this._outputs[0]?(s._outputs=[],s.output()):(s._outputs=[s._currentOutput={flags:{}}],["audio","audioFilters","video","videoFilters","sizeFilters","options"].forEach(function(n){s._currentOutput[n]=e._currentOutput[n].clone()}),this._currentOutput.sizeData&&(s._currentOutput.sizeData={},dn.copy(this._currentOutput.sizeData,s._currentOutput.sizeData)),dn.copy(this._currentOutput.flags,s._currentOutput.flags)),["_global","_complexFilters"].forEach(function(n){s[n]=e[n].clone()}),s};ra()(ee.prototype);na()(ee.prototype);ia()(ee.prototype);oa()(ee.prototype);sa()(ee.prototype);aa()(ee.prototype);ca()(ee.prototype);fa()(ee.prototype);la()(ee.prototype);ee.setFfmpegPath=function(s){new ee().setFfmpegPath(s)};ee.setFfprobePath=function(s){new ee().setFfprobePath(s)};ee.setFlvtoolPath=function(s){new ee().setFlvtoolPath(s)};ee.availableFilters=ee.getAvailableFilters=function(s){new ee().availableFilters(s)};ee.availableCodecs=ee.getAvailableCodecs=function(s){new ee().availableCodecs(s)};ee.availableFormats=ee.getAvailableFormats=function(s){new ee().availableFormats(s)};ee.availableEncoders=ee.getAvailableEncoders=function(s){new ee().availableEncoders(s)};ha()(ee.prototype);ee.ffprobe=function(s){var e=new ee(s);e.ffprobe.apply(e,Array.prototype.slice.call(arguments,1))};pa()(ee.prototype);var Jo=ga;const mn=yt(Jo);var ft={exports:{}},Vt={exports:{}},si;function Qo(){return si||(si=1,function(s){let e={};try{e=require("electron")}catch{}e.ipcRenderer&&n(e),s.exports=n;function n({contextBridge:i,ipcRenderer:a}){if(!a)return;a.on("__ELECTRON_LOG_IPC__",(r,o)=>{window.postMessage({cmd:"message",...o})}),a.invoke("__ELECTRON_LOG__",{cmd:"getOptions"}).catch(r=>console.error(new Error(`electron-log isn't initialized in the main process. Please call log.initialize() before. ${r.message}`)));const t={sendToMain(r){try{a.send("__ELECTRON_LOG__",r)}catch(o){console.error("electronLog.sendToMain ",o,"data:",r),a.send("__ELECTRON_LOG__",{cmd:"errorHandler",error:{message:o==null?void 0:o.message,stack:o==null?void 0:o.stack},errorName:"sendToMain"})}},log(...r){t.sendToMain({data:r,level:"info"})}};for(const r of["error","warn","info","verbose","debug","silly"])t[r]=(...o)=>t.sendToMain({data:o,level:r});if(i&&process.contextIsolated)try{i.exposeInMainWorld("__electronLog",t)}catch{}typeof window=="object"?window.__electronLog=t:__electronLog=t}}(Vt)),Vt.exports}var zt={exports:{}},Wt,ai;function ya(){if(ai)return Wt;ai=1,Wt=s;function s(e){return Object.defineProperties(n,{defaultLabel:{value:"",writable:!0},labelPadding:{value:!0,writable:!0},maxLabelLength:{value:0,writable:!0},labelLength:{get(){switch(typeof n.labelPadding){case"boolean":return n.labelPadding?n.maxLabelLength:0;case"number":return n.labelPadding;default:return 0}}}});function n(i){n.maxLabelLength=Math.max(n.maxLabelLength,i.length);const a={};for(const t of e.levels)a[t]=(...r)=>e.logData(r,{level:t,scope:i});return a.log=a.info,a}}return Wt}var Ht,ui;function va(){if(ui)return Ht;ui=1;class s{constructor({processMessage:n}){this.processMessage=n,this.buffer=[],this.enabled=!1,this.begin=this.begin.bind(this),this.commit=this.commit.bind(this),this.reject=this.reject.bind(this)}addMessage(n){this.buffer.push(n)}begin(){this.enabled=[]}commit(){this.enabled=!1,this.buffer.forEach(n=>this.processMessage(n)),this.buffer=[]}reject(){this.enabled=!1,this.buffer=[]}}return Ht=s,Ht}var Gt,ci;function Zo(){if(ci)return Gt;ci=1;const s=ya(),e=va(),i=class i{constructor({allowUnknownLevel:t=!1,dependencies:r={},errorHandler:o,eventLogger:u,initializeFn:l,isDev:f=!1,levels:p=["error","warn","info","verbose","debug","silly"],logId:c,transportFactories:g={},variables:E}={}){Q(this,"dependencies",{});Q(this,"errorHandler",null);Q(this,"eventLogger",null);Q(this,"functions",{});Q(this,"hooks",[]);Q(this,"isDev",!1);Q(this,"levels",null);Q(this,"logId",null);Q(this,"scope",null);Q(this,"transports",{});Q(this,"variables",{});this.addLevel=this.addLevel.bind(this),this.create=this.create.bind(this),this.initialize=this.initialize.bind(this),this.logData=this.logData.bind(this),this.processMessage=this.processMessage.bind(this),this.allowUnknownLevel=t,this.buffering=new e(this),this.dependencies=r,this.initializeFn=l,this.isDev=f,this.levels=p,this.logId=c,this.scope=s(this),this.transportFactories=g,this.variables=E||{};for(const T of this.levels)this.addLevel(T,!1);this.log=this.info,this.functions.log=this.log,this.errorHandler=o,o==null||o.setOptions({...r,logFn:this.error}),this.eventLogger=u,u==null||u.setOptions({...r,logger:this});for(const[T,O]of Object.entries(g))this.transports[T]=O(this,r);i.instances[c]=this}static getInstance({logId:t}){return this.instances[t]||this.instances.default}addLevel(t,r=this.levels.length){r!==!1&&this.levels.splice(r,0,t),this[t]=(...o)=>this.logData(o,{level:t}),this.functions[t]=this[t]}catchErrors(t){return this.processMessage({data:["log.catchErrors is deprecated. Use log.errorHandler instead"],level:"warn"},{transports:["console"]}),this.errorHandler.startCatching(t)}create(t){return typeof t=="string"&&(t={logId:t}),new i({dependencies:this.dependencies,errorHandler:this.errorHandler,initializeFn:this.initializeFn,isDev:this.isDev,transportFactories:this.transportFactories,variables:{...this.variables},...t})}compareLevels(t,r,o=this.levels){const u=o.indexOf(t),l=o.indexOf(r);return l===-1||u===-1?!0:l<=u}initialize(t={}){this.initializeFn({logger:this,...this.dependencies,...t})}logData(t,r={}){this.buffering.enabled?this.buffering.addMessage({data:t,date:new Date,...r}):this.processMessage({data:t,...r})}processMessage(t,{transports:r=this.transports}={}){if(t.cmd==="errorHandler"){this.errorHandler.handle(t.error,{errorName:t.errorName,processType:"renderer",showDialog:!!t.showDialog});return}let o=t.level;this.allowUnknownLevel||(o=this.levels.includes(t.level)?t.level:"info");const u={date:new Date,logId:this.logId,...t,level:o,variables:{...this.variables,...t.variables}};for(const[l,f]of this.transportEntries(r))if(!(typeof f!="function"||f.level===!1)&&this.compareLevels(f.level,t.level))try{const p=this.hooks.reduce((c,g)=>c&&g(c,f,l),u);p&&f({...p,data:[...p.data]})}catch(p){this.processInternalErrorFn(p)}}processInternalErrorFn(t){}transportEntries(t=this.transports){return(Array.isArray(t)?t:Object.entries(t)).map(o=>{switch(typeof o){case"string":return this.transports[o]?[o,this.transports[o]]:null;case"function":return[o.name,o];default:return Array.isArray(o)?o:null}}).filter(Boolean)}};Q(i,"instances",{});let n=i;return Gt=n,Gt}var Kt,fi;function wa(){if(fi)return Kt;fi=1;const s=console.error;class e{constructor({logFn:i=null}={}){Q(this,"logFn",null);Q(this,"onError",null);Q(this,"showDialog",!1);Q(this,"preventDefault",!0);this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.startCatching=this.startCatching.bind(this),this.logFn=i}handle(i,{logFn:a=this.logFn,errorName:t="",onError:r=this.onError,showDialog:o=this.showDialog}={}){try{(r==null?void 0:r({error:i,errorName:t,processType:"renderer"}))!==!1&&a({error:i,errorName:t,showDialog:o})}catch{s(i)}}setOptions({logFn:i,onError:a,preventDefault:t,showDialog:r}){typeof i=="function"&&(this.logFn=i),typeof a=="function"&&(this.onError=a),typeof t=="boolean"&&(this.preventDefault=t),typeof r=="boolean"&&(this.showDialog=r)}startCatching({onError:i,showDialog:a}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:i,showDialog:a}),window.addEventListener("error",t=>{var r;this.preventDefault&&((r=t.preventDefault)==null||r.call(t)),this.handleError(t.error||t)}),window.addEventListener("unhandledrejection",t=>{var r;this.preventDefault&&((r=t.preventDefault)==null||r.call(t)),this.handleRejection(t.reason||t)}))}handleError(i){this.handle(i,{errorName:"Unhandled"})}handleRejection(i){const a=i instanceof Error?i:new Error(JSON.stringify(i));this.handle(a,{errorName:"Unhandled rejection"})}}return Kt=e,Kt}var Yt,li;function Ue(){if(li)return Yt;li=1,Yt={transform:s};function s({logger:e,message:n,transport:i,initialData:a=(n==null?void 0:n.data)||[],transforms:t=i==null?void 0:i.transforms}){return t.reduce((r,o)=>typeof o=="function"?o({data:r,logger:e,message:n,transport:i}):r,a)}return Yt}var Jt,hi;function Ea(){if(hi)return Jt;hi=1;const{transform:s}=Ue();Jt=n;const e={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};function n(a){return Object.assign(t,{format:"{h}:{i}:{s}.{ms}{scope} › {text}",transforms:[i],writeFn({message:{level:r,data:o}}){const u=e[r]||e.info;setTimeout(()=>u(...o))}});function t(r){t.writeFn({message:{...r,data:s({logger:a,message:r,transport:t})}})}}function i({data:a=[],logger:t={},message:r={},transport:o={}}){if(typeof o.format=="function")return o.format({data:a,level:(r==null?void 0:r.level)||"info",logger:t,message:r,transport:o});if(typeof o.format!="string")return a;a.unshift(o.format),typeof a[1]=="string"&&a[1].match(/%[1cdfiOos]/)&&(a=[`${a[0]} ${a[1]}`,...a.slice(2)]);const u=r.date||new Date;return a[0]=a[0].replace(/\{(\w+)}/g,(l,f)=>{var p,c;switch(f){case"level":return r.level;case"logId":return r.logId;case"scope":{const g=r.scope||((p=t.scope)==null?void 0:p.defaultLabel);return g?` (${g})`:""}case"text":return"";case"y":return u.getFullYear().toString(10);case"m":return(u.getMonth()+1).toString(10).padStart(2,"0");case"d":return u.getDate().toString(10).padStart(2,"0");case"h":return u.getHours().toString(10).padStart(2,"0");case"i":return u.getMinutes().toString(10).padStart(2,"0");case"s":return u.getSeconds().toString(10).padStart(2,"0");case"ms":return u.getMilliseconds().toString(10).padStart(3,"0");case"iso":return u.toISOString();default:return((c=r.variables)==null?void 0:c[f])||l}}).trim(),a}return Jt}var Qt,pi;function Ta(){if(pi)return Qt;pi=1;const{transform:s}=Ue();Qt=n;const e=new Set([Promise,WeakMap,WeakSet]);function n(t){return Object.assign(r,{depth:5,transforms:[a]});function r(o){if(!window.__electronLog){t.processMessage({data:["electron-log: logger isn't initialized in the main process"],level:"error"},{transports:["console"]});return}try{const u=s({initialData:o,logger:t,message:o,transport:r});__electronLog.sendToMain(u)}catch(u){t.transports.console({data:["electronLog.transports.ipc",u,"data:",o.data],level:"error"})}}}function i(t){return Object(t)!==t}function a({data:t,depth:r,seen:o=new WeakSet,transport:u={}}={}){const l=r||u.depth||5;return o.has(t)?"[Circular]":l<1?i(t)?t:Array.isArray(t)?"[Array]":`[${typeof t}]`:["function","symbol"].includes(typeof t)?t.toString():i(t)?t:e.has(t.constructor)?`[${t.constructor.name}]`:Array.isArray(t)?t.map(f=>a({data:f,depth:l-1,seen:o})):t instanceof Date?t.toISOString():t instanceof Error?t.stack:t instanceof Map?new Map(Array.from(t).map(([f,p])=>[a({data:f,depth:l-1,seen:o}),a({data:p,depth:l-1,seen:o})])):t instanceof Set?new Set(Array.from(t).map(f=>a({data:f,depth:l-1,seen:o}))):(o.add(t),Object.fromEntries(Object.entries(t).map(([f,p])=>[f,a({data:p,depth:l-1,seen:o})])))}return Qt}var di;function ba(){return di||(di=1,function(s){const e=Zo(),n=wa(),i=Ea(),a=Ta();s.exports=t(),s.exports.Logger=e,s.exports.default=s.exports;function t(){const r=new e({allowUnknownLevel:!0,errorHandler:new n,initializeFn:()=>{},logId:"default",transportFactories:{console:i,ipc:a},variables:{processType:"renderer"}});return r.errorHandler.setOptions({logFn({error:o,errorName:u,showDialog:l}){r.transports.console({data:[u,o].filter(Boolean),level:"error"}),r.transports.ipc({cmd:"errorHandler",error:{cause:o==null?void 0:o.cause,code:o==null?void 0:o.code,name:o==null?void 0:o.name,message:o==null?void 0:o.message,stack:o==null?void 0:o.stack},errorName:u,logId:r.logId,showDialog:l})}}),typeof window=="object"&&window.addEventListener("message",o=>{const{cmd:u,logId:l,...f}=o.data||{},p=e.getInstance({logId:l});u==="message"&&p.processMessage(f,{transports:["console"]})}),new Proxy(r,{get(o,u){return typeof o[u]<"u"?o[u]:(...l)=>r.logData(l,{level:u})}})}}(zt)),zt.exports}var Zt,mi;function Oa(){if(mi)return Zt;mi=1;const s=Te,e=ie;Zt={findAndReadPackageJson:n,tryReadJsonAt:i};function n(){return i(r())||i(t())||i(process.resourcesPath,"app.asar")||i(process.resourcesPath,"app")||i(process.cwd())||{name:void 0,version:void 0}}function i(...o){if(o[0])try{const u=e.join(...o),l=a("package.json",u);if(!l)return;const f=JSON.parse(s.readFileSync(l,"utf8")),p=(f==null?void 0:f.productName)||(f==null?void 0:f.name);return!p||p.toLowerCase()==="electron"?void 0:p?{name:p,version:f==null?void 0:f.version}:void 0}catch{return}}function a(o,u){let l=u;for(;;){const f=e.parse(l),p=f.root,c=f.dir;if(s.existsSync(e.join(l,o)))return e.resolve(e.join(l,o));if(l===p)return null;l=c}}function t(){const o=process.argv.filter(l=>l.indexOf("--user-data-dir=")===0);return o.length===0||typeof o[0]!="string"?null:o[0].replace("--user-data-dir=","")}function r(){var o;try{return(o=require.main)==null?void 0:o.filename}catch{return}}return Zt}var er,gi;function es(){if(gi)return er;gi=1;const s=dt,e=$e,n=ie,i=Oa();class a{constructor(){Q(this,"appName");Q(this,"appPackageJson");Q(this,"platform",process.platform)}getAppLogPath(r=this.getAppName()){return this.platform==="darwin"?n.join(this.getSystemPathHome(),"Library/Logs",r):n.join(this.getAppUserDataPath(r),"logs")}getAppName(){var o;const r=this.appName||((o=this.getAppPackageJson())==null?void 0:o.name);if(!r)throw new Error("electron-log can't determine the app name. It tried these methods:\n1. Use `electron.app.name`\n2. Use productName or name from the nearest package.json`\nYou can also set it through log.transports.file.setAppName()");return r}getAppPackageJson(){return typeof this.appPackageJson!="object"&&(this.appPackageJson=i.findAndReadPackageJson()),this.appPackageJson}getAppUserDataPath(r=this.getAppName()){return r?n.join(this.getSystemPathAppData(),r):void 0}getAppVersion(){var r;return(r=this.getAppPackageJson())==null?void 0:r.version}getElectronLogPath(){return this.getAppLogPath()}getMacOsVersion(){const r=Number(e.release().split(".")[0]);return r<=19?`10.${r-4}`:r-9}getOsVersion(){let r=e.type().replace("_"," "),o=e.release();return r==="Darwin"&&(r="macOS",o=this.getMacOsVersion()),`${r} ${o}`}getPathVariables(){const r=this.getAppName(),o=this.getAppVersion(),u=this;return{appData:this.getSystemPathAppData(),appName:r,appVersion:o,get electronDefaultDir(){return u.getElectronLogPath()},home:this.getSystemPathHome(),libraryDefaultDir:this.getAppLogPath(r),libraryTemplate:this.getAppLogPath("{appName}"),temp:this.getSystemPathTemp(),userData:this.getAppUserDataPath(r)}}getSystemPathAppData(){const r=this.getSystemPathHome();switch(this.platform){case"darwin":return n.join(r,"Library/Application Support");case"win32":return process.env.APPDATA||n.join(r,"AppData/Roaming");default:return process.env.XDG_CONFIG_HOME||n.join(r,".config")}}getSystemPathHome(){var r;return((r=e.homedir)==null?void 0:r.call(e))||process.env.HOME}getSystemPathTemp(){return e.tmpdir()}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:void 0,os:this.getOsVersion()}}isDev(){return process.env.NODE_ENV==="development"||process.env.ELECTRON_IS_DEV==="1"}isElectron(){return!!process.versions.electron}onAppEvent(r,o){}onAppReady(r){r()}onEveryWebContentsEvent(r,o){}onIpc(r,o){}onIpcInvoke(r,o){}openUrl(r,o=console.error){const l={darwin:"open",win32:"start",linux:"xdg-open"}[process.platform]||"xdg-open";s.exec(`${l} ${r}`,{},f=>{f&&o(f)})}setAppName(r){this.appName=r}setPlatform(r){this.platform=r}setPreloadFileForSessions({filePath:r,includeFutureSession:o=!0,getSessions:u=()=>[]}){}sendIpc(r,o){}showErrorBox(r,o){}}return er=a,er}var tr,yi;function Ca(){if(yi)return tr;yi=1;const s=ie,e=es();class n extends e{constructor({electron:t}={}){super();Q(this,"electron");this.electron=t}getAppName(){var r,o;let t;try{t=this.appName||((r=this.electron.app)==null?void 0:r.name)||((o=this.electron.app)==null?void 0:o.getName())}catch{}return t||super.getAppName()}getAppUserDataPath(t){return this.getPath("userData")||super.getAppUserDataPath(t)}getAppVersion(){var r;let t;try{t=(r=this.electron.app)==null?void 0:r.getVersion()}catch{}return t||super.getAppVersion()}getElectronLogPath(){return this.getPath("logs")||super.getElectronLogPath()}getPath(t){var r;try{return(r=this.electron.app)==null?void 0:r.getPath(t)}catch{return}}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:`Electron ${process.versions.electron}`,os:this.getOsVersion()}}getSystemPathAppData(){return this.getPath("appData")||super.getSystemPathAppData()}isDev(){var t;return((t=this.electron.app)==null?void 0:t.isPackaged)!==void 0?!this.electron.app.isPackaged:typeof process.execPath=="string"?s.basename(process.execPath).toLowerCase().startsWith("electron"):super.isDev()}onAppEvent(t,r){var o;return(o=this.electron.app)==null||o.on(t,r),()=>{var u;(u=this.electron.app)==null||u.off(t,r)}}onAppReady(t){var r,o,u;(r=this.electron.app)!=null&&r.isReady()?t():(o=this.electron.app)!=null&&o.once?(u=this.electron.app)==null||u.once("ready",t):t()}onEveryWebContentsEvent(t,r){var u,l,f;return(l=(u=this.electron.webContents)==null?void 0:u.getAllWebContents())==null||l.forEach(p=>{p.on(t,r)}),(f=this.electron.app)==null||f.on("web-contents-created",o),()=>{var p,c;(p=this.electron.webContents)==null||p.getAllWebContents().forEach(g=>{g.off(t,r)}),(c=this.electron.app)==null||c.off("web-contents-created",o)};function o(p,c){c.on(t,r)}}onIpc(t,r){var o;(o=this.electron.ipcMain)==null||o.on(t,r)}onIpcInvoke(t,r){var o,u;(u=(o=this.electron.ipcMain)==null?void 0:o.handle)==null||u.call(o,t,r)}openUrl(t,r=console.error){var o;(o=this.electron.shell)==null||o.openExternal(t).catch(r)}setPreloadFileForSessions({filePath:t,includeFutureSession:r=!0,getSessions:o=()=>{var u;return[(u=this.electron.session)==null?void 0:u.defaultSession]}}){for(const l of o().filter(Boolean))u(l);r&&this.onAppEvent("session-created",l=>{u(l)});function u(l){typeof l.registerPreloadScript=="function"?l.registerPreloadScript({filePath:t,id:"electron-log-preload",type:"frame"}):l.setPreloads([...l.getPreloads(),t])}}sendIpc(t,r){var o,u;(u=(o=this.electron.BrowserWindow)==null?void 0:o.getAllWindows())==null||u.forEach(l=>{var f,p;((f=l.webContents)==null?void 0:f.isDestroyed())===!1&&((p=l.webContents)==null?void 0:p.isCrashed())===!1&&l.webContents.send(t,r)})}showErrorBox(t,r){var o;(o=this.electron.dialog)==null||o.showErrorBox(t,r)}}return tr=n,tr}var rr,vi;function Da(){if(vi)return rr;vi=1;const s=Te,e=$e,n=ie,i=Qo();rr={initialize({externalApi:r,getSessions:o,includeFutureSession:u,logger:l,preload:f=!0,spyRendererConsole:p=!1}){r.onAppReady(()=>{try{f&&a({externalApi:r,getSessions:o,includeFutureSession:u,preloadOption:f}),p&&t({externalApi:r,logger:l})}catch(c){l.warn(c)}})}};function a({externalApi:r,getSessions:o,includeFutureSession:u,preloadOption:l}){let f=typeof l=="string"?l:void 0;try{f=n.resolve(__dirname,"../renderer/electron-log-preload.js")}catch{}if(!f||!s.existsSync(f)){f=n.join(r.getAppUserDataPath()||e.tmpdir(),"electron-log-preload.js");const p=`
      try {
        (${i.toString()})(require('electron'));
      } catch(e) {
        console.error(e);
      }
    `;s.writeFileSync(f,p,"utf8")}r.setPreloadFileForSessions({filePath:f,includeFutureSession:u,getSessions:o})}function t({externalApi:r,logger:o}){const u=["debug","info","warn","error"];r.onEveryWebContentsEvent("console-message",(l,f,p)=>{o.processMessage({data:[p],level:u[f],variables:{processType:"renderer"}})})}return rr}var nr,wi;function Aa(){if(wi)return nr;wi=1;class s{constructor({externalApi:i,logFn:a=void 0,onError:t=void 0,showDialog:r=void 0}={}){Q(this,"externalApi");Q(this,"isActive",!1);Q(this,"logFn");Q(this,"onError");Q(this,"showDialog",!0);this.createIssue=this.createIssue.bind(this),this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.setOptions({externalApi:i,logFn:a,onError:t,showDialog:r}),this.startCatching=this.startCatching.bind(this),this.stopCatching=this.stopCatching.bind(this)}handle(i,{logFn:a=this.logFn,onError:t=this.onError,processType:r="browser",showDialog:o=this.showDialog,errorName:u=""}={}){var l;i=e(i);try{if(typeof t=="function"){const f=((l=this.externalApi)==null?void 0:l.getVersions())||{},p=this.createIssue;if(t({createIssue:p,error:i,errorName:u,processType:r,versions:f})===!1)return}u?a(u,i):a(i),o&&!u.includes("rejection")&&this.externalApi&&this.externalApi.showErrorBox(`A JavaScript error occurred in the ${r} process`,i.stack)}catch{console.error(i)}}setOptions({externalApi:i,logFn:a,onError:t,showDialog:r}){typeof i=="object"&&(this.externalApi=i),typeof a=="function"&&(this.logFn=a),typeof t=="function"&&(this.onError=t),typeof r=="boolean"&&(this.showDialog=r)}startCatching({onError:i,showDialog:a}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:i,showDialog:a}),process.on("uncaughtException",this.handleError),process.on("unhandledRejection",this.handleRejection))}stopCatching(){this.isActive=!1,process.removeListener("uncaughtException",this.handleError),process.removeListener("unhandledRejection",this.handleRejection)}createIssue(i,a){var t;(t=this.externalApi)==null||t.openUrl(`${i}?${new URLSearchParams(a).toString()}`)}handleError(i){this.handle(i,{errorName:"Unhandled"})}handleRejection(i){const a=i instanceof Error?i:new Error(JSON.stringify(i));this.handle(a,{errorName:"Unhandled rejection"})}}function e(n){if(n instanceof Error)return n;if(n&&typeof n=="object"){if(n.message)return Object.assign(new Error(n.message),n);try{return new Error(JSON.stringify(n))}catch(i){return new Error(`Couldn't normalize error ${String(n)}: ${i}`)}}return new Error(`Can't normalize error ${String(n)}`)}return nr=s,nr}var ir,Ei;function Na(){if(Ei)return ir;Ei=1;class s{constructor(n={}){Q(this,"disposers",[]);Q(this,"format","{eventSource}#{eventName}:");Q(this,"formatters",{app:{"certificate-error":({args:n})=>this.arrayToObject(n.slice(1,4),["url","error","certificate"]),"child-process-gone":({args:n})=>n.length===1?n[0]:n,"render-process-gone":({args:[n,i]})=>i&&typeof i=="object"?{...i,...this.getWebContentsDetails(n)}:[]},webContents:{"console-message":({args:[n,i,a,t]})=>{if(!(n<3))return{message:i,source:`${t}:${a}`}},"did-fail-load":({args:n})=>this.arrayToObject(n,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"did-fail-provisional-load":({args:n})=>this.arrayToObject(n,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"plugin-crashed":({args:n})=>this.arrayToObject(n,["name","version"]),"preload-error":({args:n})=>this.arrayToObject(n,["preloadPath","error"])}});Q(this,"events",{app:{"certificate-error":!0,"child-process-gone":!0,"render-process-gone":!0},webContents:{"did-fail-load":!0,"did-fail-provisional-load":!0,"plugin-crashed":!0,"preload-error":!0,unresponsive:!0}});Q(this,"externalApi");Q(this,"level","error");Q(this,"scope","");this.setOptions(n)}setOptions({events:n,externalApi:i,level:a,logger:t,format:r,formatters:o,scope:u}){typeof n=="object"&&(this.events=n),typeof i=="object"&&(this.externalApi=i),typeof a=="string"&&(this.level=a),typeof t=="object"&&(this.logger=t),(typeof r=="string"||typeof r=="function")&&(this.format=r),typeof o=="object"&&(this.formatters=o),typeof u=="string"&&(this.scope=u)}startLogging(n={}){this.setOptions(n),this.disposeListeners();for(const i of this.getEventNames(this.events.app))this.disposers.push(this.externalApi.onAppEvent(i,(...a)=>{this.handleEvent({eventSource:"app",eventName:i,handlerArgs:a})}));for(const i of this.getEventNames(this.events.webContents))this.disposers.push(this.externalApi.onEveryWebContentsEvent(i,(...a)=>{this.handleEvent({eventSource:"webContents",eventName:i,handlerArgs:a})}))}stopLogging(){this.disposeListeners()}arrayToObject(n,i){const a={};return i.forEach((t,r)=>{a[t]=n[r]}),n.length>i.length&&(a.unknownArgs=n.slice(i.length)),a}disposeListeners(){this.disposers.forEach(n=>n()),this.disposers=[]}formatEventLog({eventName:n,eventSource:i,handlerArgs:a}){var p;const[t,...r]=a;if(typeof this.format=="function")return this.format({args:r,event:t,eventName:n,eventSource:i});const o=(p=this.formatters[i])==null?void 0:p[n];let u=r;if(typeof o=="function"&&(u=o({args:r,event:t,eventName:n,eventSource:i})),!u)return;const l={};return Array.isArray(u)?l.args=u:typeof u=="object"&&Object.assign(l,u),i==="webContents"&&Object.assign(l,this.getWebContentsDetails(t==null?void 0:t.sender)),[this.format.replace("{eventSource}",i==="app"?"App":"WebContents").replace("{eventName}",n),l]}getEventNames(n){return!n||typeof n!="object"?[]:Object.entries(n).filter(([i,a])=>a).map(([i])=>i)}getWebContentsDetails(n){if(!(n!=null&&n.loadURL))return{};try{return{webContents:{id:n.id,url:n.getURL()}}}catch{return{}}}handleEvent({eventName:n,eventSource:i,handlerArgs:a}){var r;const t=this.formatEventLog({eventName:n,eventSource:i,handlerArgs:a});if(t){const o=this.scope?this.logger.scope(this.scope):this.logger;(r=o==null?void 0:o[this.level])==null||r.call(o,...t)}}}return ir=s,ir}var or,Ti;function ts(){if(Ti)return or;Ti=1;const{transform:s}=Ue();or={concatFirstStringElements:e,formatScope:i,formatText:t,formatVariables:a,timeZoneFromOffset:n,format({message:r,logger:o,transport:u,data:l=r==null?void 0:r.data}){switch(typeof u.format){case"string":return s({message:r,logger:o,transforms:[a,i,t],transport:u,initialData:[u.format,...l]});case"function":return u.format({data:l,level:(r==null?void 0:r.level)||"info",logger:o,message:r,transport:u});default:return l}}};function e({data:r}){return typeof r[0]!="string"||typeof r[1]!="string"||r[0].match(/%[1cdfiOos]/)?r:[`${r[0]} ${r[1]}`,...r.slice(2)]}function n(r){const o=Math.abs(r),u=r>0?"-":"+",l=Math.floor(o/60).toString().padStart(2,"0"),f=(o%60).toString().padStart(2,"0");return`${u}${l}:${f}`}function i({data:r,logger:o,message:u}){const{defaultLabel:l,labelLength:f}=(o==null?void 0:o.scope)||{},p=r[0];let c=u.scope;c||(c=l);let g;return c===""?g=f>0?"".padEnd(f+3):"":typeof c=="string"?g=` (${c})`.padEnd(f+3):g="",r[0]=p.replace("{scope}",g),r}function a({data:r,message:o}){let u=r[0];if(typeof u!="string")return r;u=u.replace("{level}]",`${o.level}]`.padEnd(6," "));const l=o.date||new Date;return r[0]=u.replace(/\{(\w+)}/g,(f,p)=>{var c;switch(p){case"level":return o.level||"info";case"logId":return o.logId;case"y":return l.getFullYear().toString(10);case"m":return(l.getMonth()+1).toString(10).padStart(2,"0");case"d":return l.getDate().toString(10).padStart(2,"0");case"h":return l.getHours().toString(10).padStart(2,"0");case"i":return l.getMinutes().toString(10).padStart(2,"0");case"s":return l.getSeconds().toString(10).padStart(2,"0");case"ms":return l.getMilliseconds().toString(10).padStart(3,"0");case"z":return n(l.getTimezoneOffset());case"iso":return l.toISOString();default:return((c=o.variables)==null?void 0:c[p])||f}}).trim(),r}function t({data:r}){const o=r[0];if(typeof o!="string")return r;if(o.lastIndexOf("{text}")===o.length-6)return r[0]=o.replace(/\s?{text}/,""),r[0]===""&&r.shift(),r;const l=o.split("{text}");let f=[];return l[0]!==""&&f.push(l[0]),f=f.concat(r.slice(1)),l[1]!==""&&f.push(l[1]),f}return or}var sr={exports:{}},bi;function vt(){return bi||(bi=1,function(s){const e=pt;s.exports={serialize:i,maxDepth({data:a,transport:t,depth:r=(t==null?void 0:t.depth)??6}){if(!a)return a;if(r<1)return Array.isArray(a)?"[array]":typeof a=="object"&&a?"[object]":a;if(Array.isArray(a))return a.map(u=>s.exports.maxDepth({data:u,depth:r-1}));if(typeof a!="object"||a&&typeof a.toISOString=="function")return a;if(a===null)return null;if(a instanceof Error)return a;const o={};for(const u in a)Object.prototype.hasOwnProperty.call(a,u)&&(o[u]=s.exports.maxDepth({data:a[u],depth:r-1}));return o},toJSON({data:a}){return JSON.parse(JSON.stringify(a,n()))},toString({data:a,transport:t}){const r=(t==null?void 0:t.inspectOptions)||{},o=a.map(u=>{if(u!==void 0)try{const l=JSON.stringify(u,n(),"  ");return l===void 0?void 0:JSON.parse(l)}catch{return u}});return e.formatWithOptions(r,...o)}};function n(a={}){const t=new WeakSet;return function(r,o){if(typeof o=="object"&&o!==null){if(t.has(o))return;t.add(o)}return i(r,o,a)}}function i(a,t,r={}){const o=(r==null?void 0:r.serializeMapAndSet)!==!1;return t instanceof Error?t.stack:t&&(typeof t=="function"?`[function] ${t.toString()}`:t instanceof Date?t.toISOString():o&&t instanceof Map&&Object.fromEntries?Object.fromEntries(t):o&&t instanceof Set&&Array.from?Array.from(t):t)}}(sr)),sr.exports}var ar,Oi;function An(){if(Oi)return ar;Oi=1,ar={transformStyles:i,applyAnsiStyles({data:a}){return i(a,e,n)},removeStyles({data:a}){return i(a,()=>"")}};const s={unset:"\x1B[0m",black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"};function e(a){const t=a.replace(/color:\s*(\w+).*/,"$1").toLowerCase();return s[t]||""}function n(a){return a+s.unset}function i(a,t,r){const o={};return a.reduce((u,l,f,p)=>{if(o[f])return u;if(typeof l=="string"){let c=f,g=!1;l=l.replace(/%[1cdfiOos]/g,E=>{if(c+=1,E!=="%c")return E;const T=p[c];return typeof T=="string"?(o[c]=!0,g=!0,t(T,l)):E}),g&&r&&(l=r(l))}return u.push(l),u},[])}return ar}var ur,Ci;function Ia(){if(Ci)return ur;Ci=1;const{concatFirstStringElements:s,format:e}=ts(),{maxDepth:n,toJSON:i}=vt(),{applyAnsiStyles:a,removeStyles:t}=An(),{transform:r}=Ue(),o={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};ur=f;const l=`%c{h}:{i}:{s}.{ms}{scope}%c ${process.platform==="win32"?">":"›"} {text}`;Object.assign(f,{DEFAULT_FORMAT:l});function f(T){return Object.assign(O,{format:l,level:"silly",transforms:[p,e,g,s,n,i],useStyles:process.env.FORCE_STYLES,writeFn({message:F}){(o[F.level]||o.info)(...F.data)}});function O(F){const v=r({logger:T,message:F,transport:O});O.writeFn({message:{...F,data:v}})}}function p({data:T,message:O,transport:F}){return F.format!==l?T:[`color:${E(O.level)}`,"color:unset",...T]}function c(T,O){if(typeof T=="boolean")return T;const v=O==="error"||O==="warn"?process.stderr:process.stdout;return v&&v.isTTY}function g(T){const{message:O,transport:F}=T;return(c(F.useStyles,O.level)?a:t)(T)}function E(T){const O={error:"red",warn:"yellow",info:"cyan",default:"unset"};return O[T]||O.default}return ur}var cr,Di;function rs(){if(Di)return cr;Di=1;const s=Be,e=Te,n=$e;class i extends s{constructor({path:o,writeOptions:u={encoding:"utf8",flag:"a",mode:438},writeAsync:l=!1}){super();Q(this,"asyncWriteQueue",[]);Q(this,"bytesWritten",0);Q(this,"hasActiveAsyncWriting",!1);Q(this,"path",null);Q(this,"initialSize");Q(this,"writeOptions",null);Q(this,"writeAsync",!1);this.path=o,this.writeOptions=u,this.writeAsync=l}get size(){return this.getSize()}clear(){try{return e.writeFileSync(this.path,"",{mode:this.writeOptions.mode,flag:"w"}),this.reset(),!0}catch(o){return o.code==="ENOENT"?!0:(this.emit("error",o,this),!1)}}crop(o){try{const u=a(this.path,o||4096);this.clear(),this.writeLine(`[log cropped]${n.EOL}${u}`)}catch(u){this.emit("error",new Error(`Couldn't crop file ${this.path}. ${u.message}`),this)}}getSize(){if(this.initialSize===void 0)try{const o=e.statSync(this.path);this.initialSize=o.size}catch{this.initialSize=0}return this.initialSize+this.bytesWritten}increaseBytesWrittenCounter(o){this.bytesWritten+=Buffer.byteLength(o,this.writeOptions.encoding)}isNull(){return!1}nextAsyncWrite(){const o=this;if(this.hasActiveAsyncWriting||this.asyncWriteQueue.length===0)return;const u=this.asyncWriteQueue.join("");this.asyncWriteQueue=[],this.hasActiveAsyncWriting=!0,e.writeFile(this.path,u,this.writeOptions,l=>{o.hasActiveAsyncWriting=!1,l?o.emit("error",new Error(`Couldn't write to ${o.path}. ${l.message}`),this):o.increaseBytesWrittenCounter(u),o.nextAsyncWrite()})}reset(){this.initialSize=void 0,this.bytesWritten=0}toString(){return this.path}writeLine(o){if(o+=n.EOL,this.writeAsync){this.asyncWriteQueue.push(o),this.nextAsyncWrite();return}try{e.writeFileSync(this.path,o,this.writeOptions),this.increaseBytesWrittenCounter(o)}catch(u){this.emit("error",new Error(`Couldn't write to ${this.path}. ${u.message}`),this)}}}cr=i;function a(t,r){const o=Buffer.alloc(r),u=e.statSync(t),l=Math.min(u.size,r),f=Math.max(0,u.size-r),p=e.openSync(t,"r"),c=e.readSync(p,o,0,l,f);return e.closeSync(p),o.toString("utf8",0,c)}return cr}var fr,Ai;function _a(){if(Ai)return fr;Ai=1;const s=rs();class e extends s{clear(){}crop(){}getSize(){return 0}isNull(){return!0}writeLine(){}}return fr=e,fr}var lr,Ni;function xa(){if(Ni)return lr;Ni=1;const s=Be,e=Te,n=ie,i=rs(),a=_a();class t extends s{constructor(){super();Q(this,"store",{});this.emitError=this.emitError.bind(this)}provide({filePath:u,writeOptions:l={},writeAsync:f=!1}){let p;try{if(u=n.resolve(u),this.store[u])return this.store[u];p=this.createFile({filePath:u,writeOptions:l,writeAsync:f})}catch(c){p=new a({path:u}),this.emitError(c,p)}return p.on("error",this.emitError),this.store[u]=p,p}createFile({filePath:u,writeOptions:l,writeAsync:f}){return this.testFileWriting({filePath:u,writeOptions:l}),new i({path:u,writeOptions:l,writeAsync:f})}emitError(u,l){this.emit("error",u,l)}testFileWriting({filePath:u,writeOptions:l}){e.mkdirSync(n.dirname(u),{recursive:!0}),e.writeFileSync(u,"",{flag:"a",mode:l.mode})}}return lr=t,lr}var hr,Ii;function Fa(){if(Ii)return hr;Ii=1;const s=Te,e=$e,n=ie,i=xa(),{transform:a}=Ue(),{removeStyles:t}=An(),{format:r,concatFirstStringElements:o}=ts(),{toString:u}=vt();hr=f;const l=new i;function f(c,{registry:g=l,externalApi:E}={}){let T;return g.listenerCount("error")<1&&g.on("error",(N,w)=>{v(`Can't write to ${w}`,N)}),Object.assign(O,{fileName:p(c.variables.processType),format:"[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}]{scope} {text}",getFile:m,inspectOptions:{depth:5},level:"silly",maxSize:1024**2,readAllLogs:D,sync:!0,transforms:[t,r,o,u],writeOptions:{flag:"a",mode:438,encoding:"utf8"},archiveLogFn(N){const w=N.toString(),A=n.parse(w);try{s.renameSync(w,n.join(A.dir,`${A.name}.old${A.ext}`))}catch(b){v("Could not rotate log",b);const h=Math.round(O.maxSize/4);N.crop(Math.min(h,256*1024))}},resolvePathFn(N){return n.join(N.libraryDefaultDir,N.fileName)},setAppName(N){c.dependencies.externalApi.setAppName(N)}});function O(N){const w=m(N);O.maxSize>0&&w.size>O.maxSize&&(O.archiveLogFn(w),w.reset());const b=a({logger:c,message:N,transport:O});w.writeLine(b)}function F(){T||(T=Object.create(Object.prototype,{...Object.getOwnPropertyDescriptors(E.getPathVariables()),fileName:{get(){return O.fileName},enumerable:!0}}),typeof O.archiveLog=="function"&&(O.archiveLogFn=O.archiveLog,v("archiveLog is deprecated. Use archiveLogFn instead")),typeof O.resolvePath=="function"&&(O.resolvePathFn=O.resolvePath,v("resolvePath is deprecated. Use resolvePathFn instead")))}function v(N,w=null,A="error"){const b=[`electron-log.transports.file: ${N}`];w&&b.push(w),c.transports.console({data:b,date:new Date,level:A})}function m(N){F();const w=O.resolvePathFn(T,N);return g.provide({filePath:w,writeAsync:!O.sync,writeOptions:O.writeOptions})}function D({fileFilter:N=w=>w.endsWith(".log")}={}){F();const w=n.dirname(O.resolvePathFn(T));return s.existsSync(w)?s.readdirSync(w).map(A=>n.join(w,A)).filter(N).map(A=>{try{return{path:A,lines:s.readFileSync(A,"utf8").split(e.EOL)}}catch{return null}}).filter(Boolean):[]}}function p(c=process.type){switch(c){case"renderer":return"renderer.log";case"worker":return"worker.log";default:return"main.log"}}return hr}var pr,_i;function Sa(){if(_i)return pr;_i=1;const{maxDepth:s,toJSON:e}=vt(),{transform:n}=Ue();pr=i;function i(a,{externalApi:t}){return Object.assign(r,{depth:3,eventId:"__ELECTRON_LOG_IPC__",level:a.isDev?"silly":!1,transforms:[e,s]}),t!=null&&t.isElectron()?r:void 0;function r(o){var u;((u=o==null?void 0:o.variables)==null?void 0:u.processType)!=="renderer"&&(t==null||t.sendIpc(r.eventId,{...o,data:n({logger:a,message:o,transport:r})}))}}return pr}var dr,xi;function Pa(){if(xi)return dr;xi=1;const s=mt,e=gt,{transform:n}=Ue(),{removeStyles:i}=An(),{toJSON:a,maxDepth:t}=vt();dr=r;function r(o){return Object.assign(u,{client:{name:"electron-application"},depth:6,level:!1,requestOptions:{},transforms:[i,a,t],makeBodyFn({message:l}){return JSON.stringify({client:u.client,data:l.data,date:l.date.getTime(),level:l.level,scope:l.scope,variables:l.variables})},processErrorFn({error:l}){o.processMessage({data:[`electron-log: can't POST ${u.url}`,l],level:"warn"},{transports:["console","file"]})},sendRequestFn({serverUrl:l,requestOptions:f,body:p}){const g=(l.startsWith("https:")?e:s).request(l,{method:"POST",...f,headers:{"Content-Type":"application/json","Content-Length":p.length,...f.headers}});return g.write(p),g.end(),g}});function u(l){if(!u.url)return;const f=u.makeBodyFn({logger:o,message:{...l,data:n({logger:o,message:l,transport:u})},transport:u}),p=u.sendRequestFn({serverUrl:u.url,requestOptions:u.requestOptions,body:Buffer.from(f,"utf8")});p.on("error",c=>u.processErrorFn({error:c,logger:o,message:l,request:p,transport:u}))}}return dr}var mr,Fi;function ns(){if(Fi)return mr;Fi=1;const s=Zo(),e=Aa(),n=Na(),i=Ia(),a=Fa(),t=Sa(),r=Pa();mr=o;function o({dependencies:u,initializeFn:l}){var p;const f=new s({dependencies:u,errorHandler:new e,eventLogger:new n,initializeFn:l,isDev:(p=u.externalApi)==null?void 0:p.isDev(),logId:"default",transportFactories:{console:i,file:a,ipc:t,remote:r},variables:{processType:"main"}});return f.default=f,f.Logger=s,f.processInternalErrorFn=c=>{f.transports.console.writeFn({message:{data:["Unhandled electron-log error",c],level:"error"}})},f}return mr}var gr,Si;function La(){if(Si)return gr;Si=1;const s=fe,e=Ca(),{initialize:n}=Da(),i=ns(),a=new e({electron:s}),t=i({dependencies:{externalApi:a},initializeFn:n});gr=t,a.onIpc("__ELECTRON_LOG__",(o,u)=>{u.scope&&t.Logger.getInstance(u).scope(u.scope);const l=new Date(u.date);r({...u,date:l.getTime()?l:new Date})}),a.onIpcInvoke("__ELECTRON_LOG__",(o,{cmd:u="",logId:l})=>{switch(u){case"getOptions":return{levels:t.Logger.getInstance({logId:l}).levels,logId:l};default:return r({data:[`Unknown cmd '${u}'`],level:"error"}),{}}});function r(o){var u;(u=t.Logger.getInstance(o))==null||u.processMessage(o)}return gr}var yr,Pi;function Ma(){if(Pi)return yr;Pi=1;const s=es(),e=ns(),n=new s;return yr=e({dependencies:{externalApi:n}}),yr}const Ra=typeof process>"u"||process.type==="renderer"||process.type==="worker",qa=typeof process=="object"&&process.type==="browser";Ra?(Qo(),ft.exports=ba()):qa?ft.exports=La():ft.exports=Ma();var ja=ft.exports;const ve=yt(ja),Li=require("iconv-lite");function $a(s){try{const e=Li.decode(Buffer.from(s,"binary"),"gbk");return/[^\u0000-\uFFFF]/.test(e)?s.split(ie.sep).map(n=>{try{return Li.decode(Buffer.from(n,"binary"),"gbk")}catch{return n}}).join(ie.sep):e}catch{return s}}async function Mi(s){const e=$a(s),n=ie.normalize(e);if(console.log(n),!Te.existsSync(n)){if(s!==n&&Te.existsSync(s))return s;throw new Error(`文件不存在: ${n}
原始路径: ${s}`)}return n}function ka(s){return Buffer.from(s,"base64").toString("utf-8")}function Ba(){try{let s,e;if(fe.app.isPackaged){const n=ie.join(process.resourcesPath,"app.asar.unpacked","bin");s=ie.join(n,process.platform==="win32"?"ffmpeg.exe":"ffmpeg"),e=ie.join(n,process.platform==="win32"?"ffprobe.exe":"ffprobe")}else{const n=require("ffmpeg-static"),i=require("ffprobe-static");s=n,e=i.path}return console.log("FFmpeg路径:",s),console.log("FFprobe路径:",e),mn.setFfmpegPath(s),mn.setFfprobePath(e),{ffmpegPath:s,ffprobePath:e}}catch(s){throw console.error("FFmpeg初始化失败:",s),new Error(`视频处理引擎初始化失败: ${s.message}`)}}function Ua(){fe.ipcMain.handle("merge-media",async(s,e)=>{const{videoPaths:n,audioPaths:i,outputPath:a,audioVolumes:t=[]}=e,r=[...await Promise.all(n.map(Mi)),...await Promise.all(i.map(Mi))];return new Promise((o,u)=>{const l=mn();r.forEach(T=>l.input(T));const f=[],p=n.map((T,O)=>`[${O}:v]scale=1280:720,setsar=1[v${O}]`);f.push(p.join(";"));const c=n.map((T,O)=>`[v${O}]`).join("");f.push(`${c}concat=n=${n.length}:v=1:a=0[vout]`);const g=i.map((T,O)=>`[${O+n.length}:a]aformat=sample_fmts=fltp[a${O}]`);f.push(g.join(";"));const E=i.map((T,O)=>`[a${O}]`).join("");f.push(`${E}amix=inputs=${i.length}:duration=longest[aout]`),ve.log(f.join(";")),l.complexFilter(f.join(";")).outputOptions(["-map [vout]","-map [aout]","-c:v libx264","-preset fast","-crf 22","-c:a aac","-b:a 192k","-shortest"]).save(a).on("progress",T=>{const O=T.percent?Math.min(100,T.percent):0;s.sender.send("merge-progress",O)}).on("end",()=>o(a)).on("error",(T,O,F)=>{console.error("FFmpeg Error:",T.message),console.error("FFmpeg Stderr:",F),u(T)})})})}function Xa(){fe.ipcMain.handle("open-file",async(s,e)=>{const{shell:n}=require("electron");await n.openPath(e)})}var tt,Va=new Uint8Array(16);function is(){if(!tt&&(tt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!tt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tt(Va)}const za=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function wt(s){return typeof s=="string"&&za.test(s)}var he=[];for(var vr=0;vr<256;++vr)he.push((vr+256).toString(16).substr(1));function Et(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(he[s[e+0]]+he[s[e+1]]+he[s[e+2]]+he[s[e+3]]+"-"+he[s[e+4]]+he[s[e+5]]+"-"+he[s[e+6]]+he[s[e+7]]+"-"+he[s[e+8]]+he[s[e+9]]+"-"+he[s[e+10]]+he[s[e+11]]+he[s[e+12]]+he[s[e+13]]+he[s[e+14]]+he[s[e+15]]).toLowerCase();if(!wt(n))throw TypeError("Stringified UUID is invalid");return n}var Ri,wr,Er=0,Tr=0;function Wa(s,e,n){var i=e&&n||0,a=e||new Array(16);s=s||{};var t=s.node||Ri,r=s.clockseq!==void 0?s.clockseq:wr;if(t==null||r==null){var o=s.random||(s.rng||is)();t==null&&(t=Ri=[o[0]|1,o[1],o[2],o[3],o[4],o[5]]),r==null&&(r=wr=(o[6]<<8|o[7])&16383)}var u=s.msecs!==void 0?s.msecs:Date.now(),l=s.nsecs!==void 0?s.nsecs:Tr+1,f=u-Er+(l-Tr)/1e4;if(f<0&&s.clockseq===void 0&&(r=r+1&16383),(f<0||u>Er)&&s.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Er=u,Tr=l,wr=r,u+=122192928e5;var p=((u&268435455)*1e4+l)%4294967296;a[i++]=p>>>24&255,a[i++]=p>>>16&255,a[i++]=p>>>8&255,a[i++]=p&255;var c=u/4294967296*1e4&268435455;a[i++]=c>>>8&255,a[i++]=c&255,a[i++]=c>>>24&15|16,a[i++]=c>>>16&255,a[i++]=r>>>8|128,a[i++]=r&255;for(var g=0;g<6;++g)a[i+g]=t[g];return e||Et(a)}function os(s){if(!wt(s))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(s.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(s.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(s.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(s.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(s.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function Ha(s){s=unescape(encodeURIComponent(s));for(var e=[],n=0;n<s.length;++n)e.push(s.charCodeAt(n));return e}var Ga="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Ka="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ss(s,e,n){function i(a,t,r,o){if(typeof a=="string"&&(a=Ha(a)),typeof t=="string"&&(t=os(t)),t.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+a.length);if(u.set(t),u.set(a,t.length),u=n(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,r){o=o||0;for(var l=0;l<16;++l)r[o+l]=u[l];return r}return Et(u)}try{i.name=s}catch{}return i.DNS=Ga,i.URL=Ka,i}function Ya(s){if(typeof s=="string"){var e=unescape(encodeURIComponent(s));s=new Uint8Array(e.length);for(var n=0;n<e.length;++n)s[n]=e.charCodeAt(n)}return Ja(Qa(Za(s),s.length*8))}function Ja(s){for(var e=[],n=s.length*32,i="0123456789abcdef",a=0;a<n;a+=8){var t=s[a>>5]>>>a%32&255,r=parseInt(i.charAt(t>>>4&15)+i.charAt(t&15),16);e.push(r)}return e}function as(s){return(s+64>>>9<<4)+14+1}function Qa(s,e){s[e>>5]|=128<<e%32,s[as(e)-1]=e;for(var n=1732584193,i=-271733879,a=-1732584194,t=271733878,r=0;r<s.length;r+=16){var o=n,u=i,l=a,f=t;n=de(n,i,a,t,s[r],7,-680876936),t=de(t,n,i,a,s[r+1],12,-389564586),a=de(a,t,n,i,s[r+2],17,606105819),i=de(i,a,t,n,s[r+3],22,-1044525330),n=de(n,i,a,t,s[r+4],7,-176418897),t=de(t,n,i,a,s[r+5],12,1200080426),a=de(a,t,n,i,s[r+6],17,-1473231341),i=de(i,a,t,n,s[r+7],22,-45705983),n=de(n,i,a,t,s[r+8],7,1770035416),t=de(t,n,i,a,s[r+9],12,-1958414417),a=de(a,t,n,i,s[r+10],17,-42063),i=de(i,a,t,n,s[r+11],22,-1990404162),n=de(n,i,a,t,s[r+12],7,1804603682),t=de(t,n,i,a,s[r+13],12,-40341101),a=de(a,t,n,i,s[r+14],17,-1502002290),i=de(i,a,t,n,s[r+15],22,1236535329),n=me(n,i,a,t,s[r+1],5,-165796510),t=me(t,n,i,a,s[r+6],9,-1069501632),a=me(a,t,n,i,s[r+11],14,643717713),i=me(i,a,t,n,s[r],20,-373897302),n=me(n,i,a,t,s[r+5],5,-701558691),t=me(t,n,i,a,s[r+10],9,38016083),a=me(a,t,n,i,s[r+15],14,-660478335),i=me(i,a,t,n,s[r+4],20,-405537848),n=me(n,i,a,t,s[r+9],5,568446438),t=me(t,n,i,a,s[r+14],9,-1019803690),a=me(a,t,n,i,s[r+3],14,-187363961),i=me(i,a,t,n,s[r+8],20,1163531501),n=me(n,i,a,t,s[r+13],5,-1444681467),t=me(t,n,i,a,s[r+2],9,-51403784),a=me(a,t,n,i,s[r+7],14,1735328473),i=me(i,a,t,n,s[r+12],20,-1926607734),n=ge(n,i,a,t,s[r+5],4,-378558),t=ge(t,n,i,a,s[r+8],11,-2022574463),a=ge(a,t,n,i,s[r+11],16,1839030562),i=ge(i,a,t,n,s[r+14],23,-35309556),n=ge(n,i,a,t,s[r+1],4,-1530992060),t=ge(t,n,i,a,s[r+4],11,1272893353),a=ge(a,t,n,i,s[r+7],16,-155497632),i=ge(i,a,t,n,s[r+10],23,-1094730640),n=ge(n,i,a,t,s[r+13],4,681279174),t=ge(t,n,i,a,s[r],11,-358537222),a=ge(a,t,n,i,s[r+3],16,-722521979),i=ge(i,a,t,n,s[r+6],23,76029189),n=ge(n,i,a,t,s[r+9],4,-640364487),t=ge(t,n,i,a,s[r+12],11,-421815835),a=ge(a,t,n,i,s[r+15],16,530742520),i=ge(i,a,t,n,s[r+2],23,-995338651),n=ye(n,i,a,t,s[r],6,-198630844),t=ye(t,n,i,a,s[r+7],10,1126891415),a=ye(a,t,n,i,s[r+14],15,-1416354905),i=ye(i,a,t,n,s[r+5],21,-57434055),n=ye(n,i,a,t,s[r+12],6,1700485571),t=ye(t,n,i,a,s[r+3],10,-1894986606),a=ye(a,t,n,i,s[r+10],15,-1051523),i=ye(i,a,t,n,s[r+1],21,-2054922799),n=ye(n,i,a,t,s[r+8],6,1873313359),t=ye(t,n,i,a,s[r+15],10,-30611744),a=ye(a,t,n,i,s[r+6],15,-1560198380),i=ye(i,a,t,n,s[r+13],21,1309151649),n=ye(n,i,a,t,s[r+4],6,-145523070),t=ye(t,n,i,a,s[r+11],10,-1120210379),a=ye(a,t,n,i,s[r+2],15,718787259),i=ye(i,a,t,n,s[r+9],21,-343485551),n=je(n,o),i=je(i,u),a=je(a,l),t=je(t,f)}return[n,i,a,t]}function Za(s){if(s.length===0)return[];for(var e=s.length*8,n=new Uint32Array(as(e)),i=0;i<e;i+=8)n[i>>5]|=(s[i/8]&255)<<i%32;return n}function je(s,e){var n=(s&65535)+(e&65535),i=(s>>16)+(e>>16)+(n>>16);return i<<16|n&65535}function eu(s,e){return s<<e|s>>>32-e}function Tt(s,e,n,i,a,t){return je(eu(je(je(e,s),je(i,t)),a),n)}function de(s,e,n,i,a,t,r){return Tt(e&n|~e&i,s,e,a,t,r)}function me(s,e,n,i,a,t,r){return Tt(e&i|n&~i,s,e,a,t,r)}function ge(s,e,n,i,a,t,r){return Tt(e^n^i,s,e,a,t,r)}function ye(s,e,n,i,a,t,r){return Tt(n^(e|~i),s,e,a,t,r)}var tu=ss("v3",48,Ya);const ru=tu;function nu(s,e,n){s=s||{};var i=s.random||(s.rng||is)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(var a=0;a<16;++a)e[n+a]=i[a];return e}return Et(i)}function iu(s,e,n,i){switch(s){case 0:return e&n^~e&i;case 1:return e^n^i;case 2:return e&n^e&i^n&i;case 3:return e^n^i}}function br(s,e){return s<<e|s>>>32-e}function ou(s){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof s=="string"){var i=unescape(encodeURIComponent(s));s=[];for(var a=0;a<i.length;++a)s.push(i.charCodeAt(a))}else Array.isArray(s)||(s=Array.prototype.slice.call(s));s.push(128);for(var t=s.length/4+2,r=Math.ceil(t/16),o=new Array(r),u=0;u<r;++u){for(var l=new Uint32Array(16),f=0;f<16;++f)l[f]=s[u*64+f*4]<<24|s[u*64+f*4+1]<<16|s[u*64+f*4+2]<<8|s[u*64+f*4+3];o[u]=l}o[r-1][14]=(s.length-1)*8/Math.pow(2,32),o[r-1][14]=Math.floor(o[r-1][14]),o[r-1][15]=(s.length-1)*8&4294967295;for(var p=0;p<r;++p){for(var c=new Uint32Array(80),g=0;g<16;++g)c[g]=o[p][g];for(var E=16;E<80;++E)c[E]=br(c[E-3]^c[E-8]^c[E-14]^c[E-16],1);for(var T=n[0],O=n[1],F=n[2],v=n[3],m=n[4],D=0;D<80;++D){var N=Math.floor(D/20),w=br(T,5)+iu(N,O,F,v)+m+e[N]+c[D]>>>0;m=v,v=F,F=br(O,30)>>>0,O=T,T=w}n[0]=n[0]+T>>>0,n[1]=n[1]+O>>>0,n[2]=n[2]+F>>>0,n[3]=n[3]+v>>>0,n[4]=n[4]+m>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var su=ss("v5",80,ou);const au=su,uu="00000000-0000-0000-0000-000000000000";function cu(s){if(!wt(s))throw TypeError("Invalid UUID");return parseInt(s.substr(14,1),16)}const fu=Object.freeze(Object.defineProperty({__proto__:null,NIL:uu,parse:os,stringify:Et,v1:Wa,v3:ru,v4:nu,v5:au,validate:wt,version:cu},Symbol.toStringTag,{value:"Module"})),lu=zs(fu),hu=js,rt=Tn,{v1:Uc,v4:pu}=lu;let du=class{constructor(e){rt(e,'must pass "config"'),rt(e.url,'must pass "url"'),rt(e.appkey,'must pass "appkey"'),rt(e.token,"must first get token from cache or getToken interface"),this._config=e}start(e,n){if(typeof e!="function")throw new Error("expect function onmessage");if(typeof n!="function")throw new Error("expect function onclose");return this._ws=new hu(this._config.url,{headers:{"X-NLS-Token":this._config.token},perMessageDeflate:!1}),this._ws.on("message",(i,a)=>{e(i,a)}),this._ws.on("close",()=>{n()}),new Promise((i,a)=>{this._ws.on("open",()=>{i()}),this._ws.on("error",t=>{a(t)})})}send(e,n){this._ws!=null&&this._ws.send(e,{binary:n})}setPing(e,n){this._ping=setInterval(()=>{this._ws.ping(n)},e)}clearPing(){this._ping&&clearInterval(this._ping)}shutdown(){this._ws!=null&&(this._ping!=null&&clearInterval(this._ping),this._ws.terminate())}uuid(){return pu().split("-").join("")}defaultContext(){return{sdk:{name:"nls-nodejs-sdk",version:"0.0.1",language:"nodejs"}}}};var mu=du;Be.EventEmitter;Be.EventEmitter;const gu=mu,yu=Be.EventEmitter;class vu{constructor(e,n=!1){this._event=new yu,this._config=e,n?this._namespace="SpeechLongSynthesizer":this._namespace="SpeechSynthesizer"}defaultStartParams(e){return{voice:e,format:"wav",sample_rate:16e3,volume:50,speech_rate:0,pitch_rate:0,enable_subtitle:!1}}on(e,n){this._event.on(e,n)}async start(e,n,i){this._client=new gu(this._config),this._taskid=this._client.uuid();let a={header:{message_id:this._client.uuid(),task_id:this._taskid,namespace:this._namespace,name:"StartSynthesis",appkey:this._config.appkey},payload:e,context:this._client.defaultContext()};return new Promise(async(t,r)=>{try{await this._client.start((o,u)=>{if(u)this._event.emit("data",o);else{let l=o.toString(),f=JSON.parse(l);f.header.name==="MetaInfo"?this._event.emit("meta",l):f.header.name==="SynthesisCompleted"?(this._client.clearPing(),this._client.shutdown(),this._client=null,this._event.emit("completed",l),t(l)):f.header.name==="TaskFailed"&&(this._client.clearPing(),this._client.shutdown(),this._client=null,this._event.emit("TaskFailed",l),this._event.emit("failed",l),r(l))}},()=>{this._event.emit("closed")}),n&&(i||(i=6e3),this._client.setPing(i)),this._client.send(JSON.stringify(a),!1)}catch(o){r(o)}})}shutdown(){this._client!=null&&this._client.shutdown()}}var wu=vu;const Eu=yt(wu),ht={accessKeyId:"LTAI5tFCh5eoiNZX4n2wEy7Y",accessKeySecret:"XWYRzwspo5z4Ukuo8lKxZX4pUSgQ86",appkey:"JbBUqMYRUt0DrMcK",endpoint:"https://nls-gateway.aliyuncs.com",regionId:"cn-shanghai",ttsUrl:"wss://nls-gateway-cn-shanghai.aliyuncs.com/ws/v1"};var bt={exports:{}},Ve={},gn={exports:{}},nt={exports:{}},Or,qi;function us(){if(qi)return Or;qi=1;var s=1e3,e=s*60,n=e*60,i=n*24,a=i*7,t=i*365.25;Or=function(f,p){p=p||{};var c=typeof f;if(c==="string"&&f.length>0)return r(f);if(c==="number"&&isFinite(f))return p.long?u(f):o(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function r(f){if(f=String(f),!(f.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var c=parseFloat(p[1]),g=(p[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return c*t;case"weeks":case"week":case"w":return c*a;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*e;case"seconds":case"second":case"secs":case"sec":case"s":return c*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}function o(f){var p=Math.abs(f);return p>=i?Math.round(f/i)+"d":p>=n?Math.round(f/n)+"h":p>=e?Math.round(f/e)+"m":p>=s?Math.round(f/s)+"s":f+"ms"}function u(f){var p=Math.abs(f);return p>=i?l(f,p,i,"day"):p>=n?l(f,p,n,"hour"):p>=e?l(f,p,e,"minute"):p>=s?l(f,p,s,"second"):f+" ms"}function l(f,p,c,g){var E=p>=c*1.5;return Math.round(f/c)+" "+g+(E?"s":"")}return Or}var Cr,ji;function cs(){if(ji)return Cr;ji=1;function s(e){i.debug=i,i.default=i,i.coerce=l,i.disable=o,i.enable=t,i.enabled=u,i.humanize=us(),i.destroy=f,Object.keys(e).forEach(p=>{i[p]=e[p]}),i.names=[],i.skips=[],i.formatters={};function n(p){let c=0;for(let g=0;g<p.length;g++)c=(c<<5)-c+p.charCodeAt(g),c|=0;return i.colors[Math.abs(c)%i.colors.length]}i.selectColor=n;function i(p){let c,g=null,E,T;function O(...F){if(!O.enabled)return;const v=O,m=Number(new Date),D=m-(c||m);v.diff=D,v.prev=c,v.curr=m,c=m,F[0]=i.coerce(F[0]),typeof F[0]!="string"&&F.unshift("%O");let N=0;F[0]=F[0].replace(/%([a-zA-Z%])/g,(A,b)=>{if(A==="%%")return"%";N++;const h=i.formatters[b];if(typeof h=="function"){const C=F[N];A=h.call(v,C),F.splice(N,1),N--}return A}),i.formatArgs.call(v,F),(v.log||i.log).apply(v,F)}return O.namespace=p,O.useColors=i.useColors(),O.color=i.selectColor(p),O.extend=a,O.destroy=i.destroy,Object.defineProperty(O,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(E!==i.namespaces&&(E=i.namespaces,T=i.enabled(p)),T),set:F=>{g=F}}),typeof i.init=="function"&&i.init(O),O}function a(p,c){const g=i(this.namespace+(typeof c>"u"?":":c)+p);return g.log=this.log,g}function t(p){i.save(p),i.namespaces=p,i.names=[],i.skips=[];const c=(typeof p=="string"?p:"").trim().replace(" ",",").split(",").filter(Boolean);for(const g of c)g[0]==="-"?i.skips.push(g.slice(1)):i.names.push(g)}function r(p,c){let g=0,E=0,T=-1,O=0;for(;g<p.length;)if(E<c.length&&(c[E]===p[g]||c[E]==="*"))c[E]==="*"?(T=E,O=g,E++):(g++,E++);else if(T!==-1)E=T+1,O++,g=O;else return!1;for(;E<c.length&&c[E]==="*";)E++;return E===c.length}function o(){const p=[...i.names,...i.skips.map(c=>"-"+c)].join(",");return i.enable(""),p}function u(p){for(const c of i.skips)if(r(p,c))return!1;for(const c of i.names)if(r(p,c))return!0;return!1}function l(p){return p instanceof Error?p.stack||p.message:p}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}return Cr=s,Cr}var $i;function Tu(){return $i||($i=1,function(s,e){e.formatArgs=i,e.save=a,e.load=t,e.useColors=n,e.storage=r(),e.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;u.splice(1,0,l,"color: inherit");let f=0,p=0;u[0].replace(/%[a-zA-Z%]/g,c=>{c!=="%%"&&(f++,c==="%c"&&(p=f))}),u.splice(p,0,l)}e.log=console.debug||console.log||(()=>{});function a(u){try{u?e.storage.setItem("debug",u):e.storage.removeItem("debug")}catch{}}function t(){let u;try{u=e.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=process.env.DEBUG),u}function r(){try{return localStorage}catch{}}s.exports=cs()(e);const{formatters:o}=s.exports;o.j=function(u){try{return JSON.stringify(u)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}}(nt,nt.exports)),nt.exports}var it={exports:{}},Dr,ki;function bu(){return ki||(ki=1,Dr=(s,e=process.argv)=>{const n=s.startsWith("-")?"":s.length===1?"-":"--",i=e.indexOf(n+s),a=e.indexOf("--");return i!==-1&&(a===-1||i<a)}),Dr}var Ar,Bi;function fs(){if(Bi)return Ar;Bi=1;const s=$e,e=On,n=bu(),{env:i}=process;let a;n("no-color")||n("no-colors")||n("color=false")||n("color=never")?a=0:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(a=1),"FORCE_COLOR"in i&&(i.FORCE_COLOR==="true"?a=1:i.FORCE_COLOR==="false"?a=0:a=i.FORCE_COLOR.length===0?1:Math.min(parseInt(i.FORCE_COLOR,10),3));function t(u){return u===0?!1:{level:u,hasBasic:!0,has256:u>=2,has16m:u>=3}}function r(u,l){if(a===0)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(u&&!l&&a===void 0)return 0;const f=a||0;if(i.TERM==="dumb")return f;if(process.platform==="win32"){const p=s.release().split(".");return Number(p[0])>=10&&Number(p[2])>=10586?Number(p[2])>=14931?3:2:1}if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(p=>p in i)||i.CI_NAME==="codeship"?1:f;if("TEAMCITY_VERSION"in i)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION)?1:0;if(i.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in i){const p=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return p>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)||"COLORTERM"in i?1:f}function o(u){const l=r(u,u&&u.isTTY);return t(l)}return Ar={supportsColor:o,stdout:t(r(!0,e.isatty(1))),stderr:t(r(!0,e.isatty(2)))},Ar}var Ui;function Ou(){return Ui||(Ui=1,function(s,e){const n=On,i=pt;e.init=f,e.log=o,e.formatArgs=t,e.save=u,e.load=l,e.useColors=a,e.destroy=i.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),e.colors=[6,2,3,4,5,1];try{const c=fs();c&&(c.stderr||c).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}e.inspectOpts=Object.keys(process.env).filter(c=>/^debug_/i.test(c)).reduce((c,g)=>{const E=g.substring(6).toLowerCase().replace(/_([a-z])/g,(O,F)=>F.toUpperCase());let T=process.env[g];return/^(yes|on|true|enabled)$/i.test(T)?T=!0:/^(no|off|false|disabled)$/i.test(T)?T=!1:T==="null"?T=null:T=Number(T),c[E]=T,c},{});function a(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:n.isatty(process.stderr.fd)}function t(c){const{namespace:g,useColors:E}=this;if(E){const T=this.color,O="\x1B[3"+(T<8?T:"8;5;"+T),F=`  ${O};1m${g} \x1B[0m`;c[0]=F+c[0].split(`
`).join(`
`+F),c.push(O+"m+"+s.exports.humanize(this.diff)+"\x1B[0m")}else c[0]=r()+g+" "+c[0]}function r(){return e.inspectOpts.hideDate?"":new Date().toISOString()+" "}function o(...c){return process.stderr.write(i.formatWithOptions(e.inspectOpts,...c)+`
`)}function u(c){c?process.env.DEBUG=c:delete process.env.DEBUG}function l(){return process.env.DEBUG}function f(c){c.inspectOpts={};const g=Object.keys(e.inspectOpts);for(let E=0;E<g.length;E++)c.inspectOpts[g[E]]=e.inspectOpts[g[E]]}s.exports=cs()(e);const{formatters:p}=s.exports;p.o=function(c){return this.inspectOpts.colors=this.useColors,i.inspect(c,this.inspectOpts).split(`
`).map(g=>g.trim()).join(" ")},p.O=function(c){return this.inspectOpts.colors=this.useColors,i.inspect(c,this.inspectOpts)}}(it,it.exports)),it.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?gn.exports=Tu():gn.exports=Ou();var ls=gn.exports;const Xi=$s,hs=mt,ps=gt,Cu=bn.parse,Du=bn.format,Ie=ls("httpx:body"),ot=ls("httpx:header"),Au=new hs.Agent({keepAlive:!0}),Nu=new ps.Agent({keepAlive:!0}),Nr=3e3,Re=Symbol("TIMER::READ_TIMER"),yn=Symbol("TIMER::READ_TIME_OUT"),ds=Symbol("TIMER::READ_TIMER_START_AT");function ms(s){switch(s.headers["content-encoding"]){case"gzip":return s.pipe(Xi.createGunzip());case"deflate":return s.pipe(Xi.createInflate());default:return s}}var Vi=function(s,e,n){return s.name=e+s.name,s.message=`${n}. ${s.message}`,s};const He=function(s){return s!==null&&!isNaN(s)};Ve.request=function(s,e){e||(e={});const n=typeof s=="string"?Cu(s):s;let i,a;He(e.readTimeout)||He(e.connectTimeout)?(i=He(e.readTimeout)?Number(e.readTimeout):Nr,a=He(e.connectTimeout)?Number(e.connectTimeout):Nr):He(e.timeout)?i=a=Number(e.timeout):i=a=Nr;const t=n.protocol==="https:",r=(e.method||"GET").toUpperCase(),o=t?Nu:Au,u=e.agent||o;var l={host:n.hostname||"localhost",path:n.path||"/",method:r,port:n.port||(n.protocol==="https:"?443:80),agent:u,headers:e.headers||{},key:e.key||"",cert:e.cert||"",ca:e.ca||"",timeout:a};t&&typeof e.rejectUnauthorized<"u"&&(l.rejectUnauthorized=e.rejectUnauthorized),e.compression&&(l.headers["accept-encoding"]="gzip,deflate");const f=t?ps:hs;return typeof e.beforeRequest=="function"&&(l=e.beforeRequest(l)),new Promise((p,c)=>{const g=f.request(l),E=e.data;var T=m=>{ot.enabled&&(m.req._header.split(`\r
`).forEach(N=>{ot("> %s",N)}),ot("< HTTP/%s %s %s",m.httpVersion,m.statusCode,m.statusMessage),Object.keys(m.headers).forEach(N=>{ot("< %s: %s",N,m.headers[N])})),p(m)},O=m=>{m.message+=`${r} ${Du(n)} failed.`,g.socket&&g.socket[Re]&&clearTimeout(g.socket[Re]),c(m)},F=m=>{g.abort(),O(m)};const v=function(m){const D=setTimeout(()=>{m[Re]&&(clearTimeout(m[Re]),m[Re]=null);var N=new Error,w=`ReadTimeout(${i})`;F(Vi(N,"RequestTimeout",w))},i);m[yn]=i,m[Re]=D,m[ds]=Date.now(),D.unref()};!E||typeof E=="string"||E instanceof Buffer?(Ie.enabled&&Ie(E?typeof E=="string"?E:`Buffer <ignored>, Buffer length: ${E.length}`:"<no request body>"),g.end(E)):typeof E.pipe=="function"&&(E.pipe(g),Ie.enabled&&Ie("<request body is a stream>"),E.once("error",m=>{F(Vi(m,"HttpX","Stream occor error"))})),g.on("timeout",()=>{var m=new Error;m.name="RequestTimeoutError",m.message=`ConnectTimeout: Connect ${s} failed.`,g.destroy(),c(m)}),g.on("response",T),g.on("error",O),g.once("socket",function(m){m.readyState==="opening"?m.once("connect",function(){v(m)}):v(m)})})};Ve.read=function(s,e){const n=ms(s);return new Promise((i,a)=>{const t=s.socket||s.client,r=()=>{const O=s.req;var F=new Error;return F.name="RequestTimeoutError",F.message=`ReadTimeout: ${t[yn]}. ${O.method} ${O.path} failed.`,F};let o;const u=t[Re];if(!u){a(r());return}const l=t[yn]-(Date.now()-t[ds]);if(clearTimeout(u),l<=0){a(r());return}o=setTimeout(function(){a(r())},l);var f,p,c,g=function(){n.removeListener("error",f),n.removeListener("data",p),n.removeListener("end",c),o&&clearTimeout(o)};const E=[];var T=0;p=function(O){E.push(O),T+=O.length},f=function(O){g(),a(O)},c=function(){g();var O=Buffer.concat(E,T);if(Ie(""),e){const F=O.toString(e);return Ie(F),i(F)}Ie.enabled&&Ie(O.toString()),i(O)},n.on("error",f),n.on("data",p),n.on("end",c)})};function Iu(s){return new Promise((e,n)=>{var i,a,t,r=function(){s.removeListener("error",t),s.removeListener("end",a),s.removeListener("readable",i)};i=function(){r(),e(!1)},a=function(){r(),e(!0)},t=function(o){r(),n(o)},s.once("readable",i),s.once("end",a),s.once("error",t)})}class gs{constructor(e,n,i,a){this.id=e,this.event=n,this.data=i,this.retry=a}}Ve.Event=gs;const zi="data:",Wi="event:",Hi="id:",Gi="retry:";function _u(s){for(let e=0;e<s.length;e++){const n=s.charAt(e);if(n<"0"||n>"9")return!1}return s.length>0}function xu(s,e){const n=s+e;let i=0;const a=[];for(let r=0;r<n.length-1;r++){const o=n[r],u=n[r+1];if(o===`
`&&u===`
`){const f=n.substring(i,r).split(`
`),p=new gs;f.forEach(c=>{if(c.startsWith(zi))p.data=c.substring(zi.length).trim();else if(c.startsWith(Wi))p.event=c.substring(Wi.length).trim();else if(c.startsWith(Hi))p.id=c.substring(Hi.length).trim();else if(c.startsWith(Gi)){const g=c.substring(Gi.length).trim();_u(g)&&(p.retry=parseInt(g,10))}else c.startsWith(":")}),a.push(p),i=r+2}}const t=n.substring(i);return[a,t]}Ve.readAsSSE=async function*(s){const e=ms(s),n=s.socket||s.client;clearTimeout(n[Re]);let i="";for(;;){if(await Iu(e))return;let t;for(;(t=e.read())!==null;){const[r,o]=xu(i,t.toString());if(i=o,r&&r.length>0)for(const u of r)yield u}}};var Nn={};(function(s){const e=Te,n=$e,i=Ae;s.loadJSONSync=function(a){var t=e.readFileSync(a,"utf8");t.charCodeAt(0)===65279&&(t=t.slice(1));try{return JSON.parse(t)}catch(r){throw r.message=a+": "+r.message,r}},s.encode=function(a,t){return typeof a!="string"&&(a=""+a),new Buffer(a,t)},s.makeHasher=function(a){return function(t,r){var o=i.createHash(a);return o.update(t),o.digest(r)}},s.createHash=s.makeHasher,s.md5=s.makeHasher("md5"),s.createHmac=function(a){return function(t,r,o){return i.createHmac(a,r).update(t).digest(o)}},s.sha1=s.createHmac("sha1"),s.random=function(a,t){return Math.floor(a+Math.random()*(t-a))},s.makeNonce=function(){var a=0,t;const r=n.hostname(),o=process.pid;return function(){var u=Math.floor(Math.random()*1e12);u===t?a++:a=0,t=u;var l=`${r}${o}${u}${a}`;return s.md5(l,"hex")}}(),s.pad2=function(a){return a<10?"0"+a:""+a},s.pad3=function(a){return a<10?"00"+a:a<100?"0"+a:""+a},s.getYYYYMMDD=function(a){var t=a.getFullYear(),r=s.pad2(a.getMonth()+1),o=s.pad2(a.getDate());return""+t+r+o},s.sleep=function(a){return new Promise(t=>{setTimeout(t,a)})},s.getIPv4=function(){for(var a=n.networkInterfaces(),t=Object.keys(a),r=0;r<t.length;r++)for(var o=t[r],u=a[o],l=0;l<u.length;l++){var f=u[l];if(!f.internal&&f.family==="IPv4")return f.address}return""},s.getMac=function(){for(var a=n.networkInterfaces(),t=Object.keys(a),r=0;r<t.length;r++)for(var o=t[r],u=a[o],l=0;l<u.length;l++){var f=u[l];if(!f.internal&&f.family==="IPv4")return f.mac}return"00:00:00:00:00:00"}})(Nn);var Ot={exports:{}},ys={exports:{}},vs={exports:{}};(function(s){(function(e){var n,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,t=Math.floor,r="[BigNumber Error] ",o=r+"Number primitive has more than 15 significant digits: ",u=1e14,l=14,f=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],c=1e7,g=1e9;function E(w){var A,b,h,C=z.prototype={constructor:z,toString:null,valueOf:null},x=new z(1),M=20,U=4,W=-7,H=21,J=-1e7,Y=1e7,be=!1,Oe=1,le=0,ue={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},we="0123456789abcdefghijklmnopqrstuvwxyz",Pe=!0;function z(d,_){var S,j,L,R,B,P,q,k,$=this;if(!($ instanceof z))return new z(d,_);if(_==null){if(d&&d._isBigNumber===!0){$.s=d.s,!d.c||d.e>Y?$.c=$.e=null:d.e<J?$.c=[$.e=0]:($.e=d.e,$.c=d.c.slice());return}if((P=typeof d=="number")&&d*0==0){if($.s=1/d<0?(d=-d,-1):1,d===~~d){for(R=0,B=d;B>=10;B/=10,R++);R>Y?$.c=$.e=null:($.e=R,$.c=[d]);return}k=String(d)}else{if(!i.test(k=String(d)))return h($,k,P);$.s=k.charCodeAt(0)==45?(k=k.slice(1),-1):1}(R=k.indexOf("."))>-1&&(k=k.replace(".","")),(B=k.search(/e/i))>0?(R<0&&(R=B),R+=+k.slice(B+1),k=k.substring(0,B)):R<0&&(R=k.length)}else{if(v(_,2,we.length,"Base"),_==10&&Pe)return $=new z(d),y($,M+$.e+1,U);if(k=String(d),P=typeof d=="number"){if(d*0!=0)return h($,k,P,_);if($.s=1/d<0?(k=k.slice(1),-1):1,z.DEBUG&&k.replace(/^0\.0*|\./,"").length>15)throw Error(o+d)}else $.s=k.charCodeAt(0)===45?(k=k.slice(1),-1):1;for(S=we.slice(0,_),R=B=0,q=k.length;B<q;B++)if(S.indexOf(j=k.charAt(B))<0){if(j=="."){if(B>R){R=q;continue}}else if(!L&&(k==k.toUpperCase()&&(k=k.toLowerCase())||k==k.toLowerCase()&&(k=k.toUpperCase()))){L=!0,B=-1,R=0;continue}return h($,String(d),P,_)}P=!1,k=b(k,_,10,$.s),(R=k.indexOf("."))>-1?k=k.replace(".",""):R=k.length}for(B=0;k.charCodeAt(B)===48;B++);for(q=k.length;k.charCodeAt(--q)===48;);if(k=k.slice(B,++q)){if(q-=B,P&&z.DEBUG&&q>15&&(d>f||d!==t(d)))throw Error(o+$.s*d);if((R=R-B-1)>Y)$.c=$.e=null;else if(R<J)$.c=[$.e=0];else{if($.e=R,$.c=[],B=(R+1)%l,R<0&&(B+=l),B<q){for(B&&$.c.push(+k.slice(0,B)),q-=l;B<q;)$.c.push(+k.slice(B,B+=l));B=l-(k=k.slice(B)).length}else B-=q;for(;B--;k+="0");$.c.push(+k)}}else $.c=[$.e=0]}z.clone=E,z.ROUND_UP=0,z.ROUND_DOWN=1,z.ROUND_CEIL=2,z.ROUND_FLOOR=3,z.ROUND_HALF_UP=4,z.ROUND_HALF_DOWN=5,z.ROUND_HALF_EVEN=6,z.ROUND_HALF_CEIL=7,z.ROUND_HALF_FLOOR=8,z.EUCLID=9,z.config=z.set=function(d){var _,S;if(d!=null)if(typeof d=="object"){if(d.hasOwnProperty(_="DECIMAL_PLACES")&&(S=d[_],v(S,0,g,_),M=S),d.hasOwnProperty(_="ROUNDING_MODE")&&(S=d[_],v(S,0,8,_),U=S),d.hasOwnProperty(_="EXPONENTIAL_AT")&&(S=d[_],S&&S.pop?(v(S[0],-g,0,_),v(S[1],0,g,_),W=S[0],H=S[1]):(v(S,-g,g,_),W=-(H=S<0?-S:S))),d.hasOwnProperty(_="RANGE"))if(S=d[_],S&&S.pop)v(S[0],-g,-1,_),v(S[1],1,g,_),J=S[0],Y=S[1];else if(v(S,-g,g,_),S)J=-(Y=S<0?-S:S);else throw Error(r+_+" cannot be zero: "+S);if(d.hasOwnProperty(_="CRYPTO"))if(S=d[_],S===!!S)if(S)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))be=S;else throw be=!S,Error(r+"crypto unavailable");else be=S;else throw Error(r+_+" not true or false: "+S);if(d.hasOwnProperty(_="MODULO_MODE")&&(S=d[_],v(S,0,9,_),Oe=S),d.hasOwnProperty(_="POW_PRECISION")&&(S=d[_],v(S,0,g,_),le=S),d.hasOwnProperty(_="FORMAT"))if(S=d[_],typeof S=="object")ue=S;else throw Error(r+_+" not an object: "+S);if(d.hasOwnProperty(_="ALPHABET"))if(S=d[_],typeof S=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(S))Pe=S.slice(0,10)=="0123456789",we=S;else throw Error(r+_+" invalid: "+S)}else throw Error(r+"Object expected: "+d);return{DECIMAL_PLACES:M,ROUNDING_MODE:U,EXPONENTIAL_AT:[W,H],RANGE:[J,Y],CRYPTO:be,MODULO_MODE:Oe,POW_PRECISION:le,FORMAT:ue,ALPHABET:we}},z.isBigNumber=function(d){if(!d||d._isBigNumber!==!0)return!1;if(!z.DEBUG)return!0;var _,S,j=d.c,L=d.e,R=d.s;e:if({}.toString.call(j)=="[object Array]"){if((R===1||R===-1)&&L>=-g&&L<=g&&L===t(L)){if(j[0]===0){if(L===0&&j.length===1)return!0;break e}if(_=(L+1)%l,_<1&&(_+=l),String(j[0]).length==_){for(_=0;_<j.length;_++)if(S=j[_],S<0||S>=u||S!==t(S))break e;if(S!==0)return!0}}}else if(j===null&&L===null&&(R===null||R===1||R===-1))return!0;throw Error(r+"Invalid BigNumber: "+d)},z.maximum=z.max=function(){return Qe(arguments,-1)},z.minimum=z.min=function(){return Qe(arguments,1)},z.random=function(){var d=9007199254740992,_=Math.random()*d&2097151?function(){return t(Math.random()*d)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(S){var j,L,R,B,P,q=0,k=[],$=new z(x);if(S==null?S=M:v(S,0,g),B=a(S/l),be)if(crypto.getRandomValues){for(j=crypto.getRandomValues(new Uint32Array(B*=2));q<B;)P=j[q]*131072+(j[q+1]>>>11),P>=9e15?(L=crypto.getRandomValues(new Uint32Array(2)),j[q]=L[0],j[q+1]=L[1]):(k.push(P%1e14),q+=2);q=B/2}else if(crypto.randomBytes){for(j=crypto.randomBytes(B*=7);q<B;)P=(j[q]&31)*281474976710656+j[q+1]*1099511627776+j[q+2]*4294967296+j[q+3]*16777216+(j[q+4]<<16)+(j[q+5]<<8)+j[q+6],P>=9e15?crypto.randomBytes(7).copy(j,q):(k.push(P%1e14),q+=7);q=B/7}else throw be=!1,Error(r+"crypto unavailable");if(!be)for(;q<B;)P=_(),P<9e15&&(k[q++]=P%1e14);for(B=k[--q],S%=l,B&&S&&(P=p[l-S],k[q]=t(B/P)*P);k[q]===0;k.pop(),q--);if(q<0)k=[R=0];else{for(R=-1;k[0]===0;k.splice(0,1),R-=l);for(q=1,P=k[0];P>=10;P/=10,q++);q<l&&(R-=l-q)}return $.e=R,$.c=k,$}}(),z.sum=function(){for(var d=1,_=arguments,S=new z(_[0]);d<_.length;)S=S.plus(_[d++]);return S},b=function(){var d="0123456789";function _(S,j,L,R){for(var B,P=[0],q,k=0,$=S.length;k<$;){for(q=P.length;q--;P[q]*=j);for(P[0]+=R.indexOf(S.charAt(k++)),B=0;B<P.length;B++)P[B]>L-1&&(P[B+1]==null&&(P[B+1]=0),P[B+1]+=P[B]/L|0,P[B]%=L)}return P.reverse()}return function(S,j,L,R,B){var P,q,k,$,V,G,K,re,oe=S.indexOf("."),ce=M,te=U;for(oe>=0&&($=le,le=0,S=S.replace(".",""),re=new z(j),G=re.pow(S.length-oe),le=$,re.c=_(N(O(G.c),G.e,"0"),10,L,d),re.e=re.c.length),K=_(S,j,L,B?(P=we,d):(P=d,we)),k=$=K.length;K[--$]==0;K.pop());if(!K[0])return P.charAt(0);if(oe<0?--k:(G.c=K,G.e=k,G.s=R,G=A(G,re,ce,te,L),K=G.c,V=G.r,k=G.e),q=k+ce+1,oe=K[q],$=L/2,V=V||q<0||K[q+1]!=null,V=te<4?(oe!=null||V)&&(te==0||te==(G.s<0?3:2)):oe>$||oe==$&&(te==4||V||te==6&&K[q-1]&1||te==(G.s<0?8:7)),q<1||!K[0])S=V?N(P.charAt(1),-ce,P.charAt(0)):P.charAt(0);else{if(K.length=q,V)for(--L;++K[--q]>L;)K[q]=0,q||(++k,K=[1].concat(K));for($=K.length;!K[--$];);for(oe=0,S="";oe<=$;S+=P.charAt(K[oe++]));S=N(S,k,P.charAt(0))}return S}}(),A=function(){function d(j,L,R){var B,P,q,k,$=0,V=j.length,G=L%c,K=L/c|0;for(j=j.slice();V--;)q=j[V]%c,k=j[V]/c|0,B=K*q+k*G,P=G*q+B%c*c+$,$=(P/R|0)+(B/c|0)+K*k,j[V]=P%R;return $&&(j=[$].concat(j)),j}function _(j,L,R,B){var P,q;if(R!=B)q=R>B?1:-1;else for(P=q=0;P<R;P++)if(j[P]!=L[P]){q=j[P]>L[P]?1:-1;break}return q}function S(j,L,R,B){for(var P=0;R--;)j[R]-=P,P=j[R]<L[R]?1:0,j[R]=P*B+j[R]-L[R];for(;!j[0]&&j.length>1;j.splice(0,1));}return function(j,L,R,B,P){var q,k,$,V,G,K,re,oe,ce,te,ne,pe,Ze,Nt,It,Ne,ze,Ce=j.s==L.s?1:-1,Ee=j.c,se=L.c;if(!Ee||!Ee[0]||!se||!se[0])return new z(!j.s||!L.s||(Ee?se&&Ee[0]==se[0]:!se)?NaN:Ee&&Ee[0]==0||!se?Ce*0:Ce/0);for(oe=new z(Ce),ce=oe.c=[],k=j.e-L.e,Ce=R+k+1,P||(P=u,k=T(j.e/l)-T(L.e/l),Ce=Ce/l|0),$=0;se[$]==(Ee[$]||0);$++);if(se[$]>(Ee[$]||0)&&k--,Ce<0)ce.push(1),V=!0;else{for(Nt=Ee.length,Ne=se.length,$=0,Ce+=2,G=t(P/(se[0]+1)),G>1&&(se=d(se,G,P),Ee=d(Ee,G,P),Ne=se.length,Nt=Ee.length),Ze=Ne,te=Ee.slice(0,Ne),ne=te.length;ne<Ne;te[ne++]=0);ze=se.slice(),ze=[0].concat(ze),It=se[0],se[1]>=P/2&&It++;do{if(G=0,q=_(se,te,Ne,ne),q<0){if(pe=te[0],Ne!=ne&&(pe=pe*P+(te[1]||0)),G=t(pe/It),G>1)for(G>=P&&(G=P-1),K=d(se,G,P),re=K.length,ne=te.length;_(K,te,re,ne)==1;)G--,S(K,Ne<re?ze:se,re,P),re=K.length,q=1;else G==0&&(q=G=1),K=se.slice(),re=K.length;if(re<ne&&(K=[0].concat(K)),S(te,K,ne,P),ne=te.length,q==-1)for(;_(se,te,Ne,ne)<1;)G++,S(te,Ne<ne?ze:se,ne,P),ne=te.length}else q===0&&(G++,te=[0]);ce[$++]=G,te[0]?te[ne++]=Ee[Ze]||0:(te=[Ee[Ze]],ne=1)}while((Ze++<Nt||te[0]!=null)&&Ce--);V=te[0]!=null,ce[0]||ce.splice(0,1)}if(P==u){for($=1,Ce=ce[0];Ce>=10;Ce/=10,$++);y(oe,R+(oe.e=$+k*l-1)+1,B,V)}else oe.e=k,oe.r=+V;return oe}}();function Xe(d,_,S,j){var L,R,B,P,q;if(S==null?S=U:v(S,0,8),!d.c)return d.toString();if(L=d.c[0],B=d.e,_==null)q=O(d.c),q=j==1||j==2&&(B<=W||B>=H)?D(q,B):N(q,B,"0");else if(d=y(new z(d),_,S),R=d.e,q=O(d.c),P=q.length,j==1||j==2&&(_<=R||R<=W)){for(;P<_;q+="0",P++);q=D(q,R)}else if(_-=B,q=N(q,R,"0"),R+1>P){if(--_>0)for(q+=".";_--;q+="0");}else if(_+=R-P,_>0)for(R+1==P&&(q+=".");_--;q+="0");return d.s<0&&L?"-"+q:q}function Qe(d,_){for(var S,j,L=1,R=new z(d[0]);L<d.length;L++)j=new z(d[L]),(!j.s||(S=F(R,j))===_||S===0&&R.s===_)&&(R=j);return R}function I(d,_,S){for(var j=1,L=_.length;!_[--L];_.pop());for(L=_[0];L>=10;L/=10,j++);return(S=j+S*l-1)>Y?d.c=d.e=null:S<J?d.c=[d.e=0]:(d.e=S,d.c=_),d}h=function(){var d=/^(-?)0([xbo])(?=\w[\w.]*$)/i,_=/^([^.]+)\.$/,S=/^\.([^.]+)$/,j=/^-?(Infinity|NaN)$/,L=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(R,B,P,q){var k,$=P?B:B.replace(L,"");if(j.test($))R.s=isNaN($)?null:$<0?-1:1;else{if(!P&&($=$.replace(d,function(V,G,K){return k=(K=K.toLowerCase())=="x"?16:K=="b"?2:8,!q||q==k?G:V}),q&&(k=q,$=$.replace(_,"$1").replace(S,"0.$1")),B!=$))return new z($,k);if(z.DEBUG)throw Error(r+"Not a"+(q?" base "+q:"")+" number: "+B);R.s=null}R.c=R.e=null}}();function y(d,_,S,j){var L,R,B,P,q,k,$,V=d.c,G=p;if(V){e:{for(L=1,P=V[0];P>=10;P/=10,L++);if(R=_-L,R<0)R+=l,B=_,q=V[k=0],$=t(q/G[L-B-1]%10);else if(k=a((R+1)/l),k>=V.length)if(j){for(;V.length<=k;V.push(0));q=$=0,L=1,R%=l,B=R-l+1}else break e;else{for(q=P=V[k],L=1;P>=10;P/=10,L++);R%=l,B=R-l+L,$=B<0?0:t(q/G[L-B-1]%10)}if(j=j||_<0||V[k+1]!=null||(B<0?q:q%G[L-B-1]),j=S<4?($||j)&&(S==0||S==(d.s<0?3:2)):$>5||$==5&&(S==4||j||S==6&&(R>0?B>0?q/G[L-B]:0:V[k-1])%10&1||S==(d.s<0?8:7)),_<1||!V[0])return V.length=0,j?(_-=d.e+1,V[0]=G[(l-_%l)%l],d.e=-_||0):V[0]=d.e=0,d;if(R==0?(V.length=k,P=1,k--):(V.length=k+1,P=G[l-R],V[k]=B>0?t(q/G[L-B]%G[B])*P:0),j)for(;;)if(k==0){for(R=1,B=V[0];B>=10;B/=10,R++);for(B=V[0]+=P,P=1;B>=10;B/=10,P++);R!=P&&(d.e++,V[0]==u&&(V[0]=1));break}else{if(V[k]+=P,V[k]!=u)break;V[k--]=0,P=1}for(R=V.length;V[--R]===0;V.pop());}d.e>Y?d.c=d.e=null:d.e<J&&(d.c=[d.e=0])}return d}function X(d){var _,S=d.e;return S===null?d.toString():(_=O(d.c),_=S<=W||S>=H?D(_,S):N(_,S,"0"),d.s<0?"-"+_:_)}return C.absoluteValue=C.abs=function(){var d=new z(this);return d.s<0&&(d.s=1),d},C.comparedTo=function(d,_){return F(this,new z(d,_))},C.decimalPlaces=C.dp=function(d,_){var S,j,L,R=this;if(d!=null)return v(d,0,g),_==null?_=U:v(_,0,8),y(new z(R),d+R.e+1,_);if(!(S=R.c))return null;if(j=((L=S.length-1)-T(this.e/l))*l,L=S[L])for(;L%10==0;L/=10,j--);return j<0&&(j=0),j},C.dividedBy=C.div=function(d,_){return A(this,new z(d,_),M,U)},C.dividedToIntegerBy=C.idiv=function(d,_){return A(this,new z(d,_),0,1)},C.exponentiatedBy=C.pow=function(d,_){var S,j,L,R,B,P,q,k,$,V=this;if(d=new z(d),d.c&&!d.isInteger())throw Error(r+"Exponent not an integer: "+X(d));if(_!=null&&(_=new z(_)),P=d.e>14,!V.c||!V.c[0]||V.c[0]==1&&!V.e&&V.c.length==1||!d.c||!d.c[0])return $=new z(Math.pow(+X(V),P?d.s*(2-m(d)):+X(d))),_?$.mod(_):$;if(q=d.s<0,_){if(_.c?!_.c[0]:!_.s)return new z(NaN);j=!q&&V.isInteger()&&_.isInteger(),j&&(V=V.mod(_))}else{if(d.e>9&&(V.e>0||V.e<-1||(V.e==0?V.c[0]>1||P&&V.c[1]>=24e7:V.c[0]<8e13||P&&V.c[0]<=9999975e7)))return R=V.s<0&&m(d)?-0:0,V.e>-1&&(R=1/R),new z(q?1/R:R);le&&(R=a(le/l+2))}for(P?(S=new z(.5),q&&(d.s=1),k=m(d)):(L=Math.abs(+X(d)),k=L%2),$=new z(x);;){if(k){if($=$.times(V),!$.c)break;R?$.c.length>R&&($.c.length=R):j&&($=$.mod(_))}if(L){if(L=t(L/2),L===0)break;k=L%2}else if(d=d.times(S),y(d,d.e+1,1),d.e>14)k=m(d);else{if(L=+X(d),L===0)break;k=L%2}V=V.times(V),R?V.c&&V.c.length>R&&(V.c.length=R):j&&(V=V.mod(_))}return j?$:(q&&($=x.div($)),_?$.mod(_):R?y($,le,U,B):$)},C.integerValue=function(d){var _=new z(this);return d==null?d=U:v(d,0,8),y(_,_.e+1,d)},C.isEqualTo=C.eq=function(d,_){return F(this,new z(d,_))===0},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(d,_){return F(this,new z(d,_))>0},C.isGreaterThanOrEqualTo=C.gte=function(d,_){return(_=F(this,new z(d,_)))===1||_===0},C.isInteger=function(){return!!this.c&&T(this.e/l)>this.c.length-2},C.isLessThan=C.lt=function(d,_){return F(this,new z(d,_))<0},C.isLessThanOrEqualTo=C.lte=function(d,_){return(_=F(this,new z(d,_)))===-1||_===0},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&this.c[0]==0},C.minus=function(d,_){var S,j,L,R,B=this,P=B.s;if(d=new z(d,_),_=d.s,!P||!_)return new z(NaN);if(P!=_)return d.s=-_,B.plus(d);var q=B.e/l,k=d.e/l,$=B.c,V=d.c;if(!q||!k){if(!$||!V)return $?(d.s=-_,d):new z(V?B:NaN);if(!$[0]||!V[0])return V[0]?(d.s=-_,d):new z($[0]?B:U==3?-0:0)}if(q=T(q),k=T(k),$=$.slice(),P=q-k){for((R=P<0)?(P=-P,L=$):(k=q,L=V),L.reverse(),_=P;_--;L.push(0));L.reverse()}else for(j=(R=(P=$.length)<(_=V.length))?P:_,P=_=0;_<j;_++)if($[_]!=V[_]){R=$[_]<V[_];break}if(R&&(L=$,$=V,V=L,d.s=-d.s),_=(j=V.length)-(S=$.length),_>0)for(;_--;$[S++]=0);for(_=u-1;j>P;){if($[--j]<V[j]){for(S=j;S&&!$[--S];$[S]=_);--$[S],$[j]+=u}$[j]-=V[j]}for(;$[0]==0;$.splice(0,1),--k);return $[0]?I(d,$,k):(d.s=U==3?-1:1,d.c=[d.e=0],d)},C.modulo=C.mod=function(d,_){var S,j,L=this;return d=new z(d,_),!L.c||!d.s||d.c&&!d.c[0]?new z(NaN):!d.c||L.c&&!L.c[0]?new z(L):(Oe==9?(j=d.s,d.s=1,S=A(L,d,0,3),d.s=j,S.s*=j):S=A(L,d,0,Oe),d=L.minus(S.times(d)),!d.c[0]&&Oe==1&&(d.s=L.s),d)},C.multipliedBy=C.times=function(d,_){var S,j,L,R,B,P,q,k,$,V,G,K,re,oe,ce,te=this,ne=te.c,pe=(d=new z(d,_)).c;if(!ne||!pe||!ne[0]||!pe[0])return!te.s||!d.s||ne&&!ne[0]&&!pe||pe&&!pe[0]&&!ne?d.c=d.e=d.s=null:(d.s*=te.s,!ne||!pe?d.c=d.e=null:(d.c=[0],d.e=0)),d;for(j=T(te.e/l)+T(d.e/l),d.s*=te.s,q=ne.length,V=pe.length,q<V&&(re=ne,ne=pe,pe=re,L=q,q=V,V=L),L=q+V,re=[];L--;re.push(0));for(oe=u,ce=c,L=V;--L>=0;){for(S=0,G=pe[L]%ce,K=pe[L]/ce|0,B=q,R=L+B;R>L;)k=ne[--B]%ce,$=ne[B]/ce|0,P=K*k+$*G,k=G*k+P%ce*ce+re[R]+S,S=(k/oe|0)+(P/ce|0)+K*$,re[R--]=k%oe;re[R]=S}return S?++j:re.splice(0,1),I(d,re,j)},C.negated=function(){var d=new z(this);return d.s=-d.s||null,d},C.plus=function(d,_){var S,j=this,L=j.s;if(d=new z(d,_),_=d.s,!L||!_)return new z(NaN);if(L!=_)return d.s=-_,j.minus(d);var R=j.e/l,B=d.e/l,P=j.c,q=d.c;if(!R||!B){if(!P||!q)return new z(L/0);if(!P[0]||!q[0])return q[0]?d:new z(P[0]?j:L*0)}if(R=T(R),B=T(B),P=P.slice(),L=R-B){for(L>0?(B=R,S=q):(L=-L,S=P),S.reverse();L--;S.push(0));S.reverse()}for(L=P.length,_=q.length,L-_<0&&(S=q,q=P,P=S,_=L),L=0;_;)L=(P[--_]=P[_]+q[_]+L)/u|0,P[_]=u===P[_]?0:P[_]%u;return L&&(P=[L].concat(P),++B),I(d,P,B)},C.precision=C.sd=function(d,_){var S,j,L,R=this;if(d!=null&&d!==!!d)return v(d,1,g),_==null?_=U:v(_,0,8),y(new z(R),d,_);if(!(S=R.c))return null;if(L=S.length-1,j=L*l+1,L=S[L]){for(;L%10==0;L/=10,j--);for(L=S[0];L>=10;L/=10,j++);}return d&&R.e+1>j&&(j=R.e+1),j},C.shiftedBy=function(d){return v(d,-f,f),this.times("1e"+d)},C.squareRoot=C.sqrt=function(){var d,_,S,j,L,R=this,B=R.c,P=R.s,q=R.e,k=M+4,$=new z("0.5");if(P!==1||!B||!B[0])return new z(!P||P<0&&(!B||B[0])?NaN:B?R:1/0);if(P=Math.sqrt(+X(R)),P==0||P==1/0?(_=O(B),(_.length+q)%2==0&&(_+="0"),P=Math.sqrt(+_),q=T((q+1)/2)-(q<0||q%2),P==1/0?_="5e"+q:(_=P.toExponential(),_=_.slice(0,_.indexOf("e")+1)+q),S=new z(_)):S=new z(P+""),S.c[0]){for(q=S.e,P=q+k,P<3&&(P=0);;)if(L=S,S=$.times(L.plus(A(R,L,k,1))),O(L.c).slice(0,P)===(_=O(S.c)).slice(0,P))if(S.e<q&&--P,_=_.slice(P-3,P+1),_=="9999"||!j&&_=="4999"){if(!j&&(y(L,L.e+M+2,0),L.times(L).eq(R))){S=L;break}k+=4,P+=4,j=1}else{(!+_||!+_.slice(1)&&_.charAt(0)=="5")&&(y(S,S.e+M+2,1),d=!S.times(S).eq(R));break}}return y(S,S.e+M+1,U,d)},C.toExponential=function(d,_){return d!=null&&(v(d,0,g),d++),Xe(this,d,_,1)},C.toFixed=function(d,_){return d!=null&&(v(d,0,g),d=d+this.e+1),Xe(this,d,_)},C.toFormat=function(d,_,S){var j,L=this;if(S==null)d!=null&&_&&typeof _=="object"?(S=_,_=null):d&&typeof d=="object"?(S=d,d=_=null):S=ue;else if(typeof S!="object")throw Error(r+"Argument not an object: "+S);if(j=L.toFixed(d,_),L.c){var R,B=j.split("."),P=+S.groupSize,q=+S.secondaryGroupSize,k=S.groupSeparator||"",$=B[0],V=B[1],G=L.s<0,K=G?$.slice(1):$,re=K.length;if(q&&(R=P,P=q,q=R,re-=R),P>0&&re>0){for(R=re%P||P,$=K.substr(0,R);R<re;R+=P)$+=k+K.substr(R,P);q>0&&($+=k+K.slice(R)),G&&($="-"+$)}j=V?$+(S.decimalSeparator||"")+((q=+S.fractionGroupSize)?V.replace(new RegExp("\\d{"+q+"}\\B","g"),"$&"+(S.fractionGroupSeparator||"")):V):$}return(S.prefix||"")+j+(S.suffix||"")},C.toFraction=function(d){var _,S,j,L,R,B,P,q,k,$,V,G,K=this,re=K.c;if(d!=null&&(P=new z(d),!P.isInteger()&&(P.c||P.s!==1)||P.lt(x)))throw Error(r+"Argument "+(P.isInteger()?"out of range: ":"not an integer: ")+X(P));if(!re)return new z(K);for(_=new z(x),k=S=new z(x),j=q=new z(x),G=O(re),R=_.e=G.length-K.e-1,_.c[0]=p[(B=R%l)<0?l+B:B],d=!d||P.comparedTo(_)>0?R>0?_:k:P,B=Y,Y=1/0,P=new z(G),q.c[0]=0;$=A(P,_,0,1),L=S.plus($.times(j)),L.comparedTo(d)!=1;)S=j,j=L,k=q.plus($.times(L=k)),q=L,_=P.minus($.times(L=_)),P=L;return L=A(d.minus(S),j,0,1),q=q.plus(L.times(k)),S=S.plus(L.times(j)),q.s=k.s=K.s,R=R*2,V=A(k,j,R,U).minus(K).abs().comparedTo(A(q,S,R,U).minus(K).abs())<1?[k,j]:[q,S],Y=B,V},C.toNumber=function(){return+X(this)},C.toPrecision=function(d,_){return d!=null&&v(d,1,g),Xe(this,d,_,2)},C.toString=function(d){var _,S=this,j=S.s,L=S.e;return L===null?j?(_="Infinity",j<0&&(_="-"+_)):_="NaN":(d==null?_=L<=W||L>=H?D(O(S.c),L):N(O(S.c),L,"0"):d===10&&Pe?(S=y(new z(S),M+L+1,U),_=N(O(S.c),S.e,"0")):(v(d,2,we.length,"Base"),_=b(N(O(S.c),L,"0"),10,d,j,!0)),j<0&&S.c[0]&&(_="-"+_)),_},C.valueOf=C.toJSON=function(){return X(this)},C._isBigNumber=!0,w!=null&&z.set(w),z}function T(w){var A=w|0;return w>0||w===A?A:A-1}function O(w){for(var A,b,h=1,C=w.length,x=w[0]+"";h<C;){for(A=w[h++]+"",b=l-A.length;b--;A="0"+A);x+=A}for(C=x.length;x.charCodeAt(--C)===48;);return x.slice(0,C+1||1)}function F(w,A){var b,h,C=w.c,x=A.c,M=w.s,U=A.s,W=w.e,H=A.e;if(!M||!U)return null;if(b=C&&!C[0],h=x&&!x[0],b||h)return b?h?0:-U:M;if(M!=U)return M;if(b=M<0,h=W==H,!C||!x)return h?0:!C^b?1:-1;if(!h)return W>H^b?1:-1;for(U=(W=C.length)<(H=x.length)?W:H,M=0;M<U;M++)if(C[M]!=x[M])return C[M]>x[M]^b?1:-1;return W==H?0:W>H^b?1:-1}function v(w,A,b,h){if(w<A||w>b||w!==t(w))throw Error(r+(h||"Argument")+(typeof w=="number"?w<A||w>b?" out of range: ":" not an integer: ":" not a primitive number: ")+String(w))}function m(w){var A=w.c.length-1;return T(w.e/l)==A&&w.c[A]%2!=0}function D(w,A){return(w.length>1?w.charAt(0)+"."+w.slice(1):w)+(A<0?"e":"e+")+A}function N(w,A,b){var h,C;if(A<0){for(C=b+".";++A;C+=b);w=C+w}else if(h=w.length,++A>h){for(C=b,A-=h;--A;C+=b);w+=C}else A<h&&(w=w.slice(0,A)+"."+w.slice(A));return w}n=E(),n.default=n.BigNumber=n,s.exports?s.exports=n:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=n)})(Z)})(vs);var ws=vs.exports;(function(s){var e=ws,n=s.exports;(function(){var i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a,t,r={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},o;function u(f){return i.lastIndex=0,i.test(f)?'"'+f.replace(i,function(p){var c=r[p];return typeof c=="string"?c:"\\u"+("0000"+p.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function l(f,p){var c,g,E,T,O=a,F,v=p[f],m=v!=null&&(v instanceof e||e.isBigNumber(v));switch(v&&typeof v=="object"&&typeof v.toJSON=="function"&&(v=v.toJSON(f)),typeof o=="function"&&(v=o.call(p,f,v)),typeof v){case"string":return m?v:u(v);case"number":return isFinite(v)?String(v):"null";case"boolean":case"null":case"bigint":return String(v);case"object":if(!v)return"null";if(a+=t,F=[],Object.prototype.toString.apply(v)==="[object Array]"){for(T=v.length,c=0;c<T;c+=1)F[c]=l(c,v)||"null";return E=F.length===0?"[]":a?`[
`+a+F.join(`,
`+a)+`
`+O+"]":"["+F.join(",")+"]",a=O,E}if(o&&typeof o=="object")for(T=o.length,c=0;c<T;c+=1)typeof o[c]=="string"&&(g=o[c],E=l(g,v),E&&F.push(u(g)+(a?": ":":")+E));else Object.keys(v).forEach(function(D){var N=l(D,v);N&&F.push(u(D)+(a?": ":":")+N)});return E=F.length===0?"{}":a?`{
`+a+F.join(`,
`+a)+`
`+O+"}":"{"+F.join(",")+"}",a=O,E}}typeof n.stringify!="function"&&(n.stringify=function(f,p,c){var g;if(a="",t="",typeof c=="number")for(g=0;g<c;g+=1)t+=" ";else typeof c=="string"&&(t=c);if(o=p,p&&typeof p!="function"&&(typeof p!="object"||typeof p.length!="number"))throw new Error("JSON.stringify");return l("",{"":f})})})()})(ys);var Fu=ys.exports,st=null;const Su=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,Pu=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;var Lu=function(s){var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(s!=null){if(s.strict===!0&&(e.strict=!0),s.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=s.alwaysParseAsBig===!0?s.alwaysParseAsBig:!1,e.useNativeBigInt=s.useNativeBigInt===!0?s.useNativeBigInt:!1,typeof s.constructorAction<"u")if(s.constructorAction==="error"||s.constructorAction==="ignore"||s.constructorAction==="preserve")e.constructorAction=s.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${s.constructorAction}`);if(typeof s.protoAction<"u")if(s.protoAction==="error"||s.protoAction==="ignore"||s.protoAction==="preserve")e.protoAction=s.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${s.protoAction}`)}var n,i,a={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},t,r=function(T){throw{name:"SyntaxError",message:T,at:n,text:t}},o=function(T){return T&&T!==i&&r("Expected '"+T+"' instead of '"+i+"'"),i=t.charAt(n),n+=1,i},u=function(){var T,O="";for(i==="-"&&(O="-",o("-"));i>="0"&&i<="9";)O+=i,o();if(i===".")for(O+=".";o()&&i>="0"&&i<="9";)O+=i;if(i==="e"||i==="E")for(O+=i,o(),(i==="-"||i==="+")&&(O+=i,o());i>="0"&&i<="9";)O+=i,o();if(T=+O,!isFinite(T))r("Bad number");else return st==null&&(st=ws),O.length>15?e.storeAsString?O:e.useNativeBigInt?BigInt(O):new st(O):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(T):new st(T):T},l=function(){var T,O,F="",v;if(i==='"')for(var m=n;o();){if(i==='"')return n-1>m&&(F+=t.substring(m,n-1)),o(),F;if(i==="\\"){if(n-1>m&&(F+=t.substring(m,n-1)),o(),i==="u"){for(v=0,O=0;O<4&&(T=parseInt(o(),16),!!isFinite(T));O+=1)v=v*16+T;F+=String.fromCharCode(v)}else if(typeof a[i]=="string")F+=a[i];else break;m=n}}r("Bad string")},f=function(){for(;i&&i<=" ";)o()},p=function(){switch(i){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null}r("Unexpected '"+i+"'")},c,g=function(){var T=[];if(i==="["){if(o("["),f(),i==="]")return o("]"),T;for(;i;){if(T.push(c()),f(),i==="]")return o("]"),T;o(","),f()}}r("Bad array")},E=function(){var T,O=Object.create(null);if(i==="{"){if(o("{"),f(),i==="}")return o("}"),O;for(;i;){if(T=l(),f(),o(":"),e.strict===!0&&Object.hasOwnProperty.call(O,T)&&r('Duplicate key "'+T+'"'),Su.test(T)===!0?e.protoAction==="error"?r("Object contains forbidden prototype property"):e.protoAction==="ignore"?c():O[T]=c():Pu.test(T)===!0?e.constructorAction==="error"?r("Object contains forbidden constructor property"):e.constructorAction==="ignore"?c():O[T]=c():O[T]=c(),f(),i==="}")return o("}"),O;o(","),f()}}r("Bad object")};return c=function(){switch(f(),i){case"{":return E();case"[":return g();case'"':return l();case"-":return u();default:return i>="0"&&i<="9"?u():p()}},function(T,O){var F;return t=T+"",n=0,i=" ",F=c(),f(),i&&r("Syntax error"),typeof O=="function"?function v(m,D){var N,w=m[D];return w&&typeof w=="object"&&Object.keys(w).forEach(function(A){N=v(w,A),N!==void 0?w[A]=N:delete w[A]}),O.call(m,D,w)}({"":F},""):F}},Mu=Lu,Es=Fu.stringify,Ts=Mu;Ot.exports=function(s){return{parse:Ts(s),stringify:Es}};Ot.exports.parse=Ts();Ot.exports.stringify=Es;var bs=Ot.exports,Ct={};const Ru="@alicloud/pop-core",qu="1.8.0",ju="AliCloud POP SDK core",$u="index.js",ku="lib/rpc.d.ts",Bu={lint:"eslint --fix lib test",test:"mocha -R spec test/*.test.js","test-cov":"nyc -r=html -r=text -r=lcov mocha -t 3000 -R spec test/*.test.js","test-integration":"mocha -R spec test/*.integration.js",ci:"npm run lint && npm run test-cov"},Uu=["Aliyun","AliCloud","OpenAPI","POP","SDK","Core"],Xu="Jackson Tian",Vu="MIT",zu={debug:"^3.1.0",httpx:"^2.1.2","json-bigint":"^1.0.0",kitx:"^1.2.1",xml2js:"^0.5.0"},Wu=["lib","index.js"],Hu={eslint:"^6.6.0","expect.js":"^0.3.1",mocha:"^4",muk:"^0.5.3",nyc:"^12.0.2",rewire:"^4.0.1"},Gu={test:"test"},Ku={node:">=8.0.0"},Yu={type:"git",url:"git+https://github.com/aliyun/openapi-core-nodejs-sdk.git"},Ju={url:"https://github.com/aliyun/openapi-core-nodejs-sdk/issues"},Qu="https://github.com/aliyun/openapi-core-nodejs-sdk#readme",Zu={name:Ru,version:qu,description:ju,main:$u,types:ku,scripts:Bu,keywords:Uu,author:Xu,license:Vu,dependencies:zu,files:Wu,devDependencies:Hu,directories:Gu,engines:Ku,repository:Yu,bugs:Ju,homepage:Qu},Ki=$e,vn=Zu;Ct.DEFAULT_UA=`AlibabaCloud (${Ki.platform()}; ${Ki.arch()}) Node.js/${process.version} Core/${vn.version}`;Ct.DEFAULT_CLIENT=`Node.js(${process.version}), ${vn.name}: ${vn.version}`;const Ge=Tn,Yi=Ve,qe=Nn,ec=bs,Ji=Ct;function Os(s){return s.slice(0,1).toUpperCase()+s.slice(1)}function tc(s){for(var e=Object.keys(s),n={},i=0;i<e.length;i++){var a=e[i];n[Os(a)]=s[a]}return n}function Qi(){var s=new Date,e=s.getUTCFullYear(),n=qe.pad2(s.getUTCMonth()+1),i=qe.pad2(s.getUTCDate()),a=qe.pad2(s.getUTCHours()),t=qe.pad2(s.getUTCMinutes()),r=qe.pad2(s.getUTCSeconds());return`${e}-${n}-${i}T${a}:${t}:${r}Z`}function Je(s){var e=encodeURIComponent(s);return e.replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function wn(s,e,n){for(var i=0;i<n.length;i++){var a=n[i];if(Array.isArray(a))wn(s,`${e}.${i+1}`,a);else if(a&&typeof a=="object"){const r=Object.keys(a);for(var t=0;t<r.length;t++)Array.isArray(a[r[t]])?wn(s,`${e}.${i+1}.${r[t]}`,a[r[t]]):s[`${e}.${i+1}.${r[t]}`]=a[r[t]]}else s[`${e}.${i+1}`]=a}}function rc(s){var e={},n=Object.keys(s);for(let t=0;t<n.length;t++){var i=n[t],a=s[i];Array.isArray(a)?wn(e,i,a):e[i]=a}return e}function nc(s){var e=[],n=rc(s),i=Object.keys(n).sort();for(let r=0;r<i.length;r++){var a=i[r],t=n[a];e.push([Je(a),Je(t)])}return e}function Ir(s){for(var e=[],n=0;n<s.length;n++){var[i,a]=s[n];e.push(i+"="+a)}return e.join("&")}let ic=class{constructor(e,n){if(Ge(e,'must pass "config"'),Ge(e.endpoint,'must pass "config.endpoint"'),!e.endpoint.startsWith("https://")&&!e.endpoint.startsWith("http://"))throw new Error(`"config.endpoint" must starts with 'https://' or 'http://'.`);if(Ge(e.apiVersion,'must pass "config.apiVersion"'),e.credentialsProvider){if(typeof e.credentialsProvider.getCredentials!="function")throw new Error('must pass "config.credentialsProvider" with function "getCredentials()"');this.credentialsProvider=e.credentialsProvider}else{Ge(e.accessKeyId,'must pass "config.accessKeyId"');var i=e.secretAccessKey||e.accessKeySecret;Ge(i,'must pass "config.accessKeySecret"'),this.accessKeyId=e.accessKeyId,this.accessKeySecret=i,this.securityToken=e.securityToken,this.credentialsProvider={getCredentials:async()=>({accessKeyId:e.accessKeyId,accessKeySecret:i,securityToken:e.securityToken})}}if(e.endpoint.endsWith("/")&&(e.endpoint=e.endpoint.slice(0,-1)),this.endpoint=e.endpoint,this.apiVersion=e.apiVersion,this.verbose=n===!0,this.codes=new Set([200,"200","OK","Success","success"]),e.codes)for(var a of e.codes)this.codes.add(a);this.opts=e.opts||{};var t=this.endpoint.startsWith("https://")?gt:mt;this.keepAliveAgent=new t.Agent({keepAlive:!0,keepAliveMsecs:3e3})}async request(e,n={},i={}){const a=await this.credentialsProvider.getCredentials();i=Object.assign({headers:{"x-sdk-client":Ji.DEFAULT_CLIENT,"user-agent":Ji.DEFAULT_UA,"x-acs-action":e,"x-acs-version":this.apiVersion}},this.opts,i),i.formatAction!==!1&&(e=Os(e)),i.formatParams!==!1&&(n=tc(n));const t={Format:"JSON",Timestamp:Qi(),Version:this.apiVersion};a&&a.accessKeyId&&a.accessKeySecret&&(t.SignatureMethod="HMAC-SHA1",t.SignatureVersion="1.0",t.SignatureNonce=qe.makeNonce(),t.AccessKeyId=a.accessKeyId,a.securityToken&&(t.SecurityToken=a.securityToken)),n=Object.assign({Action:e},t,n);const r=(i.method||"GET").toUpperCase(),o=nc(n);if(a&&a.accessKeyId&&a.accessKeySecret){const g=Ir(o),E=`${r}&${Je("/")}&${Je(g)}`,T=a.accessKeySecret+"&",O=qe.sha1(E,T,"base64");o.push(["Signature",Je(O)])}const u=i.method==="POST"?`${this.endpoint}/`:`${this.endpoint}/?${Ir(o)}`,l={url:u,request:null,response:null};i&&!i.agent&&(i.agent=this.keepAliveAgent),i.method==="POST"&&(i.headers=i.headers||{},i.headers["content-type"]="application/x-www-form-urlencoded",i.data=Ir(o));const f=await Yi.request(u,i);l.request={headers:f.req.getHeaders?f.req.getHeaders():f.req._headers},l.response={statusCode:f.statusCode,headers:f.headers};const p=await Yi.read(f),c=ec.parse(p);if(c.Code&&!this.codes.has(c.Code)){const g=new Error(`${c.Message}, URL: ${u}`);throw g.name=c.Code+"Error",g.data=c,g.code=c.Code,g.url=u,g.entry=l,g}return this.verbose?[c,l]:c}_buildParams(){const e={Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureNonce:qe.makeNonce(),SignatureVersion:"1.0",Timestamp:Qi(),AccessKeyId:this.accessKeyId,Version:this.apiVersion};return this.securityToken&&(e.SecurityToken=this.securityToken),e}};var Cs=ic,Le={},_r={},Zi;function In(){return Zi||(Zi=1,(function(){_r.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(Z)),_r}var xr={},_e={},xe={},eo;function Se(){return eo||(eo=1,(function(){var s,e,n,i,a,t,r,o=[].slice,u={}.hasOwnProperty;s=function(){var l,f,p,c,g,E;if(E=arguments[0],g=2<=arguments.length?o.call(arguments,1):[],a(Object.assign))Object.assign.apply(null,arguments);else for(l=0,p=g.length;l<p;l++)if(c=g[l],c!=null)for(f in c)u.call(c,f)&&(E[f]=c[f]);return E},a=function(l){return!!l&&Object.prototype.toString.call(l)==="[object Function]"},t=function(l){var f;return!!l&&((f=typeof l)=="function"||f==="object")},n=function(l){return a(Array.isArray)?Array.isArray(l):Object.prototype.toString.call(l)==="[object Array]"},i=function(l){var f;if(n(l))return!l.length;for(f in l)if(u.call(l,f))return!1;return!0},r=function(l){var f,p;return t(l)&&(p=Object.getPrototypeOf(l))&&(f=p.constructor)&&typeof f=="function"&&f instanceof f&&Function.prototype.toString.call(f)===Function.prototype.toString.call(Object)},e=function(l){return a(l.valueOf)?l.valueOf():l},xe.assign=s,xe.isFunction=a,xe.isObject=t,xe.isArray=n,xe.isEmpty=i,xe.isPlainObject=r,xe.getValue=e}).call(Z)),xe}var Fr={exports:{}},to;function Ds(){return to||(to=1,(function(){Fr.exports=function(){function s(){}return s.prototype.hasFeature=function(e,n){return!0},s.prototype.createDocumentType=function(e,n,i){throw new Error("This DOM method is not implemented.")},s.prototype.createDocument=function(e,n,i){throw new Error("This DOM method is not implemented.")},s.prototype.createHTMLDocument=function(e){throw new Error("This DOM method is not implemented.")},s.prototype.getFeature=function(e,n){throw new Error("This DOM method is not implemented.")},s}()}).call(Z)),Fr.exports}var Sr={exports:{}},Pr={exports:{}},Lr={exports:{}},ro;function oc(){return ro||(ro=1,(function(){Lr.exports=function(){function s(){}return s.prototype.handleError=function(e){throw new Error(e)},s}()}).call(Z)),Lr.exports}var Mr={exports:{}},no;function sc(){return no||(no=1,(function(){Mr.exports=function(){function s(e){this.arr=e||[]}return Object.defineProperty(s.prototype,"length",{get:function(){return this.arr.length}}),s.prototype.item=function(e){return this.arr[e]||null},s.prototype.contains=function(e){return this.arr.indexOf(e)!==-1},s}()}).call(Z)),Mr.exports}var io;function ac(){return io||(io=1,(function(){var s,e;s=oc(),e=sc(),Pr.exports=function(){function n(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new s,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(n.prototype,"parameterNames",{get:function(){return new e(Object.keys(this.defaultParams))}}),n.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},n.prototype.canSetParameter=function(i,a){return!0},n.prototype.setParameter=function(i,a){return a!=null?this.params[i]=a:delete this.params[i]},n}()}).call(Z)),Pr.exports}var Rr={exports:{}},qr={exports:{}},jr={exports:{}},oo;function ae(){return oo||(oo=1,(function(){jr.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(Z)),jr.exports}var $r={exports:{}},so;function As(){return so||(so=1,(function(){var s;s=ae(),De(),$r.exports=function(){function e(n,i,a){if(this.parent=n,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),i==null)throw new Error("Missing attribute name. "+this.debugInfo(i));this.name=this.stringify.name(i),this.value=this.stringify.attValue(a),this.type=s.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(n){return this.value=n||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(n){return this.options.writer.attribute(this,this.options.writer.filterOptions(n))},e.prototype.debugInfo=function(n){return n=n||this.name,n==null?"parent: <"+this.parent.name+">":"attribute: {"+n+"}, parent: <"+this.parent.name+">"},e.prototype.isEqualNode=function(n){return!(n.namespaceURI!==this.namespaceURI||n.prefix!==this.prefix||n.localName!==this.localName||n.value!==this.value)},e}()}).call(Z)),$r.exports}var kr={exports:{}},ao;function _n(){return ao||(ao=1,(function(){kr.exports=function(){function s(e){this.nodes=e}return Object.defineProperty(s.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),s.prototype.clone=function(){return this.nodes=null},s.prototype.getNamedItem=function(e){return this.nodes[e]},s.prototype.setNamedItem=function(e){var n;return n=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,n||null},s.prototype.removeNamedItem=function(e){var n;return n=this.nodes[e],delete this.nodes[e],n||null},s.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},s.prototype.getNamedItemNS=function(e,n){throw new Error("This DOM method is not implemented.")},s.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},s.prototype.removeNamedItemNS=function(e,n){throw new Error("This DOM method is not implemented.")},s}()}).call(Z)),kr.exports}var uo;function xn(){return uo||(uo=1,(function(){var s,e,n,i,a,t,r,o,u=function(f,p){for(var c in p)l.call(p,c)&&(f[c]=p[c]);function g(){this.constructor=f}return g.prototype=p.prototype,f.prototype=new g,f.__super__=p.prototype,f},l={}.hasOwnProperty;o=Se(),r=o.isObject,t=o.isFunction,a=o.getValue,i=De(),s=ae(),e=As(),n=_n(),qr.exports=function(f){u(p,f);function p(c,g,E){var T,O,F,v;if(p.__super__.constructor.call(this,c),g==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(g),this.type=s.Element,this.attribs={},this.schemaTypeInfo=null,E!=null&&this.attribute(E),c.type===s.Document&&(this.isRoot=!0,this.documentObject=c,c.rootObject=this,c.children)){for(v=c.children,O=0,F=v.length;O<F;O++)if(T=v[O],T.type===s.DocType){T.name=this.name;break}}}return Object.defineProperty(p.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(p.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(p.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(p.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(p.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(p.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(p.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(p.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new n(this.attribs)),this.attributeMap}}),p.prototype.clone=function(){var c,g,E,T;E=Object.create(this),E.isRoot&&(E.documentObject=null),E.attribs={},T=this.attribs;for(g in T)l.call(T,g)&&(c=T[g],E.attribs[g]=c.clone());return E.children=[],this.children.forEach(function(O){var F;return F=O.clone(),F.parent=E,E.children.push(F)}),E},p.prototype.attribute=function(c,g){var E,T;if(c!=null&&(c=a(c)),r(c))for(E in c)l.call(c,E)&&(T=c[E],this.attribute(E,T));else t(g)&&(g=g.apply()),this.options.keepNullAttributes&&g==null?this.attribs[c]=new e(this,c,""):g!=null&&(this.attribs[c]=new e(this,c,g));return this},p.prototype.removeAttribute=function(c){var g,E,T;if(c==null)throw new Error("Missing attribute name. "+this.debugInfo());if(c=a(c),Array.isArray(c))for(E=0,T=c.length;E<T;E++)g=c[E],delete this.attribs[g];else delete this.attribs[c];return this},p.prototype.toString=function(c){return this.options.writer.element(this,this.options.writer.filterOptions(c))},p.prototype.att=function(c,g){return this.attribute(c,g)},p.prototype.a=function(c,g){return this.attribute(c,g)},p.prototype.getAttribute=function(c){return this.attribs.hasOwnProperty(c)?this.attribs[c].value:null},p.prototype.setAttribute=function(c,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getAttributeNode=function(c){return this.attribs.hasOwnProperty(c)?this.attribs[c]:null},p.prototype.setAttributeNode=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.removeAttributeNode=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByTagName=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getAttributeNS=function(c,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setAttributeNS=function(c,g,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.removeAttributeNS=function(c,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getAttributeNodeNS=function(c,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setAttributeNodeNS=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByTagNameNS=function(c,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.hasAttribute=function(c){return this.attribs.hasOwnProperty(c)},p.prototype.hasAttributeNS=function(c,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setIdAttribute=function(c,g){return this.attribs.hasOwnProperty(c)?this.attribs[c].isId:g},p.prototype.setIdAttributeNS=function(c,g,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setIdAttributeNode=function(c,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByTagName=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByTagNameNS=function(c,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByClassName=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.isEqualNode=function(c){var g,E,T;if(!p.__super__.isEqualNode.apply(this,arguments).isEqualNode(c)||c.namespaceURI!==this.namespaceURI||c.prefix!==this.prefix||c.localName!==this.localName||c.attribs.length!==this.attribs.length)return!1;for(g=E=0,T=this.attribs.length-1;0<=T?E<=T:E>=T;g=0<=T?++E:--E)if(!this.attribs[g].isEqualNode(c.attribs[g]))return!1;return!0},p}(i)}).call(Z)),qr.exports}var Br={exports:{}},Ur={exports:{}},co;function Dt(){return co||(co=1,(function(){var s,e=function(i,a){for(var t in a)n.call(a,t)&&(i[t]=a[t]);function r(){this.constructor=i}return r.prototype=a.prototype,i.prototype=new r,i.__super__=a.prototype,i},n={}.hasOwnProperty;s=De(),Ur.exports=function(i){e(a,i);function a(t){a.__super__.constructor.call(this,t),this.value=""}return Object.defineProperty(a.prototype,"data",{get:function(){return this.value},set:function(t){return this.value=t||""}}),Object.defineProperty(a.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(a.prototype,"textContent",{get:function(){return this.value},set:function(t){return this.value=t||""}}),a.prototype.clone=function(){return Object.create(this)},a.prototype.substringData=function(t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.appendData=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.insertData=function(t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.deleteData=function(t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.replaceData=function(t,r,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.isEqualNode=function(t){return!(!a.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)||t.data!==this.data)},a}(s)}).call(Z)),Ur.exports}var fo;function Fn(){return fo||(fo=1,(function(){var s,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function o(){this.constructor=a}return o.prototype=t.prototype,a.prototype=new o,a.__super__=t.prototype,a},i={}.hasOwnProperty;s=ae(),e=Dt(),Br.exports=function(a){n(t,a);function t(r,o){if(t.__super__.constructor.call(this,r),o==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=s.CData,this.value=this.stringify.cdata(o)}return t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(r){return this.options.writer.cdata(this,this.options.writer.filterOptions(r))},t}(e)}).call(Z)),Br.exports}var Xr={exports:{}},lo;function Sn(){return lo||(lo=1,(function(){var s,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function o(){this.constructor=a}return o.prototype=t.prototype,a.prototype=new o,a.__super__=t.prototype,a},i={}.hasOwnProperty;s=ae(),e=Dt(),Xr.exports=function(a){n(t,a);function t(r,o){if(t.__super__.constructor.call(this,r),o==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=s.Comment,this.value=this.stringify.comment(o)}return t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(r){return this.options.writer.comment(this,this.options.writer.filterOptions(r))},t}(e)}).call(Z)),Xr.exports}var Vr={exports:{}},ho;function Pn(){return ho||(ho=1,(function(){var s,e,n,i=function(t,r){for(var o in r)a.call(r,o)&&(t[o]=r[o]);function u(){this.constructor=t}return u.prototype=r.prototype,t.prototype=new u,t.__super__=r.prototype,t},a={}.hasOwnProperty;n=Se().isObject,e=De(),s=ae(),Vr.exports=function(t){i(r,t);function r(o,u,l,f){var p;r.__super__.constructor.call(this,o),n(u)&&(p=u,u=p.version,l=p.encoding,f=p.standalone),u||(u="1.0"),this.type=s.Declaration,this.version=this.stringify.xmlVersion(u),l!=null&&(this.encoding=this.stringify.xmlEncoding(l)),f!=null&&(this.standalone=this.stringify.xmlStandalone(f))}return r.prototype.toString=function(o){return this.options.writer.declaration(this,this.options.writer.filterOptions(o))},r}(e)}).call(Z)),Vr.exports}var zr={exports:{}},Wr={exports:{}},po;function Ln(){return po||(po=1,(function(){var s,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function o(){this.constructor=a}return o.prototype=t.prototype,a.prototype=new o,a.__super__=t.prototype,a},i={}.hasOwnProperty;e=De(),s=ae(),Wr.exports=function(a){n(t,a);function t(r,o,u,l,f,p){if(t.__super__.constructor.call(this,r),o==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(u==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(o));if(!l)throw new Error("Missing DTD attribute type. "+this.debugInfo(o));if(!f)throw new Error("Missing DTD attribute default. "+this.debugInfo(o));if(f.indexOf("#")!==0&&(f="#"+f),!f.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(o));if(p&&!f.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(o));this.elementName=this.stringify.name(o),this.type=s.AttributeDeclaration,this.attributeName=this.stringify.name(u),this.attributeType=this.stringify.dtdAttType(l),p&&(this.defaultValue=this.stringify.dtdAttDefault(p)),this.defaultValueType=f}return t.prototype.toString=function(r){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(r))},t}(e)}).call(Z)),Wr.exports}var Hr={exports:{}},mo;function Mn(){return mo||(mo=1,(function(){var s,e,n,i=function(t,r){for(var o in r)a.call(r,o)&&(t[o]=r[o]);function u(){this.constructor=t}return u.prototype=r.prototype,t.prototype=new u,t.__super__=r.prototype,t},a={}.hasOwnProperty;n=Se().isObject,e=De(),s=ae(),Hr.exports=function(t){i(r,t);function r(o,u,l,f){if(r.__super__.constructor.call(this,o),l==null)throw new Error("Missing DTD entity name. "+this.debugInfo(l));if(f==null)throw new Error("Missing DTD entity value. "+this.debugInfo(l));if(this.pe=!!u,this.name=this.stringify.name(l),this.type=s.EntityDeclaration,!n(f))this.value=this.stringify.dtdEntityValue(f),this.internal=!0;else{if(!f.pubID&&!f.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(l));if(f.pubID&&!f.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(l));if(this.internal=!1,f.pubID!=null&&(this.pubID=this.stringify.dtdPubID(f.pubID)),f.sysID!=null&&(this.sysID=this.stringify.dtdSysID(f.sysID)),f.nData!=null&&(this.nData=this.stringify.dtdNData(f.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(l))}}return Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(r.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(r.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"xmlVersion",{get:function(){return null}}),r.prototype.toString=function(o){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(o))},r}(e)}).call(Z)),Hr.exports}var Gr={exports:{}},go;function Rn(){return go||(go=1,(function(){var s,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function o(){this.constructor=a}return o.prototype=t.prototype,a.prototype=new o,a.__super__=t.prototype,a},i={}.hasOwnProperty;e=De(),s=ae(),Gr.exports=function(a){n(t,a);function t(r,o,u){if(t.__super__.constructor.call(this,r),o==null)throw new Error("Missing DTD element name. "+this.debugInfo());u||(u="(#PCDATA)"),Array.isArray(u)&&(u="("+u.join(",")+")"),this.name=this.stringify.name(o),this.type=s.ElementDeclaration,this.value=this.stringify.dtdElementValue(u)}return t.prototype.toString=function(r){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(r))},t}(e)}).call(Z)),Gr.exports}var Kr={exports:{}},yo;function qn(){return yo||(yo=1,(function(){var s,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function o(){this.constructor=a}return o.prototype=t.prototype,a.prototype=new o,a.__super__=t.prototype,a},i={}.hasOwnProperty;e=De(),s=ae(),Kr.exports=function(a){n(t,a);function t(r,o,u){if(t.__super__.constructor.call(this,r),o==null)throw new Error("Missing DTD notation name. "+this.debugInfo(o));if(!u.pubID&&!u.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(o));this.name=this.stringify.name(o),this.type=s.NotationDeclaration,u.pubID!=null&&(this.pubID=this.stringify.dtdPubID(u.pubID)),u.sysID!=null&&(this.sysID=this.stringify.dtdSysID(u.sysID))}return Object.defineProperty(t.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(t.prototype,"systemId",{get:function(){return this.sysID}}),t.prototype.toString=function(r){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(r))},t}(e)}).call(Z)),Kr.exports}var vo;function jn(){return vo||(vo=1,(function(){var s,e,n,i,a,t,r,o,u=function(f,p){for(var c in p)l.call(p,c)&&(f[c]=p[c]);function g(){this.constructor=f}return g.prototype=p.prototype,f.prototype=new g,f.__super__=p.prototype,f},l={}.hasOwnProperty;o=Se().isObject,r=De(),s=ae(),e=Ln(),i=Mn(),n=Rn(),a=qn(),t=_n(),zr.exports=function(f){u(p,f);function p(c,g,E){var T,O,F,v,m,D;if(p.__super__.constructor.call(this,c),this.type=s.DocType,c.children){for(v=c.children,O=0,F=v.length;O<F;O++)if(T=v[O],T.type===s.Element){this.name=T.name;break}}this.documentObject=c,o(g)&&(m=g,g=m.pubID,E=m.sysID),E==null&&(D=[g,E],E=D[0],g=D[1]),g!=null&&(this.pubID=this.stringify.dtdPubID(g)),E!=null&&(this.sysID=this.stringify.dtdSysID(E))}return Object.defineProperty(p.prototype,"entities",{get:function(){var c,g,E,T,O;for(T={},O=this.children,g=0,E=O.length;g<E;g++)c=O[g],c.type===s.EntityDeclaration&&!c.pe&&(T[c.name]=c);return new t(T)}}),Object.defineProperty(p.prototype,"notations",{get:function(){var c,g,E,T,O;for(T={},O=this.children,g=0,E=O.length;g<E;g++)c=O[g],c.type===s.NotationDeclaration&&(T[c.name]=c);return new t(T)}}),Object.defineProperty(p.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(p.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(p.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),p.prototype.element=function(c,g){var E;return E=new n(this,c,g),this.children.push(E),this},p.prototype.attList=function(c,g,E,T,O){var F;return F=new e(this,c,g,E,T,O),this.children.push(F),this},p.prototype.entity=function(c,g){var E;return E=new i(this,!1,c,g),this.children.push(E),this},p.prototype.pEntity=function(c,g){var E;return E=new i(this,!0,c,g),this.children.push(E),this},p.prototype.notation=function(c,g){var E;return E=new a(this,c,g),this.children.push(E),this},p.prototype.toString=function(c){return this.options.writer.docType(this,this.options.writer.filterOptions(c))},p.prototype.ele=function(c,g){return this.element(c,g)},p.prototype.att=function(c,g,E,T,O){return this.attList(c,g,E,T,O)},p.prototype.ent=function(c,g){return this.entity(c,g)},p.prototype.pent=function(c,g){return this.pEntity(c,g)},p.prototype.not=function(c,g){return this.notation(c,g)},p.prototype.up=function(){return this.root()||this.documentObject},p.prototype.isEqualNode=function(c){return!(!p.__super__.isEqualNode.apply(this,arguments).isEqualNode(c)||c.name!==this.name||c.publicId!==this.publicId||c.systemId!==this.systemId)},p}(r)}).call(Z)),zr.exports}var Yr={exports:{}},wo;function $n(){return wo||(wo=1,(function(){var s,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function o(){this.constructor=a}return o.prototype=t.prototype,a.prototype=new o,a.__super__=t.prototype,a},i={}.hasOwnProperty;s=ae(),e=De(),Yr.exports=function(a){n(t,a);function t(r,o){if(t.__super__.constructor.call(this,r),o==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=s.Raw,this.value=this.stringify.raw(o)}return t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(r){return this.options.writer.raw(this,this.options.writer.filterOptions(r))},t}(e)}).call(Z)),Yr.exports}var Jr={exports:{}},Eo;function kn(){return Eo||(Eo=1,(function(){var s,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function o(){this.constructor=a}return o.prototype=t.prototype,a.prototype=new o,a.__super__=t.prototype,a},i={}.hasOwnProperty;s=ae(),e=Dt(),Jr.exports=function(a){n(t,a);function t(r,o){if(t.__super__.constructor.call(this,r),o==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=s.Text,this.value=this.stringify.text(o)}return Object.defineProperty(t.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(t.prototype,"wholeText",{get:function(){var r,o,u;for(u="",o=this.previousSibling;o;)u=o.data+u,o=o.previousSibling;for(u+=this.data,r=this.nextSibling;r;)u=u+r.data,r=r.nextSibling;return u}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(r){return this.options.writer.text(this,this.options.writer.filterOptions(r))},t.prototype.splitText=function(r){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.replaceWholeText=function(r){throw new Error("This DOM method is not implemented."+this.debugInfo())},t}(e)}).call(Z)),Jr.exports}var Qr={exports:{}},To;function Bn(){return To||(To=1,(function(){var s,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function o(){this.constructor=a}return o.prototype=t.prototype,a.prototype=new o,a.__super__=t.prototype,a},i={}.hasOwnProperty;s=ae(),e=Dt(),Qr.exports=function(a){n(t,a);function t(r,o,u){if(t.__super__.constructor.call(this,r),o==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=s.ProcessingInstruction,this.target=this.stringify.insTarget(o),this.name=this.target,u&&(this.value=this.stringify.insValue(u))}return t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(r){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(r))},t.prototype.isEqualNode=function(r){return!(!t.__super__.isEqualNode.apply(this,arguments).isEqualNode(r)||r.target!==this.target)},t}(e)}).call(Z)),Qr.exports}var Zr={exports:{}},bo;function Ns(){return bo||(bo=1,(function(){var s,e,n=function(a,t){for(var r in t)i.call(t,r)&&(a[r]=t[r]);function o(){this.constructor=a}return o.prototype=t.prototype,a.prototype=new o,a.__super__=t.prototype,a},i={}.hasOwnProperty;e=De(),s=ae(),Zr.exports=function(a){n(t,a);function t(r){t.__super__.constructor.call(this,r),this.type=s.Dummy}return t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(r){return""},t}(e)}).call(Z)),Zr.exports}var en={exports:{}},Oo;function uc(){return Oo||(Oo=1,(function(){en.exports=function(){function s(e){this.nodes=e}return Object.defineProperty(s.prototype,"length",{get:function(){return this.nodes.length||0}}),s.prototype.clone=function(){return this.nodes=null},s.prototype.item=function(e){return this.nodes[e]||null},s}()}).call(Z)),en.exports}var tn={exports:{}},Co;function cc(){return Co||(Co=1,(function(){tn.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(Z)),tn.exports}var Do;function De(){return Do||(Do=1,(function(){var s,e,n,i,a,t,r,o,u,l,f,p,c,g,E,T,O,F={}.hasOwnProperty;O=Se(),T=O.isObject,E=O.isFunction,g=O.isEmpty,c=O.getValue,o=null,n=null,i=null,a=null,t=null,f=null,p=null,l=null,r=null,e=null,u=null,s=null,Rr.exports=function(){function v(m){this.parent=m,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,o||(o=xn(),n=Fn(),i=Sn(),a=Pn(),t=jn(),f=$n(),p=kn(),l=Bn(),r=Ns(),e=ae(),u=uc(),_n(),s=cc())}return Object.defineProperty(v.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(v.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(v.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(v.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(v.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new u(this.children)),this.childNodeList}}),Object.defineProperty(v.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(v.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(v.prototype,"previousSibling",{get:function(){var m;return m=this.parent.children.indexOf(this),this.parent.children[m-1]||null}}),Object.defineProperty(v.prototype,"nextSibling",{get:function(){var m;return m=this.parent.children.indexOf(this),this.parent.children[m+1]||null}}),Object.defineProperty(v.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(v.prototype,"textContent",{get:function(){var m,D,N,w,A;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(A="",w=this.children,D=0,N=w.length;D<N;D++)m=w[D],m.textContent&&(A+=m.textContent);return A}else return null},set:function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),v.prototype.setParent=function(m){var D,N,w,A,b;for(this.parent=m,m&&(this.options=m.options,this.stringify=m.stringify),A=this.children,b=[],N=0,w=A.length;N<w;N++)D=A[N],b.push(D.setParent(this));return b},v.prototype.element=function(m,D,N){var w,A,b,h,C,x,M,U,W,H,J;if(x=null,D===null&&N==null&&(W=[{},null],D=W[0],N=W[1]),D==null&&(D={}),D=c(D),T(D)||(H=[D,N],N=H[0],D=H[1]),m!=null&&(m=c(m)),Array.isArray(m))for(b=0,M=m.length;b<M;b++)A=m[b],x=this.element(A);else if(E(m))x=this.element(m.apply());else if(T(m)){for(C in m)if(F.call(m,C))if(J=m[C],E(J)&&(J=J.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&C.indexOf(this.stringify.convertAttKey)===0)x=this.attribute(C.substr(this.stringify.convertAttKey.length),J);else if(!this.options.separateArrayItems&&Array.isArray(J)&&g(J))x=this.dummy();else if(T(J)&&g(J))x=this.element(C);else if(!this.options.keepNullNodes&&J==null)x=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(J))for(h=0,U=J.length;h<U;h++)A=J[h],w={},w[C]=A,x=this.element(w);else T(J)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&C.indexOf(this.stringify.convertTextKey)===0?x=this.element(J):(x=this.element(C),x.element(J)):x=this.element(C,J)}else!this.options.keepNullNodes&&N===null?x=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&m.indexOf(this.stringify.convertTextKey)===0?x=this.text(N):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&m.indexOf(this.stringify.convertCDataKey)===0?x=this.cdata(N):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&m.indexOf(this.stringify.convertCommentKey)===0?x=this.comment(N):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&m.indexOf(this.stringify.convertRawKey)===0?x=this.raw(N):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&m.indexOf(this.stringify.convertPIKey)===0?x=this.instruction(m.substr(this.stringify.convertPIKey.length),N):x=this.node(m,D,N);if(x==null)throw new Error("Could not create any elements with: "+m+". "+this.debugInfo());return x},v.prototype.insertBefore=function(m,D,N){var w,A,b,h,C;if(m!=null&&m.type)return b=m,h=D,b.setParent(this),h?(A=children.indexOf(h),C=children.splice(A),children.push(b),Array.prototype.push.apply(children,C)):children.push(b),b;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(m));return A=this.parent.children.indexOf(this),C=this.parent.children.splice(A),w=this.parent.element(m,D,N),Array.prototype.push.apply(this.parent.children,C),w},v.prototype.insertAfter=function(m,D,N){var w,A,b;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(m));return A=this.parent.children.indexOf(this),b=this.parent.children.splice(A+1),w=this.parent.element(m,D,N),Array.prototype.push.apply(this.parent.children,b),w},v.prototype.remove=function(){var m;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return m=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[m,m-m+1].concat([])),this.parent},v.prototype.node=function(m,D,N){var w,A;return m!=null&&(m=c(m)),D||(D={}),D=c(D),T(D)||(A=[D,N],N=A[0],D=A[1]),w=new o(this,m,D),N!=null&&w.text(N),this.children.push(w),w},v.prototype.text=function(m){var D;return T(m)&&this.element(m),D=new p(this,m),this.children.push(D),this},v.prototype.cdata=function(m){var D;return D=new n(this,m),this.children.push(D),this},v.prototype.comment=function(m){var D;return D=new i(this,m),this.children.push(D),this},v.prototype.commentBefore=function(m){var D,N;return D=this.parent.children.indexOf(this),N=this.parent.children.splice(D),this.parent.comment(m),Array.prototype.push.apply(this.parent.children,N),this},v.prototype.commentAfter=function(m){var D,N;return D=this.parent.children.indexOf(this),N=this.parent.children.splice(D+1),this.parent.comment(m),Array.prototype.push.apply(this.parent.children,N),this},v.prototype.raw=function(m){var D;return D=new f(this,m),this.children.push(D),this},v.prototype.dummy=function(){var m;return m=new r(this),m},v.prototype.instruction=function(m,D){var N,w,A,b,h;if(m!=null&&(m=c(m)),D!=null&&(D=c(D)),Array.isArray(m))for(b=0,h=m.length;b<h;b++)N=m[b],this.instruction(N);else if(T(m))for(N in m)F.call(m,N)&&(w=m[N],this.instruction(N,w));else E(D)&&(D=D.apply()),A=new l(this,m,D),this.children.push(A);return this},v.prototype.instructionBefore=function(m,D){var N,w;return N=this.parent.children.indexOf(this),w=this.parent.children.splice(N),this.parent.instruction(m,D),Array.prototype.push.apply(this.parent.children,w),this},v.prototype.instructionAfter=function(m,D){var N,w;return N=this.parent.children.indexOf(this),w=this.parent.children.splice(N+1),this.parent.instruction(m,D),Array.prototype.push.apply(this.parent.children,w),this},v.prototype.declaration=function(m,D,N){var w,A;return w=this.document(),A=new a(w,m,D,N),w.children.length===0?w.children.unshift(A):w.children[0].type===e.Declaration?w.children[0]=A:w.children.unshift(A),w.root()||w},v.prototype.dtd=function(m,D){var N,w,A,b,h,C,x,M,U,W;for(w=this.document(),A=new t(w,m,D),U=w.children,b=h=0,x=U.length;h<x;b=++h)if(N=U[b],N.type===e.DocType)return w.children[b]=A,A;for(W=w.children,b=C=0,M=W.length;C<M;b=++C)if(N=W[b],N.isRoot)return w.children.splice(b,0,A),A;return w.children.push(A),A},v.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},v.prototype.root=function(){var m;for(m=this;m;){if(m.type===e.Document)return m.rootObject;if(m.isRoot)return m;m=m.parent}},v.prototype.document=function(){var m;for(m=this;m;){if(m.type===e.Document)return m;m=m.parent}},v.prototype.end=function(m){return this.document().end(m)},v.prototype.prev=function(){var m;if(m=this.parent.children.indexOf(this),m<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[m-1]},v.prototype.next=function(){var m;if(m=this.parent.children.indexOf(this),m===-1||m===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[m+1]},v.prototype.importDocument=function(m){var D;return D=m.root().clone(),D.parent=this,D.isRoot=!1,this.children.push(D),this},v.prototype.debugInfo=function(m){var D,N;return m=m||this.name,m==null&&!((D=this.parent)!=null&&D.name)?"":m==null?"parent: <"+this.parent.name+">":(N=this.parent)!=null&&N.name?"node: <"+m+">, parent: <"+this.parent.name+">":"node: <"+m+">"},v.prototype.ele=function(m,D,N){return this.element(m,D,N)},v.prototype.nod=function(m,D,N){return this.node(m,D,N)},v.prototype.txt=function(m){return this.text(m)},v.prototype.dat=function(m){return this.cdata(m)},v.prototype.com=function(m){return this.comment(m)},v.prototype.ins=function(m,D){return this.instruction(m,D)},v.prototype.doc=function(){return this.document()},v.prototype.dec=function(m,D,N){return this.declaration(m,D,N)},v.prototype.e=function(m,D,N){return this.element(m,D,N)},v.prototype.n=function(m,D,N){return this.node(m,D,N)},v.prototype.t=function(m){return this.text(m)},v.prototype.d=function(m){return this.cdata(m)},v.prototype.c=function(m){return this.comment(m)},v.prototype.r=function(m){return this.raw(m)},v.prototype.i=function(m,D){return this.instruction(m,D)},v.prototype.u=function(){return this.up()},v.prototype.importXMLBuilder=function(m){return this.importDocument(m)},v.prototype.replaceChild=function(m,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.removeChild=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.appendChild=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.hasChildNodes=function(){return this.children.length!==0},v.prototype.cloneNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isSupported=function(m,D){return!0},v.prototype.hasAttributes=function(){return this.attribs.length!==0},v.prototype.compareDocumentPosition=function(m){var D,N;return D=this,D===m?0:this.document()!==m.document()?(N=s.Disconnected|s.ImplementationSpecific,Math.random()<.5?N|=s.Preceding:N|=s.Following,N):D.isAncestor(m)?s.Contains|s.Preceding:D.isDescendant(m)?s.Contains|s.Following:D.isPreceding(m)?s.Preceding:s.Following},v.prototype.isSameNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.lookupPrefix=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isDefaultNamespace=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.lookupNamespaceURI=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isEqualNode=function(m){var D,N,w;if(m.nodeType!==this.nodeType||m.children.length!==this.children.length)return!1;for(D=N=0,w=this.children.length-1;0<=w?N<=w:N>=w;D=0<=w?++N:--N)if(!this.children[D].isEqualNode(m.children[D]))return!1;return!0},v.prototype.getFeature=function(m,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.setUserData=function(m,D,N){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.getUserData=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.contains=function(m){return m?m===this||this.isDescendant(m):!1},v.prototype.isDescendant=function(m){var D,N,w,A,b;for(b=this.children,w=0,A=b.length;w<A;w++)if(D=b[w],m===D||(N=D.isDescendant(m),N))return!0;return!1},v.prototype.isAncestor=function(m){return m.isDescendant(this)},v.prototype.isPreceding=function(m){var D,N;return D=this.treePosition(m),N=this.treePosition(this),D===-1||N===-1?!1:D<N},v.prototype.isFollowing=function(m){var D,N;return D=this.treePosition(m),N=this.treePosition(this),D===-1||N===-1?!1:D>N},v.prototype.treePosition=function(m){var D,N;return N=0,D=!1,this.foreachTreeNode(this.document(),function(w){if(N++,!D&&w===m)return D=!0}),D?N:-1},v.prototype.foreachTreeNode=function(m,D){var N,w,A,b,h;for(m||(m=this.document()),b=m.children,w=0,A=b.length;w<A;w++){if(N=b[w],h=D(N))return h;if(h=this.foreachTreeNode(N,D),h)return h}},v}()}).call(Z)),Rr.exports}var rn={exports:{}},Ao;function Is(){return Ao||(Ao=1,(function(){var s=function(n,i){return function(){return n.apply(i,arguments)}},e={}.hasOwnProperty;rn.exports=function(){function n(i){this.assertLegalName=s(this.assertLegalName,this),this.assertLegalChar=s(this.assertLegalChar,this);var a,t,r;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),t=i.stringify||{};for(a in t)e.call(t,a)&&(r=t[a],this[a]=r)}return n.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},n.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},n.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},n.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},n.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},n.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},n.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},n.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},n.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},n.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},n.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.convertAttKey="@",n.prototype.convertPIKey="?",n.prototype.convertTextKey="#text",n.prototype.convertCDataKey="#cdata",n.prototype.convertCommentKey="#comment",n.prototype.convertRawKey="#raw",n.prototype.assertLegalChar=function(i){var a,t;if(this.options.noValidation)return i;if(a="",this.options.version==="1.0"){if(a=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,t=i.match(a))throw new Error("Invalid character in string: "+i+" at index "+t.index)}else if(this.options.version==="1.1"&&(a=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,t=i.match(a)))throw new Error("Invalid character in string: "+i+" at index "+t.index);return i},n.prototype.assertLegalName=function(i){var a;if(this.options.noValidation)return i;if(this.assertLegalChar(i),a=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(a))throw new Error("Invalid character in name");return i},n.prototype.textEscape=function(i){var a;return this.options.noValidation?i:(a=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(a,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},n.prototype.attEscape=function(i){var a;return this.options.noValidation?i:(a=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(a,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},n}()}).call(Z)),rn.exports}var nn={exports:{}},on={exports:{}},sn={exports:{}},No;function At(){return No||(No=1,(function(){sn.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(Z)),sn.exports}var Io;function _s(){return Io||(Io=1,(function(){var s,e,n,i={}.hasOwnProperty;n=Se().assign,s=ae(),Pn(),jn(),Fn(),Sn(),xn(),$n(),kn(),Bn(),Ns(),Ln(),Rn(),Mn(),qn(),e=At(),on.exports=function(){function a(t){var r,o,u;t||(t={}),this.options=t,o=t.writer||{};for(r in o)i.call(o,r)&&(u=o[r],this["_"+r]=this[r],this[r]=u)}return a.prototype.filterOptions=function(t){var r,o,u,l,f,p,c,g;return t||(t={}),t=n({},this.options,t),r={writer:this},r.pretty=t.pretty||!1,r.allowEmpty=t.allowEmpty||!1,r.indent=(o=t.indent)!=null?o:"  ",r.newline=(u=t.newline)!=null?u:`
`,r.offset=(l=t.offset)!=null?l:0,r.dontPrettyTextNodes=(f=(p=t.dontPrettyTextNodes)!=null?p:t.dontprettytextnodes)!=null?f:0,r.spaceBeforeSlash=(c=(g=t.spaceBeforeSlash)!=null?g:t.spacebeforeslash)!=null?c:"",r.spaceBeforeSlash===!0&&(r.spaceBeforeSlash=" "),r.suppressPrettyCount=0,r.user={},r.state=e.None,r},a.prototype.indent=function(t,r,o){var u;return!r.pretty||r.suppressPrettyCount?"":r.pretty&&(u=(o||0)+r.offset+1,u>0)?new Array(u).join(r.indent):""},a.prototype.endline=function(t,r,o){return!r.pretty||r.suppressPrettyCount?"":r.newline},a.prototype.attribute=function(t,r,o){var u;return this.openAttribute(t,r,o),u=" "+t.name+'="'+t.value+'"',this.closeAttribute(t,r,o),u},a.prototype.cdata=function(t,r,o){var u;return this.openNode(t,r,o),r.state=e.OpenTag,u=this.indent(t,r,o)+"<![CDATA[",r.state=e.InsideTag,u+=t.value,r.state=e.CloseTag,u+="]]>"+this.endline(t,r,o),r.state=e.None,this.closeNode(t,r,o),u},a.prototype.comment=function(t,r,o){var u;return this.openNode(t,r,o),r.state=e.OpenTag,u=this.indent(t,r,o)+"<!-- ",r.state=e.InsideTag,u+=t.value,r.state=e.CloseTag,u+=" -->"+this.endline(t,r,o),r.state=e.None,this.closeNode(t,r,o),u},a.prototype.declaration=function(t,r,o){var u;return this.openNode(t,r,o),r.state=e.OpenTag,u=this.indent(t,r,o)+"<?xml",r.state=e.InsideTag,u+=' version="'+t.version+'"',t.encoding!=null&&(u+=' encoding="'+t.encoding+'"'),t.standalone!=null&&(u+=' standalone="'+t.standalone+'"'),r.state=e.CloseTag,u+=r.spaceBeforeSlash+"?>",u+=this.endline(t,r,o),r.state=e.None,this.closeNode(t,r,o),u},a.prototype.docType=function(t,r,o){var u,l,f,p,c;if(o||(o=0),this.openNode(t,r,o),r.state=e.OpenTag,p=this.indent(t,r,o),p+="<!DOCTYPE "+t.root().name,t.pubID&&t.sysID?p+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(p+=' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(p+=" [",p+=this.endline(t,r,o),r.state=e.InsideTag,c=t.children,l=0,f=c.length;l<f;l++)u=c[l],p+=this.writeChildNode(u,r,o+1);r.state=e.CloseTag,p+="]"}return r.state=e.CloseTag,p+=r.spaceBeforeSlash+">",p+=this.endline(t,r,o),r.state=e.None,this.closeNode(t,r,o),p},a.prototype.element=function(t,r,o){var u,l,f,p,c,g,E,T,O,F,v,m,D,N;o||(o=0),F=!1,v="",this.openNode(t,r,o),r.state=e.OpenTag,v+=this.indent(t,r,o)+"<"+t.name,m=t.attribs;for(O in m)i.call(m,O)&&(u=m[O],v+=this.attribute(u,r,o));if(f=t.children.length,p=f===0?null:t.children[0],f===0||t.children.every(function(w){return(w.type===s.Text||w.type===s.Raw)&&w.value===""}))r.allowEmpty?(v+=">",r.state=e.CloseTag,v+="</"+t.name+">"+this.endline(t,r,o)):(r.state=e.CloseTag,v+=r.spaceBeforeSlash+"/>"+this.endline(t,r,o));else if(r.pretty&&f===1&&(p.type===s.Text||p.type===s.Raw)&&p.value!=null)v+=">",r.state=e.InsideTag,r.suppressPrettyCount++,F=!0,v+=this.writeChildNode(p,r,o+1),r.suppressPrettyCount--,F=!1,r.state=e.CloseTag,v+="</"+t.name+">"+this.endline(t,r,o);else{if(r.dontPrettyTextNodes){for(D=t.children,c=0,E=D.length;c<E;c++)if(l=D[c],(l.type===s.Text||l.type===s.Raw)&&l.value!=null){r.suppressPrettyCount++,F=!0;break}}for(v+=">"+this.endline(t,r,o),r.state=e.InsideTag,N=t.children,g=0,T=N.length;g<T;g++)l=N[g],v+=this.writeChildNode(l,r,o+1);r.state=e.CloseTag,v+=this.indent(t,r,o)+"</"+t.name+">",F&&r.suppressPrettyCount--,v+=this.endline(t,r,o),r.state=e.None}return this.closeNode(t,r,o),v},a.prototype.writeChildNode=function(t,r,o){switch(t.type){case s.CData:return this.cdata(t,r,o);case s.Comment:return this.comment(t,r,o);case s.Element:return this.element(t,r,o);case s.Raw:return this.raw(t,r,o);case s.Text:return this.text(t,r,o);case s.ProcessingInstruction:return this.processingInstruction(t,r,o);case s.Dummy:return"";case s.Declaration:return this.declaration(t,r,o);case s.DocType:return this.docType(t,r,o);case s.AttributeDeclaration:return this.dtdAttList(t,r,o);case s.ElementDeclaration:return this.dtdElement(t,r,o);case s.EntityDeclaration:return this.dtdEntity(t,r,o);case s.NotationDeclaration:return this.dtdNotation(t,r,o);default:throw new Error("Unknown XML node type: "+t.constructor.name)}},a.prototype.processingInstruction=function(t,r,o){var u;return this.openNode(t,r,o),r.state=e.OpenTag,u=this.indent(t,r,o)+"<?",r.state=e.InsideTag,u+=t.target,t.value&&(u+=" "+t.value),r.state=e.CloseTag,u+=r.spaceBeforeSlash+"?>",u+=this.endline(t,r,o),r.state=e.None,this.closeNode(t,r,o),u},a.prototype.raw=function(t,r,o){var u;return this.openNode(t,r,o),r.state=e.OpenTag,u=this.indent(t,r,o),r.state=e.InsideTag,u+=t.value,r.state=e.CloseTag,u+=this.endline(t,r,o),r.state=e.None,this.closeNode(t,r,o),u},a.prototype.text=function(t,r,o){var u;return this.openNode(t,r,o),r.state=e.OpenTag,u=this.indent(t,r,o),r.state=e.InsideTag,u+=t.value,r.state=e.CloseTag,u+=this.endline(t,r,o),r.state=e.None,this.closeNode(t,r,o),u},a.prototype.dtdAttList=function(t,r,o){var u;return this.openNode(t,r,o),r.state=e.OpenTag,u=this.indent(t,r,o)+"<!ATTLIST",r.state=e.InsideTag,u+=" "+t.elementName+" "+t.attributeName+" "+t.attributeType,t.defaultValueType!=="#DEFAULT"&&(u+=" "+t.defaultValueType),t.defaultValue&&(u+=' "'+t.defaultValue+'"'),r.state=e.CloseTag,u+=r.spaceBeforeSlash+">"+this.endline(t,r,o),r.state=e.None,this.closeNode(t,r,o),u},a.prototype.dtdElement=function(t,r,o){var u;return this.openNode(t,r,o),r.state=e.OpenTag,u=this.indent(t,r,o)+"<!ELEMENT",r.state=e.InsideTag,u+=" "+t.name+" "+t.value,r.state=e.CloseTag,u+=r.spaceBeforeSlash+">"+this.endline(t,r,o),r.state=e.None,this.closeNode(t,r,o),u},a.prototype.dtdEntity=function(t,r,o){var u;return this.openNode(t,r,o),r.state=e.OpenTag,u=this.indent(t,r,o)+"<!ENTITY",r.state=e.InsideTag,t.pe&&(u+=" %"),u+=" "+t.name,t.value?u+=' "'+t.value+'"':(t.pubID&&t.sysID?u+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(u+=' SYSTEM "'+t.sysID+'"'),t.nData&&(u+=" NDATA "+t.nData)),r.state=e.CloseTag,u+=r.spaceBeforeSlash+">"+this.endline(t,r,o),r.state=e.None,this.closeNode(t,r,o),u},a.prototype.dtdNotation=function(t,r,o){var u;return this.openNode(t,r,o),r.state=e.OpenTag,u=this.indent(t,r,o)+"<!NOTATION",r.state=e.InsideTag,u+=" "+t.name,t.pubID&&t.sysID?u+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.pubID?u+=' PUBLIC "'+t.pubID+'"':t.sysID&&(u+=' SYSTEM "'+t.sysID+'"'),r.state=e.CloseTag,u+=r.spaceBeforeSlash+">"+this.endline(t,r,o),r.state=e.None,this.closeNode(t,r,o),u},a.prototype.openNode=function(t,r,o){},a.prototype.closeNode=function(t,r,o){},a.prototype.openAttribute=function(t,r,o){},a.prototype.closeAttribute=function(t,r,o){},a}()}).call(Z)),on.exports}var _o;function Un(){return _o||(_o=1,(function(){var s,e=function(i,a){for(var t in a)n.call(a,t)&&(i[t]=a[t]);function r(){this.constructor=i}return r.prototype=a.prototype,i.prototype=new r,i.__super__=a.prototype,i},n={}.hasOwnProperty;s=_s(),nn.exports=function(i){e(a,i);function a(t){a.__super__.constructor.call(this,t)}return a.prototype.document=function(t,r){var o,u,l,f,p;for(r=this.filterOptions(r),f="",p=t.children,u=0,l=p.length;u<l;u++)o=p[u],f+=this.writeChildNode(o,r,0);return r.pretty&&f.slice(-r.newline.length)===r.newline&&(f=f.slice(0,-r.newline.length)),f},a}(s)}).call(Z)),nn.exports}var xo;function xs(){return xo||(xo=1,(function(){var s,e,n,i,a,t,r,o=function(l,f){for(var p in f)u.call(f,p)&&(l[p]=f[p]);function c(){this.constructor=l}return c.prototype=f.prototype,l.prototype=new c,l.__super__=f.prototype,l},u={}.hasOwnProperty;r=Se().isPlainObject,n=Ds(),e=ac(),i=De(),s=ae(),t=Is(),a=Un(),Sr.exports=function(l){o(f,l);function f(p){f.__super__.constructor.call(this,null),this.name="#document",this.type=s.Document,this.documentURI=null,this.domConfig=new e,p||(p={}),p.writer||(p.writer=new a),this.options=p,this.stringify=new t(p)}return Object.defineProperty(f.prototype,"implementation",{value:new n}),Object.defineProperty(f.prototype,"doctype",{get:function(){var p,c,g,E;for(E=this.children,c=0,g=E.length;c<g;c++)if(p=E[c],p.type===s.DocType)return p;return null}}),Object.defineProperty(f.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(f.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(f.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(f.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===s.Declaration?this.children[0].encoding:null}}),Object.defineProperty(f.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===s.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(f.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===s.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(f.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(f.prototype,"origin",{get:function(){return null}}),Object.defineProperty(f.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(f.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(f.prototype,"contentType",{get:function(){return null}}),f.prototype.end=function(p){var c;return c={},p?r(p)&&(c=p,p=this.options.writer):p=this.options.writer,p.document(this,p.filterOptions(c))},f.prototype.toString=function(p){return this.options.writer.document(this,this.options.writer.filterOptions(p))},f.prototype.createElement=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createTextNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createComment=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createCDATASection=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createProcessingInstruction=function(p,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createAttribute=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createEntityReference=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByTagName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.importNode=function(p,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createElementNS=function(p,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createAttributeNS=function(p,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByTagNameNS=function(p,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementById=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.adoptNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.renameNode=function(p,c,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByClassName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createEvent=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createNodeIterator=function(p,c,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createTreeWalker=function(p,c,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},f}(i)}).call(Z)),Sr.exports}var an={exports:{}},Fo;function fc(){return Fo||(Fo=1,(function(){var s,e,n,i,a,t,r,o,u,l,f,p,c,g,E,T,O,F,v,m,D,N,w,A={}.hasOwnProperty;w=Se(),D=w.isObject,m=w.isFunction,N=w.isPlainObject,v=w.getValue,s=ae(),p=xs(),c=xn(),i=Fn(),a=Sn(),E=$n(),F=kn(),g=Bn(),l=Pn(),f=jn(),t=Ln(),o=Mn(),r=Rn(),u=qn(),n=As(),O=Is(),T=Un(),e=At(),an.exports=function(){function b(h,C,x){var M;this.name="?xml",this.type=s.Document,h||(h={}),M={},h.writer?N(h.writer)&&(M=h.writer,h.writer=new T):h.writer=new T,this.options=h,this.writer=h.writer,this.writerOptions=this.writer.filterOptions(M),this.stringify=new O(h),this.onDataCallback=C||function(){},this.onEndCallback=x||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return b.prototype.createChildNode=function(h){var C,x,M,U,W,H,J,Y;switch(h.type){case s.CData:this.cdata(h.value);break;case s.Comment:this.comment(h.value);break;case s.Element:M={},J=h.attribs;for(x in J)A.call(J,x)&&(C=J[x],M[x]=C.value);this.node(h.name,M);break;case s.Dummy:this.dummy();break;case s.Raw:this.raw(h.value);break;case s.Text:this.text(h.value);break;case s.ProcessingInstruction:this.instruction(h.target,h.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+h.constructor.name)}for(Y=h.children,W=0,H=Y.length;W<H;W++)U=Y[W],this.createChildNode(U),U.type===s.Element&&this.up();return this},b.prototype.dummy=function(){return this},b.prototype.node=function(h,C,x){var M;if(h==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(h));return this.openCurrent(),h=v(h),C==null&&(C={}),C=v(C),D(C)||(M=[C,x],x=M[0],C=M[1]),this.currentNode=new c(this,h,C),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,x!=null&&this.text(x),this},b.prototype.element=function(h,C,x){var M,U,W,H,J,Y;if(this.currentNode&&this.currentNode.type===s.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(h)||D(h)||m(h))for(H=this.options.noValidation,this.options.noValidation=!0,Y=new p(this.options).element("TEMP_ROOT"),Y.element(h),this.options.noValidation=H,J=Y.children,U=0,W=J.length;U<W;U++)M=J[U],this.createChildNode(M),M.type===s.Element&&this.up();else this.node(h,C,x);return this},b.prototype.attribute=function(h,C){var x,M;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(h));if(h!=null&&(h=v(h)),D(h))for(x in h)A.call(h,x)&&(M=h[x],this.attribute(x,M));else m(C)&&(C=C.apply()),this.options.keepNullAttributes&&C==null?this.currentNode.attribs[h]=new n(this,h,""):C!=null&&(this.currentNode.attribs[h]=new n(this,h,C));return this},b.prototype.text=function(h){var C;return this.openCurrent(),C=new F(this,h),this.onData(this.writer.text(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},b.prototype.cdata=function(h){var C;return this.openCurrent(),C=new i(this,h),this.onData(this.writer.cdata(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},b.prototype.comment=function(h){var C;return this.openCurrent(),C=new a(this,h),this.onData(this.writer.comment(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},b.prototype.raw=function(h){var C;return this.openCurrent(),C=new E(this,h),this.onData(this.writer.raw(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},b.prototype.instruction=function(h,C){var x,M,U,W,H;if(this.openCurrent(),h!=null&&(h=v(h)),C!=null&&(C=v(C)),Array.isArray(h))for(x=0,W=h.length;x<W;x++)M=h[x],this.instruction(M);else if(D(h))for(M in h)A.call(h,M)&&(U=h[M],this.instruction(M,U));else m(C)&&(C=C.apply()),H=new g(this,h,C),this.onData(this.writer.processingInstruction(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},b.prototype.declaration=function(h,C,x){var M;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return M=new l(this,h,C,x),this.onData(this.writer.declaration(M,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},b.prototype.doctype=function(h,C,x){if(this.openCurrent(),h==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new f(this,C,x),this.currentNode.rootNodeName=h,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},b.prototype.dtdElement=function(h,C){var x;return this.openCurrent(),x=new r(this,h,C),this.onData(this.writer.dtdElement(x,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},b.prototype.attList=function(h,C,x,M,U){var W;return this.openCurrent(),W=new t(this,h,C,x,M,U),this.onData(this.writer.dtdAttList(W,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},b.prototype.entity=function(h,C){var x;return this.openCurrent(),x=new o(this,!1,h,C),this.onData(this.writer.dtdEntity(x,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},b.prototype.pEntity=function(h,C){var x;return this.openCurrent(),x=new o(this,!0,h,C),this.onData(this.writer.dtdEntity(x,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},b.prototype.notation=function(h,C){var x;return this.openCurrent(),x=new u(this,h,C),this.onData(this.writer.dtdNotation(x,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},b.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},b.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},b.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},b.prototype.openNode=function(h){var C,x,M,U;if(!h.isOpen){if(!this.root&&this.currentLevel===0&&h.type===s.Element&&(this.root=h),x="",h.type===s.Element){this.writerOptions.state=e.OpenTag,x=this.writer.indent(h,this.writerOptions,this.currentLevel)+"<"+h.name,U=h.attribs;for(M in U)A.call(U,M)&&(C=U[M],x+=this.writer.attribute(C,this.writerOptions,this.currentLevel));x+=(h.children?">":"/>")+this.writer.endline(h,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,x=this.writer.indent(h,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+h.rootNodeName,h.pubID&&h.sysID?x+=' PUBLIC "'+h.pubID+'" "'+h.sysID+'"':h.sysID&&(x+=' SYSTEM "'+h.sysID+'"'),h.children?(x+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,x+=">"),x+=this.writer.endline(h,this.writerOptions,this.currentLevel);return this.onData(x,this.currentLevel),h.isOpen=!0}},b.prototype.closeNode=function(h){var C;if(!h.isClosed)return C="",this.writerOptions.state=e.CloseTag,h.type===s.Element?C=this.writer.indent(h,this.writerOptions,this.currentLevel)+"</"+h.name+">"+this.writer.endline(h,this.writerOptions,this.currentLevel):C=this.writer.indent(h,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(h,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(C,this.currentLevel),h.isClosed=!0},b.prototype.onData=function(h,C){return this.documentStarted=!0,this.onDataCallback(h,C+1)},b.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},b.prototype.debugInfo=function(h){return h==null?"":"node: <"+h+">"},b.prototype.ele=function(){return this.element.apply(this,arguments)},b.prototype.nod=function(h,C,x){return this.node(h,C,x)},b.prototype.txt=function(h){return this.text(h)},b.prototype.dat=function(h){return this.cdata(h)},b.prototype.com=function(h){return this.comment(h)},b.prototype.ins=function(h,C){return this.instruction(h,C)},b.prototype.dec=function(h,C,x){return this.declaration(h,C,x)},b.prototype.dtd=function(h,C,x){return this.doctype(h,C,x)},b.prototype.e=function(h,C,x){return this.element(h,C,x)},b.prototype.n=function(h,C,x){return this.node(h,C,x)},b.prototype.t=function(h){return this.text(h)},b.prototype.d=function(h){return this.cdata(h)},b.prototype.c=function(h){return this.comment(h)},b.prototype.r=function(h){return this.raw(h)},b.prototype.i=function(h,C){return this.instruction(h,C)},b.prototype.att=function(){return this.currentNode&&this.currentNode.type===s.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},b.prototype.a=function(){return this.currentNode&&this.currentNode.type===s.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},b.prototype.ent=function(h,C){return this.entity(h,C)},b.prototype.pent=function(h,C){return this.pEntity(h,C)},b.prototype.not=function(h,C){return this.notation(h,C)},b}()}).call(Z)),an.exports}var un={exports:{}},So;function lc(){return So||(So=1,(function(){var s,e,n,i=function(t,r){for(var o in r)a.call(r,o)&&(t[o]=r[o]);function u(){this.constructor=t}return u.prototype=r.prototype,t.prototype=new u,t.__super__=r.prototype,t},a={}.hasOwnProperty;s=ae(),n=_s(),e=At(),un.exports=function(t){i(r,t);function r(o,u){this.stream=o,r.__super__.constructor.call(this,u)}return r.prototype.endline=function(o,u,l){return o.isLastRootNode&&u.state===e.CloseTag?"":r.__super__.endline.call(this,o,u,l)},r.prototype.document=function(o,u){var l,f,p,c,g,E,T,O,F;for(T=o.children,f=p=0,g=T.length;p<g;f=++p)l=T[f],l.isLastRootNode=f===o.children.length-1;for(u=this.filterOptions(u),O=o.children,F=[],c=0,E=O.length;c<E;c++)l=O[c],F.push(this.writeChildNode(l,u,0));return F},r.prototype.attribute=function(o,u,l){return this.stream.write(r.__super__.attribute.call(this,o,u,l))},r.prototype.cdata=function(o,u,l){return this.stream.write(r.__super__.cdata.call(this,o,u,l))},r.prototype.comment=function(o,u,l){return this.stream.write(r.__super__.comment.call(this,o,u,l))},r.prototype.declaration=function(o,u,l){return this.stream.write(r.__super__.declaration.call(this,o,u,l))},r.prototype.docType=function(o,u,l){var f,p,c,g;if(l||(l=0),this.openNode(o,u,l),u.state=e.OpenTag,this.stream.write(this.indent(o,u,l)),this.stream.write("<!DOCTYPE "+o.root().name),o.pubID&&o.sysID?this.stream.write(' PUBLIC "'+o.pubID+'" "'+o.sysID+'"'):o.sysID&&this.stream.write(' SYSTEM "'+o.sysID+'"'),o.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(o,u,l)),u.state=e.InsideTag,g=o.children,p=0,c=g.length;p<c;p++)f=g[p],this.writeChildNode(f,u,l+1);u.state=e.CloseTag,this.stream.write("]")}return u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+">"),this.stream.write(this.endline(o,u,l)),u.state=e.None,this.closeNode(o,u,l)},r.prototype.element=function(o,u,l){var f,p,c,g,E,T,O,F,v;l||(l=0),this.openNode(o,u,l),u.state=e.OpenTag,this.stream.write(this.indent(o,u,l)+"<"+o.name),F=o.attribs;for(O in F)a.call(F,O)&&(f=F[O],this.attribute(f,u,l));if(c=o.children.length,g=c===0?null:o.children[0],c===0||o.children.every(function(m){return(m.type===s.Text||m.type===s.Raw)&&m.value===""}))u.allowEmpty?(this.stream.write(">"),u.state=e.CloseTag,this.stream.write("</"+o.name+">")):(u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+"/>"));else if(u.pretty&&c===1&&(g.type===s.Text||g.type===s.Raw)&&g.value!=null)this.stream.write(">"),u.state=e.InsideTag,u.suppressPrettyCount++,this.writeChildNode(g,u,l+1),u.suppressPrettyCount--,u.state=e.CloseTag,this.stream.write("</"+o.name+">");else{for(this.stream.write(">"+this.endline(o,u,l)),u.state=e.InsideTag,v=o.children,E=0,T=v.length;E<T;E++)p=v[E],this.writeChildNode(p,u,l+1);u.state=e.CloseTag,this.stream.write(this.indent(o,u,l)+"</"+o.name+">")}return this.stream.write(this.endline(o,u,l)),u.state=e.None,this.closeNode(o,u,l)},r.prototype.processingInstruction=function(o,u,l){return this.stream.write(r.__super__.processingInstruction.call(this,o,u,l))},r.prototype.raw=function(o,u,l){return this.stream.write(r.__super__.raw.call(this,o,u,l))},r.prototype.text=function(o,u,l){return this.stream.write(r.__super__.text.call(this,o,u,l))},r.prototype.dtdAttList=function(o,u,l){return this.stream.write(r.__super__.dtdAttList.call(this,o,u,l))},r.prototype.dtdElement=function(o,u,l){return this.stream.write(r.__super__.dtdElement.call(this,o,u,l))},r.prototype.dtdEntity=function(o,u,l){return this.stream.write(r.__super__.dtdEntity.call(this,o,u,l))},r.prototype.dtdNotation=function(o,u,l){return this.stream.write(r.__super__.dtdNotation.call(this,o,u,l))},r}(n)}).call(Z)),un.exports}var Po;function hc(){return Po||(Po=1,(function(){var s,e,n,i,a,t,r,o,u,l;l=Se(),o=l.assign,u=l.isFunction,n=Ds(),i=xs(),a=fc(),r=Un(),t=lc(),s=ae(),e=At(),_e.create=function(f,p,c,g){var E,T;if(f==null)throw new Error("Root element needs a name.");return g=o({},p,c,g),E=new i(g),T=E.element(f),g.headless||(E.declaration(g),(g.pubID!=null||g.sysID!=null)&&E.dtd(g)),T},_e.begin=function(f,p,c){var g;return u(f)&&(g=[f,p],p=g[0],c=g[1],f={}),p?new a(f,p,c):new i(f)},_e.stringWriter=function(f){return new r(f)},_e.streamWriter=function(f,p){return new t(f,p)},_e.implementation=new n,_e.nodeType=s,_e.writerState=e}).call(Z)),_e}var Lo;function pc(){return Lo||(Lo=1,(function(){var s,e,n,i,a,t={}.hasOwnProperty;s=hc(),e=In().defaults,i=function(r){return typeof r=="string"&&(r.indexOf("&")>=0||r.indexOf(">")>=0||r.indexOf("<")>=0)},a=function(r){return"<![CDATA["+n(r)+"]]>"},n=function(r){return r.replace("]]>","]]]]><![CDATA[>")},xr.Builder=function(){function r(o){var u,l,f;this.options={},l=e["0.2"];for(u in l)t.call(l,u)&&(f=l[u],this.options[u]=f);for(u in o)t.call(o,u)&&(f=o[u],this.options[u]=f)}return r.prototype.buildObject=function(o){var u,l,f,p,c;return u=this.options.attrkey,l=this.options.charkey,Object.keys(o).length===1&&this.options.rootName===e["0.2"].rootName?(c=Object.keys(o)[0],o=o[c]):c=this.options.rootName,f=function(g){return function(E,T){var O,F,v,m,D,N;if(typeof T!="object")g.options.cdata&&i(T)?E.raw(a(T)):E.txt(T);else if(Array.isArray(T)){for(m in T)if(t.call(T,m)){F=T[m];for(D in F)v=F[D],E=f(E.ele(D),v).up()}}else for(D in T)if(t.call(T,D))if(F=T[D],D===u){if(typeof F=="object")for(O in F)N=F[O],E=E.att(O,N)}else if(D===l)g.options.cdata&&i(F)?E=E.raw(a(F)):E=E.txt(F);else if(Array.isArray(F))for(m in F)t.call(F,m)&&(v=F[m],typeof v=="string"?g.options.cdata&&i(v)?E=E.ele(D).raw(a(v)).up():E=E.ele(D,v).up():E=f(E.ele(D),v).up());else typeof F=="object"?E=f(E.ele(D),F).up():typeof F=="string"&&g.options.cdata&&i(F)?E=E.ele(D).raw(a(F)).up():(F==null&&(F=""),E=E.ele(D,F.toString()).up());return E}}(this),p=s.create(c,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),f(p,o).end(this.options.renderOpts)},r}()}).call(Z)),xr}var cn={},fn={},Mo;function dc(){return Mo||(Mo=1,function(s){(function(e){e.parser=function(I,y){return new i(I,y)},e.SAXParser=i,e.SAXStream=f,e.createStream=l,e.MAX_BUFFER_LENGTH=64*1024;var n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function i(I,y){if(!(this instanceof i))return new i(I,y);var X=this;t(X),X.q=X.c="",X.bufferCheckPosition=e.MAX_BUFFER_LENGTH,X.opt=y||{},X.opt.lowercase=X.opt.lowercase||X.opt.lowercasetags,X.looseCase=X.opt.lowercase?"toLowerCase":"toUpperCase",X.tags=[],X.closed=X.closedRoot=X.sawRoot=!1,X.tag=X.error=null,X.strict=!!I,X.noscript=!!(I||X.opt.noscript),X.state=h.BEGIN,X.strictEntities=X.opt.strictEntities,X.ENTITIES=X.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),X.attribList=[],X.opt.xmlns&&(X.ns=Object.create(T)),X.opt.unquotedAttributeValues===void 0&&(X.opt.unquotedAttributeValues=!I),X.trackPosition=X.opt.position!==!1,X.trackPosition&&(X.position=X.line=X.column=0),x(X,"onready")}Object.create||(Object.create=function(I){function y(){}y.prototype=I;var X=new y;return X}),Object.keys||(Object.keys=function(I){var y=[];for(var X in I)I.hasOwnProperty(X)&&y.push(X);return y});function a(I){for(var y=Math.max(e.MAX_BUFFER_LENGTH,10),X=0,d=0,_=n.length;d<_;d++){var S=I[n[d]].length;if(S>y)switch(n[d]){case"textNode":U(I);break;case"cdata":M(I,"oncdata",I.cdata),I.cdata="";break;case"script":M(I,"onscript",I.script),I.script="";break;default:H(I,"Max buffer length exceeded: "+n[d])}X=Math.max(X,S)}var j=e.MAX_BUFFER_LENGTH-X;I.bufferCheckPosition=j+I.position}function t(I){for(var y=0,X=n.length;y<X;y++)I[n[y]]=""}function r(I){U(I),I.cdata!==""&&(M(I,"oncdata",I.cdata),I.cdata=""),I.script!==""&&(M(I,"onscript",I.script),I.script="")}i.prototype={end:function(){J(this)},write:Qe,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){r(this)}};var o;try{o=require("stream").Stream}catch{o=function(){}}o||(o=function(){});var u=e.EVENTS.filter(function(I){return I!=="error"&&I!=="end"});function l(I,y){return new f(I,y)}function f(I,y){if(!(this instanceof f))return new f(I,y);o.apply(this),this._parser=new i(I,y),this.writable=!0,this.readable=!0;var X=this;this._parser.onend=function(){X.emit("end")},this._parser.onerror=function(d){X.emit("error",d),X._parser.error=null},this._decoder=null,u.forEach(function(d){Object.defineProperty(X,"on"+d,{get:function(){return X._parser["on"+d]},set:function(_){if(!_)return X.removeAllListeners(d),X._parser["on"+d]=_,_;X.on(d,_)},enumerable:!0,configurable:!1})})}f.prototype=Object.create(o.prototype,{constructor:{value:f}}),f.prototype.write=function(I){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(I)){if(!this._decoder){var y=Bs.StringDecoder;this._decoder=new y("utf8")}I=this._decoder.write(I)}return this._parser.write(I.toString()),this.emit("data",I),!0},f.prototype.end=function(I){return I&&I.length&&this.write(I),this._parser.end(),!0},f.prototype.on=function(I,y){var X=this;return!X._parser["on"+I]&&u.indexOf(I)!==-1&&(X._parser["on"+I]=function(){var d=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);d.splice(0,0,I),X.emit.apply(X,d)}),o.prototype.on.call(X,I,y)};var p="[CDATA[",c="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",E="http://www.w3.org/2000/xmlns/",T={xml:g,xmlns:E},O=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,F=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function D(I){return I===" "||I===`
`||I==="\r"||I==="	"}function N(I){return I==='"'||I==="'"}function w(I){return I===">"||D(I)}function A(I,y){return I.test(y)}function b(I,y){return!A(I,y)}var h=0;e.STATE={BEGIN:h++,BEGIN_WHITESPACE:h++,TEXT:h++,TEXT_ENTITY:h++,OPEN_WAKA:h++,SGML_DECL:h++,SGML_DECL_QUOTED:h++,DOCTYPE:h++,DOCTYPE_QUOTED:h++,DOCTYPE_DTD:h++,DOCTYPE_DTD_QUOTED:h++,COMMENT_STARTING:h++,COMMENT:h++,COMMENT_ENDING:h++,COMMENT_ENDED:h++,CDATA:h++,CDATA_ENDING:h++,CDATA_ENDING_2:h++,PROC_INST:h++,PROC_INST_BODY:h++,PROC_INST_ENDING:h++,OPEN_TAG:h++,OPEN_TAG_SLASH:h++,ATTRIB:h++,ATTRIB_NAME:h++,ATTRIB_NAME_SAW_WHITE:h++,ATTRIB_VALUE:h++,ATTRIB_VALUE_QUOTED:h++,ATTRIB_VALUE_CLOSED:h++,ATTRIB_VALUE_UNQUOTED:h++,ATTRIB_VALUE_ENTITY_Q:h++,ATTRIB_VALUE_ENTITY_U:h++,CLOSE_TAG:h++,CLOSE_TAG_SAW_WHITE:h++,SCRIPT:h++,SCRIPT_ENDING:h++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(I){var y=e.ENTITIES[I],X=typeof y=="number"?String.fromCharCode(y):y;e.ENTITIES[I]=X});for(var C in e.STATE)e.STATE[e.STATE[C]]=C;h=e.STATE;function x(I,y,X){I[y]&&I[y](X)}function M(I,y,X){I.textNode&&U(I),x(I,y,X)}function U(I){I.textNode=W(I.opt,I.textNode),I.textNode&&x(I,"ontext",I.textNode),I.textNode=""}function W(I,y){return I.trim&&(y=y.trim()),I.normalize&&(y=y.replace(/\s+/g," ")),y}function H(I,y){return U(I),I.trackPosition&&(y+=`
Line: `+I.line+`
Column: `+I.column+`
Char: `+I.c),y=new Error(y),I.error=y,x(I,"onerror",y),I}function J(I){return I.sawRoot&&!I.closedRoot&&Y(I,"Unclosed root tag"),I.state!==h.BEGIN&&I.state!==h.BEGIN_WHITESPACE&&I.state!==h.TEXT&&H(I,"Unexpected end"),U(I),I.c="",I.closed=!0,x(I,"onend"),i.call(I,I.strict,I.opt),I}function Y(I,y){if(typeof I!="object"||!(I instanceof i))throw new Error("bad call to strictFail");I.strict&&H(I,y)}function be(I){I.strict||(I.tagName=I.tagName[I.looseCase]());var y=I.tags[I.tags.length-1]||I,X=I.tag={name:I.tagName,attributes:{}};I.opt.xmlns&&(X.ns=y.ns),I.attribList.length=0,M(I,"onopentagstart",X)}function Oe(I,y){var X=I.indexOf(":"),d=X<0?["",I]:I.split(":"),_=d[0],S=d[1];return y&&I==="xmlns"&&(_="xmlns",S=""),{prefix:_,local:S}}function le(I){if(I.strict||(I.attribName=I.attribName[I.looseCase]()),I.attribList.indexOf(I.attribName)!==-1||I.tag.attributes.hasOwnProperty(I.attribName)){I.attribName=I.attribValue="";return}if(I.opt.xmlns){var y=Oe(I.attribName,!0),X=y.prefix,d=y.local;if(X==="xmlns")if(d==="xml"&&I.attribValue!==g)Y(I,"xml: prefix must be bound to "+g+`
Actual: `+I.attribValue);else if(d==="xmlns"&&I.attribValue!==E)Y(I,"xmlns: prefix must be bound to "+E+`
Actual: `+I.attribValue);else{var _=I.tag,S=I.tags[I.tags.length-1]||I;_.ns===S.ns&&(_.ns=Object.create(S.ns)),_.ns[d]=I.attribValue}I.attribList.push([I.attribName,I.attribValue])}else I.tag.attributes[I.attribName]=I.attribValue,M(I,"onattribute",{name:I.attribName,value:I.attribValue});I.attribName=I.attribValue=""}function ue(I,y){if(I.opt.xmlns){var X=I.tag,d=Oe(I.tagName);X.prefix=d.prefix,X.local=d.local,X.uri=X.ns[d.prefix]||"",X.prefix&&!X.uri&&(Y(I,"Unbound namespace prefix: "+JSON.stringify(I.tagName)),X.uri=d.prefix);var _=I.tags[I.tags.length-1]||I;X.ns&&_.ns!==X.ns&&Object.keys(X.ns).forEach(function(G){M(I,"onopennamespace",{prefix:G,uri:X.ns[G]})});for(var S=0,j=I.attribList.length;S<j;S++){var L=I.attribList[S],R=L[0],B=L[1],P=Oe(R,!0),q=P.prefix,k=P.local,$=q===""?"":X.ns[q]||"",V={name:R,value:B,prefix:q,local:k,uri:$};q&&q!=="xmlns"&&!$&&(Y(I,"Unbound namespace prefix: "+JSON.stringify(q)),V.uri=q),I.tag.attributes[R]=V,M(I,"onattribute",V)}I.attribList.length=0}I.tag.isSelfClosing=!!y,I.sawRoot=!0,I.tags.push(I.tag),M(I,"onopentag",I.tag),y||(!I.noscript&&I.tagName.toLowerCase()==="script"?I.state=h.SCRIPT:I.state=h.TEXT,I.tag=null,I.tagName=""),I.attribName=I.attribValue="",I.attribList.length=0}function we(I){if(!I.tagName){Y(I,"Weird empty close tag."),I.textNode+="</>",I.state=h.TEXT;return}if(I.script){if(I.tagName!=="script"){I.script+="</"+I.tagName+">",I.tagName="",I.state=h.SCRIPT;return}M(I,"onscript",I.script),I.script=""}var y=I.tags.length,X=I.tagName;I.strict||(X=X[I.looseCase]());for(var d=X;y--;){var _=I.tags[y];if(_.name!==d)Y(I,"Unexpected close tag");else break}if(y<0){Y(I,"Unmatched closing tag: "+I.tagName),I.textNode+="</"+I.tagName+">",I.state=h.TEXT;return}I.tagName=X;for(var S=I.tags.length;S-- >y;){var j=I.tag=I.tags.pop();I.tagName=I.tag.name,M(I,"onclosetag",I.tagName);var L={};for(var R in j.ns)L[R]=j.ns[R];var B=I.tags[I.tags.length-1]||I;I.opt.xmlns&&j.ns!==B.ns&&Object.keys(j.ns).forEach(function(P){var q=j.ns[P];M(I,"onclosenamespace",{prefix:P,uri:q})})}y===0&&(I.closedRoot=!0),I.tagName=I.attribValue=I.attribName="",I.attribList.length=0,I.state=h.TEXT}function Pe(I){var y=I.entity,X=y.toLowerCase(),d,_="";return I.ENTITIES[y]?I.ENTITIES[y]:I.ENTITIES[X]?I.ENTITIES[X]:(y=X,y.charAt(0)==="#"&&(y.charAt(1)==="x"?(y=y.slice(2),d=parseInt(y,16),_=d.toString(16)):(y=y.slice(1),d=parseInt(y,10),_=d.toString(10))),y=y.replace(/^0+/,""),isNaN(d)||_.toLowerCase()!==y?(Y(I,"Invalid character entity"),"&"+I.entity+";"):String.fromCodePoint(d))}function z(I,y){y==="<"?(I.state=h.OPEN_WAKA,I.startTagPosition=I.position):D(y)||(Y(I,"Non-whitespace before first tag."),I.textNode=y,I.state=h.TEXT)}function Xe(I,y){var X="";return y<I.length&&(X=I.charAt(y)),X}function Qe(I){var y=this;if(this.error)throw this.error;if(y.closed)return H(y,"Cannot write after close. Assign an onready handler.");if(I===null)return J(y);typeof I=="object"&&(I=I.toString());for(var X=0,d="";d=Xe(I,X++),y.c=d,!!d;)switch(y.trackPosition&&(y.position++,d===`
`?(y.line++,y.column=0):y.column++),y.state){case h.BEGIN:if(y.state=h.BEGIN_WHITESPACE,d==="\uFEFF")continue;z(y,d);continue;case h.BEGIN_WHITESPACE:z(y,d);continue;case h.TEXT:if(y.sawRoot&&!y.closedRoot){for(var _=X-1;d&&d!=="<"&&d!=="&";)d=Xe(I,X++),d&&y.trackPosition&&(y.position++,d===`
`?(y.line++,y.column=0):y.column++);y.textNode+=I.substring(_,X-1)}d==="<"&&!(y.sawRoot&&y.closedRoot&&!y.strict)?(y.state=h.OPEN_WAKA,y.startTagPosition=y.position):(!D(d)&&(!y.sawRoot||y.closedRoot)&&Y(y,"Text data outside of root node."),d==="&"?y.state=h.TEXT_ENTITY:y.textNode+=d);continue;case h.SCRIPT:d==="<"?y.state=h.SCRIPT_ENDING:y.script+=d;continue;case h.SCRIPT_ENDING:d==="/"?y.state=h.CLOSE_TAG:(y.script+="<"+d,y.state=h.SCRIPT);continue;case h.OPEN_WAKA:if(d==="!")y.state=h.SGML_DECL,y.sgmlDecl="";else if(!D(d))if(A(O,d))y.state=h.OPEN_TAG,y.tagName=d;else if(d==="/")y.state=h.CLOSE_TAG,y.tagName="";else if(d==="?")y.state=h.PROC_INST,y.procInstName=y.procInstBody="";else{if(Y(y,"Unencoded <"),y.startTagPosition+1<y.position){var S=y.position-y.startTagPosition;d=new Array(S).join(" ")+d}y.textNode+="<"+d,y.state=h.TEXT}continue;case h.SGML_DECL:if(y.sgmlDecl+d==="--"){y.state=h.COMMENT,y.comment="",y.sgmlDecl="";continue}y.doctype&&y.doctype!==!0&&y.sgmlDecl?(y.state=h.DOCTYPE_DTD,y.doctype+="<!"+y.sgmlDecl+d,y.sgmlDecl=""):(y.sgmlDecl+d).toUpperCase()===p?(M(y,"onopencdata"),y.state=h.CDATA,y.sgmlDecl="",y.cdata=""):(y.sgmlDecl+d).toUpperCase()===c?(y.state=h.DOCTYPE,(y.doctype||y.sawRoot)&&Y(y,"Inappropriately located doctype declaration"),y.doctype="",y.sgmlDecl=""):d===">"?(M(y,"onsgmldeclaration",y.sgmlDecl),y.sgmlDecl="",y.state=h.TEXT):(N(d)&&(y.state=h.SGML_DECL_QUOTED),y.sgmlDecl+=d);continue;case h.SGML_DECL_QUOTED:d===y.q&&(y.state=h.SGML_DECL,y.q=""),y.sgmlDecl+=d;continue;case h.DOCTYPE:d===">"?(y.state=h.TEXT,M(y,"ondoctype",y.doctype),y.doctype=!0):(y.doctype+=d,d==="["?y.state=h.DOCTYPE_DTD:N(d)&&(y.state=h.DOCTYPE_QUOTED,y.q=d));continue;case h.DOCTYPE_QUOTED:y.doctype+=d,d===y.q&&(y.q="",y.state=h.DOCTYPE);continue;case h.DOCTYPE_DTD:d==="]"?(y.doctype+=d,y.state=h.DOCTYPE):d==="<"?(y.state=h.OPEN_WAKA,y.startTagPosition=y.position):N(d)?(y.doctype+=d,y.state=h.DOCTYPE_DTD_QUOTED,y.q=d):y.doctype+=d;continue;case h.DOCTYPE_DTD_QUOTED:y.doctype+=d,d===y.q&&(y.state=h.DOCTYPE_DTD,y.q="");continue;case h.COMMENT:d==="-"?y.state=h.COMMENT_ENDING:y.comment+=d;continue;case h.COMMENT_ENDING:d==="-"?(y.state=h.COMMENT_ENDED,y.comment=W(y.opt,y.comment),y.comment&&M(y,"oncomment",y.comment),y.comment=""):(y.comment+="-"+d,y.state=h.COMMENT);continue;case h.COMMENT_ENDED:d!==">"?(Y(y,"Malformed comment"),y.comment+="--"+d,y.state=h.COMMENT):y.doctype&&y.doctype!==!0?y.state=h.DOCTYPE_DTD:y.state=h.TEXT;continue;case h.CDATA:d==="]"?y.state=h.CDATA_ENDING:y.cdata+=d;continue;case h.CDATA_ENDING:d==="]"?y.state=h.CDATA_ENDING_2:(y.cdata+="]"+d,y.state=h.CDATA);continue;case h.CDATA_ENDING_2:d===">"?(y.cdata&&M(y,"oncdata",y.cdata),M(y,"onclosecdata"),y.cdata="",y.state=h.TEXT):d==="]"?y.cdata+="]":(y.cdata+="]]"+d,y.state=h.CDATA);continue;case h.PROC_INST:d==="?"?y.state=h.PROC_INST_ENDING:D(d)?y.state=h.PROC_INST_BODY:y.procInstName+=d;continue;case h.PROC_INST_BODY:if(!y.procInstBody&&D(d))continue;d==="?"?y.state=h.PROC_INST_ENDING:y.procInstBody+=d;continue;case h.PROC_INST_ENDING:d===">"?(M(y,"onprocessinginstruction",{name:y.procInstName,body:y.procInstBody}),y.procInstName=y.procInstBody="",y.state=h.TEXT):(y.procInstBody+="?"+d,y.state=h.PROC_INST_BODY);continue;case h.OPEN_TAG:A(F,d)?y.tagName+=d:(be(y),d===">"?ue(y):d==="/"?y.state=h.OPEN_TAG_SLASH:(D(d)||Y(y,"Invalid character in tag name"),y.state=h.ATTRIB));continue;case h.OPEN_TAG_SLASH:d===">"?(ue(y,!0),we(y)):(Y(y,"Forward-slash in opening tag not followed by >"),y.state=h.ATTRIB);continue;case h.ATTRIB:if(D(d))continue;d===">"?ue(y):d==="/"?y.state=h.OPEN_TAG_SLASH:A(O,d)?(y.attribName=d,y.attribValue="",y.state=h.ATTRIB_NAME):Y(y,"Invalid attribute name");continue;case h.ATTRIB_NAME:d==="="?y.state=h.ATTRIB_VALUE:d===">"?(Y(y,"Attribute without value"),y.attribValue=y.attribName,le(y),ue(y)):D(d)?y.state=h.ATTRIB_NAME_SAW_WHITE:A(F,d)?y.attribName+=d:Y(y,"Invalid attribute name");continue;case h.ATTRIB_NAME_SAW_WHITE:if(d==="=")y.state=h.ATTRIB_VALUE;else{if(D(d))continue;Y(y,"Attribute without value"),y.tag.attributes[y.attribName]="",y.attribValue="",M(y,"onattribute",{name:y.attribName,value:""}),y.attribName="",d===">"?ue(y):A(O,d)?(y.attribName=d,y.state=h.ATTRIB_NAME):(Y(y,"Invalid attribute name"),y.state=h.ATTRIB)}continue;case h.ATTRIB_VALUE:if(D(d))continue;N(d)?(y.q=d,y.state=h.ATTRIB_VALUE_QUOTED):(y.opt.unquotedAttributeValues||H(y,"Unquoted attribute value"),y.state=h.ATTRIB_VALUE_UNQUOTED,y.attribValue=d);continue;case h.ATTRIB_VALUE_QUOTED:if(d!==y.q){d==="&"?y.state=h.ATTRIB_VALUE_ENTITY_Q:y.attribValue+=d;continue}le(y),y.q="",y.state=h.ATTRIB_VALUE_CLOSED;continue;case h.ATTRIB_VALUE_CLOSED:D(d)?y.state=h.ATTRIB:d===">"?ue(y):d==="/"?y.state=h.OPEN_TAG_SLASH:A(O,d)?(Y(y,"No whitespace between attributes"),y.attribName=d,y.attribValue="",y.state=h.ATTRIB_NAME):Y(y,"Invalid attribute name");continue;case h.ATTRIB_VALUE_UNQUOTED:if(!w(d)){d==="&"?y.state=h.ATTRIB_VALUE_ENTITY_U:y.attribValue+=d;continue}le(y),d===">"?ue(y):y.state=h.ATTRIB;continue;case h.CLOSE_TAG:if(y.tagName)d===">"?we(y):A(F,d)?y.tagName+=d:y.script?(y.script+="</"+y.tagName,y.tagName="",y.state=h.SCRIPT):(D(d)||Y(y,"Invalid tagname in closing tag"),y.state=h.CLOSE_TAG_SAW_WHITE);else{if(D(d))continue;b(O,d)?y.script?(y.script+="</"+d,y.state=h.SCRIPT):Y(y,"Invalid tagname in closing tag."):y.tagName=d}continue;case h.CLOSE_TAG_SAW_WHITE:if(D(d))continue;d===">"?we(y):Y(y,"Invalid characters in closing tag");continue;case h.TEXT_ENTITY:case h.ATTRIB_VALUE_ENTITY_Q:case h.ATTRIB_VALUE_ENTITY_U:var j,L;switch(y.state){case h.TEXT_ENTITY:j=h.TEXT,L="textNode";break;case h.ATTRIB_VALUE_ENTITY_Q:j=h.ATTRIB_VALUE_QUOTED,L="attribValue";break;case h.ATTRIB_VALUE_ENTITY_U:j=h.ATTRIB_VALUE_UNQUOTED,L="attribValue";break}if(d===";"){var R=Pe(y);y.opt.unparsedEntities&&!Object.values(e.XML_ENTITIES).includes(R)?(y.entity="",y.state=j,y.write(R)):(y[L]+=R,y.entity="",y.state=j)}else A(y.entity.length?m:v,d)?y.entity+=d:(Y(y,"Invalid character in entity name"),y[L]+="&"+y.entity+d,y.entity="",y.state=j);continue;default:throw new Error(y,"Unknown state: "+y.state)}return y.position>=y.bufferCheckPosition&&a(y),y}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var I=String.fromCharCode,y=Math.floor,X=function(){var d=16384,_=[],S,j,L=-1,R=arguments.length;if(!R)return"";for(var B="";++L<R;){var P=Number(arguments[L]);if(!isFinite(P)||P<0||P>1114111||y(P)!==P)throw RangeError("Invalid code point: "+P);P<=65535?_.push(P):(P-=65536,S=(P>>10)+55296,j=P%1024+56320,_.push(S,j)),(L+1===R||_.length>d)&&(B+=I.apply(null,_),_.length=0)}return B};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:X,configurable:!0,writable:!0}):String.fromCodePoint=X}()})(s)}(fn)),fn}var ln={},Ro;function mc(){return Ro||(Ro=1,(function(){ln.stripBOM=function(s){return s[0]==="\uFEFF"?s.substring(1):s}}).call(Z)),ln}var ke={},qo;function Fs(){return qo||(qo=1,(function(){var s;s=new RegExp(/(?!xmlns)^.*:/),ke.normalize=function(e){return e.toLowerCase()},ke.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},ke.stripPrefix=function(e){return e.replace(s,"")},ke.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},ke.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(Z)),ke}var jo;function gc(){return jo||(jo=1,function(s){(function(){var e,n,i,a,t,r,o,u,l=function(c,g){return function(){return c.apply(g,arguments)}},f=function(c,g){for(var E in g)p.call(g,E)&&(c[E]=g[E]);function T(){this.constructor=c}return T.prototype=g.prototype,c.prototype=new T,c.__super__=g.prototype,c},p={}.hasOwnProperty;o=dc(),i=Be,e=mc(),r=Fs(),u=Us.setImmediate,n=In().defaults,a=function(c){return typeof c=="object"&&c!=null&&Object.keys(c).length===0},t=function(c,g,E){var T,O,F;for(T=0,O=c.length;T<O;T++)F=c[T],g=F(g,E);return g},s.Parser=function(c){f(g,c);function g(E){this.parseStringPromise=l(this.parseStringPromise,this),this.parseString=l(this.parseString,this),this.reset=l(this.reset,this),this.assignOrPush=l(this.assignOrPush,this),this.processAsync=l(this.processAsync,this);var T,O,F;if(!(this instanceof s.Parser))return new s.Parser(E);this.options={},O=n["0.2"];for(T in O)p.call(O,T)&&(F=O[T],this.options[T]=F);for(T in E)p.call(E,T)&&(F=E[T],this.options[T]=F);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(r.normalize)),this.reset()}return g.prototype.processAsync=function(){var E,T;try{return this.remaining.length<=this.options.chunkSize?(E=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(E),this.saxParser.close()):(E=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(E),u(this.processAsync))}catch(O){if(T=O,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(T)}},g.prototype.assignOrPush=function(E,T,O){return T in E?(E[T]instanceof Array||(E[T]=[E[T]]),E[T].push(O)):this.options.explicitArray?E[T]=[O]:E[T]=O},g.prototype.reset=function(){var E,T,O,F;return this.removeAllListeners(),this.saxParser=o.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(v){return function(m){if(v.saxParser.resume(),!v.saxParser.errThrown)return v.saxParser.errThrown=!0,v.emit("error",m)}}(this),this.saxParser.onend=function(v){return function(){if(!v.saxParser.ended)return v.saxParser.ended=!0,v.emit("end",v.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,F=[],E=this.options.attrkey,T=this.options.charkey,this.saxParser.onopentag=function(v){return function(m){var D,N,w,A,b;if(w=Object.create(null),w[T]="",!v.options.ignoreAttrs){b=m.attributes;for(D in b)p.call(b,D)&&(!(E in w)&&!v.options.mergeAttrs&&(w[E]=Object.create(null)),N=v.options.attrValueProcessors?t(v.options.attrValueProcessors,m.attributes[D],D):m.attributes[D],A=v.options.attrNameProcessors?t(v.options.attrNameProcessors,D):D,v.options.mergeAttrs?v.assignOrPush(w,A,N):w[E][A]=N)}return w["#name"]=v.options.tagNameProcessors?t(v.options.tagNameProcessors,m.name):m.name,v.options.xmlns&&(w[v.options.xmlnskey]={uri:m.uri,local:m.local}),F.push(w)}}(this),this.saxParser.onclosetag=function(v){return function(){var m,D,N,w,A,b,h,C,x,M;if(b=F.pop(),A=b["#name"],(!v.options.explicitChildren||!v.options.preserveChildrenOrder)&&delete b["#name"],b.cdata===!0&&(m=b.cdata,delete b.cdata),x=F[F.length-1],b[T].match(/^\s*$/)&&!m?(D=b[T],delete b[T]):(v.options.trim&&(b[T]=b[T].trim()),v.options.normalize&&(b[T]=b[T].replace(/\s{2,}/g," ").trim()),b[T]=v.options.valueProcessors?t(v.options.valueProcessors,b[T],A):b[T],Object.keys(b).length===1&&T in b&&!v.EXPLICIT_CHARKEY&&(b=b[T])),a(b)&&(typeof v.options.emptyTag=="function"?b=v.options.emptyTag():b=v.options.emptyTag!==""?v.options.emptyTag:D),v.options.validator!=null&&(M="/"+function(){var U,W,H;for(H=[],U=0,W=F.length;U<W;U++)w=F[U],H.push(w["#name"]);return H}().concat(A).join("/"),function(){var U;try{return b=v.options.validator(M,x&&x[A],b)}catch(W){return U=W,v.emit("error",U)}}()),v.options.explicitChildren&&!v.options.mergeAttrs&&typeof b=="object"){if(!v.options.preserveChildrenOrder)w=Object.create(null),v.options.attrkey in b&&(w[v.options.attrkey]=b[v.options.attrkey],delete b[v.options.attrkey]),!v.options.charsAsChildren&&v.options.charkey in b&&(w[v.options.charkey]=b[v.options.charkey],delete b[v.options.charkey]),Object.getOwnPropertyNames(b).length>0&&(w[v.options.childkey]=b),b=w;else if(x){x[v.options.childkey]=x[v.options.childkey]||[],h=Object.create(null);for(N in b)p.call(b,N)&&(h[N]=b[N]);x[v.options.childkey].push(h),delete b["#name"],Object.keys(b).length===1&&T in b&&!v.EXPLICIT_CHARKEY&&(b=b[T])}}return F.length>0?v.assignOrPush(x,A,b):(v.options.explicitRoot&&(C=b,b=Object.create(null),b[A]=C),v.resultObject=b,v.saxParser.ended=!0,v.emit("end",v.resultObject))}}(this),O=function(v){return function(m){var D,N;if(N=F[F.length-1],N)return N[T]+=m,v.options.explicitChildren&&v.options.preserveChildrenOrder&&v.options.charsAsChildren&&(v.options.includeWhiteChars||m.replace(/\\n/g,"").trim()!=="")&&(N[v.options.childkey]=N[v.options.childkey]||[],D={"#name":"__text__"},D[T]=m,v.options.normalize&&(D[T]=D[T].replace(/\s{2,}/g," ").trim()),N[v.options.childkey].push(D)),N}}(this),this.saxParser.ontext=O,this.saxParser.oncdata=function(v){return function(m){var D;if(D=O(m),D)return D.cdata=!0}}()},g.prototype.parseString=function(E,T){var O;T!=null&&typeof T=="function"&&(this.on("end",function(F){return this.reset(),T(null,F)}),this.on("error",function(F){return this.reset(),T(F)}));try{return E=E.toString(),E.trim()===""?(this.emit("end",null),!0):(E=e.stripBOM(E),this.options.async?(this.remaining=E,u(this.processAsync),this.saxParser):this.saxParser.write(E).close())}catch(F){if(O=F,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw O}else return this.emit("error",O),this.saxParser.errThrown=!0}},g.prototype.parseStringPromise=function(E){return new Promise(function(T){return function(O,F){return T.parseString(E,function(v,m){return v?F(v):O(m)})}}(this))},g}(i),s.parseString=function(c,g,E){var T,O,F;return E!=null?(typeof E=="function"&&(T=E),typeof g=="object"&&(O=g)):(typeof g=="function"&&(T=g),O={}),F=new s.Parser(O),F.parseString(c,T)},s.parseStringPromise=function(c,g){var E,T;return typeof g=="object"&&(E=g),T=new s.Parser(E),T.parseStringPromise(c)}}).call(Z)}(cn)),cn}(function(){var s,e,n,i,a=function(r,o){for(var u in o)t.call(o,u)&&(r[u]=o[u]);function l(){this.constructor=r}return l.prototype=o.prototype,r.prototype=new l,r.__super__=o.prototype,r},t={}.hasOwnProperty;e=In(),s=pc(),n=gc(),i=Fs(),Le.defaults=e.defaults,Le.processors=i,Le.ValidationError=function(r){a(o,r);function o(u){this.message=u}return o}(Error),Le.Builder=s.Builder,Le.Parser=n.Parser,Le.parseString=n.parseString,Le.parseStringPromise=n.parseStringPromise}).call(Z);var En={exports:{}},at={exports:{}},hn,$o;function Ss(){if($o)return hn;$o=1;function s(e){i.debug=i,i.default=i,i.coerce=l,i.disable=o,i.enable=r,i.enabled=u,i.humanize=us(),Object.keys(e).forEach(function(f){i[f]=e[f]}),i.instances=[],i.names=[],i.skips=[],i.formatters={};function n(f){for(var p=0,c=0;c<f.length;c++)p=(p<<5)-p+f.charCodeAt(c),p|=0;return i.colors[Math.abs(p)%i.colors.length]}i.selectColor=n;function i(f){var p;function c(){if(c.enabled){for(var g=arguments.length,E=new Array(g),T=0;T<g;T++)E[T]=arguments[T];var O=c,F=Number(new Date),v=F-(p||F);O.diff=v,O.prev=p,O.curr=F,p=F,E[0]=i.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");var m=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,function(N,w){if(N==="%%")return N;m++;var A=i.formatters[w];if(typeof A=="function"){var b=E[m];N=A.call(O,b),E.splice(m,1),m--}return N}),i.formatArgs.call(O,E);var D=O.log||i.log;D.apply(O,E)}}return c.namespace=f,c.enabled=i.enabled(f),c.useColors=i.useColors(),c.color=n(f),c.destroy=a,c.extend=t,typeof i.init=="function"&&i.init(c),i.instances.push(c),c}function a(){var f=i.instances.indexOf(this);return f!==-1?(i.instances.splice(f,1),!0):!1}function t(f,p){return i(this.namespace+(typeof p>"u"?":":p)+f)}function r(f){i.save(f),i.names=[],i.skips=[];var p,c=(typeof f=="string"?f:"").split(/[\s,]+/),g=c.length;for(p=0;p<g;p++)c[p]&&(f=c[p].replace(/\*/g,".*?"),f[0]==="-"?i.skips.push(new RegExp("^"+f.substr(1)+"$")):i.names.push(new RegExp("^"+f+"$")));for(p=0;p<i.instances.length;p++){var E=i.instances[p];E.enabled=i.enabled(E.namespace)}}function o(){i.enable("")}function u(f){if(f[f.length-1]==="*")return!0;var p,c;for(p=0,c=i.skips.length;p<c;p++)if(i.skips[p].test(f))return!1;for(p=0,c=i.names.length;p<c;p++)if(i.names[p].test(f))return!0;return!1}function l(f){return f instanceof Error?f.stack||f.message:f}return i.enable(i.load()),i}return hn=s,hn}var ko;function yc(){return ko||(ko=1,function(s,e){function n(f){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(c){return typeof c}:n=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},n(f)}e.log=t,e.formatArgs=a,e.save=r,e.load=o,e.useColors=i,e.storage=u(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(f){if(f[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+f[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!!this.useColors){var p="color: "+this.color;f.splice(1,0,p,"color: inherit");var c=0,g=0;f[0].replace(/%[a-zA-Z%]/g,function(E){E!=="%%"&&(c++,E==="%c"&&(g=c))}),f.splice(g,0,p)}}function t(){var f;return(typeof console>"u"?"undefined":n(console))==="object"&&console.log&&(f=console).log.apply(f,arguments)}function r(f){try{f?e.storage.setItem("debug",f):e.storage.removeItem("debug")}catch{}}function o(){var f;try{f=e.storage.getItem("debug")}catch{}return!f&&typeof process<"u"&&"env"in process&&(f=process.env.DEBUG),f}function u(){try{return localStorage}catch{}}s.exports=Ss()(e);var l=s.exports.formatters;l.j=function(f){try{return JSON.stringify(f)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}}(at,at.exports)),at.exports}var ut={exports:{}},Bo;function vc(){return Bo||(Bo=1,function(s,e){var n=On,i=pt;e.init=p,e.log=u,e.formatArgs=r,e.save=l,e.load=f,e.useColors=t,e.colors=[6,2,3,4,5,1];try{var a=fs();a&&(a.stderr||a).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}e.inspectOpts=Object.keys(process.env).filter(function(g){return/^debug_/i.test(g)}).reduce(function(g,E){var T=E.substring(6).toLowerCase().replace(/_([a-z])/g,function(F,v){return v.toUpperCase()}),O=process.env[E];return/^(yes|on|true|enabled)$/i.test(O)?O=!0:/^(no|off|false|disabled)$/i.test(O)?O=!1:O==="null"?O=null:O=Number(O),g[T]=O,g},{});function t(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:n.isatty(process.stderr.fd)}function r(g){var E=this.namespace,T=this.useColors;if(T){var O=this.color,F="\x1B[3"+(O<8?O:"8;5;"+O),v="  ".concat(F,";1m").concat(E," \x1B[0m");g[0]=v+g[0].split(`
`).join(`
`+v),g.push(F+"m+"+s.exports.humanize(this.diff)+"\x1B[0m")}else g[0]=o()+E+" "+g[0]}function o(){return e.inspectOpts.hideDate?"":new Date().toISOString()+" "}function u(){return process.stderr.write(i.format.apply(i,arguments)+`
`)}function l(g){g?process.env.DEBUG=g:delete process.env.DEBUG}function f(){return process.env.DEBUG}function p(g){g.inspectOpts={};for(var E=Object.keys(e.inspectOpts),T=0;T<E.length;T++)g.inspectOpts[E[T]]=e.inspectOpts[E[T]]}s.exports=Ss()(e);var c=s.exports.formatters;c.o=function(g){return this.inspectOpts.colors=this.useColors,i.inspect(g,this.inspectOpts).split(`
`).map(function(E){return E.trim()}).join(" ")},c.O=function(g){return this.inspectOpts.colors=this.useColors,i.inspect(g,this.inspectOpts)}}(ut,ut.exports)),ut.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?En.exports=yc():En.exports=vc();var wc=En.exports;const Ke=Tn,Ec=bn,Tc=ks,Ye=Nn,Uo=Ve,bc=Le,Oc=bs,Cc=wc("roa"),ct=Ct;function Dc(s){return s.replace(/[\t\n\r\f]/g," ")}function Ac(s){const e=Object.keys(s),n={};for(let i=0;i<e.length;i++){const a=e[i];n[a.toLowerCase()]=s[a]}return n}function Nc(s){const e="x-acs-",n=Object.keys(s),i=[];for(let t=0;t<n.length;t++){const r=n[t];r.startsWith(e)&&i.push(r)}i.sort();var a="";for(let t=0;t<i.length;t++){const r=i[t];a+=`${r}:${Dc(s[r]).trim()}
`}return a}function Ic(s,e){const n=Object.keys(e).sort();if(n.length===0)return s;for(var i=[],a=0;a<n.length;a++){const t=n[a];i.push(`${t}=${e[t]}`)}return`${s}?${i.join("&")}`}function _c(s,e,n,i){const a=n.accept,t=n["content-md5"]||"",r=n["content-type"]||"",o=n.date||"",u=`${s}
${a}
${t}
${r}
${o}
`,l=Nc(n),f=Ic(e,i);return`${u}${l}${f}`}function xc(s){const e=new bc.Parser({});return new Promise((n,i)=>{e.parseString(s,(a,t)=>{if(a)return i(a);n(t)})})}class Fc extends Error{constructor(e){const n=e.Message[0],i=e.Code[0],a=e.HostId[0],t=e.RequestId[0];super(`${n} hostid: ${a}, requestid: ${t}`),this.code=i}}class Sc{constructor(e){if(Ke(e,'must pass "config"'),Ke(e.endpoint,'must pass "config.endpoint"'),!e.endpoint.startsWith("https://")&&!e.endpoint.startsWith("http://"))throw new Error(`"config.endpoint" must starts with 'https://' or 'http://'.`);if(Ke(e.apiVersion,'must pass "config.apiVersion"'),e.credentialsProvider){if(typeof e.credentialsProvider.getCredentials!="function")throw new Error('must pass "config.credentialsProvider" with function "getCredentials()"');this.credentialsProvider=e.credentialsProvider}else Ke(e.accessKeyId,'must pass "config.accessKeyId"'),Ke(e.accessKeySecret,'must pass "config.accessKeySecret"'),this.accessKeyId=e.accessKeyId,this.accessKeySecret=e.accessKeySecret,this.securityToken=e.securityToken,this.credentialsProvider={getCredentials:async()=>({accessKeyId:e.accessKeyId,accessKeySecret:e.accessKeySecret,securityToken:e.securityToken})};this.endpoint=e.endpoint,this.apiVersion=e.apiVersion,this.host=Ec.parse(this.endpoint).hostname,this.opts=e.opts;var n=this.endpoint.startsWith("https://")?gt:mt;this.keepAliveAgent=new n.Agent({keepAlive:!0,keepAliveMsecs:3e3})}buildHeaders(){var n={accept:"application/json",date:new Date().toGMTString(),host:this.host,"x-acs-signature-nonce":Ye.makeNonce(),"x-acs-signature-method":"HMAC-SHA1","x-acs-signature-version":"1.0","x-acs-version":this.apiVersion,"user-agent":ct.DEFAULT_UA,"x-sdk-client":ct.DEFAULT_CLIENT};return this.securityToken&&(n["x-acs-accesskey-id"]=this.accessKeyId,n["x-acs-security-token"]=this.securityToken),n}signature(e){const n=Buffer.from(e,"utf8");return Ye.sha1(n,this.accessKeySecret,"base64")}buildAuthorization(e){return`acs ${this.accessKeyId}:${this.signature(e)}`}async request(e,n,i={},a="",t={},r={}){const o=await this.credentialsProvider.getCredentials();var l={accept:"application/json",date:new Date().toGMTString(),host:this.host,"x-acs-signature-nonce":Ye.makeNonce(),"x-acs-version":this.apiVersion,"user-agent":ct.DEFAULT_UA,"x-sdk-client":ct.DEFAULT_CLIENT};o&&o.accessKeyId&&o.accessKeySecret&&(l["x-acs-signature-method"]="HMAC-SHA1",l["x-acs-signature-version"]="1.0",o.securityToken&&(l["x-acs-accesskey-id"]=o.accessKeyId,l["x-acs-security-token"]=o.securityToken));var f=Object.assign(l,Ac(t)),p=null;p=Buffer.from(a,"utf8"),f["content-md5"]=Ye.md5(p,"base64"),f["content-length"]=p.length;var c=`${this.endpoint}${n}`;if(Object.keys(i).length&&(c+=`?${Tc.stringify(i)}`),o&&o.accessKeyId&&o.accessKeySecret){const m=_c(e,n,f,i);Cc("stringToSign: %s",m);const D=Buffer.from(m,"utf8"),N=Ye.sha1(D,o.accessKeySecret,"base64");f.authorization=`acs ${o.accessKeyId}:${N}`}const g=Object.assign({method:e,agent:this.keepAliveAgent,headers:f,data:p},this.opts,r),E=await Uo.request(c,g),T=await Uo.read(E,"utf8");if(r.rawBody)return T;const O=E.headers["content-type"]||"";if(O.startsWith("application/json")){const m=E.statusCode;if(m===204)return T;var F;try{F=Oc.parse(T)}catch(D){throw D.name="FormatError",D.message="parse response to json error",D.body=T,D}if(m>=400){const D=F.Message||F.errorMsg||"",N=F.Code||F.errorCode||"",w=F.RequestId||"";var v=new Error(`code: ${m}, ${D}, requestid: ${w}`);throw v.name=`${N}Error`,v.statusCode=m,v.result=F,v.code=N,v}return F}if(O.startsWith("text/xml")){const m=await xc(T);if(m.Error)throw new Fc(m.Error);return m}return T}put(e,n,i,a,t){return this.request("PUT",e,n,i,a,t)}post(e,n,i,a,t){return this.request("POST",e,n,i,a,t)}get(e,n,i,a){return this.request("GET",e,n,"",i,a)}delete(e,n,i,a){return this.request("DELETE",e,n,"",i,a)}}var Pc=Sc;bt.exports=Cs;bt.exports.ROAClient=Pc;bt.exports.RPCClient=Cs;var Lc=bt.exports;const Mc=yt(Lc);async function Rc(){const s=new Mc({accessKeyId:ht.accessKeyId,accessKeySecret:ht.accessKeySecret,endpoint:"http://nls-meta.cn-shanghai.aliyuncs.com",apiVersion:"2019-02-28"});try{return(await s.request("CreateToken")).Token.Id}catch(e){return console.error("Error creating token:",e),null}}function qc(s){return new Promise((e,n)=>{Jo.ffprobe(s,(i,a)=>{if(i)return n(i);e(a.format.duration||0)})})}function jc(){fe.ipcMain.handle("text2voice",async(s,e)=>{try{const{options:n,outputDir:i}=JSON.parse(ka(e)),a=await Rc();_t.existsSync(i)||_t.mkdirSync(i,{recursive:!0});const t=new Eu({url:ht.ttsUrl,appkey:ht.appkey,token:a}),r=ie.join(i,`tts_${Date.now()}.${n.format||"mp3"}`),o=_t.createWriteStream(r);return ve.log(r),new Promise((u,l)=>{t.on("meta",f=>{ve.info("接收到元信息:",f)}),t.on("data",f=>{try{o.write(f),ve.debug(`接收到数据块，大小: ${f.length} bytes`)}catch(p){ve.error("写入文件失败:",p),l(p)}}),t.on("completed",async()=>{o.end(),ve.info("语音合成完成");const f=await qc(r);ve.info(`语音合成完成，时长: ${f}秒`),u({success:!0,outputFile:r,duration:f})}),t.on("closed",()=>{ve.info("连接已关闭")}),t.on("failed",f=>{o.end(),ve.error("语音合成失败:",f),l(f)}),t.start(n,!0,6e3)})}catch(n){throw ve.error("语音合成初始化失败:",n),n}})}const $c={...Ae.webcrypto.subtle,generateKey:async(s,e,n)=>Ae.webcrypto.subtle.generateKey(s,e,n)},kc={getRandomValues:s=>{if(!s)return s;switch(!0){case s instanceof Int8Array:return Ae.webcrypto.getRandomValues(s);case s instanceof Uint8Array:return Ae.webcrypto.getRandomValues(s);case s instanceof Uint8ClampedArray:return Ae.webcrypto.getRandomValues(s);case s instanceof Int16Array:return Ae.webcrypto.getRandomValues(s);case s instanceof Uint16Array:return Ae.webcrypto.getRandomValues(s);case s instanceof Int32Array:return Ae.webcrypto.getRandomValues(s);case s instanceof Uint32Array:return Ae.webcrypto.getRandomValues(s);default:throw new Error("Unsupported ArrayBufferView type")}},randomUUID:()=>Ae.webcrypto.randomUUID(),subtle:$c};function Ps(){ve.transports.file.level="info",ve.transports.file.maxSize=5*1024*1024,ve.transports.file.format="[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}] {text}";const s=ve.transports.file.getFile().path;if(ve.transports.file.stream=Te.createWriteStream(s,{flags:"a",encoding:"utf8"}),process.platform==="win32"){process.env.CHCP="65001";try{require("child_process").execSync("chcp 65001")}catch{}}const e=global.console;return global.console=ve,{restore:()=>{global.console=e}}}Ps();global.crypto=kc;process.env.LANG="zh_CN.UTF-8";process.env.LC_ALL="zh_CN.UTF-8";process.platform==="win32"&&(process.env.CHCP="65001");process.env.DIST=ie.join(__dirname,"../dist");process.env.VITE_PUBLIC=fe.app.isPackaged?process.env.DIST:ie.join(process.env.DIST,"../public");let Me;const Xo=process.env.VITE_DEV_SERVER_URL;function Ls(){Me=new fe.BrowserWindow({icon:ie.join(process.env.VITE_PUBLIC,"electron-vite.svg"),webPreferences:{nodeIntegration:!0,contextIsolation:!0,preload:ie.join(__dirname,"preload.js")}}),Me.webContents.on("did-finish-load",()=>{Me==null||Me.webContents.send("main-process-message",new Date().toLocaleString())}),Xo?Me.loadURL(Xo):Me.loadFile(ie.join(process.env.DIST,"index.html"))}Ps();Ua();Vs();Xa();jc();fe.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(fe.app.quit(),Me=null)});fe.app.whenReady().then(()=>{Ba(),Ls()});fe.app.on("activate",()=>{fe.BrowserWindow.getAllWindows().length===0&&Ls()});
//# sourceMappingURL=main.js.map
