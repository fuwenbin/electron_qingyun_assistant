"use strict";var Gu=Object.defineProperty;var Yu=(t,e,r)=>e in t?Gu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ie=(t,e,r)=>(Yu(t,typeof e!="symbol"?e+"":e,r),r),Zi=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var ke=(t,e,r)=>(Zi(t,e,"read from private field"),r?r.call(t):e.get(t)),jt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ze=(t,e,r,i)=>(Zi(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r);var Cr=(t,e,r,i)=>({set _(s){ze(t,e,s,r)},get _(){return ke(t,e,i)}});const oe=require("electron"),Q=require("path"),ae=require("fs"),ar=require("child_process"),Ye=require("os"),$t=require("util"),ct=require("events"),ur=require("http"),cr=require("https"),Ku=require("ws"),lr=require("assert"),Ju=require("zlib"),Oi=require("url"),Ti=require("tty"),je=require("crypto"),Qu=require("querystring"),Zu=require("string_decoder"),ec=require("timers"),wa=require("stream"),tc=require("constants");function rc(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const Dr=rc(ae);require("iconv-lite");function nr(t){return Buffer.from(t,"base64").toString("utf-8")}function Zt(t){switch(Q.extname(t).toLowerCase()){case".mp4":return"video/mp4";case".webm":return"video/webm";case".mov":return"video/quicktime";case".avi":return"video/x-msvideo";case".mkv":return"video/x-matroska";case".mp3":return"audio/mpeg";case".wav":return"audio/wav";case".ogg":return"audio/ogg";case".aac":return"audio/aac";case".flac":return"audio/flac";case".jpg":case".jpeg":return"image/jpeg";case".png":return"image/png";default:return"application/octet-stream"}}function eo(t){return new ReadableStream({start(e){t.on("data",r=>{e.enqueue(r)}),t.on("end",()=>{e.close()}),t.on("error",r=>{e.error(r)})},cancel(){t.destroy()}})}function to(t){return process.platform==="win32"?t.replace(/\\/g,"\\\\").replace(/:/g,"\\:"):t.replace(/(\s)/g,"\\$1")}function nc(){oe.ipcMain.handle("show-save-dialog",async(t,e)=>await oe.dialog.showSaveDialog({title:e.title||"保存文件",defaultPath:e.defaultPath||oe.app.getPath("documents"),filters:e.filters||[{name:"MP4 Videos",extensions:["mp4"]},{name:"All Files",extensions:["*"]}]})),oe.ipcMain.handle("select-directory",async(t,e)=>{const r=e&&JSON.parse(nr(e)),i=await oe.dialog.showOpenDialog({properties:["openDirectory"],title:"选择保存目录",defaultPath:(r==null?void 0:r.defaultPath)||oe.app.getPath("documents")});return!i.canceled&&i.filePaths.length>0?i.filePaths[0]:null})}function ic(){oe.ipcMain.handle("open-file",async(t,e)=>{const{shell:r}=require("electron");await r.openPath(e)})}var ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function oc(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),r}var er={exports:{}},Ar={exports:{}},ro;function Ea(){return ro||(ro=1,function(t){let e={};try{e=require("electron")}catch{}e.ipcRenderer&&r(e),t.exports=r;function r({contextBridge:i,ipcRenderer:s}){if(!s)return;s.on("__ELECTRON_LOG_IPC__",(o,a)=>{window.postMessage({cmd:"message",...a})}),s.invoke("__ELECTRON_LOG__",{cmd:"getOptions"}).catch(o=>console.error(new Error(`electron-log isn't initialized in the main process. Please call log.initialize() before. ${o.message}`)));const n={sendToMain(o){try{s.send("__ELECTRON_LOG__",o)}catch(a){console.error("electronLog.sendToMain ",a,"data:",o),s.send("__ELECTRON_LOG__",{cmd:"errorHandler",error:{message:a==null?void 0:a.message,stack:a==null?void 0:a.stack},errorName:"sendToMain"})}},log(...o){n.sendToMain({data:o,level:"info"})}};for(const o of["error","warn","info","verbose","debug","silly"])n[o]=(...a)=>n.sendToMain({data:a,level:o});if(i&&process.contextIsolated)try{i.exposeInMainWorld("__electronLog",n)}catch{}typeof window=="object"?window.__electronLog=n:__electronLog=n}}(Ar)),Ar.exports}var Fr={exports:{}},_r,no;function sc(){if(no)return _r;no=1,_r=t;function t(e){return Object.defineProperties(r,{defaultLabel:{value:"",writable:!0},labelPadding:{value:!0,writable:!0},maxLabelLength:{value:0,writable:!0},labelLength:{get(){switch(typeof r.labelPadding){case"boolean":return r.labelPadding?r.maxLabelLength:0;case"number":return r.labelPadding;default:return 0}}}});function r(i){r.maxLabelLength=Math.max(r.maxLabelLength,i.length);const s={};for(const n of e.levels)s[n]=(...o)=>e.logData(o,{level:n,scope:i});return s.log=s.info,s}}return _r}var xr,io;function ac(){if(io)return xr;io=1;class t{constructor({processMessage:r}){this.processMessage=r,this.buffer=[],this.enabled=!1,this.begin=this.begin.bind(this),this.commit=this.commit.bind(this),this.reject=this.reject.bind(this)}addMessage(r){this.buffer.push(r)}begin(){this.enabled=[]}commit(){this.enabled=!1,this.buffer.forEach(r=>this.processMessage(r)),this.buffer=[]}reject(){this.enabled=!1,this.buffer=[]}}return xr=t,xr}var Nr,oo;function ba(){if(oo)return Nr;oo=1;const t=sc(),e=ac(),i=class i{constructor({allowUnknownLevel:n=!1,dependencies:o={},errorHandler:a,eventLogger:u,initializeFn:h,isDev:c=!1,levels:f=["error","warn","info","verbose","debug","silly"],logId:l,transportFactories:d={},variables:y}={}){ie(this,"dependencies",{});ie(this,"errorHandler",null);ie(this,"eventLogger",null);ie(this,"functions",{});ie(this,"hooks",[]);ie(this,"isDev",!1);ie(this,"levels",null);ie(this,"logId",null);ie(this,"scope",null);ie(this,"transports",{});ie(this,"variables",{});this.addLevel=this.addLevel.bind(this),this.create=this.create.bind(this),this.initialize=this.initialize.bind(this),this.logData=this.logData.bind(this),this.processMessage=this.processMessage.bind(this),this.allowUnknownLevel=n,this.buffering=new e(this),this.dependencies=o,this.initializeFn=h,this.isDev=c,this.levels=f,this.logId=l,this.scope=t(this),this.transportFactories=d,this.variables=y||{};for(const w of this.levels)this.addLevel(w,!1);this.log=this.info,this.functions.log=this.log,this.errorHandler=a,a==null||a.setOptions({...o,logFn:this.error}),this.eventLogger=u,u==null||u.setOptions({...o,logger:this});for(const[w,O]of Object.entries(d))this.transports[w]=O(this,o);i.instances[l]=this}static getInstance({logId:n}){return this.instances[n]||this.instances.default}addLevel(n,o=this.levels.length){o!==!1&&this.levels.splice(o,0,n),this[n]=(...a)=>this.logData(a,{level:n}),this.functions[n]=this[n]}catchErrors(n){return this.processMessage({data:["log.catchErrors is deprecated. Use log.errorHandler instead"],level:"warn"},{transports:["console"]}),this.errorHandler.startCatching(n)}create(n){return typeof n=="string"&&(n={logId:n}),new i({dependencies:this.dependencies,errorHandler:this.errorHandler,initializeFn:this.initializeFn,isDev:this.isDev,transportFactories:this.transportFactories,variables:{...this.variables},...n})}compareLevels(n,o,a=this.levels){const u=a.indexOf(n),h=a.indexOf(o);return h===-1||u===-1?!0:h<=u}initialize(n={}){this.initializeFn({logger:this,...this.dependencies,...n})}logData(n,o={}){this.buffering.enabled?this.buffering.addMessage({data:n,date:new Date,...o}):this.processMessage({data:n,...o})}processMessage(n,{transports:o=this.transports}={}){if(n.cmd==="errorHandler"){this.errorHandler.handle(n.error,{errorName:n.errorName,processType:"renderer",showDialog:!!n.showDialog});return}let a=n.level;this.allowUnknownLevel||(a=this.levels.includes(n.level)?n.level:"info");const u={date:new Date,logId:this.logId,...n,level:a,variables:{...this.variables,...n.variables}};for(const[h,c]of this.transportEntries(o))if(!(typeof c!="function"||c.level===!1)&&this.compareLevels(c.level,n.level))try{const f=this.hooks.reduce((l,d)=>l&&d(l,c,h),u);f&&c({...f,data:[...f.data]})}catch(f){this.processInternalErrorFn(f)}}processInternalErrorFn(n){}transportEntries(n=this.transports){return(Array.isArray(n)?n:Object.entries(n)).map(a=>{switch(typeof a){case"string":return this.transports[a]?[a,this.transports[a]]:null;case"function":return[a.name,a];default:return Array.isArray(a)?a:null}}).filter(Boolean)}};ie(i,"instances",{});let r=i;return Nr=r,Nr}var Ir,so;function uc(){if(so)return Ir;so=1;const t=console.error;class e{constructor({logFn:i=null}={}){ie(this,"logFn",null);ie(this,"onError",null);ie(this,"showDialog",!1);ie(this,"preventDefault",!0);this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.startCatching=this.startCatching.bind(this),this.logFn=i}handle(i,{logFn:s=this.logFn,errorName:n="",onError:o=this.onError,showDialog:a=this.showDialog}={}){try{(o==null?void 0:o({error:i,errorName:n,processType:"renderer"}))!==!1&&s({error:i,errorName:n,showDialog:a})}catch{t(i)}}setOptions({logFn:i,onError:s,preventDefault:n,showDialog:o}){typeof i=="function"&&(this.logFn=i),typeof s=="function"&&(this.onError=s),typeof n=="boolean"&&(this.preventDefault=n),typeof o=="boolean"&&(this.showDialog=o)}startCatching({onError:i,showDialog:s}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:i,showDialog:s}),window.addEventListener("error",n=>{var o;this.preventDefault&&((o=n.preventDefault)==null||o.call(n)),this.handleError(n.error||n)}),window.addEventListener("unhandledrejection",n=>{var o;this.preventDefault&&((o=n.preventDefault)==null||o.call(n)),this.handleRejection(n.reason||n)}))}handleError(i){this.handle(i,{errorName:"Unhandled"})}handleRejection(i){const s=i instanceof Error?i:new Error(JSON.stringify(i));this.handle(s,{errorName:"Unhandled rejection"})}}return Ir=e,Ir}var Pr,ao;function lt(){if(ao)return Pr;ao=1,Pr={transform:t};function t({logger:e,message:r,transport:i,initialData:s=(r==null?void 0:r.data)||[],transforms:n=i==null?void 0:i.transforms}){return n.reduce((o,a)=>typeof a=="function"?a({data:o,logger:e,message:r,transport:i}):o,s)}return Pr}var Lr,uo;function cc(){if(uo)return Lr;uo=1;const{transform:t}=lt();Lr=r;const e={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};function r(s){return Object.assign(n,{format:"{h}:{i}:{s}.{ms}{scope} › {text}",transforms:[i],writeFn({message:{level:o,data:a}}){const u=e[o]||e.info;setTimeout(()=>u(...a))}});function n(o){n.writeFn({message:{...o,data:t({logger:s,message:o,transport:n})}})}}function i({data:s=[],logger:n={},message:o={},transport:a={}}){if(typeof a.format=="function")return a.format({data:s,level:(o==null?void 0:o.level)||"info",logger:n,message:o,transport:a});if(typeof a.format!="string")return s;s.unshift(a.format),typeof s[1]=="string"&&s[1].match(/%[1cdfiOos]/)&&(s=[`${s[0]}${s[1]}`,...s.slice(2)]);const u=o.date||new Date;return s[0]=s[0].replace(/\{(\w+)}/g,(h,c)=>{var f,l;switch(c){case"level":return o.level;case"logId":return o.logId;case"scope":{const d=o.scope||((f=n.scope)==null?void 0:f.defaultLabel);return d?` (${d})`:""}case"text":return"";case"y":return u.getFullYear().toString(10);case"m":return(u.getMonth()+1).toString(10).padStart(2,"0");case"d":return u.getDate().toString(10).padStart(2,"0");case"h":return u.getHours().toString(10).padStart(2,"0");case"i":return u.getMinutes().toString(10).padStart(2,"0");case"s":return u.getSeconds().toString(10).padStart(2,"0");case"ms":return u.getMilliseconds().toString(10).padStart(3,"0");case"iso":return u.toISOString();default:return((l=o.variables)==null?void 0:l[c])||h}}).trim(),s}return Lr}var Mr,co;function lc(){if(co)return Mr;co=1;const{transform:t}=lt();Mr=r;const e=new Set([Promise,WeakMap,WeakSet]);function r(n){return Object.assign(o,{depth:5,transforms:[s]});function o(a){if(!window.__electronLog){n.processMessage({data:["electron-log: logger isn't initialized in the main process"],level:"error"},{transports:["console"]});return}try{const u=t({initialData:a,logger:n,message:a,transport:o});__electronLog.sendToMain(u)}catch(u){n.transports.console({data:["electronLog.transports.ipc",u,"data:",a.data],level:"error"})}}}function i(n){return Object(n)!==n}function s({data:n,depth:o,seen:a=new WeakSet,transport:u={}}={}){const h=o||u.depth||5;return a.has(n)?"[Circular]":h<1?i(n)?n:Array.isArray(n)?"[Array]":`[${typeof n}]`:["function","symbol"].includes(typeof n)?n.toString():i(n)?n:e.has(n.constructor)?`[${n.constructor.name}]`:Array.isArray(n)?n.map(c=>s({data:c,depth:h-1,seen:a})):n instanceof Date?n.toISOString():n instanceof Error?n.stack:n instanceof Map?new Map(Array.from(n).map(([c,f])=>[s({data:c,depth:h-1,seen:a}),s({data:f,depth:h-1,seen:a})])):n instanceof Set?new Set(Array.from(n).map(c=>s({data:c,depth:h-1,seen:a}))):(a.add(n),Object.fromEntries(Object.entries(n).map(([c,f])=>[c,s({data:f,depth:h-1,seen:a})])))}return Mr}var lo;function fc(){return lo||(lo=1,function(t){const e=ba(),r=uc(),i=cc(),s=lc();t.exports=n(),t.exports.Logger=e,t.exports.default=t.exports;function n(){const o=new e({allowUnknownLevel:!0,errorHandler:new r,initializeFn:()=>{},logId:"default",transportFactories:{console:i,ipc:s},variables:{processType:"renderer"}});return o.errorHandler.setOptions({logFn({error:a,errorName:u,showDialog:h}){o.transports.console({data:[u,a].filter(Boolean),level:"error"}),o.transports.ipc({cmd:"errorHandler",error:{cause:a==null?void 0:a.cause,code:a==null?void 0:a.code,name:a==null?void 0:a.name,message:a==null?void 0:a.message,stack:a==null?void 0:a.stack},errorName:u,logId:o.logId,showDialog:h})}}),typeof window=="object"&&window.addEventListener("message",a=>{const{cmd:u,logId:h,...c}=a.data||{},f=e.getInstance({logId:h});u==="message"&&f.processMessage(c,{transports:["console"]})}),new Proxy(o,{get(a,u){return typeof a[u]<"u"?a[u]:(...h)=>o.logData(h,{level:u})}})}}(Fr)),Fr.exports}var $r,fo;function hc(){if(fo)return $r;fo=1;const t=ae,e=Q;$r={findAndReadPackageJson:r,tryReadJsonAt:i};function r(){return i(o())||i(n())||i(process.resourcesPath,"app.asar")||i(process.resourcesPath,"app")||i(process.cwd())||{name:void 0,version:void 0}}function i(...a){if(a[0])try{const u=e.join(...a),h=s("package.json",u);if(!h)return;const c=JSON.parse(t.readFileSync(h,"utf8")),f=(c==null?void 0:c.productName)||(c==null?void 0:c.name);return!f||f.toLowerCase()==="electron"?void 0:f?{name:f,version:c==null?void 0:c.version}:void 0}catch{return}}function s(a,u){let h=u;for(;;){const c=e.parse(h),f=c.root,l=c.dir;if(t.existsSync(e.join(h,a)))return e.resolve(e.join(h,a));if(h===f)return null;h=l}}function n(){const a=process.argv.filter(h=>h.indexOf("--user-data-dir=")===0);return a.length===0||typeof a[0]!="string"?null:a[0].replace("--user-data-dir=","")}function o(){var a;try{return(a=require.main)==null?void 0:a.filename}catch{return}}return $r}var Rr,ho;function Sa(){if(ho)return Rr;ho=1;const t=ar,e=Ye,r=Q,i=hc();class s{constructor(){ie(this,"appName");ie(this,"appPackageJson");ie(this,"platform",process.platform)}getAppLogPath(o=this.getAppName()){return this.platform==="darwin"?r.join(this.getSystemPathHome(),"Library/Logs",o):r.join(this.getAppUserDataPath(o),"logs")}getAppName(){var a;const o=this.appName||((a=this.getAppPackageJson())==null?void 0:a.name);if(!o)throw new Error("electron-log can't determine the app name. It tried these methods:\n1. Use `electron.app.name`\n2. Use productName or name from the nearest package.json`\nYou can also set it through log.transports.file.setAppName()");return o}getAppPackageJson(){return typeof this.appPackageJson!="object"&&(this.appPackageJson=i.findAndReadPackageJson()),this.appPackageJson}getAppUserDataPath(o=this.getAppName()){return o?r.join(this.getSystemPathAppData(),o):void 0}getAppVersion(){var o;return(o=this.getAppPackageJson())==null?void 0:o.version}getElectronLogPath(){return this.getAppLogPath()}getMacOsVersion(){const o=Number(e.release().split(".")[0]);return o<=19?`10.${o-4}`:o-9}getOsVersion(){let o=e.type().replace("_"," "),a=e.release();return o==="Darwin"&&(o="macOS",a=this.getMacOsVersion()),`${o} ${a}`}getPathVariables(){const o=this.getAppName(),a=this.getAppVersion(),u=this;return{appData:this.getSystemPathAppData(),appName:o,appVersion:a,get electronDefaultDir(){return u.getElectronLogPath()},home:this.getSystemPathHome(),libraryDefaultDir:this.getAppLogPath(o),libraryTemplate:this.getAppLogPath("{appName}"),temp:this.getSystemPathTemp(),userData:this.getAppUserDataPath(o)}}getSystemPathAppData(){const o=this.getSystemPathHome();switch(this.platform){case"darwin":return r.join(o,"Library/Application Support");case"win32":return process.env.APPDATA||r.join(o,"AppData/Roaming");default:return process.env.XDG_CONFIG_HOME||r.join(o,".config")}}getSystemPathHome(){var o;return((o=e.homedir)==null?void 0:o.call(e))||process.env.HOME}getSystemPathTemp(){return e.tmpdir()}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:void 0,os:this.getOsVersion()}}isDev(){return process.env.NODE_ENV==="development"||process.env.ELECTRON_IS_DEV==="1"}isElectron(){return!!process.versions.electron}onAppEvent(o,a){}onAppReady(o){o()}onEveryWebContentsEvent(o,a){}onIpc(o,a){}onIpcInvoke(o,a){}openUrl(o,a=console.error){const h={darwin:"open",win32:"start",linux:"xdg-open"}[process.platform]||"xdg-open";t.exec(`${h} ${o}`,{},c=>{c&&a(c)})}setAppName(o){this.appName=o}setPlatform(o){this.platform=o}setPreloadFileForSessions({filePath:o,includeFutureSession:a=!0,getSessions:u=()=>[]}){}sendIpc(o,a){}showErrorBox(o,a){}}return Rr=s,Rr}var kr,po;function pc(){if(po)return kr;po=1;const t=Q,e=Sa();class r extends e{constructor({electron:n}={}){super();ie(this,"electron");this.electron=n}getAppName(){var o,a;let n;try{n=this.appName||((o=this.electron.app)==null?void 0:o.name)||((a=this.electron.app)==null?void 0:a.getName())}catch{}return n||super.getAppName()}getAppUserDataPath(n){return this.getPath("userData")||super.getAppUserDataPath(n)}getAppVersion(){var o;let n;try{n=(o=this.electron.app)==null?void 0:o.getVersion()}catch{}return n||super.getAppVersion()}getElectronLogPath(){return this.getPath("logs")||super.getElectronLogPath()}getPath(n){var o;try{return(o=this.electron.app)==null?void 0:o.getPath(n)}catch{return}}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:`Electron ${process.versions.electron}`,os:this.getOsVersion()}}getSystemPathAppData(){return this.getPath("appData")||super.getSystemPathAppData()}isDev(){var n;return((n=this.electron.app)==null?void 0:n.isPackaged)!==void 0?!this.electron.app.isPackaged:typeof process.execPath=="string"?t.basename(process.execPath).toLowerCase().startsWith("electron"):super.isDev()}onAppEvent(n,o){var a;return(a=this.electron.app)==null||a.on(n,o),()=>{var u;(u=this.electron.app)==null||u.off(n,o)}}onAppReady(n){var o,a,u;(o=this.electron.app)!=null&&o.isReady()?n():(a=this.electron.app)!=null&&a.once?(u=this.electron.app)==null||u.once("ready",n):n()}onEveryWebContentsEvent(n,o){var u,h,c;return(h=(u=this.electron.webContents)==null?void 0:u.getAllWebContents())==null||h.forEach(f=>{f.on(n,o)}),(c=this.electron.app)==null||c.on("web-contents-created",a),()=>{var f,l;(f=this.electron.webContents)==null||f.getAllWebContents().forEach(d=>{d.off(n,o)}),(l=this.electron.app)==null||l.off("web-contents-created",a)};function a(f,l){l.on(n,o)}}onIpc(n,o){var a;(a=this.electron.ipcMain)==null||a.on(n,o)}onIpcInvoke(n,o){var a,u;(u=(a=this.electron.ipcMain)==null?void 0:a.handle)==null||u.call(a,n,o)}openUrl(n,o=console.error){var a;(a=this.electron.shell)==null||a.openExternal(n).catch(o)}setPreloadFileForSessions({filePath:n,includeFutureSession:o=!0,getSessions:a=()=>{var u;return[(u=this.electron.session)==null?void 0:u.defaultSession]}}){for(const h of a().filter(Boolean))u(h);o&&this.onAppEvent("session-created",h=>{u(h)});function u(h){typeof h.registerPreloadScript=="function"?h.registerPreloadScript({filePath:n,id:"electron-log-preload",type:"frame"}):h.setPreloads([...h.getPreloads(),n])}}sendIpc(n,o){var a,u;(u=(a=this.electron.BrowserWindow)==null?void 0:a.getAllWindows())==null||u.forEach(h=>{var c,f;((c=h.webContents)==null?void 0:c.isDestroyed())===!1&&((f=h.webContents)==null?void 0:f.isCrashed())===!1&&h.webContents.send(n,o)})}showErrorBox(n,o){var a;(a=this.electron.dialog)==null||a.showErrorBox(n,o)}}return kr=r,kr}var jr,mo;function dc(){if(mo)return jr;mo=1;const t=ae,e=Ye,r=Q,i=Ea();jr={initialize({externalApi:o,getSessions:a,includeFutureSession:u,logger:h,preload:c=!0,spyRendererConsole:f=!1}){o.onAppReady(()=>{try{c&&s({externalApi:o,getSessions:a,includeFutureSession:u,preloadOption:c}),f&&n({externalApi:o,logger:h})}catch(l){h.warn(l)}})}};function s({externalApi:o,getSessions:a,includeFutureSession:u,preloadOption:h}){let c=typeof h=="string"?h:void 0;try{c=r.resolve(__dirname,"../renderer/electron-log-preload.js")}catch{}if(!c||!t.existsSync(c)){c=r.join(o.getAppUserDataPath()||e.tmpdir(),"electron-log-preload.js");const f=`
      try {
        (${i.toString()})(require('electron'));
      } catch(e) {
        console.error(e);
      }
    `;t.writeFileSync(c,f,"utf8")}o.setPreloadFileForSessions({filePath:c,includeFutureSession:u,getSessions:a})}function n({externalApi:o,logger:a}){const u=["debug","info","warn","error"];o.onEveryWebContentsEvent("console-message",(h,c,f)=>{a.processMessage({data:[f],level:u[c],variables:{processType:"renderer"}})})}return jr}var qr,yo;function mc(){if(yo)return qr;yo=1;class t{constructor({externalApi:i,logFn:s=void 0,onError:n=void 0,showDialog:o=void 0}={}){ie(this,"externalApi");ie(this,"isActive",!1);ie(this,"logFn");ie(this,"onError");ie(this,"showDialog",!0);this.createIssue=this.createIssue.bind(this),this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.setOptions({externalApi:i,logFn:s,onError:n,showDialog:o}),this.startCatching=this.startCatching.bind(this),this.stopCatching=this.stopCatching.bind(this)}handle(i,{logFn:s=this.logFn,onError:n=this.onError,processType:o="browser",showDialog:a=this.showDialog,errorName:u=""}={}){var h;i=e(i);try{if(typeof n=="function"){const c=((h=this.externalApi)==null?void 0:h.getVersions())||{},f=this.createIssue;if(n({createIssue:f,error:i,errorName:u,processType:o,versions:c})===!1)return}u?s(u,i):s(i),a&&!u.includes("rejection")&&this.externalApi&&this.externalApi.showErrorBox(`A JavaScript error occurred in the ${o} process`,i.stack)}catch{console.error(i)}}setOptions({externalApi:i,logFn:s,onError:n,showDialog:o}){typeof i=="object"&&(this.externalApi=i),typeof s=="function"&&(this.logFn=s),typeof n=="function"&&(this.onError=n),typeof o=="boolean"&&(this.showDialog=o)}startCatching({onError:i,showDialog:s}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:i,showDialog:s}),process.on("uncaughtException",this.handleError),process.on("unhandledRejection",this.handleRejection))}stopCatching(){this.isActive=!1,process.removeListener("uncaughtException",this.handleError),process.removeListener("unhandledRejection",this.handleRejection)}createIssue(i,s){var n;(n=this.externalApi)==null||n.openUrl(`${i}?${new URLSearchParams(s).toString()}`)}handleError(i){this.handle(i,{errorName:"Unhandled"})}handleRejection(i){const s=i instanceof Error?i:new Error(JSON.stringify(i));this.handle(s,{errorName:"Unhandled rejection"})}}function e(r){if(r instanceof Error)return r;if(r&&typeof r=="object"){if(r.message)return Object.assign(new Error(r.message),r);try{return new Error(JSON.stringify(r))}catch(i){return new Error(`Couldn't normalize error ${String(r)}: ${i}`)}}return new Error(`Can't normalize error ${String(r)}`)}return qr=t,qr}var Br,go;function yc(){if(go)return Br;go=1;class t{constructor(r={}){ie(this,"disposers",[]);ie(this,"format","{eventSource}#{eventName}:");ie(this,"formatters",{app:{"certificate-error":({args:r})=>this.arrayToObject(r.slice(1,4),["url","error","certificate"]),"child-process-gone":({args:r})=>r.length===1?r[0]:r,"render-process-gone":({args:[r,i]})=>i&&typeof i=="object"?{...i,...this.getWebContentsDetails(r)}:[]},webContents:{"console-message":({args:[r,i,s,n]})=>{if(!(r<3))return{message:i,source:`${n}:${s}`}},"did-fail-load":({args:r})=>this.arrayToObject(r,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"did-fail-provisional-load":({args:r})=>this.arrayToObject(r,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"plugin-crashed":({args:r})=>this.arrayToObject(r,["name","version"]),"preload-error":({args:r})=>this.arrayToObject(r,["preloadPath","error"])}});ie(this,"events",{app:{"certificate-error":!0,"child-process-gone":!0,"render-process-gone":!0},webContents:{"did-fail-load":!0,"did-fail-provisional-load":!0,"plugin-crashed":!0,"preload-error":!0,unresponsive:!0}});ie(this,"externalApi");ie(this,"level","error");ie(this,"scope","");this.setOptions(r)}setOptions({events:r,externalApi:i,level:s,logger:n,format:o,formatters:a,scope:u}){typeof r=="object"&&(this.events=r),typeof i=="object"&&(this.externalApi=i),typeof s=="string"&&(this.level=s),typeof n=="object"&&(this.logger=n),(typeof o=="string"||typeof o=="function")&&(this.format=o),typeof a=="object"&&(this.formatters=a),typeof u=="string"&&(this.scope=u)}startLogging(r={}){this.setOptions(r),this.disposeListeners();for(const i of this.getEventNames(this.events.app))this.disposers.push(this.externalApi.onAppEvent(i,(...s)=>{this.handleEvent({eventSource:"app",eventName:i,handlerArgs:s})}));for(const i of this.getEventNames(this.events.webContents))this.disposers.push(this.externalApi.onEveryWebContentsEvent(i,(...s)=>{this.handleEvent({eventSource:"webContents",eventName:i,handlerArgs:s})}))}stopLogging(){this.disposeListeners()}arrayToObject(r,i){const s={};return i.forEach((n,o)=>{s[n]=r[o]}),r.length>i.length&&(s.unknownArgs=r.slice(i.length)),s}disposeListeners(){this.disposers.forEach(r=>r()),this.disposers=[]}formatEventLog({eventName:r,eventSource:i,handlerArgs:s}){var f;const[n,...o]=s;if(typeof this.format=="function")return this.format({args:o,event:n,eventName:r,eventSource:i});const a=(f=this.formatters[i])==null?void 0:f[r];let u=o;if(typeof a=="function"&&(u=a({args:o,event:n,eventName:r,eventSource:i})),!u)return;const h={};return Array.isArray(u)?h.args=u:typeof u=="object"&&Object.assign(h,u),i==="webContents"&&Object.assign(h,this.getWebContentsDetails(n==null?void 0:n.sender)),[this.format.replace("{eventSource}",i==="app"?"App":"WebContents").replace("{eventName}",r),h]}getEventNames(r){return!r||typeof r!="object"?[]:Object.entries(r).filter(([i,s])=>s).map(([i])=>i)}getWebContentsDetails(r){if(!(r!=null&&r.loadURL))return{};try{return{webContents:{id:r.id,url:r.getURL()}}}catch{return{}}}handleEvent({eventName:r,eventSource:i,handlerArgs:s}){var o;const n=this.formatEventLog({eventName:r,eventSource:i,handlerArgs:s});if(n){const a=this.scope?this.logger.scope(this.scope):this.logger;(o=a==null?void 0:a[this.level])==null||o.call(a,...n)}}}return Br=t,Br}var Ur,vo;function Oa(){if(vo)return Ur;vo=1;const{transform:t}=lt();Ur={concatFirstStringElements:e,formatScope:i,formatText:n,formatVariables:s,timeZoneFromOffset:r,format({message:o,logger:a,transport:u,data:h=o==null?void 0:o.data}){switch(typeof u.format){case"string":return t({message:o,logger:a,transforms:[s,i,n],transport:u,initialData:[u.format,...h]});case"function":return u.format({data:h,level:(o==null?void 0:o.level)||"info",logger:a,message:o,transport:u});default:return h}}};function e({data:o}){return typeof o[0]!="string"||typeof o[1]!="string"||o[0].match(/%[1cdfiOos]/)?o:[`${o[0]} ${o[1]}`,...o.slice(2)]}function r(o){const a=Math.abs(o),u=o>0?"-":"+",h=Math.floor(a/60).toString().padStart(2,"0"),c=(a%60).toString().padStart(2,"0");return`${u}${h}:${c}`}function i({data:o,logger:a,message:u}){const{defaultLabel:h,labelLength:c}=(a==null?void 0:a.scope)||{},f=o[0];let l=u.scope;l||(l=h);let d;return l===""?d=c>0?"".padEnd(c+3):"":typeof l=="string"?d=` (${l})`.padEnd(c+3):d="",o[0]=f.replace("{scope}",d),o}function s({data:o,message:a}){let u=o[0];if(typeof u!="string")return o;u=u.replace("{level}]",`${a.level}]`.padEnd(6," "));const h=a.date||new Date;return o[0]=u.replace(/\{(\w+)}/g,(c,f)=>{var l;switch(f){case"level":return a.level||"info";case"logId":return a.logId;case"y":return h.getFullYear().toString(10);case"m":return(h.getMonth()+1).toString(10).padStart(2,"0");case"d":return h.getDate().toString(10).padStart(2,"0");case"h":return h.getHours().toString(10).padStart(2,"0");case"i":return h.getMinutes().toString(10).padStart(2,"0");case"s":return h.getSeconds().toString(10).padStart(2,"0");case"ms":return h.getMilliseconds().toString(10).padStart(3,"0");case"z":return r(h.getTimezoneOffset());case"iso":return h.toISOString();default:return((l=a.variables)==null?void 0:l[f])||c}}).trim(),o}function n({data:o}){const a=o[0];if(typeof a!="string")return o;if(a.lastIndexOf("{text}")===a.length-6)return o[0]=a.replace(/\s?{text}/,""),o[0]===""&&o.shift(),o;const h=a.split("{text}");let c=[];return h[0]!==""&&c.push(h[0]),c=c.concat(o.slice(1)),h[1]!==""&&c.push(h[1]),c}return Ur}var Xr={exports:{}},wo;function fr(){return wo||(wo=1,function(t){const e=$t;t.exports={serialize:i,maxDepth({data:s,transport:n,depth:o=(n==null?void 0:n.depth)??6}){if(!s)return s;if(o<1)return Array.isArray(s)?"[array]":typeof s=="object"&&s?"[object]":s;if(Array.isArray(s))return s.map(u=>t.exports.maxDepth({data:u,depth:o-1}));if(typeof s!="object"||s&&typeof s.toISOString=="function")return s;if(s===null)return null;if(s instanceof Error)return s;const a={};for(const u in s)Object.prototype.hasOwnProperty.call(s,u)&&(a[u]=t.exports.maxDepth({data:s[u],depth:o-1}));return a},toJSON({data:s}){return JSON.parse(JSON.stringify(s,r()))},toString({data:s,transport:n}){const o=(n==null?void 0:n.inspectOptions)||{},a=s.map(u=>{if(u!==void 0)try{const h=JSON.stringify(u,r(),"  ");return h===void 0?void 0:JSON.parse(h)}catch{return u}});return e.formatWithOptions(o,...a)}};function r(s={}){const n=new WeakSet;return function(o,a){if(typeof a=="object"&&a!==null){if(n.has(a))return;n.add(a)}return i(o,a,s)}}function i(s,n,o={}){const a=(o==null?void 0:o.serializeMapAndSet)!==!1;return n instanceof Error?n.stack:n&&(typeof n=="function"?`[function] ${n.toString()}`:n instanceof Date?n.toISOString():a&&n instanceof Map&&Object.fromEntries?Object.fromEntries(n):a&&n instanceof Set&&Array.from?Array.from(n):n)}}(Xr)),Xr.exports}var Vr,Eo;function Ci(){if(Eo)return Vr;Eo=1,Vr={transformStyles:i,applyAnsiStyles({data:s}){return i(s,e,r)},removeStyles({data:s}){return i(s,()=>"")}};const t={unset:"\x1B[0m",black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"};function e(s){const n=s.replace(/color:\s*(\w+).*/,"$1").toLowerCase();return t[n]||""}function r(s){return s+t.unset}function i(s,n,o){const a={};return s.reduce((u,h,c,f)=>{if(a[c])return u;if(typeof h=="string"){let l=c,d=!1;h=h.replace(/%[1cdfiOos]/g,y=>{if(l+=1,y!=="%c")return y;const w=f[l];return typeof w=="string"?(a[l]=!0,d=!0,n(w,h)):y}),d&&o&&(h=o(h))}return u.push(h),u},[])}return Vr}var zr,bo;function gc(){if(bo)return zr;bo=1;const{concatFirstStringElements:t,format:e}=Oa(),{maxDepth:r,toJSON:i}=fr(),{applyAnsiStyles:s,removeStyles:n}=Ci(),{transform:o}=lt(),a={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};zr=c;const h=`%c{h}:{i}:{s}.{ms}{scope}%c ${process.platform==="win32"?">":"›"} {text}`;Object.assign(c,{DEFAULT_FORMAT:h});function c(w){return Object.assign(O,{format:h,level:"silly",transforms:[f,e,d,t,r,i],useStyles:process.env.FORCE_STYLES,writeFn({message:x}){(a[x.level]||a.info)(...x.data)}});function O(x){const E=o({logger:w,message:x,transport:O});O.writeFn({message:{...x,data:E}})}}function f({data:w,message:O,transport:x}){return typeof x.format!="string"||!x.format.includes("%c")?w:[`color:${y(O.level)}`,"color:unset",...w]}function l(w,O){if(typeof w=="boolean")return w;const E=O==="error"||O==="warn"?process.stderr:process.stdout;return E&&E.isTTY}function d(w){const{message:O,transport:x}=w;return(l(x.useStyles,O.level)?s:n)(w)}function y(w){const O={error:"red",warn:"yellow",info:"cyan",default:"unset"};return O[w]||O.default}return zr}var Wr,So;function Ta(){if(So)return Wr;So=1;const t=ct,e=ae,r=Ye;class i extends t{constructor({path:a,writeOptions:u={encoding:"utf8",flag:"a",mode:438},writeAsync:h=!1}){super();ie(this,"asyncWriteQueue",[]);ie(this,"bytesWritten",0);ie(this,"hasActiveAsyncWriting",!1);ie(this,"path",null);ie(this,"initialSize");ie(this,"writeOptions",null);ie(this,"writeAsync",!1);this.path=a,this.writeOptions=u,this.writeAsync=h}get size(){return this.getSize()}clear(){try{return e.writeFileSync(this.path,"",{mode:this.writeOptions.mode,flag:"w"}),this.reset(),!0}catch(a){return a.code==="ENOENT"?!0:(this.emit("error",a,this),!1)}}crop(a){try{const u=s(this.path,a||4096);this.clear(),this.writeLine(`[log cropped]${r.EOL}${u}`)}catch(u){this.emit("error",new Error(`Couldn't crop file ${this.path}. ${u.message}`),this)}}getSize(){if(this.initialSize===void 0)try{const a=e.statSync(this.path);this.initialSize=a.size}catch{this.initialSize=0}return this.initialSize+this.bytesWritten}increaseBytesWrittenCounter(a){this.bytesWritten+=Buffer.byteLength(a,this.writeOptions.encoding)}isNull(){return!1}nextAsyncWrite(){const a=this;if(this.hasActiveAsyncWriting||this.asyncWriteQueue.length===0)return;const u=this.asyncWriteQueue.join("");this.asyncWriteQueue=[],this.hasActiveAsyncWriting=!0,e.writeFile(this.path,u,this.writeOptions,h=>{a.hasActiveAsyncWriting=!1,h?a.emit("error",new Error(`Couldn't write to ${a.path}. ${h.message}`),this):a.increaseBytesWrittenCounter(u),a.nextAsyncWrite()})}reset(){this.initialSize=void 0,this.bytesWritten=0}toString(){return this.path}writeLine(a){if(a+=r.EOL,this.writeAsync){this.asyncWriteQueue.push(a),this.nextAsyncWrite();return}try{e.writeFileSync(this.path,a,this.writeOptions),this.increaseBytesWrittenCounter(a)}catch(u){this.emit("error",new Error(`Couldn't write to ${this.path}. ${u.message}`),this)}}}Wr=i;function s(n,o){const a=Buffer.alloc(o),u=e.statSync(n),h=Math.min(u.size,o),c=Math.max(0,u.size-o),f=e.openSync(n,"r"),l=e.readSync(f,a,0,h,c);return e.closeSync(f),a.toString("utf8",0,l)}return Wr}var Hr,Oo;function vc(){if(Oo)return Hr;Oo=1;const t=Ta();class e extends t{clear(){}crop(){}getSize(){return 0}isNull(){return!0}writeLine(){}}return Hr=e,Hr}var Gr,To;function wc(){if(To)return Gr;To=1;const t=ct,e=ae,r=Q,i=Ta(),s=vc();class n extends t{constructor(){super();ie(this,"store",{});this.emitError=this.emitError.bind(this)}provide({filePath:u,writeOptions:h={},writeAsync:c=!1}){let f;try{if(u=r.resolve(u),this.store[u])return this.store[u];f=this.createFile({filePath:u,writeOptions:h,writeAsync:c})}catch(l){f=new s({path:u}),this.emitError(l,f)}return f.on("error",this.emitError),this.store[u]=f,f}createFile({filePath:u,writeOptions:h,writeAsync:c}){return this.testFileWriting({filePath:u,writeOptions:h}),new i({path:u,writeOptions:h,writeAsync:c})}emitError(u,h){this.emit("error",u,h)}testFileWriting({filePath:u,writeOptions:h}){e.mkdirSync(r.dirname(u),{recursive:!0}),e.writeFileSync(u,"",{flag:"a",mode:h.mode})}}return Gr=n,Gr}var Yr,Co;function Ec(){if(Co)return Yr;Co=1;const t=ae,e=Ye,r=Q,i=wc(),{transform:s}=lt(),{removeStyles:n}=Ci(),{format:o,concatFirstStringElements:a}=Oa(),{toString:u}=fr();Yr=c;const h=new i;function c(l,{registry:d=h,externalApi:y}={}){let w;return d.listenerCount("error")<1&&d.on("error",(A,v)=>{E(`Can't write to ${v}`,A)}),Object.assign(O,{fileName:f(l.variables.processType),format:"[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}]{scope} {text}",getFile:g,inspectOptions:{depth:5},level:"silly",maxSize:1024**2,readAllLogs:D,sync:!0,transforms:[n,o,a,u],writeOptions:{flag:"a",mode:438,encoding:"utf8"},archiveLogFn(A){const v=A.toString(),C=r.parse(v);try{t.renameSync(v,r.join(C.dir,`${C.name}.old${C.ext}`))}catch(T){E("Could not rotate log",T);const p=Math.round(O.maxSize/4);A.crop(Math.min(p,256*1024))}},resolvePathFn(A){return r.join(A.libraryDefaultDir,A.fileName)},setAppName(A){l.dependencies.externalApi.setAppName(A)}});function O(A){const v=g(A);O.maxSize>0&&v.size>O.maxSize&&(O.archiveLogFn(v),v.reset());const T=s({logger:l,message:A,transport:O});v.writeLine(T)}function x(){w||(w=Object.create(Object.prototype,{...Object.getOwnPropertyDescriptors(y.getPathVariables()),fileName:{get(){return O.fileName},enumerable:!0}}),typeof O.archiveLog=="function"&&(O.archiveLogFn=O.archiveLog,E("archiveLog is deprecated. Use archiveLogFn instead")),typeof O.resolvePath=="function"&&(O.resolvePathFn=O.resolvePath,E("resolvePath is deprecated. Use resolvePathFn instead")))}function E(A,v=null,C="error"){const T=[`electron-log.transports.file: ${A}`];v&&T.push(v),l.transports.console({data:T,date:new Date,level:C})}function g(A){x();const v=O.resolvePathFn(w,A);return d.provide({filePath:v,writeAsync:!O.sync,writeOptions:O.writeOptions})}function D({fileFilter:A=v=>v.endsWith(".log")}={}){x();const v=r.dirname(O.resolvePathFn(w));return t.existsSync(v)?t.readdirSync(v).map(C=>r.join(v,C)).filter(A).map(C=>{try{return{path:C,lines:t.readFileSync(C,"utf8").split(e.EOL)}}catch{return null}}).filter(Boolean):[]}}function f(l=process.type){switch(l){case"renderer":return"renderer.log";case"worker":return"worker.log";default:return"main.log"}}return Yr}var Kr,Do;function bc(){if(Do)return Kr;Do=1;const{maxDepth:t,toJSON:e}=fr(),{transform:r}=lt();Kr=i;function i(s,{externalApi:n}){return Object.assign(o,{depth:3,eventId:"__ELECTRON_LOG_IPC__",level:s.isDev?"silly":!1,transforms:[e,t]}),n!=null&&n.isElectron()?o:void 0;function o(a){var u;((u=a==null?void 0:a.variables)==null?void 0:u.processType)!=="renderer"&&(n==null||n.sendIpc(o.eventId,{...a,data:r({logger:s,message:a,transport:o})}))}}return Kr}var Jr,Ao;function Sc(){if(Ao)return Jr;Ao=1;const t=ur,e=cr,{transform:r}=lt(),{removeStyles:i}=Ci(),{toJSON:s,maxDepth:n}=fr();Jr=o;function o(a){return Object.assign(u,{client:{name:"electron-application"},depth:6,level:!1,requestOptions:{},transforms:[i,s,n],makeBodyFn({message:h}){return JSON.stringify({client:u.client,data:h.data,date:h.date.getTime(),level:h.level,scope:h.scope,variables:h.variables})},processErrorFn({error:h}){a.processMessage({data:[`electron-log: can't POST ${u.url}`,h],level:"warn"},{transports:["console","file"]})},sendRequestFn({serverUrl:h,requestOptions:c,body:f}){const d=(h.startsWith("https:")?e:t).request(h,{method:"POST",...c,headers:{"Content-Type":"application/json","Content-Length":f.length,...c.headers}});return d.write(f),d.end(),d}});function u(h){if(!u.url)return;const c=u.makeBodyFn({logger:a,message:{...h,data:r({logger:a,message:h,transport:u})},transport:u}),f=u.sendRequestFn({serverUrl:u.url,requestOptions:u.requestOptions,body:Buffer.from(c,"utf8")});f.on("error",l=>u.processErrorFn({error:l,logger:a,message:h,request:f,transport:u}))}}return Jr}var Qr,Fo;function Ca(){if(Fo)return Qr;Fo=1;const t=ba(),e=mc(),r=yc(),i=gc(),s=Ec(),n=bc(),o=Sc();Qr=a;function a({dependencies:u,initializeFn:h}){var f;const c=new t({dependencies:u,errorHandler:new e,eventLogger:new r,initializeFn:h,isDev:(f=u.externalApi)==null?void 0:f.isDev(),logId:"default",transportFactories:{console:i,file:s,ipc:n,remote:o},variables:{processType:"main"}});return c.default=c,c.Logger=t,c.processInternalErrorFn=l=>{c.transports.console.writeFn({message:{data:["Unhandled electron-log error",l],level:"error"}})},c}return Qr}var Zr,_o;function Oc(){if(_o)return Zr;_o=1;const t=oe,e=pc(),{initialize:r}=dc(),i=Ca(),s=new e({electron:t}),n=i({dependencies:{externalApi:s},initializeFn:r});Zr=n,s.onIpc("__ELECTRON_LOG__",(a,u)=>{u.scope&&n.Logger.getInstance(u).scope(u.scope);const h=new Date(u.date);o({...u,date:h.getTime()?h:new Date})}),s.onIpcInvoke("__ELECTRON_LOG__",(a,{cmd:u="",logId:h})=>{switch(u){case"getOptions":return{levels:n.Logger.getInstance({logId:h}).levels,logId:h};default:return o({data:[`Unknown cmd '${u}'`],level:"error"}),{}}});function o(a){var u;(u=n.Logger.getInstance(a))==null||u.processMessage(a)}return Zr}var en,xo;function Tc(){if(xo)return en;xo=1;const t=Sa(),e=Ca(),r=new t;return en=e({dependencies:{externalApi:r}}),en}const Cc=typeof process>"u"||process.type==="renderer"||process.type==="worker",Dc=typeof process=="object"&&process.type==="browser";Cc?(Ea(),er.exports=fc()):Dc?er.exports=Oc():er.exports=Tc();var Ac=er.exports;const se=vt(Ac);var qt,Fc=new Uint8Array(16);function Da(){if(!qt&&(qt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!qt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return qt(Fc)}const _c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function hr(t){return typeof t=="string"&&_c.test(t)}var Se=[];for(var tn=0;tn<256;++tn)Se.push((tn+256).toString(16).substr(1));function pr(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Se[t[e+0]]+Se[t[e+1]]+Se[t[e+2]]+Se[t[e+3]]+"-"+Se[t[e+4]]+Se[t[e+5]]+"-"+Se[t[e+6]]+Se[t[e+7]]+"-"+Se[t[e+8]]+Se[t[e+9]]+"-"+Se[t[e+10]]+Se[t[e+11]]+Se[t[e+12]]+Se[t[e+13]]+Se[t[e+14]]+Se[t[e+15]]).toLowerCase();if(!hr(r))throw TypeError("Stringified UUID is invalid");return r}var No,rn,nn=0,on=0;function xc(t,e,r){var i=e&&r||0,s=e||new Array(16);t=t||{};var n=t.node||No,o=t.clockseq!==void 0?t.clockseq:rn;if(n==null||o==null){var a=t.random||(t.rng||Da)();n==null&&(n=No=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=rn=(a[6]<<8|a[7])&16383)}var u=t.msecs!==void 0?t.msecs:Date.now(),h=t.nsecs!==void 0?t.nsecs:on+1,c=u-nn+(h-on)/1e4;if(c<0&&t.clockseq===void 0&&(o=o+1&16383),(c<0||u>nn)&&t.nsecs===void 0&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");nn=u,on=h,rn=o,u+=122192928e5;var f=((u&268435455)*1e4+h)%4294967296;s[i++]=f>>>24&255,s[i++]=f>>>16&255,s[i++]=f>>>8&255,s[i++]=f&255;var l=u/4294967296*1e4&268435455;s[i++]=l>>>8&255,s[i++]=l&255,s[i++]=l>>>24&15|16,s[i++]=l>>>16&255,s[i++]=o>>>8|128,s[i++]=o&255;for(var d=0;d<6;++d)s[i+d]=n[d];return e||pr(s)}function Aa(t){if(!hr(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function Nc(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var Ic="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Pc="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Fa(t,e,r){function i(s,n,o,a){if(typeof s=="string"&&(s=Nc(s)),typeof n=="string"&&(n=Aa(n)),n.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+s.length);if(u.set(n),u.set(s,n.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(var h=0;h<16;++h)o[a+h]=u[h];return o}return pr(u)}try{i.name=t}catch{}return i.DNS=Ic,i.URL=Pc,i}function Lc(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return Mc($c(Rc(t),t.length*8))}function Mc(t){for(var e=[],r=t.length*32,i="0123456789abcdef",s=0;s<r;s+=8){var n=t[s>>5]>>>s%32&255,o=parseInt(i.charAt(n>>>4&15)+i.charAt(n&15),16);e.push(o)}return e}function _a(t){return(t+64>>>9<<4)+14+1}function $c(t,e){t[e>>5]|=128<<e%32,t[_a(e)-1]=e;for(var r=1732584193,i=-271733879,s=-1732584194,n=271733878,o=0;o<t.length;o+=16){var a=r,u=i,h=s,c=n;r=Ce(r,i,s,n,t[o],7,-680876936),n=Ce(n,r,i,s,t[o+1],12,-389564586),s=Ce(s,n,r,i,t[o+2],17,606105819),i=Ce(i,s,n,r,t[o+3],22,-1044525330),r=Ce(r,i,s,n,t[o+4],7,-176418897),n=Ce(n,r,i,s,t[o+5],12,1200080426),s=Ce(s,n,r,i,t[o+6],17,-1473231341),i=Ce(i,s,n,r,t[o+7],22,-45705983),r=Ce(r,i,s,n,t[o+8],7,1770035416),n=Ce(n,r,i,s,t[o+9],12,-1958414417),s=Ce(s,n,r,i,t[o+10],17,-42063),i=Ce(i,s,n,r,t[o+11],22,-1990404162),r=Ce(r,i,s,n,t[o+12],7,1804603682),n=Ce(n,r,i,s,t[o+13],12,-40341101),s=Ce(s,n,r,i,t[o+14],17,-1502002290),i=Ce(i,s,n,r,t[o+15],22,1236535329),r=De(r,i,s,n,t[o+1],5,-165796510),n=De(n,r,i,s,t[o+6],9,-1069501632),s=De(s,n,r,i,t[o+11],14,643717713),i=De(i,s,n,r,t[o],20,-373897302),r=De(r,i,s,n,t[o+5],5,-701558691),n=De(n,r,i,s,t[o+10],9,38016083),s=De(s,n,r,i,t[o+15],14,-660478335),i=De(i,s,n,r,t[o+4],20,-405537848),r=De(r,i,s,n,t[o+9],5,568446438),n=De(n,r,i,s,t[o+14],9,-1019803690),s=De(s,n,r,i,t[o+3],14,-187363961),i=De(i,s,n,r,t[o+8],20,1163531501),r=De(r,i,s,n,t[o+13],5,-1444681467),n=De(n,r,i,s,t[o+2],9,-51403784),s=De(s,n,r,i,t[o+7],14,1735328473),i=De(i,s,n,r,t[o+12],20,-1926607734),r=Ae(r,i,s,n,t[o+5],4,-378558),n=Ae(n,r,i,s,t[o+8],11,-2022574463),s=Ae(s,n,r,i,t[o+11],16,1839030562),i=Ae(i,s,n,r,t[o+14],23,-35309556),r=Ae(r,i,s,n,t[o+1],4,-1530992060),n=Ae(n,r,i,s,t[o+4],11,1272893353),s=Ae(s,n,r,i,t[o+7],16,-155497632),i=Ae(i,s,n,r,t[o+10],23,-1094730640),r=Ae(r,i,s,n,t[o+13],4,681279174),n=Ae(n,r,i,s,t[o],11,-358537222),s=Ae(s,n,r,i,t[o+3],16,-722521979),i=Ae(i,s,n,r,t[o+6],23,76029189),r=Ae(r,i,s,n,t[o+9],4,-640364487),n=Ae(n,r,i,s,t[o+12],11,-421815835),s=Ae(s,n,r,i,t[o+15],16,530742520),i=Ae(i,s,n,r,t[o+2],23,-995338651),r=Fe(r,i,s,n,t[o],6,-198630844),n=Fe(n,r,i,s,t[o+7],10,1126891415),s=Fe(s,n,r,i,t[o+14],15,-1416354905),i=Fe(i,s,n,r,t[o+5],21,-57434055),r=Fe(r,i,s,n,t[o+12],6,1700485571),n=Fe(n,r,i,s,t[o+3],10,-1894986606),s=Fe(s,n,r,i,t[o+10],15,-1051523),i=Fe(i,s,n,r,t[o+1],21,-2054922799),r=Fe(r,i,s,n,t[o+8],6,1873313359),n=Fe(n,r,i,s,t[o+15],10,-30611744),s=Fe(s,n,r,i,t[o+6],15,-1560198380),i=Fe(i,s,n,r,t[o+13],21,1309151649),r=Fe(r,i,s,n,t[o+4],6,-145523070),n=Fe(n,r,i,s,t[o+11],10,-1120210379),s=Fe(s,n,r,i,t[o+2],15,718787259),i=Fe(i,s,n,r,t[o+9],21,-343485551),r=nt(r,a),i=nt(i,u),s=nt(s,h),n=nt(n,c)}return[r,i,s,n]}function Rc(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(_a(e)),i=0;i<e;i+=8)r[i>>5]|=(t[i/8]&255)<<i%32;return r}function nt(t,e){var r=(t&65535)+(e&65535),i=(t>>16)+(e>>16)+(r>>16);return i<<16|r&65535}function kc(t,e){return t<<e|t>>>32-e}function dr(t,e,r,i,s,n){return nt(kc(nt(nt(e,t),nt(i,n)),s),r)}function Ce(t,e,r,i,s,n,o){return dr(e&r|~e&i,t,e,s,n,o)}function De(t,e,r,i,s,n,o){return dr(e&i|r&~i,t,e,s,n,o)}function Ae(t,e,r,i,s,n,o){return dr(e^r^i,t,e,s,n,o)}function Fe(t,e,r,i,s,n,o){return dr(r^(e|~i),t,e,s,n,o)}var jc=Fa("v3",48,Lc);const qc=jc;function Bc(t,e,r){t=t||{};var i=t.random||(t.rng||Da)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=i[s];return e}return pr(i)}function Uc(t,e,r,i){switch(t){case 0:return e&r^~e&i;case 1:return e^r^i;case 2:return e&r^e&i^r&i;case 3:return e^r^i}}function sn(t,e){return t<<e|t>>>32-e}function Xc(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var i=unescape(encodeURIComponent(t));t=[];for(var s=0;s<i.length;++s)t.push(i.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var n=t.length/4+2,o=Math.ceil(n/16),a=new Array(o),u=0;u<o;++u){for(var h=new Uint32Array(16),c=0;c<16;++c)h[c]=t[u*64+c*4]<<24|t[u*64+c*4+1]<<16|t[u*64+c*4+2]<<8|t[u*64+c*4+3];a[u]=h}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var f=0;f<o;++f){for(var l=new Uint32Array(80),d=0;d<16;++d)l[d]=a[f][d];for(var y=16;y<80;++y)l[y]=sn(l[y-3]^l[y-8]^l[y-14]^l[y-16],1);for(var w=r[0],O=r[1],x=r[2],E=r[3],g=r[4],D=0;D<80;++D){var A=Math.floor(D/20),v=sn(w,5)+Uc(A,O,x,E)+g+e[A]+l[D]>>>0;g=E,E=x,x=sn(O,30)>>>0,O=w,w=v}r[0]=r[0]+w>>>0,r[1]=r[1]+O>>>0,r[2]=r[2]+x>>>0,r[3]=r[3]+E>>>0,r[4]=r[4]+g>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var Vc=Fa("v5",80,Xc);const zc=Vc,Wc="00000000-0000-0000-0000-000000000000";function Hc(t){if(!hr(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const Gc=Object.freeze(Object.defineProperty({__proto__:null,NIL:Wc,parse:Aa,stringify:pr,v1:xc,v3:qc,v4:Bc,v5:zc,validate:hr,version:Hc},Symbol.toStringTag,{value:"Module"})),Yc=oc(Gc),Kc=Ku,Bt=lr,{v1:rm,v4:Jc}=Yc;let Qc=class{constructor(e){Bt(e,'must pass "config"'),Bt(e.url,'must pass "url"'),Bt(e.appkey,'must pass "appkey"'),Bt(e.token,"must first get token from cache or getToken interface"),this._config=e}start(e,r){if(typeof e!="function")throw new Error("expect function onmessage");if(typeof r!="function")throw new Error("expect function onclose");return this._ws=new Kc(this._config.url,{headers:{"X-NLS-Token":this._config.token},perMessageDeflate:!1}),this._ws.on("message",(i,s)=>{e(i,s)}),this._ws.on("close",()=>{r()}),new Promise((i,s)=>{this._ws.on("open",()=>{i()}),this._ws.on("error",n=>{s(n)})})}send(e,r){this._ws!=null&&this._ws.send(e,{binary:r})}setPing(e,r){this._ping=setInterval(()=>{this._ws.ping(r)},e)}clearPing(){this._ping&&clearInterval(this._ping)}shutdown(){this._ws!=null&&(this._ping!=null&&clearInterval(this._ping),this._ws.terminate())}uuid(){return Jc().split("-").join("")}defaultContext(){return{sdk:{name:"nls-nodejs-sdk",version:"0.0.1",language:"nodejs"}}}};var Zc=Qc;ct.EventEmitter;ct.EventEmitter;const el=Zc,tl=ct.EventEmitter;class rl{constructor(e,r=!1){this._event=new tl,this._config=e,r?this._namespace="SpeechLongSynthesizer":this._namespace="SpeechSynthesizer"}defaultStartParams(e){return{voice:e,format:"wav",sample_rate:16e3,volume:50,speech_rate:0,pitch_rate:0,enable_subtitle:!1}}on(e,r){this._event.on(e,r)}async start(e,r,i){this._client=new el(this._config),this._taskid=this._client.uuid();let s={header:{message_id:this._client.uuid(),task_id:this._taskid,namespace:this._namespace,name:"StartSynthesis",appkey:this._config.appkey},payload:e,context:this._client.defaultContext()};return new Promise(async(n,o)=>{try{await this._client.start((a,u)=>{if(u)this._event.emit("data",a);else{let h=a.toString(),c=JSON.parse(h);c.header.name==="MetaInfo"?this._event.emit("meta",h):c.header.name==="SynthesisCompleted"?(this._client.clearPing(),this._client.shutdown(),this._client=null,this._event.emit("completed",h),n(h)):c.header.name==="TaskFailed"&&(this._client.clearPing(),this._client.shutdown(),this._client=null,this._event.emit("TaskFailed",h),this._event.emit("failed",h),o(h))}},()=>{this._event.emit("closed")}),r&&(i||(i=6e3),this._client.setPing(i)),this._client.send(JSON.stringify(s),!1)}catch(a){o(a)}})}shutdown(){this._client!=null&&this._client.shutdown()}}var nl=rl;const il=vt(nl),ir={accessKeyId:"LTAI5tFCh5eoiNZX4n2wEy7Y",accessKeySecret:"XWYRzwspo5z4Ukuo8lKxZX4pUSgQ86",appkey:"JbBUqMYRUt0DrMcK",endpoint:"https://nls-gateway.aliyuncs.com",regionId:"cn-shanghai",ttsUrl:"wss://nls-gateway-cn-shanghai.aliyuncs.com/ws/v1"};var mr={exports:{}},wt={},di={exports:{}},Ut={exports:{}},an,Io;function xa(){if(Io)return an;Io=1;var t=1e3,e=t*60,r=e*60,i=r*24,s=i*7,n=i*365.25;an=function(c,f){f=f||{};var l=typeof c;if(l==="string"&&c.length>0)return o(c);if(l==="number"&&isFinite(c))return f.long?u(c):a(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function o(c){if(c=String(c),!(c.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(f){var l=parseFloat(f[1]),d=(f[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return l*n;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*i;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*e;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}function a(c){var f=Math.abs(c);return f>=i?Math.round(c/i)+"d":f>=r?Math.round(c/r)+"h":f>=e?Math.round(c/e)+"m":f>=t?Math.round(c/t)+"s":c+"ms"}function u(c){var f=Math.abs(c);return f>=i?h(c,f,i,"day"):f>=r?h(c,f,r,"hour"):f>=e?h(c,f,e,"minute"):f>=t?h(c,f,t,"second"):c+" ms"}function h(c,f,l,d){var y=f>=l*1.5;return Math.round(c/l)+" "+d+(y?"s":"")}return an}var un,Po;function Na(){if(Po)return un;Po=1;function t(e){i.debug=i,i.default=i,i.coerce=h,i.disable=a,i.enable=n,i.enabled=u,i.humanize=xa(),i.destroy=c,Object.keys(e).forEach(f=>{i[f]=e[f]}),i.names=[],i.skips=[],i.formatters={};function r(f){let l=0;for(let d=0;d<f.length;d++)l=(l<<5)-l+f.charCodeAt(d),l|=0;return i.colors[Math.abs(l)%i.colors.length]}i.selectColor=r;function i(f){let l,d=null,y,w;function O(...x){if(!O.enabled)return;const E=O,g=Number(new Date),D=g-(l||g);E.diff=D,E.prev=l,E.curr=g,l=g,x[0]=i.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let A=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(C,T)=>{if(C==="%%")return"%";A++;const p=i.formatters[T];if(typeof p=="function"){const b=x[A];C=p.call(E,b),x.splice(A,1),A--}return C}),i.formatArgs.call(E,x),(E.log||i.log).apply(E,x)}return O.namespace=f,O.useColors=i.useColors(),O.color=i.selectColor(f),O.extend=s,O.destroy=i.destroy,Object.defineProperty(O,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(y!==i.namespaces&&(y=i.namespaces,w=i.enabled(f)),w),set:x=>{d=x}}),typeof i.init=="function"&&i.init(O),O}function s(f,l){const d=i(this.namespace+(typeof l>"u"?":":l)+f);return d.log=this.log,d}function n(f){i.save(f),i.namespaces=f,i.names=[],i.skips=[];const l=(typeof f=="string"?f:"").trim().replace(" ",",").split(",").filter(Boolean);for(const d of l)d[0]==="-"?i.skips.push(d.slice(1)):i.names.push(d)}function o(f,l){let d=0,y=0,w=-1,O=0;for(;d<f.length;)if(y<l.length&&(l[y]===f[d]||l[y]==="*"))l[y]==="*"?(w=y,O=d,y++):(d++,y++);else if(w!==-1)y=w+1,O++,d=O;else return!1;for(;y<l.length&&l[y]==="*";)y++;return y===l.length}function a(){const f=[...i.names,...i.skips.map(l=>"-"+l)].join(",");return i.enable(""),f}function u(f){for(const l of i.skips)if(o(f,l))return!1;for(const l of i.names)if(o(f,l))return!0;return!1}function h(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}return un=t,un}var Lo;function ol(){return Lo||(Lo=1,function(t,e){e.formatArgs=i,e.save=s,e.load=n,e.useColors=r,e.storage=o(),e.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const h="color: "+this.color;u.splice(1,0,h,"color: inherit");let c=0,f=0;u[0].replace(/%[a-zA-Z%]/g,l=>{l!=="%%"&&(c++,l==="%c"&&(f=c))}),u.splice(f,0,h)}e.log=console.debug||console.log||(()=>{});function s(u){try{u?e.storage.setItem("debug",u):e.storage.removeItem("debug")}catch{}}function n(){let u;try{u=e.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=process.env.DEBUG),u}function o(){try{return localStorage}catch{}}t.exports=Na()(e);const{formatters:a}=t.exports;a.j=function(u){try{return JSON.stringify(u)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}(Ut,Ut.exports)),Ut.exports}var Xt={exports:{}},cn,Mo;function sl(){return Mo||(Mo=1,cn=(t,e=process.argv)=>{const r=t.startsWith("-")?"":t.length===1?"-":"--",i=e.indexOf(r+t),s=e.indexOf("--");return i!==-1&&(s===-1||i<s)}),cn}var ln,$o;function Ia(){if($o)return ln;$o=1;const t=Ye,e=Ti,r=sl(),{env:i}=process;let s;r("no-color")||r("no-colors")||r("color=false")||r("color=never")?s=0:(r("color")||r("colors")||r("color=true")||r("color=always"))&&(s=1),"FORCE_COLOR"in i&&(i.FORCE_COLOR==="true"?s=1:i.FORCE_COLOR==="false"?s=0:s=i.FORCE_COLOR.length===0?1:Math.min(parseInt(i.FORCE_COLOR,10),3));function n(u){return u===0?!1:{level:u,hasBasic:!0,has256:u>=2,has16m:u>=3}}function o(u,h){if(s===0)return 0;if(r("color=16m")||r("color=full")||r("color=truecolor"))return 3;if(r("color=256"))return 2;if(u&&!h&&s===void 0)return 0;const c=s||0;if(i.TERM==="dumb")return c;if(process.platform==="win32"){const f=t.release().split(".");return Number(f[0])>=10&&Number(f[2])>=10586?Number(f[2])>=14931?3:2:1}if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(f=>f in i)||i.CI_NAME==="codeship"?1:c;if("TEAMCITY_VERSION"in i)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION)?1:0;if(i.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in i){const f=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return f>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)||"COLORTERM"in i?1:c}function a(u){const h=o(u,u&&u.isTTY);return n(h)}return ln={supportsColor:a,stdout:n(o(!0,e.isatty(1))),stderr:n(o(!0,e.isatty(2)))},ln}var Ro;function al(){return Ro||(Ro=1,function(t,e){const r=Ti,i=$t;e.init=c,e.log=a,e.formatArgs=n,e.save=u,e.load=h,e.useColors=s,e.destroy=i.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),e.colors=[6,2,3,4,5,1];try{const l=Ia();l&&(l.stderr||l).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}e.inspectOpts=Object.keys(process.env).filter(l=>/^debug_/i.test(l)).reduce((l,d)=>{const y=d.substring(6).toLowerCase().replace(/_([a-z])/g,(O,x)=>x.toUpperCase());let w=process.env[d];return/^(yes|on|true|enabled)$/i.test(w)?w=!0:/^(no|off|false|disabled)$/i.test(w)?w=!1:w==="null"?w=null:w=Number(w),l[y]=w,l},{});function s(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:r.isatty(process.stderr.fd)}function n(l){const{namespace:d,useColors:y}=this;if(y){const w=this.color,O="\x1B[3"+(w<8?w:"8;5;"+w),x=`  ${O};1m${d} \x1B[0m`;l[0]=x+l[0].split(`
`).join(`
`+x),l.push(O+"m+"+t.exports.humanize(this.diff)+"\x1B[0m")}else l[0]=o()+d+" "+l[0]}function o(){return e.inspectOpts.hideDate?"":new Date().toISOString()+" "}function a(...l){return process.stderr.write(i.formatWithOptions(e.inspectOpts,...l)+`
`)}function u(l){l?process.env.DEBUG=l:delete process.env.DEBUG}function h(){return process.env.DEBUG}function c(l){l.inspectOpts={};const d=Object.keys(e.inspectOpts);for(let y=0;y<d.length;y++)l.inspectOpts[d[y]]=e.inspectOpts[d[y]]}t.exports=Na()(e);const{formatters:f}=t.exports;f.o=function(l){return this.inspectOpts.colors=this.useColors,i.inspect(l,this.inspectOpts).split(`
`).map(d=>d.trim()).join(" ")},f.O=function(l){return this.inspectOpts.colors=this.useColors,i.inspect(l,this.inspectOpts)}}(Xt,Xt.exports)),Xt.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?di.exports=ol():di.exports=al();var Pa=di.exports;const ko=Ju,La=ur,Ma=cr,ul=Oi.parse,cl=Oi.format,Ue=Pa("httpx:body"),Vt=Pa("httpx:header"),ll=new La.Agent({keepAlive:!0}),fl=new Ma.Agent({keepAlive:!0}),fn=3e3,et=Symbol("TIMER::READ_TIMER"),mi=Symbol("TIMER::READ_TIME_OUT"),$a=Symbol("TIMER::READ_TIMER_START_AT");function Ra(t){switch(t.headers["content-encoding"]){case"gzip":return t.pipe(ko.createGunzip());case"deflate":return t.pipe(ko.createInflate());default:return t}}var jo=function(t,e,r){return t.name=e+t.name,t.message=`${r}. ${t.message}`,t};const Ot=function(t){return t!==null&&!isNaN(t)};wt.request=function(t,e){e||(e={});const r=typeof t=="string"?ul(t):t;let i,s;Ot(e.readTimeout)||Ot(e.connectTimeout)?(i=Ot(e.readTimeout)?Number(e.readTimeout):fn,s=Ot(e.connectTimeout)?Number(e.connectTimeout):fn):Ot(e.timeout)?i=s=Number(e.timeout):i=s=fn;const n=r.protocol==="https:",o=(e.method||"GET").toUpperCase(),a=n?fl:ll,u=e.agent||a;var h={host:r.hostname||"localhost",path:r.path||"/",method:o,port:r.port||(r.protocol==="https:"?443:80),agent:u,headers:e.headers||{},key:e.key||"",cert:e.cert||"",ca:e.ca||"",timeout:s};n&&typeof e.rejectUnauthorized<"u"&&(h.rejectUnauthorized=e.rejectUnauthorized),e.compression&&(h.headers["accept-encoding"]="gzip,deflate");const c=n?Ma:La;return typeof e.beforeRequest=="function"&&(h=e.beforeRequest(h)),new Promise((f,l)=>{const d=c.request(h),y=e.data;var w=g=>{Vt.enabled&&(g.req._header.split(`\r
`).forEach(A=>{Vt("> %s",A)}),Vt("< HTTP/%s %s %s",g.httpVersion,g.statusCode,g.statusMessage),Object.keys(g.headers).forEach(A=>{Vt("< %s: %s",A,g.headers[A])})),f(g)},O=g=>{g.message+=`${o} ${cl(r)} failed.`,d.socket&&d.socket[et]&&clearTimeout(d.socket[et]),l(g)},x=g=>{d.abort(),O(g)};const E=function(g){const D=setTimeout(()=>{g[et]&&(clearTimeout(g[et]),g[et]=null);var A=new Error,v=`ReadTimeout(${i})`;x(jo(A,"RequestTimeout",v))},i);g[mi]=i,g[et]=D,g[$a]=Date.now(),D.unref()};!y||typeof y=="string"||y instanceof Buffer?(Ue.enabled&&Ue(y?typeof y=="string"?y:`Buffer <ignored>, Buffer length: ${y.length}`:"<no request body>"),d.end(y)):typeof y.pipe=="function"&&(y.pipe(d),Ue.enabled&&Ue("<request body is a stream>"),y.once("error",g=>{x(jo(g,"HttpX","Stream occor error"))})),d.on("timeout",()=>{var g=new Error;g.name="RequestTimeoutError",g.message=`ConnectTimeout: Connect ${t} failed.`,d.destroy(),l(g)}),d.on("response",w),d.on("error",O),d.once("socket",function(g){g.readyState==="opening"?g.once("connect",function(){E(g)}):E(g)})})};wt.read=function(t,e){const r=Ra(t);return new Promise((i,s)=>{const n=t.socket||t.client,o=()=>{const O=t.req;var x=new Error;return x.name="RequestTimeoutError",x.message=`ReadTimeout: ${n[mi]}. ${O.method} ${O.path} failed.`,x};let a;const u=n[et];if(!u){s(o());return}const h=n[mi]-(Date.now()-n[$a]);if(clearTimeout(u),h<=0){s(o());return}a=setTimeout(function(){s(o())},h);var c,f,l,d=function(){r.removeListener("error",c),r.removeListener("data",f),r.removeListener("end",l),a&&clearTimeout(a)};const y=[];var w=0;f=function(O){y.push(O),w+=O.length},c=function(O){d(),s(O)},l=function(){d();var O=Buffer.concat(y,w);if(Ue(""),e){const x=O.toString(e);return Ue(x),i(x)}Ue.enabled&&Ue(O.toString()),i(O)},r.on("error",c),r.on("data",f),r.on("end",l)})};function hl(t){return new Promise((e,r)=>{var i,s,n,o=function(){t.removeListener("error",n),t.removeListener("end",s),t.removeListener("readable",i)};i=function(){o(),e(!1)},s=function(){o(),e(!0)},n=function(a){o(),r(a)},t.once("readable",i),t.once("end",s),t.once("error",n)})}class ka{constructor(e,r,i,s){this.id=e,this.event=r,this.data=i,this.retry=s}}wt.Event=ka;const qo="data:",Bo="event:",Uo="id:",Xo="retry:";function pl(t){for(let e=0;e<t.length;e++){const r=t.charAt(e);if(r<"0"||r>"9")return!1}return t.length>0}function dl(t,e){const r=t+e;let i=0;const s=[];for(let o=0;o<r.length-1;o++){const a=r[o],u=r[o+1];if(a===`
`&&u===`
`){const c=r.substring(i,o).split(`
`),f=new ka;c.forEach(l=>{if(l.startsWith(qo))f.data=l.substring(qo.length).trim();else if(l.startsWith(Bo))f.event=l.substring(Bo.length).trim();else if(l.startsWith(Uo))f.id=l.substring(Uo.length).trim();else if(l.startsWith(Xo)){const d=l.substring(Xo.length).trim();pl(d)&&(f.retry=parseInt(d,10))}else l.startsWith(":")}),s.push(f),i=o+2}}const n=r.substring(i);return[s,n]}wt.readAsSSE=async function*(t){const e=Ra(t),r=t.socket||t.client;clearTimeout(r[et]);let i="";for(;;){if(await hl(e))return;let n;for(;(n=e.read())!==null;){const[o,a]=dl(i,n.toString());if(i=a,o&&o.length>0)for(const u of o)yield u}}};var Di={};(function(t){const e=ae,r=Ye,i=je;t.loadJSONSync=function(s){var n=e.readFileSync(s,"utf8");n.charCodeAt(0)===65279&&(n=n.slice(1));try{return JSON.parse(n)}catch(o){throw o.message=s+": "+o.message,o}},t.encode=function(s,n){return typeof s!="string"&&(s=""+s),new Buffer(s,n)},t.makeHasher=function(s){return function(n,o){var a=i.createHash(s);return a.update(n),a.digest(o)}},t.createHash=t.makeHasher,t.md5=t.makeHasher("md5"),t.createHmac=function(s){return function(n,o,a){return i.createHmac(s,o).update(n).digest(a)}},t.sha1=t.createHmac("sha1"),t.random=function(s,n){return Math.floor(s+Math.random()*(n-s))},t.makeNonce=function(){var s=0,n;const o=r.hostname(),a=process.pid;return function(){var u=Math.floor(Math.random()*1e12);u===n?s++:s=0,n=u;var h=`${o}${a}${u}${s}`;return t.md5(h,"hex")}}(),t.pad2=function(s){return s<10?"0"+s:""+s},t.pad3=function(s){return s<10?"00"+s:s<100?"0"+s:""+s},t.getYYYYMMDD=function(s){var n=s.getFullYear(),o=t.pad2(s.getMonth()+1),a=t.pad2(s.getDate());return""+n+o+a},t.sleep=function(s){return new Promise(n=>{setTimeout(n,s)})},t.getIPv4=function(){for(var s=r.networkInterfaces(),n=Object.keys(s),o=0;o<n.length;o++)for(var a=n[o],u=s[a],h=0;h<u.length;h++){var c=u[h];if(!c.internal&&c.family==="IPv4")return c.address}return""},t.getMac=function(){for(var s=r.networkInterfaces(),n=Object.keys(s),o=0;o<n.length;o++)for(var a=n[o],u=s[a],h=0;h<u.length;h++){var c=u[h];if(!c.internal&&c.family==="IPv4")return c.mac}return"00:00:00:00:00:00"}})(Di);var yr={exports:{}},ja={exports:{}},qa={exports:{}};(function(t){(function(e){var r,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,n=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",u=1e14,h=14,c=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],l=1e7,d=1e9;function y(v){var C,T,p,b=Y.prototype={constructor:Y,toString:null,valueOf:null},F=new Y(1),P=20,U=4,B=-7,q=21,z=-1e7,W=1e7,K=!1,J=1,Z=0,re={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},ue="0123456789abcdefghijklmnopqrstuvwxyz",pe=!0;function Y(m,N){var I,k,M,$,V,L,R,X,j=this;if(!(j instanceof Y))return new Y(m,N);if(N==null){if(m&&m._isBigNumber===!0){j.s=m.s,!m.c||m.e>W?j.c=j.e=null:m.e<z?j.c=[j.e=0]:(j.e=m.e,j.c=m.c.slice());return}if((L=typeof m=="number")&&m*0==0){if(j.s=1/m<0?(m=-m,-1):1,m===~~m){for($=0,V=m;V>=10;V/=10,$++);$>W?j.c=j.e=null:(j.e=$,j.c=[m]);return}X=String(m)}else{if(!i.test(X=String(m)))return p(j,X,L);j.s=X.charCodeAt(0)==45?(X=X.slice(1),-1):1}($=X.indexOf("."))>-1&&(X=X.replace(".","")),(V=X.search(/e/i))>0?($<0&&($=V),$+=+X.slice(V+1),X=X.substring(0,V)):$<0&&($=X.length)}else{if(E(N,2,ue.length,"Base"),N==10&&pe)return j=new Y(m),S(j,P+j.e+1,U);if(X=String(m),L=typeof m=="number"){if(m*0!=0)return p(j,X,L,N);if(j.s=1/m<0?(X=X.slice(1),-1):1,Y.DEBUG&&X.replace(/^0\.0*|\./,"").length>15)throw Error(a+m)}else j.s=X.charCodeAt(0)===45?(X=X.slice(1),-1):1;for(I=ue.slice(0,N),$=V=0,R=X.length;V<R;V++)if(I.indexOf(k=X.charAt(V))<0){if(k=="."){if(V>$){$=R;continue}}else if(!M&&(X==X.toUpperCase()&&(X=X.toLowerCase())||X==X.toLowerCase()&&(X=X.toUpperCase()))){M=!0,V=-1,$=0;continue}return p(j,String(m),L,N)}L=!1,X=T(X,N,10,j.s),($=X.indexOf("."))>-1?X=X.replace(".",""):$=X.length}for(V=0;X.charCodeAt(V)===48;V++);for(R=X.length;X.charCodeAt(--R)===48;);if(X=X.slice(V,++R)){if(R-=V,L&&Y.DEBUG&&R>15&&(m>c||m!==n(m)))throw Error(a+j.s*m);if(($=$-V-1)>W)j.c=j.e=null;else if($<z)j.c=[j.e=0];else{if(j.e=$,j.c=[],V=($+1)%h,$<0&&(V+=h),V<R){for(V&&j.c.push(+X.slice(0,V)),R-=h;V<R;)j.c.push(+X.slice(V,V+=h));V=h-(X=X.slice(V)).length}else V-=R;for(;V--;X+="0");j.c.push(+X)}}else j.c=[j.e=0]}Y.clone=y,Y.ROUND_UP=0,Y.ROUND_DOWN=1,Y.ROUND_CEIL=2,Y.ROUND_FLOOR=3,Y.ROUND_HALF_UP=4,Y.ROUND_HALF_DOWN=5,Y.ROUND_HALF_EVEN=6,Y.ROUND_HALF_CEIL=7,Y.ROUND_HALF_FLOOR=8,Y.EUCLID=9,Y.config=Y.set=function(m){var N,I;if(m!=null)if(typeof m=="object"){if(m.hasOwnProperty(N="DECIMAL_PLACES")&&(I=m[N],E(I,0,d,N),P=I),m.hasOwnProperty(N="ROUNDING_MODE")&&(I=m[N],E(I,0,8,N),U=I),m.hasOwnProperty(N="EXPONENTIAL_AT")&&(I=m[N],I&&I.pop?(E(I[0],-d,0,N),E(I[1],0,d,N),B=I[0],q=I[1]):(E(I,-d,d,N),B=-(q=I<0?-I:I))),m.hasOwnProperty(N="RANGE"))if(I=m[N],I&&I.pop)E(I[0],-d,-1,N),E(I[1],1,d,N),z=I[0],W=I[1];else if(E(I,-d,d,N),I)z=-(W=I<0?-I:I);else throw Error(o+N+" cannot be zero: "+I);if(m.hasOwnProperty(N="CRYPTO"))if(I=m[N],I===!!I)if(I)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))K=I;else throw K=!I,Error(o+"crypto unavailable");else K=I;else throw Error(o+N+" not true or false: "+I);if(m.hasOwnProperty(N="MODULO_MODE")&&(I=m[N],E(I,0,9,N),J=I),m.hasOwnProperty(N="POW_PRECISION")&&(I=m[N],E(I,0,d,N),Z=I),m.hasOwnProperty(N="FORMAT"))if(I=m[N],typeof I=="object")re=I;else throw Error(o+N+" not an object: "+I);if(m.hasOwnProperty(N="ALPHABET"))if(I=m[N],typeof I=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(I))pe=I.slice(0,10)=="0123456789",ue=I;else throw Error(o+N+" invalid: "+I)}else throw Error(o+"Object expected: "+m);return{DECIMAL_PLACES:P,ROUNDING_MODE:U,EXPONENTIAL_AT:[B,q],RANGE:[z,W],CRYPTO:K,MODULO_MODE:J,POW_PRECISION:Z,FORMAT:re,ALPHABET:ue}},Y.isBigNumber=function(m){if(!m||m._isBigNumber!==!0)return!1;if(!Y.DEBUG)return!0;var N,I,k=m.c,M=m.e,$=m.s;e:if({}.toString.call(k)=="[object Array]"){if(($===1||$===-1)&&M>=-d&&M<=d&&M===n(M)){if(k[0]===0){if(M===0&&k.length===1)return!0;break e}if(N=(M+1)%h,N<1&&(N+=h),String(k[0]).length==N){for(N=0;N<k.length;N++)if(I=k[N],I<0||I>=u||I!==n(I))break e;if(I!==0)return!0}}}else if(k===null&&M===null&&($===null||$===1||$===-1))return!0;throw Error(o+"Invalid BigNumber: "+m)},Y.maximum=Y.max=function(){return Re(arguments,-1)},Y.minimum=Y.min=function(){return Re(arguments,1)},Y.random=function(){var m=9007199254740992,N=Math.random()*m&2097151?function(){return n(Math.random()*m)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(I){var k,M,$,V,L,R=0,X=[],j=new Y(F);if(I==null?I=P:E(I,0,d),V=s(I/h),K)if(crypto.getRandomValues){for(k=crypto.getRandomValues(new Uint32Array(V*=2));R<V;)L=k[R]*131072+(k[R+1]>>>11),L>=9e15?(M=crypto.getRandomValues(new Uint32Array(2)),k[R]=M[0],k[R+1]=M[1]):(X.push(L%1e14),R+=2);R=V/2}else if(crypto.randomBytes){for(k=crypto.randomBytes(V*=7);R<V;)L=(k[R]&31)*281474976710656+k[R+1]*1099511627776+k[R+2]*4294967296+k[R+3]*16777216+(k[R+4]<<16)+(k[R+5]<<8)+k[R+6],L>=9e15?crypto.randomBytes(7).copy(k,R):(X.push(L%1e14),R+=7);R=V/7}else throw K=!1,Error(o+"crypto unavailable");if(!K)for(;R<V;)L=N(),L<9e15&&(X[R++]=L%1e14);for(V=X[--R],I%=h,V&&I&&(L=f[h-I],X[R]=n(V/L)*L);X[R]===0;X.pop(),R--);if(R<0)X=[$=0];else{for($=-1;X[0]===0;X.splice(0,1),$-=h);for(R=1,L=X[0];L>=10;L/=10,R++);R<h&&($-=h-R)}return j.e=$,j.c=X,j}}(),Y.sum=function(){for(var m=1,N=arguments,I=new Y(N[0]);m<N.length;)I=I.plus(N[m++]);return I},T=function(){var m="0123456789";function N(I,k,M,$){for(var V,L=[0],R,X=0,j=I.length;X<j;){for(R=L.length;R--;L[R]*=k);for(L[0]+=$.indexOf(I.charAt(X++)),V=0;V<L.length;V++)L[V]>M-1&&(L[V+1]==null&&(L[V+1]=0),L[V+1]+=L[V]/M|0,L[V]%=M)}return L.reverse()}return function(I,k,M,$,V){var L,R,X,j,G,ee,te,fe,me=I.indexOf("."),we=P,le=U;for(me>=0&&(j=Z,Z=0,I=I.replace(".",""),fe=new Y(k),ee=fe.pow(I.length-me),Z=j,fe.c=N(A(O(ee.c),ee.e,"0"),10,M,m),fe.e=fe.c.length),te=N(I,k,M,V?(L=ue,m):(L=m,ue)),X=j=te.length;te[--j]==0;te.pop());if(!te[0])return L.charAt(0);if(me<0?--X:(ee.c=te,ee.e=X,ee.s=$,ee=C(ee,fe,we,le,M),te=ee.c,G=ee.r,X=ee.e),R=X+we+1,me=te[R],j=M/2,G=G||R<0||te[R+1]!=null,G=le<4?(me!=null||G)&&(le==0||le==(ee.s<0?3:2)):me>j||me==j&&(le==4||G||le==6&&te[R-1]&1||le==(ee.s<0?8:7)),R<1||!te[0])I=G?A(L.charAt(1),-we,L.charAt(0)):L.charAt(0);else{if(te.length=R,G)for(--M;++te[--R]>M;)te[R]=0,R||(++X,te=[1].concat(te));for(j=te.length;!te[--j];);for(me=0,I="";me<=j;I+=L.charAt(te[me++]));I=A(I,X,L.charAt(0))}return I}}(),C=function(){function m(k,M,$){var V,L,R,X,j=0,G=k.length,ee=M%l,te=M/l|0;for(k=k.slice();G--;)R=k[G]%l,X=k[G]/l|0,V=te*R+X*ee,L=ee*R+V%l*l+j,j=(L/$|0)+(V/l|0)+te*X,k[G]=L%$;return j&&(k=[j].concat(k)),k}function N(k,M,$,V){var L,R;if($!=V)R=$>V?1:-1;else for(L=R=0;L<$;L++)if(k[L]!=M[L]){R=k[L]>M[L]?1:-1;break}return R}function I(k,M,$,V){for(var L=0;$--;)k[$]-=L,L=k[$]<M[$]?1:0,k[$]=L*V+k[$]-M[$];for(;!k[0]&&k.length>1;k.splice(0,1));}return function(k,M,$,V,L){var R,X,j,G,ee,te,fe,me,we,le,he,Te,kt,Or,Tr,qe,St,Me=k.s==M.s?1:-1,xe=k.c,ye=M.c;if(!xe||!xe[0]||!ye||!ye[0])return new Y(!k.s||!M.s||(xe?ye&&xe[0]==ye[0]:!ye)?NaN:xe&&xe[0]==0||!ye?Me*0:Me/0);for(me=new Y(Me),we=me.c=[],X=k.e-M.e,Me=$+X+1,L||(L=u,X=w(k.e/h)-w(M.e/h),Me=Me/h|0),j=0;ye[j]==(xe[j]||0);j++);if(ye[j]>(xe[j]||0)&&X--,Me<0)we.push(1),G=!0;else{for(Or=xe.length,qe=ye.length,j=0,Me+=2,ee=n(L/(ye[0]+1)),ee>1&&(ye=m(ye,ee,L),xe=m(xe,ee,L),qe=ye.length,Or=xe.length),kt=qe,le=xe.slice(0,qe),he=le.length;he<qe;le[he++]=0);St=ye.slice(),St=[0].concat(St),Tr=ye[0],ye[1]>=L/2&&Tr++;do{if(ee=0,R=N(ye,le,qe,he),R<0){if(Te=le[0],qe!=he&&(Te=Te*L+(le[1]||0)),ee=n(Te/Tr),ee>1)for(ee>=L&&(ee=L-1),te=m(ye,ee,L),fe=te.length,he=le.length;N(te,le,fe,he)==1;)ee--,I(te,qe<fe?St:ye,fe,L),fe=te.length,R=1;else ee==0&&(R=ee=1),te=ye.slice(),fe=te.length;if(fe<he&&(te=[0].concat(te)),I(le,te,he,L),he=le.length,R==-1)for(;N(ye,le,qe,he)<1;)ee++,I(le,qe<he?St:ye,he,L),he=le.length}else R===0&&(ee++,le=[0]);we[j++]=ee,le[0]?le[he++]=xe[kt]||0:(le=[xe[kt]],he=1)}while((kt++<Or||le[0]!=null)&&Me--);G=le[0]!=null,we[0]||we.splice(0,1)}if(L==u){for(j=1,Me=we[0];Me>=10;Me/=10,j++);S(me,$+(me.e=j+X*h-1)+1,V,G)}else me.e=X,me.r=+G;return me}}();function ve(m,N,I,k){var M,$,V,L,R;if(I==null?I=U:E(I,0,8),!m.c)return m.toString();if(M=m.c[0],V=m.e,N==null)R=O(m.c),R=k==1||k==2&&(V<=B||V>=q)?D(R,V):A(R,V,"0");else if(m=S(new Y(m),N,I),$=m.e,R=O(m.c),L=R.length,k==1||k==2&&(N<=$||$<=B)){for(;L<N;R+="0",L++);R=D(R,$)}else if(N-=V,R=A(R,$,"0"),$+1>L){if(--N>0)for(R+=".";N--;R+="0");}else if(N+=$-L,N>0)for($+1==L&&(R+=".");N--;R+="0");return m.s<0&&M?"-"+R:R}function Re(m,N){for(var I,k,M=1,$=new Y(m[0]);M<m.length;M++)k=new Y(m[M]),(!k.s||(I=x($,k))===N||I===0&&$.s===N)&&($=k);return $}function _(m,N,I){for(var k=1,M=N.length;!N[--M];N.pop());for(M=N[0];M>=10;M/=10,k++);return(I=k+I*h-1)>W?m.c=m.e=null:I<z?m.c=[m.e=0]:(m.e=I,m.c=N),m}p=function(){var m=/^(-?)0([xbo])(?=\w[\w.]*$)/i,N=/^([^.]+)\.$/,I=/^\.([^.]+)$/,k=/^-?(Infinity|NaN)$/,M=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function($,V,L,R){var X,j=L?V:V.replace(M,"");if(k.test(j))$.s=isNaN(j)?null:j<0?-1:1;else{if(!L&&(j=j.replace(m,function(G,ee,te){return X=(te=te.toLowerCase())=="x"?16:te=="b"?2:8,!R||R==X?ee:G}),R&&(X=R,j=j.replace(N,"$1").replace(I,"0.$1")),V!=j))return new Y(j,X);if(Y.DEBUG)throw Error(o+"Not a"+(R?" base "+R:"")+" number: "+V);$.s=null}$.c=$.e=null}}();function S(m,N,I,k){var M,$,V,L,R,X,j,G=m.c,ee=f;if(G){e:{for(M=1,L=G[0];L>=10;L/=10,M++);if($=N-M,$<0)$+=h,V=N,R=G[X=0],j=n(R/ee[M-V-1]%10);else if(X=s(($+1)/h),X>=G.length)if(k){for(;G.length<=X;G.push(0));R=j=0,M=1,$%=h,V=$-h+1}else break e;else{for(R=L=G[X],M=1;L>=10;L/=10,M++);$%=h,V=$-h+M,j=V<0?0:n(R/ee[M-V-1]%10)}if(k=k||N<0||G[X+1]!=null||(V<0?R:R%ee[M-V-1]),k=I<4?(j||k)&&(I==0||I==(m.s<0?3:2)):j>5||j==5&&(I==4||k||I==6&&($>0?V>0?R/ee[M-V]:0:G[X-1])%10&1||I==(m.s<0?8:7)),N<1||!G[0])return G.length=0,k?(N-=m.e+1,G[0]=ee[(h-N%h)%h],m.e=-N||0):G[0]=m.e=0,m;if($==0?(G.length=X,L=1,X--):(G.length=X+1,L=ee[h-$],G[X]=V>0?n(R/ee[M-V]%ee[V])*L:0),k)for(;;)if(X==0){for($=1,V=G[0];V>=10;V/=10,$++);for(V=G[0]+=L,L=1;V>=10;V/=10,L++);$!=L&&(m.e++,G[0]==u&&(G[0]=1));break}else{if(G[X]+=L,G[X]!=u)break;G[X--]=0,L=1}for($=G.length;G[--$]===0;G.pop());}m.e>W?m.c=m.e=null:m.e<z&&(m.c=[m.e=0])}return m}function H(m){var N,I=m.e;return I===null?m.toString():(N=O(m.c),N=I<=B||I>=q?D(N,I):A(N,I,"0"),m.s<0?"-"+N:N)}return b.absoluteValue=b.abs=function(){var m=new Y(this);return m.s<0&&(m.s=1),m},b.comparedTo=function(m,N){return x(this,new Y(m,N))},b.decimalPlaces=b.dp=function(m,N){var I,k,M,$=this;if(m!=null)return E(m,0,d),N==null?N=U:E(N,0,8),S(new Y($),m+$.e+1,N);if(!(I=$.c))return null;if(k=((M=I.length-1)-w(this.e/h))*h,M=I[M])for(;M%10==0;M/=10,k--);return k<0&&(k=0),k},b.dividedBy=b.div=function(m,N){return C(this,new Y(m,N),P,U)},b.dividedToIntegerBy=b.idiv=function(m,N){return C(this,new Y(m,N),0,1)},b.exponentiatedBy=b.pow=function(m,N){var I,k,M,$,V,L,R,X,j,G=this;if(m=new Y(m),m.c&&!m.isInteger())throw Error(o+"Exponent not an integer: "+H(m));if(N!=null&&(N=new Y(N)),L=m.e>14,!G.c||!G.c[0]||G.c[0]==1&&!G.e&&G.c.length==1||!m.c||!m.c[0])return j=new Y(Math.pow(+H(G),L?m.s*(2-g(m)):+H(m))),N?j.mod(N):j;if(R=m.s<0,N){if(N.c?!N.c[0]:!N.s)return new Y(NaN);k=!R&&G.isInteger()&&N.isInteger(),k&&(G=G.mod(N))}else{if(m.e>9&&(G.e>0||G.e<-1||(G.e==0?G.c[0]>1||L&&G.c[1]>=24e7:G.c[0]<8e13||L&&G.c[0]<=9999975e7)))return $=G.s<0&&g(m)?-0:0,G.e>-1&&($=1/$),new Y(R?1/$:$);Z&&($=s(Z/h+2))}for(L?(I=new Y(.5),R&&(m.s=1),X=g(m)):(M=Math.abs(+H(m)),X=M%2),j=new Y(F);;){if(X){if(j=j.times(G),!j.c)break;$?j.c.length>$&&(j.c.length=$):k&&(j=j.mod(N))}if(M){if(M=n(M/2),M===0)break;X=M%2}else if(m=m.times(I),S(m,m.e+1,1),m.e>14)X=g(m);else{if(M=+H(m),M===0)break;X=M%2}G=G.times(G),$?G.c&&G.c.length>$&&(G.c.length=$):k&&(G=G.mod(N))}return k?j:(R&&(j=F.div(j)),N?j.mod(N):$?S(j,Z,U,V):j)},b.integerValue=function(m){var N=new Y(this);return m==null?m=U:E(m,0,8),S(N,N.e+1,m)},b.isEqualTo=b.eq=function(m,N){return x(this,new Y(m,N))===0},b.isFinite=function(){return!!this.c},b.isGreaterThan=b.gt=function(m,N){return x(this,new Y(m,N))>0},b.isGreaterThanOrEqualTo=b.gte=function(m,N){return(N=x(this,new Y(m,N)))===1||N===0},b.isInteger=function(){return!!this.c&&w(this.e/h)>this.c.length-2},b.isLessThan=b.lt=function(m,N){return x(this,new Y(m,N))<0},b.isLessThanOrEqualTo=b.lte=function(m,N){return(N=x(this,new Y(m,N)))===-1||N===0},b.isNaN=function(){return!this.s},b.isNegative=function(){return this.s<0},b.isPositive=function(){return this.s>0},b.isZero=function(){return!!this.c&&this.c[0]==0},b.minus=function(m,N){var I,k,M,$,V=this,L=V.s;if(m=new Y(m,N),N=m.s,!L||!N)return new Y(NaN);if(L!=N)return m.s=-N,V.plus(m);var R=V.e/h,X=m.e/h,j=V.c,G=m.c;if(!R||!X){if(!j||!G)return j?(m.s=-N,m):new Y(G?V:NaN);if(!j[0]||!G[0])return G[0]?(m.s=-N,m):new Y(j[0]?V:U==3?-0:0)}if(R=w(R),X=w(X),j=j.slice(),L=R-X){for(($=L<0)?(L=-L,M=j):(X=R,M=G),M.reverse(),N=L;N--;M.push(0));M.reverse()}else for(k=($=(L=j.length)<(N=G.length))?L:N,L=N=0;N<k;N++)if(j[N]!=G[N]){$=j[N]<G[N];break}if($&&(M=j,j=G,G=M,m.s=-m.s),N=(k=G.length)-(I=j.length),N>0)for(;N--;j[I++]=0);for(N=u-1;k>L;){if(j[--k]<G[k]){for(I=k;I&&!j[--I];j[I]=N);--j[I],j[k]+=u}j[k]-=G[k]}for(;j[0]==0;j.splice(0,1),--X);return j[0]?_(m,j,X):(m.s=U==3?-1:1,m.c=[m.e=0],m)},b.modulo=b.mod=function(m,N){var I,k,M=this;return m=new Y(m,N),!M.c||!m.s||m.c&&!m.c[0]?new Y(NaN):!m.c||M.c&&!M.c[0]?new Y(M):(J==9?(k=m.s,m.s=1,I=C(M,m,0,3),m.s=k,I.s*=k):I=C(M,m,0,J),m=M.minus(I.times(m)),!m.c[0]&&J==1&&(m.s=M.s),m)},b.multipliedBy=b.times=function(m,N){var I,k,M,$,V,L,R,X,j,G,ee,te,fe,me,we,le=this,he=le.c,Te=(m=new Y(m,N)).c;if(!he||!Te||!he[0]||!Te[0])return!le.s||!m.s||he&&!he[0]&&!Te||Te&&!Te[0]&&!he?m.c=m.e=m.s=null:(m.s*=le.s,!he||!Te?m.c=m.e=null:(m.c=[0],m.e=0)),m;for(k=w(le.e/h)+w(m.e/h),m.s*=le.s,R=he.length,G=Te.length,R<G&&(fe=he,he=Te,Te=fe,M=R,R=G,G=M),M=R+G,fe=[];M--;fe.push(0));for(me=u,we=l,M=G;--M>=0;){for(I=0,ee=Te[M]%we,te=Te[M]/we|0,V=R,$=M+V;$>M;)X=he[--V]%we,j=he[V]/we|0,L=te*X+j*ee,X=ee*X+L%we*we+fe[$]+I,I=(X/me|0)+(L/we|0)+te*j,fe[$--]=X%me;fe[$]=I}return I?++k:fe.splice(0,1),_(m,fe,k)},b.negated=function(){var m=new Y(this);return m.s=-m.s||null,m},b.plus=function(m,N){var I,k=this,M=k.s;if(m=new Y(m,N),N=m.s,!M||!N)return new Y(NaN);if(M!=N)return m.s=-N,k.minus(m);var $=k.e/h,V=m.e/h,L=k.c,R=m.c;if(!$||!V){if(!L||!R)return new Y(M/0);if(!L[0]||!R[0])return R[0]?m:new Y(L[0]?k:M*0)}if($=w($),V=w(V),L=L.slice(),M=$-V){for(M>0?(V=$,I=R):(M=-M,I=L),I.reverse();M--;I.push(0));I.reverse()}for(M=L.length,N=R.length,M-N<0&&(I=R,R=L,L=I,N=M),M=0;N;)M=(L[--N]=L[N]+R[N]+M)/u|0,L[N]=u===L[N]?0:L[N]%u;return M&&(L=[M].concat(L),++V),_(m,L,V)},b.precision=b.sd=function(m,N){var I,k,M,$=this;if(m!=null&&m!==!!m)return E(m,1,d),N==null?N=U:E(N,0,8),S(new Y($),m,N);if(!(I=$.c))return null;if(M=I.length-1,k=M*h+1,M=I[M]){for(;M%10==0;M/=10,k--);for(M=I[0];M>=10;M/=10,k++);}return m&&$.e+1>k&&(k=$.e+1),k},b.shiftedBy=function(m){return E(m,-c,c),this.times("1e"+m)},b.squareRoot=b.sqrt=function(){var m,N,I,k,M,$=this,V=$.c,L=$.s,R=$.e,X=P+4,j=new Y("0.5");if(L!==1||!V||!V[0])return new Y(!L||L<0&&(!V||V[0])?NaN:V?$:1/0);if(L=Math.sqrt(+H($)),L==0||L==1/0?(N=O(V),(N.length+R)%2==0&&(N+="0"),L=Math.sqrt(+N),R=w((R+1)/2)-(R<0||R%2),L==1/0?N="5e"+R:(N=L.toExponential(),N=N.slice(0,N.indexOf("e")+1)+R),I=new Y(N)):I=new Y(L+""),I.c[0]){for(R=I.e,L=R+X,L<3&&(L=0);;)if(M=I,I=j.times(M.plus(C($,M,X,1))),O(M.c).slice(0,L)===(N=O(I.c)).slice(0,L))if(I.e<R&&--L,N=N.slice(L-3,L+1),N=="9999"||!k&&N=="4999"){if(!k&&(S(M,M.e+P+2,0),M.times(M).eq($))){I=M;break}X+=4,L+=4,k=1}else{(!+N||!+N.slice(1)&&N.charAt(0)=="5")&&(S(I,I.e+P+2,1),m=!I.times(I).eq($));break}}return S(I,I.e+P+1,U,m)},b.toExponential=function(m,N){return m!=null&&(E(m,0,d),m++),ve(this,m,N,1)},b.toFixed=function(m,N){return m!=null&&(E(m,0,d),m=m+this.e+1),ve(this,m,N)},b.toFormat=function(m,N,I){var k,M=this;if(I==null)m!=null&&N&&typeof N=="object"?(I=N,N=null):m&&typeof m=="object"?(I=m,m=N=null):I=re;else if(typeof I!="object")throw Error(o+"Argument not an object: "+I);if(k=M.toFixed(m,N),M.c){var $,V=k.split("."),L=+I.groupSize,R=+I.secondaryGroupSize,X=I.groupSeparator||"",j=V[0],G=V[1],ee=M.s<0,te=ee?j.slice(1):j,fe=te.length;if(R&&($=L,L=R,R=$,fe-=$),L>0&&fe>0){for($=fe%L||L,j=te.substr(0,$);$<fe;$+=L)j+=X+te.substr($,L);R>0&&(j+=X+te.slice($)),ee&&(j="-"+j)}k=G?j+(I.decimalSeparator||"")+((R=+I.fractionGroupSize)?G.replace(new RegExp("\\d{"+R+"}\\B","g"),"$&"+(I.fractionGroupSeparator||"")):G):j}return(I.prefix||"")+k+(I.suffix||"")},b.toFraction=function(m){var N,I,k,M,$,V,L,R,X,j,G,ee,te=this,fe=te.c;if(m!=null&&(L=new Y(m),!L.isInteger()&&(L.c||L.s!==1)||L.lt(F)))throw Error(o+"Argument "+(L.isInteger()?"out of range: ":"not an integer: ")+H(L));if(!fe)return new Y(te);for(N=new Y(F),X=I=new Y(F),k=R=new Y(F),ee=O(fe),$=N.e=ee.length-te.e-1,N.c[0]=f[(V=$%h)<0?h+V:V],m=!m||L.comparedTo(N)>0?$>0?N:X:L,V=W,W=1/0,L=new Y(ee),R.c[0]=0;j=C(L,N,0,1),M=I.plus(j.times(k)),M.comparedTo(m)!=1;)I=k,k=M,X=R.plus(j.times(M=X)),R=M,N=L.minus(j.times(M=N)),L=M;return M=C(m.minus(I),k,0,1),R=R.plus(M.times(X)),I=I.plus(M.times(k)),R.s=X.s=te.s,$=$*2,G=C(X,k,$,U).minus(te).abs().comparedTo(C(R,I,$,U).minus(te).abs())<1?[X,k]:[R,I],W=V,G},b.toNumber=function(){return+H(this)},b.toPrecision=function(m,N){return m!=null&&E(m,1,d),ve(this,m,N,2)},b.toString=function(m){var N,I=this,k=I.s,M=I.e;return M===null?k?(N="Infinity",k<0&&(N="-"+N)):N="NaN":(m==null?N=M<=B||M>=q?D(O(I.c),M):A(O(I.c),M,"0"):m===10&&pe?(I=S(new Y(I),P+M+1,U),N=A(O(I.c),I.e,"0")):(E(m,2,ue.length,"Base"),N=T(A(O(I.c),M,"0"),10,m,k,!0)),k<0&&I.c[0]&&(N="-"+N)),N},b.valueOf=b.toJSON=function(){return H(this)},b._isBigNumber=!0,v!=null&&Y.set(v),Y}function w(v){var C=v|0;return v>0||v===C?C:C-1}function O(v){for(var C,T,p=1,b=v.length,F=v[0]+"";p<b;){for(C=v[p++]+"",T=h-C.length;T--;C="0"+C);F+=C}for(b=F.length;F.charCodeAt(--b)===48;);return F.slice(0,b+1||1)}function x(v,C){var T,p,b=v.c,F=C.c,P=v.s,U=C.s,B=v.e,q=C.e;if(!P||!U)return null;if(T=b&&!b[0],p=F&&!F[0],T||p)return T?p?0:-U:P;if(P!=U)return P;if(T=P<0,p=B==q,!b||!F)return p?0:!b^T?1:-1;if(!p)return B>q^T?1:-1;for(U=(B=b.length)<(q=F.length)?B:q,P=0;P<U;P++)if(b[P]!=F[P])return b[P]>F[P]^T?1:-1;return B==q?0:B>q^T?1:-1}function E(v,C,T,p){if(v<C||v>T||v!==n(v))throw Error(o+(p||"Argument")+(typeof v=="number"?v<C||v>T?" out of range: ":" not an integer: ":" not a primitive number: ")+String(v))}function g(v){var C=v.c.length-1;return w(v.e/h)==C&&v.c[C]%2!=0}function D(v,C){return(v.length>1?v.charAt(0)+"."+v.slice(1):v)+(C<0?"e":"e+")+C}function A(v,C,T){var p,b;if(C<0){for(b=T+".";++C;b+=T);v=b+v}else if(p=v.length,++C>p){for(b=T,C-=p;--C;b+=T);v+=b}else C<p&&(v=v.slice(0,C)+"."+v.slice(C));return v}r=y(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(ne)})(qa);var Ba=qa.exports;(function(t){var e=Ba,r=t.exports;(function(){var i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s,n,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},a;function u(c){return i.lastIndex=0,i.test(c)?'"'+c.replace(i,function(f){var l=o[f];return typeof l=="string"?l:"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function h(c,f){var l,d,y,w,O=s,x,E=f[c],g=E!=null&&(E instanceof e||e.isBigNumber(E));switch(E&&typeof E=="object"&&typeof E.toJSON=="function"&&(E=E.toJSON(c)),typeof a=="function"&&(E=a.call(f,c,E)),typeof E){case"string":return g?E:u(E);case"number":return isFinite(E)?String(E):"null";case"boolean":case"null":case"bigint":return String(E);case"object":if(!E)return"null";if(s+=n,x=[],Object.prototype.toString.apply(E)==="[object Array]"){for(w=E.length,l=0;l<w;l+=1)x[l]=h(l,E)||"null";return y=x.length===0?"[]":s?`[
`+s+x.join(`,
`+s)+`
`+O+"]":"["+x.join(",")+"]",s=O,y}if(a&&typeof a=="object")for(w=a.length,l=0;l<w;l+=1)typeof a[l]=="string"&&(d=a[l],y=h(d,E),y&&x.push(u(d)+(s?": ":":")+y));else Object.keys(E).forEach(function(D){var A=h(D,E);A&&x.push(u(D)+(s?": ":":")+A)});return y=x.length===0?"{}":s?`{
`+s+x.join(`,
`+s)+`
`+O+"}":"{"+x.join(",")+"}",s=O,y}}typeof r.stringify!="function"&&(r.stringify=function(c,f,l){var d;if(s="",n="",typeof l=="number")for(d=0;d<l;d+=1)n+=" ";else typeof l=="string"&&(n=l);if(a=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return h("",{"":c})})})()})(ja);var ml=ja.exports,zt=null;const yl=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,gl=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;var vl=function(t){var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction<"u")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction<"u")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var r,i,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},n,o=function(w){throw{name:"SyntaxError",message:w,at:r,text:n}},a=function(w){return w&&w!==i&&o("Expected '"+w+"' instead of '"+i+"'"),i=n.charAt(r),r+=1,i},u=function(){var w,O="";for(i==="-"&&(O="-",a("-"));i>="0"&&i<="9";)O+=i,a();if(i===".")for(O+=".";a()&&i>="0"&&i<="9";)O+=i;if(i==="e"||i==="E")for(O+=i,a(),(i==="-"||i==="+")&&(O+=i,a());i>="0"&&i<="9";)O+=i,a();if(w=+O,!isFinite(w))o("Bad number");else return zt==null&&(zt=Ba),O.length>15?e.storeAsString?O:e.useNativeBigInt?BigInt(O):new zt(O):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(w):new zt(w):w},h=function(){var w,O,x="",E;if(i==='"')for(var g=r;a();){if(i==='"')return r-1>g&&(x+=n.substring(g,r-1)),a(),x;if(i==="\\"){if(r-1>g&&(x+=n.substring(g,r-1)),a(),i==="u"){for(E=0,O=0;O<4&&(w=parseInt(a(),16),!!isFinite(w));O+=1)E=E*16+w;x+=String.fromCharCode(E)}else if(typeof s[i]=="string")x+=s[i];else break;g=r}}o("Bad string")},c=function(){for(;i&&i<=" ";)a()},f=function(){switch(i){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}o("Unexpected '"+i+"'")},l,d=function(){var w=[];if(i==="["){if(a("["),c(),i==="]")return a("]"),w;for(;i;){if(w.push(l()),c(),i==="]")return a("]"),w;a(","),c()}}o("Bad array")},y=function(){var w,O=Object.create(null);if(i==="{"){if(a("{"),c(),i==="}")return a("}"),O;for(;i;){if(w=h(),c(),a(":"),e.strict===!0&&Object.hasOwnProperty.call(O,w)&&o('Duplicate key "'+w+'"'),yl.test(w)===!0?e.protoAction==="error"?o("Object contains forbidden prototype property"):e.protoAction==="ignore"?l():O[w]=l():gl.test(w)===!0?e.constructorAction==="error"?o("Object contains forbidden constructor property"):e.constructorAction==="ignore"?l():O[w]=l():O[w]=l(),c(),i==="}")return a("}"),O;a(","),c()}}o("Bad object")};return l=function(){switch(c(),i){case"{":return y();case"[":return d();case'"':return h();case"-":return u();default:return i>="0"&&i<="9"?u():f()}},function(w,O){var x;return n=w+"",r=0,i=" ",x=l(),c(),i&&o("Syntax error"),typeof O=="function"?function E(g,D){var A,v=g[D];return v&&typeof v=="object"&&Object.keys(v).forEach(function(C){A=E(v,C),A!==void 0?v[C]=A:delete v[C]}),O.call(g,D,v)}({"":x},""):x}},wl=vl,Ua=ml.stringify,Xa=wl;yr.exports=function(t){return{parse:Xa(t),stringify:Ua}};yr.exports.parse=Xa();yr.exports.stringify=Ua;var Va=yr.exports,gr={};const El="@alicloud/pop-core",bl="1.8.0",Sl="AliCloud POP SDK core",Ol="index.js",Tl="lib/rpc.d.ts",Cl={lint:"eslint --fix lib test",test:"mocha -R spec test/*.test.js","test-cov":"nyc -r=html -r=text -r=lcov mocha -t 3000 -R spec test/*.test.js","test-integration":"mocha -R spec test/*.integration.js",ci:"npm run lint && npm run test-cov"},Dl=["Aliyun","AliCloud","OpenAPI","POP","SDK","Core"],Al="Jackson Tian",Fl="MIT",_l={debug:"^3.1.0",httpx:"^2.1.2","json-bigint":"^1.0.0",kitx:"^1.2.1",xml2js:"^0.5.0"},xl=["lib","index.js"],Nl={eslint:"^6.6.0","expect.js":"^0.3.1",mocha:"^4",muk:"^0.5.3",nyc:"^12.0.2",rewire:"^4.0.1"},Il={test:"test"},Pl={node:">=8.0.0"},Ll={type:"git",url:"git+https://github.com/aliyun/openapi-core-nodejs-sdk.git"},Ml={url:"https://github.com/aliyun/openapi-core-nodejs-sdk/issues"},$l="https://github.com/aliyun/openapi-core-nodejs-sdk#readme",Rl={name:El,version:bl,description:Sl,main:Ol,types:Tl,scripts:Cl,keywords:Dl,author:Al,license:Fl,dependencies:_l,files:xl,devDependencies:Nl,directories:Il,engines:Pl,repository:Ll,bugs:Ml,homepage:$l},Vo=Ye,yi=Rl;gr.DEFAULT_UA=`AlibabaCloud (${Vo.platform()}; ${Vo.arch()}) Node.js/${process.version} Core/${yi.version}`;gr.DEFAULT_CLIENT=`Node.js(${process.version}), ${yi.name}: ${yi.version}`;const Tt=lr,zo=wt,tt=Di,kl=Va,Wo=gr;function za(t){return t.slice(0,1).toUpperCase()+t.slice(1)}function jl(t){for(var e=Object.keys(t),r={},i=0;i<e.length;i++){var s=e[i];r[za(s)]=t[s]}return r}function Ho(){var t=new Date,e=t.getUTCFullYear(),r=tt.pad2(t.getUTCMonth()+1),i=tt.pad2(t.getUTCDate()),s=tt.pad2(t.getUTCHours()),n=tt.pad2(t.getUTCMinutes()),o=tt.pad2(t.getUTCSeconds());return`${e}-${r}-${i}T${s}:${n}:${o}Z`}function Ft(t){var e=encodeURIComponent(t);return e.replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function gi(t,e,r){for(var i=0;i<r.length;i++){var s=r[i];if(Array.isArray(s))gi(t,`${e}.${i+1}`,s);else if(s&&typeof s=="object"){const o=Object.keys(s);for(var n=0;n<o.length;n++)Array.isArray(s[o[n]])?gi(t,`${e}.${i+1}.${o[n]}`,s[o[n]]):t[`${e}.${i+1}.${o[n]}`]=s[o[n]]}else t[`${e}.${i+1}`]=s}}function ql(t){var e={},r=Object.keys(t);for(let n=0;n<r.length;n++){var i=r[n],s=t[i];Array.isArray(s)?gi(e,i,s):e[i]=s}return e}function Bl(t){var e=[],r=ql(t),i=Object.keys(r).sort();for(let o=0;o<i.length;o++){var s=i[o],n=r[s];e.push([Ft(s),Ft(n)])}return e}function hn(t){for(var e=[],r=0;r<t.length;r++){var[i,s]=t[r];e.push(i+"="+s)}return e.join("&")}let Ul=class{constructor(e,r){if(Tt(e,'must pass "config"'),Tt(e.endpoint,'must pass "config.endpoint"'),!e.endpoint.startsWith("https://")&&!e.endpoint.startsWith("http://"))throw new Error(`"config.endpoint" must starts with 'https://' or 'http://'.`);if(Tt(e.apiVersion,'must pass "config.apiVersion"'),e.credentialsProvider){if(typeof e.credentialsProvider.getCredentials!="function")throw new Error('must pass "config.credentialsProvider" with function "getCredentials()"');this.credentialsProvider=e.credentialsProvider}else{Tt(e.accessKeyId,'must pass "config.accessKeyId"');var i=e.secretAccessKey||e.accessKeySecret;Tt(i,'must pass "config.accessKeySecret"'),this.accessKeyId=e.accessKeyId,this.accessKeySecret=i,this.securityToken=e.securityToken,this.credentialsProvider={getCredentials:async()=>({accessKeyId:e.accessKeyId,accessKeySecret:i,securityToken:e.securityToken})}}if(e.endpoint.endsWith("/")&&(e.endpoint=e.endpoint.slice(0,-1)),this.endpoint=e.endpoint,this.apiVersion=e.apiVersion,this.verbose=r===!0,this.codes=new Set([200,"200","OK","Success","success"]),e.codes)for(var s of e.codes)this.codes.add(s);this.opts=e.opts||{};var n=this.endpoint.startsWith("https://")?cr:ur;this.keepAliveAgent=new n.Agent({keepAlive:!0,keepAliveMsecs:3e3})}async request(e,r={},i={}){const s=await this.credentialsProvider.getCredentials();i=Object.assign({headers:{"x-sdk-client":Wo.DEFAULT_CLIENT,"user-agent":Wo.DEFAULT_UA,"x-acs-action":e,"x-acs-version":this.apiVersion}},this.opts,i),i.formatAction!==!1&&(e=za(e)),i.formatParams!==!1&&(r=jl(r));const n={Format:"JSON",Timestamp:Ho(),Version:this.apiVersion};s&&s.accessKeyId&&s.accessKeySecret&&(n.SignatureMethod="HMAC-SHA1",n.SignatureVersion="1.0",n.SignatureNonce=tt.makeNonce(),n.AccessKeyId=s.accessKeyId,s.securityToken&&(n.SecurityToken=s.securityToken)),r=Object.assign({Action:e},n,r);const o=(i.method||"GET").toUpperCase(),a=Bl(r);if(s&&s.accessKeyId&&s.accessKeySecret){const d=hn(a),y=`${o}&${Ft("/")}&${Ft(d)}`,w=s.accessKeySecret+"&",O=tt.sha1(y,w,"base64");a.push(["Signature",Ft(O)])}const u=i.method==="POST"?`${this.endpoint}/`:`${this.endpoint}/?${hn(a)}`,h={url:u,request:null,response:null};i&&!i.agent&&(i.agent=this.keepAliveAgent),i.method==="POST"&&(i.headers=i.headers||{},i.headers["content-type"]="application/x-www-form-urlencoded",i.data=hn(a));const c=await zo.request(u,i);h.request={headers:c.req.getHeaders?c.req.getHeaders():c.req._headers},h.response={statusCode:c.statusCode,headers:c.headers};const f=await zo.read(c),l=kl.parse(f);if(l.Code&&!this.codes.has(l.Code)){const d=new Error(`${l.Message}, URL: ${u}`);throw d.name=l.Code+"Error",d.data=l,d.code=l.Code,d.url=u,d.entry=h,d}return this.verbose?[l,h]:l}_buildParams(){const e={Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureNonce:tt.makeNonce(),SignatureVersion:"1.0",Timestamp:Ho(),AccessKeyId:this.accessKeyId,Version:this.apiVersion};return this.securityToken&&(e.SecurityToken=this.securityToken),e}};var Wa=Ul,Ze={},pn={},Go;function Ai(){return Go||(Go=1,(function(){pn.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(ne)),pn}var dn={},We={},He={},Yo;function Ke(){return Yo||(Yo=1,(function(){var t,e,r,i,s,n,o,a=[].slice,u={}.hasOwnProperty;t=function(){var h,c,f,l,d,y;if(y=arguments[0],d=2<=arguments.length?a.call(arguments,1):[],s(Object.assign))Object.assign.apply(null,arguments);else for(h=0,f=d.length;h<f;h++)if(l=d[h],l!=null)for(c in l)u.call(l,c)&&(y[c]=l[c]);return y},s=function(h){return!!h&&Object.prototype.toString.call(h)==="[object Function]"},n=function(h){var c;return!!h&&((c=typeof h)=="function"||c==="object")},r=function(h){return s(Array.isArray)?Array.isArray(h):Object.prototype.toString.call(h)==="[object Array]"},i=function(h){var c;if(r(h))return!h.length;for(c in h)if(u.call(h,c))return!1;return!0},o=function(h){var c,f;return n(h)&&(f=Object.getPrototypeOf(h))&&(c=f.constructor)&&typeof c=="function"&&c instanceof c&&Function.prototype.toString.call(c)===Function.prototype.toString.call(Object)},e=function(h){return s(h.valueOf)?h.valueOf():h},He.assign=t,He.isFunction=s,He.isObject=n,He.isArray=r,He.isEmpty=i,He.isPlainObject=o,He.getValue=e}).call(ne)),He}var mn={exports:{}},Ko;function Ha(){return Ko||(Ko=1,(function(){mn.exports=function(){function t(){}return t.prototype.hasFeature=function(e,r){return!0},t.prototype.createDocumentType=function(e,r,i){throw new Error("This DOM method is not implemented.")},t.prototype.createDocument=function(e,r,i){throw new Error("This DOM method is not implemented.")},t.prototype.createHTMLDocument=function(e){throw new Error("This DOM method is not implemented.")},t.prototype.getFeature=function(e,r){throw new Error("This DOM method is not implemented.")},t}()}).call(ne)),mn.exports}var yn={exports:{}},gn={exports:{}},vn={exports:{}},Jo;function Xl(){return Jo||(Jo=1,(function(){vn.exports=function(){function t(){}return t.prototype.handleError=function(e){throw new Error(e)},t}()}).call(ne)),vn.exports}var wn={exports:{}},Qo;function Vl(){return Qo||(Qo=1,(function(){wn.exports=function(){function t(e){this.arr=e||[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.arr.length}}),t.prototype.item=function(e){return this.arr[e]||null},t.prototype.contains=function(e){return this.arr.indexOf(e)!==-1},t}()}).call(ne)),wn.exports}var Zo;function zl(){return Zo||(Zo=1,(function(){var t,e;t=Xl(),e=Vl(),gn.exports=function(){function r(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(r.prototype,"parameterNames",{get:function(){return new e(Object.keys(this.defaultParams))}}),r.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},r.prototype.canSetParameter=function(i,s){return!0},r.prototype.setParameter=function(i,s){return s!=null?this.params[i]=s:delete this.params[i]},r}()}).call(ne)),gn.exports}var En={exports:{}},bn={exports:{}},Sn={exports:{}},es;function ge(){return es||(es=1,(function(){Sn.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(ne)),Sn.exports}var On={exports:{}},ts;function Ga(){return ts||(ts=1,(function(){var t;t=ge(),$e(),On.exports=function(){function e(r,i,s){if(this.parent=r,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),i==null)throw new Error("Missing attribute name. "+this.debugInfo(i));this.name=this.stringify.name(i),this.value=this.stringify.attValue(s),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(r){return this.value=r||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(r){return this.options.writer.attribute(this,this.options.writer.filterOptions(r))},e.prototype.debugInfo=function(r){return r=r||this.name,r==null?"parent: <"+this.parent.name+">":"attribute: {"+r+"}, parent: <"+this.parent.name+">"},e.prototype.isEqualNode=function(r){return!(r.namespaceURI!==this.namespaceURI||r.prefix!==this.prefix||r.localName!==this.localName||r.value!==this.value)},e}()}).call(ne)),On.exports}var Tn={exports:{}},rs;function Fi(){return rs||(rs=1,(function(){Tn.exports=function(){function t(e){this.nodes=e}return Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.getNamedItem=function(e){return this.nodes[e]},t.prototype.setNamedItem=function(e){var r;return r=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,r||null},t.prototype.removeNamedItem=function(e){var r;return r=this.nodes[e],delete this.nodes[e],r||null},t.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},t.prototype.getNamedItemNS=function(e,r){throw new Error("This DOM method is not implemented.")},t.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},t.prototype.removeNamedItemNS=function(e,r){throw new Error("This DOM method is not implemented.")},t}()}).call(ne)),Tn.exports}var ns;function _i(){return ns||(ns=1,(function(){var t,e,r,i,s,n,o,a,u=function(c,f){for(var l in f)h.call(f,l)&&(c[l]=f[l]);function d(){this.constructor=c}return d.prototype=f.prototype,c.prototype=new d,c.__super__=f.prototype,c},h={}.hasOwnProperty;a=Ke(),o=a.isObject,n=a.isFunction,s=a.getValue,i=$e(),t=ge(),e=Ga(),r=Fi(),bn.exports=function(c){u(f,c);function f(l,d,y){var w,O,x,E;if(f.__super__.constructor.call(this,l),d==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(d),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,y!=null&&this.attribute(y),l.type===t.Document&&(this.isRoot=!0,this.documentObject=l,l.rootObject=this,l.children)){for(E=l.children,O=0,x=E.length;O<x;O++)if(w=E[O],w.type===t.DocType){w.name=this.name;break}}}return Object.defineProperty(f.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(f.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(f.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(f.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(f.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(f.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(f.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(f.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new r(this.attribs)),this.attributeMap}}),f.prototype.clone=function(){var l,d,y,w;y=Object.create(this),y.isRoot&&(y.documentObject=null),y.attribs={},w=this.attribs;for(d in w)h.call(w,d)&&(l=w[d],y.attribs[d]=l.clone());return y.children=[],this.children.forEach(function(O){var x;return x=O.clone(),x.parent=y,y.children.push(x)}),y},f.prototype.attribute=function(l,d){var y,w;if(l!=null&&(l=s(l)),o(l))for(y in l)h.call(l,y)&&(w=l[y],this.attribute(y,w));else n(d)&&(d=d.apply()),this.options.keepNullAttributes&&d==null?this.attribs[l]=new e(this,l,""):d!=null&&(this.attribs[l]=new e(this,l,d));return this},f.prototype.removeAttribute=function(l){var d,y,w;if(l==null)throw new Error("Missing attribute name. "+this.debugInfo());if(l=s(l),Array.isArray(l))for(y=0,w=l.length;y<w;y++)d=l[y],delete this.attribs[d];else delete this.attribs[l];return this},f.prototype.toString=function(l){return this.options.writer.element(this,this.options.writer.filterOptions(l))},f.prototype.att=function(l,d){return this.attribute(l,d)},f.prototype.a=function(l,d){return this.attribute(l,d)},f.prototype.getAttribute=function(l){return this.attribs.hasOwnProperty(l)?this.attribs[l].value:null},f.prototype.setAttribute=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getAttributeNode=function(l){return this.attribs.hasOwnProperty(l)?this.attribs[l]:null},f.prototype.setAttributeNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.removeAttributeNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByTagName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getAttributeNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.setAttributeNS=function(l,d,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.removeAttributeNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getAttributeNodeNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.setAttributeNodeNS=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByTagNameNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.hasAttribute=function(l){return this.attribs.hasOwnProperty(l)},f.prototype.hasAttributeNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.setIdAttribute=function(l,d){return this.attribs.hasOwnProperty(l)?this.attribs[l].isId:d},f.prototype.setIdAttributeNS=function(l,d,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.setIdAttributeNode=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByTagName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByTagNameNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByClassName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.isEqualNode=function(l){var d,y,w;if(!f.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.namespaceURI!==this.namespaceURI||l.prefix!==this.prefix||l.localName!==this.localName||l.attribs.length!==this.attribs.length)return!1;for(d=y=0,w=this.attribs.length-1;0<=w?y<=w:y>=w;d=0<=w?++y:--y)if(!this.attribs[d].isEqualNode(l.attribs[d]))return!1;return!0},f}(i)}).call(ne)),bn.exports}var Cn={exports:{}},Dn={exports:{}},is;function vr(){return is||(is=1,(function(){var t,e=function(i,s){for(var n in s)r.call(s,n)&&(i[n]=s[n]);function o(){this.constructor=i}return o.prototype=s.prototype,i.prototype=new o,i.__super__=s.prototype,i},r={}.hasOwnProperty;t=$e(),Dn.exports=function(i){e(s,i);function s(n){s.__super__.constructor.call(this,n),this.value=""}return Object.defineProperty(s.prototype,"data",{get:function(){return this.value},set:function(n){return this.value=n||""}}),Object.defineProperty(s.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(s.prototype,"textContent",{get:function(){return this.value},set:function(n){return this.value=n||""}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.substringData=function(n,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.appendData=function(n){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.insertData=function(n,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.deleteData=function(n,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceData=function(n,o,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.isEqualNode=function(n){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(n)||n.data!==this.data)},s}(t)}).call(ne)),Dn.exports}var os;function xi(){return os||(os=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=ge(),e=vr(),Cn.exports=function(s){r(n,s);function n(o,a){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(a)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.cdata(this,this.options.writer.filterOptions(o))},n}(e)}).call(ne)),Cn.exports}var An={exports:{}},ss;function Ni(){return ss||(ss=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=ge(),e=vr(),An.exports=function(s){r(n,s);function n(o,a){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(a)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.comment(this,this.options.writer.filterOptions(o))},n}(e)}).call(ne)),An.exports}var Fn={exports:{}},as;function Ii(){return as||(as=1,(function(){var t,e,r,i=function(n,o){for(var a in o)s.call(o,a)&&(n[a]=o[a]);function u(){this.constructor=n}return u.prototype=o.prototype,n.prototype=new u,n.__super__=o.prototype,n},s={}.hasOwnProperty;r=Ke().isObject,e=$e(),t=ge(),Fn.exports=function(n){i(o,n);function o(a,u,h,c){var f;o.__super__.constructor.call(this,a),r(u)&&(f=u,u=f.version,h=f.encoding,c=f.standalone),u||(u="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(u),h!=null&&(this.encoding=this.stringify.xmlEncoding(h)),c!=null&&(this.standalone=this.stringify.xmlStandalone(c))}return o.prototype.toString=function(a){return this.options.writer.declaration(this,this.options.writer.filterOptions(a))},o}(e)}).call(ne)),Fn.exports}var _n={exports:{}},xn={exports:{}},us;function Pi(){return us||(us=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;e=$e(),t=ge(),xn.exports=function(s){r(n,s);function n(o,a,u,h,c,f){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(u==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(a));if(!h)throw new Error("Missing DTD attribute type. "+this.debugInfo(a));if(!c)throw new Error("Missing DTD attribute default. "+this.debugInfo(a));if(c.indexOf("#")!==0&&(c="#"+c),!c.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(a));if(f&&!c.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(a));this.elementName=this.stringify.name(a),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(u),this.attributeType=this.stringify.dtdAttType(h),f&&(this.defaultValue=this.stringify.dtdAttDefault(f)),this.defaultValueType=c}return n.prototype.toString=function(o){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(o))},n}(e)}).call(ne)),xn.exports}var Nn={exports:{}},cs;function Li(){return cs||(cs=1,(function(){var t,e,r,i=function(n,o){for(var a in o)s.call(o,a)&&(n[a]=o[a]);function u(){this.constructor=n}return u.prototype=o.prototype,n.prototype=new u,n.__super__=o.prototype,n},s={}.hasOwnProperty;r=Ke().isObject,e=$e(),t=ge(),Nn.exports=function(n){i(o,n);function o(a,u,h,c){if(o.__super__.constructor.call(this,a),h==null)throw new Error("Missing DTD entity name. "+this.debugInfo(h));if(c==null)throw new Error("Missing DTD entity value. "+this.debugInfo(h));if(this.pe=!!u,this.name=this.stringify.name(h),this.type=t.EntityDeclaration,!r(c))this.value=this.stringify.dtdEntityValue(c),this.internal=!0;else{if(!c.pubID&&!c.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(h));if(c.pubID&&!c.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(h));if(this.internal=!1,c.pubID!=null&&(this.pubID=this.stringify.dtdPubID(c.pubID)),c.sysID!=null&&(this.sysID=this.stringify.dtdSysID(c.sysID)),c.nData!=null&&(this.nData=this.stringify.dtdNData(c.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(h))}}return Object.defineProperty(o.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(o.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(o.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(o.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(o.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(o.prototype,"xmlVersion",{get:function(){return null}}),o.prototype.toString=function(a){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(a))},o}(e)}).call(ne)),Nn.exports}var In={exports:{}},ls;function Mi(){return ls||(ls=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;e=$e(),t=ge(),In.exports=function(s){r(n,s);function n(o,a,u){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing DTD element name. "+this.debugInfo());u||(u="(#PCDATA)"),Array.isArray(u)&&(u="("+u.join(",")+")"),this.name=this.stringify.name(a),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(u)}return n.prototype.toString=function(o){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(o))},n}(e)}).call(ne)),In.exports}var Pn={exports:{}},fs;function $i(){return fs||(fs=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;e=$e(),t=ge(),Pn.exports=function(s){r(n,s);function n(o,a,u){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing DTD notation name. "+this.debugInfo(a));if(!u.pubID&&!u.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(a));this.name=this.stringify.name(a),this.type=t.NotationDeclaration,u.pubID!=null&&(this.pubID=this.stringify.dtdPubID(u.pubID)),u.sysID!=null&&(this.sysID=this.stringify.dtdSysID(u.sysID))}return Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),n.prototype.toString=function(o){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(o))},n}(e)}).call(ne)),Pn.exports}var hs;function Ri(){return hs||(hs=1,(function(){var t,e,r,i,s,n,o,a,u=function(c,f){for(var l in f)h.call(f,l)&&(c[l]=f[l]);function d(){this.constructor=c}return d.prototype=f.prototype,c.prototype=new d,c.__super__=f.prototype,c},h={}.hasOwnProperty;a=Ke().isObject,o=$e(),t=ge(),e=Pi(),i=Li(),r=Mi(),s=$i(),n=Fi(),_n.exports=function(c){u(f,c);function f(l,d,y){var w,O,x,E,g,D;if(f.__super__.constructor.call(this,l),this.type=t.DocType,l.children){for(E=l.children,O=0,x=E.length;O<x;O++)if(w=E[O],w.type===t.Element){this.name=w.name;break}}this.documentObject=l,a(d)&&(g=d,d=g.pubID,y=g.sysID),y==null&&(D=[d,y],y=D[0],d=D[1]),d!=null&&(this.pubID=this.stringify.dtdPubID(d)),y!=null&&(this.sysID=this.stringify.dtdSysID(y))}return Object.defineProperty(f.prototype,"entities",{get:function(){var l,d,y,w,O;for(w={},O=this.children,d=0,y=O.length;d<y;d++)l=O[d],l.type===t.EntityDeclaration&&!l.pe&&(w[l.name]=l);return new n(w)}}),Object.defineProperty(f.prototype,"notations",{get:function(){var l,d,y,w,O;for(w={},O=this.children,d=0,y=O.length;d<y;d++)l=O[d],l.type===t.NotationDeclaration&&(w[l.name]=l);return new n(w)}}),Object.defineProperty(f.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(f.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(f.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),f.prototype.element=function(l,d){var y;return y=new r(this,l,d),this.children.push(y),this},f.prototype.attList=function(l,d,y,w,O){var x;return x=new e(this,l,d,y,w,O),this.children.push(x),this},f.prototype.entity=function(l,d){var y;return y=new i(this,!1,l,d),this.children.push(y),this},f.prototype.pEntity=function(l,d){var y;return y=new i(this,!0,l,d),this.children.push(y),this},f.prototype.notation=function(l,d){var y;return y=new s(this,l,d),this.children.push(y),this},f.prototype.toString=function(l){return this.options.writer.docType(this,this.options.writer.filterOptions(l))},f.prototype.ele=function(l,d){return this.element(l,d)},f.prototype.att=function(l,d,y,w,O){return this.attList(l,d,y,w,O)},f.prototype.ent=function(l,d){return this.entity(l,d)},f.prototype.pent=function(l,d){return this.pEntity(l,d)},f.prototype.not=function(l,d){return this.notation(l,d)},f.prototype.up=function(){return this.root()||this.documentObject},f.prototype.isEqualNode=function(l){return!(!f.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.name!==this.name||l.publicId!==this.publicId||l.systemId!==this.systemId)},f}(o)}).call(ne)),_n.exports}var Ln={exports:{}},ps;function ki(){return ps||(ps=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=ge(),e=$e(),Ln.exports=function(s){r(n,s);function n(o,a){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(a)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.raw(this,this.options.writer.filterOptions(o))},n}(e)}).call(ne)),Ln.exports}var Mn={exports:{}},ds;function ji(){return ds||(ds=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=ge(),e=vr(),Mn.exports=function(s){r(n,s);function n(o,a){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(a)}return Object.defineProperty(n.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"wholeText",{get:function(){var o,a,u;for(u="",a=this.previousSibling;a;)u=a.data+u,a=a.previousSibling;for(u+=this.data,o=this.nextSibling;o;)u=u+o.data,o=o.nextSibling;return u}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.text(this,this.options.writer.filterOptions(o))},n.prototype.splitText=function(o){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceWholeText=function(o){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(e)}).call(ne)),Mn.exports}var $n={exports:{}},ms;function qi(){return ms||(ms=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=ge(),e=vr(),$n.exports=function(s){r(n,s);function n(o,a,u){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(a),this.name=this.target,u&&(this.value=this.stringify.insValue(u))}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(o))},n.prototype.isEqualNode=function(o){return!(!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(o)||o.target!==this.target)},n}(e)}).call(ne)),$n.exports}var Rn={exports:{}},ys;function Ya(){return ys||(ys=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;e=$e(),t=ge(),Rn.exports=function(s){r(n,s);function n(o){n.__super__.constructor.call(this,o),this.type=t.Dummy}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return""},n}(e)}).call(ne)),Rn.exports}var kn={exports:{}},gs;function Wl(){return gs||(gs=1,(function(){kn.exports=function(){function t(e){this.nodes=e}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes.length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.item=function(e){return this.nodes[e]||null},t}()}).call(ne)),kn.exports}var jn={exports:{}},vs;function Hl(){return vs||(vs=1,(function(){jn.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(ne)),jn.exports}var ws;function $e(){return ws||(ws=1,(function(){var t,e,r,i,s,n,o,a,u,h,c,f,l,d,y,w,O,x={}.hasOwnProperty;O=Ke(),w=O.isObject,y=O.isFunction,d=O.isEmpty,l=O.getValue,a=null,r=null,i=null,s=null,n=null,c=null,f=null,h=null,o=null,e=null,u=null,t=null,En.exports=function(){function E(g){this.parent=g,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=_i(),r=xi(),i=Ni(),s=Ii(),n=Ri(),c=ki(),f=ji(),h=qi(),o=Ya(),e=ge(),u=Wl(),Fi(),t=Hl())}return Object.defineProperty(E.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(E.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(E.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(E.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(E.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new u(this.children)),this.childNodeList}}),Object.defineProperty(E.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(E.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(E.prototype,"previousSibling",{get:function(){var g;return g=this.parent.children.indexOf(this),this.parent.children[g-1]||null}}),Object.defineProperty(E.prototype,"nextSibling",{get:function(){var g;return g=this.parent.children.indexOf(this),this.parent.children[g+1]||null}}),Object.defineProperty(E.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(E.prototype,"textContent",{get:function(){var g,D,A,v,C;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(C="",v=this.children,D=0,A=v.length;D<A;D++)g=v[D],g.textContent&&(C+=g.textContent);return C}else return null},set:function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),E.prototype.setParent=function(g){var D,A,v,C,T;for(this.parent=g,g&&(this.options=g.options,this.stringify=g.stringify),C=this.children,T=[],A=0,v=C.length;A<v;A++)D=C[A],T.push(D.setParent(this));return T},E.prototype.element=function(g,D,A){var v,C,T,p,b,F,P,U,B,q,z;if(F=null,D===null&&A==null&&(B=[{},null],D=B[0],A=B[1]),D==null&&(D={}),D=l(D),w(D)||(q=[D,A],A=q[0],D=q[1]),g!=null&&(g=l(g)),Array.isArray(g))for(T=0,P=g.length;T<P;T++)C=g[T],F=this.element(C);else if(y(g))F=this.element(g.apply());else if(w(g)){for(b in g)if(x.call(g,b))if(z=g[b],y(z)&&(z=z.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&b.indexOf(this.stringify.convertAttKey)===0)F=this.attribute(b.substr(this.stringify.convertAttKey.length),z);else if(!this.options.separateArrayItems&&Array.isArray(z)&&d(z))F=this.dummy();else if(w(z)&&d(z))F=this.element(b);else if(!this.options.keepNullNodes&&z==null)F=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(z))for(p=0,U=z.length;p<U;p++)C=z[p],v={},v[b]=C,F=this.element(v);else w(z)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&b.indexOf(this.stringify.convertTextKey)===0?F=this.element(z):(F=this.element(b),F.element(z)):F=this.element(b,z)}else!this.options.keepNullNodes&&A===null?F=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&g.indexOf(this.stringify.convertTextKey)===0?F=this.text(A):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&g.indexOf(this.stringify.convertCDataKey)===0?F=this.cdata(A):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&g.indexOf(this.stringify.convertCommentKey)===0?F=this.comment(A):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&g.indexOf(this.stringify.convertRawKey)===0?F=this.raw(A):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&g.indexOf(this.stringify.convertPIKey)===0?F=this.instruction(g.substr(this.stringify.convertPIKey.length),A):F=this.node(g,D,A);if(F==null)throw new Error("Could not create any elements with: "+g+". "+this.debugInfo());return F},E.prototype.insertBefore=function(g,D,A){var v,C,T,p,b;if(g!=null&&g.type)return T=g,p=D,T.setParent(this),p?(C=children.indexOf(p),b=children.splice(C),children.push(T),Array.prototype.push.apply(children,b)):children.push(T),T;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(g));return C=this.parent.children.indexOf(this),b=this.parent.children.splice(C),v=this.parent.element(g,D,A),Array.prototype.push.apply(this.parent.children,b),v},E.prototype.insertAfter=function(g,D,A){var v,C,T;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(g));return C=this.parent.children.indexOf(this),T=this.parent.children.splice(C+1),v=this.parent.element(g,D,A),Array.prototype.push.apply(this.parent.children,T),v},E.prototype.remove=function(){var g;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return g=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[g,g-g+1].concat([])),this.parent},E.prototype.node=function(g,D,A){var v,C;return g!=null&&(g=l(g)),D||(D={}),D=l(D),w(D)||(C=[D,A],A=C[0],D=C[1]),v=new a(this,g,D),A!=null&&v.text(A),this.children.push(v),v},E.prototype.text=function(g){var D;return w(g)&&this.element(g),D=new f(this,g),this.children.push(D),this},E.prototype.cdata=function(g){var D;return D=new r(this,g),this.children.push(D),this},E.prototype.comment=function(g){var D;return D=new i(this,g),this.children.push(D),this},E.prototype.commentBefore=function(g){var D,A;return D=this.parent.children.indexOf(this),A=this.parent.children.splice(D),this.parent.comment(g),Array.prototype.push.apply(this.parent.children,A),this},E.prototype.commentAfter=function(g){var D,A;return D=this.parent.children.indexOf(this),A=this.parent.children.splice(D+1),this.parent.comment(g),Array.prototype.push.apply(this.parent.children,A),this},E.prototype.raw=function(g){var D;return D=new c(this,g),this.children.push(D),this},E.prototype.dummy=function(){var g;return g=new o(this),g},E.prototype.instruction=function(g,D){var A,v,C,T,p;if(g!=null&&(g=l(g)),D!=null&&(D=l(D)),Array.isArray(g))for(T=0,p=g.length;T<p;T++)A=g[T],this.instruction(A);else if(w(g))for(A in g)x.call(g,A)&&(v=g[A],this.instruction(A,v));else y(D)&&(D=D.apply()),C=new h(this,g,D),this.children.push(C);return this},E.prototype.instructionBefore=function(g,D){var A,v;return A=this.parent.children.indexOf(this),v=this.parent.children.splice(A),this.parent.instruction(g,D),Array.prototype.push.apply(this.parent.children,v),this},E.prototype.instructionAfter=function(g,D){var A,v;return A=this.parent.children.indexOf(this),v=this.parent.children.splice(A+1),this.parent.instruction(g,D),Array.prototype.push.apply(this.parent.children,v),this},E.prototype.declaration=function(g,D,A){var v,C;return v=this.document(),C=new s(v,g,D,A),v.children.length===0?v.children.unshift(C):v.children[0].type===e.Declaration?v.children[0]=C:v.children.unshift(C),v.root()||v},E.prototype.dtd=function(g,D){var A,v,C,T,p,b,F,P,U,B;for(v=this.document(),C=new n(v,g,D),U=v.children,T=p=0,F=U.length;p<F;T=++p)if(A=U[T],A.type===e.DocType)return v.children[T]=C,C;for(B=v.children,T=b=0,P=B.length;b<P;T=++b)if(A=B[T],A.isRoot)return v.children.splice(T,0,C),C;return v.children.push(C),C},E.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},E.prototype.root=function(){var g;for(g=this;g;){if(g.type===e.Document)return g.rootObject;if(g.isRoot)return g;g=g.parent}},E.prototype.document=function(){var g;for(g=this;g;){if(g.type===e.Document)return g;g=g.parent}},E.prototype.end=function(g){return this.document().end(g)},E.prototype.prev=function(){var g;if(g=this.parent.children.indexOf(this),g<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[g-1]},E.prototype.next=function(){var g;if(g=this.parent.children.indexOf(this),g===-1||g===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[g+1]},E.prototype.importDocument=function(g){var D;return D=g.root().clone(),D.parent=this,D.isRoot=!1,this.children.push(D),this},E.prototype.debugInfo=function(g){var D,A;return g=g||this.name,g==null&&!((D=this.parent)!=null&&D.name)?"":g==null?"parent: <"+this.parent.name+">":(A=this.parent)!=null&&A.name?"node: <"+g+">, parent: <"+this.parent.name+">":"node: <"+g+">"},E.prototype.ele=function(g,D,A){return this.element(g,D,A)},E.prototype.nod=function(g,D,A){return this.node(g,D,A)},E.prototype.txt=function(g){return this.text(g)},E.prototype.dat=function(g){return this.cdata(g)},E.prototype.com=function(g){return this.comment(g)},E.prototype.ins=function(g,D){return this.instruction(g,D)},E.prototype.doc=function(){return this.document()},E.prototype.dec=function(g,D,A){return this.declaration(g,D,A)},E.prototype.e=function(g,D,A){return this.element(g,D,A)},E.prototype.n=function(g,D,A){return this.node(g,D,A)},E.prototype.t=function(g){return this.text(g)},E.prototype.d=function(g){return this.cdata(g)},E.prototype.c=function(g){return this.comment(g)},E.prototype.r=function(g){return this.raw(g)},E.prototype.i=function(g,D){return this.instruction(g,D)},E.prototype.u=function(){return this.up()},E.prototype.importXMLBuilder=function(g){return this.importDocument(g)},E.prototype.replaceChild=function(g,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.removeChild=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.appendChild=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.hasChildNodes=function(){return this.children.length!==0},E.prototype.cloneNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.isSupported=function(g,D){return!0},E.prototype.hasAttributes=function(){return this.attribs.length!==0},E.prototype.compareDocumentPosition=function(g){var D,A;return D=this,D===g?0:this.document()!==g.document()?(A=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?A|=t.Preceding:A|=t.Following,A):D.isAncestor(g)?t.Contains|t.Preceding:D.isDescendant(g)?t.Contains|t.Following:D.isPreceding(g)?t.Preceding:t.Following},E.prototype.isSameNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.lookupPrefix=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.isDefaultNamespace=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.lookupNamespaceURI=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.isEqualNode=function(g){var D,A,v;if(g.nodeType!==this.nodeType||g.children.length!==this.children.length)return!1;for(D=A=0,v=this.children.length-1;0<=v?A<=v:A>=v;D=0<=v?++A:--A)if(!this.children[D].isEqualNode(g.children[D]))return!1;return!0},E.prototype.getFeature=function(g,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.setUserData=function(g,D,A){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.getUserData=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.contains=function(g){return g?g===this||this.isDescendant(g):!1},E.prototype.isDescendant=function(g){var D,A,v,C,T;for(T=this.children,v=0,C=T.length;v<C;v++)if(D=T[v],g===D||(A=D.isDescendant(g),A))return!0;return!1},E.prototype.isAncestor=function(g){return g.isDescendant(this)},E.prototype.isPreceding=function(g){var D,A;return D=this.treePosition(g),A=this.treePosition(this),D===-1||A===-1?!1:D<A},E.prototype.isFollowing=function(g){var D,A;return D=this.treePosition(g),A=this.treePosition(this),D===-1||A===-1?!1:D>A},E.prototype.treePosition=function(g){var D,A;return A=0,D=!1,this.foreachTreeNode(this.document(),function(v){if(A++,!D&&v===g)return D=!0}),D?A:-1},E.prototype.foreachTreeNode=function(g,D){var A,v,C,T,p;for(g||(g=this.document()),T=g.children,v=0,C=T.length;v<C;v++){if(A=T[v],p=D(A))return p;if(p=this.foreachTreeNode(A,D),p)return p}},E}()}).call(ne)),En.exports}var qn={exports:{}},Es;function Ka(){return Es||(Es=1,(function(){var t=function(r,i){return function(){return r.apply(i,arguments)}},e={}.hasOwnProperty;qn.exports=function(){function r(i){this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this);var s,n,o;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),n=i.stringify||{};for(s in n)e.call(n,s)&&(o=n[s],this[s]=o)}return r.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},r.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},r.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},r.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},r.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},r.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},r.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},r.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},r.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},r.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},r.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(i){var s,n;if(this.options.noValidation)return i;if(s="",this.options.version==="1.0"){if(s=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=i.match(s))throw new Error("Invalid character in string: "+i+" at index "+n.index)}else if(this.options.version==="1.1"&&(s=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=i.match(s)))throw new Error("Invalid character in string: "+i+" at index "+n.index);return i},r.prototype.assertLegalName=function(i){var s;if(this.options.noValidation)return i;if(this.assertLegalChar(i),s=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(s))throw new Error("Invalid character in name");return i},r.prototype.textEscape=function(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},r.prototype.attEscape=function(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},r}()}).call(ne)),qn.exports}var Bn={exports:{}},Un={exports:{}},Xn={exports:{}},bs;function wr(){return bs||(bs=1,(function(){Xn.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(ne)),Xn.exports}var Ss;function Ja(){return Ss||(Ss=1,(function(){var t,e,r,i={}.hasOwnProperty;r=Ke().assign,t=ge(),Ii(),Ri(),xi(),Ni(),_i(),ki(),ji(),qi(),Ya(),Pi(),Mi(),Li(),$i(),e=wr(),Un.exports=function(){function s(n){var o,a,u;n||(n={}),this.options=n,a=n.writer||{};for(o in a)i.call(a,o)&&(u=a[o],this["_"+o]=this[o],this[o]=u)}return s.prototype.filterOptions=function(n){var o,a,u,h,c,f,l,d;return n||(n={}),n=r({},this.options,n),o={writer:this},o.pretty=n.pretty||!1,o.allowEmpty=n.allowEmpty||!1,o.indent=(a=n.indent)!=null?a:"  ",o.newline=(u=n.newline)!=null?u:`
`,o.offset=(h=n.offset)!=null?h:0,o.dontPrettyTextNodes=(c=(f=n.dontPrettyTextNodes)!=null?f:n.dontprettytextnodes)!=null?c:0,o.spaceBeforeSlash=(l=(d=n.spaceBeforeSlash)!=null?d:n.spacebeforeslash)!=null?l:"",o.spaceBeforeSlash===!0&&(o.spaceBeforeSlash=" "),o.suppressPrettyCount=0,o.user={},o.state=e.None,o},s.prototype.indent=function(n,o,a){var u;return!o.pretty||o.suppressPrettyCount?"":o.pretty&&(u=(a||0)+o.offset+1,u>0)?new Array(u).join(o.indent):""},s.prototype.endline=function(n,o,a){return!o.pretty||o.suppressPrettyCount?"":o.newline},s.prototype.attribute=function(n,o,a){var u;return this.openAttribute(n,o,a),u=" "+n.name+'="'+n.value+'"',this.closeAttribute(n,o,a),u},s.prototype.cdata=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<![CDATA[",o.state=e.InsideTag,u+=n.value,o.state=e.CloseTag,u+="]]>"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.comment=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!-- ",o.state=e.InsideTag,u+=n.value,o.state=e.CloseTag,u+=" -->"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.declaration=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<?xml",o.state=e.InsideTag,u+=' version="'+n.version+'"',n.encoding!=null&&(u+=' encoding="'+n.encoding+'"'),n.standalone!=null&&(u+=' standalone="'+n.standalone+'"'),o.state=e.CloseTag,u+=o.spaceBeforeSlash+"?>",u+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.docType=function(n,o,a){var u,h,c,f,l;if(a||(a=0),this.openNode(n,o,a),o.state=e.OpenTag,f=this.indent(n,o,a),f+="<!DOCTYPE "+n.root().name,n.pubID&&n.sysID?f+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.sysID&&(f+=' SYSTEM "'+n.sysID+'"'),n.children.length>0){for(f+=" [",f+=this.endline(n,o,a),o.state=e.InsideTag,l=n.children,h=0,c=l.length;h<c;h++)u=l[h],f+=this.writeChildNode(u,o,a+1);o.state=e.CloseTag,f+="]"}return o.state=e.CloseTag,f+=o.spaceBeforeSlash+">",f+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),f},s.prototype.element=function(n,o,a){var u,h,c,f,l,d,y,w,O,x,E,g,D,A;a||(a=0),x=!1,E="",this.openNode(n,o,a),o.state=e.OpenTag,E+=this.indent(n,o,a)+"<"+n.name,g=n.attribs;for(O in g)i.call(g,O)&&(u=g[O],E+=this.attribute(u,o,a));if(c=n.children.length,f=c===0?null:n.children[0],c===0||n.children.every(function(v){return(v.type===t.Text||v.type===t.Raw)&&v.value===""}))o.allowEmpty?(E+=">",o.state=e.CloseTag,E+="</"+n.name+">"+this.endline(n,o,a)):(o.state=e.CloseTag,E+=o.spaceBeforeSlash+"/>"+this.endline(n,o,a));else if(o.pretty&&c===1&&(f.type===t.Text||f.type===t.Raw)&&f.value!=null)E+=">",o.state=e.InsideTag,o.suppressPrettyCount++,x=!0,E+=this.writeChildNode(f,o,a+1),o.suppressPrettyCount--,x=!1,o.state=e.CloseTag,E+="</"+n.name+">"+this.endline(n,o,a);else{if(o.dontPrettyTextNodes){for(D=n.children,l=0,y=D.length;l<y;l++)if(h=D[l],(h.type===t.Text||h.type===t.Raw)&&h.value!=null){o.suppressPrettyCount++,x=!0;break}}for(E+=">"+this.endline(n,o,a),o.state=e.InsideTag,A=n.children,d=0,w=A.length;d<w;d++)h=A[d],E+=this.writeChildNode(h,o,a+1);o.state=e.CloseTag,E+=this.indent(n,o,a)+"</"+n.name+">",x&&o.suppressPrettyCount--,E+=this.endline(n,o,a),o.state=e.None}return this.closeNode(n,o,a),E},s.prototype.writeChildNode=function(n,o,a){switch(n.type){case t.CData:return this.cdata(n,o,a);case t.Comment:return this.comment(n,o,a);case t.Element:return this.element(n,o,a);case t.Raw:return this.raw(n,o,a);case t.Text:return this.text(n,o,a);case t.ProcessingInstruction:return this.processingInstruction(n,o,a);case t.Dummy:return"";case t.Declaration:return this.declaration(n,o,a);case t.DocType:return this.docType(n,o,a);case t.AttributeDeclaration:return this.dtdAttList(n,o,a);case t.ElementDeclaration:return this.dtdElement(n,o,a);case t.EntityDeclaration:return this.dtdEntity(n,o,a);case t.NotationDeclaration:return this.dtdNotation(n,o,a);default:throw new Error("Unknown XML node type: "+n.constructor.name)}},s.prototype.processingInstruction=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<?",o.state=e.InsideTag,u+=n.target,n.value&&(u+=" "+n.value),o.state=e.CloseTag,u+=o.spaceBeforeSlash+"?>",u+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.raw=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a),o.state=e.InsideTag,u+=n.value,o.state=e.CloseTag,u+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.text=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a),o.state=e.InsideTag,u+=n.value,o.state=e.CloseTag,u+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.dtdAttList=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!ATTLIST",o.state=e.InsideTag,u+=" "+n.elementName+" "+n.attributeName+" "+n.attributeType,n.defaultValueType!=="#DEFAULT"&&(u+=" "+n.defaultValueType),n.defaultValue&&(u+=' "'+n.defaultValue+'"'),o.state=e.CloseTag,u+=o.spaceBeforeSlash+">"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.dtdElement=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!ELEMENT",o.state=e.InsideTag,u+=" "+n.name+" "+n.value,o.state=e.CloseTag,u+=o.spaceBeforeSlash+">"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.dtdEntity=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!ENTITY",o.state=e.InsideTag,n.pe&&(u+=" %"),u+=" "+n.name,n.value?u+=' "'+n.value+'"':(n.pubID&&n.sysID?u+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.sysID&&(u+=' SYSTEM "'+n.sysID+'"'),n.nData&&(u+=" NDATA "+n.nData)),o.state=e.CloseTag,u+=o.spaceBeforeSlash+">"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.dtdNotation=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!NOTATION",o.state=e.InsideTag,u+=" "+n.name,n.pubID&&n.sysID?u+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.pubID?u+=' PUBLIC "'+n.pubID+'"':n.sysID&&(u+=' SYSTEM "'+n.sysID+'"'),o.state=e.CloseTag,u+=o.spaceBeforeSlash+">"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.openNode=function(n,o,a){},s.prototype.closeNode=function(n,o,a){},s.prototype.openAttribute=function(n,o,a){},s.prototype.closeAttribute=function(n,o,a){},s}()}).call(ne)),Un.exports}var Os;function Bi(){return Os||(Os=1,(function(){var t,e=function(i,s){for(var n in s)r.call(s,n)&&(i[n]=s[n]);function o(){this.constructor=i}return o.prototype=s.prototype,i.prototype=new o,i.__super__=s.prototype,i},r={}.hasOwnProperty;t=Ja(),Bn.exports=function(i){e(s,i);function s(n){s.__super__.constructor.call(this,n)}return s.prototype.document=function(n,o){var a,u,h,c,f;for(o=this.filterOptions(o),c="",f=n.children,u=0,h=f.length;u<h;u++)a=f[u],c+=this.writeChildNode(a,o,0);return o.pretty&&c.slice(-o.newline.length)===o.newline&&(c=c.slice(0,-o.newline.length)),c},s}(t)}).call(ne)),Bn.exports}var Ts;function Qa(){return Ts||(Ts=1,(function(){var t,e,r,i,s,n,o,a=function(h,c){for(var f in c)u.call(c,f)&&(h[f]=c[f]);function l(){this.constructor=h}return l.prototype=c.prototype,h.prototype=new l,h.__super__=c.prototype,h},u={}.hasOwnProperty;o=Ke().isPlainObject,r=Ha(),e=zl(),i=$e(),t=ge(),n=Ka(),s=Bi(),yn.exports=function(h){a(c,h);function c(f){c.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new e,f||(f={}),f.writer||(f.writer=new s),this.options=f,this.stringify=new n(f)}return Object.defineProperty(c.prototype,"implementation",{value:new r}),Object.defineProperty(c.prototype,"doctype",{get:function(){var f,l,d,y;for(y=this.children,l=0,d=y.length;l<d;l++)if(f=y[l],f.type===t.DocType)return f;return null}}),Object.defineProperty(c.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(c.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(c.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(c.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(c.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(c.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(c.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(c.prototype,"origin",{get:function(){return null}}),Object.defineProperty(c.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(c.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(c.prototype,"contentType",{get:function(){return null}}),c.prototype.end=function(f){var l;return l={},f?o(f)&&(l=f,f=this.options.writer):f=this.options.writer,f.document(this,f.filterOptions(l))},c.prototype.toString=function(f){return this.options.writer.document(this,this.options.writer.filterOptions(f))},c.prototype.createElement=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createTextNode=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createComment=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createCDATASection=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createProcessingInstruction=function(f,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createAttribute=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createEntityReference=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByTagName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.importNode=function(f,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createElementNS=function(f,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createAttributeNS=function(f,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByTagNameNS=function(f,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementById=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.adoptNode=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.renameNode=function(f,l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByClassName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createEvent=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createNodeIterator=function(f,l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createTreeWalker=function(f,l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c}(i)}).call(ne)),yn.exports}var Vn={exports:{}},Cs;function Gl(){return Cs||(Cs=1,(function(){var t,e,r,i,s,n,o,a,u,h,c,f,l,d,y,w,O,x,E,g,D,A,v,C={}.hasOwnProperty;v=Ke(),D=v.isObject,g=v.isFunction,A=v.isPlainObject,E=v.getValue,t=ge(),f=Qa(),l=_i(),i=xi(),s=Ni(),y=ki(),x=ji(),d=qi(),h=Ii(),c=Ri(),n=Pi(),a=Li(),o=Mi(),u=$i(),r=Ga(),O=Ka(),w=Bi(),e=wr(),Vn.exports=function(){function T(p,b,F){var P;this.name="?xml",this.type=t.Document,p||(p={}),P={},p.writer?A(p.writer)&&(P=p.writer,p.writer=new w):p.writer=new w,this.options=p,this.writer=p.writer,this.writerOptions=this.writer.filterOptions(P),this.stringify=new O(p),this.onDataCallback=b||function(){},this.onEndCallback=F||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return T.prototype.createChildNode=function(p){var b,F,P,U,B,q,z,W;switch(p.type){case t.CData:this.cdata(p.value);break;case t.Comment:this.comment(p.value);break;case t.Element:P={},z=p.attribs;for(F in z)C.call(z,F)&&(b=z[F],P[F]=b.value);this.node(p.name,P);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(p.value);break;case t.Text:this.text(p.value);break;case t.ProcessingInstruction:this.instruction(p.target,p.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+p.constructor.name)}for(W=p.children,B=0,q=W.length;B<q;B++)U=W[B],this.createChildNode(U),U.type===t.Element&&this.up();return this},T.prototype.dummy=function(){return this},T.prototype.node=function(p,b,F){var P;if(p==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(p));return this.openCurrent(),p=E(p),b==null&&(b={}),b=E(b),D(b)||(P=[b,F],F=P[0],b=P[1]),this.currentNode=new l(this,p,b),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,F!=null&&this.text(F),this},T.prototype.element=function(p,b,F){var P,U,B,q,z,W;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(p)||D(p)||g(p))for(q=this.options.noValidation,this.options.noValidation=!0,W=new f(this.options).element("TEMP_ROOT"),W.element(p),this.options.noValidation=q,z=W.children,U=0,B=z.length;U<B;U++)P=z[U],this.createChildNode(P),P.type===t.Element&&this.up();else this.node(p,b,F);return this},T.prototype.attribute=function(p,b){var F,P;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(p));if(p!=null&&(p=E(p)),D(p))for(F in p)C.call(p,F)&&(P=p[F],this.attribute(F,P));else g(b)&&(b=b.apply()),this.options.keepNullAttributes&&b==null?this.currentNode.attribs[p]=new r(this,p,""):b!=null&&(this.currentNode.attribs[p]=new r(this,p,b));return this},T.prototype.text=function(p){var b;return this.openCurrent(),b=new x(this,p),this.onData(this.writer.text(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.cdata=function(p){var b;return this.openCurrent(),b=new i(this,p),this.onData(this.writer.cdata(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.comment=function(p){var b;return this.openCurrent(),b=new s(this,p),this.onData(this.writer.comment(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.raw=function(p){var b;return this.openCurrent(),b=new y(this,p),this.onData(this.writer.raw(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.instruction=function(p,b){var F,P,U,B,q;if(this.openCurrent(),p!=null&&(p=E(p)),b!=null&&(b=E(b)),Array.isArray(p))for(F=0,B=p.length;F<B;F++)P=p[F],this.instruction(P);else if(D(p))for(P in p)C.call(p,P)&&(U=p[P],this.instruction(P,U));else g(b)&&(b=b.apply()),q=new d(this,p,b),this.onData(this.writer.processingInstruction(q,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},T.prototype.declaration=function(p,b,F){var P;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return P=new h(this,p,b,F),this.onData(this.writer.declaration(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.doctype=function(p,b,F){if(this.openCurrent(),p==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new c(this,b,F),this.currentNode.rootNodeName=p,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},T.prototype.dtdElement=function(p,b){var F;return this.openCurrent(),F=new o(this,p,b),this.onData(this.writer.dtdElement(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.attList=function(p,b,F,P,U){var B;return this.openCurrent(),B=new n(this,p,b,F,P,U),this.onData(this.writer.dtdAttList(B,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.entity=function(p,b){var F;return this.openCurrent(),F=new a(this,!1,p,b),this.onData(this.writer.dtdEntity(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.pEntity=function(p,b){var F;return this.openCurrent(),F=new a(this,!0,p,b),this.onData(this.writer.dtdEntity(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.notation=function(p,b){var F;return this.openCurrent(),F=new u(this,p,b),this.onData(this.writer.dtdNotation(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},T.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},T.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},T.prototype.openNode=function(p){var b,F,P,U;if(!p.isOpen){if(!this.root&&this.currentLevel===0&&p.type===t.Element&&(this.root=p),F="",p.type===t.Element){this.writerOptions.state=e.OpenTag,F=this.writer.indent(p,this.writerOptions,this.currentLevel)+"<"+p.name,U=p.attribs;for(P in U)C.call(U,P)&&(b=U[P],F+=this.writer.attribute(b,this.writerOptions,this.currentLevel));F+=(p.children?">":"/>")+this.writer.endline(p,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,F=this.writer.indent(p,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+p.rootNodeName,p.pubID&&p.sysID?F+=' PUBLIC "'+p.pubID+'" "'+p.sysID+'"':p.sysID&&(F+=' SYSTEM "'+p.sysID+'"'),p.children?(F+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,F+=">"),F+=this.writer.endline(p,this.writerOptions,this.currentLevel);return this.onData(F,this.currentLevel),p.isOpen=!0}},T.prototype.closeNode=function(p){var b;if(!p.isClosed)return b="",this.writerOptions.state=e.CloseTag,p.type===t.Element?b=this.writer.indent(p,this.writerOptions,this.currentLevel)+"</"+p.name+">"+this.writer.endline(p,this.writerOptions,this.currentLevel):b=this.writer.indent(p,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(p,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(b,this.currentLevel),p.isClosed=!0},T.prototype.onData=function(p,b){return this.documentStarted=!0,this.onDataCallback(p,b+1)},T.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},T.prototype.debugInfo=function(p){return p==null?"":"node: <"+p+">"},T.prototype.ele=function(){return this.element.apply(this,arguments)},T.prototype.nod=function(p,b,F){return this.node(p,b,F)},T.prototype.txt=function(p){return this.text(p)},T.prototype.dat=function(p){return this.cdata(p)},T.prototype.com=function(p){return this.comment(p)},T.prototype.ins=function(p,b){return this.instruction(p,b)},T.prototype.dec=function(p,b,F){return this.declaration(p,b,F)},T.prototype.dtd=function(p,b,F){return this.doctype(p,b,F)},T.prototype.e=function(p,b,F){return this.element(p,b,F)},T.prototype.n=function(p,b,F){return this.node(p,b,F)},T.prototype.t=function(p){return this.text(p)},T.prototype.d=function(p){return this.cdata(p)},T.prototype.c=function(p){return this.comment(p)},T.prototype.r=function(p){return this.raw(p)},T.prototype.i=function(p,b){return this.instruction(p,b)},T.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},T.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},T.prototype.ent=function(p,b){return this.entity(p,b)},T.prototype.pent=function(p,b){return this.pEntity(p,b)},T.prototype.not=function(p,b){return this.notation(p,b)},T}()}).call(ne)),Vn.exports}var zn={exports:{}},Ds;function Yl(){return Ds||(Ds=1,(function(){var t,e,r,i=function(n,o){for(var a in o)s.call(o,a)&&(n[a]=o[a]);function u(){this.constructor=n}return u.prototype=o.prototype,n.prototype=new u,n.__super__=o.prototype,n},s={}.hasOwnProperty;t=ge(),r=Ja(),e=wr(),zn.exports=function(n){i(o,n);function o(a,u){this.stream=a,o.__super__.constructor.call(this,u)}return o.prototype.endline=function(a,u,h){return a.isLastRootNode&&u.state===e.CloseTag?"":o.__super__.endline.call(this,a,u,h)},o.prototype.document=function(a,u){var h,c,f,l,d,y,w,O,x;for(w=a.children,c=f=0,d=w.length;f<d;c=++f)h=w[c],h.isLastRootNode=c===a.children.length-1;for(u=this.filterOptions(u),O=a.children,x=[],l=0,y=O.length;l<y;l++)h=O[l],x.push(this.writeChildNode(h,u,0));return x},o.prototype.attribute=function(a,u,h){return this.stream.write(o.__super__.attribute.call(this,a,u,h))},o.prototype.cdata=function(a,u,h){return this.stream.write(o.__super__.cdata.call(this,a,u,h))},o.prototype.comment=function(a,u,h){return this.stream.write(o.__super__.comment.call(this,a,u,h))},o.prototype.declaration=function(a,u,h){return this.stream.write(o.__super__.declaration.call(this,a,u,h))},o.prototype.docType=function(a,u,h){var c,f,l,d;if(h||(h=0),this.openNode(a,u,h),u.state=e.OpenTag,this.stream.write(this.indent(a,u,h)),this.stream.write("<!DOCTYPE "+a.root().name),a.pubID&&a.sysID?this.stream.write(' PUBLIC "'+a.pubID+'" "'+a.sysID+'"'):a.sysID&&this.stream.write(' SYSTEM "'+a.sysID+'"'),a.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(a,u,h)),u.state=e.InsideTag,d=a.children,f=0,l=d.length;f<l;f++)c=d[f],this.writeChildNode(c,u,h+1);u.state=e.CloseTag,this.stream.write("]")}return u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+">"),this.stream.write(this.endline(a,u,h)),u.state=e.None,this.closeNode(a,u,h)},o.prototype.element=function(a,u,h){var c,f,l,d,y,w,O,x,E;h||(h=0),this.openNode(a,u,h),u.state=e.OpenTag,this.stream.write(this.indent(a,u,h)+"<"+a.name),x=a.attribs;for(O in x)s.call(x,O)&&(c=x[O],this.attribute(c,u,h));if(l=a.children.length,d=l===0?null:a.children[0],l===0||a.children.every(function(g){return(g.type===t.Text||g.type===t.Raw)&&g.value===""}))u.allowEmpty?(this.stream.write(">"),u.state=e.CloseTag,this.stream.write("</"+a.name+">")):(u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+"/>"));else if(u.pretty&&l===1&&(d.type===t.Text||d.type===t.Raw)&&d.value!=null)this.stream.write(">"),u.state=e.InsideTag,u.suppressPrettyCount++,this.writeChildNode(d,u,h+1),u.suppressPrettyCount--,u.state=e.CloseTag,this.stream.write("</"+a.name+">");else{for(this.stream.write(">"+this.endline(a,u,h)),u.state=e.InsideTag,E=a.children,y=0,w=E.length;y<w;y++)f=E[y],this.writeChildNode(f,u,h+1);u.state=e.CloseTag,this.stream.write(this.indent(a,u,h)+"</"+a.name+">")}return this.stream.write(this.endline(a,u,h)),u.state=e.None,this.closeNode(a,u,h)},o.prototype.processingInstruction=function(a,u,h){return this.stream.write(o.__super__.processingInstruction.call(this,a,u,h))},o.prototype.raw=function(a,u,h){return this.stream.write(o.__super__.raw.call(this,a,u,h))},o.prototype.text=function(a,u,h){return this.stream.write(o.__super__.text.call(this,a,u,h))},o.prototype.dtdAttList=function(a,u,h){return this.stream.write(o.__super__.dtdAttList.call(this,a,u,h))},o.prototype.dtdElement=function(a,u,h){return this.stream.write(o.__super__.dtdElement.call(this,a,u,h))},o.prototype.dtdEntity=function(a,u,h){return this.stream.write(o.__super__.dtdEntity.call(this,a,u,h))},o.prototype.dtdNotation=function(a,u,h){return this.stream.write(o.__super__.dtdNotation.call(this,a,u,h))},o}(r)}).call(ne)),zn.exports}var As;function Kl(){return As||(As=1,(function(){var t,e,r,i,s,n,o,a,u,h;h=Ke(),a=h.assign,u=h.isFunction,r=Ha(),i=Qa(),s=Gl(),o=Bi(),n=Yl(),t=ge(),e=wr(),We.create=function(c,f,l,d){var y,w;if(c==null)throw new Error("Root element needs a name.");return d=a({},f,l,d),y=new i(d),w=y.element(c),d.headless||(y.declaration(d),(d.pubID!=null||d.sysID!=null)&&y.dtd(d)),w},We.begin=function(c,f,l){var d;return u(c)&&(d=[c,f],f=d[0],l=d[1],c={}),f?new s(c,f,l):new i(c)},We.stringWriter=function(c){return new o(c)},We.streamWriter=function(c,f){return new n(c,f)},We.implementation=new r,We.nodeType=t,We.writerState=e}).call(ne)),We}var Fs;function Jl(){return Fs||(Fs=1,(function(){var t,e,r,i,s,n={}.hasOwnProperty;t=Kl(),e=Ai().defaults,i=function(o){return typeof o=="string"&&(o.indexOf("&")>=0||o.indexOf(">")>=0||o.indexOf("<")>=0)},s=function(o){return"<![CDATA["+r(o)+"]]>"},r=function(o){return o.replace("]]>","]]]]><![CDATA[>")},dn.Builder=function(){function o(a){var u,h,c;this.options={},h=e["0.2"];for(u in h)n.call(h,u)&&(c=h[u],this.options[u]=c);for(u in a)n.call(a,u)&&(c=a[u],this.options[u]=c)}return o.prototype.buildObject=function(a){var u,h,c,f,l;return u=this.options.attrkey,h=this.options.charkey,Object.keys(a).length===1&&this.options.rootName===e["0.2"].rootName?(l=Object.keys(a)[0],a=a[l]):l=this.options.rootName,c=function(d){return function(y,w){var O,x,E,g,D,A;if(typeof w!="object")d.options.cdata&&i(w)?y.raw(s(w)):y.txt(w);else if(Array.isArray(w)){for(g in w)if(n.call(w,g)){x=w[g];for(D in x)E=x[D],y=c(y.ele(D),E).up()}}else for(D in w)if(n.call(w,D))if(x=w[D],D===u){if(typeof x=="object")for(O in x)A=x[O],y=y.att(O,A)}else if(D===h)d.options.cdata&&i(x)?y=y.raw(s(x)):y=y.txt(x);else if(Array.isArray(x))for(g in x)n.call(x,g)&&(E=x[g],typeof E=="string"?d.options.cdata&&i(E)?y=y.ele(D).raw(s(E)).up():y=y.ele(D,E).up():y=c(y.ele(D),E).up());else typeof x=="object"?y=c(y.ele(D),x).up():typeof x=="string"&&d.options.cdata&&i(x)?y=y.ele(D).raw(s(x)).up():(x==null&&(x=""),y=y.ele(D,x.toString()).up());return y}}(this),f=t.create(l,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),c(f,a).end(this.options.renderOpts)},o}()}).call(ne)),dn}var Wn={},Hn={},_s;function Ql(){return _s||(_s=1,function(t){(function(e){e.parser=function(_,S){return new i(_,S)},e.SAXParser=i,e.SAXStream=c,e.createStream=h,e.MAX_BUFFER_LENGTH=64*1024;var r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function i(_,S){if(!(this instanceof i))return new i(_,S);var H=this;n(H),H.q=H.c="",H.bufferCheckPosition=e.MAX_BUFFER_LENGTH,H.opt=S||{},H.opt.lowercase=H.opt.lowercase||H.opt.lowercasetags,H.looseCase=H.opt.lowercase?"toLowerCase":"toUpperCase",H.tags=[],H.closed=H.closedRoot=H.sawRoot=!1,H.tag=H.error=null,H.strict=!!_,H.noscript=!!(_||H.opt.noscript),H.state=p.BEGIN,H.strictEntities=H.opt.strictEntities,H.ENTITIES=H.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),H.attribList=[],H.opt.xmlns&&(H.ns=Object.create(w)),H.opt.unquotedAttributeValues===void 0&&(H.opt.unquotedAttributeValues=!_),H.trackPosition=H.opt.position!==!1,H.trackPosition&&(H.position=H.line=H.column=0),F(H,"onready")}Object.create||(Object.create=function(_){function S(){}S.prototype=_;var H=new S;return H}),Object.keys||(Object.keys=function(_){var S=[];for(var H in _)_.hasOwnProperty(H)&&S.push(H);return S});function s(_){for(var S=Math.max(e.MAX_BUFFER_LENGTH,10),H=0,m=0,N=r.length;m<N;m++){var I=_[r[m]].length;if(I>S)switch(r[m]){case"textNode":U(_);break;case"cdata":P(_,"oncdata",_.cdata),_.cdata="";break;case"script":P(_,"onscript",_.script),_.script="";break;default:q(_,"Max buffer length exceeded: "+r[m])}H=Math.max(H,I)}var k=e.MAX_BUFFER_LENGTH-H;_.bufferCheckPosition=k+_.position}function n(_){for(var S=0,H=r.length;S<H;S++)_[r[S]]=""}function o(_){U(_),_.cdata!==""&&(P(_,"oncdata",_.cdata),_.cdata=""),_.script!==""&&(P(_,"onscript",_.script),_.script="")}i.prototype={end:function(){z(this)},write:Re,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var a;try{a=require("stream").Stream}catch{a=function(){}}a||(a=function(){});var u=e.EVENTS.filter(function(_){return _!=="error"&&_!=="end"});function h(_,S){return new c(_,S)}function c(_,S){if(!(this instanceof c))return new c(_,S);a.apply(this),this._parser=new i(_,S),this.writable=!0,this.readable=!0;var H=this;this._parser.onend=function(){H.emit("end")},this._parser.onerror=function(m){H.emit("error",m),H._parser.error=null},this._decoder=null,u.forEach(function(m){Object.defineProperty(H,"on"+m,{get:function(){return H._parser["on"+m]},set:function(N){if(!N)return H.removeAllListeners(m),H._parser["on"+m]=N,N;H.on(m,N)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(a.prototype,{constructor:{value:c}}),c.prototype.write=function(_){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(_)){if(!this._decoder){var S=Zu.StringDecoder;this._decoder=new S("utf8")}_=this._decoder.write(_)}return this._parser.write(_.toString()),this.emit("data",_),!0},c.prototype.end=function(_){return _&&_.length&&this.write(_),this._parser.end(),!0},c.prototype.on=function(_,S){var H=this;return!H._parser["on"+_]&&u.indexOf(_)!==-1&&(H._parser["on"+_]=function(){var m=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);m.splice(0,0,_),H.emit.apply(H,m)}),a.prototype.on.call(H,_,S)};var f="[CDATA[",l="DOCTYPE",d="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/2000/xmlns/",w={xml:d,xmlns:y},O=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,E=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function D(_){return _===" "||_===`
`||_==="\r"||_==="	"}function A(_){return _==='"'||_==="'"}function v(_){return _===">"||D(_)}function C(_,S){return _.test(S)}function T(_,S){return!C(_,S)}var p=0;e.STATE={BEGIN:p++,BEGIN_WHITESPACE:p++,TEXT:p++,TEXT_ENTITY:p++,OPEN_WAKA:p++,SGML_DECL:p++,SGML_DECL_QUOTED:p++,DOCTYPE:p++,DOCTYPE_QUOTED:p++,DOCTYPE_DTD:p++,DOCTYPE_DTD_QUOTED:p++,COMMENT_STARTING:p++,COMMENT:p++,COMMENT_ENDING:p++,COMMENT_ENDED:p++,CDATA:p++,CDATA_ENDING:p++,CDATA_ENDING_2:p++,PROC_INST:p++,PROC_INST_BODY:p++,PROC_INST_ENDING:p++,OPEN_TAG:p++,OPEN_TAG_SLASH:p++,ATTRIB:p++,ATTRIB_NAME:p++,ATTRIB_NAME_SAW_WHITE:p++,ATTRIB_VALUE:p++,ATTRIB_VALUE_QUOTED:p++,ATTRIB_VALUE_CLOSED:p++,ATTRIB_VALUE_UNQUOTED:p++,ATTRIB_VALUE_ENTITY_Q:p++,ATTRIB_VALUE_ENTITY_U:p++,CLOSE_TAG:p++,CLOSE_TAG_SAW_WHITE:p++,SCRIPT:p++,SCRIPT_ENDING:p++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(_){var S=e.ENTITIES[_],H=typeof S=="number"?String.fromCharCode(S):S;e.ENTITIES[_]=H});for(var b in e.STATE)e.STATE[e.STATE[b]]=b;p=e.STATE;function F(_,S,H){_[S]&&_[S](H)}function P(_,S,H){_.textNode&&U(_),F(_,S,H)}function U(_){_.textNode=B(_.opt,_.textNode),_.textNode&&F(_,"ontext",_.textNode),_.textNode=""}function B(_,S){return _.trim&&(S=S.trim()),_.normalize&&(S=S.replace(/\s+/g," ")),S}function q(_,S){return U(_),_.trackPosition&&(S+=`
Line: `+_.line+`
Column: `+_.column+`
Char: `+_.c),S=new Error(S),_.error=S,F(_,"onerror",S),_}function z(_){return _.sawRoot&&!_.closedRoot&&W(_,"Unclosed root tag"),_.state!==p.BEGIN&&_.state!==p.BEGIN_WHITESPACE&&_.state!==p.TEXT&&q(_,"Unexpected end"),U(_),_.c="",_.closed=!0,F(_,"onend"),i.call(_,_.strict,_.opt),_}function W(_,S){if(typeof _!="object"||!(_ instanceof i))throw new Error("bad call to strictFail");_.strict&&q(_,S)}function K(_){_.strict||(_.tagName=_.tagName[_.looseCase]());var S=_.tags[_.tags.length-1]||_,H=_.tag={name:_.tagName,attributes:{}};_.opt.xmlns&&(H.ns=S.ns),_.attribList.length=0,P(_,"onopentagstart",H)}function J(_,S){var H=_.indexOf(":"),m=H<0?["",_]:_.split(":"),N=m[0],I=m[1];return S&&_==="xmlns"&&(N="xmlns",I=""),{prefix:N,local:I}}function Z(_){if(_.strict||(_.attribName=_.attribName[_.looseCase]()),_.attribList.indexOf(_.attribName)!==-1||_.tag.attributes.hasOwnProperty(_.attribName)){_.attribName=_.attribValue="";return}if(_.opt.xmlns){var S=J(_.attribName,!0),H=S.prefix,m=S.local;if(H==="xmlns")if(m==="xml"&&_.attribValue!==d)W(_,"xml: prefix must be bound to "+d+`
Actual: `+_.attribValue);else if(m==="xmlns"&&_.attribValue!==y)W(_,"xmlns: prefix must be bound to "+y+`
Actual: `+_.attribValue);else{var N=_.tag,I=_.tags[_.tags.length-1]||_;N.ns===I.ns&&(N.ns=Object.create(I.ns)),N.ns[m]=_.attribValue}_.attribList.push([_.attribName,_.attribValue])}else _.tag.attributes[_.attribName]=_.attribValue,P(_,"onattribute",{name:_.attribName,value:_.attribValue});_.attribName=_.attribValue=""}function re(_,S){if(_.opt.xmlns){var H=_.tag,m=J(_.tagName);H.prefix=m.prefix,H.local=m.local,H.uri=H.ns[m.prefix]||"",H.prefix&&!H.uri&&(W(_,"Unbound namespace prefix: "+JSON.stringify(_.tagName)),H.uri=m.prefix);var N=_.tags[_.tags.length-1]||_;H.ns&&N.ns!==H.ns&&Object.keys(H.ns).forEach(function(ee){P(_,"onopennamespace",{prefix:ee,uri:H.ns[ee]})});for(var I=0,k=_.attribList.length;I<k;I++){var M=_.attribList[I],$=M[0],V=M[1],L=J($,!0),R=L.prefix,X=L.local,j=R===""?"":H.ns[R]||"",G={name:$,value:V,prefix:R,local:X,uri:j};R&&R!=="xmlns"&&!j&&(W(_,"Unbound namespace prefix: "+JSON.stringify(R)),G.uri=R),_.tag.attributes[$]=G,P(_,"onattribute",G)}_.attribList.length=0}_.tag.isSelfClosing=!!S,_.sawRoot=!0,_.tags.push(_.tag),P(_,"onopentag",_.tag),S||(!_.noscript&&_.tagName.toLowerCase()==="script"?_.state=p.SCRIPT:_.state=p.TEXT,_.tag=null,_.tagName=""),_.attribName=_.attribValue="",_.attribList.length=0}function ue(_){if(!_.tagName){W(_,"Weird empty close tag."),_.textNode+="</>",_.state=p.TEXT;return}if(_.script){if(_.tagName!=="script"){_.script+="</"+_.tagName+">",_.tagName="",_.state=p.SCRIPT;return}P(_,"onscript",_.script),_.script=""}var S=_.tags.length,H=_.tagName;_.strict||(H=H[_.looseCase]());for(var m=H;S--;){var N=_.tags[S];if(N.name!==m)W(_,"Unexpected close tag");else break}if(S<0){W(_,"Unmatched closing tag: "+_.tagName),_.textNode+="</"+_.tagName+">",_.state=p.TEXT;return}_.tagName=H;for(var I=_.tags.length;I-- >S;){var k=_.tag=_.tags.pop();_.tagName=_.tag.name,P(_,"onclosetag",_.tagName);var M={};for(var $ in k.ns)M[$]=k.ns[$];var V=_.tags[_.tags.length-1]||_;_.opt.xmlns&&k.ns!==V.ns&&Object.keys(k.ns).forEach(function(L){var R=k.ns[L];P(_,"onclosenamespace",{prefix:L,uri:R})})}S===0&&(_.closedRoot=!0),_.tagName=_.attribValue=_.attribName="",_.attribList.length=0,_.state=p.TEXT}function pe(_){var S=_.entity,H=S.toLowerCase(),m,N="";return _.ENTITIES[S]?_.ENTITIES[S]:_.ENTITIES[H]?_.ENTITIES[H]:(S=H,S.charAt(0)==="#"&&(S.charAt(1)==="x"?(S=S.slice(2),m=parseInt(S,16),N=m.toString(16)):(S=S.slice(1),m=parseInt(S,10),N=m.toString(10))),S=S.replace(/^0+/,""),isNaN(m)||N.toLowerCase()!==S?(W(_,"Invalid character entity"),"&"+_.entity+";"):String.fromCodePoint(m))}function Y(_,S){S==="<"?(_.state=p.OPEN_WAKA,_.startTagPosition=_.position):D(S)||(W(_,"Non-whitespace before first tag."),_.textNode=S,_.state=p.TEXT)}function ve(_,S){var H="";return S<_.length&&(H=_.charAt(S)),H}function Re(_){var S=this;if(this.error)throw this.error;if(S.closed)return q(S,"Cannot write after close. Assign an onready handler.");if(_===null)return z(S);typeof _=="object"&&(_=_.toString());for(var H=0,m="";m=ve(_,H++),S.c=m,!!m;)switch(S.trackPosition&&(S.position++,m===`
`?(S.line++,S.column=0):S.column++),S.state){case p.BEGIN:if(S.state=p.BEGIN_WHITESPACE,m==="\uFEFF")continue;Y(S,m);continue;case p.BEGIN_WHITESPACE:Y(S,m);continue;case p.TEXT:if(S.sawRoot&&!S.closedRoot){for(var N=H-1;m&&m!=="<"&&m!=="&";)m=ve(_,H++),m&&S.trackPosition&&(S.position++,m===`
`?(S.line++,S.column=0):S.column++);S.textNode+=_.substring(N,H-1)}m==="<"&&!(S.sawRoot&&S.closedRoot&&!S.strict)?(S.state=p.OPEN_WAKA,S.startTagPosition=S.position):(!D(m)&&(!S.sawRoot||S.closedRoot)&&W(S,"Text data outside of root node."),m==="&"?S.state=p.TEXT_ENTITY:S.textNode+=m);continue;case p.SCRIPT:m==="<"?S.state=p.SCRIPT_ENDING:S.script+=m;continue;case p.SCRIPT_ENDING:m==="/"?S.state=p.CLOSE_TAG:(S.script+="<"+m,S.state=p.SCRIPT);continue;case p.OPEN_WAKA:if(m==="!")S.state=p.SGML_DECL,S.sgmlDecl="";else if(!D(m))if(C(O,m))S.state=p.OPEN_TAG,S.tagName=m;else if(m==="/")S.state=p.CLOSE_TAG,S.tagName="";else if(m==="?")S.state=p.PROC_INST,S.procInstName=S.procInstBody="";else{if(W(S,"Unencoded <"),S.startTagPosition+1<S.position){var I=S.position-S.startTagPosition;m=new Array(I).join(" ")+m}S.textNode+="<"+m,S.state=p.TEXT}continue;case p.SGML_DECL:if(S.sgmlDecl+m==="--"){S.state=p.COMMENT,S.comment="",S.sgmlDecl="";continue}S.doctype&&S.doctype!==!0&&S.sgmlDecl?(S.state=p.DOCTYPE_DTD,S.doctype+="<!"+S.sgmlDecl+m,S.sgmlDecl=""):(S.sgmlDecl+m).toUpperCase()===f?(P(S,"onopencdata"),S.state=p.CDATA,S.sgmlDecl="",S.cdata=""):(S.sgmlDecl+m).toUpperCase()===l?(S.state=p.DOCTYPE,(S.doctype||S.sawRoot)&&W(S,"Inappropriately located doctype declaration"),S.doctype="",S.sgmlDecl=""):m===">"?(P(S,"onsgmldeclaration",S.sgmlDecl),S.sgmlDecl="",S.state=p.TEXT):(A(m)&&(S.state=p.SGML_DECL_QUOTED),S.sgmlDecl+=m);continue;case p.SGML_DECL_QUOTED:m===S.q&&(S.state=p.SGML_DECL,S.q=""),S.sgmlDecl+=m;continue;case p.DOCTYPE:m===">"?(S.state=p.TEXT,P(S,"ondoctype",S.doctype),S.doctype=!0):(S.doctype+=m,m==="["?S.state=p.DOCTYPE_DTD:A(m)&&(S.state=p.DOCTYPE_QUOTED,S.q=m));continue;case p.DOCTYPE_QUOTED:S.doctype+=m,m===S.q&&(S.q="",S.state=p.DOCTYPE);continue;case p.DOCTYPE_DTD:m==="]"?(S.doctype+=m,S.state=p.DOCTYPE):m==="<"?(S.state=p.OPEN_WAKA,S.startTagPosition=S.position):A(m)?(S.doctype+=m,S.state=p.DOCTYPE_DTD_QUOTED,S.q=m):S.doctype+=m;continue;case p.DOCTYPE_DTD_QUOTED:S.doctype+=m,m===S.q&&(S.state=p.DOCTYPE_DTD,S.q="");continue;case p.COMMENT:m==="-"?S.state=p.COMMENT_ENDING:S.comment+=m;continue;case p.COMMENT_ENDING:m==="-"?(S.state=p.COMMENT_ENDED,S.comment=B(S.opt,S.comment),S.comment&&P(S,"oncomment",S.comment),S.comment=""):(S.comment+="-"+m,S.state=p.COMMENT);continue;case p.COMMENT_ENDED:m!==">"?(W(S,"Malformed comment"),S.comment+="--"+m,S.state=p.COMMENT):S.doctype&&S.doctype!==!0?S.state=p.DOCTYPE_DTD:S.state=p.TEXT;continue;case p.CDATA:m==="]"?S.state=p.CDATA_ENDING:S.cdata+=m;continue;case p.CDATA_ENDING:m==="]"?S.state=p.CDATA_ENDING_2:(S.cdata+="]"+m,S.state=p.CDATA);continue;case p.CDATA_ENDING_2:m===">"?(S.cdata&&P(S,"oncdata",S.cdata),P(S,"onclosecdata"),S.cdata="",S.state=p.TEXT):m==="]"?S.cdata+="]":(S.cdata+="]]"+m,S.state=p.CDATA);continue;case p.PROC_INST:m==="?"?S.state=p.PROC_INST_ENDING:D(m)?S.state=p.PROC_INST_BODY:S.procInstName+=m;continue;case p.PROC_INST_BODY:if(!S.procInstBody&&D(m))continue;m==="?"?S.state=p.PROC_INST_ENDING:S.procInstBody+=m;continue;case p.PROC_INST_ENDING:m===">"?(P(S,"onprocessinginstruction",{name:S.procInstName,body:S.procInstBody}),S.procInstName=S.procInstBody="",S.state=p.TEXT):(S.procInstBody+="?"+m,S.state=p.PROC_INST_BODY);continue;case p.OPEN_TAG:C(x,m)?S.tagName+=m:(K(S),m===">"?re(S):m==="/"?S.state=p.OPEN_TAG_SLASH:(D(m)||W(S,"Invalid character in tag name"),S.state=p.ATTRIB));continue;case p.OPEN_TAG_SLASH:m===">"?(re(S,!0),ue(S)):(W(S,"Forward-slash in opening tag not followed by >"),S.state=p.ATTRIB);continue;case p.ATTRIB:if(D(m))continue;m===">"?re(S):m==="/"?S.state=p.OPEN_TAG_SLASH:C(O,m)?(S.attribName=m,S.attribValue="",S.state=p.ATTRIB_NAME):W(S,"Invalid attribute name");continue;case p.ATTRIB_NAME:m==="="?S.state=p.ATTRIB_VALUE:m===">"?(W(S,"Attribute without value"),S.attribValue=S.attribName,Z(S),re(S)):D(m)?S.state=p.ATTRIB_NAME_SAW_WHITE:C(x,m)?S.attribName+=m:W(S,"Invalid attribute name");continue;case p.ATTRIB_NAME_SAW_WHITE:if(m==="=")S.state=p.ATTRIB_VALUE;else{if(D(m))continue;W(S,"Attribute without value"),S.tag.attributes[S.attribName]="",S.attribValue="",P(S,"onattribute",{name:S.attribName,value:""}),S.attribName="",m===">"?re(S):C(O,m)?(S.attribName=m,S.state=p.ATTRIB_NAME):(W(S,"Invalid attribute name"),S.state=p.ATTRIB)}continue;case p.ATTRIB_VALUE:if(D(m))continue;A(m)?(S.q=m,S.state=p.ATTRIB_VALUE_QUOTED):(S.opt.unquotedAttributeValues||q(S,"Unquoted attribute value"),S.state=p.ATTRIB_VALUE_UNQUOTED,S.attribValue=m);continue;case p.ATTRIB_VALUE_QUOTED:if(m!==S.q){m==="&"?S.state=p.ATTRIB_VALUE_ENTITY_Q:S.attribValue+=m;continue}Z(S),S.q="",S.state=p.ATTRIB_VALUE_CLOSED;continue;case p.ATTRIB_VALUE_CLOSED:D(m)?S.state=p.ATTRIB:m===">"?re(S):m==="/"?S.state=p.OPEN_TAG_SLASH:C(O,m)?(W(S,"No whitespace between attributes"),S.attribName=m,S.attribValue="",S.state=p.ATTRIB_NAME):W(S,"Invalid attribute name");continue;case p.ATTRIB_VALUE_UNQUOTED:if(!v(m)){m==="&"?S.state=p.ATTRIB_VALUE_ENTITY_U:S.attribValue+=m;continue}Z(S),m===">"?re(S):S.state=p.ATTRIB;continue;case p.CLOSE_TAG:if(S.tagName)m===">"?ue(S):C(x,m)?S.tagName+=m:S.script?(S.script+="</"+S.tagName,S.tagName="",S.state=p.SCRIPT):(D(m)||W(S,"Invalid tagname in closing tag"),S.state=p.CLOSE_TAG_SAW_WHITE);else{if(D(m))continue;T(O,m)?S.script?(S.script+="</"+m,S.state=p.SCRIPT):W(S,"Invalid tagname in closing tag."):S.tagName=m}continue;case p.CLOSE_TAG_SAW_WHITE:if(D(m))continue;m===">"?ue(S):W(S,"Invalid characters in closing tag");continue;case p.TEXT_ENTITY:case p.ATTRIB_VALUE_ENTITY_Q:case p.ATTRIB_VALUE_ENTITY_U:var k,M;switch(S.state){case p.TEXT_ENTITY:k=p.TEXT,M="textNode";break;case p.ATTRIB_VALUE_ENTITY_Q:k=p.ATTRIB_VALUE_QUOTED,M="attribValue";break;case p.ATTRIB_VALUE_ENTITY_U:k=p.ATTRIB_VALUE_UNQUOTED,M="attribValue";break}if(m===";"){var $=pe(S);S.opt.unparsedEntities&&!Object.values(e.XML_ENTITIES).includes($)?(S.entity="",S.state=k,S.write($)):(S[M]+=$,S.entity="",S.state=k)}else C(S.entity.length?g:E,m)?S.entity+=m:(W(S,"Invalid character in entity name"),S[M]+="&"+S.entity+m,S.entity="",S.state=k);continue;default:throw new Error(S,"Unknown state: "+S.state)}return S.position>=S.bufferCheckPosition&&s(S),S}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var _=String.fromCharCode,S=Math.floor,H=function(){var m=16384,N=[],I,k,M=-1,$=arguments.length;if(!$)return"";for(var V="";++M<$;){var L=Number(arguments[M]);if(!isFinite(L)||L<0||L>1114111||S(L)!==L)throw RangeError("Invalid code point: "+L);L<=65535?N.push(L):(L-=65536,I=(L>>10)+55296,k=L%1024+56320,N.push(I,k)),(M+1===$||N.length>m)&&(V+=_.apply(null,N),N.length=0)}return V};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:H,configurable:!0,writable:!0}):String.fromCodePoint=H}()})(t)}(Hn)),Hn}var Gn={},xs;function Zl(){return xs||(xs=1,(function(){Gn.stripBOM=function(t){return t[0]==="\uFEFF"?t.substring(1):t}}).call(ne)),Gn}var ot={},Ns;function Za(){return Ns||(Ns=1,(function(){var t;t=new RegExp(/(?!xmlns)^.*:/),ot.normalize=function(e){return e.toLowerCase()},ot.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},ot.stripPrefix=function(e){return e.replace(t,"")},ot.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},ot.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(ne)),ot}var Is;function ef(){return Is||(Is=1,function(t){(function(){var e,r,i,s,n,o,a,u,h=function(l,d){return function(){return l.apply(d,arguments)}},c=function(l,d){for(var y in d)f.call(d,y)&&(l[y]=d[y]);function w(){this.constructor=l}return w.prototype=d.prototype,l.prototype=new w,l.__super__=d.prototype,l},f={}.hasOwnProperty;a=Ql(),i=ct,e=Zl(),o=Za(),u=ec.setImmediate,r=Ai().defaults,s=function(l){return typeof l=="object"&&l!=null&&Object.keys(l).length===0},n=function(l,d,y){var w,O,x;for(w=0,O=l.length;w<O;w++)x=l[w],d=x(d,y);return d},t.Parser=function(l){c(d,l);function d(y){this.parseStringPromise=h(this.parseStringPromise,this),this.parseString=h(this.parseString,this),this.reset=h(this.reset,this),this.assignOrPush=h(this.assignOrPush,this),this.processAsync=h(this.processAsync,this);var w,O,x;if(!(this instanceof t.Parser))return new t.Parser(y);this.options={},O=r["0.2"];for(w in O)f.call(O,w)&&(x=O[w],this.options[w]=x);for(w in y)f.call(y,w)&&(x=y[w],this.options[w]=x);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(o.normalize)),this.reset()}return d.prototype.processAsync=function(){var y,w;try{return this.remaining.length<=this.options.chunkSize?(y=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(y),this.saxParser.close()):(y=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(y),u(this.processAsync))}catch(O){if(w=O,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(w)}},d.prototype.assignOrPush=function(y,w,O){return w in y?(y[w]instanceof Array||(y[w]=[y[w]]),y[w].push(O)):this.options.explicitArray?y[w]=[O]:y[w]=O},d.prototype.reset=function(){var y,w,O,x;return this.removeAllListeners(),this.saxParser=a.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(E){return function(g){if(E.saxParser.resume(),!E.saxParser.errThrown)return E.saxParser.errThrown=!0,E.emit("error",g)}}(this),this.saxParser.onend=function(E){return function(){if(!E.saxParser.ended)return E.saxParser.ended=!0,E.emit("end",E.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,x=[],y=this.options.attrkey,w=this.options.charkey,this.saxParser.onopentag=function(E){return function(g){var D,A,v,C,T;if(v=Object.create(null),v[w]="",!E.options.ignoreAttrs){T=g.attributes;for(D in T)f.call(T,D)&&(!(y in v)&&!E.options.mergeAttrs&&(v[y]=Object.create(null)),A=E.options.attrValueProcessors?n(E.options.attrValueProcessors,g.attributes[D],D):g.attributes[D],C=E.options.attrNameProcessors?n(E.options.attrNameProcessors,D):D,E.options.mergeAttrs?E.assignOrPush(v,C,A):v[y][C]=A)}return v["#name"]=E.options.tagNameProcessors?n(E.options.tagNameProcessors,g.name):g.name,E.options.xmlns&&(v[E.options.xmlnskey]={uri:g.uri,local:g.local}),x.push(v)}}(this),this.saxParser.onclosetag=function(E){return function(){var g,D,A,v,C,T,p,b,F,P;if(T=x.pop(),C=T["#name"],(!E.options.explicitChildren||!E.options.preserveChildrenOrder)&&delete T["#name"],T.cdata===!0&&(g=T.cdata,delete T.cdata),F=x[x.length-1],T[w].match(/^\s*$/)&&!g?(D=T[w],delete T[w]):(E.options.trim&&(T[w]=T[w].trim()),E.options.normalize&&(T[w]=T[w].replace(/\s{2,}/g," ").trim()),T[w]=E.options.valueProcessors?n(E.options.valueProcessors,T[w],C):T[w],Object.keys(T).length===1&&w in T&&!E.EXPLICIT_CHARKEY&&(T=T[w])),s(T)&&(typeof E.options.emptyTag=="function"?T=E.options.emptyTag():T=E.options.emptyTag!==""?E.options.emptyTag:D),E.options.validator!=null&&(P="/"+function(){var U,B,q;for(q=[],U=0,B=x.length;U<B;U++)v=x[U],q.push(v["#name"]);return q}().concat(C).join("/"),function(){var U;try{return T=E.options.validator(P,F&&F[C],T)}catch(B){return U=B,E.emit("error",U)}}()),E.options.explicitChildren&&!E.options.mergeAttrs&&typeof T=="object"){if(!E.options.preserveChildrenOrder)v=Object.create(null),E.options.attrkey in T&&(v[E.options.attrkey]=T[E.options.attrkey],delete T[E.options.attrkey]),!E.options.charsAsChildren&&E.options.charkey in T&&(v[E.options.charkey]=T[E.options.charkey],delete T[E.options.charkey]),Object.getOwnPropertyNames(T).length>0&&(v[E.options.childkey]=T),T=v;else if(F){F[E.options.childkey]=F[E.options.childkey]||[],p=Object.create(null);for(A in T)f.call(T,A)&&(p[A]=T[A]);F[E.options.childkey].push(p),delete T["#name"],Object.keys(T).length===1&&w in T&&!E.EXPLICIT_CHARKEY&&(T=T[w])}}return x.length>0?E.assignOrPush(F,C,T):(E.options.explicitRoot&&(b=T,T=Object.create(null),T[C]=b),E.resultObject=T,E.saxParser.ended=!0,E.emit("end",E.resultObject))}}(this),O=function(E){return function(g){var D,A;if(A=x[x.length-1],A)return A[w]+=g,E.options.explicitChildren&&E.options.preserveChildrenOrder&&E.options.charsAsChildren&&(E.options.includeWhiteChars||g.replace(/\\n/g,"").trim()!=="")&&(A[E.options.childkey]=A[E.options.childkey]||[],D={"#name":"__text__"},D[w]=g,E.options.normalize&&(D[w]=D[w].replace(/\s{2,}/g," ").trim()),A[E.options.childkey].push(D)),A}}(this),this.saxParser.ontext=O,this.saxParser.oncdata=function(E){return function(g){var D;if(D=O(g),D)return D.cdata=!0}}()},d.prototype.parseString=function(y,w){var O;w!=null&&typeof w=="function"&&(this.on("end",function(x){return this.reset(),w(null,x)}),this.on("error",function(x){return this.reset(),w(x)}));try{return y=y.toString(),y.trim()===""?(this.emit("end",null),!0):(y=e.stripBOM(y),this.options.async?(this.remaining=y,u(this.processAsync),this.saxParser):this.saxParser.write(y).close())}catch(x){if(O=x,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw O}else return this.emit("error",O),this.saxParser.errThrown=!0}},d.prototype.parseStringPromise=function(y){return new Promise(function(w){return function(O,x){return w.parseString(y,function(E,g){return E?x(E):O(g)})}}(this))},d}(i),t.parseString=function(l,d,y){var w,O,x;return y!=null?(typeof y=="function"&&(w=y),typeof d=="object"&&(O=d)):(typeof d=="function"&&(w=d),O={}),x=new t.Parser(O),x.parseString(l,w)},t.parseStringPromise=function(l,d){var y,w;return typeof d=="object"&&(y=d),w=new t.Parser(y),w.parseStringPromise(l)}}).call(ne)}(Wn)),Wn}(function(){var t,e,r,i,s=function(o,a){for(var u in a)n.call(a,u)&&(o[u]=a[u]);function h(){this.constructor=o}return h.prototype=a.prototype,o.prototype=new h,o.__super__=a.prototype,o},n={}.hasOwnProperty;e=Ai(),t=Jl(),r=ef(),i=Za(),Ze.defaults=e.defaults,Ze.processors=i,Ze.ValidationError=function(o){s(a,o);function a(u){this.message=u}return a}(Error),Ze.Builder=t.Builder,Ze.Parser=r.Parser,Ze.parseString=r.parseString,Ze.parseStringPromise=r.parseStringPromise}).call(ne);var vi={exports:{}},Wt={exports:{}},Yn,Ps;function eu(){if(Ps)return Yn;Ps=1;function t(e){i.debug=i,i.default=i,i.coerce=h,i.disable=a,i.enable=o,i.enabled=u,i.humanize=xa(),Object.keys(e).forEach(function(c){i[c]=e[c]}),i.instances=[],i.names=[],i.skips=[],i.formatters={};function r(c){for(var f=0,l=0;l<c.length;l++)f=(f<<5)-f+c.charCodeAt(l),f|=0;return i.colors[Math.abs(f)%i.colors.length]}i.selectColor=r;function i(c){var f;function l(){if(l.enabled){for(var d=arguments.length,y=new Array(d),w=0;w<d;w++)y[w]=arguments[w];var O=l,x=Number(new Date),E=x-(f||x);O.diff=E,O.prev=f,O.curr=x,f=x,y[0]=i.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");var g=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,function(A,v){if(A==="%%")return A;g++;var C=i.formatters[v];if(typeof C=="function"){var T=y[g];A=C.call(O,T),y.splice(g,1),g--}return A}),i.formatArgs.call(O,y);var D=O.log||i.log;D.apply(O,y)}}return l.namespace=c,l.enabled=i.enabled(c),l.useColors=i.useColors(),l.color=r(c),l.destroy=s,l.extend=n,typeof i.init=="function"&&i.init(l),i.instances.push(l),l}function s(){var c=i.instances.indexOf(this);return c!==-1?(i.instances.splice(c,1),!0):!1}function n(c,f){return i(this.namespace+(typeof f>"u"?":":f)+c)}function o(c){i.save(c),i.names=[],i.skips=[];var f,l=(typeof c=="string"?c:"").split(/[\s,]+/),d=l.length;for(f=0;f<d;f++)l[f]&&(c=l[f].replace(/\*/g,".*?"),c[0]==="-"?i.skips.push(new RegExp("^"+c.substr(1)+"$")):i.names.push(new RegExp("^"+c+"$")));for(f=0;f<i.instances.length;f++){var y=i.instances[f];y.enabled=i.enabled(y.namespace)}}function a(){i.enable("")}function u(c){if(c[c.length-1]==="*")return!0;var f,l;for(f=0,l=i.skips.length;f<l;f++)if(i.skips[f].test(c))return!1;for(f=0,l=i.names.length;f<l;f++)if(i.names[f].test(c))return!0;return!1}function h(c){return c instanceof Error?c.stack||c.message:c}return i.enable(i.load()),i}return Yn=t,Yn}var Ls;function tf(){return Ls||(Ls=1,function(t,e){function r(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(l){return typeof l}:r=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},r(c)}e.log=n,e.formatArgs=s,e.save=o,e.load=a,e.useColors=i,e.storage=u(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!!this.useColors){var f="color: "+this.color;c.splice(1,0,f,"color: inherit");var l=0,d=0;c[0].replace(/%[a-zA-Z%]/g,function(y){y!=="%%"&&(l++,y==="%c"&&(d=l))}),c.splice(d,0,f)}}function n(){var c;return(typeof console>"u"?"undefined":r(console))==="object"&&console.log&&(c=console).log.apply(c,arguments)}function o(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function a(){var c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function u(){try{return localStorage}catch{}}t.exports=eu()(e);var h=t.exports.formatters;h.j=function(c){try{return JSON.stringify(c)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}}(Wt,Wt.exports)),Wt.exports}var Ht={exports:{}},Ms;function rf(){return Ms||(Ms=1,function(t,e){var r=Ti,i=$t;e.init=f,e.log=u,e.formatArgs=o,e.save=h,e.load=c,e.useColors=n,e.colors=[6,2,3,4,5,1];try{var s=Ia();s&&(s.stderr||s).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}e.inspectOpts=Object.keys(process.env).filter(function(d){return/^debug_/i.test(d)}).reduce(function(d,y){var w=y.substring(6).toLowerCase().replace(/_([a-z])/g,function(x,E){return E.toUpperCase()}),O=process.env[y];return/^(yes|on|true|enabled)$/i.test(O)?O=!0:/^(no|off|false|disabled)$/i.test(O)?O=!1:O==="null"?O=null:O=Number(O),d[w]=O,d},{});function n(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:r.isatty(process.stderr.fd)}function o(d){var y=this.namespace,w=this.useColors;if(w){var O=this.color,x="\x1B[3"+(O<8?O:"8;5;"+O),E="  ".concat(x,";1m").concat(y," \x1B[0m");d[0]=E+d[0].split(`
`).join(`
`+E),d.push(x+"m+"+t.exports.humanize(this.diff)+"\x1B[0m")}else d[0]=a()+y+" "+d[0]}function a(){return e.inspectOpts.hideDate?"":new Date().toISOString()+" "}function u(){return process.stderr.write(i.format.apply(i,arguments)+`
`)}function h(d){d?process.env.DEBUG=d:delete process.env.DEBUG}function c(){return process.env.DEBUG}function f(d){d.inspectOpts={};for(var y=Object.keys(e.inspectOpts),w=0;w<y.length;w++)d.inspectOpts[y[w]]=e.inspectOpts[y[w]]}t.exports=eu()(e);var l=t.exports.formatters;l.o=function(d){return this.inspectOpts.colors=this.useColors,i.inspect(d,this.inspectOpts).split(`
`).map(function(y){return y.trim()}).join(" ")},l.O=function(d){return this.inspectOpts.colors=this.useColors,i.inspect(d,this.inspectOpts)}}(Ht,Ht.exports)),Ht.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?vi.exports=tf():vi.exports=rf();var nf=vi.exports;const Ct=lr,of=Oi,sf=Qu,Dt=Di,$s=wt,af=Ze,uf=Va,cf=nf("roa"),Gt=gr;function lf(t){return t.replace(/[\t\n\r\f]/g," ")}function ff(t){const e=Object.keys(t),r={};for(let i=0;i<e.length;i++){const s=e[i];r[s.toLowerCase()]=t[s]}return r}function hf(t){const e="x-acs-",r=Object.keys(t),i=[];for(let n=0;n<r.length;n++){const o=r[n];o.startsWith(e)&&i.push(o)}i.sort();var s="";for(let n=0;n<i.length;n++){const o=i[n];s+=`${o}:${lf(t[o]).trim()}
`}return s}function pf(t,e){const r=Object.keys(e).sort();if(r.length===0)return t;for(var i=[],s=0;s<r.length;s++){const n=r[s];i.push(`${n}=${e[n]}`)}return`${t}?${i.join("&")}`}function df(t,e,r,i){const s=r.accept,n=r["content-md5"]||"",o=r["content-type"]||"",a=r.date||"",u=`${t}
${s}
${n}
${o}
${a}
`,h=hf(r),c=pf(e,i);return`${u}${h}${c}`}function mf(t){const e=new af.Parser({});return new Promise((r,i)=>{e.parseString(t,(s,n)=>{if(s)return i(s);r(n)})})}class yf extends Error{constructor(e){const r=e.Message[0],i=e.Code[0],s=e.HostId[0],n=e.RequestId[0];super(`${r} hostid: ${s}, requestid: ${n}`),this.code=i}}class gf{constructor(e){if(Ct(e,'must pass "config"'),Ct(e.endpoint,'must pass "config.endpoint"'),!e.endpoint.startsWith("https://")&&!e.endpoint.startsWith("http://"))throw new Error(`"config.endpoint" must starts with 'https://' or 'http://'.`);if(Ct(e.apiVersion,'must pass "config.apiVersion"'),e.credentialsProvider){if(typeof e.credentialsProvider.getCredentials!="function")throw new Error('must pass "config.credentialsProvider" with function "getCredentials()"');this.credentialsProvider=e.credentialsProvider}else Ct(e.accessKeyId,'must pass "config.accessKeyId"'),Ct(e.accessKeySecret,'must pass "config.accessKeySecret"'),this.accessKeyId=e.accessKeyId,this.accessKeySecret=e.accessKeySecret,this.securityToken=e.securityToken,this.credentialsProvider={getCredentials:async()=>({accessKeyId:e.accessKeyId,accessKeySecret:e.accessKeySecret,securityToken:e.securityToken})};this.endpoint=e.endpoint,this.apiVersion=e.apiVersion,this.host=of.parse(this.endpoint).hostname,this.opts=e.opts;var r=this.endpoint.startsWith("https://")?cr:ur;this.keepAliveAgent=new r.Agent({keepAlive:!0,keepAliveMsecs:3e3})}buildHeaders(){var r={accept:"application/json",date:new Date().toGMTString(),host:this.host,"x-acs-signature-nonce":Dt.makeNonce(),"x-acs-signature-method":"HMAC-SHA1","x-acs-signature-version":"1.0","x-acs-version":this.apiVersion,"user-agent":Gt.DEFAULT_UA,"x-sdk-client":Gt.DEFAULT_CLIENT};return this.securityToken&&(r["x-acs-accesskey-id"]=this.accessKeyId,r["x-acs-security-token"]=this.securityToken),r}signature(e){const r=Buffer.from(e,"utf8");return Dt.sha1(r,this.accessKeySecret,"base64")}buildAuthorization(e){return`acs ${this.accessKeyId}:${this.signature(e)}`}async request(e,r,i={},s="",n={},o={}){const a=await this.credentialsProvider.getCredentials();var h={accept:"application/json",date:new Date().toGMTString(),host:this.host,"x-acs-signature-nonce":Dt.makeNonce(),"x-acs-version":this.apiVersion,"user-agent":Gt.DEFAULT_UA,"x-sdk-client":Gt.DEFAULT_CLIENT};a&&a.accessKeyId&&a.accessKeySecret&&(h["x-acs-signature-method"]="HMAC-SHA1",h["x-acs-signature-version"]="1.0",a.securityToken&&(h["x-acs-accesskey-id"]=a.accessKeyId,h["x-acs-security-token"]=a.securityToken));var c=Object.assign(h,ff(n)),f=null;f=Buffer.from(s,"utf8"),c["content-md5"]=Dt.md5(f,"base64"),c["content-length"]=f.length;var l=`${this.endpoint}${r}`;if(Object.keys(i).length&&(l+=`?${sf.stringify(i)}`),a&&a.accessKeyId&&a.accessKeySecret){const g=df(e,r,c,i);cf("stringToSign: %s",g);const D=Buffer.from(g,"utf8"),A=Dt.sha1(D,a.accessKeySecret,"base64");c.authorization=`acs ${a.accessKeyId}:${A}`}const d=Object.assign({method:e,agent:this.keepAliveAgent,headers:c,data:f},this.opts,o),y=await $s.request(l,d),w=await $s.read(y,"utf8");if(o.rawBody)return w;const O=y.headers["content-type"]||"";if(O.startsWith("application/json")){const g=y.statusCode;if(g===204)return w;var x;try{x=uf.parse(w)}catch(D){throw D.name="FormatError",D.message="parse response to json error",D.body=w,D}if(g>=400){const D=x.Message||x.errorMsg||"",A=x.Code||x.errorCode||"",v=x.RequestId||"";var E=new Error(`code: ${g}, ${D}, requestid: ${v}`);throw E.name=`${A}Error`,E.statusCode=g,E.result=x,E.code=A,E}return x}if(O.startsWith("text/xml")){const g=await mf(w);if(g.Error)throw new yf(g.Error);return g}return w}put(e,r,i,s,n){return this.request("PUT",e,r,i,s,n)}post(e,r,i,s,n){return this.request("POST",e,r,i,s,n)}get(e,r,i,s){return this.request("GET",e,r,"",i,s)}delete(e,r,i,s){return this.request("DELETE",e,r,"",i,s)}}var vf=gf;mr.exports=Wa;mr.exports.ROAClient=vf;mr.exports.RPCClient=Wa;var wf=mr.exports;const Ef=vt(wf);async function bf(){const t=new Ef({accessKeyId:ir.accessKeyId,accessKeySecret:ir.accessKeySecret,endpoint:"http://nls-meta.cn-shanghai.aliyuncs.com",apiVersion:"2019-02-28"});try{return(await t.request("CreateToken")).Token.Id}catch(e){return console.error("Error creating token:",e),null}}var tu={exports:{}},Kn,Rs;function Sf(){if(Rs)return Kn;Rs=1,Kn=i,i.sync=s;var t=ae;function e(n,o){var a=o.pathExt!==void 0?o.pathExt:process.env.PATHEXT;if(!a||(a=a.split(";"),a.indexOf("")!==-1))return!0;for(var u=0;u<a.length;u++){var h=a[u].toLowerCase();if(h&&n.substr(-h.length).toLowerCase()===h)return!0}return!1}function r(n,o,a){return!n.isSymbolicLink()&&!n.isFile()?!1:e(o,a)}function i(n,o,a){t.stat(n,function(u,h){a(u,u?!1:r(h,n,o))})}function s(n,o){return r(t.statSync(n),n,o)}return Kn}var Jn,ks;function Of(){if(ks)return Jn;ks=1,Jn=e,e.sync=r;var t=ae;function e(n,o,a){t.stat(n,function(u,h){a(u,u?!1:i(h,o))})}function r(n,o){return i(t.statSync(n),o)}function i(n,o){return n.isFile()&&s(n,o)}function s(n,o){var a=n.mode,u=n.uid,h=n.gid,c=o.uid!==void 0?o.uid:process.getuid&&process.getuid(),f=o.gid!==void 0?o.gid:process.getgid&&process.getgid(),l=parseInt("100",8),d=parseInt("010",8),y=parseInt("001",8),w=l|d,O=a&y||a&d&&h===f||a&l&&u===c||a&w&&c===0;return O}return Jn}var or;process.platform==="win32"||ne.TESTING_WINDOWS?or=Sf():or=Of();var Tf=Ui;Ui.sync=Cf;function Ui(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,s){Ui(t,e||{},function(n,o){n?s(n):i(o)})})}or(t,e||{},function(i,s){i&&(i.code==="EACCES"||e&&e.ignoreErrors)&&(i=null,s=!1),r(i,s)})}function Cf(t,e){try{return or.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}var Df=su;su.sync=Ff;var wi=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",ru=Q,Af=wi?";":":",nu=Tf;function iu(t){var e=new Error("not found: "+t);return e.code="ENOENT",e}function ou(t,e){var r=e.colon||Af,i=e.path||process.env.PATH||"",s=[""];i=i.split(r);var n="";return wi&&(i.unshift(process.cwd()),n=e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM",s=n.split(r),t.indexOf(".")!==-1&&s[0]!==""&&s.unshift("")),(t.match(/\//)||wi&&t.match(/\\/))&&(i=[""]),{env:i,ext:s,extExe:n}}function su(t,e,r){typeof e=="function"&&(r=e,e={});var i=ou(t,e),s=i.env,n=i.ext,o=i.extExe,a=[];(function u(h,c){if(h===c)return e.all&&a.length?r(null,a):r(iu(t));var f=s[h];f.charAt(0)==='"'&&f.slice(-1)==='"'&&(f=f.slice(1,-1));var l=ru.join(f,t);!f&&/^\.[\\\/]/.test(t)&&(l=t.slice(0,2)+l),function d(y,w){if(y===w)return u(h+1,c);var O=n[y];nu(l+O,{pathExt:o},function(x,E){if(!x&&E)if(e.all)a.push(l+O);else return r(null,l+O);return d(y+1,w)})}(0,n.length)})(0,s.length)}function Ff(t,e){e=e||{};for(var r=ou(t,e),i=r.env,s=r.ext,n=r.extExe,o=[],a=0,u=i.length;a<u;a++){var h=i[a];h.charAt(0)==='"'&&h.slice(-1)==='"'&&(h=h.slice(1,-1));var c=ru.join(h,t);!h&&/^\.[\\\/]/.test(t)&&(c=t.slice(0,2)+c);for(var f=0,l=s.length;f<l;f++){var d=c+s[f],y;try{if(y=nu.sync(d,{pathExt:n}),y)if(e.all)o.push(d);else return d}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw iu(t)}ar.exec;var _f=Ye.platform().match(/win(32|64)/),xf=Df,js=/\r\n|\r|\n/g,At=/^\[?(.*?)\]?$/,qs=/[,]/,Yt={};function Nf(t){var e={};t=t.replace(/=\s+/g,"=").trim();for(var r=t.split(" "),i=0;i<r.length;i++){var s=r[i].split("=",2),n=s[0],o=s[1];if(typeof o>"u")return null;e[n]=o}return e}var Bs=tu.exports={isWindows:_f,streamRegexp:At,copy:function(t,e){Object.keys(t).forEach(function(r){e[r]=t[r]})},args:function(){var t=[],e=function(){arguments.length===1&&Array.isArray(arguments[0])?t=t.concat(arguments[0]):t=t.concat([].slice.call(arguments))};return e.clear=function(){t=[]},e.get=function(){return t},e.find=function(r,i){var s=t.indexOf(r);if(s!==-1)return t.slice(s+1,s+1+(i||0))},e.remove=function(r,i){var s=t.indexOf(r);s!==-1&&t.splice(s,(i||0)+1)},e.clone=function(){var r=Bs.args();return r(t),r},e},makeFilterStrings:function(t){return t.map(function(e){if(typeof e=="string")return e;var r="";return Array.isArray(e.inputs)?r+=e.inputs.map(function(i){return i.replace(At,"[$1]")}).join(""):typeof e.inputs=="string"&&(r+=e.inputs.replace(At,"[$1]")),r+=e.filter,e.options&&(typeof e.options=="string"||typeof e.options=="number"?r+="="+e.options:Array.isArray(e.options)?r+="="+e.options.map(function(i){return typeof i=="string"&&i.match(qs)?"'"+i+"'":i}).join(":"):Object.keys(e.options).length&&(r+="="+Object.keys(e.options).map(function(i){var s=e.options[i];return typeof s=="string"&&s.match(qs)&&(s="'"+s+"'"),i+"="+s}).join(":"))),Array.isArray(e.outputs)?r+=e.outputs.map(function(i){return i.replace(At,"[$1]")}).join(""):typeof e.outputs=="string"&&(r+=e.outputs.replace(At,"[$1]")),r})},which:function(t,e){if(t in Yt)return e(null,Yt[t]);xf(t,function(r,i){if(r)return e(null,Yt[t]="");e(null,Yt[t]=i)})},timemarkToSeconds:function(t){if(typeof t=="number")return t;if(t.indexOf(":")===-1&&t.indexOf(".")>=0)return Number(t);var e=t.split(":"),r=Number(e.pop());return e.length&&(r+=Number(e.pop())*60),e.length&&(r+=Number(e.pop())*3600),r},extractCodecData:function(t,e,r){var i=/Input #[0-9]+, ([^ ]+),/,s=/Duration\: ([^,]+)/,n=/Audio\: (.*)/,o=/Video\: (.*)/;"inputStack"in r||(r.inputStack=[],r.inputIndex=-1,r.inInput=!1);var a=r.inputStack,u=r.inputIndex,h=r.inInput,c,f,l,d;if(c=e.match(i))h=r.inInput=!0,u=r.inputIndex=r.inputIndex+1,a[u]={format:c[1],audio:"",video:"",duration:""};else if(h&&(f=e.match(s)))a[u].duration=f[1];else if(h&&(l=e.match(n)))l=l[1].split(", "),a[u].audio=l[0],a[u].audio_details=l;else if(h&&(d=e.match(o)))d=d[1].split(", "),a[u].video=d[0],a[u].video_details=d;else if(/Output #\d+/.test(e))h=r.inInput=!1;else if(/Stream mapping:|Press (\[q\]|ctrl-c) to stop/.test(e))return t.emit.apply(t,["codecData"].concat(a)),!0;return!1},extractProgress:function(t,e){var r=Nf(e);if(r){var i={frames:parseInt(r.frame,10),currentFps:parseInt(r.fps,10),currentKbps:r.bitrate?parseFloat(r.bitrate.replace("kbits/s","")):0,targetSize:parseInt(r.size||r.Lsize,10),timemark:r.time};if(t._ffprobeData&&t._ffprobeData.format&&t._ffprobeData.format.duration){var s=Number(t._ffprobeData.format.duration);isNaN(s)||(i.percent=Bs.timemarkToSeconds(i.timemark)/s*100)}t.emit("progress",i)}},extractError:function(t){return t.split(js).reduce(function(e,r){return r.charAt(0)===" "||r.charAt(0)==="["?[]:(e.push(r),e)},[]).join(`
`)},linesRing:function(t){var e=[],r=[],i=null,s=!1,n=t-1;function o(a){e.forEach(function(u){u(a)})}return{callback:function(a){r.forEach(function(u){a(u)}),e.push(a)},append:function(a){if(!s&&(a instanceof Buffer&&(a=""+a),!(!a||a.length===0))){var u=a.split(js);u.length===1?i!==null?i=i+u.shift():i=u.shift():(i!==null&&(i=i+u.shift(),o(i),r.push(i)),i=u.pop(),u.forEach(function(h){o(h),r.push(h)}),n>-1&&r.length>n&&r.splice(0,r.length-n))}},get:function(){return i!==null?r.concat([i]).join(`
`):r.join(`
`)},close:function(){s||(i!==null&&(o(i),r.push(i),n>-1&&r.length>n&&r.shift(),i=null),s=!0)}}}},Je=tu.exports,Qn,Us;function If(){if(Us)return Qn;Us=1;var t=Je;return Qn=function(e){e.mergeAdd=e.addInput=e.input=function(r){var i=!1,s=!1;if(typeof r!="string"){if(!("readable"in r)||!r.readable)throw new Error("Invalid input");var n=this._inputs.some(function(a){return a.isStream});if(n)throw new Error("Only one input stream is supported");s=!0,r.pause()}else{var o=r.match(/^([a-z]{2,}):/i);i=!o||o[0]==="file"}return this._inputs.push(this._currentInput={source:r,isFile:i,isStream:s,options:t.args()}),this},e.withInputFormat=e.inputFormat=e.fromFormat=function(r){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-f",r),this},e.withInputFps=e.withInputFPS=e.withFpsInput=e.withFPSInput=e.inputFPS=e.inputFps=e.fpsInput=e.FPSInput=function(r){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-r",r),this},e.nativeFramerate=e.withNativeFramerate=e.native=function(){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-re"),this},e.setStartTime=e.seekInput=function(r){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-ss",r),this},e.loop=function(r){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-loop","1"),typeof r<"u"&&this.duration(r),this}},Qn}var Zn,Xs;function Pf(){if(Xs)return Zn;Xs=1;var t=Je;return Zn=function(e){e.withNoAudio=e.noAudio=function(){return this._currentOutput.audio.clear(),this._currentOutput.audioFilters.clear(),this._currentOutput.audio("-an"),this},e.withAudioCodec=e.audioCodec=function(r){return this._currentOutput.audio("-acodec",r),this},e.withAudioBitrate=e.audioBitrate=function(r){return this._currentOutput.audio("-b:a",(""+r).replace(/k?$/,"k")),this},e.withAudioChannels=e.audioChannels=function(r){return this._currentOutput.audio("-ac",r),this},e.withAudioFrequency=e.audioFrequency=function(r){return this._currentOutput.audio("-ar",r),this},e.withAudioQuality=e.audioQuality=function(r){return this._currentOutput.audio("-aq",r),this},e.withAudioFilter=e.withAudioFilters=e.audioFilter=e.audioFilters=function(r){return arguments.length>1&&(r=[].slice.call(arguments)),Array.isArray(r)||(r=[r]),this._currentOutput.audioFilters(t.makeFilterStrings(r)),this}},Zn}var ei,Vs;function Lf(){if(Vs)return ei;Vs=1;var t=Je;return ei=function(e){e.withNoVideo=e.noVideo=function(){return this._currentOutput.video.clear(),this._currentOutput.videoFilters.clear(),this._currentOutput.video("-vn"),this},e.withVideoCodec=e.videoCodec=function(r){return this._currentOutput.video("-vcodec",r),this},e.withVideoBitrate=e.videoBitrate=function(r,i){return r=(""+r).replace(/k?$/,"k"),this._currentOutput.video("-b:v",r),i&&this._currentOutput.video("-maxrate",r,"-minrate",r,"-bufsize","3M"),this},e.withVideoFilter=e.withVideoFilters=e.videoFilter=e.videoFilters=function(r){return arguments.length>1&&(r=[].slice.call(arguments)),Array.isArray(r)||(r=[r]),this._currentOutput.videoFilters(t.makeFilterStrings(r)),this},e.withOutputFps=e.withOutputFPS=e.withFpsOutput=e.withFPSOutput=e.withFps=e.withFPS=e.outputFPS=e.outputFps=e.fpsOutput=e.FPSOutput=e.fps=e.FPS=function(r){return this._currentOutput.video("-r",r),this},e.takeFrames=e.withFrames=e.frames=function(r){return this._currentOutput.video("-vframes",r),this}},ei}var ti,zs;function Mf(){if(zs)return ti;zs=1;function t(r,i,s,n){return[{filter:"scale",options:{w:"if(gt(a,"+s+"),"+r+",trunc("+i+"*a/2)*2)",h:"if(lt(a,"+s+"),"+i+",trunc("+r+"/a/2)*2)"}},{filter:"pad",options:{w:r,h:i,x:"if(gt(a,"+s+"),0,("+r+"-iw)/2)",y:"if(lt(a,"+s+"),0,("+i+"-ih)/2)",color:n}}]}function e(r,i,s){var n=r.sizeData=r.sizeData||{};if(n[i]=s,!("size"in n))return[];var o=n.size.match(/([0-9]+)x([0-9]+)/),a=n.size.match(/([0-9]+)x\?/),u=n.size.match(/\?x([0-9]+)/),h=n.size.match(/\b([0-9]{1,3})%/),c,f,l;if(h){var d=Number(h[1])/100;return[{filter:"scale",options:{w:"trunc(iw*"+d+"/2)*2",h:"trunc(ih*"+d+"/2)*2"}}]}else{if(o)return c=Math.round(Number(o[1])/2)*2,f=Math.round(Number(o[2])/2)*2,l=c/f,n.pad?t(c,f,l,n.pad):[{filter:"scale",options:{w:c,h:f}}];if(a||u)return"aspect"in n?(c=a?a[1]:Math.round(Number(u[1])*n.aspect),f=u?u[1]:Math.round(Number(a[1])/n.aspect),c=Math.round(c/2)*2,f=Math.round(f/2)*2,n.pad?t(c,f,n.aspect,n.pad):[{filter:"scale",options:{w:c,h:f}}]):a?[{filter:"scale",options:{w:Math.round(Number(a[1])/2)*2,h:"trunc(ow/a/2)*2"}}]:[{filter:"scale",options:{w:"trunc(oh*a/2)*2",h:Math.round(Number(u[1])/2)*2}}];throw new Error("Invalid size specified: "+n.size)}}return ti=function(r){r.keepPixelAspect=r.keepDisplayAspect=r.keepDisplayAspectRatio=r.keepDAR=function(){return this.videoFilters([{filter:"scale",options:{w:"if(gt(sar,1),iw*sar,iw)",h:"if(lt(sar,1),ih/sar,ih)"}},{filter:"setsar",options:"1"}])},r.withSize=r.setSize=r.size=function(i){var s=e(this._currentOutput,"size",i);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(s),this},r.withAspect=r.withAspectRatio=r.setAspect=r.setAspectRatio=r.aspect=r.aspectRatio=function(i){var s=Number(i);if(isNaN(s)){var n=i.match(/^(\d+):(\d+)$/);if(n)s=Number(n[1])/Number(n[2]);else throw new Error("Invalid aspect ratio: "+i)}var o=e(this._currentOutput,"aspect",s);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(o),this},r.applyAutopadding=r.applyAutoPadding=r.applyAutopad=r.applyAutoPad=r.withAutopadding=r.withAutoPadding=r.withAutopad=r.withAutoPad=r.autoPad=r.autopad=function(i,s){typeof i=="string"&&(s=i,i=!0),typeof i>"u"&&(i=!0);var n=e(this._currentOutput,"pad",i?s||"black":!1);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(n),this}},ti}var ri,Ws;function $f(){if(Ws)return ri;Ws=1;var t=Je;return ri=function(e){e.addOutput=e.output=function(r,i){var s=!1;if(!r&&this._currentOutput)throw new Error("Invalid output");if(r&&typeof r!="string"){if(!("writable"in r)||!r.writable)throw new Error("Invalid output")}else if(typeof r=="string"){var n=r.match(/^([a-z]{2,}):/i);s=!n||n[0]==="file"}if(r&&!("target"in this._currentOutput))this._currentOutput.target=r,this._currentOutput.isFile=s,this._currentOutput.pipeopts=i||{};else{if(r&&typeof r!="string"){var o=this._outputs.some(function(u){return typeof u.target!="string"});if(o)throw new Error("Only one output stream is supported")}this._outputs.push(this._currentOutput={target:r,isFile:s,flags:{},pipeopts:i||{}});var a=this;["audio","audioFilters","video","videoFilters","sizeFilters","options"].forEach(function(u){a._currentOutput[u]=t.args()}),r||delete this._currentOutput.target}return this},e.seekOutput=e.seek=function(r){return this._currentOutput.options("-ss",r),this},e.withDuration=e.setDuration=e.duration=function(r){return this._currentOutput.options("-t",r),this},e.toFormat=e.withOutputFormat=e.outputFormat=e.format=function(r){return this._currentOutput.options("-f",r),this},e.map=function(r){return this._currentOutput.options("-map",r.replace(t.streamRegexp,"[$1]")),this},e.updateFlvMetadata=e.flvmeta=function(){return this._currentOutput.flags.flvmeta=!0,this}},ri}var ni,Hs;function Rf(){if(Hs)return ni;Hs=1;var t=Je;return ni=function(e){e.addInputOption=e.addInputOptions=e.withInputOption=e.withInputOptions=e.inputOption=e.inputOptions=function(r){if(!this._currentInput)throw new Error("No input specified");var i=!0;return arguments.length>1&&(r=[].slice.call(arguments),i=!1),Array.isArray(r)||(r=[r]),this._currentInput.options(r.reduce(function(s,n){var o=String(n).split(" ");return i&&o.length===2?s.push(o[0],o[1]):s.push(n),s},[])),this},e.addOutputOption=e.addOutputOptions=e.addOption=e.addOptions=e.withOutputOption=e.withOutputOptions=e.withOption=e.withOptions=e.outputOption=e.outputOptions=function(r){var i=!0;return arguments.length>1&&(r=[].slice.call(arguments),i=!1),Array.isArray(r)||(r=[r]),this._currentOutput.options(r.reduce(function(s,n){var o=String(n).split(" ");return i&&o.length===2?s.push(o[0],o[1]):s.push(n),s},[])),this},e.filterGraph=e.complexFilter=function(r,i){if(this._complexFilters.clear(),Array.isArray(r)||(r=[r]),this._complexFilters("-filter_complex",t.makeFilterStrings(r).join(";")),Array.isArray(i)){var s=this;i.forEach(function(n){s._complexFilters("-map",n.replace(t.streamRegexp,"[$1]"))})}else typeof i=="string"&&this._complexFilters("-map",i.replace(t.streamRegexp,"[$1]"));return this}},ni}function kf(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ii,Gs;function jf(){if(Gs)return ii;Gs=1;var t=Q;return ii=function(e){e.usingPreset=e.preset=function(r){if(typeof r=="function")r(this);else try{var i=t.join(this.options.presets,r),s=kf(i);if(typeof s.load=="function")s.load(this);else throw new Error("preset "+i+" has no load() function")}catch(n){throw new Error("preset "+i+" could not be loaded: "+n.message)}return this}},ii}var oi={exports:{}},Ys;function Xi(){return Ys||(Ys=1,function(t){(function(){var e={},r,i;r=this,r!=null&&(i=r.async),e.noConflict=function(){return r.async=i,e};function s(v){var C=!1;return function(){if(C)throw new Error("Callback was already called.");C=!0,v.apply(r,arguments)}}var n=function(v,C){if(v.forEach)return v.forEach(C);for(var T=0;T<v.length;T+=1)C(v[T],T,v)},o=function(v,C){if(v.map)return v.map(C);var T=[];return n(v,function(p,b,F){T.push(C(p,b,F))}),T},a=function(v,C,T){return v.reduce?v.reduce(C,T):(n(v,function(p,b,F){T=C(T,p,b,F)}),T)},u=function(v){if(Object.keys)return Object.keys(v);var C=[];for(var T in v)v.hasOwnProperty(T)&&C.push(T);return C};typeof process>"u"||!process.nextTick?typeof setImmediate=="function"?(e.nextTick=function(v){setImmediate(v)},e.setImmediate=e.nextTick):(e.nextTick=function(v){setTimeout(v,0)},e.setImmediate=e.nextTick):(e.nextTick=process.nextTick,typeof setImmediate<"u"?e.setImmediate=function(v){setImmediate(v)}:e.setImmediate=e.nextTick),e.each=function(v,C,T){if(T=T||function(){},!v.length)return T();var p=0;n(v,function(b){C(b,s(function(F){F?(T(F),T=function(){}):(p+=1,p>=v.length&&T(null))}))})},e.forEach=e.each,e.eachSeries=function(v,C,T){if(T=T||function(){},!v.length)return T();var p=0,b=function(){C(v[p],function(F){F?(T(F),T=function(){}):(p+=1,p>=v.length?T(null):b())})};b()},e.forEachSeries=e.eachSeries,e.eachLimit=function(v,C,T,p){var b=h(C);b.apply(null,[v,T,p])},e.forEachLimit=e.eachLimit;var h=function(v){return function(C,T,p){if(p=p||function(){},!C.length||v<=0)return p();var b=0,F=0,P=0;(function U(){if(b>=C.length)return p();for(;P<v&&F<C.length;)F+=1,P+=1,T(C[F-1],function(B){B?(p(B),p=function(){}):(b+=1,P-=1,b>=C.length?p():U())})})()}},c=function(v){return function(){var C=Array.prototype.slice.call(arguments);return v.apply(null,[e.each].concat(C))}},f=function(v,C){return function(){var T=Array.prototype.slice.call(arguments);return C.apply(null,[h(v)].concat(T))}},l=function(v){return function(){var C=Array.prototype.slice.call(arguments);return v.apply(null,[e.eachSeries].concat(C))}},d=function(v,C,T,p){var b=[];C=o(C,function(F,P){return{index:P,value:F}}),v(C,function(F,P){T(F.value,function(U,B){b[F.index]=B,P(U)})},function(F){p(F,b)})};e.map=c(d),e.mapSeries=l(d),e.mapLimit=function(v,C,T,p){return y(C)(v,T,p)};var y=function(v){return f(v,d)};e.reduce=function(v,C,T,p){e.eachSeries(v,function(b,F){T(C,b,function(P,U){C=U,F(P)})},function(b){p(b,C)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(v,C,T,p){var b=o(v,function(F){return F}).reverse();e.reduce(b,C,T,p)},e.foldr=e.reduceRight;var w=function(v,C,T,p){var b=[];C=o(C,function(F,P){return{index:P,value:F}}),v(C,function(F,P){T(F.value,function(U){U&&b.push(F),P()})},function(F){p(o(b.sort(function(P,U){return P.index-U.index}),function(P){return P.value}))})};e.filter=c(w),e.filterSeries=l(w),e.select=e.filter,e.selectSeries=e.filterSeries;var O=function(v,C,T,p){var b=[];C=o(C,function(F,P){return{index:P,value:F}}),v(C,function(F,P){T(F.value,function(U){U||b.push(F),P()})},function(F){p(o(b.sort(function(P,U){return P.index-U.index}),function(P){return P.value}))})};e.reject=c(O),e.rejectSeries=l(O);var x=function(v,C,T,p){v(C,function(b,F){T(b,function(P){P?(p(b),p=function(){}):F()})},function(b){p()})};e.detect=c(x),e.detectSeries=l(x),e.some=function(v,C,T){e.each(v,function(p,b){C(p,function(F){F&&(T(!0),T=function(){}),b()})},function(p){T(!1)})},e.any=e.some,e.every=function(v,C,T){e.each(v,function(p,b){C(p,function(F){F||(T(!1),T=function(){}),b()})},function(p){T(!0)})},e.all=e.every,e.sortBy=function(v,C,T){e.map(v,function(p,b){C(p,function(F,P){F?b(F):b(null,{value:p,criteria:P})})},function(p,b){if(p)return T(p);var F=function(P,U){var B=P.criteria,q=U.criteria;return B<q?-1:B>q?1:0};T(null,o(b.sort(F),function(P){return P.value}))})},e.auto=function(v,C){C=C||function(){};var T=u(v);if(!T.length)return C(null);var p={},b=[],F=function(B){b.unshift(B)},P=function(B){for(var q=0;q<b.length;q+=1)if(b[q]===B){b.splice(q,1);return}},U=function(){n(b.slice(0),function(B){B()})};F(function(){u(p).length===T.length&&(C(null,p),C=function(){})}),n(T,function(B){var q=v[B]instanceof Function?[v[B]]:v[B],z=function(Z){var re=Array.prototype.slice.call(arguments,1);if(re.length<=1&&(re=re[0]),Z){var ue={};n(u(p),function(pe){ue[pe]=p[pe]}),ue[B]=re,C(Z,ue),C=function(){}}else p[B]=re,e.setImmediate(U)},W=q.slice(0,Math.abs(q.length-1))||[],K=function(){return a(W,function(Z,re){return Z&&p.hasOwnProperty(re)},!0)&&!p.hasOwnProperty(B)};if(K())q[q.length-1](z,p);else{var J=function(){K()&&(P(J),q[q.length-1](z,p))};F(J)}})},e.waterfall=function(v,C){if(C=C||function(){},v.constructor!==Array){var T=new Error("First argument to waterfall must be an array of functions");return C(T)}if(!v.length)return C();var p=function(b){return function(F){if(F)C.apply(null,arguments),C=function(){};else{var P=Array.prototype.slice.call(arguments,1),U=b.next();U?P.push(p(U)):P.push(C),e.setImmediate(function(){b.apply(null,P)})}}};p(e.iterator(v))()};var E=function(v,C,T){if(T=T||function(){},C.constructor===Array)v.map(C,function(b,F){b&&b(function(P){var U=Array.prototype.slice.call(arguments,1);U.length<=1&&(U=U[0]),F.call(null,P,U)})},T);else{var p={};v.each(u(C),function(b,F){C[b](function(P){var U=Array.prototype.slice.call(arguments,1);U.length<=1&&(U=U[0]),p[b]=U,F(P)})},function(b){T(b,p)})}};e.parallel=function(v,C){E({map:e.map,each:e.each},v,C)},e.parallelLimit=function(v,C,T){E({map:y(C),each:h(C)},v,T)},e.series=function(v,C){if(C=C||function(){},v.constructor===Array)e.mapSeries(v,function(p,b){p&&p(function(F){var P=Array.prototype.slice.call(arguments,1);P.length<=1&&(P=P[0]),b.call(null,F,P)})},C);else{var T={};e.eachSeries(u(v),function(p,b){v[p](function(F){var P=Array.prototype.slice.call(arguments,1);P.length<=1&&(P=P[0]),T[p]=P,b(F)})},function(p){C(p,T)})}},e.iterator=function(v){var C=function(T){var p=function(){return v.length&&v[T].apply(null,arguments),p.next()};return p.next=function(){return T<v.length-1?C(T+1):null},p};return C(0)},e.apply=function(v){var C=Array.prototype.slice.call(arguments,1);return function(){return v.apply(null,C.concat(Array.prototype.slice.call(arguments)))}};var g=function(v,C,T,p){var b=[];v(C,function(F,P){T(F,function(U,B){b=b.concat(B||[]),P(U)})},function(F){p(F,b)})};e.concat=c(g),e.concatSeries=l(g),e.whilst=function(v,C,T){v()?C(function(p){if(p)return T(p);e.whilst(v,C,T)}):T()},e.doWhilst=function(v,C,T){v(function(p){if(p)return T(p);C()?e.doWhilst(v,C,T):T()})},e.until=function(v,C,T){v()?T():C(function(p){if(p)return T(p);e.until(v,C,T)})},e.doUntil=function(v,C,T){v(function(p){if(p)return T(p);C()?T():e.doUntil(v,C,T)})},e.queue=function(v,C){C===void 0&&(C=1);function T(F,P,U,B){P.constructor!==Array&&(P=[P]),n(P,function(q){var z={data:q,callback:typeof B=="function"?B:null};U?F.tasks.unshift(z):F.tasks.push(z),F.saturated&&F.tasks.length===C&&F.saturated(),e.setImmediate(F.process)})}var p=0,b={tasks:[],concurrency:C,saturated:null,empty:null,drain:null,push:function(F,P){T(b,F,!1,P)},unshift:function(F,P){T(b,F,!0,P)},process:function(){if(p<b.concurrency&&b.tasks.length){var F=b.tasks.shift();b.empty&&b.tasks.length===0&&b.empty(),p+=1;var P=function(){p-=1,F.callback&&F.callback.apply(F,arguments),b.drain&&b.tasks.length+p===0&&b.drain(),b.process()},U=s(P);v(F.data,U)}},length:function(){return b.tasks.length},running:function(){return p}};return b},e.cargo=function(v,C){var T=!1,p=[],b={tasks:p,payload:C,saturated:null,empty:null,drain:null,push:function(F,P){F.constructor!==Array&&(F=[F]),n(F,function(U){p.push({data:U,callback:typeof P=="function"?P:null}),b.saturated&&p.length===C&&b.saturated()}),e.setImmediate(b.process)},process:function F(){if(!T){if(p.length===0){b.drain&&b.drain();return}var P=typeof C=="number"?p.splice(0,C):p.splice(0),U=o(P,function(B){return B.data});b.empty&&b.empty(),T=!0,v(U,function(){T=!1;var B=arguments;n(P,function(q){q.callback&&q.callback.apply(null,B)}),F()})}},length:function(){return p.length},running:function(){return T}};return b};var D=function(v){return function(C){var T=Array.prototype.slice.call(arguments,1);C.apply(null,T.concat([function(p){var b=Array.prototype.slice.call(arguments,1);typeof console<"u"&&(p?console.error&&console.error(p):console[v]&&n(b,function(F){console[v](F)}))}]))}};e.log=D("log"),e.dir=D("dir"),e.memoize=function(v,C){var T={},p={};C=C||function(F){return F};var b=function(){var F=Array.prototype.slice.call(arguments),P=F.pop(),U=C.apply(null,F);U in T?P.apply(null,T[U]):U in p?p[U].push(P):(p[U]=[P],v.apply(null,F.concat([function(){T[U]=arguments;var B=p[U];delete p[U];for(var q=0,z=B.length;q<z;q++)B[q].apply(null,arguments)}])))};return b.memo=T,b.unmemoized=v,b},e.unmemoize=function(v){return function(){return(v.unmemoized||v).apply(null,arguments)}},e.times=function(v,C,T){for(var p=[],b=0;b<v;b++)p.push(b);return e.map(p,C,T)},e.timesSeries=function(v,C,T){for(var p=[],b=0;b<v;b++)p.push(b);return e.mapSeries(p,C,T)},e.compose=function(){var v=Array.prototype.reverse.call(arguments);return function(){var C=this,T=Array.prototype.slice.call(arguments),p=T.pop();e.reduce(v,T,function(b,F,P){F.apply(C,b.concat([function(){var U=arguments[0],B=Array.prototype.slice.call(arguments,1);P(U,B)}]))},function(b,F){p.apply(C,[b].concat(F))})}};var A=function(v,C){var T=function(){var b=this,F=Array.prototype.slice.call(arguments),P=F.pop();return v(C,function(U,B){U.apply(b,F.concat([B]))},P)};if(arguments.length>2){var p=Array.prototype.slice.call(arguments,2);return T.apply(this,p)}else return T};e.applyEach=c(A),e.applyEachSeries=l(A),e.forever=function(v,C){function T(p){if(p){if(C)return C(p);throw p}v(T)}T()},t.exports?t.exports=e:r.async=e})()}(oi)),oi.exports}var si,Ks;function qf(){if(Ks)return si;Ks=1;var t=ar.spawn,e=Xi(),r=Je;function i(s){s._inputs[0].isStream||s.ffprobe(0,function(o,a){s._ffprobeData=a})}return si=function(s){s._spawnFfmpeg=function(n,o,a,u){typeof o=="function"&&(u=a,a=o,o={}),typeof u>"u"&&(u=a,a=function(){});var h="stdoutLines"in o?o.stdoutLines:this.options.stdoutLines;this._getFfmpegPath(function(c,f){if(c)return u(c);if(!f||f.length===0)return u(new Error("Cannot find ffmpeg"));o.niceness&&o.niceness!==0&&!r.isWindows&&(n.unshift("-n",o.niceness,f),f="nice");var l=r.linesRing(h),d=!1,y=r.linesRing(h),w=!1,O=t(f,n,o);O.stderr&&O.stderr.setEncoding("utf8"),O.on("error",function(D){u(D)});var x=null;function E(D){D&&(x=D),g&&(d||!o.captureStdout)&&w&&u(x,l,y)}var g=!1;O.on("exit",function(D,A){g=!0,A?E(new Error("ffmpeg was killed with signal "+A)):D?E(new Error("ffmpeg exited with code "+D)):E()}),o.captureStdout&&(O.stdout.on("data",function(D){l.append(D)}),O.stdout.on("close",function(){l.close(),d=!0,E()})),O.stderr.on("data",function(D){y.append(D)}),O.stderr.on("close",function(){y.close(),w=!0,E()}),a(O,l,y)})},s._getArguments=function(){var n=this._complexFilters.get(),o=this._outputs.some(function(a){return a.isFile});return[].concat(this._inputs.reduce(function(a,u){var h=typeof u.source=="string"?u.source:"pipe:0";return a.concat(u.options.get(),["-i",h])},[]),this._global.get(),o?["-y"]:[],n,this._outputs.reduce(function(a,u){var h=r.makeFilterStrings(u.sizeFilters.get()),c=u.audioFilters.get(),f=u.videoFilters.get().concat(h),l;return u.target?typeof u.target=="string"?l=[u.target]:l=["pipe:1"]:l=[],a.concat(u.audio.get(),c.length?["-filter:a",c.join(",")]:[],u.video.get(),f.length?["-filter:v",f.join(",")]:[],u.options.get(),l)},[]))},s._prepare=function(n,o){var a=this;e.waterfall([function(u){a._checkCapabilities(u)},function(u){if(!o)return u();a.ffprobe(0,function(h,c){h||(a._ffprobeData=c),u()})},function(u){var h=a._outputs.some(function(c){return c.flags.flvmeta&&!c.isFile&&(a.logger.warn("Updating flv metadata is only supported for files"),c.flags.flvmeta=!1),c.flags.flvmeta});h?a._getFlvtoolPath(function(c){u(c)}):u()},function(u){var h;try{h=a._getArguments()}catch(c){return u(c)}u(null,h)},function(u,h){a.availableEncoders(function(c,f){for(var l=0;l<u.length;l++)(u[l]==="-acodec"||u[l]==="-vcodec")&&(l++,u[l]in f&&f[u[l]].experimental&&(u.splice(l+1,0,"-strict","experimental"),l+=2));h(null,u)})}],n),o||(this.listeners("progress").length>0?i(this):this.once("newListener",function(u){u==="progress"&&i(this)}))},s.exec=s.execute=s.run=function(){var n=this,o=this._outputs.some(function(f){return"target"in f});if(!o)throw new Error("No output specified");var a=this._outputs.filter(function(f){return typeof f.target!="string"})[0],u=this._inputs.filter(function(f){return typeof f.source!="string"})[0],h=!1;function c(f,l,d){h||(h=!0,f?n.emit("error",f,l,d):n.emit("end",l,d))}return n._prepare(function(f,l){if(f)return c(f);n._spawnFfmpeg(l,{captureStdout:!a,niceness:n.options.niceness,cwd:n.options.cwd,windowsHide:!0},function(y,w,O){if(n.ffmpegProc=y,n.emit("start","ffmpeg "+l.join(" ")),u&&(u.source.on("error",function(g){var D=new Error("Input stream error: "+g.message);D.inputStreamError=g,c(D),y.kill()}),u.source.resume(),u.source.pipe(y.stdin),y.stdin.on("error",function(){})),n.options.timeout&&(n.processTimer=setTimeout(function(){var g="process ran into a timeout ("+n.options.timeout+"s)";c(new Error(g),w.get(),O.get()),y.kill()},n.options.timeout*1e3)),a&&(y.stdout.pipe(a.target,a.pipeopts),a.target.on("close",function(){n.logger.debug("Output stream closed, scheduling kill for ffmpeg process"),setTimeout(function(){c(new Error("Output stream closed")),y.kill()},20)}),a.target.on("error",function(g){n.logger.debug("Output stream error, killing ffmpeg process");var D=new Error("Output stream error: "+g.message);D.outputStreamError=g,c(D,w.get(),O.get()),y.kill("SIGKILL")})),O){if(n.listeners("stderr").length&&O.callback(function(g){n.emit("stderr",g)}),n.listeners("codecData").length){var x=!1,E={};O.callback(function(g){x||(x=r.extractCodecData(n,g,E))})}n.listeners("progress").length&&O.callback(function(g){r.extractProgress(n,g)})}},function(y,w,O){if(clearTimeout(n.processTimer),delete n.ffmpegProc,y)y.message.match(/ffmpeg exited with code/)&&(y.message+=": "+r.extractError(O.get())),c(y,w.get(),O.get());else{var x=n._outputs.filter(function(E){return E.flags.flvmeta});x.length?n._getFlvtoolPath(function(E,g){if(E)return c(E);e.each(x,function(D,A){t(g,["-U",D.target],{windowsHide:!0}).on("error",function(v){A(new Error("Error running "+g+" on "+D.target+": "+v.message))}).on("exit",function(v,C){v!==0||C?A(new Error(g+" "+(C?"received signal "+C:"exited with code "+v))+" when running on "+D.target):A()})},function(D){D?c(D):c(null,w.get(),O.get())})}):c(null,w.get(),O.get())}})}),this},s.renice=function(n){if(!r.isWindows&&(n=n||0,(n<-20||n>20)&&this.logger.warn("Invalid niceness value: "+n+", must be between -20 and 20"),n=Math.min(20,Math.max(-20,n)),this.options.niceness=n,this.ffmpegProc)){var o=this.logger,a=this.ffmpegProc.pid,u=t("renice",[n,"-p",a],{windowsHide:!0});u.on("error",function(h){o.warn("could not renice process "+a+": "+h.message)}),u.on("exit",function(h,c){c?o.warn("could not renice process "+a+": renice was killed by signal "+c):h?o.warn("could not renice process "+a+": renice exited with "+h):o.info("successfully reniced process "+a+" to "+n+" niceness")})}return this},s.kill=function(n){return this.ffmpegProc?this.ffmpegProc.kill(n||"SIGKILL"):this.logger.warn("No running ffmpeg process, cannot send signal"),this}},si}var ai,Js;function Bf(){if(Js)return ai;Js=1;var t=ae,e=Q,r=Xi(),i=Je,s=/^\s*([D ])([E ])([VAS])([S ])([D ])([T ]) ([^ ]+) +(.*)$/,n=/^\s*([D\.])([E\.])([VAS])([I\.])([L\.])([S\.]) ([^ ]+) +(.*)$/,o=/\(encoders:([^\)]+)\)/,a=/\(decoders:([^\)]+)\)/,u=/^\s*([VAS\.])([F\.])([S\.])([X\.])([B\.])([D\.]) ([^ ]+) +(.*)$/,h=/^\s*([D ])([E ])\s+([^ ]+)\s+(.*)$/,c=/\r\n|\r|\n/,f=/^(?: [T\.][S\.][C\.] )?([^ ]+) +(AA?|VV?|\|)->(AA?|VV?|\|) +(.*)$/,l={};return ai=function(d){d.setFfmpegPath=function(y){return l.ffmpegPath=y,this},d.setFfprobePath=function(y){return l.ffprobePath=y,this},d.setFlvtoolPath=function(y){return l.flvtoolPath=y,this},d._forgetPaths=function(){delete l.ffmpegPath,delete l.ffprobePath,delete l.flvtoolPath},d._getFfmpegPath=function(y){if("ffmpegPath"in l)return y(null,l.ffmpegPath);r.waterfall([function(w){process.env.FFMPEG_PATH?t.exists(process.env.FFMPEG_PATH,function(O){O?w(null,process.env.FFMPEG_PATH):w(null,"")}):w(null,"")},function(w,O){if(w.length)return O(null,w);i.which("ffmpeg",function(x,E){O(x,E)})}],function(w,O){w?y(w):y(null,l.ffmpegPath=O||"")})},d._getFfprobePath=function(y){var w=this;if("ffprobePath"in l)return y(null,l.ffprobePath);r.waterfall([function(O){process.env.FFPROBE_PATH?t.exists(process.env.FFPROBE_PATH,function(x){O(null,x?process.env.FFPROBE_PATH:"")}):O(null,"")},function(O,x){if(O.length)return x(null,O);i.which("ffprobe",function(E,g){x(E,g)})},function(O,x){if(O.length)return x(null,O);w._getFfmpegPath(function(E,g){if(E)x(E);else if(g.length){var D=i.isWindows?"ffprobe.exe":"ffprobe",A=e.join(e.dirname(g),D);t.exists(A,function(v){x(null,v?A:"")})}else x(null,"")})}],function(O,x){O?y(O):y(null,l.ffprobePath=x||"")})},d._getFlvtoolPath=function(y){if("flvtoolPath"in l)return y(null,l.flvtoolPath);r.waterfall([function(w){process.env.FLVMETA_PATH?t.exists(process.env.FLVMETA_PATH,function(O){w(null,O?process.env.FLVMETA_PATH:"")}):w(null,"")},function(w,O){if(w.length)return O(null,w);process.env.FLVTOOL2_PATH?t.exists(process.env.FLVTOOL2_PATH,function(x){O(null,x?process.env.FLVTOOL2_PATH:"")}):O(null,"")},function(w,O){if(w.length)return O(null,w);i.which("flvmeta",function(x,E){O(x,E)})},function(w,O){if(w.length)return O(null,w);i.which("flvtool2",function(x,E){O(x,E)})}],function(w,O){w?y(w):y(null,l.flvtoolPath=O||"")})},d.availableFilters=d.getAvailableFilters=function(y){if("filters"in l)return y(null,l.filters);this._spawnFfmpeg(["-filters"],{captureStdout:!0,stdoutLines:0},function(w,O){if(w)return y(w);var x=O.get(),E=x.split(`
`),g={},D={A:"audio",V:"video","|":"none"};E.forEach(function(A){var v=A.match(f);v&&(g[v[1]]={description:v[4],input:D[v[2].charAt(0)],multipleInputs:v[2].length>1,output:D[v[3].charAt(0)],multipleOutputs:v[3].length>1})}),y(null,l.filters=g)})},d.availableCodecs=d.getAvailableCodecs=function(y){if("codecs"in l)return y(null,l.codecs);this._spawnFfmpeg(["-codecs"],{captureStdout:!0,stdoutLines:0},function(w,O){if(w)return y(w);var x=O.get(),E=x.split(c),g={};E.forEach(function(D){var A=D.match(s);if(A&&A[7]!=="="&&(g[A[7]]={type:{V:"video",A:"audio",S:"subtitle"}[A[3]],description:A[8],canDecode:A[1]==="D",canEncode:A[2]==="E",drawHorizBand:A[4]==="S",directRendering:A[5]==="D",weirdFrameTruncation:A[6]==="T"}),A=D.match(n),A&&A[7]!=="="){var v=g[A[7]]={type:{V:"video",A:"audio",S:"subtitle"}[A[3]],description:A[8],canDecode:A[1]==="D",canEncode:A[2]==="E",intraFrameOnly:A[4]==="I",isLossy:A[5]==="L",isLossless:A[6]==="S"},C=v.description.match(o);C=C?C[1].trim().split(" "):[];var T=v.description.match(a);if(T=T?T[1].trim().split(" "):[],C.length||T.length){var p={};i.copy(v,p),delete p.canEncode,delete p.canDecode,C.forEach(function(b){g[b]={},i.copy(p,g[b]),g[b].canEncode=!0}),T.forEach(function(b){b in g||(g[b]={},i.copy(p,g[b])),g[b].canDecode=!0})}}}),y(null,l.codecs=g)})},d.availableEncoders=d.getAvailableEncoders=function(y){if("encoders"in l)return y(null,l.encoders);this._spawnFfmpeg(["-encoders"],{captureStdout:!0,stdoutLines:0},function(w,O){if(w)return y(w);var x=O.get(),E=x.split(c),g={};E.forEach(function(D){var A=D.match(u);A&&A[7]!=="="&&(g[A[7]]={type:{V:"video",A:"audio",S:"subtitle"}[A[1]],description:A[8],frameMT:A[2]==="F",sliceMT:A[3]==="S",experimental:A[4]==="X",drawHorizBand:A[5]==="B",directRendering:A[6]==="D"})}),y(null,l.encoders=g)})},d.availableFormats=d.getAvailableFormats=function(y){if("formats"in l)return y(null,l.formats);this._spawnFfmpeg(["-formats"],{captureStdout:!0,stdoutLines:0},function(w,O){if(w)return y(w);var x=O.get(),E=x.split(c),g={};E.forEach(function(D){var A=D.match(h);A&&A[3].split(",").forEach(function(v){v in g||(g[v]={description:A[4],canDemux:!1,canMux:!1}),A[1]==="D"&&(g[v].canDemux=!0),A[2]==="E"&&(g[v].canMux=!0)})}),y(null,l.formats=g)})},d._checkCapabilities=function(y){var w=this;r.waterfall([function(O){w.availableFormats(O)},function(O,x){var E;if(E=w._outputs.reduce(function(g,D){var A=D.options.find("-f",1);return A&&(!(A[0]in O)||!O[A[0]].canMux)&&g.push(A),g},[]),E.length===1)return x(new Error("Output format "+E[0]+" is not available"));if(E.length>1)return x(new Error("Output formats "+E.join(", ")+" are not available"));if(E=w._inputs.reduce(function(g,D){var A=D.options.find("-f",1);return A&&(!(A[0]in O)||!O[A[0]].canDemux)&&g.push(A[0]),g},[]),E.length===1)return x(new Error("Input format "+E[0]+" is not available"));if(E.length>1)return x(new Error("Input formats "+E.join(", ")+" are not available"));x()},function(O){w.availableEncoders(O)},function(O,x){var E;if(E=w._outputs.reduce(function(g,D){var A=D.audio.find("-acodec",1);return A&&A[0]!=="copy"&&(!(A[0]in O)||O[A[0]].type!=="audio")&&g.push(A[0]),g},[]),E.length===1)return x(new Error("Audio codec "+E[0]+" is not available"));if(E.length>1)return x(new Error("Audio codecs "+E.join(", ")+" are not available"));if(E=w._outputs.reduce(function(g,D){var A=D.video.find("-vcodec",1);return A&&A[0]!=="copy"&&(!(A[0]in O)||O[A[0]].type!=="video")&&g.push(A[0]),g},[]),E.length===1)return x(new Error("Video codec "+E[0]+" is not available"));if(E.length>1)return x(new Error("Video codecs "+E.join(", ")+" are not available"));x()}],y)}},ai}var ui,Qs;function Uf(){if(Qs)return ui;Qs=1;var t=ar.spawn;function e(s){return s.match(/^TAG:/)}function r(s){return s.match(/^DISPOSITION:/)}function i(s){var n=s.split(/\r\n|\r|\n/);n=n.filter(function(f){return f.length>0});var o={streams:[],format:{},chapters:[]};function a(f){for(var l={},d=n.shift();typeof d<"u";){if(d.toLowerCase()=="[/"+f+"]")return l;if(d.match(/^\[/)){d=n.shift();continue}var y=d.match(/^([^=]+)=(.*)$/);y&&(!y[1].match(/^TAG:/)&&y[2].match(/^[0-9]+(\.[0-9]+)?$/)?l[y[1]]=Number(y[2]):l[y[1]]=y[2]),d=n.shift()}return l}for(var u=n.shift();typeof u<"u";){if(u.match(/^\[stream/i)){var h=a("stream");o.streams.push(h)}else if(u.match(/^\[chapter/i)){var c=a("chapter");o.chapters.push(c)}else u.toLowerCase()==="[format]"&&(o.format=a("format"));u=n.shift()}return o}return ui=function(s){s.ffprobe=function(){var n,o=null,a=[],u,u=arguments[arguments.length-1],h=!1;function c(f,l){h||(h=!0,u(f,l))}switch(arguments.length){case 3:o=arguments[0],a=arguments[1];break;case 2:typeof arguments[0]=="number"?o=arguments[0]:Array.isArray(arguments[0])&&(a=arguments[0]);break}if(o===null){if(!this._currentInput)return c(new Error("No input specified"));n=this._currentInput}else if(n=this._inputs[o],!n)return c(new Error("Invalid input index"));this._getFfprobePath(function(f,l){if(f)return c(f);if(!l)return c(new Error("Cannot find ffprobe"));var d="",y=!1,w="",O=!1,x=n.isStream?"pipe:0":n.source,E=t(l,["-show_streams","-show_format"].concat(a,x),{windowsHide:!0});n.isStream&&(E.stdin.on("error",function(v){["ECONNRESET","EPIPE","EOF"].indexOf(v.code)>=0||c(v)}),E.stdin.on("close",function(){n.source.pause(),n.source.unpipe(E.stdin)}),n.source.pipe(E.stdin)),E.on("error",u);var g=null;function D(v){if(v&&(g=v),A&&y&&O){if(g)return w&&(g.message+=`
`+w),c(g);var C=i(d);[C.format].concat(C.streams).forEach(function(T){if(T){var p=Object.keys(T).filter(e);p.length&&(T.tags=T.tags||{},p.forEach(function(F){T.tags[F.substr(4)]=T[F],delete T[F]}));var b=Object.keys(T).filter(r);b.length&&(T.disposition=T.disposition||{},b.forEach(function(F){T.disposition[F.substr(12)]=T[F],delete T[F]}))}}),c(null,C)}}var A=!1;E.on("exit",function(v,C){A=!0,v?D(new Error("ffprobe exited with code "+v)):C?D(new Error("ffprobe was killed with signal "+C)):D()}),E.stdout.on("data",function(v){d+=v}),E.stdout.on("close",function(){y=!0,D()}),E.stderr.on("data",function(v){w+=v}),E.stderr.on("close",function(){O=!0,D()})})}},ui}var ci,Zs;function Xf(){if(Zs)return ci;Zs=1;var t=ae,e=Q,r=wa.PassThrough,i=Xi(),s=Je;return ci=function(o){o.saveToFile=o.save=function(a){return this.output(a).run(),this},o.writeToStream=o.pipe=o.stream=function(a,u){if(a&&!("writable"in a)&&(u=a,a=void 0),!a){if(process.version.match(/v0\.8\./))throw new Error("PassThrough stream is not supported on node v0.8");a=new r}return this.output(a,u).run(),a},o.takeScreenshots=o.thumbnail=o.thumbnails=o.screenshot=o.screenshots=function(a,u){var h=this,c=this._currentInput.source;if(a=a||{count:1},typeof a=="number"&&(a={count:a}),"folder"in a||(a.folder=u||"."),"timestamps"in a&&(a.timemarks=a.timestamps),!("timemarks"in a)){if(!a.count)throw new Error("Cannot take screenshots: neither a count nor a timemark list are specified");var f=100/(1+a.count);a.timemarks=[];for(var l=0;l<a.count;l++)a.timemarks.push(f*(l+1)+"%")}if("size"in a){var d=a.size.match(/^(\d+)x(\d+)$/),y=a.size.match(/^(\d+)x\?$/),w=a.size.match(/^\?x(\d+)$/),O=a.size.match(/^(\d+)%$/);if(!d&&!y&&!w&&!O)throw new Error("Invalid size parameter: "+a.size)}var x;function E(g){x?g(null,x):h.ffprobe(function(D,A){x=A,g(D,A)})}return i.waterfall([function(D){if(a.timemarks.some(function(A){return(""+A).match(/^[\d.]+%$/)})){if(typeof c!="string")return D(new Error("Cannot compute screenshot timemarks with an input stream, please specify fixed timemarks"));E(function(A,v){if(A)D(A);else{var C=v.streams.reduce(function(p,b){return b.codec_type==="video"&&b.width*b.height>p.width*p.height?b:p},{width:0,height:0});if(C.width===0)return D(new Error("No video stream in input, cannot take screenshots"));var T=Number(C.duration);if(isNaN(T)&&(T=Number(v.format.duration)),isNaN(T))return D(new Error("Could not get input duration, please specify fixed timemarks"));a.timemarks=a.timemarks.map(function(p){return(""+p).match(/^([\d.]+)%$/)?T*parseFloat(p)/100:p}),D()}})}else D()},function(D){a.timemarks=a.timemarks.map(function(A){return s.timemarkToSeconds(A)}).sort(function(A,v){return A-v}),D()},function(D){var A=a.filename||"tn.png";if(A.indexOf(".")===-1&&(A+=".png"),a.timemarks.length>1&&!A.match(/%(s|0*i)/)){var v=e.extname(A);A=e.join(e.dirname(A),e.basename(A,v)+"_%i"+v)}D(null,A)},function(D,A){if(D.match(/%[bf]/)){if(typeof c!="string")return A(new Error("Cannot replace %f or %b when using an input stream"));D=D.replace(/%f/g,e.basename(c)).replace(/%b/g,e.basename(c,e.extname(c)))}A(null,D)},function(D,A){if(D.match(/%[whr]/)){if(d)return A(null,D,d[1],d[2]);E(function(v,C){if(v)return A(new Error("Could not determine video resolution to replace %w, %h or %r"));var T=C.streams.reduce(function(F,P){return P.codec_type==="video"&&P.width*P.height>F.width*F.height?P:F},{width:0,height:0});if(T.width===0)return A(new Error("No video stream in input, cannot replace %w, %h or %r"));var p=T.width,b=T.height;y?(b=b*Number(y[1])/p,p=Number(y[1])):w?(p=p*Number(w[1])/b,b=Number(w[1])):O&&(p=p*Number(O[1])/100,b=b*Number(O[1])/100),A(null,D,Math.round(p/2)*2,Math.round(b/2)*2)})}else A(null,D,-1,-1)},function(D,A,v,C){D=D.replace(/%r/g,"%wx%h").replace(/%w/g,A).replace(/%h/g,v),C(null,D)},function(D,A){var v=a.timemarks.map(function(C,T){return D.replace(/%s/g,s.timemarkToSeconds(C)).replace(/%(0*)i/g,function(p,b){var F=""+(T+1);return b.substr(0,Math.max(0,b.length+1-F.length))+F})});h.emit("filenames",v),A(null,v)},function(D,A){t.exists(a.folder,function(v){v?A(null,D):t.mkdir(a.folder,function(C){C?A(C):A(null,D)})})}],function(D,A){if(D)return h.emit("error",D);var v=a.timemarks.length,C,T=[C={filter:"split",options:v,outputs:[]}];if("size"in a){h.size(a.size);var p=h._currentOutput.sizeFilters.get().map(function(U,B){return B>0&&(U.inputs="size"+(B-1)),U.outputs="size"+B,U});C.inputs="size"+(p.length-1),T=p.concat(T),h._currentOutput.sizeFilters.clear()}for(var b=0,F=0;F<v;F++){var P="screen"+F;C.outputs.push(P),F===0&&(b=a.timemarks[F],h.seekInput(b)),h.output(e.join(a.folder,A[F])).frames(1).map(P),F>0&&h.seek(a.timemarks[F]-b)}h.complexFilter(T),h.run()}),this},o.mergeToFile=o.concatenate=o.concat=function(a,u){var h=this._inputs.filter(function(f){return!f.isStream})[0],c=this;return this.ffprobe(this._inputs.indexOf(h),function(f,l){if(f)return c.emit("error",f);var d=l.streams.some(function(w){return w.codec_type==="audio"}),y=l.streams.some(function(w){return w.codec_type==="video"});c.output(a,u).complexFilter({filter:"concat",options:{n:c._inputs.length,v:y?1:0,a:d?1:0}}).run()}),this}},ci}var Vf=Q,zf=$t,au=ct.EventEmitter,Ei=Je;function ce(t,e){if(!(this instanceof ce))return new ce(t,e);au.call(this),typeof t=="object"&&!("readable"in t)?e=t:(e=e||{},e.source=t),this._inputs=[],e.source&&this.input(e.source),this._outputs=[],this.output();var r=this;["_global","_complexFilters"].forEach(function(i){r[i]=Ei.args()}),e.stdoutLines="stdoutLines"in e?e.stdoutLines:100,e.presets=e.presets||e.preset||Vf.join(__dirname,"presets"),e.niceness=e.niceness||e.priority||0,this.options=e,this.logger=e.logger||{debug:function(){},info:function(){},warn:function(){},error:function(){}}}zf.inherits(ce,au);var Wf=ce;ce.prototype.clone=function(){var t=new ce,e=this;return t.options=this.options,t.logger=this.logger,t._inputs=this._inputs.map(function(r){return{source:r.source,options:r.options.clone()}}),"target"in this._outputs[0]?(t._outputs=[],t.output()):(t._outputs=[t._currentOutput={flags:{}}],["audio","audioFilters","video","videoFilters","sizeFilters","options"].forEach(function(r){t._currentOutput[r]=e._currentOutput[r].clone()}),this._currentOutput.sizeData&&(t._currentOutput.sizeData={},Ei.copy(this._currentOutput.sizeData,t._currentOutput.sizeData)),Ei.copy(this._currentOutput.flags,t._currentOutput.flags)),["_global","_complexFilters"].forEach(function(r){t[r]=e[r].clone()}),t};If()(ce.prototype);Pf()(ce.prototype);Lf()(ce.prototype);Mf()(ce.prototype);$f()(ce.prototype);Rf()(ce.prototype);jf()(ce.prototype);qf()(ce.prototype);Bf()(ce.prototype);ce.setFfmpegPath=function(t){new ce().setFfmpegPath(t)};ce.setFfprobePath=function(t){new ce().setFfprobePath(t)};ce.setFlvtoolPath=function(t){new ce().setFlvtoolPath(t)};ce.availableFilters=ce.getAvailableFilters=function(t){new ce().availableFilters(t)};ce.availableCodecs=ce.getAvailableCodecs=function(t){new ce().availableCodecs(t)};ce.availableFormats=ce.getAvailableFormats=function(t){new ce().availableFormats(t)};ce.availableEncoders=ce.getAvailableEncoders=function(t){new ce().availableEncoders(t)};Uf()(ce.prototype);ce.ffprobe=function(t){var e=new ce(t);e.ffprobe.apply(e,Array.prototype.slice.call(arguments,1))};Xf()(ce.prototype);var xt=Wf;const Vi=vt(xt);function Hf(){try{let t,e;if(oe.app.isPackaged){const r=Q.join(process.resourcesPath,"bin");if(!ae.existsSync(r))throw new Error(`FFmpeg目录不存在: ${r}`);const i=process.platform==="win32"?".exe":"";if(t=Q.join(r,`ffmpeg${i}`),e=Q.join(r,`ffprobe${i}`),!ae.existsSync(t))throw new Error(`FFmpeg可执行文件不存在: ${t}`);if(!ae.existsSync(e))throw new Error(`FFprobe可执行文件不存在: ${e}`)}else{const r=Q.join(oe.app.getAppPath(),"bin"),i=process.platform==="win32"?".exe":"";t=require("@ffmpeg-installer/ffmpeg").path,e=require("@ffprobe-installer/ffprobe").path}return xt.setFfmpegPath(t),xt.setFfprobePath(e),se.info("FFmpeg路径:",t),se.info("FFprobe路径:",e),{ffmpegPath:t,ffprobePath:e}}catch(t){throw se.error("FFmpeg初始化失败:",t),new Error(`视频处理引擎初始化失败: ${t.message}`)}}function Nt(t){return new Promise((e,r)=>{xt.ffprobe(t,(i,s)=>{if(i)return r(i);e(s.format.duration||0)})})}async function Gf(t){return new Promise(e=>{xt.ffprobe(t,(r,i)=>{if(r)return se.error("FFprobe检测音频流失败:",{filePath:t,error:r.message}),e(!1);const s=i.streams.some(n=>n.codec_type==="audio");se.verbose(`音频流检测结果: ${t} -> ${s?"有":"无"}音频`),e(s)})})}function Yf(){if(oe.app.isPackaged)return Q.join(process.resourcesPath,"fonts");{const t=Q.join(__dirname,"../../fonts");if(ae.existsSync(t))return t;{const e={win32:"C:/Windows/Fonts/",darwin:"/System/Library/Fonts/",linux:"/usr/share/fonts/"},r=process.platform;return Q.join(e[r]||"")}}}const dt="zhushou";function Kf(){return oe.app.isPackaged?Q.dirname(process.execPath):oe.app.getAppPath()}function ft(){try{const t=Kf(),e=Q.join(t,"data");return ae.existsSync(e)||ae.mkdirSync(e,{recursive:!0}),e}catch(t){switch(console.error("Failed to create zhushou directory:",t),process.platform){case"win32":return Q.join(oe.app.getPath("appData"),dt);case"darwin":return Q.join(oe.app.getPath("appData"),dt);case"linux":return Q.join(oe.app.getPath("appData"),dt);default:return Q.join(oe.app.getPath("documents"),dt)}}}function uu(){try{const t=ft();ae.existsSync(t)||(ae.mkdirSync(t),console.log("Created zhushou directory at:",t));try{ae.accessSync(t,ae.constants.W_OK)}catch{return console.error("No write permission for zhushou directory, falling back to documents"),Q.join(oe.app.getPath("documents"),dt)}return t}catch(t){return console.error("Failed to create zhushou directory:",t),Q.join(oe.app.getPath("documents"),dt)}}function Jf(){oe.ipcMain.handle("get-default-save-path",()=>uu())}async function cu(t){try{const e={text:t.text,voice:t.voice||"xiaoyun",format:t.format||"mp3",sample_rate:t.sample_rate||16e3,volume:t.volume||50,speech_rate:t.speech_rate||0,pitch_rate:t.pitch_rate||0},r=t.outputDir||ft(),i=t.outputFileName||`tts_${Date.now()}`,s=await bf();Dr.existsSync(r)||Dr.mkdirSync(r,{recursive:!0});const n=new il({url:ir.ttsUrl,appkey:ir.appkey,token:s}),o=Q.join(r,`${i}.${e.format||"mp3"}`),a=Dr.createWriteStream(o);return se.log(o),new Promise((u,h)=>{n.on("meta",c=>{se.info("接收到元信息:",c)}),n.on("data",c=>{try{a.write(c),se.debug(`接收到数据块，大小: ${c.length} bytes`)}catch(f){se.error("写入文件失败:",f),h(f)}}),n.on("completed",async()=>{a.end(),se.info("语音合成完成");const c=await Nt(o);se.info(`语音合成完成，时长: ${c}秒`),u({success:!0,outputFile:o,duration:Math.floor(c*1e3)/1e3})}),n.on("closed",()=>{se.info("连接已关闭")}),n.on("failed",c=>{a.end(),se.error("语音合成失败:",c),h(c)}),n.start(e,!0,6e3)})}catch(e){throw se.error("语音合成初始化失败:",e),e}}function Qf(){oe.ipcMain.handle("text2voice",async(t,e)=>{const r=JSON.parse(nr(e));return se.log("accept params:"),se.log(JSON.stringify(r)),cu(r)})}const Zf={...je.webcrypto.subtle,generateKey:async(t,e,r)=>je.webcrypto.subtle.generateKey(t,e,r)},eh={getRandomValues:t=>{if(!t)return t;switch(!0){case t instanceof Int8Array:return je.webcrypto.getRandomValues(t);case t instanceof Uint8Array:return je.webcrypto.getRandomValues(t);case t instanceof Uint8ClampedArray:return je.webcrypto.getRandomValues(t);case t instanceof Int16Array:return je.webcrypto.getRandomValues(t);case t instanceof Uint16Array:return je.webcrypto.getRandomValues(t);case t instanceof Int32Array:return je.webcrypto.getRandomValues(t);case t instanceof Uint32Array:return je.webcrypto.getRandomValues(t);default:throw new Error("Unsupported ArrayBufferView type")}},randomUUID:()=>je.webcrypto.randomUUID(),subtle:Zf};var Pe={},Ee={};Ee.fromCallback=function(t){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")t.apply(this,e);else return new Promise((r,i)=>{e.push((s,n)=>s!=null?i(s):r(n)),t.apply(this,e)})},"name",{value:t.name})};Ee.fromPromise=function(t){return Object.defineProperty(function(...e){const r=e[e.length-1];if(typeof r!="function")return t.apply(this,e);e.pop(),t.apply(this,e).then(i=>r(null,i),r)},"name",{value:t.name})};var Qe=tc,th=process.cwd,tr=null,rh=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return tr||(tr=th.call(process)),tr};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var ea=process.chdir;process.chdir=function(t){tr=null,ea.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,ea)}var nh=ih;function ih(t){Qe.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=n(t.chown),t.fchown=n(t.fchown),t.lchown=n(t.lchown),t.chmod=i(t.chmod),t.fchmod=i(t.fchmod),t.lchmod=i(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=s(t.chmodSync),t.fchmodSync=s(t.fchmodSync),t.lchmodSync=s(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=u(t.statSync),t.fstatSync=u(t.fstatSync),t.lstatSync=u(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(c,f,l){l&&process.nextTick(l)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(c,f,l,d){d&&process.nextTick(d)},t.lchownSync=function(){}),rh==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:function(c){function f(l,d,y){var w=Date.now(),O=0;c(l,d,function x(E){if(E&&(E.code==="EACCES"||E.code==="EPERM"||E.code==="EBUSY")&&Date.now()-w<6e4){setTimeout(function(){t.stat(d,function(g,D){g&&g.code==="ENOENT"?c(l,d,x):y(E)})},O),O<100&&(O+=10);return}y&&y(E)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(t.rename)),t.read=typeof t.read!="function"?t.read:function(c){function f(l,d,y,w,O,x){var E;if(x&&typeof x=="function"){var g=0;E=function(D,A,v){if(D&&D.code==="EAGAIN"&&g<10)return g++,c.call(t,l,d,y,w,O,E);x.apply(this,arguments)}}return c.call(t,l,d,y,w,O,E)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:function(c){return function(f,l,d,y,w){for(var O=0;;)try{return c.call(t,f,l,d,y,w)}catch(x){if(x.code==="EAGAIN"&&O<10){O++;continue}throw x}}}(t.readSync);function e(c){c.lchmod=function(f,l,d){c.open(f,Qe.O_WRONLY|Qe.O_SYMLINK,l,function(y,w){if(y){d&&d(y);return}c.fchmod(w,l,function(O){c.close(w,function(x){d&&d(O||x)})})})},c.lchmodSync=function(f,l){var d=c.openSync(f,Qe.O_WRONLY|Qe.O_SYMLINK,l),y=!0,w;try{w=c.fchmodSync(d,l),y=!1}finally{if(y)try{c.closeSync(d)}catch{}else c.closeSync(d)}return w}}function r(c){Qe.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(f,l,d,y){c.open(f,Qe.O_SYMLINK,function(w,O){if(w){y&&y(w);return}c.futimes(O,l,d,function(x){c.close(O,function(E){y&&y(x||E)})})})},c.lutimesSync=function(f,l,d){var y=c.openSync(f,Qe.O_SYMLINK),w,O=!0;try{w=c.futimesSync(y,l,d),O=!1}finally{if(O)try{c.closeSync(y)}catch{}else c.closeSync(y)}return w}):c.futimes&&(c.lutimes=function(f,l,d,y){y&&process.nextTick(y)},c.lutimesSync=function(){})}function i(c){return c&&function(f,l,d){return c.call(t,f,l,function(y){h(y)&&(y=null),d&&d.apply(this,arguments)})}}function s(c){return c&&function(f,l){try{return c.call(t,f,l)}catch(d){if(!h(d))throw d}}}function n(c){return c&&function(f,l,d,y){return c.call(t,f,l,d,function(w){h(w)&&(w=null),y&&y.apply(this,arguments)})}}function o(c){return c&&function(f,l,d){try{return c.call(t,f,l,d)}catch(y){if(!h(y))throw y}}}function a(c){return c&&function(f,l,d){typeof l=="function"&&(d=l,l=null);function y(w,O){O&&(O.uid<0&&(O.uid+=4294967296),O.gid<0&&(O.gid+=4294967296)),d&&d.apply(this,arguments)}return l?c.call(t,f,l,y):c.call(t,f,y)}}function u(c){return c&&function(f,l){var d=l?c.call(t,f,l):c.call(t,f);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function h(c){if(!c||c.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(c.code==="EINVAL"||c.code==="EPERM"))}}var ta=wa.Stream,oh=sh;function sh(t){return{ReadStream:e,WriteStream:r};function e(i,s){if(!(this instanceof e))return new e(i,s);ta.call(this);var n=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,s=s||{};for(var o=Object.keys(s),a=0,u=o.length;a<u;a++){var h=o[a];this[h]=s[h]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){n._read()});return}t.open(this.path,this.flags,this.mode,function(c,f){if(c){n.emit("error",c),n.readable=!1;return}n.fd=f,n.emit("open",f),n._read()})}function r(i,s){if(!(this instanceof r))return new r(i,s);ta.call(this),this.path=i,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,s=s||{};for(var n=Object.keys(s),o=0,a=n.length;o<a;o++){var u=n[o];this[u]=s[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var ah=ch,uh=Object.getPrototypeOf||function(t){return t.__proto__};function ch(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:uh(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var de=ae,lh=nh,fh=oh,hh=ah,Kt=$t,Oe,sr;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Oe=Symbol.for("graceful-fs.queue"),sr=Symbol.for("graceful-fs.previous")):(Oe="___graceful-fs.queue",sr="___graceful-fs.previous");function ph(){}function lu(t,e){Object.defineProperty(t,Oe,{get:function(){return e}})}var ut=ph;Kt.debuglog?ut=Kt.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(ut=function(){var t=Kt.format.apply(Kt,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});if(!de[Oe]){var dh=ne[Oe]||[];lu(de,dh),de.close=function(t){function e(r,i){return t.call(de,r,function(s){s||ra(),typeof i=="function"&&i.apply(this,arguments)})}return Object.defineProperty(e,sr,{value:t}),e}(de.close),de.closeSync=function(t){function e(r){t.apply(de,arguments),ra()}return Object.defineProperty(e,sr,{value:t}),e}(de.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){ut(de[Oe]),lr.equal(de[Oe].length,0)})}ne[Oe]||lu(ne,de[Oe]);var Et=zi(hh(de));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!de.__patched&&(Et=zi(de),de.__patched=!0);function zi(t){lh(t),t.gracefulify=zi,t.createReadStream=A,t.createWriteStream=v;var e=t.readFile;t.readFile=r;function r(p,b,F){return typeof b=="function"&&(F=b,b=null),P(p,b,F);function P(U,B,q,z){return e(U,B,function(W){W&&(W.code==="EMFILE"||W.code==="ENFILE")?pt([P,[U,B,q],W,z||Date.now(),Date.now()]):typeof q=="function"&&q.apply(this,arguments)})}}var i=t.writeFile;t.writeFile=s;function s(p,b,F,P){return typeof F=="function"&&(P=F,F=null),U(p,b,F,P);function U(B,q,z,W,K){return i(B,q,z,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?pt([U,[B,q,z,W],J,K||Date.now(),Date.now()]):typeof W=="function"&&W.apply(this,arguments)})}}var n=t.appendFile;n&&(t.appendFile=o);function o(p,b,F,P){return typeof F=="function"&&(P=F,F=null),U(p,b,F,P);function U(B,q,z,W,K){return n(B,q,z,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?pt([U,[B,q,z,W],J,K||Date.now(),Date.now()]):typeof W=="function"&&W.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=u);function u(p,b,F,P){return typeof F=="function"&&(P=F,F=0),U(p,b,F,P);function U(B,q,z,W,K){return a(B,q,z,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?pt([U,[B,q,z,W],J,K||Date.now(),Date.now()]):typeof W=="function"&&W.apply(this,arguments)})}}var h=t.readdir;t.readdir=f;var c=/^v[0-5]\./;function f(p,b,F){typeof b=="function"&&(F=b,b=null);var P=c.test(process.version)?function(q,z,W,K){return h(q,U(q,z,W,K))}:function(q,z,W,K){return h(q,z,U(q,z,W,K))};return P(p,b,F);function U(B,q,z,W){return function(K,J){K&&(K.code==="EMFILE"||K.code==="ENFILE")?pt([P,[B,q,z],K,W||Date.now(),Date.now()]):(J&&J.sort&&J.sort(),typeof z=="function"&&z.call(this,K,J))}}}if(process.version.substr(0,4)==="v0.8"){var l=fh(t);x=l.ReadStream,g=l.WriteStream}var d=t.ReadStream;d&&(x.prototype=Object.create(d.prototype),x.prototype.open=E);var y=t.WriteStream;y&&(g.prototype=Object.create(y.prototype),g.prototype.open=D),Object.defineProperty(t,"ReadStream",{get:function(){return x},set:function(p){x=p},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return g},set:function(p){g=p},enumerable:!0,configurable:!0});var w=x;Object.defineProperty(t,"FileReadStream",{get:function(){return w},set:function(p){w=p},enumerable:!0,configurable:!0});var O=g;Object.defineProperty(t,"FileWriteStream",{get:function(){return O},set:function(p){O=p},enumerable:!0,configurable:!0});function x(p,b){return this instanceof x?(d.apply(this,arguments),this):x.apply(Object.create(x.prototype),arguments)}function E(){var p=this;T(p.path,p.flags,p.mode,function(b,F){b?(p.autoClose&&p.destroy(),p.emit("error",b)):(p.fd=F,p.emit("open",F),p.read())})}function g(p,b){return this instanceof g?(y.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}function D(){var p=this;T(p.path,p.flags,p.mode,function(b,F){b?(p.destroy(),p.emit("error",b)):(p.fd=F,p.emit("open",F))})}function A(p,b){return new t.ReadStream(p,b)}function v(p,b){return new t.WriteStream(p,b)}var C=t.open;t.open=T;function T(p,b,F,P){return typeof F=="function"&&(P=F,F=null),U(p,b,F,P);function U(B,q,z,W,K){return C(B,q,z,function(J,Z){J&&(J.code==="EMFILE"||J.code==="ENFILE")?pt([U,[B,q,z,W],J,K||Date.now(),Date.now()]):typeof W=="function"&&W.apply(this,arguments)})}}return t}function pt(t){ut("ENQUEUE",t[0].name,t[1]),de[Oe].push(t),Wi()}var Jt;function ra(){for(var t=Date.now(),e=0;e<de[Oe].length;++e)de[Oe][e].length>2&&(de[Oe][e][3]=t,de[Oe][e][4]=t);Wi()}function Wi(){if(clearTimeout(Jt),Jt=void 0,de[Oe].length!==0){var t=de[Oe].shift(),e=t[0],r=t[1],i=t[2],s=t[3],n=t[4];if(s===void 0)ut("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-s>=6e4){ut("TIMEOUT",e.name,r);var o=r.pop();typeof o=="function"&&o.call(null,i)}else{var a=Date.now()-n,u=Math.max(n-s,1),h=Math.min(u*1.2,100);a>=h?(ut("RETRY",e.name,r),e.apply(null,r.concat([s]))):de[Oe].push(t)}Jt===void 0&&(Jt=setTimeout(Wi,0))}}(function(t){const e=Ee.fromCallback,r=Et,i=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(s=>typeof r[s]=="function");Object.assign(t,r),i.forEach(s=>{t[s]=e(r[s])}),t.exists=function(s,n){return typeof n=="function"?r.exists(s,n):new Promise(o=>r.exists(s,o))},t.read=function(s,n,o,a,u,h){return typeof h=="function"?r.read(s,n,o,a,u,h):new Promise((c,f)=>{r.read(s,n,o,a,u,(l,d,y)=>{if(l)return f(l);c({bytesRead:d,buffer:y})})})},t.write=function(s,n,...o){return typeof o[o.length-1]=="function"?r.write(s,n,...o):new Promise((a,u)=>{r.write(s,n,...o,(h,c,f)=>{if(h)return u(h);a({bytesWritten:c,buffer:f})})})},t.readv=function(s,n,...o){return typeof o[o.length-1]=="function"?r.readv(s,n,...o):new Promise((a,u)=>{r.readv(s,n,...o,(h,c,f)=>{if(h)return u(h);a({bytesRead:c,buffers:f})})})},t.writev=function(s,n,...o){return typeof o[o.length-1]=="function"?r.writev(s,n,...o):new Promise((a,u)=>{r.writev(s,n,...o,(h,c,f)=>{if(h)return u(h);a({bytesWritten:c,buffers:f})})})},typeof r.realpath.native=="function"?t.realpath.native=e(r.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(Pe);var Hi={},fu={};const mh=Q;fu.checkPath=function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(mh.parse(e).root,""))){const i=new Error(`Path contains invalid characters: ${e}`);throw i.code="EINVAL",i}};const hu=Pe,{checkPath:pu}=fu,du=t=>{const e={mode:511};return typeof t=="number"?t:{...e,...t}.mode};Hi.makeDir=async(t,e)=>(pu(t),hu.mkdir(t,{mode:du(e),recursive:!0}));Hi.makeDirSync=(t,e)=>(pu(t),hu.mkdirSync(t,{mode:du(e),recursive:!0}));const yh=Ee.fromPromise,{makeDir:gh,makeDirSync:li}=Hi,fi=yh(gh);var Ve={mkdirs:fi,mkdirsSync:li,mkdirp:fi,mkdirpSync:li,ensureDir:fi,ensureDirSync:li};const vh=Ee.fromPromise,mu=Pe;function wh(t){return mu.access(t).then(()=>!0).catch(()=>!1)}var ht={pathExists:vh(wh),pathExistsSync:mu.existsSync};const mt=Pe,Eh=Ee.fromPromise;async function bh(t,e,r){const i=await mt.open(t,"r+");let s=null;try{await mt.futimes(i,e,r)}finally{try{await mt.close(i)}catch(n){s=n}}if(s)throw s}function Sh(t,e,r){const i=mt.openSync(t,"r+");return mt.futimesSync(i,e,r),mt.closeSync(i)}var yu={utimesMillis:Eh(bh),utimesMillisSync:Sh};const yt=Pe,be=Q,na=Ee.fromPromise;function Oh(t,e,r){const i=r.dereference?s=>yt.stat(s,{bigint:!0}):s=>yt.lstat(s,{bigint:!0});return Promise.all([i(t),i(e).catch(s=>{if(s.code==="ENOENT")return null;throw s})]).then(([s,n])=>({srcStat:s,destStat:n}))}function Th(t,e,r){let i;const s=r.dereference?o=>yt.statSync(o,{bigint:!0}):o=>yt.lstatSync(o,{bigint:!0}),n=s(t);try{i=s(e)}catch(o){if(o.code==="ENOENT")return{srcStat:n,destStat:null};throw o}return{srcStat:n,destStat:i}}async function Ch(t,e,r,i){const{srcStat:s,destStat:n}=await Oh(t,e,i);if(n){if(Rt(s,n)){const o=be.basename(t),a=be.basename(e);if(r==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:s,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!s.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(s.isDirectory()&&Gi(t,e))throw new Error(Er(t,e,r));return{srcStat:s,destStat:n}}function Dh(t,e,r,i){const{srcStat:s,destStat:n}=Th(t,e,i);if(n){if(Rt(s,n)){const o=be.basename(t),a=be.basename(e);if(r==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:s,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!s.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(s.isDirectory()&&Gi(t,e))throw new Error(Er(t,e,r));return{srcStat:s,destStat:n}}async function gu(t,e,r,i){const s=be.resolve(be.dirname(t)),n=be.resolve(be.dirname(r));if(n===s||n===be.parse(n).root)return;let o;try{o=await yt.stat(n,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Rt(e,o))throw new Error(Er(t,r,i));return gu(t,e,n,i)}function vu(t,e,r,i){const s=be.resolve(be.dirname(t)),n=be.resolve(be.dirname(r));if(n===s||n===be.parse(n).root)return;let o;try{o=yt.statSync(n,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Rt(e,o))throw new Error(Er(t,r,i));return vu(t,e,n,i)}function Rt(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function Gi(t,e){const r=be.resolve(t).split(be.sep).filter(s=>s),i=be.resolve(e).split(be.sep).filter(s=>s);return r.every((s,n)=>i[n]===s)}function Er(t,e,r){return`Cannot ${r} '${t}' to a subdirectory of itself, '${e}'.`}var bt={checkPaths:na(Ch),checkPathsSync:Dh,checkParentPaths:na(gu),checkParentPathsSync:vu,isSrcSubdir:Gi,areIdentical:Rt};const _e=Pe,It=Q,{mkdirs:Ah}=Ve,{pathExists:Fh}=ht,{utimesMillis:_h}=yu,Pt=bt;async function xh(t,e,r={}){typeof r=="function"&&(r={filter:r}),r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");const{srcStat:i,destStat:s}=await Pt.checkPaths(t,e,"copy",r);if(await Pt.checkParentPaths(t,i,e,"copy"),!await wu(t,e,r))return;const o=It.dirname(e);await Fh(o)||await Ah(o),await Eu(s,t,e,r)}async function wu(t,e,r){return r.filter?r.filter(t,e):!0}async function Eu(t,e,r,i){const n=await(i.dereference?_e.stat:_e.lstat)(e);if(n.isDirectory())return Lh(n,t,e,r,i);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return Nh(n,t,e,r,i);if(n.isSymbolicLink())return Mh(t,e,r,i);throw n.isSocket()?new Error(`Cannot copy a socket file: ${e}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}async function Nh(t,e,r,i,s){if(!e)return ia(t,r,i,s);if(s.overwrite)return await _e.unlink(i),ia(t,r,i,s);if(s.errorOnExist)throw new Error(`'${i}' already exists`)}async function ia(t,e,r,i){if(await _e.copyFile(e,r),i.preserveTimestamps){Ih(t.mode)&&await Ph(r,t.mode);const s=await _e.stat(e);await _h(r,s.atime,s.mtime)}return _e.chmod(r,t.mode)}function Ih(t){return(t&128)===0}function Ph(t,e){return _e.chmod(t,e|128)}async function Lh(t,e,r,i,s){e||await _e.mkdir(i);const n=[];for await(const o of await _e.opendir(r)){const a=It.join(r,o.name),u=It.join(i,o.name);n.push(wu(a,u,s).then(h=>{if(h)return Pt.checkPaths(a,u,"copy",s).then(({destStat:c})=>Eu(c,a,u,s))}))}await Promise.all(n),e||await _e.chmod(i,t.mode)}async function Mh(t,e,r,i){let s=await _e.readlink(e);if(i.dereference&&(s=It.resolve(process.cwd(),s)),!t)return _e.symlink(s,r);let n=null;try{n=await _e.readlink(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return _e.symlink(s,r);throw o}if(i.dereference&&(n=It.resolve(process.cwd(),n)),Pt.isSrcSubdir(s,n))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${n}'.`);if(Pt.isSrcSubdir(n,s))throw new Error(`Cannot overwrite '${n}' with '${s}'.`);return await _e.unlink(r),_e.symlink(s,r)}var $h=xh;const Ne=Et,Lt=Q,Rh=Ve.mkdirsSync,kh=yu.utimesMillisSync,Mt=bt;function jh(t,e,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:i,destStat:s}=Mt.checkPathsSync(t,e,"copy",r);if(Mt.checkParentPathsSync(t,i,e,"copy"),r.filter&&!r.filter(t,e))return;const n=Lt.dirname(e);return Ne.existsSync(n)||Rh(n),bu(s,t,e,r)}function bu(t,e,r,i){const n=(i.dereference?Ne.statSync:Ne.lstatSync)(e);if(n.isDirectory())return Wh(n,t,e,r,i);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return qh(n,t,e,r,i);if(n.isSymbolicLink())return Yh(t,e,r,i);throw n.isSocket()?new Error(`Cannot copy a socket file: ${e}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}function qh(t,e,r,i,s){return e?Bh(t,r,i,s):Su(t,r,i,s)}function Bh(t,e,r,i){if(i.overwrite)return Ne.unlinkSync(r),Su(t,e,r,i);if(i.errorOnExist)throw new Error(`'${r}' already exists`)}function Su(t,e,r,i){return Ne.copyFileSync(e,r),i.preserveTimestamps&&Uh(t.mode,e,r),Yi(r,t.mode)}function Uh(t,e,r){return Xh(t)&&Vh(r,t),zh(e,r)}function Xh(t){return(t&128)===0}function Vh(t,e){return Yi(t,e|128)}function Yi(t,e){return Ne.chmodSync(t,e)}function zh(t,e){const r=Ne.statSync(t);return kh(e,r.atime,r.mtime)}function Wh(t,e,r,i,s){return e?Ou(r,i,s):Hh(t.mode,r,i,s)}function Hh(t,e,r,i){return Ne.mkdirSync(r),Ou(e,r,i),Yi(r,t)}function Ou(t,e,r){const i=Ne.opendirSync(t);try{let s;for(;(s=i.readSync())!==null;)Gh(s.name,t,e,r)}finally{i.closeSync()}}function Gh(t,e,r,i){const s=Lt.join(e,t),n=Lt.join(r,t);if(i.filter&&!i.filter(s,n))return;const{destStat:o}=Mt.checkPathsSync(s,n,"copy",i);return bu(o,s,n,i)}function Yh(t,e,r,i){let s=Ne.readlinkSync(e);if(i.dereference&&(s=Lt.resolve(process.cwd(),s)),t){let n;try{n=Ne.readlinkSync(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return Ne.symlinkSync(s,r);throw o}if(i.dereference&&(n=Lt.resolve(process.cwd(),n)),Mt.isSrcSubdir(s,n))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${n}'.`);if(Mt.isSrcSubdir(n,s))throw new Error(`Cannot overwrite '${n}' with '${s}'.`);return Kh(s,r)}else return Ne.symlinkSync(s,r)}function Kh(t,e){return Ne.unlinkSync(e),Ne.symlinkSync(t,e)}var Jh=jh;const Qh=Ee.fromPromise;var Ki={copy:Qh($h),copySync:Jh};const Tu=Et,Zh=Ee.fromCallback;function ep(t,e){Tu.rm(t,{recursive:!0,force:!0},e)}function tp(t){Tu.rmSync(t,{recursive:!0,force:!0})}var br={remove:Zh(ep),removeSync:tp};const rp=Ee.fromPromise,Cu=Pe,Du=Q,Au=Ve,Fu=br,oa=rp(async function(e){let r;try{r=await Cu.readdir(e)}catch{return Au.mkdirs(e)}return Promise.all(r.map(i=>Fu.remove(Du.join(e,i))))});function sa(t){let e;try{e=Cu.readdirSync(t)}catch{return Au.mkdirsSync(t)}e.forEach(r=>{r=Du.join(t,r),Fu.removeSync(r)})}var np={emptyDirSync:sa,emptydirSync:sa,emptyDir:oa,emptydir:oa};const ip=Ee.fromPromise,_u=Q,Ge=Pe,xu=Ve;async function op(t){let e;try{e=await Ge.stat(t)}catch{}if(e&&e.isFile())return;const r=_u.dirname(t);let i=null;try{i=await Ge.stat(r)}catch(s){if(s.code==="ENOENT"){await xu.mkdirs(r),await Ge.writeFile(t,"");return}else throw s}i.isDirectory()?await Ge.writeFile(t,""):await Ge.readdir(r)}function sp(t){let e;try{e=Ge.statSync(t)}catch{}if(e&&e.isFile())return;const r=_u.dirname(t);try{Ge.statSync(r).isDirectory()||Ge.readdirSync(r)}catch(i){if(i&&i.code==="ENOENT")xu.mkdirsSync(r);else throw i}Ge.writeFileSync(t,"")}var ap={createFile:ip(op),createFileSync:sp};const up=Ee.fromPromise,Nu=Q,rt=Pe,Iu=Ve,{pathExists:cp}=ht,{areIdentical:Pu}=bt;async function lp(t,e){let r;try{r=await rt.lstat(e)}catch{}let i;try{i=await rt.lstat(t)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}if(r&&Pu(i,r))return;const s=Nu.dirname(e);await cp(s)||await Iu.mkdirs(s),await rt.link(t,e)}function fp(t,e){let r;try{r=rt.lstatSync(e)}catch{}try{const n=rt.lstatSync(t);if(r&&Pu(n,r))return}catch(n){throw n.message=n.message.replace("lstat","ensureLink"),n}const i=Nu.dirname(e);return rt.existsSync(i)||Iu.mkdirsSync(i),rt.linkSync(t,e)}var hp={createLink:up(lp),createLinkSync:fp};const it=Q,_t=Pe,{pathExists:pp}=ht,dp=Ee.fromPromise;async function mp(t,e){if(it.isAbsolute(t)){try{await _t.lstat(t)}catch(n){throw n.message=n.message.replace("lstat","ensureSymlink"),n}return{toCwd:t,toDst:t}}const r=it.dirname(e),i=it.join(r,t);if(await pp(i))return{toCwd:i,toDst:t};try{await _t.lstat(t)}catch(n){throw n.message=n.message.replace("lstat","ensureSymlink"),n}return{toCwd:t,toDst:it.relative(r,t)}}function yp(t,e){if(it.isAbsolute(t)){if(!_t.existsSync(t))throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}const r=it.dirname(e),i=it.join(r,t);if(_t.existsSync(i))return{toCwd:i,toDst:t};if(!_t.existsSync(t))throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:it.relative(r,t)}}var gp={symlinkPaths:dp(mp),symlinkPathsSync:yp};const Lu=Pe,vp=Ee.fromPromise;async function wp(t,e){if(e)return e;let r;try{r=await Lu.lstat(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}function Ep(t,e){if(e)return e;let r;try{r=Lu.lstatSync(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}var bp={symlinkType:vp(wp),symlinkTypeSync:Ep};const Sp=Ee.fromPromise,Mu=Q,Xe=Pe,{mkdirs:Op,mkdirsSync:Tp}=Ve,{symlinkPaths:Cp,symlinkPathsSync:Dp}=gp,{symlinkType:Ap,symlinkTypeSync:Fp}=bp,{pathExists:_p}=ht,{areIdentical:$u}=bt;async function xp(t,e,r){let i;try{i=await Xe.lstat(e)}catch{}if(i&&i.isSymbolicLink()){const[a,u]=await Promise.all([Xe.stat(t),Xe.stat(e)]);if($u(a,u))return}const s=await Cp(t,e);t=s.toDst;const n=await Ap(s.toCwd,r),o=Mu.dirname(e);return await _p(o)||await Op(o),Xe.symlink(t,e,n)}function Np(t,e,r){let i;try{i=Xe.lstatSync(e)}catch{}if(i&&i.isSymbolicLink()){const a=Xe.statSync(t),u=Xe.statSync(e);if($u(a,u))return}const s=Dp(t,e);t=s.toDst,r=Fp(s.toCwd,r);const n=Mu.dirname(e);return Xe.existsSync(n)||Tp(n),Xe.symlinkSync(t,e,r)}var Ip={createSymlink:Sp(xp),createSymlinkSync:Np};const{createFile:aa,createFileSync:ua}=ap,{createLink:ca,createLinkSync:la}=hp,{createSymlink:fa,createSymlinkSync:ha}=Ip;var Pp={createFile:aa,createFileSync:ua,ensureFile:aa,ensureFileSync:ua,createLink:ca,createLinkSync:la,ensureLink:ca,ensureLinkSync:la,createSymlink:fa,createSymlinkSync:ha,ensureSymlink:fa,ensureSymlinkSync:ha};function Lp(t,{EOL:e=`
`,finalEOL:r=!0,replacer:i=null,spaces:s}={}){const n=r?e:"";return JSON.stringify(t,i,s).replace(/\n/g,e)+n}function Mp(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}var Ji={stringify:Lp,stripBom:Mp};let gt;try{gt=Et}catch{gt=ae}const Sr=Ee,{stringify:Ru,stripBom:ku}=Ji;async function $p(t,e={}){typeof e=="string"&&(e={encoding:e});const r=e.fs||gt,i="throws"in e?e.throws:!0;let s=await Sr.fromCallback(r.readFile)(t,e);s=ku(s);let n;try{n=JSON.parse(s,e?e.reviver:null)}catch(o){if(i)throw o.message=`${t}: ${o.message}`,o;return null}return n}const Rp=Sr.fromPromise($p);function kp(t,e={}){typeof e=="string"&&(e={encoding:e});const r=e.fs||gt,i="throws"in e?e.throws:!0;try{let s=r.readFileSync(t,e);return s=ku(s),JSON.parse(s,e.reviver)}catch(s){if(i)throw s.message=`${t}: ${s.message}`,s;return null}}async function jp(t,e,r={}){const i=r.fs||gt,s=Ru(e,r);await Sr.fromCallback(i.writeFile)(t,s,r)}const qp=Sr.fromPromise(jp);function Bp(t,e,r={}){const i=r.fs||gt,s=Ru(e,r);return i.writeFileSync(t,s,r)}const Up={readFile:Rp,readFileSync:kp,writeFile:qp,writeFileSync:Bp};var Xp=Up;const Qt=Xp;var Vp={readJson:Qt.readFile,readJsonSync:Qt.readFileSync,writeJson:Qt.writeFile,writeJsonSync:Qt.writeFileSync};const zp=Ee.fromPromise,bi=Pe,ju=Q,qu=Ve,Wp=ht.pathExists;async function Hp(t,e,r="utf-8"){const i=ju.dirname(t);return await Wp(i)||await qu.mkdirs(i),bi.writeFile(t,e,r)}function Gp(t,...e){const r=ju.dirname(t);bi.existsSync(r)||qu.mkdirsSync(r),bi.writeFileSync(t,...e)}var Qi={outputFile:zp(Hp),outputFileSync:Gp};const{stringify:Yp}=Ji,{outputFile:Kp}=Qi;async function Jp(t,e,r={}){const i=Yp(e,r);await Kp(t,i,r)}var Qp=Jp;const{stringify:Zp}=Ji,{outputFileSync:ed}=Qi;function td(t,e,r){const i=Zp(e,r);ed(t,i,r)}var rd=td;const nd=Ee.fromPromise,Ie=Vp;Ie.outputJson=nd(Qp);Ie.outputJsonSync=rd;Ie.outputJSON=Ie.outputJson;Ie.outputJSONSync=Ie.outputJsonSync;Ie.writeJSON=Ie.writeJson;Ie.writeJSONSync=Ie.writeJsonSync;Ie.readJSON=Ie.readJson;Ie.readJSONSync=Ie.readJsonSync;var id=Ie;const od=Pe,pa=Q,{copy:sd}=Ki,{remove:Bu}=br,{mkdirp:ad}=Ve,{pathExists:ud}=ht,da=bt;async function cd(t,e,r={}){const i=r.overwrite||r.clobber||!1,{srcStat:s,isChangingCase:n=!1}=await da.checkPaths(t,e,"move",r);await da.checkParentPaths(t,s,e,"move");const o=pa.dirname(e);return pa.parse(o).root!==o&&await ad(o),ld(t,e,i,n)}async function ld(t,e,r,i){if(!i){if(r)await Bu(e);else if(await ud(e))throw new Error("dest already exists.")}try{await od.rename(t,e)}catch(s){if(s.code!=="EXDEV")throw s;await fd(t,e,r)}}async function fd(t,e,r){return await sd(t,e,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),Bu(t)}var hd=cd;const Uu=Et,Si=Q,pd=Ki.copySync,Xu=br.removeSync,dd=Ve.mkdirpSync,ma=bt;function md(t,e,r){r=r||{};const i=r.overwrite||r.clobber||!1,{srcStat:s,isChangingCase:n=!1}=ma.checkPathsSync(t,e,"move",r);return ma.checkParentPathsSync(t,s,e,"move"),yd(e)||dd(Si.dirname(e)),gd(t,e,i,n)}function yd(t){const e=Si.dirname(t);return Si.parse(e).root===e}function gd(t,e,r,i){if(i)return hi(t,e,r);if(r)return Xu(e),hi(t,e,r);if(Uu.existsSync(e))throw new Error("dest already exists.");return hi(t,e,r)}function hi(t,e,r){try{Uu.renameSync(t,e)}catch(i){if(i.code!=="EXDEV")throw i;return vd(t,e,r)}}function vd(t,e,r){return pd(t,e,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),Xu(t)}var wd=md;const Ed=Ee.fromPromise;var bd={move:Ed(hd),moveSync:wd},Sd={...Pe,...Ki,...np,...Pp,...id,...Ve,...bd,...Qi,...ht,...br};const Od=vt(Sd);function Td(){const t=!oe.app.isPackaged;se.initialize({preload:!0,spyRendererConsole:t});const e=Q.join(ft(),"logs"),r=Q.join(e,"app.log");Od.ensureDirSync(e),se.transports.file.level=t?"debug":"info",se.transports.file.resolvePathFn=()=>r,se.transports.file.maxSize=10*1024*1024,t&&(se.transports.console.level="debug",se.transports.file.format="[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}] {text}"),console.log(`[Logger] 日志文件路径: ${r}`)}var Vu={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(ne,function(){var r=1e3,i=6e4,s=36e5,n="millisecond",o="second",a="minute",u="hour",h="day",c="week",f="month",l="quarter",d="year",y="date",w="Invalid Date",O=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(B){var q=["th","st","nd","rd"],z=B%100;return"["+B+(q[(z-20)%10]||q[z]||q[0])+"]"}},g=function(B,q,z){var W=String(B);return!W||W.length>=q?B:""+Array(q+1-W.length).join(z)+B},D={s:g,z:function(B){var q=-B.utcOffset(),z=Math.abs(q),W=Math.floor(z/60),K=z%60;return(q<=0?"+":"-")+g(W,2,"0")+":"+g(K,2,"0")},m:function B(q,z){if(q.date()<z.date())return-B(z,q);var W=12*(z.year()-q.year())+(z.month()-q.month()),K=q.clone().add(W,f),J=z-K<0,Z=q.clone().add(W+(J?-1:1),f);return+(-(W+(z-K)/(J?K-Z:Z-K))||0)},a:function(B){return B<0?Math.ceil(B)||0:Math.floor(B)},p:function(B){return{M:f,y:d,w:c,d:h,D:y,h:u,m:a,s:o,ms:n,Q:l}[B]||String(B||"").toLowerCase().replace(/s$/,"")},u:function(B){return B===void 0}},A="en",v={};v[A]=E;var C="$isDayjsObject",T=function(B){return B instanceof P||!(!B||!B[C])},p=function B(q,z,W){var K;if(!q)return A;if(typeof q=="string"){var J=q.toLowerCase();v[J]&&(K=J),z&&(v[J]=z,K=J);var Z=q.split("-");if(!K&&Z.length>1)return B(Z[0])}else{var re=q.name;v[re]=q,K=re}return!W&&K&&(A=K),K||!W&&A},b=function(B,q){if(T(B))return B.clone();var z=typeof q=="object"?q:{};return z.date=B,z.args=arguments,new P(z)},F=D;F.l=p,F.i=T,F.w=function(B,q){return b(B,{locale:q.$L,utc:q.$u,x:q.$x,$offset:q.$offset})};var P=function(){function B(z){this.$L=p(z.locale,null,!0),this.parse(z),this.$x=this.$x||z.x||{},this[C]=!0}var q=B.prototype;return q.parse=function(z){this.$d=function(W){var K=W.date,J=W.utc;if(K===null)return new Date(NaN);if(F.u(K))return new Date;if(K instanceof Date)return new Date(K);if(typeof K=="string"&&!/Z$/i.test(K)){var Z=K.match(O);if(Z){var re=Z[2]-1||0,ue=(Z[7]||"0").substring(0,3);return J?new Date(Date.UTC(Z[1],re,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,ue)):new Date(Z[1],re,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,ue)}}return new Date(K)}(z),this.init()},q.init=function(){var z=this.$d;this.$y=z.getFullYear(),this.$M=z.getMonth(),this.$D=z.getDate(),this.$W=z.getDay(),this.$H=z.getHours(),this.$m=z.getMinutes(),this.$s=z.getSeconds(),this.$ms=z.getMilliseconds()},q.$utils=function(){return F},q.isValid=function(){return this.$d.toString()!==w},q.isSame=function(z,W){var K=b(z);return this.startOf(W)<=K&&K<=this.endOf(W)},q.isAfter=function(z,W){return b(z)<this.startOf(W)},q.isBefore=function(z,W){return this.endOf(W)<b(z)},q.$g=function(z,W,K){return F.u(z)?this[W]:this.set(K,z)},q.unix=function(){return Math.floor(this.valueOf()/1e3)},q.valueOf=function(){return this.$d.getTime()},q.startOf=function(z,W){var K=this,J=!!F.u(W)||W,Z=F.p(z),re=function(H,m){var N=F.w(K.$u?Date.UTC(K.$y,m,H):new Date(K.$y,m,H),K);return J?N:N.endOf(h)},ue=function(H,m){return F.w(K.toDate()[H].apply(K.toDate("s"),(J?[0,0,0,0]:[23,59,59,999]).slice(m)),K)},pe=this.$W,Y=this.$M,ve=this.$D,Re="set"+(this.$u?"UTC":"");switch(Z){case d:return J?re(1,0):re(31,11);case f:return J?re(1,Y):re(0,Y+1);case c:var _=this.$locale().weekStart||0,S=(pe<_?pe+7:pe)-_;return re(J?ve-S:ve+(6-S),Y);case h:case y:return ue(Re+"Hours",0);case u:return ue(Re+"Minutes",1);case a:return ue(Re+"Seconds",2);case o:return ue(Re+"Milliseconds",3);default:return this.clone()}},q.endOf=function(z){return this.startOf(z,!1)},q.$set=function(z,W){var K,J=F.p(z),Z="set"+(this.$u?"UTC":""),re=(K={},K[h]=Z+"Date",K[y]=Z+"Date",K[f]=Z+"Month",K[d]=Z+"FullYear",K[u]=Z+"Hours",K[a]=Z+"Minutes",K[o]=Z+"Seconds",K[n]=Z+"Milliseconds",K)[J],ue=J===h?this.$D+(W-this.$W):W;if(J===f||J===d){var pe=this.clone().set(y,1);pe.$d[re](ue),pe.init(),this.$d=pe.set(y,Math.min(this.$D,pe.daysInMonth())).$d}else re&&this.$d[re](ue);return this.init(),this},q.set=function(z,W){return this.clone().$set(z,W)},q.get=function(z){return this[F.p(z)]()},q.add=function(z,W){var K,J=this;z=Number(z);var Z=F.p(W),re=function(Y){var ve=b(J);return F.w(ve.date(ve.date()+Math.round(Y*z)),J)};if(Z===f)return this.set(f,this.$M+z);if(Z===d)return this.set(d,this.$y+z);if(Z===h)return re(1);if(Z===c)return re(7);var ue=(K={},K[a]=i,K[u]=s,K[o]=r,K)[Z]||1,pe=this.$d.getTime()+z*ue;return F.w(pe,this)},q.subtract=function(z,W){return this.add(-1*z,W)},q.format=function(z){var W=this,K=this.$locale();if(!this.isValid())return K.invalidDate||w;var J=z||"YYYY-MM-DDTHH:mm:ssZ",Z=F.z(this),re=this.$H,ue=this.$m,pe=this.$M,Y=K.weekdays,ve=K.months,Re=K.meridiem,_=function(m,N,I,k){return m&&(m[N]||m(W,J))||I[N].slice(0,k)},S=function(m){return F.s(re%12||12,m,"0")},H=Re||function(m,N,I){var k=m<12?"AM":"PM";return I?k.toLowerCase():k};return J.replace(x,function(m,N){return N||function(I){switch(I){case"YY":return String(W.$y).slice(-2);case"YYYY":return F.s(W.$y,4,"0");case"M":return pe+1;case"MM":return F.s(pe+1,2,"0");case"MMM":return _(K.monthsShort,pe,ve,3);case"MMMM":return _(ve,pe);case"D":return W.$D;case"DD":return F.s(W.$D,2,"0");case"d":return String(W.$W);case"dd":return _(K.weekdaysMin,W.$W,Y,2);case"ddd":return _(K.weekdaysShort,W.$W,Y,3);case"dddd":return Y[W.$W];case"H":return String(re);case"HH":return F.s(re,2,"0");case"h":return S(1);case"hh":return S(2);case"a":return H(re,ue,!0);case"A":return H(re,ue,!1);case"m":return String(ue);case"mm":return F.s(ue,2,"0");case"s":return String(W.$s);case"ss":return F.s(W.$s,2,"0");case"SSS":return F.s(W.$ms,3,"0");case"Z":return Z}return null}(m)||Z.replace(":","")})},q.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},q.diff=function(z,W,K){var J,Z=this,re=F.p(W),ue=b(z),pe=(ue.utcOffset()-this.utcOffset())*i,Y=this-ue,ve=function(){return F.m(Z,ue)};switch(re){case d:J=ve()/12;break;case f:J=ve();break;case l:J=ve()/3;break;case c:J=(Y-pe)/6048e5;break;case h:J=(Y-pe)/864e5;break;case u:J=Y/s;break;case a:J=Y/i;break;case o:J=Y/r;break;default:J=Y}return K?J:F.a(J)},q.daysInMonth=function(){return this.endOf(f).$D},q.$locale=function(){return v[this.$L]},q.locale=function(z,W){if(!z)return this.$L;var K=this.clone(),J=p(z,W,!0);return J&&(K.$L=J),K},q.clone=function(){return F.w(this.$d,this)},q.toDate=function(){return new Date(this.valueOf())},q.toJSON=function(){return this.isValid()?this.toISOString():null},q.toISOString=function(){return this.$d.toISOString()},q.toString=function(){return this.$d.toUTCString()},B}(),U=P.prototype;return b.prototype=U,[["$ms",n],["$s",o],["$m",a],["$H",u],["$W",h],["$M",f],["$y",d],["$D",y]].forEach(function(B){U[B[1]]=function(q){return this.$g(q,B[0],B[1])}}),b.extend=function(B,q){return B.$i||(B(q,P,b),B.$i=!0),b},b.locale=p,b.isDayjs=T,b.unix=function(B){return b(1e3*B)},b.en=v[A],b.Ls=v,b.p={},b})})(Vu);var Cd=Vu.exports;const Dd=vt(Cd);function zu(t,e,r,i,s,n,o,a){const{fontFamily:u,fontSize:h,fontWeight:c,underline:f,italic:l,textAlign:d,customStyle:y}=e;let w=e.fontColor.replace("#",""),O="000000",x="000000",E={left:s==="subtitles"?1:7,center:s==="subtitles"?2:8,right:s==="subtitles"?3:9};const g=Fd(o,i),D=s==="subtitles"?`Scroll up;${g}`:"";let A=1,v=1,C=n/2,T=10;s==="subtitles"&&(C=n/2,T=o-10),y==="custom-style-1"?(v=2,O="1A1A1A",w="ffffff"):y==="custom-style-2"?(v=2,O="1A1A1A",w="627EE9"):y==="custom-style-3"?(v=2,O="1A1A1A",w="1A1A1A"):y==="custom-style-4"?(v=2,O="B463FE",w="B463FE"):y==="custom-style-5"?(v=2,O="FF9C20",w="FF9C20"):y==="custom-style-6"?(v=2,O="2278FF",w="2278FF"):y==="custom-style-7"?(A=3,v=2,O="1A1A1A",w="1A1A1A",x="FFE306"):y==="custom-style-8"?(v=2,O="1A1A1A",w="FAF5B0"):y==="custom-style-9"?(v=2,O="1A1A1A",w="FF9C20"):y==="custom-style-10"?(v=2,O="F09CAF",w="FFFFFF"):y==="custom-style-11"&&(v=2,O="F86F32",w="FDDC63");const p=`Style: ${a||s},Arial,${h},${pi(w)},&H000000FF&,${pi(O)},${pi(x)},${c==="bold"?1:0},${l?1:0},${f?1:0},0,100,100,0,0,${A},${v},0,${E[d]},0,0,0,0`,b=`Dialogue: 0,${ya(r)},${ya(r+i)},${a||s},,0,0,0,${D},{pos(${C},${T})}${t}`;return{style:p,dialogue:b}}function Ad(t,e,r,i,s){const n=i,o=s,a=e.join(`
`),u=r.join(`
`),h=`
[Script Info]
Title: Dynamic Subtitles
ScriptType: v4.00+
PlayResX: ${n}
PlayResY: ${o}
ScaledBorderAndShadow: yes
WrapStyle: 0

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
${a}

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
${u}
  `;ae.writeFileSync(t,h.trim())}function ya(t){const e=Math.floor(t/3600),r=Math.floor(t%3600/60),i=Math.floor(t%60),s=Math.floor((t-Math.floor(t))*100);return`${e}:${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}.${s.toString().padStart(2,"0")}`}function pi(t,e="00"){const r=`${t.slice(4,6)}${t.slice(2,4)}${t.slice(0,2)}`;return`&H${e}${r}&`}function Fd(t,e){return t*1.2/e}function _d(t,e,r,i,s){const n=xd(t),o=Nd(n,e),a=[];for(let u=0;u<o.length;u++){const h=o[u],c=`subtitles-${u}`,f=h.end-h.start,l=zu(h.text,r,h.start,f,"subtitles",i,s,c);a.push({style:l.style,dialogue:l.dialogue})}return a}function xd(t){const e=[],s=t.split(/([。！？；\n])/).filter(n=>n.trim());for(let n=0;n<s.length;n++){let o=s[n];if(o.length>15*1){const a=o.split(/([,，])/).filter(u=>u.trim());for(const u of a)if(u.length>15*1){const h=u.split(/\s+/);let c="";for(const f of h)c.length+f.length>15?(c&&e.push(c),c=f):c+=(c?" ":"")+f;c&&e.push(c)}else e.push(u)}else e.push(o)}return e}function Nd(t,e){const r=[],s=t.reduce((o,a)=>o+a.length,0)/e;let n=0;for(const o of t){const a=o.length/s,u=Math.min(n+a,e);r.push({text:o,start:n,end:u}),n=u,n<e&&(n+=.2)}return r}class Id{constructor(e){ie(this,"value");ie(this,"next");this.value=e}}var Le,st,at;class Pd{constructor(){jt(this,Le,void 0);jt(this,st,void 0);jt(this,at,void 0);this.clear()}enqueue(e){const r=new Id(e);ke(this,Le)?(ke(this,st).next=r,ze(this,st,r)):(ze(this,Le,r),ze(this,st,r)),Cr(this,at)._++}dequeue(){const e=ke(this,Le);if(e)return ze(this,Le,ke(this,Le).next),Cr(this,at)._--,e.value}peek(){if(ke(this,Le))return ke(this,Le).value}clear(){ze(this,Le,void 0),ze(this,st,void 0),ze(this,at,0)}get size(){return ke(this,at)}*[Symbol.iterator](){let e=ke(this,Le);for(;e;)yield e.value,e=e.next}*drain(){for(;ke(this,Le);)yield this.dequeue()}}Le=new WeakMap,st=new WeakMap,at=new WeakMap;function Ld(t){ga(t);const e=new Pd;let r=0;const i=()=>{r<t&&e.size>0&&(e.dequeue()(),r++)},s=()=>{r--,i()},n=async(u,h,c)=>{const f=(async()=>u(...c))();h(f);try{await f}catch{}s()},o=(u,h,c)=>{new Promise(f=>{e.enqueue(f)}).then(n.bind(void 0,u,h,c)),(async()=>(await Promise.resolve(),r<t&&i()))()},a=(u,...h)=>new Promise(c=>{o(u,c,h)});return Object.defineProperties(a,{activeCount:{get:()=>r},pendingCount:{get:()=>e.size},clearQueue:{value(){e.clear()}},concurrency:{get:()=>t,set(u){ga(u),t=u,queueMicrotask(()=>{for(;r<t&&e.size>0;)i()})}}}),a}function ga(t){if(!((Number.isInteger(t)||t===Number.POSITIVE_INFINITY)&&t>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up")}const Md=Ld(Math.max(1,Math.floor(require("os").cpus().length*.8)-1));async function $d(t){const{videoPath:e,audioPath:r,isOpenOriginAudio:i,startTime:s,currentDuration:n,outputPath:o,videoWidth:a,videoHeight:u,assFilePath:h}=t;return new Promise(async(c,f)=>{const l=Vi().input(e).input(r),d=[{filter:"trim",options:{start:s,duration:n},inputs:"0:v",outputs:"trimmed_video"},{filter:"setpts",options:"PTS-STARTPTS",inputs:"trimmed_video",outputs:"video_pts"},{filter:"scale",options:{w:a,h:u,force_original_aspect_ratio:"decrease",eval:"frame"},inputs:"video_pts",outputs:"scaled_video"},{filter:"pad",options:{width:a,height:u,x:"(ow-iw)/2",y:"(oh-ih)/2",color:"black"},inputs:"scaled_video",outputs:"padded_video"}],y=Yf();d.push({filter:"subtitles",options:{filename:`'${to(h)}'`,fontsdir:`'${to(y)}'`,original_size:`${a}x${u}`},inputs:"padded_video",outputs:"video_with_subtitles"});const w=[];let O="";i&&await Gf(e)?(w.push({filter:"atrim",options:{start:s,duration:n},inputs:"0:a",outputs:"trimmed_original"},{filter:"asetpts",options:"PTS-STARTPTS",inputs:"trimmed_original",outputs:"original_pts"},{filter:"volume",options:"1.0",inputs:"original_pts",outputs:"original_audio"},{filter:"atrim",options:{start:0,duration:n},inputs:"1:a",outputs:"trimmed_new"},{filter:"asetpts",options:"PTS-STARTPTS",inputs:"trimmed_new",outputs:"new_pts"},{filter:"volume",options:"1.0",inputs:"new_pts",outputs:"new_audio"},{filter:"amix",options:{inputs:2,duration:"longest"},inputs:["original_audio","new_audio"],outputs:"mixed_audio"}),O="mixed_audio"):(w.push({filter:"atrim",options:{start:0,duration:n},inputs:"1:a",outputs:"trimmed_new"},{filter:"asetpts",options:"PTS-STARTPTS",inputs:"trimmed_new",outputs:"new_pts"},{filter:"volume",options:"1.0",inputs:"new_pts",outputs:"new_audio"}),O="new_audio"),l.complexFilter([...d,...w]).outputOptions(["-map [video_with_subtitles]",`-map [${O}]`,"-c:v libx264","-c:a aac","-preset fast"]),l.on("start",x=>{console.log("start to execute command: "+x)}).on("progress",x=>{console.log(`processing: ${Math.round(x.percent)}%`)}).on("end",()=>{console.log(`segment process done: ${o}`),c()}).on("error",x=>{console.error(`segment process error: ${x.message}`),f(x)}).save(o)})}async function Rd(t,e,r,i){var A;const s=i.videoRatio,o=i.videoResolution.split("x").map(v=>parseInt(v)),a=s==="9:16"?o[0]:o[1],u=s==="9:16"?o[1]:o[0],h=t.zimuConfig.datas[0];if(!h.path){const v=t.zimuConfig.audioConfig,C=`${r}_${t.name}_${h.title}_${Dd().format("YYYYMMDDHHmmss")}`,T=await cu({text:h.text,voice:v.voice,speech_rate:v.speech_rate,volume:v.volume,pitch_rate:v.pitch_rate,outputFileName:C});h.path=T.outputFile,h.duration=T.duration}const c=h.path;let f=h.duration??await Nt(c);f=Math.ceil(f*100)/100;const l=t.videoList,d=t.isOpenOriginAudio??!0,y=[],w=`${r}_${t.name}_`,O=Q.join(e,`${r}_${t.name}.ass`),x=[],E=[],g=t.zimuConfig.datas[0],D=_d(g.text,f,t.zimuConfig.textConfig,a,u);if(x.push(...D.map(v=>v.style)),E.push(...D.map(v=>v.dialogue)),t.videoTitleConfig){const v=(A=t.videoTitleConfig)==null?void 0:A.datas[0],C=v.duration||f,T=zu(v.text,v.textConfig,v.start,C,"title",a,u,"title");x.push(T.style),E.push(T.dialogue)}Ad(O,x,E,a,u);for(const v of l){const C=v.path,T=v.duration??await Nt(C),p=f,b=Math.ceil(T/p),F=w+Q.basename(C,Q.extname(C));for(let P=0;P<b;P++){const U=P*p,B=v.duration-U,q=Math.min(p,B),z=Q.join(e,`${F}_part${P+1}_${U}-${U+q}.mp4`);y.push({videoPath:C,audioPath:c,outputPath:z,startTime:U,currentDuration:q,isOpenOriginAudio:d,videoWidth:a,videoHeight:u,assFilePath:O})}}return y}async function kd(t,e){return new Promise((r,i)=>{const s=Q.basename(e,Q.extname(e))+"_temp.txt";ae.writeFileSync(s,t.map(n=>`file '${n}'`).join(`
`)),Vi().input(s).inputFormat("concat").inputOptions(["-safe 0"]).outputOptions(["-c copy"]).on("start",n=>console.log("执行命令:",n)).on("progress",n=>console.log(`处理进度: ${Math.round(n.percent)}%`)).on("end",()=>{ae.unlinkSync(s),r()}).on("error",n=>{ae.unlinkSync(s),i(n)}).save(e)})}async function jd(t){var h;se.log("accept params："),se.log(JSON.stringify(t));const e=t.clips,r=t.outputFileName,i=t.globalConfig,s=i.outputDir||ft();for(const c of e)c.segments=await Rd(c,s,r,i);se.log("split clip to segments done："),se.log(JSON.stringify(e));const n=[];for(const c of e)n.push(...c.segments);se.info("segments:"),se.info(JSON.stringify(n));const o=n.map(c=>Md(()=>$d(c)));await Promise.all(o),se.log("segment process done："),se.log(JSON.stringify(n));let a=1;for(const c of e)(a===1||c.segments.length>1&&c.segments.length<a)&&(a=c.segments.length);se.log(`we can generate ${a} videos`);const u=[];for(let c=0;c<a;c++){const f=[];let l=0;for(const d of e){const y=d.segments;let w;y.length===1?w=y[0]:w=y[c],f.push(w.outputPath),l+=w.currentDuration}u.push({videos:f,outputPath:Q.join(s,`${r}_${c+1}.mp4`),duration:l})}se.log("合成视频开始:");for(let c=0;c<u.length;c++){const f=u[c];se.log(`开始合成视频: ${c+1}/${u.length}, 视频路径：${u[c].outputPath}`),se.log(JSON.stringify(f));try{const l=new Promise((w,O)=>{setTimeout(()=>{O(new Error("视频合成操作超时（5分钟）"))},3e5)}),d=kd(f.videos,f.outputPath);await Promise.race([d,l]),se.log(`成功合成视频:${c+1}/${u.length}`);const y=(h=i.backgroundAudioConfig)==null?void 0:h.audio.path;if(y&&ae.existsSync(y)){const w=Q.join(s,`${r}_${c+1}_bg.mp4`);se.log(`开始为视频添加背景音乐:${f.outputPath}`),await qd(f.outputPath,i.backgroundAudioConfig,w),u[c].outputPath=w}}catch(l){se.error(l),se.error(`合成视频失败:${c+1}/${u.length}`)}}return se.log("合成视频结束"),u.map(c=>({outputPath:c.outputPath,duration:c.duration}))}function qd(t,e,r){return new Promise((i,s)=>{const n=e.audio.path,o=e.volume/100,a=Vi().input(t).input(n).inputOptions(["-stream_loop -1"]),u=[{filter:"volume",options:o,inputs:"1:a",outputs:"scaled_audio"},{filter:"amix",options:{inputs:2,duration:"first"},inputs:["0:a","scaled_audio"],outputs:["mixed"]}];a.complexFilter(u).outputOptions(["-map 0:v","-map [mixed]","-c:v copy","-shortest"]).on("start",h=>console.log("开始添加背景音乐，执行命令:",h)).on("progress",h=>console.log(`处理进度: ${Math.round(h.percent)}%`)).on("end",()=>{console.log("背景音乐添加成功"),ae.unlinkSync(t),i(r)}).on("error",h=>{console.error("背景音乐添加失败:",h),s(h)}).save(r)})}function Bd(){oe.ipcMain.handle("video-mix-and-cut",async(t,e)=>{const r=JSON.parse(nr(e));return jd(r)}),oe.ipcMain.handle("get-media-duration",async(t,e)=>{const r=JSON.parse(nr(e));return Nt(r.path)})}const rr=Q.join(ft(),"config.json"),Ud={lastOpenedDirectory:ft()};function Wu(){try{ae.existsSync(rr)||ae.writeFileSync(rr,JSON.stringify(Ud,null,2));const t=ae.readFileSync(rr,"utf-8");return JSON.parse(t)}catch{return}}function Xd(t){const e=Wu();return Hd(e,t)}function Vd(t,e){const r=Wu();Gd(r,t,e),ae.writeFileSync(rr,JSON.stringify(r,null,2))}function zd(){let t;try{if(t=Xd("lastOpenedDirectory"),!t&&ae.existsSync(t))return t}catch{return ft()}}function Wd(t){Vd("lastOpenedDirectory",t)}function Hd(t,e){return e.split(".").reduce((r,i)=>r&&r[i]!==void 0?r[i]:void 0,t)}function Gd(t,e,r){const i=e.split(".");let s=t;for(let n=0;n<i.length-1;n++){const o=i[n];s[o]||(s[o]={}),s=s[o]}s[i[i.length-1]]=r}function Yd(t){oe.ipcMain.handle("open-file-dialog",async(e,r)=>{if(!t)return null;const i=(r==null?void 0:r.defaultPath)||zd(),s=(r==null?void 0:r.properties)||["openFile"],n=(r==null?void 0:r.title)||"选择文件",o=(r==null?void 0:r.buttonLabel)||"选择",a=(r==null?void 0:r.filters)||[{name:"All Files",extensions:["*"]}];r!=null&&r.multiple&&!s.includes("multiSelections")&&s.push("multiSelections");const u=await oe.dialog.showOpenDialog(t,{title:n,defaultPath:i,buttonLabel:o,filters:a,properties:s});if(u.canceled)return[];{const h=Q.dirname(u.filePaths[0]);Wd(h);const c=u.filePaths.map(async f=>{const l=await Nt(f),d=`media://${encodeURIComponent(f)}`;return{path:Q.normalize(f),name:Q.basename(f),ext:Q.extname(f),mimeType:Zt(f),duration:l,url:d}});return await Promise.all(c)}})}async function Kd(t){const e=Q.normalize(t);if(e!==t||e.includes(".."))return!1;try{return await ae.promises.access(e,ae.constants.R_OK),!0}catch{return!1}}function Jd(){oe.protocol.handle("media",async t=>{try{const e=t.url.slice(8),r=decodeURIComponent(e).replace(/\//g,"\\").replace(/^\\/,""),i=Q.normalize(r);if(!await Kd(i))return new Response("Access Denied",{status:403});const s=await ae.promises.stat(i);if(!s.isFile())return new Response("Not a file",{status:400});const n=t.headers.get("range"),o=s.size,a={"Content-Type":Zt(i),"Cache-Control":"public, max-age=31536000"};if(n){const u=n.replace(/bytes=/,"").split("-"),h=parseInt(u[0],10),c=u[1]?parseInt(u[1],10):o-1,f=c-h+1,l=ae.createReadStream(i,{start:h,end:c}),d=eo(l);return new Response(d,{status:206,headers:{"Content-Range":`bytes ${h}-${c}/${o}`,"Accept-Ranges":"bytes","Content-Length":f.toString(),"Content-Type":await Zt(i),"Cache-Control":"public, max-age=31536000"}})}else{const u=ae.createReadStream(i),h=eo(u);return new Response(h,{headers:{"Content-Length":o.toString(),"Content-Type":await Zt(i),"Cache-Control":"public, max-age=31536000"}})}}catch{return new Response("Not Found",{status:404})}})}function Qd(t){oe.globalShortcut.register("CommandOrControl+R",()=>{t&&t.reload()})}function Zd(){oe.ipcMain.on("window-control",(t,e)=>{const r=oe.BrowserWindow.fromWebContents(t.sender);if(r)switch(e){case"minimize":r.minimize();break;case"maximize":r.isMaximized()?r.unmaximize():r.maximize();break;case"close":r.close();break}})}function em(){const t=Ye.totalmem(),e=Math.floor(t/(1024*1024)/2),i=Math.max(e,4096);console.log(`System total memory: ${(t/(1024*1024*1024)).toFixed(2)}GB`),console.log(`Setting memory limit to: ${i}MB (${(i/1024).toFixed(2)}GB)`),oe.app.commandLine.appendSwitch("js-flags",`--max-old-space-size=${i}`)}global.crypto=eh;process.env.LANG="zh_CN.UTF-8";process.env.LC_ALL="zh_CN.UTF-8";process.platform==="win32"&&(process.env.CHCP="65001");process.env.DIST=Q.join(__dirname,"../dist");process.env.VITE_PUBLIC=oe.app.isPackaged?process.env.DIST:Q.join(process.env.DIST,"../public");em();let Be;const va=process.env.VITE_DEV_SERVER_URL;function Hu(){Be=new oe.BrowserWindow({icon:Q.join(process.env.VITE_PUBLIC,"vite.svg"),webPreferences:{nodeIntegration:!0,contextIsolation:!0,preload:Q.join(__dirname,"preload.js")},autoHideMenuBar:!0}),Be.webContents.on("did-finish-load",()=>{Be==null||Be.webContents.send("main-process-message",new Date().toLocaleString())}),va?Be.loadURL(va):Be.loadFile(Q.join(process.env.DIST,"index.html"))}Td();nc();ic();Qf();Jf();Bd();oe.app.whenReady().then(()=>{uu(),Hf(),Jd(),Hu(),Yd(Be),Qd(Be),Zd()});oe.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(oe.app.quit(),Be=null)});oe.app.on("activate",()=>{oe.BrowserWindow.getAllWindows().length===0&&Hu()});oe.app.on("will-quit",()=>{oe.globalShortcut.unregisterAll()});
//# sourceMappingURL=main.js.map
