"use strict";var Pu=Object.defineProperty;var Lu=(t,e,r)=>e in t?Pu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ee=(t,e,r)=>(Lu(t,typeof e!="symbol"?e+"":e,r),r);const re=require("electron"),J=require("path"),Ft=require("child_process"),et=require("os"),ce=require("fs"),ht=require("util"),nt=require("events"),tr=require("http"),rr=require("https"),Mu=require("ws"),nr=require("assert"),Ru=require("zlib"),mi=require("url"),yi=require("tty"),Le=require("crypto"),$u=require("querystring"),ku=require("string_decoder"),ju=require("timers"),ua=require("stream"),qu=require("constants");function Bu(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const vr=Bu(ce);function Uu(){re.ipcMain.handle("show-save-dialog",async(t,e)=>await re.dialog.showSaveDialog({title:e.title||"保存文件",defaultPath:e.defaultPath||re.app.getPath("documents"),filters:e.filters||[{name:"MP4 Videos",extensions:["mp4"]},{name:"All Files",extensions:["*"]}]})),re.ipcMain.handle("select-directory",async()=>{const t=await re.dialog.showOpenDialog({properties:["openDirectory"],title:"选择保存目录",defaultPath:re.app.getPath("documents")});return!t.canceled&&t.filePaths.length>0?t.filePaths[0]:null})}function Xu(){re.ipcMain.handle("open-file",async(t,e)=>{const{shell:r}=require("electron");await r.openPath(e)})}var Z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Vu(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),r}var Gt={exports:{}},wr={exports:{}},zi;function ca(){return zi||(zi=1,function(t){let e={};try{e=require("electron")}catch{}e.ipcRenderer&&r(e),t.exports=r;function r({contextBridge:i,ipcRenderer:s}){if(!s)return;s.on("__ELECTRON_LOG_IPC__",(o,a)=>{window.postMessage({cmd:"message",...a})}),s.invoke("__ELECTRON_LOG__",{cmd:"getOptions"}).catch(o=>console.error(new Error(`electron-log isn't initialized in the main process. Please call log.initialize() before. ${o.message}`)));const n={sendToMain(o){try{s.send("__ELECTRON_LOG__",o)}catch(a){console.error("electronLog.sendToMain ",a,"data:",o),s.send("__ELECTRON_LOG__",{cmd:"errorHandler",error:{message:a==null?void 0:a.message,stack:a==null?void 0:a.stack},errorName:"sendToMain"})}},log(...o){n.sendToMain({data:o,level:"info"})}};for(const o of["error","warn","info","verbose","debug","silly"])n[o]=(...a)=>n.sendToMain({data:a,level:o});if(i&&process.contextIsolated)try{i.exposeInMainWorld("__electronLog",n)}catch{}typeof window=="object"?window.__electronLog=n:__electronLog=n}}(wr)),wr.exports}var Er={exports:{}},br,Wi;function zu(){if(Wi)return br;Wi=1,br=t;function t(e){return Object.defineProperties(r,{defaultLabel:{value:"",writable:!0},labelPadding:{value:!0,writable:!0},maxLabelLength:{value:0,writable:!0},labelLength:{get(){switch(typeof r.labelPadding){case"boolean":return r.labelPadding?r.maxLabelLength:0;case"number":return r.labelPadding;default:return 0}}}});function r(i){r.maxLabelLength=Math.max(r.maxLabelLength,i.length);const s={};for(const n of e.levels)s[n]=(...o)=>e.logData(o,{level:n,scope:i});return s.log=s.info,s}}return br}var Sr,Hi;function Wu(){if(Hi)return Sr;Hi=1;class t{constructor({processMessage:r}){this.processMessage=r,this.buffer=[],this.enabled=!1,this.begin=this.begin.bind(this),this.commit=this.commit.bind(this),this.reject=this.reject.bind(this)}addMessage(r){this.buffer.push(r)}begin(){this.enabled=[]}commit(){this.enabled=!1,this.buffer.forEach(r=>this.processMessage(r)),this.buffer=[]}reject(){this.enabled=!1,this.buffer=[]}}return Sr=t,Sr}var Or,Gi;function la(){if(Gi)return Or;Gi=1;const t=zu(),e=Wu(),i=class i{constructor({allowUnknownLevel:n=!1,dependencies:o={},errorHandler:a,eventLogger:u,initializeFn:f,isDev:c=!1,levels:h=["error","warn","info","verbose","debug","silly"],logId:l,transportFactories:d={},variables:g}={}){ee(this,"dependencies",{});ee(this,"errorHandler",null);ee(this,"eventLogger",null);ee(this,"functions",{});ee(this,"hooks",[]);ee(this,"isDev",!1);ee(this,"levels",null);ee(this,"logId",null);ee(this,"scope",null);ee(this,"transports",{});ee(this,"variables",{});this.addLevel=this.addLevel.bind(this),this.create=this.create.bind(this),this.initialize=this.initialize.bind(this),this.logData=this.logData.bind(this),this.processMessage=this.processMessage.bind(this),this.allowUnknownLevel=n,this.buffering=new e(this),this.dependencies=o,this.initializeFn=f,this.isDev=c,this.levels=h,this.logId=l,this.scope=t(this),this.transportFactories=d,this.variables=g||{};for(const w of this.levels)this.addLevel(w,!1);this.log=this.info,this.functions.log=this.log,this.errorHandler=a,a==null||a.setOptions({...o,logFn:this.error}),this.eventLogger=u,u==null||u.setOptions({...o,logger:this});for(const[w,O]of Object.entries(d))this.transports[w]=O(this,o);i.instances[l]=this}static getInstance({logId:n}){return this.instances[n]||this.instances.default}addLevel(n,o=this.levels.length){o!==!1&&this.levels.splice(o,0,n),this[n]=(...a)=>this.logData(a,{level:n}),this.functions[n]=this[n]}catchErrors(n){return this.processMessage({data:["log.catchErrors is deprecated. Use log.errorHandler instead"],level:"warn"},{transports:["console"]}),this.errorHandler.startCatching(n)}create(n){return typeof n=="string"&&(n={logId:n}),new i({dependencies:this.dependencies,errorHandler:this.errorHandler,initializeFn:this.initializeFn,isDev:this.isDev,transportFactories:this.transportFactories,variables:{...this.variables},...n})}compareLevels(n,o,a=this.levels){const u=a.indexOf(n),f=a.indexOf(o);return f===-1||u===-1?!0:f<=u}initialize(n={}){this.initializeFn({logger:this,...this.dependencies,...n})}logData(n,o={}){this.buffering.enabled?this.buffering.addMessage({data:n,date:new Date,...o}):this.processMessage({data:n,...o})}processMessage(n,{transports:o=this.transports}={}){if(n.cmd==="errorHandler"){this.errorHandler.handle(n.error,{errorName:n.errorName,processType:"renderer",showDialog:!!n.showDialog});return}let a=n.level;this.allowUnknownLevel||(a=this.levels.includes(n.level)?n.level:"info");const u={date:new Date,logId:this.logId,...n,level:a,variables:{...this.variables,...n.variables}};for(const[f,c]of this.transportEntries(o))if(!(typeof c!="function"||c.level===!1)&&this.compareLevels(c.level,n.level))try{const h=this.hooks.reduce((l,d)=>l&&d(l,c,f),u);h&&c({...h,data:[...h.data]})}catch(h){this.processInternalErrorFn(h)}}processInternalErrorFn(n){}transportEntries(n=this.transports){return(Array.isArray(n)?n:Object.entries(n)).map(a=>{switch(typeof a){case"string":return this.transports[a]?[a,this.transports[a]]:null;case"function":return[a.name,a];default:return Array.isArray(a)?a:null}}).filter(Boolean)}};ee(i,"instances",{});let r=i;return Or=r,Or}var Tr,Ki;function Hu(){if(Ki)return Tr;Ki=1;const t=console.error;class e{constructor({logFn:i=null}={}){ee(this,"logFn",null);ee(this,"onError",null);ee(this,"showDialog",!1);ee(this,"preventDefault",!0);this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.startCatching=this.startCatching.bind(this),this.logFn=i}handle(i,{logFn:s=this.logFn,errorName:n="",onError:o=this.onError,showDialog:a=this.showDialog}={}){try{(o==null?void 0:o({error:i,errorName:n,processType:"renderer"}))!==!1&&s({error:i,errorName:n,showDialog:a})}catch{t(i)}}setOptions({logFn:i,onError:s,preventDefault:n,showDialog:o}){typeof i=="function"&&(this.logFn=i),typeof s=="function"&&(this.onError=s),typeof n=="boolean"&&(this.preventDefault=n),typeof o=="boolean"&&(this.showDialog=o)}startCatching({onError:i,showDialog:s}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:i,showDialog:s}),window.addEventListener("error",n=>{var o;this.preventDefault&&((o=n.preventDefault)==null||o.call(n)),this.handleError(n.error||n)}),window.addEventListener("unhandledrejection",n=>{var o;this.preventDefault&&((o=n.preventDefault)==null||o.call(n)),this.handleRejection(n.reason||n)}))}handleError(i){this.handle(i,{errorName:"Unhandled"})}handleRejection(i){const s=i instanceof Error?i:new Error(JSON.stringify(i));this.handle(s,{errorName:"Unhandled rejection"})}}return Tr=e,Tr}var Cr,Yi;function it(){if(Yi)return Cr;Yi=1,Cr={transform:t};function t({logger:e,message:r,transport:i,initialData:s=(r==null?void 0:r.data)||[],transforms:n=i==null?void 0:i.transforms}){return n.reduce((o,a)=>typeof a=="function"?a({data:o,logger:e,message:r,transport:i}):o,s)}return Cr}var Dr,Ji;function Gu(){if(Ji)return Dr;Ji=1;const{transform:t}=it();Dr=r;const e={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};function r(s){return Object.assign(n,{format:"{h}:{i}:{s}.{ms}{scope} › {text}",transforms:[i],writeFn({message:{level:o,data:a}}){const u=e[o]||e.info;setTimeout(()=>u(...a))}});function n(o){n.writeFn({message:{...o,data:t({logger:s,message:o,transport:n})}})}}function i({data:s=[],logger:n={},message:o={},transport:a={}}){if(typeof a.format=="function")return a.format({data:s,level:(o==null?void 0:o.level)||"info",logger:n,message:o,transport:a});if(typeof a.format!="string")return s;s.unshift(a.format),typeof s[1]=="string"&&s[1].match(/%[1cdfiOos]/)&&(s=[`${s[0]}${s[1]}`,...s.slice(2)]);const u=o.date||new Date;return s[0]=s[0].replace(/\{(\w+)}/g,(f,c)=>{var h,l;switch(c){case"level":return o.level;case"logId":return o.logId;case"scope":{const d=o.scope||((h=n.scope)==null?void 0:h.defaultLabel);return d?` (${d})`:""}case"text":return"";case"y":return u.getFullYear().toString(10);case"m":return(u.getMonth()+1).toString(10).padStart(2,"0");case"d":return u.getDate().toString(10).padStart(2,"0");case"h":return u.getHours().toString(10).padStart(2,"0");case"i":return u.getMinutes().toString(10).padStart(2,"0");case"s":return u.getSeconds().toString(10).padStart(2,"0");case"ms":return u.getMilliseconds().toString(10).padStart(3,"0");case"iso":return u.toISOString();default:return((l=o.variables)==null?void 0:l[c])||f}}).trim(),s}return Dr}var _r,Qi;function Ku(){if(Qi)return _r;Qi=1;const{transform:t}=it();_r=r;const e=new Set([Promise,WeakMap,WeakSet]);function r(n){return Object.assign(o,{depth:5,transforms:[s]});function o(a){if(!window.__electronLog){n.processMessage({data:["electron-log: logger isn't initialized in the main process"],level:"error"},{transports:["console"]});return}try{const u=t({initialData:a,logger:n,message:a,transport:o});__electronLog.sendToMain(u)}catch(u){n.transports.console({data:["electronLog.transports.ipc",u,"data:",a.data],level:"error"})}}}function i(n){return Object(n)!==n}function s({data:n,depth:o,seen:a=new WeakSet,transport:u={}}={}){const f=o||u.depth||5;return a.has(n)?"[Circular]":f<1?i(n)?n:Array.isArray(n)?"[Array]":`[${typeof n}]`:["function","symbol"].includes(typeof n)?n.toString():i(n)?n:e.has(n.constructor)?`[${n.constructor.name}]`:Array.isArray(n)?n.map(c=>s({data:c,depth:f-1,seen:a})):n instanceof Date?n.toISOString():n instanceof Error?n.stack:n instanceof Map?new Map(Array.from(n).map(([c,h])=>[s({data:c,depth:f-1,seen:a}),s({data:h,depth:f-1,seen:a})])):n instanceof Set?new Set(Array.from(n).map(c=>s({data:c,depth:f-1,seen:a}))):(a.add(n),Object.fromEntries(Object.entries(n).map(([c,h])=>[c,s({data:h,depth:f-1,seen:a})])))}return _r}var Zi;function Yu(){return Zi||(Zi=1,function(t){const e=la(),r=Hu(),i=Gu(),s=Ku();t.exports=n(),t.exports.Logger=e,t.exports.default=t.exports;function n(){const o=new e({allowUnknownLevel:!0,errorHandler:new r,initializeFn:()=>{},logId:"default",transportFactories:{console:i,ipc:s},variables:{processType:"renderer"}});return o.errorHandler.setOptions({logFn({error:a,errorName:u,showDialog:f}){o.transports.console({data:[u,a].filter(Boolean),level:"error"}),o.transports.ipc({cmd:"errorHandler",error:{cause:a==null?void 0:a.cause,code:a==null?void 0:a.code,name:a==null?void 0:a.name,message:a==null?void 0:a.message,stack:a==null?void 0:a.stack},errorName:u,logId:o.logId,showDialog:f})}}),typeof window=="object"&&window.addEventListener("message",a=>{const{cmd:u,logId:f,...c}=a.data||{},h=e.getInstance({logId:f});u==="message"&&h.processMessage(c,{transports:["console"]})}),new Proxy(o,{get(a,u){return typeof a[u]<"u"?a[u]:(...f)=>o.logData(f,{level:u})}})}}(Er)),Er.exports}var Ar,eo;function Ju(){if(eo)return Ar;eo=1;const t=ce,e=J;Ar={findAndReadPackageJson:r,tryReadJsonAt:i};function r(){return i(o())||i(n())||i(process.resourcesPath,"app.asar")||i(process.resourcesPath,"app")||i(process.cwd())||{name:void 0,version:void 0}}function i(...a){if(a[0])try{const u=e.join(...a),f=s("package.json",u);if(!f)return;const c=JSON.parse(t.readFileSync(f,"utf8")),h=(c==null?void 0:c.productName)||(c==null?void 0:c.name);return!h||h.toLowerCase()==="electron"?void 0:h?{name:h,version:c==null?void 0:c.version}:void 0}catch{return}}function s(a,u){let f=u;for(;;){const c=e.parse(f),h=c.root,l=c.dir;if(t.existsSync(e.join(f,a)))return e.resolve(e.join(f,a));if(f===h)return null;f=l}}function n(){const a=process.argv.filter(f=>f.indexOf("--user-data-dir=")===0);return a.length===0||typeof a[0]!="string"?null:a[0].replace("--user-data-dir=","")}function o(){var a;try{return(a=require.main)==null?void 0:a.filename}catch{return}}return Ar}var Fr,to;function fa(){if(to)return Fr;to=1;const t=Ft,e=et,r=J,i=Ju();class s{constructor(){ee(this,"appName");ee(this,"appPackageJson");ee(this,"platform",process.platform)}getAppLogPath(o=this.getAppName()){return this.platform==="darwin"?r.join(this.getSystemPathHome(),"Library/Logs",o):r.join(this.getAppUserDataPath(o),"logs")}getAppName(){var a;const o=this.appName||((a=this.getAppPackageJson())==null?void 0:a.name);if(!o)throw new Error("electron-log can't determine the app name. It tried these methods:\n1. Use `electron.app.name`\n2. Use productName or name from the nearest package.json`\nYou can also set it through log.transports.file.setAppName()");return o}getAppPackageJson(){return typeof this.appPackageJson!="object"&&(this.appPackageJson=i.findAndReadPackageJson()),this.appPackageJson}getAppUserDataPath(o=this.getAppName()){return o?r.join(this.getSystemPathAppData(),o):void 0}getAppVersion(){var o;return(o=this.getAppPackageJson())==null?void 0:o.version}getElectronLogPath(){return this.getAppLogPath()}getMacOsVersion(){const o=Number(e.release().split(".")[0]);return o<=19?`10.${o-4}`:o-9}getOsVersion(){let o=e.type().replace("_"," "),a=e.release();return o==="Darwin"&&(o="macOS",a=this.getMacOsVersion()),`${o} ${a}`}getPathVariables(){const o=this.getAppName(),a=this.getAppVersion(),u=this;return{appData:this.getSystemPathAppData(),appName:o,appVersion:a,get electronDefaultDir(){return u.getElectronLogPath()},home:this.getSystemPathHome(),libraryDefaultDir:this.getAppLogPath(o),libraryTemplate:this.getAppLogPath("{appName}"),temp:this.getSystemPathTemp(),userData:this.getAppUserDataPath(o)}}getSystemPathAppData(){const o=this.getSystemPathHome();switch(this.platform){case"darwin":return r.join(o,"Library/Application Support");case"win32":return process.env.APPDATA||r.join(o,"AppData/Roaming");default:return process.env.XDG_CONFIG_HOME||r.join(o,".config")}}getSystemPathHome(){var o;return((o=e.homedir)==null?void 0:o.call(e))||process.env.HOME}getSystemPathTemp(){return e.tmpdir()}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:void 0,os:this.getOsVersion()}}isDev(){return process.env.NODE_ENV==="development"||process.env.ELECTRON_IS_DEV==="1"}isElectron(){return!!process.versions.electron}onAppEvent(o,a){}onAppReady(o){o()}onEveryWebContentsEvent(o,a){}onIpc(o,a){}onIpcInvoke(o,a){}openUrl(o,a=console.error){const f={darwin:"open",win32:"start",linux:"xdg-open"}[process.platform]||"xdg-open";t.exec(`${f} ${o}`,{},c=>{c&&a(c)})}setAppName(o){this.appName=o}setPlatform(o){this.platform=o}setPreloadFileForSessions({filePath:o,includeFutureSession:a=!0,getSessions:u=()=>[]}){}sendIpc(o,a){}showErrorBox(o,a){}}return Fr=s,Fr}var Nr,ro;function Qu(){if(ro)return Nr;ro=1;const t=J,e=fa();class r extends e{constructor({electron:n}={}){super();ee(this,"electron");this.electron=n}getAppName(){var o,a;let n;try{n=this.appName||((o=this.electron.app)==null?void 0:o.name)||((a=this.electron.app)==null?void 0:a.getName())}catch{}return n||super.getAppName()}getAppUserDataPath(n){return this.getPath("userData")||super.getAppUserDataPath(n)}getAppVersion(){var o;let n;try{n=(o=this.electron.app)==null?void 0:o.getVersion()}catch{}return n||super.getAppVersion()}getElectronLogPath(){return this.getPath("logs")||super.getElectronLogPath()}getPath(n){var o;try{return(o=this.electron.app)==null?void 0:o.getPath(n)}catch{return}}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:`Electron ${process.versions.electron}`,os:this.getOsVersion()}}getSystemPathAppData(){return this.getPath("appData")||super.getSystemPathAppData()}isDev(){var n;return((n=this.electron.app)==null?void 0:n.isPackaged)!==void 0?!this.electron.app.isPackaged:typeof process.execPath=="string"?t.basename(process.execPath).toLowerCase().startsWith("electron"):super.isDev()}onAppEvent(n,o){var a;return(a=this.electron.app)==null||a.on(n,o),()=>{var u;(u=this.electron.app)==null||u.off(n,o)}}onAppReady(n){var o,a,u;(o=this.electron.app)!=null&&o.isReady()?n():(a=this.electron.app)!=null&&a.once?(u=this.electron.app)==null||u.once("ready",n):n()}onEveryWebContentsEvent(n,o){var u,f,c;return(f=(u=this.electron.webContents)==null?void 0:u.getAllWebContents())==null||f.forEach(h=>{h.on(n,o)}),(c=this.electron.app)==null||c.on("web-contents-created",a),()=>{var h,l;(h=this.electron.webContents)==null||h.getAllWebContents().forEach(d=>{d.off(n,o)}),(l=this.electron.app)==null||l.off("web-contents-created",a)};function a(h,l){l.on(n,o)}}onIpc(n,o){var a;(a=this.electron.ipcMain)==null||a.on(n,o)}onIpcInvoke(n,o){var a,u;(u=(a=this.electron.ipcMain)==null?void 0:a.handle)==null||u.call(a,n,o)}openUrl(n,o=console.error){var a;(a=this.electron.shell)==null||a.openExternal(n).catch(o)}setPreloadFileForSessions({filePath:n,includeFutureSession:o=!0,getSessions:a=()=>{var u;return[(u=this.electron.session)==null?void 0:u.defaultSession]}}){for(const f of a().filter(Boolean))u(f);o&&this.onAppEvent("session-created",f=>{u(f)});function u(f){typeof f.registerPreloadScript=="function"?f.registerPreloadScript({filePath:n,id:"electron-log-preload",type:"frame"}):f.setPreloads([...f.getPreloads(),n])}}sendIpc(n,o){var a,u;(u=(a=this.electron.BrowserWindow)==null?void 0:a.getAllWindows())==null||u.forEach(f=>{var c,h;((c=f.webContents)==null?void 0:c.isDestroyed())===!1&&((h=f.webContents)==null?void 0:h.isCrashed())===!1&&f.webContents.send(n,o)})}showErrorBox(n,o){var a;(a=this.electron.dialog)==null||a.showErrorBox(n,o)}}return Nr=r,Nr}var xr,no;function Zu(){if(no)return xr;no=1;const t=ce,e=et,r=J,i=ca();xr={initialize({externalApi:o,getSessions:a,includeFutureSession:u,logger:f,preload:c=!0,spyRendererConsole:h=!1}){o.onAppReady(()=>{try{c&&s({externalApi:o,getSessions:a,includeFutureSession:u,preloadOption:c}),h&&n({externalApi:o,logger:f})}catch(l){f.warn(l)}})}};function s({externalApi:o,getSessions:a,includeFutureSession:u,preloadOption:f}){let c=typeof f=="string"?f:void 0;try{c=r.resolve(__dirname,"../renderer/electron-log-preload.js")}catch{}if(!c||!t.existsSync(c)){c=r.join(o.getAppUserDataPath()||e.tmpdir(),"electron-log-preload.js");const h=`
      try {
        (${i.toString()})(require('electron'));
      } catch(e) {
        console.error(e);
      }
    `;t.writeFileSync(c,h,"utf8")}o.setPreloadFileForSessions({filePath:c,includeFutureSession:u,getSessions:a})}function n({externalApi:o,logger:a}){const u=["debug","info","warn","error"];o.onEveryWebContentsEvent("console-message",(f,c,h)=>{a.processMessage({data:[h],level:u[c],variables:{processType:"renderer"}})})}return xr}var Ir,io;function ec(){if(io)return Ir;io=1;class t{constructor({externalApi:i,logFn:s=void 0,onError:n=void 0,showDialog:o=void 0}={}){ee(this,"externalApi");ee(this,"isActive",!1);ee(this,"logFn");ee(this,"onError");ee(this,"showDialog",!0);this.createIssue=this.createIssue.bind(this),this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.setOptions({externalApi:i,logFn:s,onError:n,showDialog:o}),this.startCatching=this.startCatching.bind(this),this.stopCatching=this.stopCatching.bind(this)}handle(i,{logFn:s=this.logFn,onError:n=this.onError,processType:o="browser",showDialog:a=this.showDialog,errorName:u=""}={}){var f;i=e(i);try{if(typeof n=="function"){const c=((f=this.externalApi)==null?void 0:f.getVersions())||{},h=this.createIssue;if(n({createIssue:h,error:i,errorName:u,processType:o,versions:c})===!1)return}u?s(u,i):s(i),a&&!u.includes("rejection")&&this.externalApi&&this.externalApi.showErrorBox(`A JavaScript error occurred in the ${o} process`,i.stack)}catch{console.error(i)}}setOptions({externalApi:i,logFn:s,onError:n,showDialog:o}){typeof i=="object"&&(this.externalApi=i),typeof s=="function"&&(this.logFn=s),typeof n=="function"&&(this.onError=n),typeof o=="boolean"&&(this.showDialog=o)}startCatching({onError:i,showDialog:s}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:i,showDialog:s}),process.on("uncaughtException",this.handleError),process.on("unhandledRejection",this.handleRejection))}stopCatching(){this.isActive=!1,process.removeListener("uncaughtException",this.handleError),process.removeListener("unhandledRejection",this.handleRejection)}createIssue(i,s){var n;(n=this.externalApi)==null||n.openUrl(`${i}?${new URLSearchParams(s).toString()}`)}handleError(i){this.handle(i,{errorName:"Unhandled"})}handleRejection(i){const s=i instanceof Error?i:new Error(JSON.stringify(i));this.handle(s,{errorName:"Unhandled rejection"})}}function e(r){if(r instanceof Error)return r;if(r&&typeof r=="object"){if(r.message)return Object.assign(new Error(r.message),r);try{return new Error(JSON.stringify(r))}catch(i){return new Error(`Couldn't normalize error ${String(r)}: ${i}`)}}return new Error(`Can't normalize error ${String(r)}`)}return Ir=t,Ir}var Pr,oo;function tc(){if(oo)return Pr;oo=1;class t{constructor(r={}){ee(this,"disposers",[]);ee(this,"format","{eventSource}#{eventName}:");ee(this,"formatters",{app:{"certificate-error":({args:r})=>this.arrayToObject(r.slice(1,4),["url","error","certificate"]),"child-process-gone":({args:r})=>r.length===1?r[0]:r,"render-process-gone":({args:[r,i]})=>i&&typeof i=="object"?{...i,...this.getWebContentsDetails(r)}:[]},webContents:{"console-message":({args:[r,i,s,n]})=>{if(!(r<3))return{message:i,source:`${n}:${s}`}},"did-fail-load":({args:r})=>this.arrayToObject(r,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"did-fail-provisional-load":({args:r})=>this.arrayToObject(r,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"plugin-crashed":({args:r})=>this.arrayToObject(r,["name","version"]),"preload-error":({args:r})=>this.arrayToObject(r,["preloadPath","error"])}});ee(this,"events",{app:{"certificate-error":!0,"child-process-gone":!0,"render-process-gone":!0},webContents:{"did-fail-load":!0,"did-fail-provisional-load":!0,"plugin-crashed":!0,"preload-error":!0,unresponsive:!0}});ee(this,"externalApi");ee(this,"level","error");ee(this,"scope","");this.setOptions(r)}setOptions({events:r,externalApi:i,level:s,logger:n,format:o,formatters:a,scope:u}){typeof r=="object"&&(this.events=r),typeof i=="object"&&(this.externalApi=i),typeof s=="string"&&(this.level=s),typeof n=="object"&&(this.logger=n),(typeof o=="string"||typeof o=="function")&&(this.format=o),typeof a=="object"&&(this.formatters=a),typeof u=="string"&&(this.scope=u)}startLogging(r={}){this.setOptions(r),this.disposeListeners();for(const i of this.getEventNames(this.events.app))this.disposers.push(this.externalApi.onAppEvent(i,(...s)=>{this.handleEvent({eventSource:"app",eventName:i,handlerArgs:s})}));for(const i of this.getEventNames(this.events.webContents))this.disposers.push(this.externalApi.onEveryWebContentsEvent(i,(...s)=>{this.handleEvent({eventSource:"webContents",eventName:i,handlerArgs:s})}))}stopLogging(){this.disposeListeners()}arrayToObject(r,i){const s={};return i.forEach((n,o)=>{s[n]=r[o]}),r.length>i.length&&(s.unknownArgs=r.slice(i.length)),s}disposeListeners(){this.disposers.forEach(r=>r()),this.disposers=[]}formatEventLog({eventName:r,eventSource:i,handlerArgs:s}){var h;const[n,...o]=s;if(typeof this.format=="function")return this.format({args:o,event:n,eventName:r,eventSource:i});const a=(h=this.formatters[i])==null?void 0:h[r];let u=o;if(typeof a=="function"&&(u=a({args:o,event:n,eventName:r,eventSource:i})),!u)return;const f={};return Array.isArray(u)?f.args=u:typeof u=="object"&&Object.assign(f,u),i==="webContents"&&Object.assign(f,this.getWebContentsDetails(n==null?void 0:n.sender)),[this.format.replace("{eventSource}",i==="app"?"App":"WebContents").replace("{eventName}",r),f]}getEventNames(r){return!r||typeof r!="object"?[]:Object.entries(r).filter(([i,s])=>s).map(([i])=>i)}getWebContentsDetails(r){if(!(r!=null&&r.loadURL))return{};try{return{webContents:{id:r.id,url:r.getURL()}}}catch{return{}}}handleEvent({eventName:r,eventSource:i,handlerArgs:s}){var o;const n=this.formatEventLog({eventName:r,eventSource:i,handlerArgs:s});if(n){const a=this.scope?this.logger.scope(this.scope):this.logger;(o=a==null?void 0:a[this.level])==null||o.call(a,...n)}}}return Pr=t,Pr}var Lr,so;function ha(){if(so)return Lr;so=1;const{transform:t}=it();Lr={concatFirstStringElements:e,formatScope:i,formatText:n,formatVariables:s,timeZoneFromOffset:r,format({message:o,logger:a,transport:u,data:f=o==null?void 0:o.data}){switch(typeof u.format){case"string":return t({message:o,logger:a,transforms:[s,i,n],transport:u,initialData:[u.format,...f]});case"function":return u.format({data:f,level:(o==null?void 0:o.level)||"info",logger:a,message:o,transport:u});default:return f}}};function e({data:o}){return typeof o[0]!="string"||typeof o[1]!="string"||o[0].match(/%[1cdfiOos]/)?o:[`${o[0]} ${o[1]}`,...o.slice(2)]}function r(o){const a=Math.abs(o),u=o>0?"-":"+",f=Math.floor(a/60).toString().padStart(2,"0"),c=(a%60).toString().padStart(2,"0");return`${u}${f}:${c}`}function i({data:o,logger:a,message:u}){const{defaultLabel:f,labelLength:c}=(a==null?void 0:a.scope)||{},h=o[0];let l=u.scope;l||(l=f);let d;return l===""?d=c>0?"".padEnd(c+3):"":typeof l=="string"?d=` (${l})`.padEnd(c+3):d="",o[0]=h.replace("{scope}",d),o}function s({data:o,message:a}){let u=o[0];if(typeof u!="string")return o;u=u.replace("{level}]",`${a.level}]`.padEnd(6," "));const f=a.date||new Date;return o[0]=u.replace(/\{(\w+)}/g,(c,h)=>{var l;switch(h){case"level":return a.level||"info";case"logId":return a.logId;case"y":return f.getFullYear().toString(10);case"m":return(f.getMonth()+1).toString(10).padStart(2,"0");case"d":return f.getDate().toString(10).padStart(2,"0");case"h":return f.getHours().toString(10).padStart(2,"0");case"i":return f.getMinutes().toString(10).padStart(2,"0");case"s":return f.getSeconds().toString(10).padStart(2,"0");case"ms":return f.getMilliseconds().toString(10).padStart(3,"0");case"z":return r(f.getTimezoneOffset());case"iso":return f.toISOString();default:return((l=a.variables)==null?void 0:l[h])||c}}).trim(),o}function n({data:o}){const a=o[0];if(typeof a!="string")return o;if(a.lastIndexOf("{text}")===a.length-6)return o[0]=a.replace(/\s?{text}/,""),o[0]===""&&o.shift(),o;const f=a.split("{text}");let c=[];return f[0]!==""&&c.push(f[0]),c=c.concat(o.slice(1)),f[1]!==""&&c.push(f[1]),c}return Lr}var Mr={exports:{}},ao;function ir(){return ao||(ao=1,function(t){const e=ht;t.exports={serialize:i,maxDepth({data:s,transport:n,depth:o=(n==null?void 0:n.depth)??6}){if(!s)return s;if(o<1)return Array.isArray(s)?"[array]":typeof s=="object"&&s?"[object]":s;if(Array.isArray(s))return s.map(u=>t.exports.maxDepth({data:u,depth:o-1}));if(typeof s!="object"||s&&typeof s.toISOString=="function")return s;if(s===null)return null;if(s instanceof Error)return s;const a={};for(const u in s)Object.prototype.hasOwnProperty.call(s,u)&&(a[u]=t.exports.maxDepth({data:s[u],depth:o-1}));return a},toJSON({data:s}){return JSON.parse(JSON.stringify(s,r()))},toString({data:s,transport:n}){const o=(n==null?void 0:n.inspectOptions)||{},a=s.map(u=>{if(u!==void 0)try{const f=JSON.stringify(u,r(),"  ");return f===void 0?void 0:JSON.parse(f)}catch{return u}});return e.formatWithOptions(o,...a)}};function r(s={}){const n=new WeakSet;return function(o,a){if(typeof a=="object"&&a!==null){if(n.has(a))return;n.add(a)}return i(o,a,s)}}function i(s,n,o={}){const a=(o==null?void 0:o.serializeMapAndSet)!==!1;return n instanceof Error?n.stack:n&&(typeof n=="function"?`[function] ${n.toString()}`:n instanceof Date?n.toISOString():a&&n instanceof Map&&Object.fromEntries?Object.fromEntries(n):a&&n instanceof Set&&Array.from?Array.from(n):n)}}(Mr)),Mr.exports}var Rr,uo;function gi(){if(uo)return Rr;uo=1,Rr={transformStyles:i,applyAnsiStyles({data:s}){return i(s,e,r)},removeStyles({data:s}){return i(s,()=>"")}};const t={unset:"\x1B[0m",black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"};function e(s){const n=s.replace(/color:\s*(\w+).*/,"$1").toLowerCase();return t[n]||""}function r(s){return s+t.unset}function i(s,n,o){const a={};return s.reduce((u,f,c,h)=>{if(a[c])return u;if(typeof f=="string"){let l=c,d=!1;f=f.replace(/%[1cdfiOos]/g,g=>{if(l+=1,g!=="%c")return g;const w=h[l];return typeof w=="string"?(a[l]=!0,d=!0,n(w,f)):g}),d&&o&&(f=o(f))}return u.push(f),u},[])}return Rr}var $r,co;function rc(){if(co)return $r;co=1;const{concatFirstStringElements:t,format:e}=ha(),{maxDepth:r,toJSON:i}=ir(),{applyAnsiStyles:s,removeStyles:n}=gi(),{transform:o}=it(),a={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};$r=c;const f=`%c{h}:{i}:{s}.{ms}{scope}%c ${process.platform==="win32"?">":"›"} {text}`;Object.assign(c,{DEFAULT_FORMAT:f});function c(w){return Object.assign(O,{format:f,level:"silly",transforms:[h,e,d,t,r,i],useStyles:process.env.FORCE_STYLES,writeFn({message:x}){(a[x.level]||a.info)(...x.data)}});function O(x){const v=o({logger:w,message:x,transport:O});O.writeFn({message:{...x,data:v}})}}function h({data:w,message:O,transport:x}){return typeof x.format!="string"||!x.format.includes("%c")?w:[`color:${g(O.level)}`,"color:unset",...w]}function l(w,O){if(typeof w=="boolean")return w;const v=O==="error"||O==="warn"?process.stderr:process.stdout;return v&&v.isTTY}function d(w){const{message:O,transport:x}=w;return(l(x.useStyles,O.level)?s:n)(w)}function g(w){const O={error:"red",warn:"yellow",info:"cyan",default:"unset"};return O[w]||O.default}return $r}var kr,lo;function pa(){if(lo)return kr;lo=1;const t=nt,e=ce,r=et;class i extends t{constructor({path:a,writeOptions:u={encoding:"utf8",flag:"a",mode:438},writeAsync:f=!1}){super();ee(this,"asyncWriteQueue",[]);ee(this,"bytesWritten",0);ee(this,"hasActiveAsyncWriting",!1);ee(this,"path",null);ee(this,"initialSize");ee(this,"writeOptions",null);ee(this,"writeAsync",!1);this.path=a,this.writeOptions=u,this.writeAsync=f}get size(){return this.getSize()}clear(){try{return e.writeFileSync(this.path,"",{mode:this.writeOptions.mode,flag:"w"}),this.reset(),!0}catch(a){return a.code==="ENOENT"?!0:(this.emit("error",a,this),!1)}}crop(a){try{const u=s(this.path,a||4096);this.clear(),this.writeLine(`[log cropped]${r.EOL}${u}`)}catch(u){this.emit("error",new Error(`Couldn't crop file ${this.path}. ${u.message}`),this)}}getSize(){if(this.initialSize===void 0)try{const a=e.statSync(this.path);this.initialSize=a.size}catch{this.initialSize=0}return this.initialSize+this.bytesWritten}increaseBytesWrittenCounter(a){this.bytesWritten+=Buffer.byteLength(a,this.writeOptions.encoding)}isNull(){return!1}nextAsyncWrite(){const a=this;if(this.hasActiveAsyncWriting||this.asyncWriteQueue.length===0)return;const u=this.asyncWriteQueue.join("");this.asyncWriteQueue=[],this.hasActiveAsyncWriting=!0,e.writeFile(this.path,u,this.writeOptions,f=>{a.hasActiveAsyncWriting=!1,f?a.emit("error",new Error(`Couldn't write to ${a.path}. ${f.message}`),this):a.increaseBytesWrittenCounter(u),a.nextAsyncWrite()})}reset(){this.initialSize=void 0,this.bytesWritten=0}toString(){return this.path}writeLine(a){if(a+=r.EOL,this.writeAsync){this.asyncWriteQueue.push(a),this.nextAsyncWrite();return}try{e.writeFileSync(this.path,a,this.writeOptions),this.increaseBytesWrittenCounter(a)}catch(u){this.emit("error",new Error(`Couldn't write to ${this.path}. ${u.message}`),this)}}}kr=i;function s(n,o){const a=Buffer.alloc(o),u=e.statSync(n),f=Math.min(u.size,o),c=Math.max(0,u.size-o),h=e.openSync(n,"r"),l=e.readSync(h,a,0,f,c);return e.closeSync(h),a.toString("utf8",0,l)}return kr}var jr,fo;function nc(){if(fo)return jr;fo=1;const t=pa();class e extends t{clear(){}crop(){}getSize(){return 0}isNull(){return!0}writeLine(){}}return jr=e,jr}var qr,ho;function ic(){if(ho)return qr;ho=1;const t=nt,e=ce,r=J,i=pa(),s=nc();class n extends t{constructor(){super();ee(this,"store",{});this.emitError=this.emitError.bind(this)}provide({filePath:u,writeOptions:f={},writeAsync:c=!1}){let h;try{if(u=r.resolve(u),this.store[u])return this.store[u];h=this.createFile({filePath:u,writeOptions:f,writeAsync:c})}catch(l){h=new s({path:u}),this.emitError(l,h)}return h.on("error",this.emitError),this.store[u]=h,h}createFile({filePath:u,writeOptions:f,writeAsync:c}){return this.testFileWriting({filePath:u,writeOptions:f}),new i({path:u,writeOptions:f,writeAsync:c})}emitError(u,f){this.emit("error",u,f)}testFileWriting({filePath:u,writeOptions:f}){e.mkdirSync(r.dirname(u),{recursive:!0}),e.writeFileSync(u,"",{flag:"a",mode:f.mode})}}return qr=n,qr}var Br,po;function oc(){if(po)return Br;po=1;const t=ce,e=et,r=J,i=ic(),{transform:s}=it(),{removeStyles:n}=gi(),{format:o,concatFirstStringElements:a}=ha(),{toString:u}=ir();Br=c;const f=new i;function c(l,{registry:d=f,externalApi:g}={}){let w;return d.listenerCount("error")<1&&d.on("error",(_,E)=>{v(`Can't write to ${E}`,_)}),Object.assign(O,{fileName:h(l.variables.processType),format:"[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}]{scope} {text}",getFile:y,inspectOptions:{depth:5},level:"silly",maxSize:1024**2,readAllLogs:C,sync:!0,transforms:[n,o,a,u],writeOptions:{flag:"a",mode:438,encoding:"utf8"},archiveLogFn(_){const E=_.toString(),D=r.parse(E);try{t.renameSync(E,r.join(D.dir,`${D.name}.old${D.ext}`))}catch(T){v("Could not rotate log",T);const p=Math.round(O.maxSize/4);_.crop(Math.min(p,256*1024))}},resolvePathFn(_){return r.join(_.libraryDefaultDir,_.fileName)},setAppName(_){l.dependencies.externalApi.setAppName(_)}});function O(_){const E=y(_);O.maxSize>0&&E.size>O.maxSize&&(O.archiveLogFn(E),E.reset());const T=s({logger:l,message:_,transport:O});E.writeLine(T)}function x(){w||(w=Object.create(Object.prototype,{...Object.getOwnPropertyDescriptors(g.getPathVariables()),fileName:{get(){return O.fileName},enumerable:!0}}),typeof O.archiveLog=="function"&&(O.archiveLogFn=O.archiveLog,v("archiveLog is deprecated. Use archiveLogFn instead")),typeof O.resolvePath=="function"&&(O.resolvePathFn=O.resolvePath,v("resolvePath is deprecated. Use resolvePathFn instead")))}function v(_,E=null,D="error"){const T=[`electron-log.transports.file: ${_}`];E&&T.push(E),l.transports.console({data:T,date:new Date,level:D})}function y(_){x();const E=O.resolvePathFn(w,_);return d.provide({filePath:E,writeAsync:!O.sync,writeOptions:O.writeOptions})}function C({fileFilter:_=E=>E.endsWith(".log")}={}){x();const E=r.dirname(O.resolvePathFn(w));return t.existsSync(E)?t.readdirSync(E).map(D=>r.join(E,D)).filter(_).map(D=>{try{return{path:D,lines:t.readFileSync(D,"utf8").split(e.EOL)}}catch{return null}}).filter(Boolean):[]}}function h(l=process.type){switch(l){case"renderer":return"renderer.log";case"worker":return"worker.log";default:return"main.log"}}return Br}var Ur,mo;function sc(){if(mo)return Ur;mo=1;const{maxDepth:t,toJSON:e}=ir(),{transform:r}=it();Ur=i;function i(s,{externalApi:n}){return Object.assign(o,{depth:3,eventId:"__ELECTRON_LOG_IPC__",level:s.isDev?"silly":!1,transforms:[e,t]}),n!=null&&n.isElectron()?o:void 0;function o(a){var u;((u=a==null?void 0:a.variables)==null?void 0:u.processType)!=="renderer"&&(n==null||n.sendIpc(o.eventId,{...a,data:r({logger:s,message:a,transport:o})}))}}return Ur}var Xr,yo;function ac(){if(yo)return Xr;yo=1;const t=tr,e=rr,{transform:r}=it(),{removeStyles:i}=gi(),{toJSON:s,maxDepth:n}=ir();Xr=o;function o(a){return Object.assign(u,{client:{name:"electron-application"},depth:6,level:!1,requestOptions:{},transforms:[i,s,n],makeBodyFn({message:f}){return JSON.stringify({client:u.client,data:f.data,date:f.date.getTime(),level:f.level,scope:f.scope,variables:f.variables})},processErrorFn({error:f}){a.processMessage({data:[`electron-log: can't POST ${u.url}`,f],level:"warn"},{transports:["console","file"]})},sendRequestFn({serverUrl:f,requestOptions:c,body:h}){const d=(f.startsWith("https:")?e:t).request(f,{method:"POST",...c,headers:{"Content-Type":"application/json","Content-Length":h.length,...c.headers}});return d.write(h),d.end(),d}});function u(f){if(!u.url)return;const c=u.makeBodyFn({logger:a,message:{...f,data:r({logger:a,message:f,transport:u})},transport:u}),h=u.sendRequestFn({serverUrl:u.url,requestOptions:u.requestOptions,body:Buffer.from(c,"utf8")});h.on("error",l=>u.processErrorFn({error:l,logger:a,message:f,request:h,transport:u}))}}return Xr}var Vr,go;function da(){if(go)return Vr;go=1;const t=la(),e=ec(),r=tc(),i=rc(),s=oc(),n=sc(),o=ac();Vr=a;function a({dependencies:u,initializeFn:f}){var h;const c=new t({dependencies:u,errorHandler:new e,eventLogger:new r,initializeFn:f,isDev:(h=u.externalApi)==null?void 0:h.isDev(),logId:"default",transportFactories:{console:i,file:s,ipc:n,remote:o},variables:{processType:"main"}});return c.default=c,c.Logger=t,c.processInternalErrorFn=l=>{c.transports.console.writeFn({message:{data:["Unhandled electron-log error",l],level:"error"}})},c}return Vr}var zr,vo;function uc(){if(vo)return zr;vo=1;const t=re,e=Qu(),{initialize:r}=Zu(),i=da(),s=new e({electron:t}),n=i({dependencies:{externalApi:s},initializeFn:r});zr=n,s.onIpc("__ELECTRON_LOG__",(a,u)=>{u.scope&&n.Logger.getInstance(u).scope(u.scope);const f=new Date(u.date);o({...u,date:f.getTime()?f:new Date})}),s.onIpcInvoke("__ELECTRON_LOG__",(a,{cmd:u="",logId:f})=>{switch(u){case"getOptions":return{levels:n.Logger.getInstance({logId:f}).levels,logId:f};default:return o({data:[`Unknown cmd '${u}'`],level:"error"}),{}}});function o(a){var u;(u=n.Logger.getInstance(a))==null||u.processMessage(a)}return zr}var Wr,wo;function cc(){if(wo)return Wr;wo=1;const t=fa(),e=da(),r=new t;return Wr=e({dependencies:{externalApi:r}}),Wr}const lc=typeof process>"u"||process.type==="renderer"||process.type==="worker",fc=typeof process=="object"&&process.type==="browser";lc?(ca(),Gt.exports=Yu()):fc?Gt.exports=uc():Gt.exports=cc();var hc=Gt.exports;const ae=Nt(hc);var Mt,pc=new Uint8Array(16);function ma(){if(!Mt&&(Mt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Mt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Mt(pc)}const dc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function or(t){return typeof t=="string"&&dc.test(t)}var we=[];for(var Hr=0;Hr<256;++Hr)we.push((Hr+256).toString(16).substr(1));function sr(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(we[t[e+0]]+we[t[e+1]]+we[t[e+2]]+we[t[e+3]]+"-"+we[t[e+4]]+we[t[e+5]]+"-"+we[t[e+6]]+we[t[e+7]]+"-"+we[t[e+8]]+we[t[e+9]]+"-"+we[t[e+10]]+we[t[e+11]]+we[t[e+12]]+we[t[e+13]]+we[t[e+14]]+we[t[e+15]]).toLowerCase();if(!or(r))throw TypeError("Stringified UUID is invalid");return r}var Eo,Gr,Kr=0,Yr=0;function mc(t,e,r){var i=e&&r||0,s=e||new Array(16);t=t||{};var n=t.node||Eo,o=t.clockseq!==void 0?t.clockseq:Gr;if(n==null||o==null){var a=t.random||(t.rng||ma)();n==null&&(n=Eo=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Gr=(a[6]<<8|a[7])&16383)}var u=t.msecs!==void 0?t.msecs:Date.now(),f=t.nsecs!==void 0?t.nsecs:Yr+1,c=u-Kr+(f-Yr)/1e4;if(c<0&&t.clockseq===void 0&&(o=o+1&16383),(c<0||u>Kr)&&t.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Kr=u,Yr=f,Gr=o,u+=122192928e5;var h=((u&268435455)*1e4+f)%4294967296;s[i++]=h>>>24&255,s[i++]=h>>>16&255,s[i++]=h>>>8&255,s[i++]=h&255;var l=u/4294967296*1e4&268435455;s[i++]=l>>>8&255,s[i++]=l&255,s[i++]=l>>>24&15|16,s[i++]=l>>>16&255,s[i++]=o>>>8|128,s[i++]=o&255;for(var d=0;d<6;++d)s[i+d]=n[d];return e||sr(s)}function ya(t){if(!or(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function yc(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var gc="6ba7b810-9dad-11d1-80b4-00c04fd430c8",vc="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ga(t,e,r){function i(s,n,o,a){if(typeof s=="string"&&(s=yc(s)),typeof n=="string"&&(n=ya(n)),n.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+s.length);if(u.set(n),u.set(s,n.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(var f=0;f<16;++f)o[a+f]=u[f];return o}return sr(u)}try{i.name=t}catch{}return i.DNS=gc,i.URL=vc,i}function wc(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return Ec(bc(Sc(t),t.length*8))}function Ec(t){for(var e=[],r=t.length*32,i="0123456789abcdef",s=0;s<r;s+=8){var n=t[s>>5]>>>s%32&255,o=parseInt(i.charAt(n>>>4&15)+i.charAt(n&15),16);e.push(o)}return e}function va(t){return(t+64>>>9<<4)+14+1}function bc(t,e){t[e>>5]|=128<<e%32,t[va(e)-1]=e;for(var r=1732584193,i=-271733879,s=-1732584194,n=271733878,o=0;o<t.length;o+=16){var a=r,u=i,f=s,c=n;r=Se(r,i,s,n,t[o],7,-680876936),n=Se(n,r,i,s,t[o+1],12,-389564586),s=Se(s,n,r,i,t[o+2],17,606105819),i=Se(i,s,n,r,t[o+3],22,-1044525330),r=Se(r,i,s,n,t[o+4],7,-176418897),n=Se(n,r,i,s,t[o+5],12,1200080426),s=Se(s,n,r,i,t[o+6],17,-1473231341),i=Se(i,s,n,r,t[o+7],22,-45705983),r=Se(r,i,s,n,t[o+8],7,1770035416),n=Se(n,r,i,s,t[o+9],12,-1958414417),s=Se(s,n,r,i,t[o+10],17,-42063),i=Se(i,s,n,r,t[o+11],22,-1990404162),r=Se(r,i,s,n,t[o+12],7,1804603682),n=Se(n,r,i,s,t[o+13],12,-40341101),s=Se(s,n,r,i,t[o+14],17,-1502002290),i=Se(i,s,n,r,t[o+15],22,1236535329),r=Oe(r,i,s,n,t[o+1],5,-165796510),n=Oe(n,r,i,s,t[o+6],9,-1069501632),s=Oe(s,n,r,i,t[o+11],14,643717713),i=Oe(i,s,n,r,t[o],20,-373897302),r=Oe(r,i,s,n,t[o+5],5,-701558691),n=Oe(n,r,i,s,t[o+10],9,38016083),s=Oe(s,n,r,i,t[o+15],14,-660478335),i=Oe(i,s,n,r,t[o+4],20,-405537848),r=Oe(r,i,s,n,t[o+9],5,568446438),n=Oe(n,r,i,s,t[o+14],9,-1019803690),s=Oe(s,n,r,i,t[o+3],14,-187363961),i=Oe(i,s,n,r,t[o+8],20,1163531501),r=Oe(r,i,s,n,t[o+13],5,-1444681467),n=Oe(n,r,i,s,t[o+2],9,-51403784),s=Oe(s,n,r,i,t[o+7],14,1735328473),i=Oe(i,s,n,r,t[o+12],20,-1926607734),r=Te(r,i,s,n,t[o+5],4,-378558),n=Te(n,r,i,s,t[o+8],11,-2022574463),s=Te(s,n,r,i,t[o+11],16,1839030562),i=Te(i,s,n,r,t[o+14],23,-35309556),r=Te(r,i,s,n,t[o+1],4,-1530992060),n=Te(n,r,i,s,t[o+4],11,1272893353),s=Te(s,n,r,i,t[o+7],16,-155497632),i=Te(i,s,n,r,t[o+10],23,-1094730640),r=Te(r,i,s,n,t[o+13],4,681279174),n=Te(n,r,i,s,t[o],11,-358537222),s=Te(s,n,r,i,t[o+3],16,-722521979),i=Te(i,s,n,r,t[o+6],23,76029189),r=Te(r,i,s,n,t[o+9],4,-640364487),n=Te(n,r,i,s,t[o+12],11,-421815835),s=Te(s,n,r,i,t[o+15],16,530742520),i=Te(i,s,n,r,t[o+2],23,-995338651),r=Ce(r,i,s,n,t[o],6,-198630844),n=Ce(n,r,i,s,t[o+7],10,1126891415),s=Ce(s,n,r,i,t[o+14],15,-1416354905),i=Ce(i,s,n,r,t[o+5],21,-57434055),r=Ce(r,i,s,n,t[o+12],6,1700485571),n=Ce(n,r,i,s,t[o+3],10,-1894986606),s=Ce(s,n,r,i,t[o+10],15,-1051523),i=Ce(i,s,n,r,t[o+1],21,-2054922799),r=Ce(r,i,s,n,t[o+8],6,1873313359),n=Ce(n,r,i,s,t[o+15],10,-30611744),s=Ce(s,n,r,i,t[o+6],15,-1560198380),i=Ce(i,s,n,r,t[o+13],21,1309151649),r=Ce(r,i,s,n,t[o+4],6,-145523070),n=Ce(n,r,i,s,t[o+11],10,-1120210379),s=Ce(s,n,r,i,t[o+2],15,718787259),i=Ce(i,s,n,r,t[o+9],21,-343485551),r=Qe(r,a),i=Qe(i,u),s=Qe(s,f),n=Qe(n,c)}return[r,i,s,n]}function Sc(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(va(e)),i=0;i<e;i+=8)r[i>>5]|=(t[i/8]&255)<<i%32;return r}function Qe(t,e){var r=(t&65535)+(e&65535),i=(t>>16)+(e>>16)+(r>>16);return i<<16|r&65535}function Oc(t,e){return t<<e|t>>>32-e}function ar(t,e,r,i,s,n){return Qe(Oc(Qe(Qe(e,t),Qe(i,n)),s),r)}function Se(t,e,r,i,s,n,o){return ar(e&r|~e&i,t,e,s,n,o)}function Oe(t,e,r,i,s,n,o){return ar(e&i|r&~i,t,e,s,n,o)}function Te(t,e,r,i,s,n,o){return ar(e^r^i,t,e,s,n,o)}function Ce(t,e,r,i,s,n,o){return ar(r^(e|~i),t,e,s,n,o)}var Tc=ga("v3",48,wc);const Cc=Tc;function Dc(t,e,r){t=t||{};var i=t.random||(t.rng||ma)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=i[s];return e}return sr(i)}function _c(t,e,r,i){switch(t){case 0:return e&r^~e&i;case 1:return e^r^i;case 2:return e&r^e&i^r&i;case 3:return e^r^i}}function Jr(t,e){return t<<e|t>>>32-e}function Ac(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var i=unescape(encodeURIComponent(t));t=[];for(var s=0;s<i.length;++s)t.push(i.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var n=t.length/4+2,o=Math.ceil(n/16),a=new Array(o),u=0;u<o;++u){for(var f=new Uint32Array(16),c=0;c<16;++c)f[c]=t[u*64+c*4]<<24|t[u*64+c*4+1]<<16|t[u*64+c*4+2]<<8|t[u*64+c*4+3];a[u]=f}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var h=0;h<o;++h){for(var l=new Uint32Array(80),d=0;d<16;++d)l[d]=a[h][d];for(var g=16;g<80;++g)l[g]=Jr(l[g-3]^l[g-8]^l[g-14]^l[g-16],1);for(var w=r[0],O=r[1],x=r[2],v=r[3],y=r[4],C=0;C<80;++C){var _=Math.floor(C/20),E=Jr(w,5)+_c(_,O,x,v)+y+e[_]+l[C]>>>0;y=v,v=x,x=Jr(O,30)>>>0,O=w,w=E}r[0]=r[0]+w>>>0,r[1]=r[1]+O>>>0,r[2]=r[2]+x>>>0,r[3]=r[3]+v>>>0,r[4]=r[4]+y>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var Fc=ga("v5",80,Ac);const Nc=Fc,xc="00000000-0000-0000-0000-000000000000";function Ic(t){if(!or(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const Pc=Object.freeze(Object.defineProperty({__proto__:null,NIL:xc,parse:ya,stringify:sr,v1:mc,v3:Cc,v4:Dc,v5:Nc,validate:or,version:Ic},Symbol.toStringTag,{value:"Module"})),Lc=Vu(Pc),Mc=Mu,Rt=nr,{v1:bd,v4:Rc}=Lc;let $c=class{constructor(e){Rt(e,'must pass "config"'),Rt(e.url,'must pass "url"'),Rt(e.appkey,'must pass "appkey"'),Rt(e.token,"must first get token from cache or getToken interface"),this._config=e}start(e,r){if(typeof e!="function")throw new Error("expect function onmessage");if(typeof r!="function")throw new Error("expect function onclose");return this._ws=new Mc(this._config.url,{headers:{"X-NLS-Token":this._config.token},perMessageDeflate:!1}),this._ws.on("message",(i,s)=>{e(i,s)}),this._ws.on("close",()=>{r()}),new Promise((i,s)=>{this._ws.on("open",()=>{i()}),this._ws.on("error",n=>{s(n)})})}send(e,r){this._ws!=null&&this._ws.send(e,{binary:r})}setPing(e,r){this._ping=setInterval(()=>{this._ws.ping(r)},e)}clearPing(){this._ping&&clearInterval(this._ping)}shutdown(){this._ws!=null&&(this._ping!=null&&clearInterval(this._ping),this._ws.terminate())}uuid(){return Rc().split("-").join("")}defaultContext(){return{sdk:{name:"nls-nodejs-sdk",version:"0.0.1",language:"nodejs"}}}};var kc=$c;nt.EventEmitter;nt.EventEmitter;const jc=kc,qc=nt.EventEmitter;class Bc{constructor(e,r=!1){this._event=new qc,this._config=e,r?this._namespace="SpeechLongSynthesizer":this._namespace="SpeechSynthesizer"}defaultStartParams(e){return{voice:e,format:"wav",sample_rate:16e3,volume:50,speech_rate:0,pitch_rate:0,enable_subtitle:!1}}on(e,r){this._event.on(e,r)}async start(e,r,i){this._client=new jc(this._config),this._taskid=this._client.uuid();let s={header:{message_id:this._client.uuid(),task_id:this._taskid,namespace:this._namespace,name:"StartSynthesis",appkey:this._config.appkey},payload:e,context:this._client.defaultContext()};return new Promise(async(n,o)=>{try{await this._client.start((a,u)=>{if(u)this._event.emit("data",a);else{let f=a.toString(),c=JSON.parse(f);c.header.name==="MetaInfo"?this._event.emit("meta",f):c.header.name==="SynthesisCompleted"?(this._client.clearPing(),this._client.shutdown(),this._client=null,this._event.emit("completed",f),n(f)):c.header.name==="TaskFailed"&&(this._client.clearPing(),this._client.shutdown(),this._client=null,this._event.emit("TaskFailed",f),this._event.emit("failed",f),o(f))}},()=>{this._event.emit("closed")}),r&&(i||(i=6e3),this._client.setPing(i)),this._client.send(JSON.stringify(s),!1)}catch(a){o(a)}})}shutdown(){this._client!=null&&this._client.shutdown()}}var Uc=Bc;const Xc=Nt(Uc),Jt={accessKeyId:"LTAI5tFCh5eoiNZX4n2wEy7Y",accessKeySecret:"XWYRzwspo5z4Ukuo8lKxZX4pUSgQ86",appkey:"JbBUqMYRUt0DrMcK",endpoint:"https://nls-gateway.aliyuncs.com",regionId:"cn-shanghai",ttsUrl:"wss://nls-gateway-cn-shanghai.aliyuncs.com/ws/v1"};require("iconv-lite");function oi(t){return Buffer.from(t,"base64").toString("utf-8")}function Kt(t){switch(J.extname(t).toLowerCase()){case".mp4":return"video/mp4";case".webm":return"video/webm";case".mov":return"video/quicktime";case".avi":return"video/x-msvideo";case".mkv":return"video/x-matroska";case".mp3":return"audio/mpeg";case".wav":return"audio/wav";case".ogg":return"audio/ogg";case".aac":return"audio/aac";case".flac":return"audio/flac";case".jpg":case".jpeg":return"image/jpeg";case".png":return"image/png";default:return"application/octet-stream"}}function bo(t){return new ReadableStream({start(e){t.on("data",r=>{e.enqueue(r)}),t.on("end",()=>{e.close()}),t.on("error",r=>{e.error(r)})},cancel(){t.destroy()}})}var ur={exports:{}},pt={},si={exports:{}},$t={exports:{}},Qr,So;function wa(){if(So)return Qr;So=1;var t=1e3,e=t*60,r=e*60,i=r*24,s=i*7,n=i*365.25;Qr=function(c,h){h=h||{};var l=typeof c;if(l==="string"&&c.length>0)return o(c);if(l==="number"&&isFinite(c))return h.long?u(c):a(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function o(c){if(c=String(c),!(c.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(h){var l=parseFloat(h[1]),d=(h[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return l*n;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*i;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*e;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}function a(c){var h=Math.abs(c);return h>=i?Math.round(c/i)+"d":h>=r?Math.round(c/r)+"h":h>=e?Math.round(c/e)+"m":h>=t?Math.round(c/t)+"s":c+"ms"}function u(c){var h=Math.abs(c);return h>=i?f(c,h,i,"day"):h>=r?f(c,h,r,"hour"):h>=e?f(c,h,e,"minute"):h>=t?f(c,h,t,"second"):c+" ms"}function f(c,h,l,d){var g=h>=l*1.5;return Math.round(c/l)+" "+d+(g?"s":"")}return Qr}var Zr,Oo;function Ea(){if(Oo)return Zr;Oo=1;function t(e){i.debug=i,i.default=i,i.coerce=f,i.disable=a,i.enable=n,i.enabled=u,i.humanize=wa(),i.destroy=c,Object.keys(e).forEach(h=>{i[h]=e[h]}),i.names=[],i.skips=[],i.formatters={};function r(h){let l=0;for(let d=0;d<h.length;d++)l=(l<<5)-l+h.charCodeAt(d),l|=0;return i.colors[Math.abs(l)%i.colors.length]}i.selectColor=r;function i(h){let l,d=null,g,w;function O(...x){if(!O.enabled)return;const v=O,y=Number(new Date),C=y-(l||y);v.diff=C,v.prev=l,v.curr=y,l=y,x[0]=i.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let _=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(D,T)=>{if(D==="%%")return"%";_++;const p=i.formatters[T];if(typeof p=="function"){const S=x[_];D=p.call(v,S),x.splice(_,1),_--}return D}),i.formatArgs.call(v,x),(v.log||i.log).apply(v,x)}return O.namespace=h,O.useColors=i.useColors(),O.color=i.selectColor(h),O.extend=s,O.destroy=i.destroy,Object.defineProperty(O,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(g!==i.namespaces&&(g=i.namespaces,w=i.enabled(h)),w),set:x=>{d=x}}),typeof i.init=="function"&&i.init(O),O}function s(h,l){const d=i(this.namespace+(typeof l>"u"?":":l)+h);return d.log=this.log,d}function n(h){i.save(h),i.namespaces=h,i.names=[],i.skips=[];const l=(typeof h=="string"?h:"").trim().replace(" ",",").split(",").filter(Boolean);for(const d of l)d[0]==="-"?i.skips.push(d.slice(1)):i.names.push(d)}function o(h,l){let d=0,g=0,w=-1,O=0;for(;d<h.length;)if(g<l.length&&(l[g]===h[d]||l[g]==="*"))l[g]==="*"?(w=g,O=d,g++):(d++,g++);else if(w!==-1)g=w+1,O++,d=O;else return!1;for(;g<l.length&&l[g]==="*";)g++;return g===l.length}function a(){const h=[...i.names,...i.skips.map(l=>"-"+l)].join(",");return i.enable(""),h}function u(h){for(const l of i.skips)if(o(h,l))return!1;for(const l of i.names)if(o(h,l))return!0;return!1}function f(h){return h instanceof Error?h.stack||h.message:h}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}return Zr=t,Zr}var To;function Vc(){return To||(To=1,function(t,e){e.formatArgs=i,e.save=s,e.load=n,e.useColors=r,e.storage=o(),e.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;u.splice(1,0,f,"color: inherit");let c=0,h=0;u[0].replace(/%[a-zA-Z%]/g,l=>{l!=="%%"&&(c++,l==="%c"&&(h=c))}),u.splice(h,0,f)}e.log=console.debug||console.log||(()=>{});function s(u){try{u?e.storage.setItem("debug",u):e.storage.removeItem("debug")}catch{}}function n(){let u;try{u=e.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=process.env.DEBUG),u}function o(){try{return localStorage}catch{}}t.exports=Ea()(e);const{formatters:a}=t.exports;a.j=function(u){try{return JSON.stringify(u)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}}($t,$t.exports)),$t.exports}var kt={exports:{}},en,Co;function zc(){return Co||(Co=1,en=(t,e=process.argv)=>{const r=t.startsWith("-")?"":t.length===1?"-":"--",i=e.indexOf(r+t),s=e.indexOf("--");return i!==-1&&(s===-1||i<s)}),en}var tn,Do;function ba(){if(Do)return tn;Do=1;const t=et,e=yi,r=zc(),{env:i}=process;let s;r("no-color")||r("no-colors")||r("color=false")||r("color=never")?s=0:(r("color")||r("colors")||r("color=true")||r("color=always"))&&(s=1),"FORCE_COLOR"in i&&(i.FORCE_COLOR==="true"?s=1:i.FORCE_COLOR==="false"?s=0:s=i.FORCE_COLOR.length===0?1:Math.min(parseInt(i.FORCE_COLOR,10),3));function n(u){return u===0?!1:{level:u,hasBasic:!0,has256:u>=2,has16m:u>=3}}function o(u,f){if(s===0)return 0;if(r("color=16m")||r("color=full")||r("color=truecolor"))return 3;if(r("color=256"))return 2;if(u&&!f&&s===void 0)return 0;const c=s||0;if(i.TERM==="dumb")return c;if(process.platform==="win32"){const h=t.release().split(".");return Number(h[0])>=10&&Number(h[2])>=10586?Number(h[2])>=14931?3:2:1}if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(h=>h in i)||i.CI_NAME==="codeship"?1:c;if("TEAMCITY_VERSION"in i)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION)?1:0;if(i.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in i){const h=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return h>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)||"COLORTERM"in i?1:c}function a(u){const f=o(u,u&&u.isTTY);return n(f)}return tn={supportsColor:a,stdout:n(o(!0,e.isatty(1))),stderr:n(o(!0,e.isatty(2)))},tn}var _o;function Wc(){return _o||(_o=1,function(t,e){const r=yi,i=ht;e.init=c,e.log=a,e.formatArgs=n,e.save=u,e.load=f,e.useColors=s,e.destroy=i.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),e.colors=[6,2,3,4,5,1];try{const l=ba();l&&(l.stderr||l).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}e.inspectOpts=Object.keys(process.env).filter(l=>/^debug_/i.test(l)).reduce((l,d)=>{const g=d.substring(6).toLowerCase().replace(/_([a-z])/g,(O,x)=>x.toUpperCase());let w=process.env[d];return/^(yes|on|true|enabled)$/i.test(w)?w=!0:/^(no|off|false|disabled)$/i.test(w)?w=!1:w==="null"?w=null:w=Number(w),l[g]=w,l},{});function s(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:r.isatty(process.stderr.fd)}function n(l){const{namespace:d,useColors:g}=this;if(g){const w=this.color,O="\x1B[3"+(w<8?w:"8;5;"+w),x=`  ${O};1m${d} \x1B[0m`;l[0]=x+l[0].split(`
`).join(`
`+x),l.push(O+"m+"+t.exports.humanize(this.diff)+"\x1B[0m")}else l[0]=o()+d+" "+l[0]}function o(){return e.inspectOpts.hideDate?"":new Date().toISOString()+" "}function a(...l){return process.stderr.write(i.formatWithOptions(e.inspectOpts,...l)+`
`)}function u(l){l?process.env.DEBUG=l:delete process.env.DEBUG}function f(){return process.env.DEBUG}function c(l){l.inspectOpts={};const d=Object.keys(e.inspectOpts);for(let g=0;g<d.length;g++)l.inspectOpts[d[g]]=e.inspectOpts[d[g]]}t.exports=Ea()(e);const{formatters:h}=t.exports;h.o=function(l){return this.inspectOpts.colors=this.useColors,i.inspect(l,this.inspectOpts).split(`
`).map(d=>d.trim()).join(" ")},h.O=function(l){return this.inspectOpts.colors=this.useColors,i.inspect(l,this.inspectOpts)}}(kt,kt.exports)),kt.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?si.exports=Vc():si.exports=Wc();var Sa=si.exports;const Ao=Ru,Oa=tr,Ta=rr,Hc=mi.parse,Gc=mi.format,$e=Sa("httpx:body"),jt=Sa("httpx:header"),Kc=new Oa.Agent({keepAlive:!0}),Yc=new Ta.Agent({keepAlive:!0}),rn=3e3,Ke=Symbol("TIMER::READ_TIMER"),ai=Symbol("TIMER::READ_TIME_OUT"),Ca=Symbol("TIMER::READ_TIMER_START_AT");function Da(t){switch(t.headers["content-encoding"]){case"gzip":return t.pipe(Ao.createGunzip());case"deflate":return t.pipe(Ao.createInflate());default:return t}}var Fo=function(t,e,r){return t.name=e+t.name,t.message=`${r}. ${t.message}`,t};const gt=function(t){return t!==null&&!isNaN(t)};pt.request=function(t,e){e||(e={});const r=typeof t=="string"?Hc(t):t;let i,s;gt(e.readTimeout)||gt(e.connectTimeout)?(i=gt(e.readTimeout)?Number(e.readTimeout):rn,s=gt(e.connectTimeout)?Number(e.connectTimeout):rn):gt(e.timeout)?i=s=Number(e.timeout):i=s=rn;const n=r.protocol==="https:",o=(e.method||"GET").toUpperCase(),a=n?Yc:Kc,u=e.agent||a;var f={host:r.hostname||"localhost",path:r.path||"/",method:o,port:r.port||(r.protocol==="https:"?443:80),agent:u,headers:e.headers||{},key:e.key||"",cert:e.cert||"",ca:e.ca||"",timeout:s};n&&typeof e.rejectUnauthorized<"u"&&(f.rejectUnauthorized=e.rejectUnauthorized),e.compression&&(f.headers["accept-encoding"]="gzip,deflate");const c=n?Ta:Oa;return typeof e.beforeRequest=="function"&&(f=e.beforeRequest(f)),new Promise((h,l)=>{const d=c.request(f),g=e.data;var w=y=>{jt.enabled&&(y.req._header.split(`\r
`).forEach(_=>{jt("> %s",_)}),jt("< HTTP/%s %s %s",y.httpVersion,y.statusCode,y.statusMessage),Object.keys(y.headers).forEach(_=>{jt("< %s: %s",_,y.headers[_])})),h(y)},O=y=>{y.message+=`${o} ${Gc(r)} failed.`,d.socket&&d.socket[Ke]&&clearTimeout(d.socket[Ke]),l(y)},x=y=>{d.abort(),O(y)};const v=function(y){const C=setTimeout(()=>{y[Ke]&&(clearTimeout(y[Ke]),y[Ke]=null);var _=new Error,E=`ReadTimeout(${i})`;x(Fo(_,"RequestTimeout",E))},i);y[ai]=i,y[Ke]=C,y[Ca]=Date.now(),C.unref()};!g||typeof g=="string"||g instanceof Buffer?($e.enabled&&$e(g?typeof g=="string"?g:`Buffer <ignored>, Buffer length: ${g.length}`:"<no request body>"),d.end(g)):typeof g.pipe=="function"&&(g.pipe(d),$e.enabled&&$e("<request body is a stream>"),g.once("error",y=>{x(Fo(y,"HttpX","Stream occor error"))})),d.on("timeout",()=>{var y=new Error;y.name="RequestTimeoutError",y.message=`ConnectTimeout: Connect ${t} failed.`,d.destroy(),l(y)}),d.on("response",w),d.on("error",O),d.once("socket",function(y){y.readyState==="opening"?y.once("connect",function(){v(y)}):v(y)})})};pt.read=function(t,e){const r=Da(t);return new Promise((i,s)=>{const n=t.socket||t.client,o=()=>{const O=t.req;var x=new Error;return x.name="RequestTimeoutError",x.message=`ReadTimeout: ${n[ai]}. ${O.method} ${O.path} failed.`,x};let a;const u=n[Ke];if(!u){s(o());return}const f=n[ai]-(Date.now()-n[Ca]);if(clearTimeout(u),f<=0){s(o());return}a=setTimeout(function(){s(o())},f);var c,h,l,d=function(){r.removeListener("error",c),r.removeListener("data",h),r.removeListener("end",l),a&&clearTimeout(a)};const g=[];var w=0;h=function(O){g.push(O),w+=O.length},c=function(O){d(),s(O)},l=function(){d();var O=Buffer.concat(g,w);if($e(""),e){const x=O.toString(e);return $e(x),i(x)}$e.enabled&&$e(O.toString()),i(O)},r.on("error",c),r.on("data",h),r.on("end",l)})};function Jc(t){return new Promise((e,r)=>{var i,s,n,o=function(){t.removeListener("error",n),t.removeListener("end",s),t.removeListener("readable",i)};i=function(){o(),e(!1)},s=function(){o(),e(!0)},n=function(a){o(),r(a)},t.once("readable",i),t.once("end",s),t.once("error",n)})}class _a{constructor(e,r,i,s){this.id=e,this.event=r,this.data=i,this.retry=s}}pt.Event=_a;const No="data:",xo="event:",Io="id:",Po="retry:";function Qc(t){for(let e=0;e<t.length;e++){const r=t.charAt(e);if(r<"0"||r>"9")return!1}return t.length>0}function Zc(t,e){const r=t+e;let i=0;const s=[];for(let o=0;o<r.length-1;o++){const a=r[o],u=r[o+1];if(a===`
`&&u===`
`){const c=r.substring(i,o).split(`
`),h=new _a;c.forEach(l=>{if(l.startsWith(No))h.data=l.substring(No.length).trim();else if(l.startsWith(xo))h.event=l.substring(xo.length).trim();else if(l.startsWith(Io))h.id=l.substring(Io.length).trim();else if(l.startsWith(Po)){const d=l.substring(Po.length).trim();Qc(d)&&(h.retry=parseInt(d,10))}else l.startsWith(":")}),s.push(h),i=o+2}}const n=r.substring(i);return[s,n]}pt.readAsSSE=async function*(t){const e=Da(t),r=t.socket||t.client;clearTimeout(r[Ke]);let i="";for(;;){if(await Jc(e))return;let n;for(;(n=e.read())!==null;){const[o,a]=Zc(i,n.toString());if(i=a,o&&o.length>0)for(const u of o)yield u}}};var vi={};(function(t){const e=ce,r=et,i=Le;t.loadJSONSync=function(s){var n=e.readFileSync(s,"utf8");n.charCodeAt(0)===65279&&(n=n.slice(1));try{return JSON.parse(n)}catch(o){throw o.message=s+": "+o.message,o}},t.encode=function(s,n){return typeof s!="string"&&(s=""+s),new Buffer(s,n)},t.makeHasher=function(s){return function(n,o){var a=i.createHash(s);return a.update(n),a.digest(o)}},t.createHash=t.makeHasher,t.md5=t.makeHasher("md5"),t.createHmac=function(s){return function(n,o,a){return i.createHmac(s,o).update(n).digest(a)}},t.sha1=t.createHmac("sha1"),t.random=function(s,n){return Math.floor(s+Math.random()*(n-s))},t.makeNonce=function(){var s=0,n;const o=r.hostname(),a=process.pid;return function(){var u=Math.floor(Math.random()*1e12);u===n?s++:s=0,n=u;var f=`${o}${a}${u}${s}`;return t.md5(f,"hex")}}(),t.pad2=function(s){return s<10?"0"+s:""+s},t.pad3=function(s){return s<10?"00"+s:s<100?"0"+s:""+s},t.getYYYYMMDD=function(s){var n=s.getFullYear(),o=t.pad2(s.getMonth()+1),a=t.pad2(s.getDate());return""+n+o+a},t.sleep=function(s){return new Promise(n=>{setTimeout(n,s)})},t.getIPv4=function(){for(var s=r.networkInterfaces(),n=Object.keys(s),o=0;o<n.length;o++)for(var a=n[o],u=s[a],f=0;f<u.length;f++){var c=u[f];if(!c.internal&&c.family==="IPv4")return c.address}return""},t.getMac=function(){for(var s=r.networkInterfaces(),n=Object.keys(s),o=0;o<n.length;o++)for(var a=n[o],u=s[a],f=0;f<u.length;f++){var c=u[f];if(!c.internal&&c.family==="IPv4")return c.mac}return"00:00:00:00:00:00"}})(vi);var cr={exports:{}},Aa={exports:{}},Fa={exports:{}};(function(t){(function(e){var r,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,n=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",u=1e14,f=14,c=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],l=1e7,d=1e9;function g(E){var D,T,p,S=W.prototype={constructor:W,toString:null,valueOf:null},A=new W(1),L=20,U=4,z=-7,H=21,K=-1e7,G=1e7,se=!1,te=1,ge=0,de={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},_e="0123456789abcdefghijklmnopqrstuvwxyz",ze=!0;function W(m,N){var I,k,M,R,B,P,$,q,j=this;if(!(j instanceof W))return new W(m,N);if(N==null){if(m&&m._isBigNumber===!0){j.s=m.s,!m.c||m.e>G?j.c=j.e=null:m.e<K?j.c=[j.e=0]:(j.e=m.e,j.c=m.c.slice());return}if((P=typeof m=="number")&&m*0==0){if(j.s=1/m<0?(m=-m,-1):1,m===~~m){for(R=0,B=m;B>=10;B/=10,R++);R>G?j.c=j.e=null:(j.e=R,j.c=[m]);return}q=String(m)}else{if(!i.test(q=String(m)))return p(j,q,P);j.s=q.charCodeAt(0)==45?(q=q.slice(1),-1):1}(R=q.indexOf("."))>-1&&(q=q.replace(".","")),(B=q.search(/e/i))>0?(R<0&&(R=B),R+=+q.slice(B+1),q=q.substring(0,B)):R<0&&(R=q.length)}else{if(v(N,2,_e.length,"Base"),N==10&&ze)return j=new W(m),b(j,L+j.e+1,U);if(q=String(m),P=typeof m=="number"){if(m*0!=0)return p(j,q,P,N);if(j.s=1/m<0?(q=q.slice(1),-1):1,W.DEBUG&&q.replace(/^0\.0*|\./,"").length>15)throw Error(a+m)}else j.s=q.charCodeAt(0)===45?(q=q.slice(1),-1):1;for(I=_e.slice(0,N),R=B=0,$=q.length;B<$;B++)if(I.indexOf(k=q.charAt(B))<0){if(k=="."){if(B>R){R=$;continue}}else if(!M&&(q==q.toUpperCase()&&(q=q.toLowerCase())||q==q.toLowerCase()&&(q=q.toUpperCase()))){M=!0,B=-1,R=0;continue}return p(j,String(m),P,N)}P=!1,q=T(q,N,10,j.s),(R=q.indexOf("."))>-1?q=q.replace(".",""):R=q.length}for(B=0;q.charCodeAt(B)===48;B++);for($=q.length;q.charCodeAt(--$)===48;);if(q=q.slice(B,++$)){if($-=B,P&&W.DEBUG&&$>15&&(m>c||m!==n(m)))throw Error(a+j.s*m);if((R=R-B-1)>G)j.c=j.e=null;else if(R<K)j.c=[j.e=0];else{if(j.e=R,j.c=[],B=(R+1)%f,R<0&&(B+=f),B<$){for(B&&j.c.push(+q.slice(0,B)),$-=f;B<$;)j.c.push(+q.slice(B,B+=f));B=f-(q=q.slice(B)).length}else B-=$;for(;B--;q+="0");j.c.push(+q)}}else j.c=[j.e=0]}W.clone=g,W.ROUND_UP=0,W.ROUND_DOWN=1,W.ROUND_CEIL=2,W.ROUND_FLOOR=3,W.ROUND_HALF_UP=4,W.ROUND_HALF_DOWN=5,W.ROUND_HALF_EVEN=6,W.ROUND_HALF_CEIL=7,W.ROUND_HALF_FLOOR=8,W.EUCLID=9,W.config=W.set=function(m){var N,I;if(m!=null)if(typeof m=="object"){if(m.hasOwnProperty(N="DECIMAL_PLACES")&&(I=m[N],v(I,0,d,N),L=I),m.hasOwnProperty(N="ROUNDING_MODE")&&(I=m[N],v(I,0,8,N),U=I),m.hasOwnProperty(N="EXPONENTIAL_AT")&&(I=m[N],I&&I.pop?(v(I[0],-d,0,N),v(I[1],0,d,N),z=I[0],H=I[1]):(v(I,-d,d,N),z=-(H=I<0?-I:I))),m.hasOwnProperty(N="RANGE"))if(I=m[N],I&&I.pop)v(I[0],-d,-1,N),v(I[1],1,d,N),K=I[0],G=I[1];else if(v(I,-d,d,N),I)K=-(G=I<0?-I:I);else throw Error(o+N+" cannot be zero: "+I);if(m.hasOwnProperty(N="CRYPTO"))if(I=m[N],I===!!I)if(I)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))se=I;else throw se=!I,Error(o+"crypto unavailable");else se=I;else throw Error(o+N+" not true or false: "+I);if(m.hasOwnProperty(N="MODULO_MODE")&&(I=m[N],v(I,0,9,N),te=I),m.hasOwnProperty(N="POW_PRECISION")&&(I=m[N],v(I,0,d,N),ge=I),m.hasOwnProperty(N="FORMAT"))if(I=m[N],typeof I=="object")de=I;else throw Error(o+N+" not an object: "+I);if(m.hasOwnProperty(N="ALPHABET"))if(I=m[N],typeof I=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(I))ze=I.slice(0,10)=="0123456789",_e=I;else throw Error(o+N+" invalid: "+I)}else throw Error(o+"Object expected: "+m);return{DECIMAL_PLACES:L,ROUNDING_MODE:U,EXPONENTIAL_AT:[z,H],RANGE:[K,G],CRYPTO:se,MODULO_MODE:te,POW_PRECISION:ge,FORMAT:de,ALPHABET:_e}},W.isBigNumber=function(m){if(!m||m._isBigNumber!==!0)return!1;if(!W.DEBUG)return!0;var N,I,k=m.c,M=m.e,R=m.s;e:if({}.toString.call(k)=="[object Array]"){if((R===1||R===-1)&&M>=-d&&M<=d&&M===n(M)){if(k[0]===0){if(M===0&&k.length===1)return!0;break e}if(N=(M+1)%f,N<1&&(N+=f),String(k[0]).length==N){for(N=0;N<k.length;N++)if(I=k[N],I<0||I>=u||I!==n(I))break e;if(I!==0)return!0}}}else if(k===null&&M===null&&(R===null||R===1||R===-1))return!0;throw Error(o+"Invalid BigNumber: "+m)},W.maximum=W.max=function(){return Pt(arguments,-1)},W.minimum=W.min=function(){return Pt(arguments,1)},W.random=function(){var m=9007199254740992,N=Math.random()*m&2097151?function(){return n(Math.random()*m)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(I){var k,M,R,B,P,$=0,q=[],j=new W(A);if(I==null?I=L:v(I,0,d),B=s(I/f),se)if(crypto.getRandomValues){for(k=crypto.getRandomValues(new Uint32Array(B*=2));$<B;)P=k[$]*131072+(k[$+1]>>>11),P>=9e15?(M=crypto.getRandomValues(new Uint32Array(2)),k[$]=M[0],k[$+1]=M[1]):(q.push(P%1e14),$+=2);$=B/2}else if(crypto.randomBytes){for(k=crypto.randomBytes(B*=7);$<B;)P=(k[$]&31)*281474976710656+k[$+1]*1099511627776+k[$+2]*4294967296+k[$+3]*16777216+(k[$+4]<<16)+(k[$+5]<<8)+k[$+6],P>=9e15?crypto.randomBytes(7).copy(k,$):(q.push(P%1e14),$+=7);$=B/7}else throw se=!1,Error(o+"crypto unavailable");if(!se)for(;$<B;)P=N(),P<9e15&&(q[$++]=P%1e14);for(B=q[--$],I%=f,B&&I&&(P=h[f-I],q[$]=n(B/P)*P);q[$]===0;q.pop(),$--);if($<0)q=[R=0];else{for(R=-1;q[0]===0;q.splice(0,1),R-=f);for($=1,P=q[0];P>=10;P/=10,$++);$<f&&(R-=f-$)}return j.e=R,j.c=q,j}}(),W.sum=function(){for(var m=1,N=arguments,I=new W(N[0]);m<N.length;)I=I.plus(N[m++]);return I},T=function(){var m="0123456789";function N(I,k,M,R){for(var B,P=[0],$,q=0,j=I.length;q<j;){for($=P.length;$--;P[$]*=k);for(P[0]+=R.indexOf(I.charAt(q++)),B=0;B<P.length;B++)P[B]>M-1&&(P[B+1]==null&&(P[B+1]=0),P[B+1]+=P[B]/M|0,P[B]%=M)}return P.reverse()}return function(I,k,M,R,B){var P,$,q,j,V,Y,Q,oe,fe=I.indexOf("."),me=L,ie=U;for(fe>=0&&(j=ge,ge=0,I=I.replace(".",""),oe=new W(k),Y=oe.pow(I.length-fe),ge=j,oe.c=N(_(O(Y.c),Y.e,"0"),10,M,m),oe.e=oe.c.length),Q=N(I,k,M,B?(P=_e,m):(P=m,_e)),q=j=Q.length;Q[--j]==0;Q.pop());if(!Q[0])return P.charAt(0);if(fe<0?--q:(Y.c=Q,Y.e=q,Y.s=R,Y=D(Y,oe,me,ie,M),Q=Y.c,V=Y.r,q=Y.e),$=q+me+1,fe=Q[$],j=M/2,V=V||$<0||Q[$+1]!=null,V=ie<4?(fe!=null||V)&&(ie==0||ie==(Y.s<0?3:2)):fe>j||fe==j&&(ie==4||V||ie==6&&Q[$-1]&1||ie==(Y.s<0?8:7)),$<1||!Q[0])I=V?_(P.charAt(1),-me,P.charAt(0)):P.charAt(0);else{if(Q.length=$,V)for(--M;++Q[--$]>M;)Q[$]=0,$||(++q,Q=[1].concat(Q));for(j=Q.length;!Q[--j];);for(fe=0,I="";fe<=j;I+=P.charAt(Q[fe++]));I=_(I,q,P.charAt(0))}return I}}(),D=function(){function m(k,M,R){var B,P,$,q,j=0,V=k.length,Y=M%l,Q=M/l|0;for(k=k.slice();V--;)$=k[V]%l,q=k[V]/l|0,B=Q*$+q*Y,P=Y*$+B%l*l+j,j=(P/R|0)+(B/l|0)+Q*q,k[V]=P%R;return j&&(k=[j].concat(k)),k}function N(k,M,R,B){var P,$;if(R!=B)$=R>B?1:-1;else for(P=$=0;P<R;P++)if(k[P]!=M[P]){$=k[P]>M[P]?1:-1;break}return $}function I(k,M,R,B){for(var P=0;R--;)k[R]-=P,P=k[R]<M[R]?1:0,k[R]=P*B+k[R]-M[R];for(;!k[0]&&k.length>1;k.splice(0,1));}return function(k,M,R,B,P){var $,q,j,V,Y,Q,oe,fe,me,ie,ue,be,Lt,yr,gr,Me,yt,Ie=k.s==M.s?1:-1,Ae=k.c,he=M.c;if(!Ae||!Ae[0]||!he||!he[0])return new W(!k.s||!M.s||(Ae?he&&Ae[0]==he[0]:!he)?NaN:Ae&&Ae[0]==0||!he?Ie*0:Ie/0);for(fe=new W(Ie),me=fe.c=[],q=k.e-M.e,Ie=R+q+1,P||(P=u,q=w(k.e/f)-w(M.e/f),Ie=Ie/f|0),j=0;he[j]==(Ae[j]||0);j++);if(he[j]>(Ae[j]||0)&&q--,Ie<0)me.push(1),V=!0;else{for(yr=Ae.length,Me=he.length,j=0,Ie+=2,Y=n(P/(he[0]+1)),Y>1&&(he=m(he,Y,P),Ae=m(Ae,Y,P),Me=he.length,yr=Ae.length),Lt=Me,ie=Ae.slice(0,Me),ue=ie.length;ue<Me;ie[ue++]=0);yt=he.slice(),yt=[0].concat(yt),gr=he[0],he[1]>=P/2&&gr++;do{if(Y=0,$=N(he,ie,Me,ue),$<0){if(be=ie[0],Me!=ue&&(be=be*P+(ie[1]||0)),Y=n(be/gr),Y>1)for(Y>=P&&(Y=P-1),Q=m(he,Y,P),oe=Q.length,ue=ie.length;N(Q,ie,oe,ue)==1;)Y--,I(Q,Me<oe?yt:he,oe,P),oe=Q.length,$=1;else Y==0&&($=Y=1),Q=he.slice(),oe=Q.length;if(oe<ue&&(Q=[0].concat(Q)),I(ie,Q,ue,P),ue=ie.length,$==-1)for(;N(he,ie,Me,ue)<1;)Y++,I(ie,Me<ue?yt:he,ue,P),ue=ie.length}else $===0&&(Y++,ie=[0]);me[j++]=Y,ie[0]?ie[ue++]=Ae[Lt]||0:(ie=[Ae[Lt]],ue=1)}while((Lt++<yr||ie[0]!=null)&&Ie--);V=ie[0]!=null,me[0]||me.splice(0,1)}if(P==u){for(j=1,Ie=me[0];Ie>=10;Ie/=10,j++);b(fe,R+(fe.e=j+q*f-1)+1,B,V)}else fe.e=q,fe.r=+V;return fe}}();function st(m,N,I,k){var M,R,B,P,$;if(I==null?I=U:v(I,0,8),!m.c)return m.toString();if(M=m.c[0],B=m.e,N==null)$=O(m.c),$=k==1||k==2&&(B<=z||B>=H)?C($,B):_($,B,"0");else if(m=b(new W(m),N,I),R=m.e,$=O(m.c),P=$.length,k==1||k==2&&(N<=R||R<=z)){for(;P<N;$+="0",P++);$=C($,R)}else if(N-=B,$=_($,R,"0"),R+1>P){if(--N>0)for($+=".";N--;$+="0");}else if(N+=R-P,N>0)for(R+1==P&&($+=".");N--;$+="0");return m.s<0&&M?"-"+$:$}function Pt(m,N){for(var I,k,M=1,R=new W(m[0]);M<m.length;M++)k=new W(m[M]),(!k.s||(I=x(R,k))===N||I===0&&R.s===N)&&(R=k);return R}function F(m,N,I){for(var k=1,M=N.length;!N[--M];N.pop());for(M=N[0];M>=10;M/=10,k++);return(I=k+I*f-1)>G?m.c=m.e=null:I<K?m.c=[m.e=0]:(m.e=I,m.c=N),m}p=function(){var m=/^(-?)0([xbo])(?=\w[\w.]*$)/i,N=/^([^.]+)\.$/,I=/^\.([^.]+)$/,k=/^-?(Infinity|NaN)$/,M=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(R,B,P,$){var q,j=P?B:B.replace(M,"");if(k.test(j))R.s=isNaN(j)?null:j<0?-1:1;else{if(!P&&(j=j.replace(m,function(V,Y,Q){return q=(Q=Q.toLowerCase())=="x"?16:Q=="b"?2:8,!$||$==q?Y:V}),$&&(q=$,j=j.replace(N,"$1").replace(I,"0.$1")),B!=j))return new W(j,q);if(W.DEBUG)throw Error(o+"Not a"+($?" base "+$:"")+" number: "+B);R.s=null}R.c=R.e=null}}();function b(m,N,I,k){var M,R,B,P,$,q,j,V=m.c,Y=h;if(V){e:{for(M=1,P=V[0];P>=10;P/=10,M++);if(R=N-M,R<0)R+=f,B=N,$=V[q=0],j=n($/Y[M-B-1]%10);else if(q=s((R+1)/f),q>=V.length)if(k){for(;V.length<=q;V.push(0));$=j=0,M=1,R%=f,B=R-f+1}else break e;else{for($=P=V[q],M=1;P>=10;P/=10,M++);R%=f,B=R-f+M,j=B<0?0:n($/Y[M-B-1]%10)}if(k=k||N<0||V[q+1]!=null||(B<0?$:$%Y[M-B-1]),k=I<4?(j||k)&&(I==0||I==(m.s<0?3:2)):j>5||j==5&&(I==4||k||I==6&&(R>0?B>0?$/Y[M-B]:0:V[q-1])%10&1||I==(m.s<0?8:7)),N<1||!V[0])return V.length=0,k?(N-=m.e+1,V[0]=Y[(f-N%f)%f],m.e=-N||0):V[0]=m.e=0,m;if(R==0?(V.length=q,P=1,q--):(V.length=q+1,P=Y[f-R],V[q]=B>0?n($/Y[M-B]%Y[B])*P:0),k)for(;;)if(q==0){for(R=1,B=V[0];B>=10;B/=10,R++);for(B=V[0]+=P,P=1;B>=10;B/=10,P++);R!=P&&(m.e++,V[0]==u&&(V[0]=1));break}else{if(V[q]+=P,V[q]!=u)break;V[q--]=0,P=1}for(R=V.length;V[--R]===0;V.pop());}m.e>G?m.c=m.e=null:m.e<K&&(m.c=[m.e=0])}return m}function X(m){var N,I=m.e;return I===null?m.toString():(N=O(m.c),N=I<=z||I>=H?C(N,I):_(N,I,"0"),m.s<0?"-"+N:N)}return S.absoluteValue=S.abs=function(){var m=new W(this);return m.s<0&&(m.s=1),m},S.comparedTo=function(m,N){return x(this,new W(m,N))},S.decimalPlaces=S.dp=function(m,N){var I,k,M,R=this;if(m!=null)return v(m,0,d),N==null?N=U:v(N,0,8),b(new W(R),m+R.e+1,N);if(!(I=R.c))return null;if(k=((M=I.length-1)-w(this.e/f))*f,M=I[M])for(;M%10==0;M/=10,k--);return k<0&&(k=0),k},S.dividedBy=S.div=function(m,N){return D(this,new W(m,N),L,U)},S.dividedToIntegerBy=S.idiv=function(m,N){return D(this,new W(m,N),0,1)},S.exponentiatedBy=S.pow=function(m,N){var I,k,M,R,B,P,$,q,j,V=this;if(m=new W(m),m.c&&!m.isInteger())throw Error(o+"Exponent not an integer: "+X(m));if(N!=null&&(N=new W(N)),P=m.e>14,!V.c||!V.c[0]||V.c[0]==1&&!V.e&&V.c.length==1||!m.c||!m.c[0])return j=new W(Math.pow(+X(V),P?m.s*(2-y(m)):+X(m))),N?j.mod(N):j;if($=m.s<0,N){if(N.c?!N.c[0]:!N.s)return new W(NaN);k=!$&&V.isInteger()&&N.isInteger(),k&&(V=V.mod(N))}else{if(m.e>9&&(V.e>0||V.e<-1||(V.e==0?V.c[0]>1||P&&V.c[1]>=24e7:V.c[0]<8e13||P&&V.c[0]<=9999975e7)))return R=V.s<0&&y(m)?-0:0,V.e>-1&&(R=1/R),new W($?1/R:R);ge&&(R=s(ge/f+2))}for(P?(I=new W(.5),$&&(m.s=1),q=y(m)):(M=Math.abs(+X(m)),q=M%2),j=new W(A);;){if(q){if(j=j.times(V),!j.c)break;R?j.c.length>R&&(j.c.length=R):k&&(j=j.mod(N))}if(M){if(M=n(M/2),M===0)break;q=M%2}else if(m=m.times(I),b(m,m.e+1,1),m.e>14)q=y(m);else{if(M=+X(m),M===0)break;q=M%2}V=V.times(V),R?V.c&&V.c.length>R&&(V.c.length=R):k&&(V=V.mod(N))}return k?j:($&&(j=A.div(j)),N?j.mod(N):R?b(j,ge,U,B):j)},S.integerValue=function(m){var N=new W(this);return m==null?m=U:v(m,0,8),b(N,N.e+1,m)},S.isEqualTo=S.eq=function(m,N){return x(this,new W(m,N))===0},S.isFinite=function(){return!!this.c},S.isGreaterThan=S.gt=function(m,N){return x(this,new W(m,N))>0},S.isGreaterThanOrEqualTo=S.gte=function(m,N){return(N=x(this,new W(m,N)))===1||N===0},S.isInteger=function(){return!!this.c&&w(this.e/f)>this.c.length-2},S.isLessThan=S.lt=function(m,N){return x(this,new W(m,N))<0},S.isLessThanOrEqualTo=S.lte=function(m,N){return(N=x(this,new W(m,N)))===-1||N===0},S.isNaN=function(){return!this.s},S.isNegative=function(){return this.s<0},S.isPositive=function(){return this.s>0},S.isZero=function(){return!!this.c&&this.c[0]==0},S.minus=function(m,N){var I,k,M,R,B=this,P=B.s;if(m=new W(m,N),N=m.s,!P||!N)return new W(NaN);if(P!=N)return m.s=-N,B.plus(m);var $=B.e/f,q=m.e/f,j=B.c,V=m.c;if(!$||!q){if(!j||!V)return j?(m.s=-N,m):new W(V?B:NaN);if(!j[0]||!V[0])return V[0]?(m.s=-N,m):new W(j[0]?B:U==3?-0:0)}if($=w($),q=w(q),j=j.slice(),P=$-q){for((R=P<0)?(P=-P,M=j):(q=$,M=V),M.reverse(),N=P;N--;M.push(0));M.reverse()}else for(k=(R=(P=j.length)<(N=V.length))?P:N,P=N=0;N<k;N++)if(j[N]!=V[N]){R=j[N]<V[N];break}if(R&&(M=j,j=V,V=M,m.s=-m.s),N=(k=V.length)-(I=j.length),N>0)for(;N--;j[I++]=0);for(N=u-1;k>P;){if(j[--k]<V[k]){for(I=k;I&&!j[--I];j[I]=N);--j[I],j[k]+=u}j[k]-=V[k]}for(;j[0]==0;j.splice(0,1),--q);return j[0]?F(m,j,q):(m.s=U==3?-1:1,m.c=[m.e=0],m)},S.modulo=S.mod=function(m,N){var I,k,M=this;return m=new W(m,N),!M.c||!m.s||m.c&&!m.c[0]?new W(NaN):!m.c||M.c&&!M.c[0]?new W(M):(te==9?(k=m.s,m.s=1,I=D(M,m,0,3),m.s=k,I.s*=k):I=D(M,m,0,te),m=M.minus(I.times(m)),!m.c[0]&&te==1&&(m.s=M.s),m)},S.multipliedBy=S.times=function(m,N){var I,k,M,R,B,P,$,q,j,V,Y,Q,oe,fe,me,ie=this,ue=ie.c,be=(m=new W(m,N)).c;if(!ue||!be||!ue[0]||!be[0])return!ie.s||!m.s||ue&&!ue[0]&&!be||be&&!be[0]&&!ue?m.c=m.e=m.s=null:(m.s*=ie.s,!ue||!be?m.c=m.e=null:(m.c=[0],m.e=0)),m;for(k=w(ie.e/f)+w(m.e/f),m.s*=ie.s,$=ue.length,V=be.length,$<V&&(oe=ue,ue=be,be=oe,M=$,$=V,V=M),M=$+V,oe=[];M--;oe.push(0));for(fe=u,me=l,M=V;--M>=0;){for(I=0,Y=be[M]%me,Q=be[M]/me|0,B=$,R=M+B;R>M;)q=ue[--B]%me,j=ue[B]/me|0,P=Q*q+j*Y,q=Y*q+P%me*me+oe[R]+I,I=(q/fe|0)+(P/me|0)+Q*j,oe[R--]=q%fe;oe[R]=I}return I?++k:oe.splice(0,1),F(m,oe,k)},S.negated=function(){var m=new W(this);return m.s=-m.s||null,m},S.plus=function(m,N){var I,k=this,M=k.s;if(m=new W(m,N),N=m.s,!M||!N)return new W(NaN);if(M!=N)return m.s=-N,k.minus(m);var R=k.e/f,B=m.e/f,P=k.c,$=m.c;if(!R||!B){if(!P||!$)return new W(M/0);if(!P[0]||!$[0])return $[0]?m:new W(P[0]?k:M*0)}if(R=w(R),B=w(B),P=P.slice(),M=R-B){for(M>0?(B=R,I=$):(M=-M,I=P),I.reverse();M--;I.push(0));I.reverse()}for(M=P.length,N=$.length,M-N<0&&(I=$,$=P,P=I,N=M),M=0;N;)M=(P[--N]=P[N]+$[N]+M)/u|0,P[N]=u===P[N]?0:P[N]%u;return M&&(P=[M].concat(P),++B),F(m,P,B)},S.precision=S.sd=function(m,N){var I,k,M,R=this;if(m!=null&&m!==!!m)return v(m,1,d),N==null?N=U:v(N,0,8),b(new W(R),m,N);if(!(I=R.c))return null;if(M=I.length-1,k=M*f+1,M=I[M]){for(;M%10==0;M/=10,k--);for(M=I[0];M>=10;M/=10,k++);}return m&&R.e+1>k&&(k=R.e+1),k},S.shiftedBy=function(m){return v(m,-c,c),this.times("1e"+m)},S.squareRoot=S.sqrt=function(){var m,N,I,k,M,R=this,B=R.c,P=R.s,$=R.e,q=L+4,j=new W("0.5");if(P!==1||!B||!B[0])return new W(!P||P<0&&(!B||B[0])?NaN:B?R:1/0);if(P=Math.sqrt(+X(R)),P==0||P==1/0?(N=O(B),(N.length+$)%2==0&&(N+="0"),P=Math.sqrt(+N),$=w(($+1)/2)-($<0||$%2),P==1/0?N="5e"+$:(N=P.toExponential(),N=N.slice(0,N.indexOf("e")+1)+$),I=new W(N)):I=new W(P+""),I.c[0]){for($=I.e,P=$+q,P<3&&(P=0);;)if(M=I,I=j.times(M.plus(D(R,M,q,1))),O(M.c).slice(0,P)===(N=O(I.c)).slice(0,P))if(I.e<$&&--P,N=N.slice(P-3,P+1),N=="9999"||!k&&N=="4999"){if(!k&&(b(M,M.e+L+2,0),M.times(M).eq(R))){I=M;break}q+=4,P+=4,k=1}else{(!+N||!+N.slice(1)&&N.charAt(0)=="5")&&(b(I,I.e+L+2,1),m=!I.times(I).eq(R));break}}return b(I,I.e+L+1,U,m)},S.toExponential=function(m,N){return m!=null&&(v(m,0,d),m++),st(this,m,N,1)},S.toFixed=function(m,N){return m!=null&&(v(m,0,d),m=m+this.e+1),st(this,m,N)},S.toFormat=function(m,N,I){var k,M=this;if(I==null)m!=null&&N&&typeof N=="object"?(I=N,N=null):m&&typeof m=="object"?(I=m,m=N=null):I=de;else if(typeof I!="object")throw Error(o+"Argument not an object: "+I);if(k=M.toFixed(m,N),M.c){var R,B=k.split("."),P=+I.groupSize,$=+I.secondaryGroupSize,q=I.groupSeparator||"",j=B[0],V=B[1],Y=M.s<0,Q=Y?j.slice(1):j,oe=Q.length;if($&&(R=P,P=$,$=R,oe-=R),P>0&&oe>0){for(R=oe%P||P,j=Q.substr(0,R);R<oe;R+=P)j+=q+Q.substr(R,P);$>0&&(j+=q+Q.slice(R)),Y&&(j="-"+j)}k=V?j+(I.decimalSeparator||"")+(($=+I.fractionGroupSize)?V.replace(new RegExp("\\d{"+$+"}\\B","g"),"$&"+(I.fractionGroupSeparator||"")):V):j}return(I.prefix||"")+k+(I.suffix||"")},S.toFraction=function(m){var N,I,k,M,R,B,P,$,q,j,V,Y,Q=this,oe=Q.c;if(m!=null&&(P=new W(m),!P.isInteger()&&(P.c||P.s!==1)||P.lt(A)))throw Error(o+"Argument "+(P.isInteger()?"out of range: ":"not an integer: ")+X(P));if(!oe)return new W(Q);for(N=new W(A),q=I=new W(A),k=$=new W(A),Y=O(oe),R=N.e=Y.length-Q.e-1,N.c[0]=h[(B=R%f)<0?f+B:B],m=!m||P.comparedTo(N)>0?R>0?N:q:P,B=G,G=1/0,P=new W(Y),$.c[0]=0;j=D(P,N,0,1),M=I.plus(j.times(k)),M.comparedTo(m)!=1;)I=k,k=M,q=$.plus(j.times(M=q)),$=M,N=P.minus(j.times(M=N)),P=M;return M=D(m.minus(I),k,0,1),$=$.plus(M.times(q)),I=I.plus(M.times(k)),$.s=q.s=Q.s,R=R*2,V=D(q,k,R,U).minus(Q).abs().comparedTo(D($,I,R,U).minus(Q).abs())<1?[q,k]:[$,I],G=B,V},S.toNumber=function(){return+X(this)},S.toPrecision=function(m,N){return m!=null&&v(m,1,d),st(this,m,N,2)},S.toString=function(m){var N,I=this,k=I.s,M=I.e;return M===null?k?(N="Infinity",k<0&&(N="-"+N)):N="NaN":(m==null?N=M<=z||M>=H?C(O(I.c),M):_(O(I.c),M,"0"):m===10&&ze?(I=b(new W(I),L+M+1,U),N=_(O(I.c),I.e,"0")):(v(m,2,_e.length,"Base"),N=T(_(O(I.c),M,"0"),10,m,k,!0)),k<0&&I.c[0]&&(N="-"+N)),N},S.valueOf=S.toJSON=function(){return X(this)},S._isBigNumber=!0,E!=null&&W.set(E),W}function w(E){var D=E|0;return E>0||E===D?D:D-1}function O(E){for(var D,T,p=1,S=E.length,A=E[0]+"";p<S;){for(D=E[p++]+"",T=f-D.length;T--;D="0"+D);A+=D}for(S=A.length;A.charCodeAt(--S)===48;);return A.slice(0,S+1||1)}function x(E,D){var T,p,S=E.c,A=D.c,L=E.s,U=D.s,z=E.e,H=D.e;if(!L||!U)return null;if(T=S&&!S[0],p=A&&!A[0],T||p)return T?p?0:-U:L;if(L!=U)return L;if(T=L<0,p=z==H,!S||!A)return p?0:!S^T?1:-1;if(!p)return z>H^T?1:-1;for(U=(z=S.length)<(H=A.length)?z:H,L=0;L<U;L++)if(S[L]!=A[L])return S[L]>A[L]^T?1:-1;return z==H?0:z>H^T?1:-1}function v(E,D,T,p){if(E<D||E>T||E!==n(E))throw Error(o+(p||"Argument")+(typeof E=="number"?E<D||E>T?" out of range: ":" not an integer: ":" not a primitive number: ")+String(E))}function y(E){var D=E.c.length-1;return w(E.e/f)==D&&E.c[D]%2!=0}function C(E,D){return(E.length>1?E.charAt(0)+"."+E.slice(1):E)+(D<0?"e":"e+")+D}function _(E,D,T){var p,S;if(D<0){for(S=T+".";++D;S+=T);E=S+E}else if(p=E.length,++D>p){for(S=T,D-=p;--D;S+=T);E+=S}else D<p&&(E=E.slice(0,D)+"."+E.slice(D));return E}r=g(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(Z)})(Fa);var Na=Fa.exports;(function(t){var e=Na,r=t.exports;(function(){var i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s,n,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},a;function u(c){return i.lastIndex=0,i.test(c)?'"'+c.replace(i,function(h){var l=o[h];return typeof l=="string"?l:"\\u"+("0000"+h.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function f(c,h){var l,d,g,w,O=s,x,v=h[c],y=v!=null&&(v instanceof e||e.isBigNumber(v));switch(v&&typeof v=="object"&&typeof v.toJSON=="function"&&(v=v.toJSON(c)),typeof a=="function"&&(v=a.call(h,c,v)),typeof v){case"string":return y?v:u(v);case"number":return isFinite(v)?String(v):"null";case"boolean":case"null":case"bigint":return String(v);case"object":if(!v)return"null";if(s+=n,x=[],Object.prototype.toString.apply(v)==="[object Array]"){for(w=v.length,l=0;l<w;l+=1)x[l]=f(l,v)||"null";return g=x.length===0?"[]":s?`[
`+s+x.join(`,
`+s)+`
`+O+"]":"["+x.join(",")+"]",s=O,g}if(a&&typeof a=="object")for(w=a.length,l=0;l<w;l+=1)typeof a[l]=="string"&&(d=a[l],g=f(d,v),g&&x.push(u(d)+(s?": ":":")+g));else Object.keys(v).forEach(function(C){var _=f(C,v);_&&x.push(u(C)+(s?": ":":")+_)});return g=x.length===0?"{}":s?`{
`+s+x.join(`,
`+s)+`
`+O+"}":"{"+x.join(",")+"}",s=O,g}}typeof r.stringify!="function"&&(r.stringify=function(c,h,l){var d;if(s="",n="",typeof l=="number")for(d=0;d<l;d+=1)n+=" ";else typeof l=="string"&&(n=l);if(a=h,h&&typeof h!="function"&&(typeof h!="object"||typeof h.length!="number"))throw new Error("JSON.stringify");return f("",{"":c})})})()})(Aa);var el=Aa.exports,qt=null;const tl=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,rl=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;var nl=function(t){var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction<"u")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction<"u")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var r,i,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},n,o=function(w){throw{name:"SyntaxError",message:w,at:r,text:n}},a=function(w){return w&&w!==i&&o("Expected '"+w+"' instead of '"+i+"'"),i=n.charAt(r),r+=1,i},u=function(){var w,O="";for(i==="-"&&(O="-",a("-"));i>="0"&&i<="9";)O+=i,a();if(i===".")for(O+=".";a()&&i>="0"&&i<="9";)O+=i;if(i==="e"||i==="E")for(O+=i,a(),(i==="-"||i==="+")&&(O+=i,a());i>="0"&&i<="9";)O+=i,a();if(w=+O,!isFinite(w))o("Bad number");else return qt==null&&(qt=Na),O.length>15?e.storeAsString?O:e.useNativeBigInt?BigInt(O):new qt(O):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(w):new qt(w):w},f=function(){var w,O,x="",v;if(i==='"')for(var y=r;a();){if(i==='"')return r-1>y&&(x+=n.substring(y,r-1)),a(),x;if(i==="\\"){if(r-1>y&&(x+=n.substring(y,r-1)),a(),i==="u"){for(v=0,O=0;O<4&&(w=parseInt(a(),16),!!isFinite(w));O+=1)v=v*16+w;x+=String.fromCharCode(v)}else if(typeof s[i]=="string")x+=s[i];else break;y=r}}o("Bad string")},c=function(){for(;i&&i<=" ";)a()},h=function(){switch(i){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}o("Unexpected '"+i+"'")},l,d=function(){var w=[];if(i==="["){if(a("["),c(),i==="]")return a("]"),w;for(;i;){if(w.push(l()),c(),i==="]")return a("]"),w;a(","),c()}}o("Bad array")},g=function(){var w,O=Object.create(null);if(i==="{"){if(a("{"),c(),i==="}")return a("}"),O;for(;i;){if(w=f(),c(),a(":"),e.strict===!0&&Object.hasOwnProperty.call(O,w)&&o('Duplicate key "'+w+'"'),tl.test(w)===!0?e.protoAction==="error"?o("Object contains forbidden prototype property"):e.protoAction==="ignore"?l():O[w]=l():rl.test(w)===!0?e.constructorAction==="error"?o("Object contains forbidden constructor property"):e.constructorAction==="ignore"?l():O[w]=l():O[w]=l(),c(),i==="}")return a("}"),O;a(","),c()}}o("Bad object")};return l=function(){switch(c(),i){case"{":return g();case"[":return d();case'"':return f();case"-":return u();default:return i>="0"&&i<="9"?u():h()}},function(w,O){var x;return n=w+"",r=0,i=" ",x=l(),c(),i&&o("Syntax error"),typeof O=="function"?function v(y,C){var _,E=y[C];return E&&typeof E=="object"&&Object.keys(E).forEach(function(D){_=v(E,D),_!==void 0?E[D]=_:delete E[D]}),O.call(y,C,E)}({"":x},""):x}},il=nl,xa=el.stringify,Ia=il;cr.exports=function(t){return{parse:Ia(t),stringify:xa}};cr.exports.parse=Ia();cr.exports.stringify=xa;var Pa=cr.exports,lr={};const ol="@alicloud/pop-core",sl="1.8.0",al="AliCloud POP SDK core",ul="index.js",cl="lib/rpc.d.ts",ll={lint:"eslint --fix lib test",test:"mocha -R spec test/*.test.js","test-cov":"nyc -r=html -r=text -r=lcov mocha -t 3000 -R spec test/*.test.js","test-integration":"mocha -R spec test/*.integration.js",ci:"npm run lint && npm run test-cov"},fl=["Aliyun","AliCloud","OpenAPI","POP","SDK","Core"],hl="Jackson Tian",pl="MIT",dl={debug:"^3.1.0",httpx:"^2.1.2","json-bigint":"^1.0.0",kitx:"^1.2.1",xml2js:"^0.5.0"},ml=["lib","index.js"],yl={eslint:"^6.6.0","expect.js":"^0.3.1",mocha:"^4",muk:"^0.5.3",nyc:"^12.0.2",rewire:"^4.0.1"},gl={test:"test"},vl={node:">=8.0.0"},wl={type:"git",url:"git+https://github.com/aliyun/openapi-core-nodejs-sdk.git"},El={url:"https://github.com/aliyun/openapi-core-nodejs-sdk/issues"},bl="https://github.com/aliyun/openapi-core-nodejs-sdk#readme",Sl={name:ol,version:sl,description:al,main:ul,types:cl,scripts:ll,keywords:fl,author:hl,license:pl,dependencies:dl,files:ml,devDependencies:yl,directories:gl,engines:vl,repository:wl,bugs:El,homepage:bl},Lo=et,ui=Sl;lr.DEFAULT_UA=`AlibabaCloud (${Lo.platform()}; ${Lo.arch()}) Node.js/${process.version} Core/${ui.version}`;lr.DEFAULT_CLIENT=`Node.js(${process.version}), ${ui.name}: ${ui.version}`;const vt=nr,Mo=pt,Ye=vi,Ol=Pa,Ro=lr;function La(t){return t.slice(0,1).toUpperCase()+t.slice(1)}function Tl(t){for(var e=Object.keys(t),r={},i=0;i<e.length;i++){var s=e[i];r[La(s)]=t[s]}return r}function $o(){var t=new Date,e=t.getUTCFullYear(),r=Ye.pad2(t.getUTCMonth()+1),i=Ye.pad2(t.getUTCDate()),s=Ye.pad2(t.getUTCHours()),n=Ye.pad2(t.getUTCMinutes()),o=Ye.pad2(t.getUTCSeconds());return`${e}-${r}-${i}T${s}:${n}:${o}Z`}function St(t){var e=encodeURIComponent(t);return e.replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function ci(t,e,r){for(var i=0;i<r.length;i++){var s=r[i];if(Array.isArray(s))ci(t,`${e}.${i+1}`,s);else if(s&&typeof s=="object"){const o=Object.keys(s);for(var n=0;n<o.length;n++)Array.isArray(s[o[n]])?ci(t,`${e}.${i+1}.${o[n]}`,s[o[n]]):t[`${e}.${i+1}.${o[n]}`]=s[o[n]]}else t[`${e}.${i+1}`]=s}}function Cl(t){var e={},r=Object.keys(t);for(let n=0;n<r.length;n++){var i=r[n],s=t[i];Array.isArray(s)?ci(e,i,s):e[i]=s}return e}function Dl(t){var e=[],r=Cl(t),i=Object.keys(r).sort();for(let o=0;o<i.length;o++){var s=i[o],n=r[s];e.push([St(s),St(n)])}return e}function nn(t){for(var e=[],r=0;r<t.length;r++){var[i,s]=t[r];e.push(i+"="+s)}return e.join("&")}let _l=class{constructor(e,r){if(vt(e,'must pass "config"'),vt(e.endpoint,'must pass "config.endpoint"'),!e.endpoint.startsWith("https://")&&!e.endpoint.startsWith("http://"))throw new Error(`"config.endpoint" must starts with 'https://' or 'http://'.`);if(vt(e.apiVersion,'must pass "config.apiVersion"'),e.credentialsProvider){if(typeof e.credentialsProvider.getCredentials!="function")throw new Error('must pass "config.credentialsProvider" with function "getCredentials()"');this.credentialsProvider=e.credentialsProvider}else{vt(e.accessKeyId,'must pass "config.accessKeyId"');var i=e.secretAccessKey||e.accessKeySecret;vt(i,'must pass "config.accessKeySecret"'),this.accessKeyId=e.accessKeyId,this.accessKeySecret=i,this.securityToken=e.securityToken,this.credentialsProvider={getCredentials:async()=>({accessKeyId:e.accessKeyId,accessKeySecret:i,securityToken:e.securityToken})}}if(e.endpoint.endsWith("/")&&(e.endpoint=e.endpoint.slice(0,-1)),this.endpoint=e.endpoint,this.apiVersion=e.apiVersion,this.verbose=r===!0,this.codes=new Set([200,"200","OK","Success","success"]),e.codes)for(var s of e.codes)this.codes.add(s);this.opts=e.opts||{};var n=this.endpoint.startsWith("https://")?rr:tr;this.keepAliveAgent=new n.Agent({keepAlive:!0,keepAliveMsecs:3e3})}async request(e,r={},i={}){const s=await this.credentialsProvider.getCredentials();i=Object.assign({headers:{"x-sdk-client":Ro.DEFAULT_CLIENT,"user-agent":Ro.DEFAULT_UA,"x-acs-action":e,"x-acs-version":this.apiVersion}},this.opts,i),i.formatAction!==!1&&(e=La(e)),i.formatParams!==!1&&(r=Tl(r));const n={Format:"JSON",Timestamp:$o(),Version:this.apiVersion};s&&s.accessKeyId&&s.accessKeySecret&&(n.SignatureMethod="HMAC-SHA1",n.SignatureVersion="1.0",n.SignatureNonce=Ye.makeNonce(),n.AccessKeyId=s.accessKeyId,s.securityToken&&(n.SecurityToken=s.securityToken)),r=Object.assign({Action:e},n,r);const o=(i.method||"GET").toUpperCase(),a=Dl(r);if(s&&s.accessKeyId&&s.accessKeySecret){const d=nn(a),g=`${o}&${St("/")}&${St(d)}`,w=s.accessKeySecret+"&",O=Ye.sha1(g,w,"base64");a.push(["Signature",St(O)])}const u=i.method==="POST"?`${this.endpoint}/`:`${this.endpoint}/?${nn(a)}`,f={url:u,request:null,response:null};i&&!i.agent&&(i.agent=this.keepAliveAgent),i.method==="POST"&&(i.headers=i.headers||{},i.headers["content-type"]="application/x-www-form-urlencoded",i.data=nn(a));const c=await Mo.request(u,i);f.request={headers:c.req.getHeaders?c.req.getHeaders():c.req._headers},f.response={statusCode:c.statusCode,headers:c.headers};const h=await Mo.read(c),l=Ol.parse(h);if(l.Code&&!this.codes.has(l.Code)){const d=new Error(`${l.Message}, URL: ${u}`);throw d.name=l.Code+"Error",d.data=l,d.code=l.Code,d.url=u,d.entry=f,d}return this.verbose?[l,f]:l}_buildParams(){const e={Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureNonce:Ye.makeNonce(),SignatureVersion:"1.0",Timestamp:$o(),AccessKeyId:this.accessKeyId,Version:this.apiVersion};return this.securityToken&&(e.SecurityToken=this.securityToken),e}};var Ma=_l,Ge={},on={},ko;function wi(){return ko||(ko=1,(function(){on.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(Z)),on}var sn={},qe={},Be={},jo;function Xe(){return jo||(jo=1,(function(){var t,e,r,i,s,n,o,a=[].slice,u={}.hasOwnProperty;t=function(){var f,c,h,l,d,g;if(g=arguments[0],d=2<=arguments.length?a.call(arguments,1):[],s(Object.assign))Object.assign.apply(null,arguments);else for(f=0,h=d.length;f<h;f++)if(l=d[f],l!=null)for(c in l)u.call(l,c)&&(g[c]=l[c]);return g},s=function(f){return!!f&&Object.prototype.toString.call(f)==="[object Function]"},n=function(f){var c;return!!f&&((c=typeof f)=="function"||c==="object")},r=function(f){return s(Array.isArray)?Array.isArray(f):Object.prototype.toString.call(f)==="[object Array]"},i=function(f){var c;if(r(f))return!f.length;for(c in f)if(u.call(f,c))return!1;return!0},o=function(f){var c,h;return n(f)&&(h=Object.getPrototypeOf(f))&&(c=h.constructor)&&typeof c=="function"&&c instanceof c&&Function.prototype.toString.call(c)===Function.prototype.toString.call(Object)},e=function(f){return s(f.valueOf)?f.valueOf():f},Be.assign=t,Be.isFunction=s,Be.isObject=n,Be.isArray=r,Be.isEmpty=i,Be.isPlainObject=o,Be.getValue=e}).call(Z)),Be}var an={exports:{}},qo;function Ra(){return qo||(qo=1,(function(){an.exports=function(){function t(){}return t.prototype.hasFeature=function(e,r){return!0},t.prototype.createDocumentType=function(e,r,i){throw new Error("This DOM method is not implemented.")},t.prototype.createDocument=function(e,r,i){throw new Error("This DOM method is not implemented.")},t.prototype.createHTMLDocument=function(e){throw new Error("This DOM method is not implemented.")},t.prototype.getFeature=function(e,r){throw new Error("This DOM method is not implemented.")},t}()}).call(Z)),an.exports}var un={exports:{}},cn={exports:{}},ln={exports:{}},Bo;function Al(){return Bo||(Bo=1,(function(){ln.exports=function(){function t(){}return t.prototype.handleError=function(e){throw new Error(e)},t}()}).call(Z)),ln.exports}var fn={exports:{}},Uo;function Fl(){return Uo||(Uo=1,(function(){fn.exports=function(){function t(e){this.arr=e||[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.arr.length}}),t.prototype.item=function(e){return this.arr[e]||null},t.prototype.contains=function(e){return this.arr.indexOf(e)!==-1},t}()}).call(Z)),fn.exports}var Xo;function Nl(){return Xo||(Xo=1,(function(){var t,e;t=Al(),e=Fl(),cn.exports=function(){function r(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(r.prototype,"parameterNames",{get:function(){return new e(Object.keys(this.defaultParams))}}),r.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},r.prototype.canSetParameter=function(i,s){return!0},r.prototype.setParameter=function(i,s){return s!=null?this.params[i]=s:delete this.params[i]},r}()}).call(Z)),cn.exports}var hn={exports:{}},pn={exports:{}},dn={exports:{}},Vo;function pe(){return Vo||(Vo=1,(function(){dn.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(Z)),dn.exports}var mn={exports:{}},zo;function $a(){return zo||(zo=1,(function(){var t;t=pe(),Pe(),mn.exports=function(){function e(r,i,s){if(this.parent=r,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),i==null)throw new Error("Missing attribute name. "+this.debugInfo(i));this.name=this.stringify.name(i),this.value=this.stringify.attValue(s),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(r){return this.value=r||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(r){return this.options.writer.attribute(this,this.options.writer.filterOptions(r))},e.prototype.debugInfo=function(r){return r=r||this.name,r==null?"parent: <"+this.parent.name+">":"attribute: {"+r+"}, parent: <"+this.parent.name+">"},e.prototype.isEqualNode=function(r){return!(r.namespaceURI!==this.namespaceURI||r.prefix!==this.prefix||r.localName!==this.localName||r.value!==this.value)},e}()}).call(Z)),mn.exports}var yn={exports:{}},Wo;function Ei(){return Wo||(Wo=1,(function(){yn.exports=function(){function t(e){this.nodes=e}return Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.getNamedItem=function(e){return this.nodes[e]},t.prototype.setNamedItem=function(e){var r;return r=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,r||null},t.prototype.removeNamedItem=function(e){var r;return r=this.nodes[e],delete this.nodes[e],r||null},t.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},t.prototype.getNamedItemNS=function(e,r){throw new Error("This DOM method is not implemented.")},t.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},t.prototype.removeNamedItemNS=function(e,r){throw new Error("This DOM method is not implemented.")},t}()}).call(Z)),yn.exports}var Ho;function bi(){return Ho||(Ho=1,(function(){var t,e,r,i,s,n,o,a,u=function(c,h){for(var l in h)f.call(h,l)&&(c[l]=h[l]);function d(){this.constructor=c}return d.prototype=h.prototype,c.prototype=new d,c.__super__=h.prototype,c},f={}.hasOwnProperty;a=Xe(),o=a.isObject,n=a.isFunction,s=a.getValue,i=Pe(),t=pe(),e=$a(),r=Ei(),pn.exports=function(c){u(h,c);function h(l,d,g){var w,O,x,v;if(h.__super__.constructor.call(this,l),d==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(d),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,g!=null&&this.attribute(g),l.type===t.Document&&(this.isRoot=!0,this.documentObject=l,l.rootObject=this,l.children)){for(v=l.children,O=0,x=v.length;O<x;O++)if(w=v[O],w.type===t.DocType){w.name=this.name;break}}}return Object.defineProperty(h.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(h.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(h.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(h.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(h.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new r(this.attribs)),this.attributeMap}}),h.prototype.clone=function(){var l,d,g,w;g=Object.create(this),g.isRoot&&(g.documentObject=null),g.attribs={},w=this.attribs;for(d in w)f.call(w,d)&&(l=w[d],g.attribs[d]=l.clone());return g.children=[],this.children.forEach(function(O){var x;return x=O.clone(),x.parent=g,g.children.push(x)}),g},h.prototype.attribute=function(l,d){var g,w;if(l!=null&&(l=s(l)),o(l))for(g in l)f.call(l,g)&&(w=l[g],this.attribute(g,w));else n(d)&&(d=d.apply()),this.options.keepNullAttributes&&d==null?this.attribs[l]=new e(this,l,""):d!=null&&(this.attribs[l]=new e(this,l,d));return this},h.prototype.removeAttribute=function(l){var d,g,w;if(l==null)throw new Error("Missing attribute name. "+this.debugInfo());if(l=s(l),Array.isArray(l))for(g=0,w=l.length;g<w;g++)d=l[g],delete this.attribs[d];else delete this.attribs[l];return this},h.prototype.toString=function(l){return this.options.writer.element(this,this.options.writer.filterOptions(l))},h.prototype.att=function(l,d){return this.attribute(l,d)},h.prototype.a=function(l,d){return this.attribute(l,d)},h.prototype.getAttribute=function(l){return this.attribs.hasOwnProperty(l)?this.attribs[l].value:null},h.prototype.setAttribute=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNode=function(l){return this.attribs.hasOwnProperty(l)?this.attribs[l]:null},h.prototype.setAttributeNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.removeAttributeNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setAttributeNS=function(l,d,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.removeAttributeNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNodeNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setAttributeNodeNS=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagNameNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.hasAttribute=function(l){return this.attribs.hasOwnProperty(l)},h.prototype.hasAttributeNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setIdAttribute=function(l,d){return this.attribs.hasOwnProperty(l)?this.attribs[l].isId:d},h.prototype.setIdAttributeNS=function(l,d,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setIdAttributeNode=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagNameNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByClassName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.isEqualNode=function(l){var d,g,w;if(!h.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.namespaceURI!==this.namespaceURI||l.prefix!==this.prefix||l.localName!==this.localName||l.attribs.length!==this.attribs.length)return!1;for(d=g=0,w=this.attribs.length-1;0<=w?g<=w:g>=w;d=0<=w?++g:--g)if(!this.attribs[d].isEqualNode(l.attribs[d]))return!1;return!0},h}(i)}).call(Z)),pn.exports}var gn={exports:{}},vn={exports:{}},Go;function fr(){return Go||(Go=1,(function(){var t,e=function(i,s){for(var n in s)r.call(s,n)&&(i[n]=s[n]);function o(){this.constructor=i}return o.prototype=s.prototype,i.prototype=new o,i.__super__=s.prototype,i},r={}.hasOwnProperty;t=Pe(),vn.exports=function(i){e(s,i);function s(n){s.__super__.constructor.call(this,n),this.value=""}return Object.defineProperty(s.prototype,"data",{get:function(){return this.value},set:function(n){return this.value=n||""}}),Object.defineProperty(s.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(s.prototype,"textContent",{get:function(){return this.value},set:function(n){return this.value=n||""}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.substringData=function(n,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.appendData=function(n){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.insertData=function(n,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.deleteData=function(n,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceData=function(n,o,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.isEqualNode=function(n){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(n)||n.data!==this.data)},s}(t)}).call(Z)),vn.exports}var Ko;function Si(){return Ko||(Ko=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=pe(),e=fr(),gn.exports=function(s){r(n,s);function n(o,a){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(a)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.cdata(this,this.options.writer.filterOptions(o))},n}(e)}).call(Z)),gn.exports}var wn={exports:{}},Yo;function Oi(){return Yo||(Yo=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=pe(),e=fr(),wn.exports=function(s){r(n,s);function n(o,a){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(a)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.comment(this,this.options.writer.filterOptions(o))},n}(e)}).call(Z)),wn.exports}var En={exports:{}},Jo;function Ti(){return Jo||(Jo=1,(function(){var t,e,r,i=function(n,o){for(var a in o)s.call(o,a)&&(n[a]=o[a]);function u(){this.constructor=n}return u.prototype=o.prototype,n.prototype=new u,n.__super__=o.prototype,n},s={}.hasOwnProperty;r=Xe().isObject,e=Pe(),t=pe(),En.exports=function(n){i(o,n);function o(a,u,f,c){var h;o.__super__.constructor.call(this,a),r(u)&&(h=u,u=h.version,f=h.encoding,c=h.standalone),u||(u="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(u),f!=null&&(this.encoding=this.stringify.xmlEncoding(f)),c!=null&&(this.standalone=this.stringify.xmlStandalone(c))}return o.prototype.toString=function(a){return this.options.writer.declaration(this,this.options.writer.filterOptions(a))},o}(e)}).call(Z)),En.exports}var bn={exports:{}},Sn={exports:{}},Qo;function Ci(){return Qo||(Qo=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;e=Pe(),t=pe(),Sn.exports=function(s){r(n,s);function n(o,a,u,f,c,h){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(u==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(a));if(!f)throw new Error("Missing DTD attribute type. "+this.debugInfo(a));if(!c)throw new Error("Missing DTD attribute default. "+this.debugInfo(a));if(c.indexOf("#")!==0&&(c="#"+c),!c.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(a));if(h&&!c.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(a));this.elementName=this.stringify.name(a),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(u),this.attributeType=this.stringify.dtdAttType(f),h&&(this.defaultValue=this.stringify.dtdAttDefault(h)),this.defaultValueType=c}return n.prototype.toString=function(o){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(o))},n}(e)}).call(Z)),Sn.exports}var On={exports:{}},Zo;function Di(){return Zo||(Zo=1,(function(){var t,e,r,i=function(n,o){for(var a in o)s.call(o,a)&&(n[a]=o[a]);function u(){this.constructor=n}return u.prototype=o.prototype,n.prototype=new u,n.__super__=o.prototype,n},s={}.hasOwnProperty;r=Xe().isObject,e=Pe(),t=pe(),On.exports=function(n){i(o,n);function o(a,u,f,c){if(o.__super__.constructor.call(this,a),f==null)throw new Error("Missing DTD entity name. "+this.debugInfo(f));if(c==null)throw new Error("Missing DTD entity value. "+this.debugInfo(f));if(this.pe=!!u,this.name=this.stringify.name(f),this.type=t.EntityDeclaration,!r(c))this.value=this.stringify.dtdEntityValue(c),this.internal=!0;else{if(!c.pubID&&!c.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(f));if(c.pubID&&!c.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(f));if(this.internal=!1,c.pubID!=null&&(this.pubID=this.stringify.dtdPubID(c.pubID)),c.sysID!=null&&(this.sysID=this.stringify.dtdSysID(c.sysID)),c.nData!=null&&(this.nData=this.stringify.dtdNData(c.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(f))}}return Object.defineProperty(o.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(o.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(o.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(o.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(o.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(o.prototype,"xmlVersion",{get:function(){return null}}),o.prototype.toString=function(a){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(a))},o}(e)}).call(Z)),On.exports}var Tn={exports:{}},es;function _i(){return es||(es=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;e=Pe(),t=pe(),Tn.exports=function(s){r(n,s);function n(o,a,u){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing DTD element name. "+this.debugInfo());u||(u="(#PCDATA)"),Array.isArray(u)&&(u="("+u.join(",")+")"),this.name=this.stringify.name(a),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(u)}return n.prototype.toString=function(o){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(o))},n}(e)}).call(Z)),Tn.exports}var Cn={exports:{}},ts;function Ai(){return ts||(ts=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;e=Pe(),t=pe(),Cn.exports=function(s){r(n,s);function n(o,a,u){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing DTD notation name. "+this.debugInfo(a));if(!u.pubID&&!u.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(a));this.name=this.stringify.name(a),this.type=t.NotationDeclaration,u.pubID!=null&&(this.pubID=this.stringify.dtdPubID(u.pubID)),u.sysID!=null&&(this.sysID=this.stringify.dtdSysID(u.sysID))}return Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),n.prototype.toString=function(o){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(o))},n}(e)}).call(Z)),Cn.exports}var rs;function Fi(){return rs||(rs=1,(function(){var t,e,r,i,s,n,o,a,u=function(c,h){for(var l in h)f.call(h,l)&&(c[l]=h[l]);function d(){this.constructor=c}return d.prototype=h.prototype,c.prototype=new d,c.__super__=h.prototype,c},f={}.hasOwnProperty;a=Xe().isObject,o=Pe(),t=pe(),e=Ci(),i=Di(),r=_i(),s=Ai(),n=Ei(),bn.exports=function(c){u(h,c);function h(l,d,g){var w,O,x,v,y,C;if(h.__super__.constructor.call(this,l),this.type=t.DocType,l.children){for(v=l.children,O=0,x=v.length;O<x;O++)if(w=v[O],w.type===t.Element){this.name=w.name;break}}this.documentObject=l,a(d)&&(y=d,d=y.pubID,g=y.sysID),g==null&&(C=[d,g],g=C[0],d=C[1]),d!=null&&(this.pubID=this.stringify.dtdPubID(d)),g!=null&&(this.sysID=this.stringify.dtdSysID(g))}return Object.defineProperty(h.prototype,"entities",{get:function(){var l,d,g,w,O;for(w={},O=this.children,d=0,g=O.length;d<g;d++)l=O[d],l.type===t.EntityDeclaration&&!l.pe&&(w[l.name]=l);return new n(w)}}),Object.defineProperty(h.prototype,"notations",{get:function(){var l,d,g,w,O;for(w={},O=this.children,d=0,g=O.length;d<g;d++)l=O[d],l.type===t.NotationDeclaration&&(w[l.name]=l);return new n(w)}}),Object.defineProperty(h.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(h.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(h.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),h.prototype.element=function(l,d){var g;return g=new r(this,l,d),this.children.push(g),this},h.prototype.attList=function(l,d,g,w,O){var x;return x=new e(this,l,d,g,w,O),this.children.push(x),this},h.prototype.entity=function(l,d){var g;return g=new i(this,!1,l,d),this.children.push(g),this},h.prototype.pEntity=function(l,d){var g;return g=new i(this,!0,l,d),this.children.push(g),this},h.prototype.notation=function(l,d){var g;return g=new s(this,l,d),this.children.push(g),this},h.prototype.toString=function(l){return this.options.writer.docType(this,this.options.writer.filterOptions(l))},h.prototype.ele=function(l,d){return this.element(l,d)},h.prototype.att=function(l,d,g,w,O){return this.attList(l,d,g,w,O)},h.prototype.ent=function(l,d){return this.entity(l,d)},h.prototype.pent=function(l,d){return this.pEntity(l,d)},h.prototype.not=function(l,d){return this.notation(l,d)},h.prototype.up=function(){return this.root()||this.documentObject},h.prototype.isEqualNode=function(l){return!(!h.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.name!==this.name||l.publicId!==this.publicId||l.systemId!==this.systemId)},h}(o)}).call(Z)),bn.exports}var Dn={exports:{}},ns;function Ni(){return ns||(ns=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=pe(),e=Pe(),Dn.exports=function(s){r(n,s);function n(o,a){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(a)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.raw(this,this.options.writer.filterOptions(o))},n}(e)}).call(Z)),Dn.exports}var _n={exports:{}},is;function xi(){return is||(is=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=pe(),e=fr(),_n.exports=function(s){r(n,s);function n(o,a){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(a)}return Object.defineProperty(n.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"wholeText",{get:function(){var o,a,u;for(u="",a=this.previousSibling;a;)u=a.data+u,a=a.previousSibling;for(u+=this.data,o=this.nextSibling;o;)u=u+o.data,o=o.nextSibling;return u}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.text(this,this.options.writer.filterOptions(o))},n.prototype.splitText=function(o){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceWholeText=function(o){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(e)}).call(Z)),_n.exports}var An={exports:{}},os;function Ii(){return os||(os=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=pe(),e=fr(),An.exports=function(s){r(n,s);function n(o,a,u){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(a),this.name=this.target,u&&(this.value=this.stringify.insValue(u))}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(o))},n.prototype.isEqualNode=function(o){return!(!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(o)||o.target!==this.target)},n}(e)}).call(Z)),An.exports}var Fn={exports:{}},ss;function ka(){return ss||(ss=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;e=Pe(),t=pe(),Fn.exports=function(s){r(n,s);function n(o){n.__super__.constructor.call(this,o),this.type=t.Dummy}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return""},n}(e)}).call(Z)),Fn.exports}var Nn={exports:{}},as;function xl(){return as||(as=1,(function(){Nn.exports=function(){function t(e){this.nodes=e}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes.length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.item=function(e){return this.nodes[e]||null},t}()}).call(Z)),Nn.exports}var xn={exports:{}},us;function Il(){return us||(us=1,(function(){xn.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(Z)),xn.exports}var cs;function Pe(){return cs||(cs=1,(function(){var t,e,r,i,s,n,o,a,u,f,c,h,l,d,g,w,O,x={}.hasOwnProperty;O=Xe(),w=O.isObject,g=O.isFunction,d=O.isEmpty,l=O.getValue,a=null,r=null,i=null,s=null,n=null,c=null,h=null,f=null,o=null,e=null,u=null,t=null,hn.exports=function(){function v(y){this.parent=y,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=bi(),r=Si(),i=Oi(),s=Ti(),n=Fi(),c=Ni(),h=xi(),f=Ii(),o=ka(),e=pe(),u=xl(),Ei(),t=Il())}return Object.defineProperty(v.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(v.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(v.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(v.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(v.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new u(this.children)),this.childNodeList}}),Object.defineProperty(v.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(v.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(v.prototype,"previousSibling",{get:function(){var y;return y=this.parent.children.indexOf(this),this.parent.children[y-1]||null}}),Object.defineProperty(v.prototype,"nextSibling",{get:function(){var y;return y=this.parent.children.indexOf(this),this.parent.children[y+1]||null}}),Object.defineProperty(v.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(v.prototype,"textContent",{get:function(){var y,C,_,E,D;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(D="",E=this.children,C=0,_=E.length;C<_;C++)y=E[C],y.textContent&&(D+=y.textContent);return D}else return null},set:function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),v.prototype.setParent=function(y){var C,_,E,D,T;for(this.parent=y,y&&(this.options=y.options,this.stringify=y.stringify),D=this.children,T=[],_=0,E=D.length;_<E;_++)C=D[_],T.push(C.setParent(this));return T},v.prototype.element=function(y,C,_){var E,D,T,p,S,A,L,U,z,H,K;if(A=null,C===null&&_==null&&(z=[{},null],C=z[0],_=z[1]),C==null&&(C={}),C=l(C),w(C)||(H=[C,_],_=H[0],C=H[1]),y!=null&&(y=l(y)),Array.isArray(y))for(T=0,L=y.length;T<L;T++)D=y[T],A=this.element(D);else if(g(y))A=this.element(y.apply());else if(w(y)){for(S in y)if(x.call(y,S))if(K=y[S],g(K)&&(K=K.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&S.indexOf(this.stringify.convertAttKey)===0)A=this.attribute(S.substr(this.stringify.convertAttKey.length),K);else if(!this.options.separateArrayItems&&Array.isArray(K)&&d(K))A=this.dummy();else if(w(K)&&d(K))A=this.element(S);else if(!this.options.keepNullNodes&&K==null)A=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(K))for(p=0,U=K.length;p<U;p++)D=K[p],E={},E[S]=D,A=this.element(E);else w(K)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&S.indexOf(this.stringify.convertTextKey)===0?A=this.element(K):(A=this.element(S),A.element(K)):A=this.element(S,K)}else!this.options.keepNullNodes&&_===null?A=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&y.indexOf(this.stringify.convertTextKey)===0?A=this.text(_):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&y.indexOf(this.stringify.convertCDataKey)===0?A=this.cdata(_):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&y.indexOf(this.stringify.convertCommentKey)===0?A=this.comment(_):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&y.indexOf(this.stringify.convertRawKey)===0?A=this.raw(_):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&y.indexOf(this.stringify.convertPIKey)===0?A=this.instruction(y.substr(this.stringify.convertPIKey.length),_):A=this.node(y,C,_);if(A==null)throw new Error("Could not create any elements with: "+y+". "+this.debugInfo());return A},v.prototype.insertBefore=function(y,C,_){var E,D,T,p,S;if(y!=null&&y.type)return T=y,p=C,T.setParent(this),p?(D=children.indexOf(p),S=children.splice(D),children.push(T),Array.prototype.push.apply(children,S)):children.push(T),T;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(y));return D=this.parent.children.indexOf(this),S=this.parent.children.splice(D),E=this.parent.element(y,C,_),Array.prototype.push.apply(this.parent.children,S),E},v.prototype.insertAfter=function(y,C,_){var E,D,T;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(y));return D=this.parent.children.indexOf(this),T=this.parent.children.splice(D+1),E=this.parent.element(y,C,_),Array.prototype.push.apply(this.parent.children,T),E},v.prototype.remove=function(){var y;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return y=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[y,y-y+1].concat([])),this.parent},v.prototype.node=function(y,C,_){var E,D;return y!=null&&(y=l(y)),C||(C={}),C=l(C),w(C)||(D=[C,_],_=D[0],C=D[1]),E=new a(this,y,C),_!=null&&E.text(_),this.children.push(E),E},v.prototype.text=function(y){var C;return w(y)&&this.element(y),C=new h(this,y),this.children.push(C),this},v.prototype.cdata=function(y){var C;return C=new r(this,y),this.children.push(C),this},v.prototype.comment=function(y){var C;return C=new i(this,y),this.children.push(C),this},v.prototype.commentBefore=function(y){var C,_;return C=this.parent.children.indexOf(this),_=this.parent.children.splice(C),this.parent.comment(y),Array.prototype.push.apply(this.parent.children,_),this},v.prototype.commentAfter=function(y){var C,_;return C=this.parent.children.indexOf(this),_=this.parent.children.splice(C+1),this.parent.comment(y),Array.prototype.push.apply(this.parent.children,_),this},v.prototype.raw=function(y){var C;return C=new c(this,y),this.children.push(C),this},v.prototype.dummy=function(){var y;return y=new o(this),y},v.prototype.instruction=function(y,C){var _,E,D,T,p;if(y!=null&&(y=l(y)),C!=null&&(C=l(C)),Array.isArray(y))for(T=0,p=y.length;T<p;T++)_=y[T],this.instruction(_);else if(w(y))for(_ in y)x.call(y,_)&&(E=y[_],this.instruction(_,E));else g(C)&&(C=C.apply()),D=new f(this,y,C),this.children.push(D);return this},v.prototype.instructionBefore=function(y,C){var _,E;return _=this.parent.children.indexOf(this),E=this.parent.children.splice(_),this.parent.instruction(y,C),Array.prototype.push.apply(this.parent.children,E),this},v.prototype.instructionAfter=function(y,C){var _,E;return _=this.parent.children.indexOf(this),E=this.parent.children.splice(_+1),this.parent.instruction(y,C),Array.prototype.push.apply(this.parent.children,E),this},v.prototype.declaration=function(y,C,_){var E,D;return E=this.document(),D=new s(E,y,C,_),E.children.length===0?E.children.unshift(D):E.children[0].type===e.Declaration?E.children[0]=D:E.children.unshift(D),E.root()||E},v.prototype.dtd=function(y,C){var _,E,D,T,p,S,A,L,U,z;for(E=this.document(),D=new n(E,y,C),U=E.children,T=p=0,A=U.length;p<A;T=++p)if(_=U[T],_.type===e.DocType)return E.children[T]=D,D;for(z=E.children,T=S=0,L=z.length;S<L;T=++S)if(_=z[T],_.isRoot)return E.children.splice(T,0,D),D;return E.children.push(D),D},v.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},v.prototype.root=function(){var y;for(y=this;y;){if(y.type===e.Document)return y.rootObject;if(y.isRoot)return y;y=y.parent}},v.prototype.document=function(){var y;for(y=this;y;){if(y.type===e.Document)return y;y=y.parent}},v.prototype.end=function(y){return this.document().end(y)},v.prototype.prev=function(){var y;if(y=this.parent.children.indexOf(this),y<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[y-1]},v.prototype.next=function(){var y;if(y=this.parent.children.indexOf(this),y===-1||y===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[y+1]},v.prototype.importDocument=function(y){var C;return C=y.root().clone(),C.parent=this,C.isRoot=!1,this.children.push(C),this},v.prototype.debugInfo=function(y){var C,_;return y=y||this.name,y==null&&!((C=this.parent)!=null&&C.name)?"":y==null?"parent: <"+this.parent.name+">":(_=this.parent)!=null&&_.name?"node: <"+y+">, parent: <"+this.parent.name+">":"node: <"+y+">"},v.prototype.ele=function(y,C,_){return this.element(y,C,_)},v.prototype.nod=function(y,C,_){return this.node(y,C,_)},v.prototype.txt=function(y){return this.text(y)},v.prototype.dat=function(y){return this.cdata(y)},v.prototype.com=function(y){return this.comment(y)},v.prototype.ins=function(y,C){return this.instruction(y,C)},v.prototype.doc=function(){return this.document()},v.prototype.dec=function(y,C,_){return this.declaration(y,C,_)},v.prototype.e=function(y,C,_){return this.element(y,C,_)},v.prototype.n=function(y,C,_){return this.node(y,C,_)},v.prototype.t=function(y){return this.text(y)},v.prototype.d=function(y){return this.cdata(y)},v.prototype.c=function(y){return this.comment(y)},v.prototype.r=function(y){return this.raw(y)},v.prototype.i=function(y,C){return this.instruction(y,C)},v.prototype.u=function(){return this.up()},v.prototype.importXMLBuilder=function(y){return this.importDocument(y)},v.prototype.replaceChild=function(y,C){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.removeChild=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.appendChild=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.hasChildNodes=function(){return this.children.length!==0},v.prototype.cloneNode=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isSupported=function(y,C){return!0},v.prototype.hasAttributes=function(){return this.attribs.length!==0},v.prototype.compareDocumentPosition=function(y){var C,_;return C=this,C===y?0:this.document()!==y.document()?(_=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?_|=t.Preceding:_|=t.Following,_):C.isAncestor(y)?t.Contains|t.Preceding:C.isDescendant(y)?t.Contains|t.Following:C.isPreceding(y)?t.Preceding:t.Following},v.prototype.isSameNode=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.lookupPrefix=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isDefaultNamespace=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.lookupNamespaceURI=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isEqualNode=function(y){var C,_,E;if(y.nodeType!==this.nodeType||y.children.length!==this.children.length)return!1;for(C=_=0,E=this.children.length-1;0<=E?_<=E:_>=E;C=0<=E?++_:--_)if(!this.children[C].isEqualNode(y.children[C]))return!1;return!0},v.prototype.getFeature=function(y,C){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.setUserData=function(y,C,_){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.getUserData=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.contains=function(y){return y?y===this||this.isDescendant(y):!1},v.prototype.isDescendant=function(y){var C,_,E,D,T;for(T=this.children,E=0,D=T.length;E<D;E++)if(C=T[E],y===C||(_=C.isDescendant(y),_))return!0;return!1},v.prototype.isAncestor=function(y){return y.isDescendant(this)},v.prototype.isPreceding=function(y){var C,_;return C=this.treePosition(y),_=this.treePosition(this),C===-1||_===-1?!1:C<_},v.prototype.isFollowing=function(y){var C,_;return C=this.treePosition(y),_=this.treePosition(this),C===-1||_===-1?!1:C>_},v.prototype.treePosition=function(y){var C,_;return _=0,C=!1,this.foreachTreeNode(this.document(),function(E){if(_++,!C&&E===y)return C=!0}),C?_:-1},v.prototype.foreachTreeNode=function(y,C){var _,E,D,T,p;for(y||(y=this.document()),T=y.children,E=0,D=T.length;E<D;E++){if(_=T[E],p=C(_))return p;if(p=this.foreachTreeNode(_,C),p)return p}},v}()}).call(Z)),hn.exports}var In={exports:{}},ls;function ja(){return ls||(ls=1,(function(){var t=function(r,i){return function(){return r.apply(i,arguments)}},e={}.hasOwnProperty;In.exports=function(){function r(i){this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this);var s,n,o;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),n=i.stringify||{};for(s in n)e.call(n,s)&&(o=n[s],this[s]=o)}return r.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},r.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},r.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},r.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},r.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},r.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},r.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},r.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},r.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},r.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},r.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(i){var s,n;if(this.options.noValidation)return i;if(s="",this.options.version==="1.0"){if(s=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=i.match(s))throw new Error("Invalid character in string: "+i+" at index "+n.index)}else if(this.options.version==="1.1"&&(s=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=i.match(s)))throw new Error("Invalid character in string: "+i+" at index "+n.index);return i},r.prototype.assertLegalName=function(i){var s;if(this.options.noValidation)return i;if(this.assertLegalChar(i),s=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(s))throw new Error("Invalid character in name");return i},r.prototype.textEscape=function(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},r.prototype.attEscape=function(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},r}()}).call(Z)),In.exports}var Pn={exports:{}},Ln={exports:{}},Mn={exports:{}},fs;function hr(){return fs||(fs=1,(function(){Mn.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(Z)),Mn.exports}var hs;function qa(){return hs||(hs=1,(function(){var t,e,r,i={}.hasOwnProperty;r=Xe().assign,t=pe(),Ti(),Fi(),Si(),Oi(),bi(),Ni(),xi(),Ii(),ka(),Ci(),_i(),Di(),Ai(),e=hr(),Ln.exports=function(){function s(n){var o,a,u;n||(n={}),this.options=n,a=n.writer||{};for(o in a)i.call(a,o)&&(u=a[o],this["_"+o]=this[o],this[o]=u)}return s.prototype.filterOptions=function(n){var o,a,u,f,c,h,l,d;return n||(n={}),n=r({},this.options,n),o={writer:this},o.pretty=n.pretty||!1,o.allowEmpty=n.allowEmpty||!1,o.indent=(a=n.indent)!=null?a:"  ",o.newline=(u=n.newline)!=null?u:`
`,o.offset=(f=n.offset)!=null?f:0,o.dontPrettyTextNodes=(c=(h=n.dontPrettyTextNodes)!=null?h:n.dontprettytextnodes)!=null?c:0,o.spaceBeforeSlash=(l=(d=n.spaceBeforeSlash)!=null?d:n.spacebeforeslash)!=null?l:"",o.spaceBeforeSlash===!0&&(o.spaceBeforeSlash=" "),o.suppressPrettyCount=0,o.user={},o.state=e.None,o},s.prototype.indent=function(n,o,a){var u;return!o.pretty||o.suppressPrettyCount?"":o.pretty&&(u=(a||0)+o.offset+1,u>0)?new Array(u).join(o.indent):""},s.prototype.endline=function(n,o,a){return!o.pretty||o.suppressPrettyCount?"":o.newline},s.prototype.attribute=function(n,o,a){var u;return this.openAttribute(n,o,a),u=" "+n.name+'="'+n.value+'"',this.closeAttribute(n,o,a),u},s.prototype.cdata=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<![CDATA[",o.state=e.InsideTag,u+=n.value,o.state=e.CloseTag,u+="]]>"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.comment=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!-- ",o.state=e.InsideTag,u+=n.value,o.state=e.CloseTag,u+=" -->"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.declaration=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<?xml",o.state=e.InsideTag,u+=' version="'+n.version+'"',n.encoding!=null&&(u+=' encoding="'+n.encoding+'"'),n.standalone!=null&&(u+=' standalone="'+n.standalone+'"'),o.state=e.CloseTag,u+=o.spaceBeforeSlash+"?>",u+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.docType=function(n,o,a){var u,f,c,h,l;if(a||(a=0),this.openNode(n,o,a),o.state=e.OpenTag,h=this.indent(n,o,a),h+="<!DOCTYPE "+n.root().name,n.pubID&&n.sysID?h+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.sysID&&(h+=' SYSTEM "'+n.sysID+'"'),n.children.length>0){for(h+=" [",h+=this.endline(n,o,a),o.state=e.InsideTag,l=n.children,f=0,c=l.length;f<c;f++)u=l[f],h+=this.writeChildNode(u,o,a+1);o.state=e.CloseTag,h+="]"}return o.state=e.CloseTag,h+=o.spaceBeforeSlash+">",h+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),h},s.prototype.element=function(n,o,a){var u,f,c,h,l,d,g,w,O,x,v,y,C,_;a||(a=0),x=!1,v="",this.openNode(n,o,a),o.state=e.OpenTag,v+=this.indent(n,o,a)+"<"+n.name,y=n.attribs;for(O in y)i.call(y,O)&&(u=y[O],v+=this.attribute(u,o,a));if(c=n.children.length,h=c===0?null:n.children[0],c===0||n.children.every(function(E){return(E.type===t.Text||E.type===t.Raw)&&E.value===""}))o.allowEmpty?(v+=">",o.state=e.CloseTag,v+="</"+n.name+">"+this.endline(n,o,a)):(o.state=e.CloseTag,v+=o.spaceBeforeSlash+"/>"+this.endline(n,o,a));else if(o.pretty&&c===1&&(h.type===t.Text||h.type===t.Raw)&&h.value!=null)v+=">",o.state=e.InsideTag,o.suppressPrettyCount++,x=!0,v+=this.writeChildNode(h,o,a+1),o.suppressPrettyCount--,x=!1,o.state=e.CloseTag,v+="</"+n.name+">"+this.endline(n,o,a);else{if(o.dontPrettyTextNodes){for(C=n.children,l=0,g=C.length;l<g;l++)if(f=C[l],(f.type===t.Text||f.type===t.Raw)&&f.value!=null){o.suppressPrettyCount++,x=!0;break}}for(v+=">"+this.endline(n,o,a),o.state=e.InsideTag,_=n.children,d=0,w=_.length;d<w;d++)f=_[d],v+=this.writeChildNode(f,o,a+1);o.state=e.CloseTag,v+=this.indent(n,o,a)+"</"+n.name+">",x&&o.suppressPrettyCount--,v+=this.endline(n,o,a),o.state=e.None}return this.closeNode(n,o,a),v},s.prototype.writeChildNode=function(n,o,a){switch(n.type){case t.CData:return this.cdata(n,o,a);case t.Comment:return this.comment(n,o,a);case t.Element:return this.element(n,o,a);case t.Raw:return this.raw(n,o,a);case t.Text:return this.text(n,o,a);case t.ProcessingInstruction:return this.processingInstruction(n,o,a);case t.Dummy:return"";case t.Declaration:return this.declaration(n,o,a);case t.DocType:return this.docType(n,o,a);case t.AttributeDeclaration:return this.dtdAttList(n,o,a);case t.ElementDeclaration:return this.dtdElement(n,o,a);case t.EntityDeclaration:return this.dtdEntity(n,o,a);case t.NotationDeclaration:return this.dtdNotation(n,o,a);default:throw new Error("Unknown XML node type: "+n.constructor.name)}},s.prototype.processingInstruction=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<?",o.state=e.InsideTag,u+=n.target,n.value&&(u+=" "+n.value),o.state=e.CloseTag,u+=o.spaceBeforeSlash+"?>",u+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.raw=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a),o.state=e.InsideTag,u+=n.value,o.state=e.CloseTag,u+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.text=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a),o.state=e.InsideTag,u+=n.value,o.state=e.CloseTag,u+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.dtdAttList=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!ATTLIST",o.state=e.InsideTag,u+=" "+n.elementName+" "+n.attributeName+" "+n.attributeType,n.defaultValueType!=="#DEFAULT"&&(u+=" "+n.defaultValueType),n.defaultValue&&(u+=' "'+n.defaultValue+'"'),o.state=e.CloseTag,u+=o.spaceBeforeSlash+">"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.dtdElement=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!ELEMENT",o.state=e.InsideTag,u+=" "+n.name+" "+n.value,o.state=e.CloseTag,u+=o.spaceBeforeSlash+">"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.dtdEntity=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!ENTITY",o.state=e.InsideTag,n.pe&&(u+=" %"),u+=" "+n.name,n.value?u+=' "'+n.value+'"':(n.pubID&&n.sysID?u+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.sysID&&(u+=' SYSTEM "'+n.sysID+'"'),n.nData&&(u+=" NDATA "+n.nData)),o.state=e.CloseTag,u+=o.spaceBeforeSlash+">"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.dtdNotation=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!NOTATION",o.state=e.InsideTag,u+=" "+n.name,n.pubID&&n.sysID?u+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.pubID?u+=' PUBLIC "'+n.pubID+'"':n.sysID&&(u+=' SYSTEM "'+n.sysID+'"'),o.state=e.CloseTag,u+=o.spaceBeforeSlash+">"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.openNode=function(n,o,a){},s.prototype.closeNode=function(n,o,a){},s.prototype.openAttribute=function(n,o,a){},s.prototype.closeAttribute=function(n,o,a){},s}()}).call(Z)),Ln.exports}var ps;function Pi(){return ps||(ps=1,(function(){var t,e=function(i,s){for(var n in s)r.call(s,n)&&(i[n]=s[n]);function o(){this.constructor=i}return o.prototype=s.prototype,i.prototype=new o,i.__super__=s.prototype,i},r={}.hasOwnProperty;t=qa(),Pn.exports=function(i){e(s,i);function s(n){s.__super__.constructor.call(this,n)}return s.prototype.document=function(n,o){var a,u,f,c,h;for(o=this.filterOptions(o),c="",h=n.children,u=0,f=h.length;u<f;u++)a=h[u],c+=this.writeChildNode(a,o,0);return o.pretty&&c.slice(-o.newline.length)===o.newline&&(c=c.slice(0,-o.newline.length)),c},s}(t)}).call(Z)),Pn.exports}var ds;function Ba(){return ds||(ds=1,(function(){var t,e,r,i,s,n,o,a=function(f,c){for(var h in c)u.call(c,h)&&(f[h]=c[h]);function l(){this.constructor=f}return l.prototype=c.prototype,f.prototype=new l,f.__super__=c.prototype,f},u={}.hasOwnProperty;o=Xe().isPlainObject,r=Ra(),e=Nl(),i=Pe(),t=pe(),n=ja(),s=Pi(),un.exports=function(f){a(c,f);function c(h){c.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new e,h||(h={}),h.writer||(h.writer=new s),this.options=h,this.stringify=new n(h)}return Object.defineProperty(c.prototype,"implementation",{value:new r}),Object.defineProperty(c.prototype,"doctype",{get:function(){var h,l,d,g;for(g=this.children,l=0,d=g.length;l<d;l++)if(h=g[l],h.type===t.DocType)return h;return null}}),Object.defineProperty(c.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(c.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(c.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(c.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(c.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(c.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(c.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(c.prototype,"origin",{get:function(){return null}}),Object.defineProperty(c.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(c.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(c.prototype,"contentType",{get:function(){return null}}),c.prototype.end=function(h){var l;return l={},h?o(h)&&(l=h,h=this.options.writer):h=this.options.writer,h.document(this,h.filterOptions(l))},c.prototype.toString=function(h){return this.options.writer.document(this,this.options.writer.filterOptions(h))},c.prototype.createElement=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createTextNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createComment=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createCDATASection=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createProcessingInstruction=function(h,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createAttribute=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createEntityReference=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByTagName=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.importNode=function(h,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createElementNS=function(h,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createAttributeNS=function(h,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByTagNameNS=function(h,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementById=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.adoptNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.renameNode=function(h,l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByClassName=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createEvent=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createNodeIterator=function(h,l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createTreeWalker=function(h,l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c}(i)}).call(Z)),un.exports}var Rn={exports:{}},ms;function Pl(){return ms||(ms=1,(function(){var t,e,r,i,s,n,o,a,u,f,c,h,l,d,g,w,O,x,v,y,C,_,E,D={}.hasOwnProperty;E=Xe(),C=E.isObject,y=E.isFunction,_=E.isPlainObject,v=E.getValue,t=pe(),h=Ba(),l=bi(),i=Si(),s=Oi(),g=Ni(),x=xi(),d=Ii(),f=Ti(),c=Fi(),n=Ci(),a=Di(),o=_i(),u=Ai(),r=$a(),O=ja(),w=Pi(),e=hr(),Rn.exports=function(){function T(p,S,A){var L;this.name="?xml",this.type=t.Document,p||(p={}),L={},p.writer?_(p.writer)&&(L=p.writer,p.writer=new w):p.writer=new w,this.options=p,this.writer=p.writer,this.writerOptions=this.writer.filterOptions(L),this.stringify=new O(p),this.onDataCallback=S||function(){},this.onEndCallback=A||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return T.prototype.createChildNode=function(p){var S,A,L,U,z,H,K,G;switch(p.type){case t.CData:this.cdata(p.value);break;case t.Comment:this.comment(p.value);break;case t.Element:L={},K=p.attribs;for(A in K)D.call(K,A)&&(S=K[A],L[A]=S.value);this.node(p.name,L);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(p.value);break;case t.Text:this.text(p.value);break;case t.ProcessingInstruction:this.instruction(p.target,p.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+p.constructor.name)}for(G=p.children,z=0,H=G.length;z<H;z++)U=G[z],this.createChildNode(U),U.type===t.Element&&this.up();return this},T.prototype.dummy=function(){return this},T.prototype.node=function(p,S,A){var L;if(p==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(p));return this.openCurrent(),p=v(p),S==null&&(S={}),S=v(S),C(S)||(L=[S,A],A=L[0],S=L[1]),this.currentNode=new l(this,p,S),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,A!=null&&this.text(A),this},T.prototype.element=function(p,S,A){var L,U,z,H,K,G;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(p)||C(p)||y(p))for(H=this.options.noValidation,this.options.noValidation=!0,G=new h(this.options).element("TEMP_ROOT"),G.element(p),this.options.noValidation=H,K=G.children,U=0,z=K.length;U<z;U++)L=K[U],this.createChildNode(L),L.type===t.Element&&this.up();else this.node(p,S,A);return this},T.prototype.attribute=function(p,S){var A,L;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(p));if(p!=null&&(p=v(p)),C(p))for(A in p)D.call(p,A)&&(L=p[A],this.attribute(A,L));else y(S)&&(S=S.apply()),this.options.keepNullAttributes&&S==null?this.currentNode.attribs[p]=new r(this,p,""):S!=null&&(this.currentNode.attribs[p]=new r(this,p,S));return this},T.prototype.text=function(p){var S;return this.openCurrent(),S=new x(this,p),this.onData(this.writer.text(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.cdata=function(p){var S;return this.openCurrent(),S=new i(this,p),this.onData(this.writer.cdata(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.comment=function(p){var S;return this.openCurrent(),S=new s(this,p),this.onData(this.writer.comment(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.raw=function(p){var S;return this.openCurrent(),S=new g(this,p),this.onData(this.writer.raw(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.instruction=function(p,S){var A,L,U,z,H;if(this.openCurrent(),p!=null&&(p=v(p)),S!=null&&(S=v(S)),Array.isArray(p))for(A=0,z=p.length;A<z;A++)L=p[A],this.instruction(L);else if(C(p))for(L in p)D.call(p,L)&&(U=p[L],this.instruction(L,U));else y(S)&&(S=S.apply()),H=new d(this,p,S),this.onData(this.writer.processingInstruction(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},T.prototype.declaration=function(p,S,A){var L;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return L=new f(this,p,S,A),this.onData(this.writer.declaration(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.doctype=function(p,S,A){if(this.openCurrent(),p==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new c(this,S,A),this.currentNode.rootNodeName=p,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},T.prototype.dtdElement=function(p,S){var A;return this.openCurrent(),A=new o(this,p,S),this.onData(this.writer.dtdElement(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.attList=function(p,S,A,L,U){var z;return this.openCurrent(),z=new n(this,p,S,A,L,U),this.onData(this.writer.dtdAttList(z,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.entity=function(p,S){var A;return this.openCurrent(),A=new a(this,!1,p,S),this.onData(this.writer.dtdEntity(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.pEntity=function(p,S){var A;return this.openCurrent(),A=new a(this,!0,p,S),this.onData(this.writer.dtdEntity(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.notation=function(p,S){var A;return this.openCurrent(),A=new u(this,p,S),this.onData(this.writer.dtdNotation(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},T.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},T.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},T.prototype.openNode=function(p){var S,A,L,U;if(!p.isOpen){if(!this.root&&this.currentLevel===0&&p.type===t.Element&&(this.root=p),A="",p.type===t.Element){this.writerOptions.state=e.OpenTag,A=this.writer.indent(p,this.writerOptions,this.currentLevel)+"<"+p.name,U=p.attribs;for(L in U)D.call(U,L)&&(S=U[L],A+=this.writer.attribute(S,this.writerOptions,this.currentLevel));A+=(p.children?">":"/>")+this.writer.endline(p,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,A=this.writer.indent(p,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+p.rootNodeName,p.pubID&&p.sysID?A+=' PUBLIC "'+p.pubID+'" "'+p.sysID+'"':p.sysID&&(A+=' SYSTEM "'+p.sysID+'"'),p.children?(A+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,A+=">"),A+=this.writer.endline(p,this.writerOptions,this.currentLevel);return this.onData(A,this.currentLevel),p.isOpen=!0}},T.prototype.closeNode=function(p){var S;if(!p.isClosed)return S="",this.writerOptions.state=e.CloseTag,p.type===t.Element?S=this.writer.indent(p,this.writerOptions,this.currentLevel)+"</"+p.name+">"+this.writer.endline(p,this.writerOptions,this.currentLevel):S=this.writer.indent(p,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(p,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(S,this.currentLevel),p.isClosed=!0},T.prototype.onData=function(p,S){return this.documentStarted=!0,this.onDataCallback(p,S+1)},T.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},T.prototype.debugInfo=function(p){return p==null?"":"node: <"+p+">"},T.prototype.ele=function(){return this.element.apply(this,arguments)},T.prototype.nod=function(p,S,A){return this.node(p,S,A)},T.prototype.txt=function(p){return this.text(p)},T.prototype.dat=function(p){return this.cdata(p)},T.prototype.com=function(p){return this.comment(p)},T.prototype.ins=function(p,S){return this.instruction(p,S)},T.prototype.dec=function(p,S,A){return this.declaration(p,S,A)},T.prototype.dtd=function(p,S,A){return this.doctype(p,S,A)},T.prototype.e=function(p,S,A){return this.element(p,S,A)},T.prototype.n=function(p,S,A){return this.node(p,S,A)},T.prototype.t=function(p){return this.text(p)},T.prototype.d=function(p){return this.cdata(p)},T.prototype.c=function(p){return this.comment(p)},T.prototype.r=function(p){return this.raw(p)},T.prototype.i=function(p,S){return this.instruction(p,S)},T.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},T.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},T.prototype.ent=function(p,S){return this.entity(p,S)},T.prototype.pent=function(p,S){return this.pEntity(p,S)},T.prototype.not=function(p,S){return this.notation(p,S)},T}()}).call(Z)),Rn.exports}var $n={exports:{}},ys;function Ll(){return ys||(ys=1,(function(){var t,e,r,i=function(n,o){for(var a in o)s.call(o,a)&&(n[a]=o[a]);function u(){this.constructor=n}return u.prototype=o.prototype,n.prototype=new u,n.__super__=o.prototype,n},s={}.hasOwnProperty;t=pe(),r=qa(),e=hr(),$n.exports=function(n){i(o,n);function o(a,u){this.stream=a,o.__super__.constructor.call(this,u)}return o.prototype.endline=function(a,u,f){return a.isLastRootNode&&u.state===e.CloseTag?"":o.__super__.endline.call(this,a,u,f)},o.prototype.document=function(a,u){var f,c,h,l,d,g,w,O,x;for(w=a.children,c=h=0,d=w.length;h<d;c=++h)f=w[c],f.isLastRootNode=c===a.children.length-1;for(u=this.filterOptions(u),O=a.children,x=[],l=0,g=O.length;l<g;l++)f=O[l],x.push(this.writeChildNode(f,u,0));return x},o.prototype.attribute=function(a,u,f){return this.stream.write(o.__super__.attribute.call(this,a,u,f))},o.prototype.cdata=function(a,u,f){return this.stream.write(o.__super__.cdata.call(this,a,u,f))},o.prototype.comment=function(a,u,f){return this.stream.write(o.__super__.comment.call(this,a,u,f))},o.prototype.declaration=function(a,u,f){return this.stream.write(o.__super__.declaration.call(this,a,u,f))},o.prototype.docType=function(a,u,f){var c,h,l,d;if(f||(f=0),this.openNode(a,u,f),u.state=e.OpenTag,this.stream.write(this.indent(a,u,f)),this.stream.write("<!DOCTYPE "+a.root().name),a.pubID&&a.sysID?this.stream.write(' PUBLIC "'+a.pubID+'" "'+a.sysID+'"'):a.sysID&&this.stream.write(' SYSTEM "'+a.sysID+'"'),a.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(a,u,f)),u.state=e.InsideTag,d=a.children,h=0,l=d.length;h<l;h++)c=d[h],this.writeChildNode(c,u,f+1);u.state=e.CloseTag,this.stream.write("]")}return u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+">"),this.stream.write(this.endline(a,u,f)),u.state=e.None,this.closeNode(a,u,f)},o.prototype.element=function(a,u,f){var c,h,l,d,g,w,O,x,v;f||(f=0),this.openNode(a,u,f),u.state=e.OpenTag,this.stream.write(this.indent(a,u,f)+"<"+a.name),x=a.attribs;for(O in x)s.call(x,O)&&(c=x[O],this.attribute(c,u,f));if(l=a.children.length,d=l===0?null:a.children[0],l===0||a.children.every(function(y){return(y.type===t.Text||y.type===t.Raw)&&y.value===""}))u.allowEmpty?(this.stream.write(">"),u.state=e.CloseTag,this.stream.write("</"+a.name+">")):(u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+"/>"));else if(u.pretty&&l===1&&(d.type===t.Text||d.type===t.Raw)&&d.value!=null)this.stream.write(">"),u.state=e.InsideTag,u.suppressPrettyCount++,this.writeChildNode(d,u,f+1),u.suppressPrettyCount--,u.state=e.CloseTag,this.stream.write("</"+a.name+">");else{for(this.stream.write(">"+this.endline(a,u,f)),u.state=e.InsideTag,v=a.children,g=0,w=v.length;g<w;g++)h=v[g],this.writeChildNode(h,u,f+1);u.state=e.CloseTag,this.stream.write(this.indent(a,u,f)+"</"+a.name+">")}return this.stream.write(this.endline(a,u,f)),u.state=e.None,this.closeNode(a,u,f)},o.prototype.processingInstruction=function(a,u,f){return this.stream.write(o.__super__.processingInstruction.call(this,a,u,f))},o.prototype.raw=function(a,u,f){return this.stream.write(o.__super__.raw.call(this,a,u,f))},o.prototype.text=function(a,u,f){return this.stream.write(o.__super__.text.call(this,a,u,f))},o.prototype.dtdAttList=function(a,u,f){return this.stream.write(o.__super__.dtdAttList.call(this,a,u,f))},o.prototype.dtdElement=function(a,u,f){return this.stream.write(o.__super__.dtdElement.call(this,a,u,f))},o.prototype.dtdEntity=function(a,u,f){return this.stream.write(o.__super__.dtdEntity.call(this,a,u,f))},o.prototype.dtdNotation=function(a,u,f){return this.stream.write(o.__super__.dtdNotation.call(this,a,u,f))},o}(r)}).call(Z)),$n.exports}var gs;function Ml(){return gs||(gs=1,(function(){var t,e,r,i,s,n,o,a,u,f;f=Xe(),a=f.assign,u=f.isFunction,r=Ra(),i=Ba(),s=Pl(),o=Pi(),n=Ll(),t=pe(),e=hr(),qe.create=function(c,h,l,d){var g,w;if(c==null)throw new Error("Root element needs a name.");return d=a({},h,l,d),g=new i(d),w=g.element(c),d.headless||(g.declaration(d),(d.pubID!=null||d.sysID!=null)&&g.dtd(d)),w},qe.begin=function(c,h,l){var d;return u(c)&&(d=[c,h],h=d[0],l=d[1],c={}),h?new s(c,h,l):new i(c)},qe.stringWriter=function(c){return new o(c)},qe.streamWriter=function(c,h){return new n(c,h)},qe.implementation=new r,qe.nodeType=t,qe.writerState=e}).call(Z)),qe}var vs;function Rl(){return vs||(vs=1,(function(){var t,e,r,i,s,n={}.hasOwnProperty;t=Ml(),e=wi().defaults,i=function(o){return typeof o=="string"&&(o.indexOf("&")>=0||o.indexOf(">")>=0||o.indexOf("<")>=0)},s=function(o){return"<![CDATA["+r(o)+"]]>"},r=function(o){return o.replace("]]>","]]]]><![CDATA[>")},sn.Builder=function(){function o(a){var u,f,c;this.options={},f=e["0.2"];for(u in f)n.call(f,u)&&(c=f[u],this.options[u]=c);for(u in a)n.call(a,u)&&(c=a[u],this.options[u]=c)}return o.prototype.buildObject=function(a){var u,f,c,h,l;return u=this.options.attrkey,f=this.options.charkey,Object.keys(a).length===1&&this.options.rootName===e["0.2"].rootName?(l=Object.keys(a)[0],a=a[l]):l=this.options.rootName,c=function(d){return function(g,w){var O,x,v,y,C,_;if(typeof w!="object")d.options.cdata&&i(w)?g.raw(s(w)):g.txt(w);else if(Array.isArray(w)){for(y in w)if(n.call(w,y)){x=w[y];for(C in x)v=x[C],g=c(g.ele(C),v).up()}}else for(C in w)if(n.call(w,C))if(x=w[C],C===u){if(typeof x=="object")for(O in x)_=x[O],g=g.att(O,_)}else if(C===f)d.options.cdata&&i(x)?g=g.raw(s(x)):g=g.txt(x);else if(Array.isArray(x))for(y in x)n.call(x,y)&&(v=x[y],typeof v=="string"?d.options.cdata&&i(v)?g=g.ele(C).raw(s(v)).up():g=g.ele(C,v).up():g=c(g.ele(C),v).up());else typeof x=="object"?g=c(g.ele(C),x).up():typeof x=="string"&&d.options.cdata&&i(x)?g=g.ele(C).raw(s(x)).up():(x==null&&(x=""),g=g.ele(C,x.toString()).up());return g}}(this),h=t.create(l,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),c(h,a).end(this.options.renderOpts)},o}()}).call(Z)),sn}var kn={},jn={},ws;function $l(){return ws||(ws=1,function(t){(function(e){e.parser=function(F,b){return new i(F,b)},e.SAXParser=i,e.SAXStream=c,e.createStream=f,e.MAX_BUFFER_LENGTH=64*1024;var r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function i(F,b){if(!(this instanceof i))return new i(F,b);var X=this;n(X),X.q=X.c="",X.bufferCheckPosition=e.MAX_BUFFER_LENGTH,X.opt=b||{},X.opt.lowercase=X.opt.lowercase||X.opt.lowercasetags,X.looseCase=X.opt.lowercase?"toLowerCase":"toUpperCase",X.tags=[],X.closed=X.closedRoot=X.sawRoot=!1,X.tag=X.error=null,X.strict=!!F,X.noscript=!!(F||X.opt.noscript),X.state=p.BEGIN,X.strictEntities=X.opt.strictEntities,X.ENTITIES=X.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),X.attribList=[],X.opt.xmlns&&(X.ns=Object.create(w)),X.opt.unquotedAttributeValues===void 0&&(X.opt.unquotedAttributeValues=!F),X.trackPosition=X.opt.position!==!1,X.trackPosition&&(X.position=X.line=X.column=0),A(X,"onready")}Object.create||(Object.create=function(F){function b(){}b.prototype=F;var X=new b;return X}),Object.keys||(Object.keys=function(F){var b=[];for(var X in F)F.hasOwnProperty(X)&&b.push(X);return b});function s(F){for(var b=Math.max(e.MAX_BUFFER_LENGTH,10),X=0,m=0,N=r.length;m<N;m++){var I=F[r[m]].length;if(I>b)switch(r[m]){case"textNode":U(F);break;case"cdata":L(F,"oncdata",F.cdata),F.cdata="";break;case"script":L(F,"onscript",F.script),F.script="";break;default:H(F,"Max buffer length exceeded: "+r[m])}X=Math.max(X,I)}var k=e.MAX_BUFFER_LENGTH-X;F.bufferCheckPosition=k+F.position}function n(F){for(var b=0,X=r.length;b<X;b++)F[r[b]]=""}function o(F){U(F),F.cdata!==""&&(L(F,"oncdata",F.cdata),F.cdata=""),F.script!==""&&(L(F,"onscript",F.script),F.script="")}i.prototype={end:function(){K(this)},write:Pt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var a;try{a=require("stream").Stream}catch{a=function(){}}a||(a=function(){});var u=e.EVENTS.filter(function(F){return F!=="error"&&F!=="end"});function f(F,b){return new c(F,b)}function c(F,b){if(!(this instanceof c))return new c(F,b);a.apply(this),this._parser=new i(F,b),this.writable=!0,this.readable=!0;var X=this;this._parser.onend=function(){X.emit("end")},this._parser.onerror=function(m){X.emit("error",m),X._parser.error=null},this._decoder=null,u.forEach(function(m){Object.defineProperty(X,"on"+m,{get:function(){return X._parser["on"+m]},set:function(N){if(!N)return X.removeAllListeners(m),X._parser["on"+m]=N,N;X.on(m,N)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(a.prototype,{constructor:{value:c}}),c.prototype.write=function(F){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(F)){if(!this._decoder){var b=ku.StringDecoder;this._decoder=new b("utf8")}F=this._decoder.write(F)}return this._parser.write(F.toString()),this.emit("data",F),!0},c.prototype.end=function(F){return F&&F.length&&this.write(F),this._parser.end(),!0},c.prototype.on=function(F,b){var X=this;return!X._parser["on"+F]&&u.indexOf(F)!==-1&&(X._parser["on"+F]=function(){var m=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);m.splice(0,0,F),X.emit.apply(X,m)}),a.prototype.on.call(X,F,b)};var h="[CDATA[",l="DOCTYPE",d="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",w={xml:d,xmlns:g},O=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function C(F){return F===" "||F===`
`||F==="\r"||F==="	"}function _(F){return F==='"'||F==="'"}function E(F){return F===">"||C(F)}function D(F,b){return F.test(b)}function T(F,b){return!D(F,b)}var p=0;e.STATE={BEGIN:p++,BEGIN_WHITESPACE:p++,TEXT:p++,TEXT_ENTITY:p++,OPEN_WAKA:p++,SGML_DECL:p++,SGML_DECL_QUOTED:p++,DOCTYPE:p++,DOCTYPE_QUOTED:p++,DOCTYPE_DTD:p++,DOCTYPE_DTD_QUOTED:p++,COMMENT_STARTING:p++,COMMENT:p++,COMMENT_ENDING:p++,COMMENT_ENDED:p++,CDATA:p++,CDATA_ENDING:p++,CDATA_ENDING_2:p++,PROC_INST:p++,PROC_INST_BODY:p++,PROC_INST_ENDING:p++,OPEN_TAG:p++,OPEN_TAG_SLASH:p++,ATTRIB:p++,ATTRIB_NAME:p++,ATTRIB_NAME_SAW_WHITE:p++,ATTRIB_VALUE:p++,ATTRIB_VALUE_QUOTED:p++,ATTRIB_VALUE_CLOSED:p++,ATTRIB_VALUE_UNQUOTED:p++,ATTRIB_VALUE_ENTITY_Q:p++,ATTRIB_VALUE_ENTITY_U:p++,CLOSE_TAG:p++,CLOSE_TAG_SAW_WHITE:p++,SCRIPT:p++,SCRIPT_ENDING:p++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(F){var b=e.ENTITIES[F],X=typeof b=="number"?String.fromCharCode(b):b;e.ENTITIES[F]=X});for(var S in e.STATE)e.STATE[e.STATE[S]]=S;p=e.STATE;function A(F,b,X){F[b]&&F[b](X)}function L(F,b,X){F.textNode&&U(F),A(F,b,X)}function U(F){F.textNode=z(F.opt,F.textNode),F.textNode&&A(F,"ontext",F.textNode),F.textNode=""}function z(F,b){return F.trim&&(b=b.trim()),F.normalize&&(b=b.replace(/\s+/g," ")),b}function H(F,b){return U(F),F.trackPosition&&(b+=`
Line: `+F.line+`
Column: `+F.column+`
Char: `+F.c),b=new Error(b),F.error=b,A(F,"onerror",b),F}function K(F){return F.sawRoot&&!F.closedRoot&&G(F,"Unclosed root tag"),F.state!==p.BEGIN&&F.state!==p.BEGIN_WHITESPACE&&F.state!==p.TEXT&&H(F,"Unexpected end"),U(F),F.c="",F.closed=!0,A(F,"onend"),i.call(F,F.strict,F.opt),F}function G(F,b){if(typeof F!="object"||!(F instanceof i))throw new Error("bad call to strictFail");F.strict&&H(F,b)}function se(F){F.strict||(F.tagName=F.tagName[F.looseCase]());var b=F.tags[F.tags.length-1]||F,X=F.tag={name:F.tagName,attributes:{}};F.opt.xmlns&&(X.ns=b.ns),F.attribList.length=0,L(F,"onopentagstart",X)}function te(F,b){var X=F.indexOf(":"),m=X<0?["",F]:F.split(":"),N=m[0],I=m[1];return b&&F==="xmlns"&&(N="xmlns",I=""),{prefix:N,local:I}}function ge(F){if(F.strict||(F.attribName=F.attribName[F.looseCase]()),F.attribList.indexOf(F.attribName)!==-1||F.tag.attributes.hasOwnProperty(F.attribName)){F.attribName=F.attribValue="";return}if(F.opt.xmlns){var b=te(F.attribName,!0),X=b.prefix,m=b.local;if(X==="xmlns")if(m==="xml"&&F.attribValue!==d)G(F,"xml: prefix must be bound to "+d+`
Actual: `+F.attribValue);else if(m==="xmlns"&&F.attribValue!==g)G(F,"xmlns: prefix must be bound to "+g+`
Actual: `+F.attribValue);else{var N=F.tag,I=F.tags[F.tags.length-1]||F;N.ns===I.ns&&(N.ns=Object.create(I.ns)),N.ns[m]=F.attribValue}F.attribList.push([F.attribName,F.attribValue])}else F.tag.attributes[F.attribName]=F.attribValue,L(F,"onattribute",{name:F.attribName,value:F.attribValue});F.attribName=F.attribValue=""}function de(F,b){if(F.opt.xmlns){var X=F.tag,m=te(F.tagName);X.prefix=m.prefix,X.local=m.local,X.uri=X.ns[m.prefix]||"",X.prefix&&!X.uri&&(G(F,"Unbound namespace prefix: "+JSON.stringify(F.tagName)),X.uri=m.prefix);var N=F.tags[F.tags.length-1]||F;X.ns&&N.ns!==X.ns&&Object.keys(X.ns).forEach(function(Y){L(F,"onopennamespace",{prefix:Y,uri:X.ns[Y]})});for(var I=0,k=F.attribList.length;I<k;I++){var M=F.attribList[I],R=M[0],B=M[1],P=te(R,!0),$=P.prefix,q=P.local,j=$===""?"":X.ns[$]||"",V={name:R,value:B,prefix:$,local:q,uri:j};$&&$!=="xmlns"&&!j&&(G(F,"Unbound namespace prefix: "+JSON.stringify($)),V.uri=$),F.tag.attributes[R]=V,L(F,"onattribute",V)}F.attribList.length=0}F.tag.isSelfClosing=!!b,F.sawRoot=!0,F.tags.push(F.tag),L(F,"onopentag",F.tag),b||(!F.noscript&&F.tagName.toLowerCase()==="script"?F.state=p.SCRIPT:F.state=p.TEXT,F.tag=null,F.tagName=""),F.attribName=F.attribValue="",F.attribList.length=0}function _e(F){if(!F.tagName){G(F,"Weird empty close tag."),F.textNode+="</>",F.state=p.TEXT;return}if(F.script){if(F.tagName!=="script"){F.script+="</"+F.tagName+">",F.tagName="",F.state=p.SCRIPT;return}L(F,"onscript",F.script),F.script=""}var b=F.tags.length,X=F.tagName;F.strict||(X=X[F.looseCase]());for(var m=X;b--;){var N=F.tags[b];if(N.name!==m)G(F,"Unexpected close tag");else break}if(b<0){G(F,"Unmatched closing tag: "+F.tagName),F.textNode+="</"+F.tagName+">",F.state=p.TEXT;return}F.tagName=X;for(var I=F.tags.length;I-- >b;){var k=F.tag=F.tags.pop();F.tagName=F.tag.name,L(F,"onclosetag",F.tagName);var M={};for(var R in k.ns)M[R]=k.ns[R];var B=F.tags[F.tags.length-1]||F;F.opt.xmlns&&k.ns!==B.ns&&Object.keys(k.ns).forEach(function(P){var $=k.ns[P];L(F,"onclosenamespace",{prefix:P,uri:$})})}b===0&&(F.closedRoot=!0),F.tagName=F.attribValue=F.attribName="",F.attribList.length=0,F.state=p.TEXT}function ze(F){var b=F.entity,X=b.toLowerCase(),m,N="";return F.ENTITIES[b]?F.ENTITIES[b]:F.ENTITIES[X]?F.ENTITIES[X]:(b=X,b.charAt(0)==="#"&&(b.charAt(1)==="x"?(b=b.slice(2),m=parseInt(b,16),N=m.toString(16)):(b=b.slice(1),m=parseInt(b,10),N=m.toString(10))),b=b.replace(/^0+/,""),isNaN(m)||N.toLowerCase()!==b?(G(F,"Invalid character entity"),"&"+F.entity+";"):String.fromCodePoint(m))}function W(F,b){b==="<"?(F.state=p.OPEN_WAKA,F.startTagPosition=F.position):C(b)||(G(F,"Non-whitespace before first tag."),F.textNode=b,F.state=p.TEXT)}function st(F,b){var X="";return b<F.length&&(X=F.charAt(b)),X}function Pt(F){var b=this;if(this.error)throw this.error;if(b.closed)return H(b,"Cannot write after close. Assign an onready handler.");if(F===null)return K(b);typeof F=="object"&&(F=F.toString());for(var X=0,m="";m=st(F,X++),b.c=m,!!m;)switch(b.trackPosition&&(b.position++,m===`
`?(b.line++,b.column=0):b.column++),b.state){case p.BEGIN:if(b.state=p.BEGIN_WHITESPACE,m==="\uFEFF")continue;W(b,m);continue;case p.BEGIN_WHITESPACE:W(b,m);continue;case p.TEXT:if(b.sawRoot&&!b.closedRoot){for(var N=X-1;m&&m!=="<"&&m!=="&";)m=st(F,X++),m&&b.trackPosition&&(b.position++,m===`
`?(b.line++,b.column=0):b.column++);b.textNode+=F.substring(N,X-1)}m==="<"&&!(b.sawRoot&&b.closedRoot&&!b.strict)?(b.state=p.OPEN_WAKA,b.startTagPosition=b.position):(!C(m)&&(!b.sawRoot||b.closedRoot)&&G(b,"Text data outside of root node."),m==="&"?b.state=p.TEXT_ENTITY:b.textNode+=m);continue;case p.SCRIPT:m==="<"?b.state=p.SCRIPT_ENDING:b.script+=m;continue;case p.SCRIPT_ENDING:m==="/"?b.state=p.CLOSE_TAG:(b.script+="<"+m,b.state=p.SCRIPT);continue;case p.OPEN_WAKA:if(m==="!")b.state=p.SGML_DECL,b.sgmlDecl="";else if(!C(m))if(D(O,m))b.state=p.OPEN_TAG,b.tagName=m;else if(m==="/")b.state=p.CLOSE_TAG,b.tagName="";else if(m==="?")b.state=p.PROC_INST,b.procInstName=b.procInstBody="";else{if(G(b,"Unencoded <"),b.startTagPosition+1<b.position){var I=b.position-b.startTagPosition;m=new Array(I).join(" ")+m}b.textNode+="<"+m,b.state=p.TEXT}continue;case p.SGML_DECL:if(b.sgmlDecl+m==="--"){b.state=p.COMMENT,b.comment="",b.sgmlDecl="";continue}b.doctype&&b.doctype!==!0&&b.sgmlDecl?(b.state=p.DOCTYPE_DTD,b.doctype+="<!"+b.sgmlDecl+m,b.sgmlDecl=""):(b.sgmlDecl+m).toUpperCase()===h?(L(b,"onopencdata"),b.state=p.CDATA,b.sgmlDecl="",b.cdata=""):(b.sgmlDecl+m).toUpperCase()===l?(b.state=p.DOCTYPE,(b.doctype||b.sawRoot)&&G(b,"Inappropriately located doctype declaration"),b.doctype="",b.sgmlDecl=""):m===">"?(L(b,"onsgmldeclaration",b.sgmlDecl),b.sgmlDecl="",b.state=p.TEXT):(_(m)&&(b.state=p.SGML_DECL_QUOTED),b.sgmlDecl+=m);continue;case p.SGML_DECL_QUOTED:m===b.q&&(b.state=p.SGML_DECL,b.q=""),b.sgmlDecl+=m;continue;case p.DOCTYPE:m===">"?(b.state=p.TEXT,L(b,"ondoctype",b.doctype),b.doctype=!0):(b.doctype+=m,m==="["?b.state=p.DOCTYPE_DTD:_(m)&&(b.state=p.DOCTYPE_QUOTED,b.q=m));continue;case p.DOCTYPE_QUOTED:b.doctype+=m,m===b.q&&(b.q="",b.state=p.DOCTYPE);continue;case p.DOCTYPE_DTD:m==="]"?(b.doctype+=m,b.state=p.DOCTYPE):m==="<"?(b.state=p.OPEN_WAKA,b.startTagPosition=b.position):_(m)?(b.doctype+=m,b.state=p.DOCTYPE_DTD_QUOTED,b.q=m):b.doctype+=m;continue;case p.DOCTYPE_DTD_QUOTED:b.doctype+=m,m===b.q&&(b.state=p.DOCTYPE_DTD,b.q="");continue;case p.COMMENT:m==="-"?b.state=p.COMMENT_ENDING:b.comment+=m;continue;case p.COMMENT_ENDING:m==="-"?(b.state=p.COMMENT_ENDED,b.comment=z(b.opt,b.comment),b.comment&&L(b,"oncomment",b.comment),b.comment=""):(b.comment+="-"+m,b.state=p.COMMENT);continue;case p.COMMENT_ENDED:m!==">"?(G(b,"Malformed comment"),b.comment+="--"+m,b.state=p.COMMENT):b.doctype&&b.doctype!==!0?b.state=p.DOCTYPE_DTD:b.state=p.TEXT;continue;case p.CDATA:m==="]"?b.state=p.CDATA_ENDING:b.cdata+=m;continue;case p.CDATA_ENDING:m==="]"?b.state=p.CDATA_ENDING_2:(b.cdata+="]"+m,b.state=p.CDATA);continue;case p.CDATA_ENDING_2:m===">"?(b.cdata&&L(b,"oncdata",b.cdata),L(b,"onclosecdata"),b.cdata="",b.state=p.TEXT):m==="]"?b.cdata+="]":(b.cdata+="]]"+m,b.state=p.CDATA);continue;case p.PROC_INST:m==="?"?b.state=p.PROC_INST_ENDING:C(m)?b.state=p.PROC_INST_BODY:b.procInstName+=m;continue;case p.PROC_INST_BODY:if(!b.procInstBody&&C(m))continue;m==="?"?b.state=p.PROC_INST_ENDING:b.procInstBody+=m;continue;case p.PROC_INST_ENDING:m===">"?(L(b,"onprocessinginstruction",{name:b.procInstName,body:b.procInstBody}),b.procInstName=b.procInstBody="",b.state=p.TEXT):(b.procInstBody+="?"+m,b.state=p.PROC_INST_BODY);continue;case p.OPEN_TAG:D(x,m)?b.tagName+=m:(se(b),m===">"?de(b):m==="/"?b.state=p.OPEN_TAG_SLASH:(C(m)||G(b,"Invalid character in tag name"),b.state=p.ATTRIB));continue;case p.OPEN_TAG_SLASH:m===">"?(de(b,!0),_e(b)):(G(b,"Forward-slash in opening tag not followed by >"),b.state=p.ATTRIB);continue;case p.ATTRIB:if(C(m))continue;m===">"?de(b):m==="/"?b.state=p.OPEN_TAG_SLASH:D(O,m)?(b.attribName=m,b.attribValue="",b.state=p.ATTRIB_NAME):G(b,"Invalid attribute name");continue;case p.ATTRIB_NAME:m==="="?b.state=p.ATTRIB_VALUE:m===">"?(G(b,"Attribute without value"),b.attribValue=b.attribName,ge(b),de(b)):C(m)?b.state=p.ATTRIB_NAME_SAW_WHITE:D(x,m)?b.attribName+=m:G(b,"Invalid attribute name");continue;case p.ATTRIB_NAME_SAW_WHITE:if(m==="=")b.state=p.ATTRIB_VALUE;else{if(C(m))continue;G(b,"Attribute without value"),b.tag.attributes[b.attribName]="",b.attribValue="",L(b,"onattribute",{name:b.attribName,value:""}),b.attribName="",m===">"?de(b):D(O,m)?(b.attribName=m,b.state=p.ATTRIB_NAME):(G(b,"Invalid attribute name"),b.state=p.ATTRIB)}continue;case p.ATTRIB_VALUE:if(C(m))continue;_(m)?(b.q=m,b.state=p.ATTRIB_VALUE_QUOTED):(b.opt.unquotedAttributeValues||H(b,"Unquoted attribute value"),b.state=p.ATTRIB_VALUE_UNQUOTED,b.attribValue=m);continue;case p.ATTRIB_VALUE_QUOTED:if(m!==b.q){m==="&"?b.state=p.ATTRIB_VALUE_ENTITY_Q:b.attribValue+=m;continue}ge(b),b.q="",b.state=p.ATTRIB_VALUE_CLOSED;continue;case p.ATTRIB_VALUE_CLOSED:C(m)?b.state=p.ATTRIB:m===">"?de(b):m==="/"?b.state=p.OPEN_TAG_SLASH:D(O,m)?(G(b,"No whitespace between attributes"),b.attribName=m,b.attribValue="",b.state=p.ATTRIB_NAME):G(b,"Invalid attribute name");continue;case p.ATTRIB_VALUE_UNQUOTED:if(!E(m)){m==="&"?b.state=p.ATTRIB_VALUE_ENTITY_U:b.attribValue+=m;continue}ge(b),m===">"?de(b):b.state=p.ATTRIB;continue;case p.CLOSE_TAG:if(b.tagName)m===">"?_e(b):D(x,m)?b.tagName+=m:b.script?(b.script+="</"+b.tagName,b.tagName="",b.state=p.SCRIPT):(C(m)||G(b,"Invalid tagname in closing tag"),b.state=p.CLOSE_TAG_SAW_WHITE);else{if(C(m))continue;T(O,m)?b.script?(b.script+="</"+m,b.state=p.SCRIPT):G(b,"Invalid tagname in closing tag."):b.tagName=m}continue;case p.CLOSE_TAG_SAW_WHITE:if(C(m))continue;m===">"?_e(b):G(b,"Invalid characters in closing tag");continue;case p.TEXT_ENTITY:case p.ATTRIB_VALUE_ENTITY_Q:case p.ATTRIB_VALUE_ENTITY_U:var k,M;switch(b.state){case p.TEXT_ENTITY:k=p.TEXT,M="textNode";break;case p.ATTRIB_VALUE_ENTITY_Q:k=p.ATTRIB_VALUE_QUOTED,M="attribValue";break;case p.ATTRIB_VALUE_ENTITY_U:k=p.ATTRIB_VALUE_UNQUOTED,M="attribValue";break}if(m===";"){var R=ze(b);b.opt.unparsedEntities&&!Object.values(e.XML_ENTITIES).includes(R)?(b.entity="",b.state=k,b.write(R)):(b[M]+=R,b.entity="",b.state=k)}else D(b.entity.length?y:v,m)?b.entity+=m:(G(b,"Invalid character in entity name"),b[M]+="&"+b.entity+m,b.entity="",b.state=k);continue;default:throw new Error(b,"Unknown state: "+b.state)}return b.position>=b.bufferCheckPosition&&s(b),b}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var F=String.fromCharCode,b=Math.floor,X=function(){var m=16384,N=[],I,k,M=-1,R=arguments.length;if(!R)return"";for(var B="";++M<R;){var P=Number(arguments[M]);if(!isFinite(P)||P<0||P>1114111||b(P)!==P)throw RangeError("Invalid code point: "+P);P<=65535?N.push(P):(P-=65536,I=(P>>10)+55296,k=P%1024+56320,N.push(I,k)),(M+1===R||N.length>m)&&(B+=F.apply(null,N),N.length=0)}return B};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:X,configurable:!0,writable:!0}):String.fromCodePoint=X}()})(t)}(jn)),jn}var qn={},Es;function kl(){return Es||(Es=1,(function(){qn.stripBOM=function(t){return t[0]==="\uFEFF"?t.substring(1):t}}).call(Z)),qn}var tt={},bs;function Ua(){return bs||(bs=1,(function(){var t;t=new RegExp(/(?!xmlns)^.*:/),tt.normalize=function(e){return e.toLowerCase()},tt.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},tt.stripPrefix=function(e){return e.replace(t,"")},tt.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},tt.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(Z)),tt}var Ss;function jl(){return Ss||(Ss=1,function(t){(function(){var e,r,i,s,n,o,a,u,f=function(l,d){return function(){return l.apply(d,arguments)}},c=function(l,d){for(var g in d)h.call(d,g)&&(l[g]=d[g]);function w(){this.constructor=l}return w.prototype=d.prototype,l.prototype=new w,l.__super__=d.prototype,l},h={}.hasOwnProperty;a=$l(),i=nt,e=kl(),o=Ua(),u=ju.setImmediate,r=wi().defaults,s=function(l){return typeof l=="object"&&l!=null&&Object.keys(l).length===0},n=function(l,d,g){var w,O,x;for(w=0,O=l.length;w<O;w++)x=l[w],d=x(d,g);return d},t.Parser=function(l){c(d,l);function d(g){this.parseStringPromise=f(this.parseStringPromise,this),this.parseString=f(this.parseString,this),this.reset=f(this.reset,this),this.assignOrPush=f(this.assignOrPush,this),this.processAsync=f(this.processAsync,this);var w,O,x;if(!(this instanceof t.Parser))return new t.Parser(g);this.options={},O=r["0.2"];for(w in O)h.call(O,w)&&(x=O[w],this.options[w]=x);for(w in g)h.call(g,w)&&(x=g[w],this.options[w]=x);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(o.normalize)),this.reset()}return d.prototype.processAsync=function(){var g,w;try{return this.remaining.length<=this.options.chunkSize?(g=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(g),this.saxParser.close()):(g=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(g),u(this.processAsync))}catch(O){if(w=O,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(w)}},d.prototype.assignOrPush=function(g,w,O){return w in g?(g[w]instanceof Array||(g[w]=[g[w]]),g[w].push(O)):this.options.explicitArray?g[w]=[O]:g[w]=O},d.prototype.reset=function(){var g,w,O,x;return this.removeAllListeners(),this.saxParser=a.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(v){return function(y){if(v.saxParser.resume(),!v.saxParser.errThrown)return v.saxParser.errThrown=!0,v.emit("error",y)}}(this),this.saxParser.onend=function(v){return function(){if(!v.saxParser.ended)return v.saxParser.ended=!0,v.emit("end",v.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,x=[],g=this.options.attrkey,w=this.options.charkey,this.saxParser.onopentag=function(v){return function(y){var C,_,E,D,T;if(E=Object.create(null),E[w]="",!v.options.ignoreAttrs){T=y.attributes;for(C in T)h.call(T,C)&&(!(g in E)&&!v.options.mergeAttrs&&(E[g]=Object.create(null)),_=v.options.attrValueProcessors?n(v.options.attrValueProcessors,y.attributes[C],C):y.attributes[C],D=v.options.attrNameProcessors?n(v.options.attrNameProcessors,C):C,v.options.mergeAttrs?v.assignOrPush(E,D,_):E[g][D]=_)}return E["#name"]=v.options.tagNameProcessors?n(v.options.tagNameProcessors,y.name):y.name,v.options.xmlns&&(E[v.options.xmlnskey]={uri:y.uri,local:y.local}),x.push(E)}}(this),this.saxParser.onclosetag=function(v){return function(){var y,C,_,E,D,T,p,S,A,L;if(T=x.pop(),D=T["#name"],(!v.options.explicitChildren||!v.options.preserveChildrenOrder)&&delete T["#name"],T.cdata===!0&&(y=T.cdata,delete T.cdata),A=x[x.length-1],T[w].match(/^\s*$/)&&!y?(C=T[w],delete T[w]):(v.options.trim&&(T[w]=T[w].trim()),v.options.normalize&&(T[w]=T[w].replace(/\s{2,}/g," ").trim()),T[w]=v.options.valueProcessors?n(v.options.valueProcessors,T[w],D):T[w],Object.keys(T).length===1&&w in T&&!v.EXPLICIT_CHARKEY&&(T=T[w])),s(T)&&(typeof v.options.emptyTag=="function"?T=v.options.emptyTag():T=v.options.emptyTag!==""?v.options.emptyTag:C),v.options.validator!=null&&(L="/"+function(){var U,z,H;for(H=[],U=0,z=x.length;U<z;U++)E=x[U],H.push(E["#name"]);return H}().concat(D).join("/"),function(){var U;try{return T=v.options.validator(L,A&&A[D],T)}catch(z){return U=z,v.emit("error",U)}}()),v.options.explicitChildren&&!v.options.mergeAttrs&&typeof T=="object"){if(!v.options.preserveChildrenOrder)E=Object.create(null),v.options.attrkey in T&&(E[v.options.attrkey]=T[v.options.attrkey],delete T[v.options.attrkey]),!v.options.charsAsChildren&&v.options.charkey in T&&(E[v.options.charkey]=T[v.options.charkey],delete T[v.options.charkey]),Object.getOwnPropertyNames(T).length>0&&(E[v.options.childkey]=T),T=E;else if(A){A[v.options.childkey]=A[v.options.childkey]||[],p=Object.create(null);for(_ in T)h.call(T,_)&&(p[_]=T[_]);A[v.options.childkey].push(p),delete T["#name"],Object.keys(T).length===1&&w in T&&!v.EXPLICIT_CHARKEY&&(T=T[w])}}return x.length>0?v.assignOrPush(A,D,T):(v.options.explicitRoot&&(S=T,T=Object.create(null),T[D]=S),v.resultObject=T,v.saxParser.ended=!0,v.emit("end",v.resultObject))}}(this),O=function(v){return function(y){var C,_;if(_=x[x.length-1],_)return _[w]+=y,v.options.explicitChildren&&v.options.preserveChildrenOrder&&v.options.charsAsChildren&&(v.options.includeWhiteChars||y.replace(/\\n/g,"").trim()!=="")&&(_[v.options.childkey]=_[v.options.childkey]||[],C={"#name":"__text__"},C[w]=y,v.options.normalize&&(C[w]=C[w].replace(/\s{2,}/g," ").trim()),_[v.options.childkey].push(C)),_}}(this),this.saxParser.ontext=O,this.saxParser.oncdata=function(v){return function(y){var C;if(C=O(y),C)return C.cdata=!0}}()},d.prototype.parseString=function(g,w){var O;w!=null&&typeof w=="function"&&(this.on("end",function(x){return this.reset(),w(null,x)}),this.on("error",function(x){return this.reset(),w(x)}));try{return g=g.toString(),g.trim()===""?(this.emit("end",null),!0):(g=e.stripBOM(g),this.options.async?(this.remaining=g,u(this.processAsync),this.saxParser):this.saxParser.write(g).close())}catch(x){if(O=x,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw O}else return this.emit("error",O),this.saxParser.errThrown=!0}},d.prototype.parseStringPromise=function(g){return new Promise(function(w){return function(O,x){return w.parseString(g,function(v,y){return v?x(v):O(y)})}}(this))},d}(i),t.parseString=function(l,d,g){var w,O,x;return g!=null?(typeof g=="function"&&(w=g),typeof d=="object"&&(O=d)):(typeof d=="function"&&(w=d),O={}),x=new t.Parser(O),x.parseString(l,w)},t.parseStringPromise=function(l,d){var g,w;return typeof d=="object"&&(g=d),w=new t.Parser(g),w.parseStringPromise(l)}}).call(Z)}(kn)),kn}(function(){var t,e,r,i,s=function(o,a){for(var u in a)n.call(a,u)&&(o[u]=a[u]);function f(){this.constructor=o}return f.prototype=a.prototype,o.prototype=new f,o.__super__=a.prototype,o},n={}.hasOwnProperty;e=wi(),t=Rl(),r=jl(),i=Ua(),Ge.defaults=e.defaults,Ge.processors=i,Ge.ValidationError=function(o){s(a,o);function a(u){this.message=u}return a}(Error),Ge.Builder=t.Builder,Ge.Parser=r.Parser,Ge.parseString=r.parseString,Ge.parseStringPromise=r.parseStringPromise}).call(Z);var li={exports:{}},Bt={exports:{}},Bn,Os;function Xa(){if(Os)return Bn;Os=1;function t(e){i.debug=i,i.default=i,i.coerce=f,i.disable=a,i.enable=o,i.enabled=u,i.humanize=wa(),Object.keys(e).forEach(function(c){i[c]=e[c]}),i.instances=[],i.names=[],i.skips=[],i.formatters={};function r(c){for(var h=0,l=0;l<c.length;l++)h=(h<<5)-h+c.charCodeAt(l),h|=0;return i.colors[Math.abs(h)%i.colors.length]}i.selectColor=r;function i(c){var h;function l(){if(l.enabled){for(var d=arguments.length,g=new Array(d),w=0;w<d;w++)g[w]=arguments[w];var O=l,x=Number(new Date),v=x-(h||x);O.diff=v,O.prev=h,O.curr=x,h=x,g[0]=i.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");var y=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,function(_,E){if(_==="%%")return _;y++;var D=i.formatters[E];if(typeof D=="function"){var T=g[y];_=D.call(O,T),g.splice(y,1),y--}return _}),i.formatArgs.call(O,g);var C=O.log||i.log;C.apply(O,g)}}return l.namespace=c,l.enabled=i.enabled(c),l.useColors=i.useColors(),l.color=r(c),l.destroy=s,l.extend=n,typeof i.init=="function"&&i.init(l),i.instances.push(l),l}function s(){var c=i.instances.indexOf(this);return c!==-1?(i.instances.splice(c,1),!0):!1}function n(c,h){return i(this.namespace+(typeof h>"u"?":":h)+c)}function o(c){i.save(c),i.names=[],i.skips=[];var h,l=(typeof c=="string"?c:"").split(/[\s,]+/),d=l.length;for(h=0;h<d;h++)l[h]&&(c=l[h].replace(/\*/g,".*?"),c[0]==="-"?i.skips.push(new RegExp("^"+c.substr(1)+"$")):i.names.push(new RegExp("^"+c+"$")));for(h=0;h<i.instances.length;h++){var g=i.instances[h];g.enabled=i.enabled(g.namespace)}}function a(){i.enable("")}function u(c){if(c[c.length-1]==="*")return!0;var h,l;for(h=0,l=i.skips.length;h<l;h++)if(i.skips[h].test(c))return!1;for(h=0,l=i.names.length;h<l;h++)if(i.names[h].test(c))return!0;return!1}function f(c){return c instanceof Error?c.stack||c.message:c}return i.enable(i.load()),i}return Bn=t,Bn}var Ts;function ql(){return Ts||(Ts=1,function(t,e){function r(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(l){return typeof l}:r=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},r(c)}e.log=n,e.formatArgs=s,e.save=o,e.load=a,e.useColors=i,e.storage=u(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!!this.useColors){var h="color: "+this.color;c.splice(1,0,h,"color: inherit");var l=0,d=0;c[0].replace(/%[a-zA-Z%]/g,function(g){g!=="%%"&&(l++,g==="%c"&&(d=l))}),c.splice(d,0,h)}}function n(){var c;return(typeof console>"u"?"undefined":r(console))==="object"&&console.log&&(c=console).log.apply(c,arguments)}function o(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function a(){var c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function u(){try{return localStorage}catch{}}t.exports=Xa()(e);var f=t.exports.formatters;f.j=function(c){try{return JSON.stringify(c)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}(Bt,Bt.exports)),Bt.exports}var Ut={exports:{}},Cs;function Bl(){return Cs||(Cs=1,function(t,e){var r=yi,i=ht;e.init=h,e.log=u,e.formatArgs=o,e.save=f,e.load=c,e.useColors=n,e.colors=[6,2,3,4,5,1];try{var s=ba();s&&(s.stderr||s).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}e.inspectOpts=Object.keys(process.env).filter(function(d){return/^debug_/i.test(d)}).reduce(function(d,g){var w=g.substring(6).toLowerCase().replace(/_([a-z])/g,function(x,v){return v.toUpperCase()}),O=process.env[g];return/^(yes|on|true|enabled)$/i.test(O)?O=!0:/^(no|off|false|disabled)$/i.test(O)?O=!1:O==="null"?O=null:O=Number(O),d[w]=O,d},{});function n(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:r.isatty(process.stderr.fd)}function o(d){var g=this.namespace,w=this.useColors;if(w){var O=this.color,x="\x1B[3"+(O<8?O:"8;5;"+O),v="  ".concat(x,";1m").concat(g," \x1B[0m");d[0]=v+d[0].split(`
`).join(`
`+v),d.push(x+"m+"+t.exports.humanize(this.diff)+"\x1B[0m")}else d[0]=a()+g+" "+d[0]}function a(){return e.inspectOpts.hideDate?"":new Date().toISOString()+" "}function u(){return process.stderr.write(i.format.apply(i,arguments)+`
`)}function f(d){d?process.env.DEBUG=d:delete process.env.DEBUG}function c(){return process.env.DEBUG}function h(d){d.inspectOpts={};for(var g=Object.keys(e.inspectOpts),w=0;w<g.length;w++)d.inspectOpts[g[w]]=e.inspectOpts[g[w]]}t.exports=Xa()(e);var l=t.exports.formatters;l.o=function(d){return this.inspectOpts.colors=this.useColors,i.inspect(d,this.inspectOpts).split(`
`).map(function(g){return g.trim()}).join(" ")},l.O=function(d){return this.inspectOpts.colors=this.useColors,i.inspect(d,this.inspectOpts)}}(Ut,Ut.exports)),Ut.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?li.exports=ql():li.exports=Bl();var Ul=li.exports;const wt=nr,Xl=mi,Vl=$u,Et=vi,Ds=pt,zl=Ge,Wl=Pa,Hl=Ul("roa"),Xt=lr;function Gl(t){return t.replace(/[\t\n\r\f]/g," ")}function Kl(t){const e=Object.keys(t),r={};for(let i=0;i<e.length;i++){const s=e[i];r[s.toLowerCase()]=t[s]}return r}function Yl(t){const e="x-acs-",r=Object.keys(t),i=[];for(let n=0;n<r.length;n++){const o=r[n];o.startsWith(e)&&i.push(o)}i.sort();var s="";for(let n=0;n<i.length;n++){const o=i[n];s+=`${o}:${Gl(t[o]).trim()}
`}return s}function Jl(t,e){const r=Object.keys(e).sort();if(r.length===0)return t;for(var i=[],s=0;s<r.length;s++){const n=r[s];i.push(`${n}=${e[n]}`)}return`${t}?${i.join("&")}`}function Ql(t,e,r,i){const s=r.accept,n=r["content-md5"]||"",o=r["content-type"]||"",a=r.date||"",u=`${t}
${s}
${n}
${o}
${a}
`,f=Yl(r),c=Jl(e,i);return`${u}${f}${c}`}function Zl(t){const e=new zl.Parser({});return new Promise((r,i)=>{e.parseString(t,(s,n)=>{if(s)return i(s);r(n)})})}class ef extends Error{constructor(e){const r=e.Message[0],i=e.Code[0],s=e.HostId[0],n=e.RequestId[0];super(`${r} hostid: ${s}, requestid: ${n}`),this.code=i}}class tf{constructor(e){if(wt(e,'must pass "config"'),wt(e.endpoint,'must pass "config.endpoint"'),!e.endpoint.startsWith("https://")&&!e.endpoint.startsWith("http://"))throw new Error(`"config.endpoint" must starts with 'https://' or 'http://'.`);if(wt(e.apiVersion,'must pass "config.apiVersion"'),e.credentialsProvider){if(typeof e.credentialsProvider.getCredentials!="function")throw new Error('must pass "config.credentialsProvider" with function "getCredentials()"');this.credentialsProvider=e.credentialsProvider}else wt(e.accessKeyId,'must pass "config.accessKeyId"'),wt(e.accessKeySecret,'must pass "config.accessKeySecret"'),this.accessKeyId=e.accessKeyId,this.accessKeySecret=e.accessKeySecret,this.securityToken=e.securityToken,this.credentialsProvider={getCredentials:async()=>({accessKeyId:e.accessKeyId,accessKeySecret:e.accessKeySecret,securityToken:e.securityToken})};this.endpoint=e.endpoint,this.apiVersion=e.apiVersion,this.host=Xl.parse(this.endpoint).hostname,this.opts=e.opts;var r=this.endpoint.startsWith("https://")?rr:tr;this.keepAliveAgent=new r.Agent({keepAlive:!0,keepAliveMsecs:3e3})}buildHeaders(){var r={accept:"application/json",date:new Date().toGMTString(),host:this.host,"x-acs-signature-nonce":Et.makeNonce(),"x-acs-signature-method":"HMAC-SHA1","x-acs-signature-version":"1.0","x-acs-version":this.apiVersion,"user-agent":Xt.DEFAULT_UA,"x-sdk-client":Xt.DEFAULT_CLIENT};return this.securityToken&&(r["x-acs-accesskey-id"]=this.accessKeyId,r["x-acs-security-token"]=this.securityToken),r}signature(e){const r=Buffer.from(e,"utf8");return Et.sha1(r,this.accessKeySecret,"base64")}buildAuthorization(e){return`acs ${this.accessKeyId}:${this.signature(e)}`}async request(e,r,i={},s="",n={},o={}){const a=await this.credentialsProvider.getCredentials();var f={accept:"application/json",date:new Date().toGMTString(),host:this.host,"x-acs-signature-nonce":Et.makeNonce(),"x-acs-version":this.apiVersion,"user-agent":Xt.DEFAULT_UA,"x-sdk-client":Xt.DEFAULT_CLIENT};a&&a.accessKeyId&&a.accessKeySecret&&(f["x-acs-signature-method"]="HMAC-SHA1",f["x-acs-signature-version"]="1.0",a.securityToken&&(f["x-acs-accesskey-id"]=a.accessKeyId,f["x-acs-security-token"]=a.securityToken));var c=Object.assign(f,Kl(n)),h=null;h=Buffer.from(s,"utf8"),c["content-md5"]=Et.md5(h,"base64"),c["content-length"]=h.length;var l=`${this.endpoint}${r}`;if(Object.keys(i).length&&(l+=`?${Vl.stringify(i)}`),a&&a.accessKeyId&&a.accessKeySecret){const y=Ql(e,r,c,i);Hl("stringToSign: %s",y);const C=Buffer.from(y,"utf8"),_=Et.sha1(C,a.accessKeySecret,"base64");c.authorization=`acs ${a.accessKeyId}:${_}`}const d=Object.assign({method:e,agent:this.keepAliveAgent,headers:c,data:h},this.opts,o),g=await Ds.request(l,d),w=await Ds.read(g,"utf8");if(o.rawBody)return w;const O=g.headers["content-type"]||"";if(O.startsWith("application/json")){const y=g.statusCode;if(y===204)return w;var x;try{x=Wl.parse(w)}catch(C){throw C.name="FormatError",C.message="parse response to json error",C.body=w,C}if(y>=400){const C=x.Message||x.errorMsg||"",_=x.Code||x.errorCode||"",E=x.RequestId||"";var v=new Error(`code: ${y}, ${C}, requestid: ${E}`);throw v.name=`${_}Error`,v.statusCode=y,v.result=x,v.code=_,v}return x}if(O.startsWith("text/xml")){const y=await Zl(w);if(y.Error)throw new ef(y.Error);return y}return w}put(e,r,i,s,n){return this.request("PUT",e,r,i,s,n)}post(e,r,i,s,n){return this.request("POST",e,r,i,s,n)}get(e,r,i,s){return this.request("GET",e,r,"",i,s)}delete(e,r,i,s){return this.request("DELETE",e,r,"",i,s)}}var rf=tf;ur.exports=Ma;ur.exports.ROAClient=rf;ur.exports.RPCClient=Ma;var nf=ur.exports;const of=Nt(nf);async function sf(){const t=new of({accessKeyId:Jt.accessKeyId,accessKeySecret:Jt.accessKeySecret,endpoint:"http://nls-meta.cn-shanghai.aliyuncs.com",apiVersion:"2019-02-28"});try{return(await t.request("CreateToken")).Token.Id}catch(e){return console.error("Error creating token:",e),null}}var Va={exports:{}},Un,_s;function af(){if(_s)return Un;_s=1,Un=i,i.sync=s;var t=ce;function e(n,o){var a=o.pathExt!==void 0?o.pathExt:process.env.PATHEXT;if(!a||(a=a.split(";"),a.indexOf("")!==-1))return!0;for(var u=0;u<a.length;u++){var f=a[u].toLowerCase();if(f&&n.substr(-f.length).toLowerCase()===f)return!0}return!1}function r(n,o,a){return!n.isSymbolicLink()&&!n.isFile()?!1:e(o,a)}function i(n,o,a){t.stat(n,function(u,f){a(u,u?!1:r(f,n,o))})}function s(n,o){return r(t.statSync(n),n,o)}return Un}var Xn,As;function uf(){if(As)return Xn;As=1,Xn=e,e.sync=r;var t=ce;function e(n,o,a){t.stat(n,function(u,f){a(u,u?!1:i(f,o))})}function r(n,o){return i(t.statSync(n),o)}function i(n,o){return n.isFile()&&s(n,o)}function s(n,o){var a=n.mode,u=n.uid,f=n.gid,c=o.uid!==void 0?o.uid:process.getuid&&process.getuid(),h=o.gid!==void 0?o.gid:process.getgid&&process.getgid(),l=parseInt("100",8),d=parseInt("010",8),g=parseInt("001",8),w=l|d,O=a&g||a&d&&f===h||a&l&&u===c||a&w&&c===0;return O}return Xn}var Qt;process.platform==="win32"||Z.TESTING_WINDOWS?Qt=af():Qt=uf();var cf=Li;Li.sync=lf;function Li(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,s){Li(t,e||{},function(n,o){n?s(n):i(o)})})}Qt(t,e||{},function(i,s){i&&(i.code==="EACCES"||e&&e.ignoreErrors)&&(i=null,s=!1),r(i,s)})}function lf(t,e){try{return Qt.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}var ff=Ka;Ka.sync=pf;var fi=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",za=J,hf=fi?";":":",Wa=cf;function Ha(t){var e=new Error("not found: "+t);return e.code="ENOENT",e}function Ga(t,e){var r=e.colon||hf,i=e.path||process.env.PATH||"",s=[""];i=i.split(r);var n="";return fi&&(i.unshift(process.cwd()),n=e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM",s=n.split(r),t.indexOf(".")!==-1&&s[0]!==""&&s.unshift("")),(t.match(/\//)||fi&&t.match(/\\/))&&(i=[""]),{env:i,ext:s,extExe:n}}function Ka(t,e,r){typeof e=="function"&&(r=e,e={});var i=Ga(t,e),s=i.env,n=i.ext,o=i.extExe,a=[];(function u(f,c){if(f===c)return e.all&&a.length?r(null,a):r(Ha(t));var h=s[f];h.charAt(0)==='"'&&h.slice(-1)==='"'&&(h=h.slice(1,-1));var l=za.join(h,t);!h&&/^\.[\\\/]/.test(t)&&(l=t.slice(0,2)+l),function d(g,w){if(g===w)return u(f+1,c);var O=n[g];Wa(l+O,{pathExt:o},function(x,v){if(!x&&v)if(e.all)a.push(l+O);else return r(null,l+O);return d(g+1,w)})}(0,n.length)})(0,s.length)}function pf(t,e){e=e||{};for(var r=Ga(t,e),i=r.env,s=r.ext,n=r.extExe,o=[],a=0,u=i.length;a<u;a++){var f=i[a];f.charAt(0)==='"'&&f.slice(-1)==='"'&&(f=f.slice(1,-1));var c=za.join(f,t);!f&&/^\.[\\\/]/.test(t)&&(c=t.slice(0,2)+c);for(var h=0,l=s.length;h<l;h++){var d=c+s[h],g;try{if(g=Wa.sync(d,{pathExt:n}),g)if(e.all)o.push(d);else return d}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw Ha(t)}Ft.exec;var df=et.platform().match(/win(32|64)/),mf=ff,Fs=/\r\n|\r|\n/g,bt=/^\[?(.*?)\]?$/,Ns=/[,]/,Vt={};function yf(t){var e={};t=t.replace(/=\s+/g,"=").trim();for(var r=t.split(" "),i=0;i<r.length;i++){var s=r[i].split("=",2),n=s[0],o=s[1];if(typeof o>"u")return null;e[n]=o}return e}var xs=Va.exports={isWindows:df,streamRegexp:bt,copy:function(t,e){Object.keys(t).forEach(function(r){e[r]=t[r]})},args:function(){var t=[],e=function(){arguments.length===1&&Array.isArray(arguments[0])?t=t.concat(arguments[0]):t=t.concat([].slice.call(arguments))};return e.clear=function(){t=[]},e.get=function(){return t},e.find=function(r,i){var s=t.indexOf(r);if(s!==-1)return t.slice(s+1,s+1+(i||0))},e.remove=function(r,i){var s=t.indexOf(r);s!==-1&&t.splice(s,(i||0)+1)},e.clone=function(){var r=xs.args();return r(t),r},e},makeFilterStrings:function(t){return t.map(function(e){if(typeof e=="string")return e;var r="";return Array.isArray(e.inputs)?r+=e.inputs.map(function(i){return i.replace(bt,"[$1]")}).join(""):typeof e.inputs=="string"&&(r+=e.inputs.replace(bt,"[$1]")),r+=e.filter,e.options&&(typeof e.options=="string"||typeof e.options=="number"?r+="="+e.options:Array.isArray(e.options)?r+="="+e.options.map(function(i){return typeof i=="string"&&i.match(Ns)?"'"+i+"'":i}).join(":"):Object.keys(e.options).length&&(r+="="+Object.keys(e.options).map(function(i){var s=e.options[i];return typeof s=="string"&&s.match(Ns)&&(s="'"+s+"'"),i+"="+s}).join(":"))),Array.isArray(e.outputs)?r+=e.outputs.map(function(i){return i.replace(bt,"[$1]")}).join(""):typeof e.outputs=="string"&&(r+=e.outputs.replace(bt,"[$1]")),r})},which:function(t,e){if(t in Vt)return e(null,Vt[t]);mf(t,function(r,i){if(r)return e(null,Vt[t]="");e(null,Vt[t]=i)})},timemarkToSeconds:function(t){if(typeof t=="number")return t;if(t.indexOf(":")===-1&&t.indexOf(".")>=0)return Number(t);var e=t.split(":"),r=Number(e.pop());return e.length&&(r+=Number(e.pop())*60),e.length&&(r+=Number(e.pop())*3600),r},extractCodecData:function(t,e,r){var i=/Input #[0-9]+, ([^ ]+),/,s=/Duration\: ([^,]+)/,n=/Audio\: (.*)/,o=/Video\: (.*)/;"inputStack"in r||(r.inputStack=[],r.inputIndex=-1,r.inInput=!1);var a=r.inputStack,u=r.inputIndex,f=r.inInput,c,h,l,d;if(c=e.match(i))f=r.inInput=!0,u=r.inputIndex=r.inputIndex+1,a[u]={format:c[1],audio:"",video:"",duration:""};else if(f&&(h=e.match(s)))a[u].duration=h[1];else if(f&&(l=e.match(n)))l=l[1].split(", "),a[u].audio=l[0],a[u].audio_details=l;else if(f&&(d=e.match(o)))d=d[1].split(", "),a[u].video=d[0],a[u].video_details=d;else if(/Output #\d+/.test(e))f=r.inInput=!1;else if(/Stream mapping:|Press (\[q\]|ctrl-c) to stop/.test(e))return t.emit.apply(t,["codecData"].concat(a)),!0;return!1},extractProgress:function(t,e){var r=yf(e);if(r){var i={frames:parseInt(r.frame,10),currentFps:parseInt(r.fps,10),currentKbps:r.bitrate?parseFloat(r.bitrate.replace("kbits/s","")):0,targetSize:parseInt(r.size||r.Lsize,10),timemark:r.time};if(t._ffprobeData&&t._ffprobeData.format&&t._ffprobeData.format.duration){var s=Number(t._ffprobeData.format.duration);isNaN(s)||(i.percent=xs.timemarkToSeconds(i.timemark)/s*100)}t.emit("progress",i)}},extractError:function(t){return t.split(Fs).reduce(function(e,r){return r.charAt(0)===" "||r.charAt(0)==="["?[]:(e.push(r),e)},[]).join(`
`)},linesRing:function(t){var e=[],r=[],i=null,s=!1,n=t-1;function o(a){e.forEach(function(u){u(a)})}return{callback:function(a){r.forEach(function(u){a(u)}),e.push(a)},append:function(a){if(!s&&(a instanceof Buffer&&(a=""+a),!(!a||a.length===0))){var u=a.split(Fs);u.length===1?i!==null?i=i+u.shift():i=u.shift():(i!==null&&(i=i+u.shift(),o(i),r.push(i)),i=u.pop(),u.forEach(function(f){o(f),r.push(f)}),n>-1&&r.length>n&&r.splice(0,r.length-n))}},get:function(){return i!==null?r.concat([i]).join(`
`):r.join(`
`)},close:function(){s||(i!==null&&(o(i),r.push(i),n>-1&&r.length>n&&r.shift(),i=null),s=!0)}}}},Ve=Va.exports,Vn,Is;function gf(){if(Is)return Vn;Is=1;var t=Ve;return Vn=function(e){e.mergeAdd=e.addInput=e.input=function(r){var i=!1,s=!1;if(typeof r!="string"){if(!("readable"in r)||!r.readable)throw new Error("Invalid input");var n=this._inputs.some(function(a){return a.isStream});if(n)throw new Error("Only one input stream is supported");s=!0,r.pause()}else{var o=r.match(/^([a-z]{2,}):/i);i=!o||o[0]==="file"}return this._inputs.push(this._currentInput={source:r,isFile:i,isStream:s,options:t.args()}),this},e.withInputFormat=e.inputFormat=e.fromFormat=function(r){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-f",r),this},e.withInputFps=e.withInputFPS=e.withFpsInput=e.withFPSInput=e.inputFPS=e.inputFps=e.fpsInput=e.FPSInput=function(r){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-r",r),this},e.nativeFramerate=e.withNativeFramerate=e.native=function(){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-re"),this},e.setStartTime=e.seekInput=function(r){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-ss",r),this},e.loop=function(r){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-loop","1"),typeof r<"u"&&this.duration(r),this}},Vn}var zn,Ps;function vf(){if(Ps)return zn;Ps=1;var t=Ve;return zn=function(e){e.withNoAudio=e.noAudio=function(){return this._currentOutput.audio.clear(),this._currentOutput.audioFilters.clear(),this._currentOutput.audio("-an"),this},e.withAudioCodec=e.audioCodec=function(r){return this._currentOutput.audio("-acodec",r),this},e.withAudioBitrate=e.audioBitrate=function(r){return this._currentOutput.audio("-b:a",(""+r).replace(/k?$/,"k")),this},e.withAudioChannels=e.audioChannels=function(r){return this._currentOutput.audio("-ac",r),this},e.withAudioFrequency=e.audioFrequency=function(r){return this._currentOutput.audio("-ar",r),this},e.withAudioQuality=e.audioQuality=function(r){return this._currentOutput.audio("-aq",r),this},e.withAudioFilter=e.withAudioFilters=e.audioFilter=e.audioFilters=function(r){return arguments.length>1&&(r=[].slice.call(arguments)),Array.isArray(r)||(r=[r]),this._currentOutput.audioFilters(t.makeFilterStrings(r)),this}},zn}var Wn,Ls;function wf(){if(Ls)return Wn;Ls=1;var t=Ve;return Wn=function(e){e.withNoVideo=e.noVideo=function(){return this._currentOutput.video.clear(),this._currentOutput.videoFilters.clear(),this._currentOutput.video("-vn"),this},e.withVideoCodec=e.videoCodec=function(r){return this._currentOutput.video("-vcodec",r),this},e.withVideoBitrate=e.videoBitrate=function(r,i){return r=(""+r).replace(/k?$/,"k"),this._currentOutput.video("-b:v",r),i&&this._currentOutput.video("-maxrate",r,"-minrate",r,"-bufsize","3M"),this},e.withVideoFilter=e.withVideoFilters=e.videoFilter=e.videoFilters=function(r){return arguments.length>1&&(r=[].slice.call(arguments)),Array.isArray(r)||(r=[r]),this._currentOutput.videoFilters(t.makeFilterStrings(r)),this},e.withOutputFps=e.withOutputFPS=e.withFpsOutput=e.withFPSOutput=e.withFps=e.withFPS=e.outputFPS=e.outputFps=e.fpsOutput=e.FPSOutput=e.fps=e.FPS=function(r){return this._currentOutput.video("-r",r),this},e.takeFrames=e.withFrames=e.frames=function(r){return this._currentOutput.video("-vframes",r),this}},Wn}var Hn,Ms;function Ef(){if(Ms)return Hn;Ms=1;function t(r,i,s,n){return[{filter:"scale",options:{w:"if(gt(a,"+s+"),"+r+",trunc("+i+"*a/2)*2)",h:"if(lt(a,"+s+"),"+i+",trunc("+r+"/a/2)*2)"}},{filter:"pad",options:{w:r,h:i,x:"if(gt(a,"+s+"),0,("+r+"-iw)/2)",y:"if(lt(a,"+s+"),0,("+i+"-ih)/2)",color:n}}]}function e(r,i,s){var n=r.sizeData=r.sizeData||{};if(n[i]=s,!("size"in n))return[];var o=n.size.match(/([0-9]+)x([0-9]+)/),a=n.size.match(/([0-9]+)x\?/),u=n.size.match(/\?x([0-9]+)/),f=n.size.match(/\b([0-9]{1,3})%/),c,h,l;if(f){var d=Number(f[1])/100;return[{filter:"scale",options:{w:"trunc(iw*"+d+"/2)*2",h:"trunc(ih*"+d+"/2)*2"}}]}else{if(o)return c=Math.round(Number(o[1])/2)*2,h=Math.round(Number(o[2])/2)*2,l=c/h,n.pad?t(c,h,l,n.pad):[{filter:"scale",options:{w:c,h}}];if(a||u)return"aspect"in n?(c=a?a[1]:Math.round(Number(u[1])*n.aspect),h=u?u[1]:Math.round(Number(a[1])/n.aspect),c=Math.round(c/2)*2,h=Math.round(h/2)*2,n.pad?t(c,h,n.aspect,n.pad):[{filter:"scale",options:{w:c,h}}]):a?[{filter:"scale",options:{w:Math.round(Number(a[1])/2)*2,h:"trunc(ow/a/2)*2"}}]:[{filter:"scale",options:{w:"trunc(oh*a/2)*2",h:Math.round(Number(u[1])/2)*2}}];throw new Error("Invalid size specified: "+n.size)}}return Hn=function(r){r.keepPixelAspect=r.keepDisplayAspect=r.keepDisplayAspectRatio=r.keepDAR=function(){return this.videoFilters([{filter:"scale",options:{w:"if(gt(sar,1),iw*sar,iw)",h:"if(lt(sar,1),ih/sar,ih)"}},{filter:"setsar",options:"1"}])},r.withSize=r.setSize=r.size=function(i){var s=e(this._currentOutput,"size",i);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(s),this},r.withAspect=r.withAspectRatio=r.setAspect=r.setAspectRatio=r.aspect=r.aspectRatio=function(i){var s=Number(i);if(isNaN(s)){var n=i.match(/^(\d+):(\d+)$/);if(n)s=Number(n[1])/Number(n[2]);else throw new Error("Invalid aspect ratio: "+i)}var o=e(this._currentOutput,"aspect",s);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(o),this},r.applyAutopadding=r.applyAutoPadding=r.applyAutopad=r.applyAutoPad=r.withAutopadding=r.withAutoPadding=r.withAutopad=r.withAutoPad=r.autoPad=r.autopad=function(i,s){typeof i=="string"&&(s=i,i=!0),typeof i>"u"&&(i=!0);var n=e(this._currentOutput,"pad",i?s||"black":!1);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(n),this}},Hn}var Gn,Rs;function bf(){if(Rs)return Gn;Rs=1;var t=Ve;return Gn=function(e){e.addOutput=e.output=function(r,i){var s=!1;if(!r&&this._currentOutput)throw new Error("Invalid output");if(r&&typeof r!="string"){if(!("writable"in r)||!r.writable)throw new Error("Invalid output")}else if(typeof r=="string"){var n=r.match(/^([a-z]{2,}):/i);s=!n||n[0]==="file"}if(r&&!("target"in this._currentOutput))this._currentOutput.target=r,this._currentOutput.isFile=s,this._currentOutput.pipeopts=i||{};else{if(r&&typeof r!="string"){var o=this._outputs.some(function(u){return typeof u.target!="string"});if(o)throw new Error("Only one output stream is supported")}this._outputs.push(this._currentOutput={target:r,isFile:s,flags:{},pipeopts:i||{}});var a=this;["audio","audioFilters","video","videoFilters","sizeFilters","options"].forEach(function(u){a._currentOutput[u]=t.args()}),r||delete this._currentOutput.target}return this},e.seekOutput=e.seek=function(r){return this._currentOutput.options("-ss",r),this},e.withDuration=e.setDuration=e.duration=function(r){return this._currentOutput.options("-t",r),this},e.toFormat=e.withOutputFormat=e.outputFormat=e.format=function(r){return this._currentOutput.options("-f",r),this},e.map=function(r){return this._currentOutput.options("-map",r.replace(t.streamRegexp,"[$1]")),this},e.updateFlvMetadata=e.flvmeta=function(){return this._currentOutput.flags.flvmeta=!0,this}},Gn}var Kn,$s;function Sf(){if($s)return Kn;$s=1;var t=Ve;return Kn=function(e){e.addInputOption=e.addInputOptions=e.withInputOption=e.withInputOptions=e.inputOption=e.inputOptions=function(r){if(!this._currentInput)throw new Error("No input specified");var i=!0;return arguments.length>1&&(r=[].slice.call(arguments),i=!1),Array.isArray(r)||(r=[r]),this._currentInput.options(r.reduce(function(s,n){var o=String(n).split(" ");return i&&o.length===2?s.push(o[0],o[1]):s.push(n),s},[])),this},e.addOutputOption=e.addOutputOptions=e.addOption=e.addOptions=e.withOutputOption=e.withOutputOptions=e.withOption=e.withOptions=e.outputOption=e.outputOptions=function(r){var i=!0;return arguments.length>1&&(r=[].slice.call(arguments),i=!1),Array.isArray(r)||(r=[r]),this._currentOutput.options(r.reduce(function(s,n){var o=String(n).split(" ");return i&&o.length===2?s.push(o[0],o[1]):s.push(n),s},[])),this},e.filterGraph=e.complexFilter=function(r,i){if(this._complexFilters.clear(),Array.isArray(r)||(r=[r]),this._complexFilters("-filter_complex",t.makeFilterStrings(r).join(";")),Array.isArray(i)){var s=this;i.forEach(function(n){s._complexFilters("-map",n.replace(t.streamRegexp,"[$1]"))})}else typeof i=="string"&&this._complexFilters("-map",i.replace(t.streamRegexp,"[$1]"));return this}},Kn}function Of(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Yn,ks;function Tf(){if(ks)return Yn;ks=1;var t=J;return Yn=function(e){e.usingPreset=e.preset=function(r){if(typeof r=="function")r(this);else try{var i=t.join(this.options.presets,r),s=Of(i);if(typeof s.load=="function")s.load(this);else throw new Error("preset "+i+" has no load() function")}catch(n){throw new Error("preset "+i+" could not be loaded: "+n.message)}return this}},Yn}var Jn={exports:{}},js;function Mi(){return js||(js=1,function(t){(function(){var e={},r,i;r=this,r!=null&&(i=r.async),e.noConflict=function(){return r.async=i,e};function s(E){var D=!1;return function(){if(D)throw new Error("Callback was already called.");D=!0,E.apply(r,arguments)}}var n=function(E,D){if(E.forEach)return E.forEach(D);for(var T=0;T<E.length;T+=1)D(E[T],T,E)},o=function(E,D){if(E.map)return E.map(D);var T=[];return n(E,function(p,S,A){T.push(D(p,S,A))}),T},a=function(E,D,T){return E.reduce?E.reduce(D,T):(n(E,function(p,S,A){T=D(T,p,S,A)}),T)},u=function(E){if(Object.keys)return Object.keys(E);var D=[];for(var T in E)E.hasOwnProperty(T)&&D.push(T);return D};typeof process>"u"||!process.nextTick?typeof setImmediate=="function"?(e.nextTick=function(E){setImmediate(E)},e.setImmediate=e.nextTick):(e.nextTick=function(E){setTimeout(E,0)},e.setImmediate=e.nextTick):(e.nextTick=process.nextTick,typeof setImmediate<"u"?e.setImmediate=function(E){setImmediate(E)}:e.setImmediate=e.nextTick),e.each=function(E,D,T){if(T=T||function(){},!E.length)return T();var p=0;n(E,function(S){D(S,s(function(A){A?(T(A),T=function(){}):(p+=1,p>=E.length&&T(null))}))})},e.forEach=e.each,e.eachSeries=function(E,D,T){if(T=T||function(){},!E.length)return T();var p=0,S=function(){D(E[p],function(A){A?(T(A),T=function(){}):(p+=1,p>=E.length?T(null):S())})};S()},e.forEachSeries=e.eachSeries,e.eachLimit=function(E,D,T,p){var S=f(D);S.apply(null,[E,T,p])},e.forEachLimit=e.eachLimit;var f=function(E){return function(D,T,p){if(p=p||function(){},!D.length||E<=0)return p();var S=0,A=0,L=0;(function U(){if(S>=D.length)return p();for(;L<E&&A<D.length;)A+=1,L+=1,T(D[A-1],function(z){z?(p(z),p=function(){}):(S+=1,L-=1,S>=D.length?p():U())})})()}},c=function(E){return function(){var D=Array.prototype.slice.call(arguments);return E.apply(null,[e.each].concat(D))}},h=function(E,D){return function(){var T=Array.prototype.slice.call(arguments);return D.apply(null,[f(E)].concat(T))}},l=function(E){return function(){var D=Array.prototype.slice.call(arguments);return E.apply(null,[e.eachSeries].concat(D))}},d=function(E,D,T,p){var S=[];D=o(D,function(A,L){return{index:L,value:A}}),E(D,function(A,L){T(A.value,function(U,z){S[A.index]=z,L(U)})},function(A){p(A,S)})};e.map=c(d),e.mapSeries=l(d),e.mapLimit=function(E,D,T,p){return g(D)(E,T,p)};var g=function(E){return h(E,d)};e.reduce=function(E,D,T,p){e.eachSeries(E,function(S,A){T(D,S,function(L,U){D=U,A(L)})},function(S){p(S,D)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(E,D,T,p){var S=o(E,function(A){return A}).reverse();e.reduce(S,D,T,p)},e.foldr=e.reduceRight;var w=function(E,D,T,p){var S=[];D=o(D,function(A,L){return{index:L,value:A}}),E(D,function(A,L){T(A.value,function(U){U&&S.push(A),L()})},function(A){p(o(S.sort(function(L,U){return L.index-U.index}),function(L){return L.value}))})};e.filter=c(w),e.filterSeries=l(w),e.select=e.filter,e.selectSeries=e.filterSeries;var O=function(E,D,T,p){var S=[];D=o(D,function(A,L){return{index:L,value:A}}),E(D,function(A,L){T(A.value,function(U){U||S.push(A),L()})},function(A){p(o(S.sort(function(L,U){return L.index-U.index}),function(L){return L.value}))})};e.reject=c(O),e.rejectSeries=l(O);var x=function(E,D,T,p){E(D,function(S,A){T(S,function(L){L?(p(S),p=function(){}):A()})},function(S){p()})};e.detect=c(x),e.detectSeries=l(x),e.some=function(E,D,T){e.each(E,function(p,S){D(p,function(A){A&&(T(!0),T=function(){}),S()})},function(p){T(!1)})},e.any=e.some,e.every=function(E,D,T){e.each(E,function(p,S){D(p,function(A){A||(T(!1),T=function(){}),S()})},function(p){T(!0)})},e.all=e.every,e.sortBy=function(E,D,T){e.map(E,function(p,S){D(p,function(A,L){A?S(A):S(null,{value:p,criteria:L})})},function(p,S){if(p)return T(p);var A=function(L,U){var z=L.criteria,H=U.criteria;return z<H?-1:z>H?1:0};T(null,o(S.sort(A),function(L){return L.value}))})},e.auto=function(E,D){D=D||function(){};var T=u(E);if(!T.length)return D(null);var p={},S=[],A=function(z){S.unshift(z)},L=function(z){for(var H=0;H<S.length;H+=1)if(S[H]===z){S.splice(H,1);return}},U=function(){n(S.slice(0),function(z){z()})};A(function(){u(p).length===T.length&&(D(null,p),D=function(){})}),n(T,function(z){var H=E[z]instanceof Function?[E[z]]:E[z],K=function(ge){var de=Array.prototype.slice.call(arguments,1);if(de.length<=1&&(de=de[0]),ge){var _e={};n(u(p),function(ze){_e[ze]=p[ze]}),_e[z]=de,D(ge,_e),D=function(){}}else p[z]=de,e.setImmediate(U)},G=H.slice(0,Math.abs(H.length-1))||[],se=function(){return a(G,function(ge,de){return ge&&p.hasOwnProperty(de)},!0)&&!p.hasOwnProperty(z)};if(se())H[H.length-1](K,p);else{var te=function(){se()&&(L(te),H[H.length-1](K,p))};A(te)}})},e.waterfall=function(E,D){if(D=D||function(){},E.constructor!==Array){var T=new Error("First argument to waterfall must be an array of functions");return D(T)}if(!E.length)return D();var p=function(S){return function(A){if(A)D.apply(null,arguments),D=function(){};else{var L=Array.prototype.slice.call(arguments,1),U=S.next();U?L.push(p(U)):L.push(D),e.setImmediate(function(){S.apply(null,L)})}}};p(e.iterator(E))()};var v=function(E,D,T){if(T=T||function(){},D.constructor===Array)E.map(D,function(S,A){S&&S(function(L){var U=Array.prototype.slice.call(arguments,1);U.length<=1&&(U=U[0]),A.call(null,L,U)})},T);else{var p={};E.each(u(D),function(S,A){D[S](function(L){var U=Array.prototype.slice.call(arguments,1);U.length<=1&&(U=U[0]),p[S]=U,A(L)})},function(S){T(S,p)})}};e.parallel=function(E,D){v({map:e.map,each:e.each},E,D)},e.parallelLimit=function(E,D,T){v({map:g(D),each:f(D)},E,T)},e.series=function(E,D){if(D=D||function(){},E.constructor===Array)e.mapSeries(E,function(p,S){p&&p(function(A){var L=Array.prototype.slice.call(arguments,1);L.length<=1&&(L=L[0]),S.call(null,A,L)})},D);else{var T={};e.eachSeries(u(E),function(p,S){E[p](function(A){var L=Array.prototype.slice.call(arguments,1);L.length<=1&&(L=L[0]),T[p]=L,S(A)})},function(p){D(p,T)})}},e.iterator=function(E){var D=function(T){var p=function(){return E.length&&E[T].apply(null,arguments),p.next()};return p.next=function(){return T<E.length-1?D(T+1):null},p};return D(0)},e.apply=function(E){var D=Array.prototype.slice.call(arguments,1);return function(){return E.apply(null,D.concat(Array.prototype.slice.call(arguments)))}};var y=function(E,D,T,p){var S=[];E(D,function(A,L){T(A,function(U,z){S=S.concat(z||[]),L(U)})},function(A){p(A,S)})};e.concat=c(y),e.concatSeries=l(y),e.whilst=function(E,D,T){E()?D(function(p){if(p)return T(p);e.whilst(E,D,T)}):T()},e.doWhilst=function(E,D,T){E(function(p){if(p)return T(p);D()?e.doWhilst(E,D,T):T()})},e.until=function(E,D,T){E()?T():D(function(p){if(p)return T(p);e.until(E,D,T)})},e.doUntil=function(E,D,T){E(function(p){if(p)return T(p);D()?T():e.doUntil(E,D,T)})},e.queue=function(E,D){D===void 0&&(D=1);function T(A,L,U,z){L.constructor!==Array&&(L=[L]),n(L,function(H){var K={data:H,callback:typeof z=="function"?z:null};U?A.tasks.unshift(K):A.tasks.push(K),A.saturated&&A.tasks.length===D&&A.saturated(),e.setImmediate(A.process)})}var p=0,S={tasks:[],concurrency:D,saturated:null,empty:null,drain:null,push:function(A,L){T(S,A,!1,L)},unshift:function(A,L){T(S,A,!0,L)},process:function(){if(p<S.concurrency&&S.tasks.length){var A=S.tasks.shift();S.empty&&S.tasks.length===0&&S.empty(),p+=1;var L=function(){p-=1,A.callback&&A.callback.apply(A,arguments),S.drain&&S.tasks.length+p===0&&S.drain(),S.process()},U=s(L);E(A.data,U)}},length:function(){return S.tasks.length},running:function(){return p}};return S},e.cargo=function(E,D){var T=!1,p=[],S={tasks:p,payload:D,saturated:null,empty:null,drain:null,push:function(A,L){A.constructor!==Array&&(A=[A]),n(A,function(U){p.push({data:U,callback:typeof L=="function"?L:null}),S.saturated&&p.length===D&&S.saturated()}),e.setImmediate(S.process)},process:function A(){if(!T){if(p.length===0){S.drain&&S.drain();return}var L=typeof D=="number"?p.splice(0,D):p.splice(0),U=o(L,function(z){return z.data});S.empty&&S.empty(),T=!0,E(U,function(){T=!1;var z=arguments;n(L,function(H){H.callback&&H.callback.apply(null,z)}),A()})}},length:function(){return p.length},running:function(){return T}};return S};var C=function(E){return function(D){var T=Array.prototype.slice.call(arguments,1);D.apply(null,T.concat([function(p){var S=Array.prototype.slice.call(arguments,1);typeof console<"u"&&(p?console.error&&console.error(p):console[E]&&n(S,function(A){console[E](A)}))}]))}};e.log=C("log"),e.dir=C("dir"),e.memoize=function(E,D){var T={},p={};D=D||function(A){return A};var S=function(){var A=Array.prototype.slice.call(arguments),L=A.pop(),U=D.apply(null,A);U in T?L.apply(null,T[U]):U in p?p[U].push(L):(p[U]=[L],E.apply(null,A.concat([function(){T[U]=arguments;var z=p[U];delete p[U];for(var H=0,K=z.length;H<K;H++)z[H].apply(null,arguments)}])))};return S.memo=T,S.unmemoized=E,S},e.unmemoize=function(E){return function(){return(E.unmemoized||E).apply(null,arguments)}},e.times=function(E,D,T){for(var p=[],S=0;S<E;S++)p.push(S);return e.map(p,D,T)},e.timesSeries=function(E,D,T){for(var p=[],S=0;S<E;S++)p.push(S);return e.mapSeries(p,D,T)},e.compose=function(){var E=Array.prototype.reverse.call(arguments);return function(){var D=this,T=Array.prototype.slice.call(arguments),p=T.pop();e.reduce(E,T,function(S,A,L){A.apply(D,S.concat([function(){var U=arguments[0],z=Array.prototype.slice.call(arguments,1);L(U,z)}]))},function(S,A){p.apply(D,[S].concat(A))})}};var _=function(E,D){var T=function(){var S=this,A=Array.prototype.slice.call(arguments),L=A.pop();return E(D,function(U,z){U.apply(S,A.concat([z]))},L)};if(arguments.length>2){var p=Array.prototype.slice.call(arguments,2);return T.apply(this,p)}else return T};e.applyEach=c(_),e.applyEachSeries=l(_),e.forever=function(E,D){function T(p){if(p){if(D)return D(p);throw p}E(T)}T()},t.exports?t.exports=e:r.async=e})()}(Jn)),Jn.exports}var Qn,qs;function Cf(){if(qs)return Qn;qs=1;var t=Ft.spawn,e=Mi(),r=Ve;function i(s){s._inputs[0].isStream||s.ffprobe(0,function(o,a){s._ffprobeData=a})}return Qn=function(s){s._spawnFfmpeg=function(n,o,a,u){typeof o=="function"&&(u=a,a=o,o={}),typeof u>"u"&&(u=a,a=function(){});var f="stdoutLines"in o?o.stdoutLines:this.options.stdoutLines;this._getFfmpegPath(function(c,h){if(c)return u(c);if(!h||h.length===0)return u(new Error("Cannot find ffmpeg"));o.niceness&&o.niceness!==0&&!r.isWindows&&(n.unshift("-n",o.niceness,h),h="nice");var l=r.linesRing(f),d=!1,g=r.linesRing(f),w=!1,O=t(h,n,o);O.stderr&&O.stderr.setEncoding("utf8"),O.on("error",function(C){u(C)});var x=null;function v(C){C&&(x=C),y&&(d||!o.captureStdout)&&w&&u(x,l,g)}var y=!1;O.on("exit",function(C,_){y=!0,_?v(new Error("ffmpeg was killed with signal "+_)):C?v(new Error("ffmpeg exited with code "+C)):v()}),o.captureStdout&&(O.stdout.on("data",function(C){l.append(C)}),O.stdout.on("close",function(){l.close(),d=!0,v()})),O.stderr.on("data",function(C){g.append(C)}),O.stderr.on("close",function(){g.close(),w=!0,v()}),a(O,l,g)})},s._getArguments=function(){var n=this._complexFilters.get(),o=this._outputs.some(function(a){return a.isFile});return[].concat(this._inputs.reduce(function(a,u){var f=typeof u.source=="string"?u.source:"pipe:0";return a.concat(u.options.get(),["-i",f])},[]),this._global.get(),o?["-y"]:[],n,this._outputs.reduce(function(a,u){var f=r.makeFilterStrings(u.sizeFilters.get()),c=u.audioFilters.get(),h=u.videoFilters.get().concat(f),l;return u.target?typeof u.target=="string"?l=[u.target]:l=["pipe:1"]:l=[],a.concat(u.audio.get(),c.length?["-filter:a",c.join(",")]:[],u.video.get(),h.length?["-filter:v",h.join(",")]:[],u.options.get(),l)},[]))},s._prepare=function(n,o){var a=this;e.waterfall([function(u){a._checkCapabilities(u)},function(u){if(!o)return u();a.ffprobe(0,function(f,c){f||(a._ffprobeData=c),u()})},function(u){var f=a._outputs.some(function(c){return c.flags.flvmeta&&!c.isFile&&(a.logger.warn("Updating flv metadata is only supported for files"),c.flags.flvmeta=!1),c.flags.flvmeta});f?a._getFlvtoolPath(function(c){u(c)}):u()},function(u){var f;try{f=a._getArguments()}catch(c){return u(c)}u(null,f)},function(u,f){a.availableEncoders(function(c,h){for(var l=0;l<u.length;l++)(u[l]==="-acodec"||u[l]==="-vcodec")&&(l++,u[l]in h&&h[u[l]].experimental&&(u.splice(l+1,0,"-strict","experimental"),l+=2));f(null,u)})}],n),o||(this.listeners("progress").length>0?i(this):this.once("newListener",function(u){u==="progress"&&i(this)}))},s.exec=s.execute=s.run=function(){var n=this,o=this._outputs.some(function(h){return"target"in h});if(!o)throw new Error("No output specified");var a=this._outputs.filter(function(h){return typeof h.target!="string"})[0],u=this._inputs.filter(function(h){return typeof h.source!="string"})[0],f=!1;function c(h,l,d){f||(f=!0,h?n.emit("error",h,l,d):n.emit("end",l,d))}return n._prepare(function(h,l){if(h)return c(h);n._spawnFfmpeg(l,{captureStdout:!a,niceness:n.options.niceness,cwd:n.options.cwd,windowsHide:!0},function(g,w,O){if(n.ffmpegProc=g,n.emit("start","ffmpeg "+l.join(" ")),u&&(u.source.on("error",function(y){var C=new Error("Input stream error: "+y.message);C.inputStreamError=y,c(C),g.kill()}),u.source.resume(),u.source.pipe(g.stdin),g.stdin.on("error",function(){})),n.options.timeout&&(n.processTimer=setTimeout(function(){var y="process ran into a timeout ("+n.options.timeout+"s)";c(new Error(y),w.get(),O.get()),g.kill()},n.options.timeout*1e3)),a&&(g.stdout.pipe(a.target,a.pipeopts),a.target.on("close",function(){n.logger.debug("Output stream closed, scheduling kill for ffmpeg process"),setTimeout(function(){c(new Error("Output stream closed")),g.kill()},20)}),a.target.on("error",function(y){n.logger.debug("Output stream error, killing ffmpeg process");var C=new Error("Output stream error: "+y.message);C.outputStreamError=y,c(C,w.get(),O.get()),g.kill("SIGKILL")})),O){if(n.listeners("stderr").length&&O.callback(function(y){n.emit("stderr",y)}),n.listeners("codecData").length){var x=!1,v={};O.callback(function(y){x||(x=r.extractCodecData(n,y,v))})}n.listeners("progress").length&&O.callback(function(y){r.extractProgress(n,y)})}},function(g,w,O){if(clearTimeout(n.processTimer),delete n.ffmpegProc,g)g.message.match(/ffmpeg exited with code/)&&(g.message+=": "+r.extractError(O.get())),c(g,w.get(),O.get());else{var x=n._outputs.filter(function(v){return v.flags.flvmeta});x.length?n._getFlvtoolPath(function(v,y){if(v)return c(v);e.each(x,function(C,_){t(y,["-U",C.target],{windowsHide:!0}).on("error",function(E){_(new Error("Error running "+y+" on "+C.target+": "+E.message))}).on("exit",function(E,D){E!==0||D?_(new Error(y+" "+(D?"received signal "+D:"exited with code "+E))+" when running on "+C.target):_()})},function(C){C?c(C):c(null,w.get(),O.get())})}):c(null,w.get(),O.get())}})}),this},s.renice=function(n){if(!r.isWindows&&(n=n||0,(n<-20||n>20)&&this.logger.warn("Invalid niceness value: "+n+", must be between -20 and 20"),n=Math.min(20,Math.max(-20,n)),this.options.niceness=n,this.ffmpegProc)){var o=this.logger,a=this.ffmpegProc.pid,u=t("renice",[n,"-p",a],{windowsHide:!0});u.on("error",function(f){o.warn("could not renice process "+a+": "+f.message)}),u.on("exit",function(f,c){c?o.warn("could not renice process "+a+": renice was killed by signal "+c):f?o.warn("could not renice process "+a+": renice exited with "+f):o.info("successfully reniced process "+a+" to "+n+" niceness")})}return this},s.kill=function(n){return this.ffmpegProc?this.ffmpegProc.kill(n||"SIGKILL"):this.logger.warn("No running ffmpeg process, cannot send signal"),this}},Qn}var Zn,Bs;function Df(){if(Bs)return Zn;Bs=1;var t=ce,e=J,r=Mi(),i=Ve,s=/^\s*([D ])([E ])([VAS])([S ])([D ])([T ]) ([^ ]+) +(.*)$/,n=/^\s*([D\.])([E\.])([VAS])([I\.])([L\.])([S\.]) ([^ ]+) +(.*)$/,o=/\(encoders:([^\)]+)\)/,a=/\(decoders:([^\)]+)\)/,u=/^\s*([VAS\.])([F\.])([S\.])([X\.])([B\.])([D\.]) ([^ ]+) +(.*)$/,f=/^\s*([D ])([E ])\s+([^ ]+)\s+(.*)$/,c=/\r\n|\r|\n/,h=/^(?: [T\.][S\.][C\.] )?([^ ]+) +(AA?|VV?|\|)->(AA?|VV?|\|) +(.*)$/,l={};return Zn=function(d){d.setFfmpegPath=function(g){return l.ffmpegPath=g,this},d.setFfprobePath=function(g){return l.ffprobePath=g,this},d.setFlvtoolPath=function(g){return l.flvtoolPath=g,this},d._forgetPaths=function(){delete l.ffmpegPath,delete l.ffprobePath,delete l.flvtoolPath},d._getFfmpegPath=function(g){if("ffmpegPath"in l)return g(null,l.ffmpegPath);r.waterfall([function(w){process.env.FFMPEG_PATH?t.exists(process.env.FFMPEG_PATH,function(O){O?w(null,process.env.FFMPEG_PATH):w(null,"")}):w(null,"")},function(w,O){if(w.length)return O(null,w);i.which("ffmpeg",function(x,v){O(x,v)})}],function(w,O){w?g(w):g(null,l.ffmpegPath=O||"")})},d._getFfprobePath=function(g){var w=this;if("ffprobePath"in l)return g(null,l.ffprobePath);r.waterfall([function(O){process.env.FFPROBE_PATH?t.exists(process.env.FFPROBE_PATH,function(x){O(null,x?process.env.FFPROBE_PATH:"")}):O(null,"")},function(O,x){if(O.length)return x(null,O);i.which("ffprobe",function(v,y){x(v,y)})},function(O,x){if(O.length)return x(null,O);w._getFfmpegPath(function(v,y){if(v)x(v);else if(y.length){var C=i.isWindows?"ffprobe.exe":"ffprobe",_=e.join(e.dirname(y),C);t.exists(_,function(E){x(null,E?_:"")})}else x(null,"")})}],function(O,x){O?g(O):g(null,l.ffprobePath=x||"")})},d._getFlvtoolPath=function(g){if("flvtoolPath"in l)return g(null,l.flvtoolPath);r.waterfall([function(w){process.env.FLVMETA_PATH?t.exists(process.env.FLVMETA_PATH,function(O){w(null,O?process.env.FLVMETA_PATH:"")}):w(null,"")},function(w,O){if(w.length)return O(null,w);process.env.FLVTOOL2_PATH?t.exists(process.env.FLVTOOL2_PATH,function(x){O(null,x?process.env.FLVTOOL2_PATH:"")}):O(null,"")},function(w,O){if(w.length)return O(null,w);i.which("flvmeta",function(x,v){O(x,v)})},function(w,O){if(w.length)return O(null,w);i.which("flvtool2",function(x,v){O(x,v)})}],function(w,O){w?g(w):g(null,l.flvtoolPath=O||"")})},d.availableFilters=d.getAvailableFilters=function(g){if("filters"in l)return g(null,l.filters);this._spawnFfmpeg(["-filters"],{captureStdout:!0,stdoutLines:0},function(w,O){if(w)return g(w);var x=O.get(),v=x.split(`
`),y={},C={A:"audio",V:"video","|":"none"};v.forEach(function(_){var E=_.match(h);E&&(y[E[1]]={description:E[4],input:C[E[2].charAt(0)],multipleInputs:E[2].length>1,output:C[E[3].charAt(0)],multipleOutputs:E[3].length>1})}),g(null,l.filters=y)})},d.availableCodecs=d.getAvailableCodecs=function(g){if("codecs"in l)return g(null,l.codecs);this._spawnFfmpeg(["-codecs"],{captureStdout:!0,stdoutLines:0},function(w,O){if(w)return g(w);var x=O.get(),v=x.split(c),y={};v.forEach(function(C){var _=C.match(s);if(_&&_[7]!=="="&&(y[_[7]]={type:{V:"video",A:"audio",S:"subtitle"}[_[3]],description:_[8],canDecode:_[1]==="D",canEncode:_[2]==="E",drawHorizBand:_[4]==="S",directRendering:_[5]==="D",weirdFrameTruncation:_[6]==="T"}),_=C.match(n),_&&_[7]!=="="){var E=y[_[7]]={type:{V:"video",A:"audio",S:"subtitle"}[_[3]],description:_[8],canDecode:_[1]==="D",canEncode:_[2]==="E",intraFrameOnly:_[4]==="I",isLossy:_[5]==="L",isLossless:_[6]==="S"},D=E.description.match(o);D=D?D[1].trim().split(" "):[];var T=E.description.match(a);if(T=T?T[1].trim().split(" "):[],D.length||T.length){var p={};i.copy(E,p),delete p.canEncode,delete p.canDecode,D.forEach(function(S){y[S]={},i.copy(p,y[S]),y[S].canEncode=!0}),T.forEach(function(S){S in y||(y[S]={},i.copy(p,y[S])),y[S].canDecode=!0})}}}),g(null,l.codecs=y)})},d.availableEncoders=d.getAvailableEncoders=function(g){if("encoders"in l)return g(null,l.encoders);this._spawnFfmpeg(["-encoders"],{captureStdout:!0,stdoutLines:0},function(w,O){if(w)return g(w);var x=O.get(),v=x.split(c),y={};v.forEach(function(C){var _=C.match(u);_&&_[7]!=="="&&(y[_[7]]={type:{V:"video",A:"audio",S:"subtitle"}[_[1]],description:_[8],frameMT:_[2]==="F",sliceMT:_[3]==="S",experimental:_[4]==="X",drawHorizBand:_[5]==="B",directRendering:_[6]==="D"})}),g(null,l.encoders=y)})},d.availableFormats=d.getAvailableFormats=function(g){if("formats"in l)return g(null,l.formats);this._spawnFfmpeg(["-formats"],{captureStdout:!0,stdoutLines:0},function(w,O){if(w)return g(w);var x=O.get(),v=x.split(c),y={};v.forEach(function(C){var _=C.match(f);_&&_[3].split(",").forEach(function(E){E in y||(y[E]={description:_[4],canDemux:!1,canMux:!1}),_[1]==="D"&&(y[E].canDemux=!0),_[2]==="E"&&(y[E].canMux=!0)})}),g(null,l.formats=y)})},d._checkCapabilities=function(g){var w=this;r.waterfall([function(O){w.availableFormats(O)},function(O,x){var v;if(v=w._outputs.reduce(function(y,C){var _=C.options.find("-f",1);return _&&(!(_[0]in O)||!O[_[0]].canMux)&&y.push(_),y},[]),v.length===1)return x(new Error("Output format "+v[0]+" is not available"));if(v.length>1)return x(new Error("Output formats "+v.join(", ")+" are not available"));if(v=w._inputs.reduce(function(y,C){var _=C.options.find("-f",1);return _&&(!(_[0]in O)||!O[_[0]].canDemux)&&y.push(_[0]),y},[]),v.length===1)return x(new Error("Input format "+v[0]+" is not available"));if(v.length>1)return x(new Error("Input formats "+v.join(", ")+" are not available"));x()},function(O){w.availableEncoders(O)},function(O,x){var v;if(v=w._outputs.reduce(function(y,C){var _=C.audio.find("-acodec",1);return _&&_[0]!=="copy"&&(!(_[0]in O)||O[_[0]].type!=="audio")&&y.push(_[0]),y},[]),v.length===1)return x(new Error("Audio codec "+v[0]+" is not available"));if(v.length>1)return x(new Error("Audio codecs "+v.join(", ")+" are not available"));if(v=w._outputs.reduce(function(y,C){var _=C.video.find("-vcodec",1);return _&&_[0]!=="copy"&&(!(_[0]in O)||O[_[0]].type!=="video")&&y.push(_[0]),y},[]),v.length===1)return x(new Error("Video codec "+v[0]+" is not available"));if(v.length>1)return x(new Error("Video codecs "+v.join(", ")+" are not available"));x()}],g)}},Zn}var ei,Us;function _f(){if(Us)return ei;Us=1;var t=Ft.spawn;function e(s){return s.match(/^TAG:/)}function r(s){return s.match(/^DISPOSITION:/)}function i(s){var n=s.split(/\r\n|\r|\n/);n=n.filter(function(h){return h.length>0});var o={streams:[],format:{},chapters:[]};function a(h){for(var l={},d=n.shift();typeof d<"u";){if(d.toLowerCase()=="[/"+h+"]")return l;if(d.match(/^\[/)){d=n.shift();continue}var g=d.match(/^([^=]+)=(.*)$/);g&&(!g[1].match(/^TAG:/)&&g[2].match(/^[0-9]+(\.[0-9]+)?$/)?l[g[1]]=Number(g[2]):l[g[1]]=g[2]),d=n.shift()}return l}for(var u=n.shift();typeof u<"u";){if(u.match(/^\[stream/i)){var f=a("stream");o.streams.push(f)}else if(u.match(/^\[chapter/i)){var c=a("chapter");o.chapters.push(c)}else u.toLowerCase()==="[format]"&&(o.format=a("format"));u=n.shift()}return o}return ei=function(s){s.ffprobe=function(){var n,o=null,a=[],u,u=arguments[arguments.length-1],f=!1;function c(h,l){f||(f=!0,u(h,l))}switch(arguments.length){case 3:o=arguments[0],a=arguments[1];break;case 2:typeof arguments[0]=="number"?o=arguments[0]:Array.isArray(arguments[0])&&(a=arguments[0]);break}if(o===null){if(!this._currentInput)return c(new Error("No input specified"));n=this._currentInput}else if(n=this._inputs[o],!n)return c(new Error("Invalid input index"));this._getFfprobePath(function(h,l){if(h)return c(h);if(!l)return c(new Error("Cannot find ffprobe"));var d="",g=!1,w="",O=!1,x=n.isStream?"pipe:0":n.source,v=t(l,["-show_streams","-show_format"].concat(a,x),{windowsHide:!0});n.isStream&&(v.stdin.on("error",function(E){["ECONNRESET","EPIPE","EOF"].indexOf(E.code)>=0||c(E)}),v.stdin.on("close",function(){n.source.pause(),n.source.unpipe(v.stdin)}),n.source.pipe(v.stdin)),v.on("error",u);var y=null;function C(E){if(E&&(y=E),_&&g&&O){if(y)return w&&(y.message+=`
`+w),c(y);var D=i(d);[D.format].concat(D.streams).forEach(function(T){if(T){var p=Object.keys(T).filter(e);p.length&&(T.tags=T.tags||{},p.forEach(function(A){T.tags[A.substr(4)]=T[A],delete T[A]}));var S=Object.keys(T).filter(r);S.length&&(T.disposition=T.disposition||{},S.forEach(function(A){T.disposition[A.substr(12)]=T[A],delete T[A]}))}}),c(null,D)}}var _=!1;v.on("exit",function(E,D){_=!0,E?C(new Error("ffprobe exited with code "+E)):D?C(new Error("ffprobe was killed with signal "+D)):C()}),v.stdout.on("data",function(E){d+=E}),v.stdout.on("close",function(){g=!0,C()}),v.stderr.on("data",function(E){w+=E}),v.stderr.on("close",function(){O=!0,C()})})}},ei}var ti,Xs;function Af(){if(Xs)return ti;Xs=1;var t=ce,e=J,r=ua.PassThrough,i=Mi(),s=Ve;return ti=function(o){o.saveToFile=o.save=function(a){return this.output(a).run(),this},o.writeToStream=o.pipe=o.stream=function(a,u){if(a&&!("writable"in a)&&(u=a,a=void 0),!a){if(process.version.match(/v0\.8\./))throw new Error("PassThrough stream is not supported on node v0.8");a=new r}return this.output(a,u).run(),a},o.takeScreenshots=o.thumbnail=o.thumbnails=o.screenshot=o.screenshots=function(a,u){var f=this,c=this._currentInput.source;if(a=a||{count:1},typeof a=="number"&&(a={count:a}),"folder"in a||(a.folder=u||"."),"timestamps"in a&&(a.timemarks=a.timestamps),!("timemarks"in a)){if(!a.count)throw new Error("Cannot take screenshots: neither a count nor a timemark list are specified");var h=100/(1+a.count);a.timemarks=[];for(var l=0;l<a.count;l++)a.timemarks.push(h*(l+1)+"%")}if("size"in a){var d=a.size.match(/^(\d+)x(\d+)$/),g=a.size.match(/^(\d+)x\?$/),w=a.size.match(/^\?x(\d+)$/),O=a.size.match(/^(\d+)%$/);if(!d&&!g&&!w&&!O)throw new Error("Invalid size parameter: "+a.size)}var x;function v(y){x?y(null,x):f.ffprobe(function(C,_){x=_,y(C,_)})}return i.waterfall([function(C){if(a.timemarks.some(function(_){return(""+_).match(/^[\d.]+%$/)})){if(typeof c!="string")return C(new Error("Cannot compute screenshot timemarks with an input stream, please specify fixed timemarks"));v(function(_,E){if(_)C(_);else{var D=E.streams.reduce(function(p,S){return S.codec_type==="video"&&S.width*S.height>p.width*p.height?S:p},{width:0,height:0});if(D.width===0)return C(new Error("No video stream in input, cannot take screenshots"));var T=Number(D.duration);if(isNaN(T)&&(T=Number(E.format.duration)),isNaN(T))return C(new Error("Could not get input duration, please specify fixed timemarks"));a.timemarks=a.timemarks.map(function(p){return(""+p).match(/^([\d.]+)%$/)?T*parseFloat(p)/100:p}),C()}})}else C()},function(C){a.timemarks=a.timemarks.map(function(_){return s.timemarkToSeconds(_)}).sort(function(_,E){return _-E}),C()},function(C){var _=a.filename||"tn.png";if(_.indexOf(".")===-1&&(_+=".png"),a.timemarks.length>1&&!_.match(/%(s|0*i)/)){var E=e.extname(_);_=e.join(e.dirname(_),e.basename(_,E)+"_%i"+E)}C(null,_)},function(C,_){if(C.match(/%[bf]/)){if(typeof c!="string")return _(new Error("Cannot replace %f or %b when using an input stream"));C=C.replace(/%f/g,e.basename(c)).replace(/%b/g,e.basename(c,e.extname(c)))}_(null,C)},function(C,_){if(C.match(/%[whr]/)){if(d)return _(null,C,d[1],d[2]);v(function(E,D){if(E)return _(new Error("Could not determine video resolution to replace %w, %h or %r"));var T=D.streams.reduce(function(A,L){return L.codec_type==="video"&&L.width*L.height>A.width*A.height?L:A},{width:0,height:0});if(T.width===0)return _(new Error("No video stream in input, cannot replace %w, %h or %r"));var p=T.width,S=T.height;g?(S=S*Number(g[1])/p,p=Number(g[1])):w?(p=p*Number(w[1])/S,S=Number(w[1])):O&&(p=p*Number(O[1])/100,S=S*Number(O[1])/100),_(null,C,Math.round(p/2)*2,Math.round(S/2)*2)})}else _(null,C,-1,-1)},function(C,_,E,D){C=C.replace(/%r/g,"%wx%h").replace(/%w/g,_).replace(/%h/g,E),D(null,C)},function(C,_){var E=a.timemarks.map(function(D,T){return C.replace(/%s/g,s.timemarkToSeconds(D)).replace(/%(0*)i/g,function(p,S){var A=""+(T+1);return S.substr(0,Math.max(0,S.length+1-A.length))+A})});f.emit("filenames",E),_(null,E)},function(C,_){t.exists(a.folder,function(E){E?_(null,C):t.mkdir(a.folder,function(D){D?_(D):_(null,C)})})}],function(C,_){if(C)return f.emit("error",C);var E=a.timemarks.length,D,T=[D={filter:"split",options:E,outputs:[]}];if("size"in a){f.size(a.size);var p=f._currentOutput.sizeFilters.get().map(function(U,z){return z>0&&(U.inputs="size"+(z-1)),U.outputs="size"+z,U});D.inputs="size"+(p.length-1),T=p.concat(T),f._currentOutput.sizeFilters.clear()}for(var S=0,A=0;A<E;A++){var L="screen"+A;D.outputs.push(L),A===0&&(S=a.timemarks[A],f.seekInput(S)),f.output(e.join(a.folder,_[A])).frames(1).map(L),A>0&&f.seek(a.timemarks[A]-S)}f.complexFilter(T),f.run()}),this},o.mergeToFile=o.concatenate=o.concat=function(a,u){var f=this._inputs.filter(function(h){return!h.isStream})[0],c=this;return this.ffprobe(this._inputs.indexOf(f),function(h,l){if(h)return c.emit("error",h);var d=l.streams.some(function(w){return w.codec_type==="audio"}),g=l.streams.some(function(w){return w.codec_type==="video"});c.output(a,u).complexFilter({filter:"concat",options:{n:c._inputs.length,v:g?1:0,a:d?1:0}}).run()}),this}},ti}var Ff=J,Nf=ht,Ya=nt.EventEmitter,hi=Ve;function ne(t,e){if(!(this instanceof ne))return new ne(t,e);Ya.call(this),typeof t=="object"&&!("readable"in t)?e=t:(e=e||{},e.source=t),this._inputs=[],e.source&&this.input(e.source),this._outputs=[],this.output();var r=this;["_global","_complexFilters"].forEach(function(i){r[i]=hi.args()}),e.stdoutLines="stdoutLines"in e?e.stdoutLines:100,e.presets=e.presets||e.preset||Ff.join(__dirname,"presets"),e.niceness=e.niceness||e.priority||0,this.options=e,this.logger=e.logger||{debug:function(){},info:function(){},warn:function(){},error:function(){}}}Nf.inherits(ne,Ya);var xf=ne;ne.prototype.clone=function(){var t=new ne,e=this;return t.options=this.options,t.logger=this.logger,t._inputs=this._inputs.map(function(r){return{source:r.source,options:r.options.clone()}}),"target"in this._outputs[0]?(t._outputs=[],t.output()):(t._outputs=[t._currentOutput={flags:{}}],["audio","audioFilters","video","videoFilters","sizeFilters","options"].forEach(function(r){t._currentOutput[r]=e._currentOutput[r].clone()}),this._currentOutput.sizeData&&(t._currentOutput.sizeData={},hi.copy(this._currentOutput.sizeData,t._currentOutput.sizeData)),hi.copy(this._currentOutput.flags,t._currentOutput.flags)),["_global","_complexFilters"].forEach(function(r){t[r]=e[r].clone()}),t};gf()(ne.prototype);vf()(ne.prototype);wf()(ne.prototype);Ef()(ne.prototype);bf()(ne.prototype);Sf()(ne.prototype);Tf()(ne.prototype);Cf()(ne.prototype);Df()(ne.prototype);ne.setFfmpegPath=function(t){new ne().setFfmpegPath(t)};ne.setFfprobePath=function(t){new ne().setFfprobePath(t)};ne.setFlvtoolPath=function(t){new ne().setFlvtoolPath(t)};ne.availableFilters=ne.getAvailableFilters=function(t){new ne().availableFilters(t)};ne.availableCodecs=ne.getAvailableCodecs=function(t){new ne().availableCodecs(t)};ne.availableFormats=ne.getAvailableFormats=function(t){new ne().availableFormats(t)};ne.availableEncoders=ne.getAvailableEncoders=function(t){new ne().availableEncoders(t)};_f()(ne.prototype);ne.ffprobe=function(t){var e=new ne(t);e.ffprobe.apply(e,Array.prototype.slice.call(arguments,1))};Af()(ne.prototype);var Zt=xf;const Ja=Nt(Zt);function If(){try{let t,e;if(re.app.isPackaged){const r=J.join(process.resourcesPath,"bin");if(!ce.existsSync(r))throw new Error(`FFmpeg目录不存在: ${r}`);const i=process.platform==="win32"?".exe":"";if(t=J.join(r,`ffmpeg${i}`),e=J.join(r,`ffprobe${i}`),!ce.existsSync(t))throw new Error(`FFmpeg可执行文件不存在: ${t}`);if(!ce.existsSync(e))throw new Error(`FFprobe可执行文件不存在: ${e}`)}else{const r=require("@ffmpeg-installer/ffmpeg"),i=require("@ffprobe-installer/ffprobe");t=r.path,e=i.path}return console.log("FFmpeg路径:",t),console.log("FFprobe路径:",e),Zt.setFfmpegPath(t),Zt.setFfprobePath(e),{ffmpegPath:t,ffprobePath:e}}catch(t){throw console.error("FFmpeg初始化失败:",t),new Error(`视频处理引擎初始化失败: ${t.message}`)}}function Tt(t){return new Promise((e,r)=>{Zt.ffprobe(t,(i,s)=>{if(i)return r(i);e(s.format.duration||0)})})}async function Pf(t){try{const e=ht.promisify(Ft.exec),{stdout:r}=await e(`ffprobe -v error -show_streams -select_streams a "${t}"`);return r.includes("codec_type=audio")}catch(e){return console.error(`hasAudio error: ${e}`),!1}}function Lf(t,e){let r="";e.forEach((i,s)=>{const n=Vs(i.start),o=Vs(i.start+i.duration);r+=`${s+1}
${n} --> ${o}
${i.text}

`}),ce.writeFileSync(t,r)}function Vs(t){const e=new Date(0);return e.setSeconds(t),e.toISOString().slice(11,23).replace(".",",")}async function Mf(t){const r={"Microsoft YaHei":"msyh.ttc",微软雅黑:"msyh.ttc",SimHei:"simhei.ttf",黑体:"simhei.ttf",SimSun:"simsun.ttc",宋体:"simsun.ttc",SimKai:"simkai.ttf",楷体:"simkai.ttf",仿宋:"simfang.ttf",FangSong:"simfang.ttf",Arial:"arial.ttf"}[t]||"arial.ttf";if(re.app.isPackaged)return J.join(process.resourcesPath,"fonts",r);{const i=J.join(__dirname,"../../fonts",r);if(ce.existsSync(i))return i;{const s={win32:"C:/Windows/Fonts/",darwin:"/System/Library/Fonts/",linux:"/usr/share/fonts/"},n=process.platform;return J.join(s[n]||"",r)}}}const ut="zhushou";function xt(){switch(process.platform){case"win32":return J.join(re.app.getPath("appData"),ut);case"darwin":return J.join(re.app.getPath("appData"),ut);case"linux":return J.join(re.app.getPath("appData"),ut);default:return J.join(re.app.getPath("documents"),ut)}}function Ri(){try{const t=xt();ce.existsSync(t)||(ce.mkdirSync(t),console.log("Created zhushou directory at:",t));try{ce.accessSync(t,ce.constants.W_OK)}catch{return console.error("No write permission for zhushou directory, falling back to documents"),J.join(re.app.getPath("documents"),ut)}return t}catch(t){return console.error("Failed to create zhushou directory:",t),J.join(re.app.getPath("documents"),ut)}}function Rf(){re.ipcMain.handle("get-default-save-path",()=>Ri())}function $f(){re.ipcMain.handle("text2voice",async(t,e)=>{try{const r=JSON.parse(oi(e));ae.log("accept params:"),ae.log(JSON.stringify(r));const i={text:r.text,voice:r.voice||"xiaoyun",format:r.format||"mp3",sample_rate:r.sample_rate||16e3,volume:r.volume||50,speech_rate:r.speech_rate||0,pitch_rate:r.pitch_rate||0},s=r.output_dir||xt(),n=r.output_file_name||`tts_${Date.now()}`,o=await sf();vr.existsSync(s)||vr.mkdirSync(s,{recursive:!0});const a=new Xc({url:Jt.ttsUrl,appkey:Jt.appkey,token:o}),u=J.join(s,`${n}.${i.format||"mp3"}`),f=vr.createWriteStream(u);return ae.log(u),new Promise((c,h)=>{a.on("meta",l=>{ae.info("接收到元信息:",l)}),a.on("data",l=>{try{f.write(l),ae.debug(`接收到数据块，大小: ${l.length} bytes`)}catch(d){ae.error("写入文件失败:",d),h(d)}}),a.on("completed",async()=>{f.end(),ae.info("语音合成完成");const l=await Tt(u);ae.info(`语音合成完成，时长: ${l}秒`),c({success:!0,outputFile:u,duration:l})}),a.on("closed",()=>{ae.info("连接已关闭")}),a.on("failed",l=>{f.end(),ae.error("语音合成失败:",l),h(l)}),a.start(i,!0,6e3)})}catch(r){throw ae.error("语音合成初始化失败:",r),r}})}const kf={...Le.webcrypto.subtle,generateKey:async(t,e,r)=>Le.webcrypto.subtle.generateKey(t,e,r)},jf={getRandomValues:t=>{if(!t)return t;switch(!0){case t instanceof Int8Array:return Le.webcrypto.getRandomValues(t);case t instanceof Uint8Array:return Le.webcrypto.getRandomValues(t);case t instanceof Uint8ClampedArray:return Le.webcrypto.getRandomValues(t);case t instanceof Int16Array:return Le.webcrypto.getRandomValues(t);case t instanceof Uint16Array:return Le.webcrypto.getRandomValues(t);case t instanceof Int32Array:return Le.webcrypto.getRandomValues(t);case t instanceof Uint32Array:return Le.webcrypto.getRandomValues(t);default:throw new Error("Unsupported ArrayBufferView type")}},randomUUID:()=>Le.webcrypto.randomUUID(),subtle:kf};var xe={},ye={};ye.fromCallback=function(t){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")t.apply(this,e);else return new Promise((r,i)=>{e.push((s,n)=>s!=null?i(s):r(n)),t.apply(this,e)})},"name",{value:t.name})};ye.fromPromise=function(t){return Object.defineProperty(function(...e){const r=e[e.length-1];if(typeof r!="function")return t.apply(this,e);e.pop(),t.apply(this,e).then(i=>r(null,i),r)},"name",{value:t.name})};var We=qu,qf=process.cwd,Yt=null,Bf=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Yt||(Yt=qf.call(process)),Yt};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var zs=process.chdir;process.chdir=function(t){Yt=null,zs.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,zs)}var Uf=Xf;function Xf(t){We.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=n(t.chown),t.fchown=n(t.fchown),t.lchown=n(t.lchown),t.chmod=i(t.chmod),t.fchmod=i(t.fchmod),t.lchmod=i(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=s(t.chmodSync),t.fchmodSync=s(t.fchmodSync),t.lchmodSync=s(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=u(t.statSync),t.fstatSync=u(t.fstatSync),t.lstatSync=u(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(c,h,l){l&&process.nextTick(l)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(c,h,l,d){d&&process.nextTick(d)},t.lchownSync=function(){}),Bf==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:function(c){function h(l,d,g){var w=Date.now(),O=0;c(l,d,function x(v){if(v&&(v.code==="EACCES"||v.code==="EPERM"||v.code==="EBUSY")&&Date.now()-w<6e4){setTimeout(function(){t.stat(d,function(y,C){y&&y.code==="ENOENT"?c(l,d,x):g(v)})},O),O<100&&(O+=10);return}g&&g(v)})}return Object.setPrototypeOf&&Object.setPrototypeOf(h,c),h}(t.rename)),t.read=typeof t.read!="function"?t.read:function(c){function h(l,d,g,w,O,x){var v;if(x&&typeof x=="function"){var y=0;v=function(C,_,E){if(C&&C.code==="EAGAIN"&&y<10)return y++,c.call(t,l,d,g,w,O,v);x.apply(this,arguments)}}return c.call(t,l,d,g,w,O,v)}return Object.setPrototypeOf&&Object.setPrototypeOf(h,c),h}(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:function(c){return function(h,l,d,g,w){for(var O=0;;)try{return c.call(t,h,l,d,g,w)}catch(x){if(x.code==="EAGAIN"&&O<10){O++;continue}throw x}}}(t.readSync);function e(c){c.lchmod=function(h,l,d){c.open(h,We.O_WRONLY|We.O_SYMLINK,l,function(g,w){if(g){d&&d(g);return}c.fchmod(w,l,function(O){c.close(w,function(x){d&&d(O||x)})})})},c.lchmodSync=function(h,l){var d=c.openSync(h,We.O_WRONLY|We.O_SYMLINK,l),g=!0,w;try{w=c.fchmodSync(d,l),g=!1}finally{if(g)try{c.closeSync(d)}catch{}else c.closeSync(d)}return w}}function r(c){We.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(h,l,d,g){c.open(h,We.O_SYMLINK,function(w,O){if(w){g&&g(w);return}c.futimes(O,l,d,function(x){c.close(O,function(v){g&&g(x||v)})})})},c.lutimesSync=function(h,l,d){var g=c.openSync(h,We.O_SYMLINK),w,O=!0;try{w=c.futimesSync(g,l,d),O=!1}finally{if(O)try{c.closeSync(g)}catch{}else c.closeSync(g)}return w}):c.futimes&&(c.lutimes=function(h,l,d,g){g&&process.nextTick(g)},c.lutimesSync=function(){})}function i(c){return c&&function(h,l,d){return c.call(t,h,l,function(g){f(g)&&(g=null),d&&d.apply(this,arguments)})}}function s(c){return c&&function(h,l){try{return c.call(t,h,l)}catch(d){if(!f(d))throw d}}}function n(c){return c&&function(h,l,d,g){return c.call(t,h,l,d,function(w){f(w)&&(w=null),g&&g.apply(this,arguments)})}}function o(c){return c&&function(h,l,d){try{return c.call(t,h,l,d)}catch(g){if(!f(g))throw g}}}function a(c){return c&&function(h,l,d){typeof l=="function"&&(d=l,l=null);function g(w,O){O&&(O.uid<0&&(O.uid+=4294967296),O.gid<0&&(O.gid+=4294967296)),d&&d.apply(this,arguments)}return l?c.call(t,h,l,g):c.call(t,h,g)}}function u(c){return c&&function(h,l){var d=l?c.call(t,h,l):c.call(t,h);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function f(c){if(!c||c.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(c.code==="EINVAL"||c.code==="EPERM"))}}var Ws=ua.Stream,Vf=zf;function zf(t){return{ReadStream:e,WriteStream:r};function e(i,s){if(!(this instanceof e))return new e(i,s);Ws.call(this);var n=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,s=s||{};for(var o=Object.keys(s),a=0,u=o.length;a<u;a++){var f=o[a];this[f]=s[f]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){n._read()});return}t.open(this.path,this.flags,this.mode,function(c,h){if(c){n.emit("error",c),n.readable=!1;return}n.fd=h,n.emit("open",h),n._read()})}function r(i,s){if(!(this instanceof r))return new r(i,s);Ws.call(this),this.path=i,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,s=s||{};for(var n=Object.keys(s),o=0,a=n.length;o<a;o++){var u=n[o];this[u]=s[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var Wf=Gf,Hf=Object.getPrototypeOf||function(t){return t.__proto__};function Gf(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:Hf(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var le=ce,Kf=Uf,Yf=Vf,Jf=Wf,zt=ht,Ee,er;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Ee=Symbol.for("graceful-fs.queue"),er=Symbol.for("graceful-fs.previous")):(Ee="___graceful-fs.queue",er="___graceful-fs.previous");function Qf(){}function Qa(t,e){Object.defineProperty(t,Ee,{get:function(){return e}})}var rt=Qf;zt.debuglog?rt=zt.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(rt=function(){var t=zt.format.apply(zt,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});if(!le[Ee]){var Zf=Z[Ee]||[];Qa(le,Zf),le.close=function(t){function e(r,i){return t.call(le,r,function(s){s||Hs(),typeof i=="function"&&i.apply(this,arguments)})}return Object.defineProperty(e,er,{value:t}),e}(le.close),le.closeSync=function(t){function e(r){t.apply(le,arguments),Hs()}return Object.defineProperty(e,er,{value:t}),e}(le.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){rt(le[Ee]),nr.equal(le[Ee].length,0)})}Z[Ee]||Qa(Z,le[Ee]);var dt=$i(Jf(le));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!le.__patched&&(dt=$i(le),le.__patched=!0);function $i(t){Kf(t),t.gracefulify=$i,t.createReadStream=_,t.createWriteStream=E;var e=t.readFile;t.readFile=r;function r(p,S,A){return typeof S=="function"&&(A=S,S=null),L(p,S,A);function L(U,z,H,K){return e(U,z,function(G){G&&(G.code==="EMFILE"||G.code==="ENFILE")?at([L,[U,z,H],G,K||Date.now(),Date.now()]):typeof H=="function"&&H.apply(this,arguments)})}}var i=t.writeFile;t.writeFile=s;function s(p,S,A,L){return typeof A=="function"&&(L=A,A=null),U(p,S,A,L);function U(z,H,K,G,se){return i(z,H,K,function(te){te&&(te.code==="EMFILE"||te.code==="ENFILE")?at([U,[z,H,K,G],te,se||Date.now(),Date.now()]):typeof G=="function"&&G.apply(this,arguments)})}}var n=t.appendFile;n&&(t.appendFile=o);function o(p,S,A,L){return typeof A=="function"&&(L=A,A=null),U(p,S,A,L);function U(z,H,K,G,se){return n(z,H,K,function(te){te&&(te.code==="EMFILE"||te.code==="ENFILE")?at([U,[z,H,K,G],te,se||Date.now(),Date.now()]):typeof G=="function"&&G.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=u);function u(p,S,A,L){return typeof A=="function"&&(L=A,A=0),U(p,S,A,L);function U(z,H,K,G,se){return a(z,H,K,function(te){te&&(te.code==="EMFILE"||te.code==="ENFILE")?at([U,[z,H,K,G],te,se||Date.now(),Date.now()]):typeof G=="function"&&G.apply(this,arguments)})}}var f=t.readdir;t.readdir=h;var c=/^v[0-5]\./;function h(p,S,A){typeof S=="function"&&(A=S,S=null);var L=c.test(process.version)?function(H,K,G,se){return f(H,U(H,K,G,se))}:function(H,K,G,se){return f(H,K,U(H,K,G,se))};return L(p,S,A);function U(z,H,K,G){return function(se,te){se&&(se.code==="EMFILE"||se.code==="ENFILE")?at([L,[z,H,K],se,G||Date.now(),Date.now()]):(te&&te.sort&&te.sort(),typeof K=="function"&&K.call(this,se,te))}}}if(process.version.substr(0,4)==="v0.8"){var l=Yf(t);x=l.ReadStream,y=l.WriteStream}var d=t.ReadStream;d&&(x.prototype=Object.create(d.prototype),x.prototype.open=v);var g=t.WriteStream;g&&(y.prototype=Object.create(g.prototype),y.prototype.open=C),Object.defineProperty(t,"ReadStream",{get:function(){return x},set:function(p){x=p},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return y},set:function(p){y=p},enumerable:!0,configurable:!0});var w=x;Object.defineProperty(t,"FileReadStream",{get:function(){return w},set:function(p){w=p},enumerable:!0,configurable:!0});var O=y;Object.defineProperty(t,"FileWriteStream",{get:function(){return O},set:function(p){O=p},enumerable:!0,configurable:!0});function x(p,S){return this instanceof x?(d.apply(this,arguments),this):x.apply(Object.create(x.prototype),arguments)}function v(){var p=this;T(p.path,p.flags,p.mode,function(S,A){S?(p.autoClose&&p.destroy(),p.emit("error",S)):(p.fd=A,p.emit("open",A),p.read())})}function y(p,S){return this instanceof y?(g.apply(this,arguments),this):y.apply(Object.create(y.prototype),arguments)}function C(){var p=this;T(p.path,p.flags,p.mode,function(S,A){S?(p.destroy(),p.emit("error",S)):(p.fd=A,p.emit("open",A))})}function _(p,S){return new t.ReadStream(p,S)}function E(p,S){return new t.WriteStream(p,S)}var D=t.open;t.open=T;function T(p,S,A,L){return typeof A=="function"&&(L=A,A=null),U(p,S,A,L);function U(z,H,K,G,se){return D(z,H,K,function(te,ge){te&&(te.code==="EMFILE"||te.code==="ENFILE")?at([U,[z,H,K,G],te,se||Date.now(),Date.now()]):typeof G=="function"&&G.apply(this,arguments)})}}return t}function at(t){rt("ENQUEUE",t[0].name,t[1]),le[Ee].push(t),ki()}var Wt;function Hs(){for(var t=Date.now(),e=0;e<le[Ee].length;++e)le[Ee][e].length>2&&(le[Ee][e][3]=t,le[Ee][e][4]=t);ki()}function ki(){if(clearTimeout(Wt),Wt=void 0,le[Ee].length!==0){var t=le[Ee].shift(),e=t[0],r=t[1],i=t[2],s=t[3],n=t[4];if(s===void 0)rt("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-s>=6e4){rt("TIMEOUT",e.name,r);var o=r.pop();typeof o=="function"&&o.call(null,i)}else{var a=Date.now()-n,u=Math.max(n-s,1),f=Math.min(u*1.2,100);a>=f?(rt("RETRY",e.name,r),e.apply(null,r.concat([s]))):le[Ee].push(t)}Wt===void 0&&(Wt=setTimeout(ki,0))}}(function(t){const e=ye.fromCallback,r=dt,i=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(s=>typeof r[s]=="function");Object.assign(t,r),i.forEach(s=>{t[s]=e(r[s])}),t.exists=function(s,n){return typeof n=="function"?r.exists(s,n):new Promise(o=>r.exists(s,o))},t.read=function(s,n,o,a,u,f){return typeof f=="function"?r.read(s,n,o,a,u,f):new Promise((c,h)=>{r.read(s,n,o,a,u,(l,d,g)=>{if(l)return h(l);c({bytesRead:d,buffer:g})})})},t.write=function(s,n,...o){return typeof o[o.length-1]=="function"?r.write(s,n,...o):new Promise((a,u)=>{r.write(s,n,...o,(f,c,h)=>{if(f)return u(f);a({bytesWritten:c,buffer:h})})})},t.readv=function(s,n,...o){return typeof o[o.length-1]=="function"?r.readv(s,n,...o):new Promise((a,u)=>{r.readv(s,n,...o,(f,c,h)=>{if(f)return u(f);a({bytesRead:c,buffers:h})})})},t.writev=function(s,n,...o){return typeof o[o.length-1]=="function"?r.writev(s,n,...o):new Promise((a,u)=>{r.writev(s,n,...o,(f,c,h)=>{if(f)return u(f);a({bytesWritten:c,buffers:h})})})},typeof r.realpath.native=="function"?t.realpath.native=e(r.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(xe);var ji={},Za={};const eh=J;Za.checkPath=function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(eh.parse(e).root,""))){const i=new Error(`Path contains invalid characters: ${e}`);throw i.code="EINVAL",i}};const eu=xe,{checkPath:tu}=Za,ru=t=>{const e={mode:511};return typeof t=="number"?t:{...e,...t}.mode};ji.makeDir=async(t,e)=>(tu(t),eu.mkdir(t,{mode:ru(e),recursive:!0}));ji.makeDirSync=(t,e)=>(tu(t),eu.mkdirSync(t,{mode:ru(e),recursive:!0}));const th=ye.fromPromise,{makeDir:rh,makeDirSync:ri}=ji,ni=th(rh);var je={mkdirs:ni,mkdirsSync:ri,mkdirp:ni,mkdirpSync:ri,ensureDir:ni,ensureDirSync:ri};const nh=ye.fromPromise,nu=xe;function ih(t){return nu.access(t).then(()=>!0).catch(()=>!1)}var ot={pathExists:nh(ih),pathExistsSync:nu.existsSync};const ct=xe,oh=ye.fromPromise;async function sh(t,e,r){const i=await ct.open(t,"r+");let s=null;try{await ct.futimes(i,e,r)}finally{try{await ct.close(i)}catch(n){s=n}}if(s)throw s}function ah(t,e,r){const i=ct.openSync(t,"r+");return ct.futimesSync(i,e,r),ct.closeSync(i)}var iu={utimesMillis:oh(sh),utimesMillisSync:ah};const lt=xe,ve=J,Gs=ye.fromPromise;function uh(t,e,r){const i=r.dereference?s=>lt.stat(s,{bigint:!0}):s=>lt.lstat(s,{bigint:!0});return Promise.all([i(t),i(e).catch(s=>{if(s.code==="ENOENT")return null;throw s})]).then(([s,n])=>({srcStat:s,destStat:n}))}function ch(t,e,r){let i;const s=r.dereference?o=>lt.statSync(o,{bigint:!0}):o=>lt.lstatSync(o,{bigint:!0}),n=s(t);try{i=s(e)}catch(o){if(o.code==="ENOENT")return{srcStat:n,destStat:null};throw o}return{srcStat:n,destStat:i}}async function lh(t,e,r,i){const{srcStat:s,destStat:n}=await uh(t,e,i);if(n){if(It(s,n)){const o=ve.basename(t),a=ve.basename(e);if(r==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:s,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!s.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(s.isDirectory()&&qi(t,e))throw new Error(pr(t,e,r));return{srcStat:s,destStat:n}}function fh(t,e,r,i){const{srcStat:s,destStat:n}=ch(t,e,i);if(n){if(It(s,n)){const o=ve.basename(t),a=ve.basename(e);if(r==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:s,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!s.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(s.isDirectory()&&qi(t,e))throw new Error(pr(t,e,r));return{srcStat:s,destStat:n}}async function ou(t,e,r,i){const s=ve.resolve(ve.dirname(t)),n=ve.resolve(ve.dirname(r));if(n===s||n===ve.parse(n).root)return;let o;try{o=await lt.stat(n,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(It(e,o))throw new Error(pr(t,r,i));return ou(t,e,n,i)}function su(t,e,r,i){const s=ve.resolve(ve.dirname(t)),n=ve.resolve(ve.dirname(r));if(n===s||n===ve.parse(n).root)return;let o;try{o=lt.statSync(n,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(It(e,o))throw new Error(pr(t,r,i));return su(t,e,n,i)}function It(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function qi(t,e){const r=ve.resolve(t).split(ve.sep).filter(s=>s),i=ve.resolve(e).split(ve.sep).filter(s=>s);return r.every((s,n)=>i[n]===s)}function pr(t,e,r){return`Cannot ${r} '${t}' to a subdirectory of itself, '${e}'.`}var mt={checkPaths:Gs(lh),checkPathsSync:fh,checkParentPaths:Gs(ou),checkParentPathsSync:su,isSrcSubdir:qi,areIdentical:It};const De=xe,Ct=J,{mkdirs:hh}=je,{pathExists:ph}=ot,{utimesMillis:dh}=iu,Dt=mt;async function mh(t,e,r={}){typeof r=="function"&&(r={filter:r}),r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");const{srcStat:i,destStat:s}=await Dt.checkPaths(t,e,"copy",r);if(await Dt.checkParentPaths(t,i,e,"copy"),!await au(t,e,r))return;const o=Ct.dirname(e);await ph(o)||await hh(o),await uu(s,t,e,r)}async function au(t,e,r){return r.filter?r.filter(t,e):!0}async function uu(t,e,r,i){const n=await(i.dereference?De.stat:De.lstat)(e);if(n.isDirectory())return wh(n,t,e,r,i);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return yh(n,t,e,r,i);if(n.isSymbolicLink())return Eh(t,e,r,i);throw n.isSocket()?new Error(`Cannot copy a socket file: ${e}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}async function yh(t,e,r,i,s){if(!e)return Ks(t,r,i,s);if(s.overwrite)return await De.unlink(i),Ks(t,r,i,s);if(s.errorOnExist)throw new Error(`'${i}' already exists`)}async function Ks(t,e,r,i){if(await De.copyFile(e,r),i.preserveTimestamps){gh(t.mode)&&await vh(r,t.mode);const s=await De.stat(e);await dh(r,s.atime,s.mtime)}return De.chmod(r,t.mode)}function gh(t){return(t&128)===0}function vh(t,e){return De.chmod(t,e|128)}async function wh(t,e,r,i,s){e||await De.mkdir(i);const n=[];for await(const o of await De.opendir(r)){const a=Ct.join(r,o.name),u=Ct.join(i,o.name);n.push(au(a,u,s).then(f=>{if(f)return Dt.checkPaths(a,u,"copy",s).then(({destStat:c})=>uu(c,a,u,s))}))}await Promise.all(n),e||await De.chmod(i,t.mode)}async function Eh(t,e,r,i){let s=await De.readlink(e);if(i.dereference&&(s=Ct.resolve(process.cwd(),s)),!t)return De.symlink(s,r);let n=null;try{n=await De.readlink(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return De.symlink(s,r);throw o}if(i.dereference&&(n=Ct.resolve(process.cwd(),n)),Dt.isSrcSubdir(s,n))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${n}'.`);if(Dt.isSrcSubdir(n,s))throw new Error(`Cannot overwrite '${n}' with '${s}'.`);return await De.unlink(r),De.symlink(s,r)}var bh=mh;const Fe=dt,_t=J,Sh=je.mkdirsSync,Oh=iu.utimesMillisSync,At=mt;function Th(t,e,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:i,destStat:s}=At.checkPathsSync(t,e,"copy",r);if(At.checkParentPathsSync(t,i,e,"copy"),r.filter&&!r.filter(t,e))return;const n=_t.dirname(e);return Fe.existsSync(n)||Sh(n),cu(s,t,e,r)}function cu(t,e,r,i){const n=(i.dereference?Fe.statSync:Fe.lstatSync)(e);if(n.isDirectory())return xh(n,t,e,r,i);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return Ch(n,t,e,r,i);if(n.isSymbolicLink())return Lh(t,e,r,i);throw n.isSocket()?new Error(`Cannot copy a socket file: ${e}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}function Ch(t,e,r,i,s){return e?Dh(t,r,i,s):lu(t,r,i,s)}function Dh(t,e,r,i){if(i.overwrite)return Fe.unlinkSync(r),lu(t,e,r,i);if(i.errorOnExist)throw new Error(`'${r}' already exists`)}function lu(t,e,r,i){return Fe.copyFileSync(e,r),i.preserveTimestamps&&_h(t.mode,e,r),Bi(r,t.mode)}function _h(t,e,r){return Ah(t)&&Fh(r,t),Nh(e,r)}function Ah(t){return(t&128)===0}function Fh(t,e){return Bi(t,e|128)}function Bi(t,e){return Fe.chmodSync(t,e)}function Nh(t,e){const r=Fe.statSync(t);return Oh(e,r.atime,r.mtime)}function xh(t,e,r,i,s){return e?fu(r,i,s):Ih(t.mode,r,i,s)}function Ih(t,e,r,i){return Fe.mkdirSync(r),fu(e,r,i),Bi(r,t)}function fu(t,e,r){const i=Fe.opendirSync(t);try{let s;for(;(s=i.readSync())!==null;)Ph(s.name,t,e,r)}finally{i.closeSync()}}function Ph(t,e,r,i){const s=_t.join(e,t),n=_t.join(r,t);if(i.filter&&!i.filter(s,n))return;const{destStat:o}=At.checkPathsSync(s,n,"copy",i);return cu(o,s,n,i)}function Lh(t,e,r,i){let s=Fe.readlinkSync(e);if(i.dereference&&(s=_t.resolve(process.cwd(),s)),t){let n;try{n=Fe.readlinkSync(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return Fe.symlinkSync(s,r);throw o}if(i.dereference&&(n=_t.resolve(process.cwd(),n)),At.isSrcSubdir(s,n))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${n}'.`);if(At.isSrcSubdir(n,s))throw new Error(`Cannot overwrite '${n}' with '${s}'.`);return Mh(s,r)}else return Fe.symlinkSync(s,r)}function Mh(t,e){return Fe.unlinkSync(e),Fe.symlinkSync(t,e)}var Rh=Th;const $h=ye.fromPromise;var Ui={copy:$h(bh),copySync:Rh};const hu=dt,kh=ye.fromCallback;function jh(t,e){hu.rm(t,{recursive:!0,force:!0},e)}function qh(t){hu.rmSync(t,{recursive:!0,force:!0})}var dr={remove:kh(jh),removeSync:qh};const Bh=ye.fromPromise,pu=xe,du=J,mu=je,yu=dr,Ys=Bh(async function(e){let r;try{r=await pu.readdir(e)}catch{return mu.mkdirs(e)}return Promise.all(r.map(i=>yu.remove(du.join(e,i))))});function Js(t){let e;try{e=pu.readdirSync(t)}catch{return mu.mkdirsSync(t)}e.forEach(r=>{r=du.join(t,r),yu.removeSync(r)})}var Uh={emptyDirSync:Js,emptydirSync:Js,emptyDir:Ys,emptydir:Ys};const Xh=ye.fromPromise,gu=J,Ue=xe,vu=je;async function Vh(t){let e;try{e=await Ue.stat(t)}catch{}if(e&&e.isFile())return;const r=gu.dirname(t);let i=null;try{i=await Ue.stat(r)}catch(s){if(s.code==="ENOENT"){await vu.mkdirs(r),await Ue.writeFile(t,"");return}else throw s}i.isDirectory()?await Ue.writeFile(t,""):await Ue.readdir(r)}function zh(t){let e;try{e=Ue.statSync(t)}catch{}if(e&&e.isFile())return;const r=gu.dirname(t);try{Ue.statSync(r).isDirectory()||Ue.readdirSync(r)}catch(i){if(i&&i.code==="ENOENT")vu.mkdirsSync(r);else throw i}Ue.writeFileSync(t,"")}var Wh={createFile:Xh(Vh),createFileSync:zh};const Hh=ye.fromPromise,wu=J,Je=xe,Eu=je,{pathExists:Gh}=ot,{areIdentical:bu}=mt;async function Kh(t,e){let r;try{r=await Je.lstat(e)}catch{}let i;try{i=await Je.lstat(t)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}if(r&&bu(i,r))return;const s=wu.dirname(e);await Gh(s)||await Eu.mkdirs(s),await Je.link(t,e)}function Yh(t,e){let r;try{r=Je.lstatSync(e)}catch{}try{const n=Je.lstatSync(t);if(r&&bu(n,r))return}catch(n){throw n.message=n.message.replace("lstat","ensureLink"),n}const i=wu.dirname(e);return Je.existsSync(i)||Eu.mkdirsSync(i),Je.linkSync(t,e)}var Jh={createLink:Hh(Kh),createLinkSync:Yh};const Ze=J,Ot=xe,{pathExists:Qh}=ot,Zh=ye.fromPromise;async function ep(t,e){if(Ze.isAbsolute(t)){try{await Ot.lstat(t)}catch(n){throw n.message=n.message.replace("lstat","ensureSymlink"),n}return{toCwd:t,toDst:t}}const r=Ze.dirname(e),i=Ze.join(r,t);if(await Qh(i))return{toCwd:i,toDst:t};try{await Ot.lstat(t)}catch(n){throw n.message=n.message.replace("lstat","ensureSymlink"),n}return{toCwd:t,toDst:Ze.relative(r,t)}}function tp(t,e){if(Ze.isAbsolute(t)){if(!Ot.existsSync(t))throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}const r=Ze.dirname(e),i=Ze.join(r,t);if(Ot.existsSync(i))return{toCwd:i,toDst:t};if(!Ot.existsSync(t))throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:Ze.relative(r,t)}}var rp={symlinkPaths:Zh(ep),symlinkPathsSync:tp};const Su=xe,np=ye.fromPromise;async function ip(t,e){if(e)return e;let r;try{r=await Su.lstat(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}function op(t,e){if(e)return e;let r;try{r=Su.lstatSync(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}var sp={symlinkType:np(ip),symlinkTypeSync:op};const ap=ye.fromPromise,Ou=J,ke=xe,{mkdirs:up,mkdirsSync:cp}=je,{symlinkPaths:lp,symlinkPathsSync:fp}=rp,{symlinkType:hp,symlinkTypeSync:pp}=sp,{pathExists:dp}=ot,{areIdentical:Tu}=mt;async function mp(t,e,r){let i;try{i=await ke.lstat(e)}catch{}if(i&&i.isSymbolicLink()){const[a,u]=await Promise.all([ke.stat(t),ke.stat(e)]);if(Tu(a,u))return}const s=await lp(t,e);t=s.toDst;const n=await hp(s.toCwd,r),o=Ou.dirname(e);return await dp(o)||await up(o),ke.symlink(t,e,n)}function yp(t,e,r){let i;try{i=ke.lstatSync(e)}catch{}if(i&&i.isSymbolicLink()){const a=ke.statSync(t),u=ke.statSync(e);if(Tu(a,u))return}const s=fp(t,e);t=s.toDst,r=pp(s.toCwd,r);const n=Ou.dirname(e);return ke.existsSync(n)||cp(n),ke.symlinkSync(t,e,r)}var gp={createSymlink:ap(mp),createSymlinkSync:yp};const{createFile:Qs,createFileSync:Zs}=Wh,{createLink:ea,createLinkSync:ta}=Jh,{createSymlink:ra,createSymlinkSync:na}=gp;var vp={createFile:Qs,createFileSync:Zs,ensureFile:Qs,ensureFileSync:Zs,createLink:ea,createLinkSync:ta,ensureLink:ea,ensureLinkSync:ta,createSymlink:ra,createSymlinkSync:na,ensureSymlink:ra,ensureSymlinkSync:na};function wp(t,{EOL:e=`
`,finalEOL:r=!0,replacer:i=null,spaces:s}={}){const n=r?e:"";return JSON.stringify(t,i,s).replace(/\n/g,e)+n}function Ep(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}var Xi={stringify:wp,stripBom:Ep};let ft;try{ft=dt}catch{ft=ce}const mr=ye,{stringify:Cu,stripBom:Du}=Xi;async function bp(t,e={}){typeof e=="string"&&(e={encoding:e});const r=e.fs||ft,i="throws"in e?e.throws:!0;let s=await mr.fromCallback(r.readFile)(t,e);s=Du(s);let n;try{n=JSON.parse(s,e?e.reviver:null)}catch(o){if(i)throw o.message=`${t}: ${o.message}`,o;return null}return n}const Sp=mr.fromPromise(bp);function Op(t,e={}){typeof e=="string"&&(e={encoding:e});const r=e.fs||ft,i="throws"in e?e.throws:!0;try{let s=r.readFileSync(t,e);return s=Du(s),JSON.parse(s,e.reviver)}catch(s){if(i)throw s.message=`${t}: ${s.message}`,s;return null}}async function Tp(t,e,r={}){const i=r.fs||ft,s=Cu(e,r);await mr.fromCallback(i.writeFile)(t,s,r)}const Cp=mr.fromPromise(Tp);function Dp(t,e,r={}){const i=r.fs||ft,s=Cu(e,r);return i.writeFileSync(t,s,r)}const _p={readFile:Sp,readFileSync:Op,writeFile:Cp,writeFileSync:Dp};var Ap=_p;const Ht=Ap;var Fp={readJson:Ht.readFile,readJsonSync:Ht.readFileSync,writeJson:Ht.writeFile,writeJsonSync:Ht.writeFileSync};const Np=ye.fromPromise,pi=xe,_u=J,Au=je,xp=ot.pathExists;async function Ip(t,e,r="utf-8"){const i=_u.dirname(t);return await xp(i)||await Au.mkdirs(i),pi.writeFile(t,e,r)}function Pp(t,...e){const r=_u.dirname(t);pi.existsSync(r)||Au.mkdirsSync(r),pi.writeFileSync(t,...e)}var Vi={outputFile:Np(Ip),outputFileSync:Pp};const{stringify:Lp}=Xi,{outputFile:Mp}=Vi;async function Rp(t,e,r={}){const i=Lp(e,r);await Mp(t,i,r)}var $p=Rp;const{stringify:kp}=Xi,{outputFileSync:jp}=Vi;function qp(t,e,r){const i=kp(e,r);jp(t,i,r)}var Bp=qp;const Up=ye.fromPromise,Ne=Fp;Ne.outputJson=Up($p);Ne.outputJsonSync=Bp;Ne.outputJSON=Ne.outputJson;Ne.outputJSONSync=Ne.outputJsonSync;Ne.writeJSON=Ne.writeJson;Ne.writeJSONSync=Ne.writeJsonSync;Ne.readJSON=Ne.readJson;Ne.readJSONSync=Ne.readJsonSync;var Xp=Ne;const Vp=xe,ia=J,{copy:zp}=Ui,{remove:Fu}=dr,{mkdirp:Wp}=je,{pathExists:Hp}=ot,oa=mt;async function Gp(t,e,r={}){const i=r.overwrite||r.clobber||!1,{srcStat:s,isChangingCase:n=!1}=await oa.checkPaths(t,e,"move",r);await oa.checkParentPaths(t,s,e,"move");const o=ia.dirname(e);return ia.parse(o).root!==o&&await Wp(o),Kp(t,e,i,n)}async function Kp(t,e,r,i){if(!i){if(r)await Fu(e);else if(await Hp(e))throw new Error("dest already exists.")}try{await Vp.rename(t,e)}catch(s){if(s.code!=="EXDEV")throw s;await Yp(t,e,r)}}async function Yp(t,e,r){return await zp(t,e,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),Fu(t)}var Jp=Gp;const Nu=dt,di=J,Qp=Ui.copySync,xu=dr.removeSync,Zp=je.mkdirpSync,sa=mt;function ed(t,e,r){r=r||{};const i=r.overwrite||r.clobber||!1,{srcStat:s,isChangingCase:n=!1}=sa.checkPathsSync(t,e,"move",r);return sa.checkParentPathsSync(t,s,e,"move"),td(e)||Zp(di.dirname(e)),rd(t,e,i,n)}function td(t){const e=di.dirname(t);return di.parse(e).root===e}function rd(t,e,r,i){if(i)return ii(t,e,r);if(r)return xu(e),ii(t,e,r);if(Nu.existsSync(e))throw new Error("dest already exists.");return ii(t,e,r)}function ii(t,e,r){try{Nu.renameSync(t,e)}catch(i){if(i.code!=="EXDEV")throw i;return nd(t,e,r)}}function nd(t,e,r){return Qp(t,e,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),xu(t)}var id=ed;const od=ye.fromPromise;var sd={move:od(Jp),moveSync:id},ad={...xe,...Ui,...Uh,...vp,...Xp,...je,...sd,...Vi,...ot,...dr};const ud=Nt(ad);function cd(){const t=!re.app.isPackaged;ae.initialize({preload:!0,spyRendererConsole:t});const e=J.join(xt(),"logs"),r=J.join(e,"app.log");ud.ensureDirSync(e),ae.transports.file.level=t?"debug":"info",ae.transports.file.resolvePathFn=()=>r,ae.transports.file.maxSize=10*1024*1024,t&&(ae.transports.console.level="debug",ae.transports.file.format="[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}] {text}"),console.log(`[Logger] 日志文件路径: ${r}`)}function ld(t){return Object.entries(t).map(([e,r])=>`${e}=${r}`).join(",")}const He={Fontname:"Microsoft YaHei",Fontsize:36,PrimaryColour:"&H00FFFFFF&",OutlineColour:"&H00000000&",BackColour:"&H80000000&",Bold:0,Italic:0,BorderStyle:3,Outline:1,Shadow:2,Alignment:2,MarginL:20,MarginR:20,MarginV:30};async function fd(t){const{videoPath:e,audioPath:r,isOpenOriginAudio:i,startTime:s,currentDuration:n,outputPath:o,subtitles:a,subtitlePath:u,titleConfig:f,videoWidth:c,videoHeight:h,zimuConfig:l}=t;return new Promise(async(d,g)=>{const w=u;Lf(w,a);const O=Ja().input(e).input(r);e.replace(/\\/g,"/").replace(/:/g,"\\:"),r.replace(/\\/g,"/").replace(/:/g,"\\:");const x=w.replace(/\\/g,"/").replace(/:/g,"\\:");o.replace(/\\/g,"/").replace(/:/g,"\\:");const v=[{filter:"trim",options:{start:s,duration:n},inputs:"0:v",outputs:"trimmed_video"},{filter:"setpts",options:"PTS-STARTPTS",inputs:"trimmed_video",outputs:"video_pts"},{filter:"scale",options:{w:c,h,force_original_aspect_ratio:"decrease",eval:"frame"},inputs:"video_pts",outputs:"scaled_video"},{filter:"pad",options:{width:c,height:h,x:"(ow-iw)/2",y:"(oh-ih)/2",color:"black"},inputs:"scaled_video",outputs:"padded_video"}];if(f){const D=f.duration||n,T={top:"10",middle:"(h-text_h)/2",bottom:"h-text_h-10"},p={left:"10",center:"(w-text_w)/2",right:"w-text_w-10"},S=await Mf(f.textConfig.fontFamily||"arial"),A=f.textConfig;v.push({filter:"drawtext",options:{text:f.text,fontfile:S,fontsize:A.fontSize||36,fontcolor:A.fontColor||"white",x:p[A.textAlign||"center"],y:T[A.position||"top"],shadowcolor:"black",shadowx:2,shadowy:2,enable:`between(t,${f.start},${f.start+D})`},inputs:"padded_video",outputs:"video_with_title"})}else v.push({filter:"null",inputs:"padded_video",outputs:"video_with_title"});const y=ld({...He,Fontname:l.textConfig.fontFamily||He.Fontname,Fontsize:l.textConfig.fontSize||He.Fontsize,PrimaryColour:l.textConfig.fontColor&&`&H${l.textConfig.fontColor.replace("#","").toUpperCase()}&`||He.PrimaryColour,BackColour:l.textConfig.backgroundColor&&`&H${l.textConfig.backgroundColor.replace("#","").toUpperCase()}&`||He.BackColour,BorderStyle:l.textConfig.borderStyle||He.BorderStyle,Outline:l.textConfig.outline||He.Outline,Alignment:l.textConfig.textAlign||He.Alignment}),C=f?`[video_with_title]subtitles='${x}':force_style='${y}'[video_with_subtitles]`:`[padded_video]subtitles='${x}':force_style='${y}'[video_with_subtitles]`;v.push(C);const _=[];let E="";i&&await Pf(e)?(_.push({filter:"atrim",options:{start:s,duration:n},inputs:"0:a",outputs:"trimmed_original"},{filter:"asetpts",options:"PTS-STARTPTS",inputs:"trimmed_original",outputs:"original_pts"},{filter:"volume",options:"1.0",inputs:"original_pts",outputs:"original_audio"},{filter:"atrim",options:{start:0,duration:n},inputs:"1:a",outputs:"trimmed_new"},{filter:"asetpts",options:"PTS-STARTPTS",inputs:"trimmed_new",outputs:"new_pts"},{filter:"volume",options:"1.0",inputs:"new_pts",outputs:"new_audio"},{filter:"amix",options:{inputs:2,duration:"longest"},inputs:["original_audio","new_audio"],outputs:"mixed_audio"}),E="mixed_audio"):(_.push({filter:"atrim",options:{start:0,duration:n},inputs:"1:a",outputs:"trimmed_new"},{filter:"asetpts",options:"PTS-STARTPTS",inputs:"trimmed_new",outputs:"new_pts"},{filter:"volume",options:"1.0",inputs:"new_pts",outputs:"new_audio"}),E="new_audio"),O.complexFilter([...v,..._]).outputOptions(["-map [video_with_subtitles]",`-map [${E}]`,"-c:v libx264","-c:a aac","-preset fast"]),O.on("start",D=>{console.log("start to execute command: "+D)}).on("progress",D=>{console.log(`processing: ${Math.round(D.percent)}%`)}).on("end",()=>{console.log(`segment process done: ${o}`),d()}).on("error",D=>{console.error(`segment process error: ${D.message}`),g(D)}).save(o)})}async function hd(t,e,r,i){var y;const s=i.videoRatio,o=i.videoResolution.split("x").map(C=>parseInt(C)),a=s==="9:16"?o[0]:o[1],u=s==="9:16"?o[1]:o[0],f=t.zimuConfig.datas[0],c=f.path;let h=f.duration??await Tt(c);h=Math.ceil(h*100)/100;const l=t.videoList,d=t.isOpenOriginAudio??!0,g=[],w=`${r}_${t.name}_`,O=t.zimuConfig.datas.map(C=>({text:C.text,start:0,duration:h})),x=J.join(e,`${r}_${t.name}_subtitles.srt`),v=(y=t.videoTitleConfig)==null?void 0:y.datas[0];for(const C of l){const _=C.path,E=C.duration??await Tt(_),D=h,T=Math.ceil(E/D),p=w+J.basename(_,J.extname(_));for(let S=0;S<T;S++){const A=S*D,L=C.duration-A,U=Math.min(D,L),z=J.join(e,`${p}_part${S+1}_${A}-${A+U}.mp4`);g.push({videoPath:_,audioPath:c,outputPath:z,startTime:A,currentDuration:U,isOpenOriginAudio:d,subtitles:O,subtitlePath:x,titleConfig:v,videoWidth:a,videoHeight:u,zimuConfig:t.zimuConfig})}}return g}async function pd(t,e){return new Promise((r,i)=>{const s=Ja();t.forEach(a=>{s.input(a)});const n=[];for(let a=0;a<t.length;a++)n.push(`[${a}:v]scale=1280:720:force_original_aspect_ratio=decrease,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1[v${a}]`),n.push(`[${a}:a]aformat=sample_fmts=fltp:sample_rates=44100:channel_layouts=stereo[a${a}]`);const o=t.map((a,u)=>`[v${u}][a${u}]`).join("");n.push(`${o} concat=n=${t.length}:v=1:a=1[v][a]`),s.complexFilter(n).outputOptions(["-map [v]","-map [a]","-c:v libx264","-preset fast","-crf 23","-c:a aac","-b:a 128k","-movflags +faststart"]).on("start",a=>console.log("执行命令:",a)).on("progress",a=>console.log(`处理进度: ${Math.round(a.percent)}%`)).on("end",r).on("error",i).save(e)})}async function dd(t){ae.log("accept params："),ae.log(JSON.stringify(t));const e=t.clips,r=t.outputFileName,i=t.outputDir??Ri(),s=t.globalConfig;for(const c of e)c.segments=await hd(c,i,r,s);ae.log("split clip to segments done："),ae.log(JSON.stringify(e));const n=[];for(const c of e)n.push(...c.segments);ae.info("segments:"),ae.info(JSON.stringify(n));const o=n.map(c=>fd(c));await Promise.all(o),ae.log("segment process done："),ae.log(JSON.stringify(n));let a=1;for(const c of e)(a===1||c.segments.length>1&&c.segments.length<a)&&(a=c.segments.length);ae.log(`we can generate ${a} videos`);const u=[];for(let c=0;c<a;c++){const h=[];let l=0;for(const d of e){const g=d.segments;let w;g.length===1?w=g[0]:w=g[c],h.push(w.outputPath),l+=w.currentDuration}u.push({videos:h,outputPath:J.join(i,`${r}_${c+1}.mp4`),duration:l})}ae.log("concat videos start"),ae.log(JSON.stringify(u));const f=u.map(c=>pd(c.videos,c.outputPath));return await Promise.all(f),ae.log("concat videos done："),ae.log(JSON.stringify(u)),u.map(c=>({outputPath:c.outputPath,duration:c.duration}))}function md(){re.ipcMain.handle("video-mix-and-cut",async(t,e)=>{const r=JSON.parse(oi(e));return dd(r)}),re.ipcMain.handle("get-media-duration",async(t,e)=>{const r=JSON.parse(oi(e));return Tt(r.path)})}function yd(t){re.ipcMain.handle("open-file-dialog",async(e,r)=>{if(!t)return null;const i=(r==null?void 0:r.defaultPath)||xt(),s=(r==null?void 0:r.properties)||["openFile"],n=(r==null?void 0:r.title)||"选择文件",o=(r==null?void 0:r.buttonLabel)||"选择",a=(r==null?void 0:r.filters)||[{name:"All Files",extensions:["*"]}];r!=null&&r.multiple&&!s.includes("multiSelections")&&s.push("multiSelections");const u=await re.dialog.showOpenDialog(t,{title:n,defaultPath:i,buttonLabel:o,filters:a,properties:s});if(u.canceled)return[];{const f=u.filePaths.map(async c=>{const h=await Tt(c),l=`media://${encodeURIComponent(c)}`;return{path:J.normalize(c),name:J.basename(c),ext:J.extname(c),mimeType:Kt(c),duration:h,url:l}});return await Promise.all(f)}})}async function gd(t){const e=J.normalize(t);if(e!==t||e.includes("..")||![re.app.getPath("documents"),re.app.getPath("downloads"),re.app.getPath("videos"),xt()].map(s=>J.normalize(s)).some(s=>e.startsWith(s+J.sep)))return!1;try{return await ce.promises.access(e,ce.constants.R_OK),!0}catch{return!1}}function vd(){re.protocol.handle("media",async t=>{try{const e=t.url.slice(8),r=decodeURIComponent(e).replace(/\//g,"\\").replace(/^\\/,""),i=J.normalize(r);if(!await gd(i))return new Response("Access Denied",{status:403});const s=await ce.promises.stat(i);if(!s.isFile())return new Response("Not a file",{status:400});const n=t.headers.get("range"),o=s.size,a={"Content-Type":Kt(i),"Cache-Control":"public, max-age=31536000"};if(n){const u=n.replace(/bytes=/,"").split("-"),f=parseInt(u[0],10),c=u[1]?parseInt(u[1],10):o-1,h=c-f+1,l=ce.createReadStream(i,{start:f,end:c}),d=bo(l);return new Response(d,{status:206,headers:{"Content-Range":`bytes ${f}-${c}/${o}`,"Accept-Ranges":"bytes","Content-Length":h.toString(),"Content-Type":await Kt(i),"Cache-Control":"public, max-age=31536000"}})}else{const u=ce.createReadStream(i),f=bo(u);return new Response(f,{headers:{"Content-Length":o.toString(),"Content-Type":await Kt(i),"Cache-Control":"public, max-age=31536000"}})}}catch{return new Response("Not Found",{status:404})}})}function wd(t){re.globalShortcut.register("CommandOrControl+R",()=>{t&&t.reload()})}global.crypto=jf;process.env.LANG="zh_CN.UTF-8";process.env.LC_ALL="zh_CN.UTF-8";process.platform==="win32"&&(process.env.CHCP="65001");process.env.DIST=J.join(__dirname,"../dist");process.env.VITE_PUBLIC=re.app.isPackaged?process.env.DIST:J.join(process.env.DIST,"../public");let Re;const aa=process.env.VITE_DEV_SERVER_URL;function Iu(){Re=new re.BrowserWindow({icon:J.join(process.env.VITE_PUBLIC,"vite.svg"),webPreferences:{nodeIntegration:!0,contextIsolation:!0,preload:J.join(__dirname,"preload.js")}}),Re.webContents.on("did-finish-load",()=>{Re==null||Re.webContents.send("main-process-message",new Date().toLocaleString())}),aa?Re.loadURL(aa):Re.loadFile(J.join(process.env.DIST,"index.html"))}cd();Uu();Xu();$f();Rf();md();re.app.whenReady().then(()=>{Ri(),If(),vd(),Iu(),yd(Re),wd(Re)});re.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(re.app.quit(),Re=null)});re.app.on("activate",()=>{re.BrowserWindow.getAllWindows().length===0&&Iu()});re.app.on("will-quit",()=>{re.globalShortcut.unregisterAll()});
//# sourceMappingURL=main.js.map
