"use strict";var Hu=Object.defineProperty;var Gu=(t,e,r)=>e in t?Hu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ie=(t,e,r)=>(Gu(t,typeof e!="symbol"?e+"":e,r),r),Ji=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var ke=(t,e,r)=>(Ji(t,e,"read from private field"),r?r.call(t):e.get(t)),jt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ze=(t,e,r,i)=>(Ji(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r);var Or=(t,e,r,i)=>({set _(s){ze(t,e,s,r)},get _(){return ke(t,e,i)}});const oe=require("electron"),ee=require("path"),or=require("child_process"),it=require("os"),fe=require("fs"),Mt=require("util"),ct=require("events"),sr=require("http"),ar=require("https"),Yu=require("ws"),ur=require("assert"),Ku=require("zlib"),Si=require("url"),Oi=require("tty"),je=require("crypto"),Ju=require("querystring"),Qu=require("string_decoder"),Zu=require("timers"),wa=require("stream"),ec=require("constants");function tc(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const Tr=tc(fe);function rc(){oe.ipcMain.handle("show-save-dialog",async(t,e)=>await oe.dialog.showSaveDialog({title:e.title||"保存文件",defaultPath:e.defaultPath||oe.app.getPath("documents"),filters:e.filters||[{name:"MP4 Videos",extensions:["mp4"]},{name:"All Files",extensions:["*"]}]})),oe.ipcMain.handle("select-directory",async()=>{const t=await oe.dialog.showOpenDialog({properties:["openDirectory"],title:"选择保存目录",defaultPath:oe.app.getPath("documents")});return!t.canceled&&t.filePaths.length>0?t.filePaths[0]:null})}function nc(){oe.ipcMain.handle("open-file",async(t,e)=>{const{shell:r}=require("electron");await r.openPath(e)})}var ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ic(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),r}var Zt={exports:{}},Cr={exports:{}},Qi;function Ea(){return Qi||(Qi=1,function(t){let e={};try{e=require("electron")}catch{}e.ipcRenderer&&r(e),t.exports=r;function r({contextBridge:i,ipcRenderer:s}){if(!s)return;s.on("__ELECTRON_LOG_IPC__",(o,a)=>{window.postMessage({cmd:"message",...a})}),s.invoke("__ELECTRON_LOG__",{cmd:"getOptions"}).catch(o=>console.error(new Error(`electron-log isn't initialized in the main process. Please call log.initialize() before. ${o.message}`)));const n={sendToMain(o){try{s.send("__ELECTRON_LOG__",o)}catch(a){console.error("electronLog.sendToMain ",a,"data:",o),s.send("__ELECTRON_LOG__",{cmd:"errorHandler",error:{message:a==null?void 0:a.message,stack:a==null?void 0:a.stack},errorName:"sendToMain"})}},log(...o){n.sendToMain({data:o,level:"info"})}};for(const o of["error","warn","info","verbose","debug","silly"])n[o]=(...a)=>n.sendToMain({data:a,level:o});if(i&&process.contextIsolated)try{i.exposeInMainWorld("__electronLog",n)}catch{}typeof window=="object"?window.__electronLog=n:__electronLog=n}}(Cr)),Cr.exports}var Dr={exports:{}},_r,Zi;function oc(){if(Zi)return _r;Zi=1,_r=t;function t(e){return Object.defineProperties(r,{defaultLabel:{value:"",writable:!0},labelPadding:{value:!0,writable:!0},maxLabelLength:{value:0,writable:!0},labelLength:{get(){switch(typeof r.labelPadding){case"boolean":return r.labelPadding?r.maxLabelLength:0;case"number":return r.labelPadding;default:return 0}}}});function r(i){r.maxLabelLength=Math.max(r.maxLabelLength,i.length);const s={};for(const n of e.levels)s[n]=(...o)=>e.logData(o,{level:n,scope:i});return s.log=s.info,s}}return _r}var Ar,eo;function sc(){if(eo)return Ar;eo=1;class t{constructor({processMessage:r}){this.processMessage=r,this.buffer=[],this.enabled=!1,this.begin=this.begin.bind(this),this.commit=this.commit.bind(this),this.reject=this.reject.bind(this)}addMessage(r){this.buffer.push(r)}begin(){this.enabled=[]}commit(){this.enabled=!1,this.buffer.forEach(r=>this.processMessage(r)),this.buffer=[]}reject(){this.enabled=!1,this.buffer=[]}}return Ar=t,Ar}var Fr,to;function ba(){if(to)return Fr;to=1;const t=oc(),e=sc(),i=class i{constructor({allowUnknownLevel:n=!1,dependencies:o={},errorHandler:a,eventLogger:u,initializeFn:h,isDev:c=!1,levels:f=["error","warn","info","verbose","debug","silly"],logId:l,transportFactories:d={},variables:y}={}){ie(this,"dependencies",{});ie(this,"errorHandler",null);ie(this,"eventLogger",null);ie(this,"functions",{});ie(this,"hooks",[]);ie(this,"isDev",!1);ie(this,"levels",null);ie(this,"logId",null);ie(this,"scope",null);ie(this,"transports",{});ie(this,"variables",{});this.addLevel=this.addLevel.bind(this),this.create=this.create.bind(this),this.initialize=this.initialize.bind(this),this.logData=this.logData.bind(this),this.processMessage=this.processMessage.bind(this),this.allowUnknownLevel=n,this.buffering=new e(this),this.dependencies=o,this.initializeFn=h,this.isDev=c,this.levels=f,this.logId=l,this.scope=t(this),this.transportFactories=d,this.variables=y||{};for(const v of this.levels)this.addLevel(v,!1);this.log=this.info,this.functions.log=this.log,this.errorHandler=a,a==null||a.setOptions({...o,logFn:this.error}),this.eventLogger=u,u==null||u.setOptions({...o,logger:this});for(const[v,O]of Object.entries(d))this.transports[v]=O(this,o);i.instances[l]=this}static getInstance({logId:n}){return this.instances[n]||this.instances.default}addLevel(n,o=this.levels.length){o!==!1&&this.levels.splice(o,0,n),this[n]=(...a)=>this.logData(a,{level:n}),this.functions[n]=this[n]}catchErrors(n){return this.processMessage({data:["log.catchErrors is deprecated. Use log.errorHandler instead"],level:"warn"},{transports:["console"]}),this.errorHandler.startCatching(n)}create(n){return typeof n=="string"&&(n={logId:n}),new i({dependencies:this.dependencies,errorHandler:this.errorHandler,initializeFn:this.initializeFn,isDev:this.isDev,transportFactories:this.transportFactories,variables:{...this.variables},...n})}compareLevels(n,o,a=this.levels){const u=a.indexOf(n),h=a.indexOf(o);return h===-1||u===-1?!0:h<=u}initialize(n={}){this.initializeFn({logger:this,...this.dependencies,...n})}logData(n,o={}){this.buffering.enabled?this.buffering.addMessage({data:n,date:new Date,...o}):this.processMessage({data:n,...o})}processMessage(n,{transports:o=this.transports}={}){if(n.cmd==="errorHandler"){this.errorHandler.handle(n.error,{errorName:n.errorName,processType:"renderer",showDialog:!!n.showDialog});return}let a=n.level;this.allowUnknownLevel||(a=this.levels.includes(n.level)?n.level:"info");const u={date:new Date,logId:this.logId,...n,level:a,variables:{...this.variables,...n.variables}};for(const[h,c]of this.transportEntries(o))if(!(typeof c!="function"||c.level===!1)&&this.compareLevels(c.level,n.level))try{const f=this.hooks.reduce((l,d)=>l&&d(l,c,h),u);f&&c({...f,data:[...f.data]})}catch(f){this.processInternalErrorFn(f)}}processInternalErrorFn(n){}transportEntries(n=this.transports){return(Array.isArray(n)?n:Object.entries(n)).map(a=>{switch(typeof a){case"string":return this.transports[a]?[a,this.transports[a]]:null;case"function":return[a.name,a];default:return Array.isArray(a)?a:null}}).filter(Boolean)}};ie(i,"instances",{});let r=i;return Fr=r,Fr}var Nr,ro;function ac(){if(ro)return Nr;ro=1;const t=console.error;class e{constructor({logFn:i=null}={}){ie(this,"logFn",null);ie(this,"onError",null);ie(this,"showDialog",!1);ie(this,"preventDefault",!0);this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.startCatching=this.startCatching.bind(this),this.logFn=i}handle(i,{logFn:s=this.logFn,errorName:n="",onError:o=this.onError,showDialog:a=this.showDialog}={}){try{(o==null?void 0:o({error:i,errorName:n,processType:"renderer"}))!==!1&&s({error:i,errorName:n,showDialog:a})}catch{t(i)}}setOptions({logFn:i,onError:s,preventDefault:n,showDialog:o}){typeof i=="function"&&(this.logFn=i),typeof s=="function"&&(this.onError=s),typeof n=="boolean"&&(this.preventDefault=n),typeof o=="boolean"&&(this.showDialog=o)}startCatching({onError:i,showDialog:s}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:i,showDialog:s}),window.addEventListener("error",n=>{var o;this.preventDefault&&((o=n.preventDefault)==null||o.call(n)),this.handleError(n.error||n)}),window.addEventListener("unhandledrejection",n=>{var o;this.preventDefault&&((o=n.preventDefault)==null||o.call(n)),this.handleRejection(n.reason||n)}))}handleError(i){this.handle(i,{errorName:"Unhandled"})}handleRejection(i){const s=i instanceof Error?i:new Error(JSON.stringify(i));this.handle(s,{errorName:"Unhandled rejection"})}}return Nr=e,Nr}var xr,no;function lt(){if(no)return xr;no=1,xr={transform:t};function t({logger:e,message:r,transport:i,initialData:s=(r==null?void 0:r.data)||[],transforms:n=i==null?void 0:i.transforms}){return n.reduce((o,a)=>typeof a=="function"?a({data:o,logger:e,message:r,transport:i}):o,s)}return xr}var Ir,io;function uc(){if(io)return Ir;io=1;const{transform:t}=lt();Ir=r;const e={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};function r(s){return Object.assign(n,{format:"{h}:{i}:{s}.{ms}{scope} › {text}",transforms:[i],writeFn({message:{level:o,data:a}}){const u=e[o]||e.info;setTimeout(()=>u(...a))}});function n(o){n.writeFn({message:{...o,data:t({logger:s,message:o,transport:n})}})}}function i({data:s=[],logger:n={},message:o={},transport:a={}}){if(typeof a.format=="function")return a.format({data:s,level:(o==null?void 0:o.level)||"info",logger:n,message:o,transport:a});if(typeof a.format!="string")return s;s.unshift(a.format),typeof s[1]=="string"&&s[1].match(/%[1cdfiOos]/)&&(s=[`${s[0]}${s[1]}`,...s.slice(2)]);const u=o.date||new Date;return s[0]=s[0].replace(/\{(\w+)}/g,(h,c)=>{var f,l;switch(c){case"level":return o.level;case"logId":return o.logId;case"scope":{const d=o.scope||((f=n.scope)==null?void 0:f.defaultLabel);return d?` (${d})`:""}case"text":return"";case"y":return u.getFullYear().toString(10);case"m":return(u.getMonth()+1).toString(10).padStart(2,"0");case"d":return u.getDate().toString(10).padStart(2,"0");case"h":return u.getHours().toString(10).padStart(2,"0");case"i":return u.getMinutes().toString(10).padStart(2,"0");case"s":return u.getSeconds().toString(10).padStart(2,"0");case"ms":return u.getMilliseconds().toString(10).padStart(3,"0");case"iso":return u.toISOString();default:return((l=o.variables)==null?void 0:l[c])||h}}).trim(),s}return Ir}var Pr,oo;function cc(){if(oo)return Pr;oo=1;const{transform:t}=lt();Pr=r;const e=new Set([Promise,WeakMap,WeakSet]);function r(n){return Object.assign(o,{depth:5,transforms:[s]});function o(a){if(!window.__electronLog){n.processMessage({data:["electron-log: logger isn't initialized in the main process"],level:"error"},{transports:["console"]});return}try{const u=t({initialData:a,logger:n,message:a,transport:o});__electronLog.sendToMain(u)}catch(u){n.transports.console({data:["electronLog.transports.ipc",u,"data:",a.data],level:"error"})}}}function i(n){return Object(n)!==n}function s({data:n,depth:o,seen:a=new WeakSet,transport:u={}}={}){const h=o||u.depth||5;return a.has(n)?"[Circular]":h<1?i(n)?n:Array.isArray(n)?"[Array]":`[${typeof n}]`:["function","symbol"].includes(typeof n)?n.toString():i(n)?n:e.has(n.constructor)?`[${n.constructor.name}]`:Array.isArray(n)?n.map(c=>s({data:c,depth:h-1,seen:a})):n instanceof Date?n.toISOString():n instanceof Error?n.stack:n instanceof Map?new Map(Array.from(n).map(([c,f])=>[s({data:c,depth:h-1,seen:a}),s({data:f,depth:h-1,seen:a})])):n instanceof Set?new Set(Array.from(n).map(c=>s({data:c,depth:h-1,seen:a}))):(a.add(n),Object.fromEntries(Object.entries(n).map(([c,f])=>[c,s({data:f,depth:h-1,seen:a})])))}return Pr}var so;function lc(){return so||(so=1,function(t){const e=ba(),r=ac(),i=uc(),s=cc();t.exports=n(),t.exports.Logger=e,t.exports.default=t.exports;function n(){const o=new e({allowUnknownLevel:!0,errorHandler:new r,initializeFn:()=>{},logId:"default",transportFactories:{console:i,ipc:s},variables:{processType:"renderer"}});return o.errorHandler.setOptions({logFn({error:a,errorName:u,showDialog:h}){o.transports.console({data:[u,a].filter(Boolean),level:"error"}),o.transports.ipc({cmd:"errorHandler",error:{cause:a==null?void 0:a.cause,code:a==null?void 0:a.code,name:a==null?void 0:a.name,message:a==null?void 0:a.message,stack:a==null?void 0:a.stack},errorName:u,logId:o.logId,showDialog:h})}}),typeof window=="object"&&window.addEventListener("message",a=>{const{cmd:u,logId:h,...c}=a.data||{},f=e.getInstance({logId:h});u==="message"&&f.processMessage(c,{transports:["console"]})}),new Proxy(o,{get(a,u){return typeof a[u]<"u"?a[u]:(...h)=>o.logData(h,{level:u})}})}}(Dr)),Dr.exports}var Lr,ao;function fc(){if(ao)return Lr;ao=1;const t=fe,e=ee;Lr={findAndReadPackageJson:r,tryReadJsonAt:i};function r(){return i(o())||i(n())||i(process.resourcesPath,"app.asar")||i(process.resourcesPath,"app")||i(process.cwd())||{name:void 0,version:void 0}}function i(...a){if(a[0])try{const u=e.join(...a),h=s("package.json",u);if(!h)return;const c=JSON.parse(t.readFileSync(h,"utf8")),f=(c==null?void 0:c.productName)||(c==null?void 0:c.name);return!f||f.toLowerCase()==="electron"?void 0:f?{name:f,version:c==null?void 0:c.version}:void 0}catch{return}}function s(a,u){let h=u;for(;;){const c=e.parse(h),f=c.root,l=c.dir;if(t.existsSync(e.join(h,a)))return e.resolve(e.join(h,a));if(h===f)return null;h=l}}function n(){const a=process.argv.filter(h=>h.indexOf("--user-data-dir=")===0);return a.length===0||typeof a[0]!="string"?null:a[0].replace("--user-data-dir=","")}function o(){var a;try{return(a=require.main)==null?void 0:a.filename}catch{return}}return Lr}var Mr,uo;function Sa(){if(uo)return Mr;uo=1;const t=or,e=it,r=ee,i=fc();class s{constructor(){ie(this,"appName");ie(this,"appPackageJson");ie(this,"platform",process.platform)}getAppLogPath(o=this.getAppName()){return this.platform==="darwin"?r.join(this.getSystemPathHome(),"Library/Logs",o):r.join(this.getAppUserDataPath(o),"logs")}getAppName(){var a;const o=this.appName||((a=this.getAppPackageJson())==null?void 0:a.name);if(!o)throw new Error("electron-log can't determine the app name. It tried these methods:\n1. Use `electron.app.name`\n2. Use productName or name from the nearest package.json`\nYou can also set it through log.transports.file.setAppName()");return o}getAppPackageJson(){return typeof this.appPackageJson!="object"&&(this.appPackageJson=i.findAndReadPackageJson()),this.appPackageJson}getAppUserDataPath(o=this.getAppName()){return o?r.join(this.getSystemPathAppData(),o):void 0}getAppVersion(){var o;return(o=this.getAppPackageJson())==null?void 0:o.version}getElectronLogPath(){return this.getAppLogPath()}getMacOsVersion(){const o=Number(e.release().split(".")[0]);return o<=19?`10.${o-4}`:o-9}getOsVersion(){let o=e.type().replace("_"," "),a=e.release();return o==="Darwin"&&(o="macOS",a=this.getMacOsVersion()),`${o} ${a}`}getPathVariables(){const o=this.getAppName(),a=this.getAppVersion(),u=this;return{appData:this.getSystemPathAppData(),appName:o,appVersion:a,get electronDefaultDir(){return u.getElectronLogPath()},home:this.getSystemPathHome(),libraryDefaultDir:this.getAppLogPath(o),libraryTemplate:this.getAppLogPath("{appName}"),temp:this.getSystemPathTemp(),userData:this.getAppUserDataPath(o)}}getSystemPathAppData(){const o=this.getSystemPathHome();switch(this.platform){case"darwin":return r.join(o,"Library/Application Support");case"win32":return process.env.APPDATA||r.join(o,"AppData/Roaming");default:return process.env.XDG_CONFIG_HOME||r.join(o,".config")}}getSystemPathHome(){var o;return((o=e.homedir)==null?void 0:o.call(e))||process.env.HOME}getSystemPathTemp(){return e.tmpdir()}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:void 0,os:this.getOsVersion()}}isDev(){return process.env.NODE_ENV==="development"||process.env.ELECTRON_IS_DEV==="1"}isElectron(){return!!process.versions.electron}onAppEvent(o,a){}onAppReady(o){o()}onEveryWebContentsEvent(o,a){}onIpc(o,a){}onIpcInvoke(o,a){}openUrl(o,a=console.error){const h={darwin:"open",win32:"start",linux:"xdg-open"}[process.platform]||"xdg-open";t.exec(`${h} ${o}`,{},c=>{c&&a(c)})}setAppName(o){this.appName=o}setPlatform(o){this.platform=o}setPreloadFileForSessions({filePath:o,includeFutureSession:a=!0,getSessions:u=()=>[]}){}sendIpc(o,a){}showErrorBox(o,a){}}return Mr=s,Mr}var $r,co;function hc(){if(co)return $r;co=1;const t=ee,e=Sa();class r extends e{constructor({electron:n}={}){super();ie(this,"electron");this.electron=n}getAppName(){var o,a;let n;try{n=this.appName||((o=this.electron.app)==null?void 0:o.name)||((a=this.electron.app)==null?void 0:a.getName())}catch{}return n||super.getAppName()}getAppUserDataPath(n){return this.getPath("userData")||super.getAppUserDataPath(n)}getAppVersion(){var o;let n;try{n=(o=this.electron.app)==null?void 0:o.getVersion()}catch{}return n||super.getAppVersion()}getElectronLogPath(){return this.getPath("logs")||super.getElectronLogPath()}getPath(n){var o;try{return(o=this.electron.app)==null?void 0:o.getPath(n)}catch{return}}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:`Electron ${process.versions.electron}`,os:this.getOsVersion()}}getSystemPathAppData(){return this.getPath("appData")||super.getSystemPathAppData()}isDev(){var n;return((n=this.electron.app)==null?void 0:n.isPackaged)!==void 0?!this.electron.app.isPackaged:typeof process.execPath=="string"?t.basename(process.execPath).toLowerCase().startsWith("electron"):super.isDev()}onAppEvent(n,o){var a;return(a=this.electron.app)==null||a.on(n,o),()=>{var u;(u=this.electron.app)==null||u.off(n,o)}}onAppReady(n){var o,a,u;(o=this.electron.app)!=null&&o.isReady()?n():(a=this.electron.app)!=null&&a.once?(u=this.electron.app)==null||u.once("ready",n):n()}onEveryWebContentsEvent(n,o){var u,h,c;return(h=(u=this.electron.webContents)==null?void 0:u.getAllWebContents())==null||h.forEach(f=>{f.on(n,o)}),(c=this.electron.app)==null||c.on("web-contents-created",a),()=>{var f,l;(f=this.electron.webContents)==null||f.getAllWebContents().forEach(d=>{d.off(n,o)}),(l=this.electron.app)==null||l.off("web-contents-created",a)};function a(f,l){l.on(n,o)}}onIpc(n,o){var a;(a=this.electron.ipcMain)==null||a.on(n,o)}onIpcInvoke(n,o){var a,u;(u=(a=this.electron.ipcMain)==null?void 0:a.handle)==null||u.call(a,n,o)}openUrl(n,o=console.error){var a;(a=this.electron.shell)==null||a.openExternal(n).catch(o)}setPreloadFileForSessions({filePath:n,includeFutureSession:o=!0,getSessions:a=()=>{var u;return[(u=this.electron.session)==null?void 0:u.defaultSession]}}){for(const h of a().filter(Boolean))u(h);o&&this.onAppEvent("session-created",h=>{u(h)});function u(h){typeof h.registerPreloadScript=="function"?h.registerPreloadScript({filePath:n,id:"electron-log-preload",type:"frame"}):h.setPreloads([...h.getPreloads(),n])}}sendIpc(n,o){var a,u;(u=(a=this.electron.BrowserWindow)==null?void 0:a.getAllWindows())==null||u.forEach(h=>{var c,f;((c=h.webContents)==null?void 0:c.isDestroyed())===!1&&((f=h.webContents)==null?void 0:f.isCrashed())===!1&&h.webContents.send(n,o)})}showErrorBox(n,o){var a;(a=this.electron.dialog)==null||a.showErrorBox(n,o)}}return $r=r,$r}var Rr,lo;function pc(){if(lo)return Rr;lo=1;const t=fe,e=it,r=ee,i=Ea();Rr={initialize({externalApi:o,getSessions:a,includeFutureSession:u,logger:h,preload:c=!0,spyRendererConsole:f=!1}){o.onAppReady(()=>{try{c&&s({externalApi:o,getSessions:a,includeFutureSession:u,preloadOption:c}),f&&n({externalApi:o,logger:h})}catch(l){h.warn(l)}})}};function s({externalApi:o,getSessions:a,includeFutureSession:u,preloadOption:h}){let c=typeof h=="string"?h:void 0;try{c=r.resolve(__dirname,"../renderer/electron-log-preload.js")}catch{}if(!c||!t.existsSync(c)){c=r.join(o.getAppUserDataPath()||e.tmpdir(),"electron-log-preload.js");const f=`
      try {
        (${i.toString()})(require('electron'));
      } catch(e) {
        console.error(e);
      }
    `;t.writeFileSync(c,f,"utf8")}o.setPreloadFileForSessions({filePath:c,includeFutureSession:u,getSessions:a})}function n({externalApi:o,logger:a}){const u=["debug","info","warn","error"];o.onEveryWebContentsEvent("console-message",(h,c,f)=>{a.processMessage({data:[f],level:u[c],variables:{processType:"renderer"}})})}return Rr}var kr,fo;function dc(){if(fo)return kr;fo=1;class t{constructor({externalApi:i,logFn:s=void 0,onError:n=void 0,showDialog:o=void 0}={}){ie(this,"externalApi");ie(this,"isActive",!1);ie(this,"logFn");ie(this,"onError");ie(this,"showDialog",!0);this.createIssue=this.createIssue.bind(this),this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.setOptions({externalApi:i,logFn:s,onError:n,showDialog:o}),this.startCatching=this.startCatching.bind(this),this.stopCatching=this.stopCatching.bind(this)}handle(i,{logFn:s=this.logFn,onError:n=this.onError,processType:o="browser",showDialog:a=this.showDialog,errorName:u=""}={}){var h;i=e(i);try{if(typeof n=="function"){const c=((h=this.externalApi)==null?void 0:h.getVersions())||{},f=this.createIssue;if(n({createIssue:f,error:i,errorName:u,processType:o,versions:c})===!1)return}u?s(u,i):s(i),a&&!u.includes("rejection")&&this.externalApi&&this.externalApi.showErrorBox(`A JavaScript error occurred in the ${o} process`,i.stack)}catch{console.error(i)}}setOptions({externalApi:i,logFn:s,onError:n,showDialog:o}){typeof i=="object"&&(this.externalApi=i),typeof s=="function"&&(this.logFn=s),typeof n=="function"&&(this.onError=n),typeof o=="boolean"&&(this.showDialog=o)}startCatching({onError:i,showDialog:s}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:i,showDialog:s}),process.on("uncaughtException",this.handleError),process.on("unhandledRejection",this.handleRejection))}stopCatching(){this.isActive=!1,process.removeListener("uncaughtException",this.handleError),process.removeListener("unhandledRejection",this.handleRejection)}createIssue(i,s){var n;(n=this.externalApi)==null||n.openUrl(`${i}?${new URLSearchParams(s).toString()}`)}handleError(i){this.handle(i,{errorName:"Unhandled"})}handleRejection(i){const s=i instanceof Error?i:new Error(JSON.stringify(i));this.handle(s,{errorName:"Unhandled rejection"})}}function e(r){if(r instanceof Error)return r;if(r&&typeof r=="object"){if(r.message)return Object.assign(new Error(r.message),r);try{return new Error(JSON.stringify(r))}catch(i){return new Error(`Couldn't normalize error ${String(r)}: ${i}`)}}return new Error(`Can't normalize error ${String(r)}`)}return kr=t,kr}var jr,ho;function mc(){if(ho)return jr;ho=1;class t{constructor(r={}){ie(this,"disposers",[]);ie(this,"format","{eventSource}#{eventName}:");ie(this,"formatters",{app:{"certificate-error":({args:r})=>this.arrayToObject(r.slice(1,4),["url","error","certificate"]),"child-process-gone":({args:r})=>r.length===1?r[0]:r,"render-process-gone":({args:[r,i]})=>i&&typeof i=="object"?{...i,...this.getWebContentsDetails(r)}:[]},webContents:{"console-message":({args:[r,i,s,n]})=>{if(!(r<3))return{message:i,source:`${n}:${s}`}},"did-fail-load":({args:r})=>this.arrayToObject(r,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"did-fail-provisional-load":({args:r})=>this.arrayToObject(r,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"plugin-crashed":({args:r})=>this.arrayToObject(r,["name","version"]),"preload-error":({args:r})=>this.arrayToObject(r,["preloadPath","error"])}});ie(this,"events",{app:{"certificate-error":!0,"child-process-gone":!0,"render-process-gone":!0},webContents:{"did-fail-load":!0,"did-fail-provisional-load":!0,"plugin-crashed":!0,"preload-error":!0,unresponsive:!0}});ie(this,"externalApi");ie(this,"level","error");ie(this,"scope","");this.setOptions(r)}setOptions({events:r,externalApi:i,level:s,logger:n,format:o,formatters:a,scope:u}){typeof r=="object"&&(this.events=r),typeof i=="object"&&(this.externalApi=i),typeof s=="string"&&(this.level=s),typeof n=="object"&&(this.logger=n),(typeof o=="string"||typeof o=="function")&&(this.format=o),typeof a=="object"&&(this.formatters=a),typeof u=="string"&&(this.scope=u)}startLogging(r={}){this.setOptions(r),this.disposeListeners();for(const i of this.getEventNames(this.events.app))this.disposers.push(this.externalApi.onAppEvent(i,(...s)=>{this.handleEvent({eventSource:"app",eventName:i,handlerArgs:s})}));for(const i of this.getEventNames(this.events.webContents))this.disposers.push(this.externalApi.onEveryWebContentsEvent(i,(...s)=>{this.handleEvent({eventSource:"webContents",eventName:i,handlerArgs:s})}))}stopLogging(){this.disposeListeners()}arrayToObject(r,i){const s={};return i.forEach((n,o)=>{s[n]=r[o]}),r.length>i.length&&(s.unknownArgs=r.slice(i.length)),s}disposeListeners(){this.disposers.forEach(r=>r()),this.disposers=[]}formatEventLog({eventName:r,eventSource:i,handlerArgs:s}){var f;const[n,...o]=s;if(typeof this.format=="function")return this.format({args:o,event:n,eventName:r,eventSource:i});const a=(f=this.formatters[i])==null?void 0:f[r];let u=o;if(typeof a=="function"&&(u=a({args:o,event:n,eventName:r,eventSource:i})),!u)return;const h={};return Array.isArray(u)?h.args=u:typeof u=="object"&&Object.assign(h,u),i==="webContents"&&Object.assign(h,this.getWebContentsDetails(n==null?void 0:n.sender)),[this.format.replace("{eventSource}",i==="app"?"App":"WebContents").replace("{eventName}",r),h]}getEventNames(r){return!r||typeof r!="object"?[]:Object.entries(r).filter(([i,s])=>s).map(([i])=>i)}getWebContentsDetails(r){if(!(r!=null&&r.loadURL))return{};try{return{webContents:{id:r.id,url:r.getURL()}}}catch{return{}}}handleEvent({eventName:r,eventSource:i,handlerArgs:s}){var o;const n=this.formatEventLog({eventName:r,eventSource:i,handlerArgs:s});if(n){const a=this.scope?this.logger.scope(this.scope):this.logger;(o=a==null?void 0:a[this.level])==null||o.call(a,...n)}}}return jr=t,jr}var qr,po;function Oa(){if(po)return qr;po=1;const{transform:t}=lt();qr={concatFirstStringElements:e,formatScope:i,formatText:n,formatVariables:s,timeZoneFromOffset:r,format({message:o,logger:a,transport:u,data:h=o==null?void 0:o.data}){switch(typeof u.format){case"string":return t({message:o,logger:a,transforms:[s,i,n],transport:u,initialData:[u.format,...h]});case"function":return u.format({data:h,level:(o==null?void 0:o.level)||"info",logger:a,message:o,transport:u});default:return h}}};function e({data:o}){return typeof o[0]!="string"||typeof o[1]!="string"||o[0].match(/%[1cdfiOos]/)?o:[`${o[0]} ${o[1]}`,...o.slice(2)]}function r(o){const a=Math.abs(o),u=o>0?"-":"+",h=Math.floor(a/60).toString().padStart(2,"0"),c=(a%60).toString().padStart(2,"0");return`${u}${h}:${c}`}function i({data:o,logger:a,message:u}){const{defaultLabel:h,labelLength:c}=(a==null?void 0:a.scope)||{},f=o[0];let l=u.scope;l||(l=h);let d;return l===""?d=c>0?"".padEnd(c+3):"":typeof l=="string"?d=` (${l})`.padEnd(c+3):d="",o[0]=f.replace("{scope}",d),o}function s({data:o,message:a}){let u=o[0];if(typeof u!="string")return o;u=u.replace("{level}]",`${a.level}]`.padEnd(6," "));const h=a.date||new Date;return o[0]=u.replace(/\{(\w+)}/g,(c,f)=>{var l;switch(f){case"level":return a.level||"info";case"logId":return a.logId;case"y":return h.getFullYear().toString(10);case"m":return(h.getMonth()+1).toString(10).padStart(2,"0");case"d":return h.getDate().toString(10).padStart(2,"0");case"h":return h.getHours().toString(10).padStart(2,"0");case"i":return h.getMinutes().toString(10).padStart(2,"0");case"s":return h.getSeconds().toString(10).padStart(2,"0");case"ms":return h.getMilliseconds().toString(10).padStart(3,"0");case"z":return r(h.getTimezoneOffset());case"iso":return h.toISOString();default:return((l=a.variables)==null?void 0:l[f])||c}}).trim(),o}function n({data:o}){const a=o[0];if(typeof a!="string")return o;if(a.lastIndexOf("{text}")===a.length-6)return o[0]=a.replace(/\s?{text}/,""),o[0]===""&&o.shift(),o;const h=a.split("{text}");let c=[];return h[0]!==""&&c.push(h[0]),c=c.concat(o.slice(1)),h[1]!==""&&c.push(h[1]),c}return qr}var Br={exports:{}},mo;function cr(){return mo||(mo=1,function(t){const e=Mt;t.exports={serialize:i,maxDepth({data:s,transport:n,depth:o=(n==null?void 0:n.depth)??6}){if(!s)return s;if(o<1)return Array.isArray(s)?"[array]":typeof s=="object"&&s?"[object]":s;if(Array.isArray(s))return s.map(u=>t.exports.maxDepth({data:u,depth:o-1}));if(typeof s!="object"||s&&typeof s.toISOString=="function")return s;if(s===null)return null;if(s instanceof Error)return s;const a={};for(const u in s)Object.prototype.hasOwnProperty.call(s,u)&&(a[u]=t.exports.maxDepth({data:s[u],depth:o-1}));return a},toJSON({data:s}){return JSON.parse(JSON.stringify(s,r()))},toString({data:s,transport:n}){const o=(n==null?void 0:n.inspectOptions)||{},a=s.map(u=>{if(u!==void 0)try{const h=JSON.stringify(u,r(),"  ");return h===void 0?void 0:JSON.parse(h)}catch{return u}});return e.formatWithOptions(o,...a)}};function r(s={}){const n=new WeakSet;return function(o,a){if(typeof a=="object"&&a!==null){if(n.has(a))return;n.add(a)}return i(o,a,s)}}function i(s,n,o={}){const a=(o==null?void 0:o.serializeMapAndSet)!==!1;return n instanceof Error?n.stack:n&&(typeof n=="function"?`[function] ${n.toString()}`:n instanceof Date?n.toISOString():a&&n instanceof Map&&Object.fromEntries?Object.fromEntries(n):a&&n instanceof Set&&Array.from?Array.from(n):n)}}(Br)),Br.exports}var Ur,yo;function Ti(){if(yo)return Ur;yo=1,Ur={transformStyles:i,applyAnsiStyles({data:s}){return i(s,e,r)},removeStyles({data:s}){return i(s,()=>"")}};const t={unset:"\x1B[0m",black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"};function e(s){const n=s.replace(/color:\s*(\w+).*/,"$1").toLowerCase();return t[n]||""}function r(s){return s+t.unset}function i(s,n,o){const a={};return s.reduce((u,h,c,f)=>{if(a[c])return u;if(typeof h=="string"){let l=c,d=!1;h=h.replace(/%[1cdfiOos]/g,y=>{if(l+=1,y!=="%c")return y;const v=f[l];return typeof v=="string"?(a[l]=!0,d=!0,n(v,h)):y}),d&&o&&(h=o(h))}return u.push(h),u},[])}return Ur}var Xr,go;function yc(){if(go)return Xr;go=1;const{concatFirstStringElements:t,format:e}=Oa(),{maxDepth:r,toJSON:i}=cr(),{applyAnsiStyles:s,removeStyles:n}=Ti(),{transform:o}=lt(),a={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};Xr=c;const h=`%c{h}:{i}:{s}.{ms}{scope}%c ${process.platform==="win32"?">":"›"} {text}`;Object.assign(c,{DEFAULT_FORMAT:h});function c(v){return Object.assign(O,{format:h,level:"silly",transforms:[f,e,d,t,r,i],useStyles:process.env.FORCE_STYLES,writeFn({message:N}){(a[N.level]||a.info)(...N.data)}});function O(N){const E=o({logger:v,message:N,transport:O});O.writeFn({message:{...N,data:E}})}}function f({data:v,message:O,transport:N}){return typeof N.format!="string"||!N.format.includes("%c")?v:[`color:${y(O.level)}`,"color:unset",...v]}function l(v,O){if(typeof v=="boolean")return v;const E=O==="error"||O==="warn"?process.stderr:process.stdout;return E&&E.isTTY}function d(v){const{message:O,transport:N}=v;return(l(N.useStyles,O.level)?s:n)(v)}function y(v){const O={error:"red",warn:"yellow",info:"cyan",default:"unset"};return O[v]||O.default}return Xr}var Vr,vo;function Ta(){if(vo)return Vr;vo=1;const t=ct,e=fe,r=it;class i extends t{constructor({path:a,writeOptions:u={encoding:"utf8",flag:"a",mode:438},writeAsync:h=!1}){super();ie(this,"asyncWriteQueue",[]);ie(this,"bytesWritten",0);ie(this,"hasActiveAsyncWriting",!1);ie(this,"path",null);ie(this,"initialSize");ie(this,"writeOptions",null);ie(this,"writeAsync",!1);this.path=a,this.writeOptions=u,this.writeAsync=h}get size(){return this.getSize()}clear(){try{return e.writeFileSync(this.path,"",{mode:this.writeOptions.mode,flag:"w"}),this.reset(),!0}catch(a){return a.code==="ENOENT"?!0:(this.emit("error",a,this),!1)}}crop(a){try{const u=s(this.path,a||4096);this.clear(),this.writeLine(`[log cropped]${r.EOL}${u}`)}catch(u){this.emit("error",new Error(`Couldn't crop file ${this.path}. ${u.message}`),this)}}getSize(){if(this.initialSize===void 0)try{const a=e.statSync(this.path);this.initialSize=a.size}catch{this.initialSize=0}return this.initialSize+this.bytesWritten}increaseBytesWrittenCounter(a){this.bytesWritten+=Buffer.byteLength(a,this.writeOptions.encoding)}isNull(){return!1}nextAsyncWrite(){const a=this;if(this.hasActiveAsyncWriting||this.asyncWriteQueue.length===0)return;const u=this.asyncWriteQueue.join("");this.asyncWriteQueue=[],this.hasActiveAsyncWriting=!0,e.writeFile(this.path,u,this.writeOptions,h=>{a.hasActiveAsyncWriting=!1,h?a.emit("error",new Error(`Couldn't write to ${a.path}. ${h.message}`),this):a.increaseBytesWrittenCounter(u),a.nextAsyncWrite()})}reset(){this.initialSize=void 0,this.bytesWritten=0}toString(){return this.path}writeLine(a){if(a+=r.EOL,this.writeAsync){this.asyncWriteQueue.push(a),this.nextAsyncWrite();return}try{e.writeFileSync(this.path,a,this.writeOptions),this.increaseBytesWrittenCounter(a)}catch(u){this.emit("error",new Error(`Couldn't write to ${this.path}. ${u.message}`),this)}}}Vr=i;function s(n,o){const a=Buffer.alloc(o),u=e.statSync(n),h=Math.min(u.size,o),c=Math.max(0,u.size-o),f=e.openSync(n,"r"),l=e.readSync(f,a,0,h,c);return e.closeSync(f),a.toString("utf8",0,l)}return Vr}var zr,wo;function gc(){if(wo)return zr;wo=1;const t=Ta();class e extends t{clear(){}crop(){}getSize(){return 0}isNull(){return!0}writeLine(){}}return zr=e,zr}var Wr,Eo;function vc(){if(Eo)return Wr;Eo=1;const t=ct,e=fe,r=ee,i=Ta(),s=gc();class n extends t{constructor(){super();ie(this,"store",{});this.emitError=this.emitError.bind(this)}provide({filePath:u,writeOptions:h={},writeAsync:c=!1}){let f;try{if(u=r.resolve(u),this.store[u])return this.store[u];f=this.createFile({filePath:u,writeOptions:h,writeAsync:c})}catch(l){f=new s({path:u}),this.emitError(l,f)}return f.on("error",this.emitError),this.store[u]=f,f}createFile({filePath:u,writeOptions:h,writeAsync:c}){return this.testFileWriting({filePath:u,writeOptions:h}),new i({path:u,writeOptions:h,writeAsync:c})}emitError(u,h){this.emit("error",u,h)}testFileWriting({filePath:u,writeOptions:h}){e.mkdirSync(r.dirname(u),{recursive:!0}),e.writeFileSync(u,"",{flag:"a",mode:h.mode})}}return Wr=n,Wr}var Hr,bo;function wc(){if(bo)return Hr;bo=1;const t=fe,e=it,r=ee,i=vc(),{transform:s}=lt(),{removeStyles:n}=Ti(),{format:o,concatFirstStringElements:a}=Oa(),{toString:u}=cr();Hr=c;const h=new i;function c(l,{registry:d=h,externalApi:y}={}){let v;return d.listenerCount("error")<1&&d.on("error",(_,w)=>{E(`Can't write to ${w}`,_)}),Object.assign(O,{fileName:f(l.variables.processType),format:"[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}]{scope} {text}",getFile:g,inspectOptions:{depth:5},level:"silly",maxSize:1024**2,readAllLogs:D,sync:!0,transforms:[n,o,a,u],writeOptions:{flag:"a",mode:438,encoding:"utf8"},archiveLogFn(_){const w=_.toString(),C=r.parse(w);try{t.renameSync(w,r.join(C.dir,`${C.name}.old${C.ext}`))}catch(T){E("Could not rotate log",T);const p=Math.round(O.maxSize/4);_.crop(Math.min(p,256*1024))}},resolvePathFn(_){return r.join(_.libraryDefaultDir,_.fileName)},setAppName(_){l.dependencies.externalApi.setAppName(_)}});function O(_){const w=g(_);O.maxSize>0&&w.size>O.maxSize&&(O.archiveLogFn(w),w.reset());const T=s({logger:l,message:_,transport:O});w.writeLine(T)}function N(){v||(v=Object.create(Object.prototype,{...Object.getOwnPropertyDescriptors(y.getPathVariables()),fileName:{get(){return O.fileName},enumerable:!0}}),typeof O.archiveLog=="function"&&(O.archiveLogFn=O.archiveLog,E("archiveLog is deprecated. Use archiveLogFn instead")),typeof O.resolvePath=="function"&&(O.resolvePathFn=O.resolvePath,E("resolvePath is deprecated. Use resolvePathFn instead")))}function E(_,w=null,C="error"){const T=[`electron-log.transports.file: ${_}`];w&&T.push(w),l.transports.console({data:T,date:new Date,level:C})}function g(_){N();const w=O.resolvePathFn(v,_);return d.provide({filePath:w,writeAsync:!O.sync,writeOptions:O.writeOptions})}function D({fileFilter:_=w=>w.endsWith(".log")}={}){N();const w=r.dirname(O.resolvePathFn(v));return t.existsSync(w)?t.readdirSync(w).map(C=>r.join(w,C)).filter(_).map(C=>{try{return{path:C,lines:t.readFileSync(C,"utf8").split(e.EOL)}}catch{return null}}).filter(Boolean):[]}}function f(l=process.type){switch(l){case"renderer":return"renderer.log";case"worker":return"worker.log";default:return"main.log"}}return Hr}var Gr,So;function Ec(){if(So)return Gr;So=1;const{maxDepth:t,toJSON:e}=cr(),{transform:r}=lt();Gr=i;function i(s,{externalApi:n}){return Object.assign(o,{depth:3,eventId:"__ELECTRON_LOG_IPC__",level:s.isDev?"silly":!1,transforms:[e,t]}),n!=null&&n.isElectron()?o:void 0;function o(a){var u;((u=a==null?void 0:a.variables)==null?void 0:u.processType)!=="renderer"&&(n==null||n.sendIpc(o.eventId,{...a,data:r({logger:s,message:a,transport:o})}))}}return Gr}var Yr,Oo;function bc(){if(Oo)return Yr;Oo=1;const t=sr,e=ar,{transform:r}=lt(),{removeStyles:i}=Ti(),{toJSON:s,maxDepth:n}=cr();Yr=o;function o(a){return Object.assign(u,{client:{name:"electron-application"},depth:6,level:!1,requestOptions:{},transforms:[i,s,n],makeBodyFn({message:h}){return JSON.stringify({client:u.client,data:h.data,date:h.date.getTime(),level:h.level,scope:h.scope,variables:h.variables})},processErrorFn({error:h}){a.processMessage({data:[`electron-log: can't POST ${u.url}`,h],level:"warn"},{transports:["console","file"]})},sendRequestFn({serverUrl:h,requestOptions:c,body:f}){const d=(h.startsWith("https:")?e:t).request(h,{method:"POST",...c,headers:{"Content-Type":"application/json","Content-Length":f.length,...c.headers}});return d.write(f),d.end(),d}});function u(h){if(!u.url)return;const c=u.makeBodyFn({logger:a,message:{...h,data:r({logger:a,message:h,transport:u})},transport:u}),f=u.sendRequestFn({serverUrl:u.url,requestOptions:u.requestOptions,body:Buffer.from(c,"utf8")});f.on("error",l=>u.processErrorFn({error:l,logger:a,message:h,request:f,transport:u}))}}return Yr}var Kr,To;function Ca(){if(To)return Kr;To=1;const t=ba(),e=dc(),r=mc(),i=yc(),s=wc(),n=Ec(),o=bc();Kr=a;function a({dependencies:u,initializeFn:h}){var f;const c=new t({dependencies:u,errorHandler:new e,eventLogger:new r,initializeFn:h,isDev:(f=u.externalApi)==null?void 0:f.isDev(),logId:"default",transportFactories:{console:i,file:s,ipc:n,remote:o},variables:{processType:"main"}});return c.default=c,c.Logger=t,c.processInternalErrorFn=l=>{c.transports.console.writeFn({message:{data:["Unhandled electron-log error",l],level:"error"}})},c}return Kr}var Jr,Co;function Sc(){if(Co)return Jr;Co=1;const t=oe,e=hc(),{initialize:r}=pc(),i=Ca(),s=new e({electron:t}),n=i({dependencies:{externalApi:s},initializeFn:r});Jr=n,s.onIpc("__ELECTRON_LOG__",(a,u)=>{u.scope&&n.Logger.getInstance(u).scope(u.scope);const h=new Date(u.date);o({...u,date:h.getTime()?h:new Date})}),s.onIpcInvoke("__ELECTRON_LOG__",(a,{cmd:u="",logId:h})=>{switch(u){case"getOptions":return{levels:n.Logger.getInstance({logId:h}).levels,logId:h};default:return o({data:[`Unknown cmd '${u}'`],level:"error"}),{}}});function o(a){var u;(u=n.Logger.getInstance(a))==null||u.processMessage(a)}return Jr}var Qr,Do;function Oc(){if(Do)return Qr;Do=1;const t=Sa(),e=Ca(),r=new t;return Qr=e({dependencies:{externalApi:r}}),Qr}const Tc=typeof process>"u"||process.type==="renderer"||process.type==="worker",Cc=typeof process=="object"&&process.type==="browser";Tc?(Ea(),Zt.exports=lc()):Cc?Zt.exports=Sc():Zt.exports=Oc();var Dc=Zt.exports;const ue=gt(Dc);var qt,_c=new Uint8Array(16);function Da(){if(!qt&&(qt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!qt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return qt(_c)}const Ac=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function lr(t){return typeof t=="string"&&Ac.test(t)}var Se=[];for(var Zr=0;Zr<256;++Zr)Se.push((Zr+256).toString(16).substr(1));function fr(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Se[t[e+0]]+Se[t[e+1]]+Se[t[e+2]]+Se[t[e+3]]+"-"+Se[t[e+4]]+Se[t[e+5]]+"-"+Se[t[e+6]]+Se[t[e+7]]+"-"+Se[t[e+8]]+Se[t[e+9]]+"-"+Se[t[e+10]]+Se[t[e+11]]+Se[t[e+12]]+Se[t[e+13]]+Se[t[e+14]]+Se[t[e+15]]).toLowerCase();if(!lr(r))throw TypeError("Stringified UUID is invalid");return r}var _o,en,tn=0,rn=0;function Fc(t,e,r){var i=e&&r||0,s=e||new Array(16);t=t||{};var n=t.node||_o,o=t.clockseq!==void 0?t.clockseq:en;if(n==null||o==null){var a=t.random||(t.rng||Da)();n==null&&(n=_o=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=en=(a[6]<<8|a[7])&16383)}var u=t.msecs!==void 0?t.msecs:Date.now(),h=t.nsecs!==void 0?t.nsecs:rn+1,c=u-tn+(h-rn)/1e4;if(c<0&&t.clockseq===void 0&&(o=o+1&16383),(c<0||u>tn)&&t.nsecs===void 0&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");tn=u,rn=h,en=o,u+=122192928e5;var f=((u&268435455)*1e4+h)%4294967296;s[i++]=f>>>24&255,s[i++]=f>>>16&255,s[i++]=f>>>8&255,s[i++]=f&255;var l=u/4294967296*1e4&268435455;s[i++]=l>>>8&255,s[i++]=l&255,s[i++]=l>>>24&15|16,s[i++]=l>>>16&255,s[i++]=o>>>8|128,s[i++]=o&255;for(var d=0;d<6;++d)s[i+d]=n[d];return e||fr(s)}function _a(t){if(!lr(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function Nc(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var xc="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Ic="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Aa(t,e,r){function i(s,n,o,a){if(typeof s=="string"&&(s=Nc(s)),typeof n=="string"&&(n=_a(n)),n.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+s.length);if(u.set(n),u.set(s,n.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(var h=0;h<16;++h)o[a+h]=u[h];return o}return fr(u)}try{i.name=t}catch{}return i.DNS=xc,i.URL=Ic,i}function Pc(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return Lc(Mc($c(t),t.length*8))}function Lc(t){for(var e=[],r=t.length*32,i="0123456789abcdef",s=0;s<r;s+=8){var n=t[s>>5]>>>s%32&255,o=parseInt(i.charAt(n>>>4&15)+i.charAt(n&15),16);e.push(o)}return e}function Fa(t){return(t+64>>>9<<4)+14+1}function Mc(t,e){t[e>>5]|=128<<e%32,t[Fa(e)-1]=e;for(var r=1732584193,i=-271733879,s=-1732584194,n=271733878,o=0;o<t.length;o+=16){var a=r,u=i,h=s,c=n;r=Ce(r,i,s,n,t[o],7,-680876936),n=Ce(n,r,i,s,t[o+1],12,-389564586),s=Ce(s,n,r,i,t[o+2],17,606105819),i=Ce(i,s,n,r,t[o+3],22,-1044525330),r=Ce(r,i,s,n,t[o+4],7,-176418897),n=Ce(n,r,i,s,t[o+5],12,1200080426),s=Ce(s,n,r,i,t[o+6],17,-1473231341),i=Ce(i,s,n,r,t[o+7],22,-45705983),r=Ce(r,i,s,n,t[o+8],7,1770035416),n=Ce(n,r,i,s,t[o+9],12,-1958414417),s=Ce(s,n,r,i,t[o+10],17,-42063),i=Ce(i,s,n,r,t[o+11],22,-1990404162),r=Ce(r,i,s,n,t[o+12],7,1804603682),n=Ce(n,r,i,s,t[o+13],12,-40341101),s=Ce(s,n,r,i,t[o+14],17,-1502002290),i=Ce(i,s,n,r,t[o+15],22,1236535329),r=De(r,i,s,n,t[o+1],5,-165796510),n=De(n,r,i,s,t[o+6],9,-1069501632),s=De(s,n,r,i,t[o+11],14,643717713),i=De(i,s,n,r,t[o],20,-373897302),r=De(r,i,s,n,t[o+5],5,-701558691),n=De(n,r,i,s,t[o+10],9,38016083),s=De(s,n,r,i,t[o+15],14,-660478335),i=De(i,s,n,r,t[o+4],20,-405537848),r=De(r,i,s,n,t[o+9],5,568446438),n=De(n,r,i,s,t[o+14],9,-1019803690),s=De(s,n,r,i,t[o+3],14,-187363961),i=De(i,s,n,r,t[o+8],20,1163531501),r=De(r,i,s,n,t[o+13],5,-1444681467),n=De(n,r,i,s,t[o+2],9,-51403784),s=De(s,n,r,i,t[o+7],14,1735328473),i=De(i,s,n,r,t[o+12],20,-1926607734),r=_e(r,i,s,n,t[o+5],4,-378558),n=_e(n,r,i,s,t[o+8],11,-2022574463),s=_e(s,n,r,i,t[o+11],16,1839030562),i=_e(i,s,n,r,t[o+14],23,-35309556),r=_e(r,i,s,n,t[o+1],4,-1530992060),n=_e(n,r,i,s,t[o+4],11,1272893353),s=_e(s,n,r,i,t[o+7],16,-155497632),i=_e(i,s,n,r,t[o+10],23,-1094730640),r=_e(r,i,s,n,t[o+13],4,681279174),n=_e(n,r,i,s,t[o],11,-358537222),s=_e(s,n,r,i,t[o+3],16,-722521979),i=_e(i,s,n,r,t[o+6],23,76029189),r=_e(r,i,s,n,t[o+9],4,-640364487),n=_e(n,r,i,s,t[o+12],11,-421815835),s=_e(s,n,r,i,t[o+15],16,530742520),i=_e(i,s,n,r,t[o+2],23,-995338651),r=Ae(r,i,s,n,t[o],6,-198630844),n=Ae(n,r,i,s,t[o+7],10,1126891415),s=Ae(s,n,r,i,t[o+14],15,-1416354905),i=Ae(i,s,n,r,t[o+5],21,-57434055),r=Ae(r,i,s,n,t[o+12],6,1700485571),n=Ae(n,r,i,s,t[o+3],10,-1894986606),s=Ae(s,n,r,i,t[o+10],15,-1051523),i=Ae(i,s,n,r,t[o+1],21,-2054922799),r=Ae(r,i,s,n,t[o+8],6,1873313359),n=Ae(n,r,i,s,t[o+15],10,-30611744),s=Ae(s,n,r,i,t[o+6],15,-1560198380),i=Ae(i,s,n,r,t[o+13],21,1309151649),r=Ae(r,i,s,n,t[o+4],6,-145523070),n=Ae(n,r,i,s,t[o+11],10,-1120210379),s=Ae(s,n,r,i,t[o+2],15,718787259),i=Ae(i,s,n,r,t[o+9],21,-343485551),r=rt(r,a),i=rt(i,u),s=rt(s,h),n=rt(n,c)}return[r,i,s,n]}function $c(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(Fa(e)),i=0;i<e;i+=8)r[i>>5]|=(t[i/8]&255)<<i%32;return r}function rt(t,e){var r=(t&65535)+(e&65535),i=(t>>16)+(e>>16)+(r>>16);return i<<16|r&65535}function Rc(t,e){return t<<e|t>>>32-e}function hr(t,e,r,i,s,n){return rt(Rc(rt(rt(e,t),rt(i,n)),s),r)}function Ce(t,e,r,i,s,n,o){return hr(e&r|~e&i,t,e,s,n,o)}function De(t,e,r,i,s,n,o){return hr(e&i|r&~i,t,e,s,n,o)}function _e(t,e,r,i,s,n,o){return hr(e^r^i,t,e,s,n,o)}function Ae(t,e,r,i,s,n,o){return hr(r^(e|~i),t,e,s,n,o)}var kc=Aa("v3",48,Pc);const jc=kc;function qc(t,e,r){t=t||{};var i=t.random||(t.rng||Da)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=i[s];return e}return fr(i)}function Bc(t,e,r,i){switch(t){case 0:return e&r^~e&i;case 1:return e^r^i;case 2:return e&r^e&i^r&i;case 3:return e^r^i}}function nn(t,e){return t<<e|t>>>32-e}function Uc(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var i=unescape(encodeURIComponent(t));t=[];for(var s=0;s<i.length;++s)t.push(i.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var n=t.length/4+2,o=Math.ceil(n/16),a=new Array(o),u=0;u<o;++u){for(var h=new Uint32Array(16),c=0;c<16;++c)h[c]=t[u*64+c*4]<<24|t[u*64+c*4+1]<<16|t[u*64+c*4+2]<<8|t[u*64+c*4+3];a[u]=h}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var f=0;f<o;++f){for(var l=new Uint32Array(80),d=0;d<16;++d)l[d]=a[f][d];for(var y=16;y<80;++y)l[y]=nn(l[y-3]^l[y-8]^l[y-14]^l[y-16],1);for(var v=r[0],O=r[1],N=r[2],E=r[3],g=r[4],D=0;D<80;++D){var _=Math.floor(D/20),w=nn(v,5)+Bc(_,O,N,E)+g+e[_]+l[D]>>>0;g=E,E=N,N=nn(O,30)>>>0,O=v,v=w}r[0]=r[0]+v>>>0,r[1]=r[1]+O>>>0,r[2]=r[2]+N>>>0,r[3]=r[3]+E>>>0,r[4]=r[4]+g>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var Xc=Aa("v5",80,Uc);const Vc=Xc,zc="00000000-0000-0000-0000-000000000000";function Wc(t){if(!lr(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const Hc=Object.freeze(Object.defineProperty({__proto__:null,NIL:zc,parse:_a,stringify:fr,v1:Fc,v3:jc,v4:qc,v5:Vc,validate:lr,version:Wc},Symbol.toStringTag,{value:"Module"})),Gc=ic(Hc),Yc=Yu,Bt=ur,{v1:Bd,v4:Kc}=Gc;let Jc=class{constructor(e){Bt(e,'must pass "config"'),Bt(e.url,'must pass "url"'),Bt(e.appkey,'must pass "appkey"'),Bt(e.token,"must first get token from cache or getToken interface"),this._config=e}start(e,r){if(typeof e!="function")throw new Error("expect function onmessage");if(typeof r!="function")throw new Error("expect function onclose");return this._ws=new Yc(this._config.url,{headers:{"X-NLS-Token":this._config.token},perMessageDeflate:!1}),this._ws.on("message",(i,s)=>{e(i,s)}),this._ws.on("close",()=>{r()}),new Promise((i,s)=>{this._ws.on("open",()=>{i()}),this._ws.on("error",n=>{s(n)})})}send(e,r){this._ws!=null&&this._ws.send(e,{binary:r})}setPing(e,r){this._ping=setInterval(()=>{this._ws.ping(r)},e)}clearPing(){this._ping&&clearInterval(this._ping)}shutdown(){this._ws!=null&&(this._ping!=null&&clearInterval(this._ping),this._ws.terminate())}uuid(){return Kc().split("-").join("")}defaultContext(){return{sdk:{name:"nls-nodejs-sdk",version:"0.0.1",language:"nodejs"}}}};var Qc=Jc;ct.EventEmitter;ct.EventEmitter;const Zc=Qc,el=ct.EventEmitter;class tl{constructor(e,r=!1){this._event=new el,this._config=e,r?this._namespace="SpeechLongSynthesizer":this._namespace="SpeechSynthesizer"}defaultStartParams(e){return{voice:e,format:"wav",sample_rate:16e3,volume:50,speech_rate:0,pitch_rate:0,enable_subtitle:!1}}on(e,r){this._event.on(e,r)}async start(e,r,i){this._client=new Zc(this._config),this._taskid=this._client.uuid();let s={header:{message_id:this._client.uuid(),task_id:this._taskid,namespace:this._namespace,name:"StartSynthesis",appkey:this._config.appkey},payload:e,context:this._client.defaultContext()};return new Promise(async(n,o)=>{try{await this._client.start((a,u)=>{if(u)this._event.emit("data",a);else{let h=a.toString(),c=JSON.parse(h);c.header.name==="MetaInfo"?this._event.emit("meta",h):c.header.name==="SynthesisCompleted"?(this._client.clearPing(),this._client.shutdown(),this._client=null,this._event.emit("completed",h),n(h)):c.header.name==="TaskFailed"&&(this._client.clearPing(),this._client.shutdown(),this._client=null,this._event.emit("TaskFailed",h),this._event.emit("failed",h),o(h))}},()=>{this._event.emit("closed")}),r&&(i||(i=6e3),this._client.setPing(i)),this._client.send(JSON.stringify(s),!1)}catch(a){o(a)}})}shutdown(){this._client!=null&&this._client.shutdown()}}var rl=tl;const nl=gt(rl),rr={accessKeyId:"LTAI5tFCh5eoiNZX4n2wEy7Y",accessKeySecret:"XWYRzwspo5z4Ukuo8lKxZX4pUSgQ86",appkey:"JbBUqMYRUt0DrMcK",endpoint:"https://nls-gateway.aliyuncs.com",regionId:"cn-shanghai",ttsUrl:"wss://nls-gateway-cn-shanghai.aliyuncs.com/ws/v1"};require("iconv-lite");function hi(t){return Buffer.from(t,"base64").toString("utf-8")}function er(t){switch(ee.extname(t).toLowerCase()){case".mp4":return"video/mp4";case".webm":return"video/webm";case".mov":return"video/quicktime";case".avi":return"video/x-msvideo";case".mkv":return"video/x-matroska";case".mp3":return"audio/mpeg";case".wav":return"audio/wav";case".ogg":return"audio/ogg";case".aac":return"audio/aac";case".flac":return"audio/flac";case".jpg":case".jpeg":return"image/jpeg";case".png":return"image/png";default:return"application/octet-stream"}}function Ao(t){return new ReadableStream({start(e){t.on("data",r=>{e.enqueue(r)}),t.on("end",()=>{e.close()}),t.on("error",r=>{e.error(r)})},cancel(){t.destroy()}})}function Fo(t){return process.platform==="win32"?t.replace(/\\/g,"\\\\").replace(/:/g,"\\:"):t.replace(/(\s)/g,"\\$1")}var pr={exports:{}},vt={},pi={exports:{}},Ut={exports:{}},on,No;function Na(){if(No)return on;No=1;var t=1e3,e=t*60,r=e*60,i=r*24,s=i*7,n=i*365.25;on=function(c,f){f=f||{};var l=typeof c;if(l==="string"&&c.length>0)return o(c);if(l==="number"&&isFinite(c))return f.long?u(c):a(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function o(c){if(c=String(c),!(c.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(f){var l=parseFloat(f[1]),d=(f[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return l*n;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*i;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*e;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}function a(c){var f=Math.abs(c);return f>=i?Math.round(c/i)+"d":f>=r?Math.round(c/r)+"h":f>=e?Math.round(c/e)+"m":f>=t?Math.round(c/t)+"s":c+"ms"}function u(c){var f=Math.abs(c);return f>=i?h(c,f,i,"day"):f>=r?h(c,f,r,"hour"):f>=e?h(c,f,e,"minute"):f>=t?h(c,f,t,"second"):c+" ms"}function h(c,f,l,d){var y=f>=l*1.5;return Math.round(c/l)+" "+d+(y?"s":"")}return on}var sn,xo;function xa(){if(xo)return sn;xo=1;function t(e){i.debug=i,i.default=i,i.coerce=h,i.disable=a,i.enable=n,i.enabled=u,i.humanize=Na(),i.destroy=c,Object.keys(e).forEach(f=>{i[f]=e[f]}),i.names=[],i.skips=[],i.formatters={};function r(f){let l=0;for(let d=0;d<f.length;d++)l=(l<<5)-l+f.charCodeAt(d),l|=0;return i.colors[Math.abs(l)%i.colors.length]}i.selectColor=r;function i(f){let l,d=null,y,v;function O(...N){if(!O.enabled)return;const E=O,g=Number(new Date),D=g-(l||g);E.diff=D,E.prev=l,E.curr=g,l=g,N[0]=i.coerce(N[0]),typeof N[0]!="string"&&N.unshift("%O");let _=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,(C,T)=>{if(C==="%%")return"%";_++;const p=i.formatters[T];if(typeof p=="function"){const b=N[_];C=p.call(E,b),N.splice(_,1),_--}return C}),i.formatArgs.call(E,N),(E.log||i.log).apply(E,N)}return O.namespace=f,O.useColors=i.useColors(),O.color=i.selectColor(f),O.extend=s,O.destroy=i.destroy,Object.defineProperty(O,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(y!==i.namespaces&&(y=i.namespaces,v=i.enabled(f)),v),set:N=>{d=N}}),typeof i.init=="function"&&i.init(O),O}function s(f,l){const d=i(this.namespace+(typeof l>"u"?":":l)+f);return d.log=this.log,d}function n(f){i.save(f),i.namespaces=f,i.names=[],i.skips=[];const l=(typeof f=="string"?f:"").trim().replace(" ",",").split(",").filter(Boolean);for(const d of l)d[0]==="-"?i.skips.push(d.slice(1)):i.names.push(d)}function o(f,l){let d=0,y=0,v=-1,O=0;for(;d<f.length;)if(y<l.length&&(l[y]===f[d]||l[y]==="*"))l[y]==="*"?(v=y,O=d,y++):(d++,y++);else if(v!==-1)y=v+1,O++,d=O;else return!1;for(;y<l.length&&l[y]==="*";)y++;return y===l.length}function a(){const f=[...i.names,...i.skips.map(l=>"-"+l)].join(",");return i.enable(""),f}function u(f){for(const l of i.skips)if(o(f,l))return!1;for(const l of i.names)if(o(f,l))return!0;return!1}function h(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}return sn=t,sn}var Io;function il(){return Io||(Io=1,function(t,e){e.formatArgs=i,e.save=s,e.load=n,e.useColors=r,e.storage=o(),e.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const h="color: "+this.color;u.splice(1,0,h,"color: inherit");let c=0,f=0;u[0].replace(/%[a-zA-Z%]/g,l=>{l!=="%%"&&(c++,l==="%c"&&(f=c))}),u.splice(f,0,h)}e.log=console.debug||console.log||(()=>{});function s(u){try{u?e.storage.setItem("debug",u):e.storage.removeItem("debug")}catch{}}function n(){let u;try{u=e.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=process.env.DEBUG),u}function o(){try{return localStorage}catch{}}t.exports=xa()(e);const{formatters:a}=t.exports;a.j=function(u){try{return JSON.stringify(u)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}(Ut,Ut.exports)),Ut.exports}var Xt={exports:{}},an,Po;function ol(){return Po||(Po=1,an=(t,e=process.argv)=>{const r=t.startsWith("-")?"":t.length===1?"-":"--",i=e.indexOf(r+t),s=e.indexOf("--");return i!==-1&&(s===-1||i<s)}),an}var un,Lo;function Ia(){if(Lo)return un;Lo=1;const t=it,e=Oi,r=ol(),{env:i}=process;let s;r("no-color")||r("no-colors")||r("color=false")||r("color=never")?s=0:(r("color")||r("colors")||r("color=true")||r("color=always"))&&(s=1),"FORCE_COLOR"in i&&(i.FORCE_COLOR==="true"?s=1:i.FORCE_COLOR==="false"?s=0:s=i.FORCE_COLOR.length===0?1:Math.min(parseInt(i.FORCE_COLOR,10),3));function n(u){return u===0?!1:{level:u,hasBasic:!0,has256:u>=2,has16m:u>=3}}function o(u,h){if(s===0)return 0;if(r("color=16m")||r("color=full")||r("color=truecolor"))return 3;if(r("color=256"))return 2;if(u&&!h&&s===void 0)return 0;const c=s||0;if(i.TERM==="dumb")return c;if(process.platform==="win32"){const f=t.release().split(".");return Number(f[0])>=10&&Number(f[2])>=10586?Number(f[2])>=14931?3:2:1}if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(f=>f in i)||i.CI_NAME==="codeship"?1:c;if("TEAMCITY_VERSION"in i)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION)?1:0;if(i.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in i){const f=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return f>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)||"COLORTERM"in i?1:c}function a(u){const h=o(u,u&&u.isTTY);return n(h)}return un={supportsColor:a,stdout:n(o(!0,e.isatty(1))),stderr:n(o(!0,e.isatty(2)))},un}var Mo;function sl(){return Mo||(Mo=1,function(t,e){const r=Oi,i=Mt;e.init=c,e.log=a,e.formatArgs=n,e.save=u,e.load=h,e.useColors=s,e.destroy=i.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),e.colors=[6,2,3,4,5,1];try{const l=Ia();l&&(l.stderr||l).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}e.inspectOpts=Object.keys(process.env).filter(l=>/^debug_/i.test(l)).reduce((l,d)=>{const y=d.substring(6).toLowerCase().replace(/_([a-z])/g,(O,N)=>N.toUpperCase());let v=process.env[d];return/^(yes|on|true|enabled)$/i.test(v)?v=!0:/^(no|off|false|disabled)$/i.test(v)?v=!1:v==="null"?v=null:v=Number(v),l[y]=v,l},{});function s(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:r.isatty(process.stderr.fd)}function n(l){const{namespace:d,useColors:y}=this;if(y){const v=this.color,O="\x1B[3"+(v<8?v:"8;5;"+v),N=`  ${O};1m${d} \x1B[0m`;l[0]=N+l[0].split(`
`).join(`
`+N),l.push(O+"m+"+t.exports.humanize(this.diff)+"\x1B[0m")}else l[0]=o()+d+" "+l[0]}function o(){return e.inspectOpts.hideDate?"":new Date().toISOString()+" "}function a(...l){return process.stderr.write(i.formatWithOptions(e.inspectOpts,...l)+`
`)}function u(l){l?process.env.DEBUG=l:delete process.env.DEBUG}function h(){return process.env.DEBUG}function c(l){l.inspectOpts={};const d=Object.keys(e.inspectOpts);for(let y=0;y<d.length;y++)l.inspectOpts[d[y]]=e.inspectOpts[d[y]]}t.exports=xa()(e);const{formatters:f}=t.exports;f.o=function(l){return this.inspectOpts.colors=this.useColors,i.inspect(l,this.inspectOpts).split(`
`).map(d=>d.trim()).join(" ")},f.O=function(l){return this.inspectOpts.colors=this.useColors,i.inspect(l,this.inspectOpts)}}(Xt,Xt.exports)),Xt.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?pi.exports=il():pi.exports=sl();var Pa=pi.exports;const $o=Ku,La=sr,Ma=ar,al=Si.parse,ul=Si.format,Ue=Pa("httpx:body"),Vt=Pa("httpx:header"),cl=new La.Agent({keepAlive:!0}),ll=new Ma.Agent({keepAlive:!0}),cn=3e3,Ze=Symbol("TIMER::READ_TIMER"),di=Symbol("TIMER::READ_TIME_OUT"),$a=Symbol("TIMER::READ_TIMER_START_AT");function Ra(t){switch(t.headers["content-encoding"]){case"gzip":return t.pipe($o.createGunzip());case"deflate":return t.pipe($o.createInflate());default:return t}}var Ro=function(t,e,r){return t.name=e+t.name,t.message=`${r}. ${t.message}`,t};const St=function(t){return t!==null&&!isNaN(t)};vt.request=function(t,e){e||(e={});const r=typeof t=="string"?al(t):t;let i,s;St(e.readTimeout)||St(e.connectTimeout)?(i=St(e.readTimeout)?Number(e.readTimeout):cn,s=St(e.connectTimeout)?Number(e.connectTimeout):cn):St(e.timeout)?i=s=Number(e.timeout):i=s=cn;const n=r.protocol==="https:",o=(e.method||"GET").toUpperCase(),a=n?ll:cl,u=e.agent||a;var h={host:r.hostname||"localhost",path:r.path||"/",method:o,port:r.port||(r.protocol==="https:"?443:80),agent:u,headers:e.headers||{},key:e.key||"",cert:e.cert||"",ca:e.ca||"",timeout:s};n&&typeof e.rejectUnauthorized<"u"&&(h.rejectUnauthorized=e.rejectUnauthorized),e.compression&&(h.headers["accept-encoding"]="gzip,deflate");const c=n?Ma:La;return typeof e.beforeRequest=="function"&&(h=e.beforeRequest(h)),new Promise((f,l)=>{const d=c.request(h),y=e.data;var v=g=>{Vt.enabled&&(g.req._header.split(`\r
`).forEach(_=>{Vt("> %s",_)}),Vt("< HTTP/%s %s %s",g.httpVersion,g.statusCode,g.statusMessage),Object.keys(g.headers).forEach(_=>{Vt("< %s: %s",_,g.headers[_])})),f(g)},O=g=>{g.message+=`${o} ${ul(r)} failed.`,d.socket&&d.socket[Ze]&&clearTimeout(d.socket[Ze]),l(g)},N=g=>{d.abort(),O(g)};const E=function(g){const D=setTimeout(()=>{g[Ze]&&(clearTimeout(g[Ze]),g[Ze]=null);var _=new Error,w=`ReadTimeout(${i})`;N(Ro(_,"RequestTimeout",w))},i);g[di]=i,g[Ze]=D,g[$a]=Date.now(),D.unref()};!y||typeof y=="string"||y instanceof Buffer?(Ue.enabled&&Ue(y?typeof y=="string"?y:`Buffer <ignored>, Buffer length: ${y.length}`:"<no request body>"),d.end(y)):typeof y.pipe=="function"&&(y.pipe(d),Ue.enabled&&Ue("<request body is a stream>"),y.once("error",g=>{N(Ro(g,"HttpX","Stream occor error"))})),d.on("timeout",()=>{var g=new Error;g.name="RequestTimeoutError",g.message=`ConnectTimeout: Connect ${t} failed.`,d.destroy(),l(g)}),d.on("response",v),d.on("error",O),d.once("socket",function(g){g.readyState==="opening"?g.once("connect",function(){E(g)}):E(g)})})};vt.read=function(t,e){const r=Ra(t);return new Promise((i,s)=>{const n=t.socket||t.client,o=()=>{const O=t.req;var N=new Error;return N.name="RequestTimeoutError",N.message=`ReadTimeout: ${n[di]}. ${O.method} ${O.path} failed.`,N};let a;const u=n[Ze];if(!u){s(o());return}const h=n[di]-(Date.now()-n[$a]);if(clearTimeout(u),h<=0){s(o());return}a=setTimeout(function(){s(o())},h);var c,f,l,d=function(){r.removeListener("error",c),r.removeListener("data",f),r.removeListener("end",l),a&&clearTimeout(a)};const y=[];var v=0;f=function(O){y.push(O),v+=O.length},c=function(O){d(),s(O)},l=function(){d();var O=Buffer.concat(y,v);if(Ue(""),e){const N=O.toString(e);return Ue(N),i(N)}Ue.enabled&&Ue(O.toString()),i(O)},r.on("error",c),r.on("data",f),r.on("end",l)})};function fl(t){return new Promise((e,r)=>{var i,s,n,o=function(){t.removeListener("error",n),t.removeListener("end",s),t.removeListener("readable",i)};i=function(){o(),e(!1)},s=function(){o(),e(!0)},n=function(a){o(),r(a)},t.once("readable",i),t.once("end",s),t.once("error",n)})}class ka{constructor(e,r,i,s){this.id=e,this.event=r,this.data=i,this.retry=s}}vt.Event=ka;const ko="data:",jo="event:",qo="id:",Bo="retry:";function hl(t){for(let e=0;e<t.length;e++){const r=t.charAt(e);if(r<"0"||r>"9")return!1}return t.length>0}function pl(t,e){const r=t+e;let i=0;const s=[];for(let o=0;o<r.length-1;o++){const a=r[o],u=r[o+1];if(a===`
`&&u===`
`){const c=r.substring(i,o).split(`
`),f=new ka;c.forEach(l=>{if(l.startsWith(ko))f.data=l.substring(ko.length).trim();else if(l.startsWith(jo))f.event=l.substring(jo.length).trim();else if(l.startsWith(qo))f.id=l.substring(qo.length).trim();else if(l.startsWith(Bo)){const d=l.substring(Bo.length).trim();hl(d)&&(f.retry=parseInt(d,10))}else l.startsWith(":")}),s.push(f),i=o+2}}const n=r.substring(i);return[s,n]}vt.readAsSSE=async function*(t){const e=Ra(t),r=t.socket||t.client;clearTimeout(r[Ze]);let i="";for(;;){if(await fl(e))return;let n;for(;(n=e.read())!==null;){const[o,a]=pl(i,n.toString());if(i=a,o&&o.length>0)for(const u of o)yield u}}};var Ci={};(function(t){const e=fe,r=it,i=je;t.loadJSONSync=function(s){var n=e.readFileSync(s,"utf8");n.charCodeAt(0)===65279&&(n=n.slice(1));try{return JSON.parse(n)}catch(o){throw o.message=s+": "+o.message,o}},t.encode=function(s,n){return typeof s!="string"&&(s=""+s),new Buffer(s,n)},t.makeHasher=function(s){return function(n,o){var a=i.createHash(s);return a.update(n),a.digest(o)}},t.createHash=t.makeHasher,t.md5=t.makeHasher("md5"),t.createHmac=function(s){return function(n,o,a){return i.createHmac(s,o).update(n).digest(a)}},t.sha1=t.createHmac("sha1"),t.random=function(s,n){return Math.floor(s+Math.random()*(n-s))},t.makeNonce=function(){var s=0,n;const o=r.hostname(),a=process.pid;return function(){var u=Math.floor(Math.random()*1e12);u===n?s++:s=0,n=u;var h=`${o}${a}${u}${s}`;return t.md5(h,"hex")}}(),t.pad2=function(s){return s<10?"0"+s:""+s},t.pad3=function(s){return s<10?"00"+s:s<100?"0"+s:""+s},t.getYYYYMMDD=function(s){var n=s.getFullYear(),o=t.pad2(s.getMonth()+1),a=t.pad2(s.getDate());return""+n+o+a},t.sleep=function(s){return new Promise(n=>{setTimeout(n,s)})},t.getIPv4=function(){for(var s=r.networkInterfaces(),n=Object.keys(s),o=0;o<n.length;o++)for(var a=n[o],u=s[a],h=0;h<u.length;h++){var c=u[h];if(!c.internal&&c.family==="IPv4")return c.address}return""},t.getMac=function(){for(var s=r.networkInterfaces(),n=Object.keys(s),o=0;o<n.length;o++)for(var a=n[o],u=s[a],h=0;h<u.length;h++){var c=u[h];if(!c.internal&&c.family==="IPv4")return c.mac}return"00:00:00:00:00:00"}})(Ci);var dr={exports:{}},ja={exports:{}},qa={exports:{}};(function(t){(function(e){var r,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,n=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",u=1e14,h=14,c=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],l=1e7,d=1e9;function y(w){var C,T,p,b=Y.prototype={constructor:Y,toString:null,valueOf:null},A=new Y(1),P=20,U=4,B=-7,q=21,z=-1e7,W=1e7,K=!1,J=1,Q=0,re={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},se="0123456789abcdefghijklmnopqrstuvwxyz",pe=!0;function Y(m,x){var I,k,M,$,V,L,R,X,j=this;if(!(j instanceof Y))return new Y(m,x);if(x==null){if(m&&m._isBigNumber===!0){j.s=m.s,!m.c||m.e>W?j.c=j.e=null:m.e<z?j.c=[j.e=0]:(j.e=m.e,j.c=m.c.slice());return}if((L=typeof m=="number")&&m*0==0){if(j.s=1/m<0?(m=-m,-1):1,m===~~m){for($=0,V=m;V>=10;V/=10,$++);$>W?j.c=j.e=null:(j.e=$,j.c=[m]);return}X=String(m)}else{if(!i.test(X=String(m)))return p(j,X,L);j.s=X.charCodeAt(0)==45?(X=X.slice(1),-1):1}($=X.indexOf("."))>-1&&(X=X.replace(".","")),(V=X.search(/e/i))>0?($<0&&($=V),$+=+X.slice(V+1),X=X.substring(0,V)):$<0&&($=X.length)}else{if(E(x,2,se.length,"Base"),x==10&&pe)return j=new Y(m),S(j,P+j.e+1,U);if(X=String(m),L=typeof m=="number"){if(m*0!=0)return p(j,X,L,x);if(j.s=1/m<0?(X=X.slice(1),-1):1,Y.DEBUG&&X.replace(/^0\.0*|\./,"").length>15)throw Error(a+m)}else j.s=X.charCodeAt(0)===45?(X=X.slice(1),-1):1;for(I=se.slice(0,x),$=V=0,R=X.length;V<R;V++)if(I.indexOf(k=X.charAt(V))<0){if(k=="."){if(V>$){$=R;continue}}else if(!M&&(X==X.toUpperCase()&&(X=X.toLowerCase())||X==X.toLowerCase()&&(X=X.toUpperCase()))){M=!0,V=-1,$=0;continue}return p(j,String(m),L,x)}L=!1,X=T(X,x,10,j.s),($=X.indexOf("."))>-1?X=X.replace(".",""):$=X.length}for(V=0;X.charCodeAt(V)===48;V++);for(R=X.length;X.charCodeAt(--R)===48;);if(X=X.slice(V,++R)){if(R-=V,L&&Y.DEBUG&&R>15&&(m>c||m!==n(m)))throw Error(a+j.s*m);if(($=$-V-1)>W)j.c=j.e=null;else if($<z)j.c=[j.e=0];else{if(j.e=$,j.c=[],V=($+1)%h,$<0&&(V+=h),V<R){for(V&&j.c.push(+X.slice(0,V)),R-=h;V<R;)j.c.push(+X.slice(V,V+=h));V=h-(X=X.slice(V)).length}else V-=R;for(;V--;X+="0");j.c.push(+X)}}else j.c=[j.e=0]}Y.clone=y,Y.ROUND_UP=0,Y.ROUND_DOWN=1,Y.ROUND_CEIL=2,Y.ROUND_FLOOR=3,Y.ROUND_HALF_UP=4,Y.ROUND_HALF_DOWN=5,Y.ROUND_HALF_EVEN=6,Y.ROUND_HALF_CEIL=7,Y.ROUND_HALF_FLOOR=8,Y.EUCLID=9,Y.config=Y.set=function(m){var x,I;if(m!=null)if(typeof m=="object"){if(m.hasOwnProperty(x="DECIMAL_PLACES")&&(I=m[x],E(I,0,d,x),P=I),m.hasOwnProperty(x="ROUNDING_MODE")&&(I=m[x],E(I,0,8,x),U=I),m.hasOwnProperty(x="EXPONENTIAL_AT")&&(I=m[x],I&&I.pop?(E(I[0],-d,0,x),E(I[1],0,d,x),B=I[0],q=I[1]):(E(I,-d,d,x),B=-(q=I<0?-I:I))),m.hasOwnProperty(x="RANGE"))if(I=m[x],I&&I.pop)E(I[0],-d,-1,x),E(I[1],1,d,x),z=I[0],W=I[1];else if(E(I,-d,d,x),I)z=-(W=I<0?-I:I);else throw Error(o+x+" cannot be zero: "+I);if(m.hasOwnProperty(x="CRYPTO"))if(I=m[x],I===!!I)if(I)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))K=I;else throw K=!I,Error(o+"crypto unavailable");else K=I;else throw Error(o+x+" not true or false: "+I);if(m.hasOwnProperty(x="MODULO_MODE")&&(I=m[x],E(I,0,9,x),J=I),m.hasOwnProperty(x="POW_PRECISION")&&(I=m[x],E(I,0,d,x),Q=I),m.hasOwnProperty(x="FORMAT"))if(I=m[x],typeof I=="object")re=I;else throw Error(o+x+" not an object: "+I);if(m.hasOwnProperty(x="ALPHABET"))if(I=m[x],typeof I=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(I))pe=I.slice(0,10)=="0123456789",se=I;else throw Error(o+x+" invalid: "+I)}else throw Error(o+"Object expected: "+m);return{DECIMAL_PLACES:P,ROUNDING_MODE:U,EXPONENTIAL_AT:[B,q],RANGE:[z,W],CRYPTO:K,MODULO_MODE:J,POW_PRECISION:Q,FORMAT:re,ALPHABET:se}},Y.isBigNumber=function(m){if(!m||m._isBigNumber!==!0)return!1;if(!Y.DEBUG)return!0;var x,I,k=m.c,M=m.e,$=m.s;e:if({}.toString.call(k)=="[object Array]"){if(($===1||$===-1)&&M>=-d&&M<=d&&M===n(M)){if(k[0]===0){if(M===0&&k.length===1)return!0;break e}if(x=(M+1)%h,x<1&&(x+=h),String(k[0]).length==x){for(x=0;x<k.length;x++)if(I=k[x],I<0||I>=u||I!==n(I))break e;if(I!==0)return!0}}}else if(k===null&&M===null&&($===null||$===1||$===-1))return!0;throw Error(o+"Invalid BigNumber: "+m)},Y.maximum=Y.max=function(){return Re(arguments,-1)},Y.minimum=Y.min=function(){return Re(arguments,1)},Y.random=function(){var m=9007199254740992,x=Math.random()*m&2097151?function(){return n(Math.random()*m)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(I){var k,M,$,V,L,R=0,X=[],j=new Y(A);if(I==null?I=P:E(I,0,d),V=s(I/h),K)if(crypto.getRandomValues){for(k=crypto.getRandomValues(new Uint32Array(V*=2));R<V;)L=k[R]*131072+(k[R+1]>>>11),L>=9e15?(M=crypto.getRandomValues(new Uint32Array(2)),k[R]=M[0],k[R+1]=M[1]):(X.push(L%1e14),R+=2);R=V/2}else if(crypto.randomBytes){for(k=crypto.randomBytes(V*=7);R<V;)L=(k[R]&31)*281474976710656+k[R+1]*1099511627776+k[R+2]*4294967296+k[R+3]*16777216+(k[R+4]<<16)+(k[R+5]<<8)+k[R+6],L>=9e15?crypto.randomBytes(7).copy(k,R):(X.push(L%1e14),R+=7);R=V/7}else throw K=!1,Error(o+"crypto unavailable");if(!K)for(;R<V;)L=x(),L<9e15&&(X[R++]=L%1e14);for(V=X[--R],I%=h,V&&I&&(L=f[h-I],X[R]=n(V/L)*L);X[R]===0;X.pop(),R--);if(R<0)X=[$=0];else{for($=-1;X[0]===0;X.splice(0,1),$-=h);for(R=1,L=X[0];L>=10;L/=10,R++);R<h&&($-=h-R)}return j.e=$,j.c=X,j}}(),Y.sum=function(){for(var m=1,x=arguments,I=new Y(x[0]);m<x.length;)I=I.plus(x[m++]);return I},T=function(){var m="0123456789";function x(I,k,M,$){for(var V,L=[0],R,X=0,j=I.length;X<j;){for(R=L.length;R--;L[R]*=k);for(L[0]+=$.indexOf(I.charAt(X++)),V=0;V<L.length;V++)L[V]>M-1&&(L[V+1]==null&&(L[V+1]=0),L[V+1]+=L[V]/M|0,L[V]%=M)}return L.reverse()}return function(I,k,M,$,V){var L,R,X,j,G,Z,te,le,me=I.indexOf("."),we=P,ce=U;for(me>=0&&(j=Q,Q=0,I=I.replace(".",""),le=new Y(k),Z=le.pow(I.length-me),Q=j,le.c=x(_(O(Z.c),Z.e,"0"),10,M,m),le.e=le.c.length),te=x(I,k,M,V?(L=se,m):(L=m,se)),X=j=te.length;te[--j]==0;te.pop());if(!te[0])return L.charAt(0);if(me<0?--X:(Z.c=te,Z.e=X,Z.s=$,Z=C(Z,le,we,ce,M),te=Z.c,G=Z.r,X=Z.e),R=X+we+1,me=te[R],j=M/2,G=G||R<0||te[R+1]!=null,G=ce<4?(me!=null||G)&&(ce==0||ce==(Z.s<0?3:2)):me>j||me==j&&(ce==4||G||ce==6&&te[R-1]&1||ce==(Z.s<0?8:7)),R<1||!te[0])I=G?_(L.charAt(1),-we,L.charAt(0)):L.charAt(0);else{if(te.length=R,G)for(--M;++te[--R]>M;)te[R]=0,R||(++X,te=[1].concat(te));for(j=te.length;!te[--j];);for(me=0,I="";me<=j;I+=L.charAt(te[me++]));I=_(I,X,L.charAt(0))}return I}}(),C=function(){function m(k,M,$){var V,L,R,X,j=0,G=k.length,Z=M%l,te=M/l|0;for(k=k.slice();G--;)R=k[G]%l,X=k[G]/l|0,V=te*R+X*Z,L=Z*R+V%l*l+j,j=(L/$|0)+(V/l|0)+te*X,k[G]=L%$;return j&&(k=[j].concat(k)),k}function x(k,M,$,V){var L,R;if($!=V)R=$>V?1:-1;else for(L=R=0;L<$;L++)if(k[L]!=M[L]){R=k[L]>M[L]?1:-1;break}return R}function I(k,M,$,V){for(var L=0;$--;)k[$]-=L,L=k[$]<M[$]?1:0,k[$]=L*V+k[$]-M[$];for(;!k[0]&&k.length>1;k.splice(0,1));}return function(k,M,$,V,L){var R,X,j,G,Z,te,le,me,we,ce,he,Te,kt,br,Sr,qe,bt,Me=k.s==M.s?1:-1,Ne=k.c,ye=M.c;if(!Ne||!Ne[0]||!ye||!ye[0])return new Y(!k.s||!M.s||(Ne?ye&&Ne[0]==ye[0]:!ye)?NaN:Ne&&Ne[0]==0||!ye?Me*0:Me/0);for(me=new Y(Me),we=me.c=[],X=k.e-M.e,Me=$+X+1,L||(L=u,X=v(k.e/h)-v(M.e/h),Me=Me/h|0),j=0;ye[j]==(Ne[j]||0);j++);if(ye[j]>(Ne[j]||0)&&X--,Me<0)we.push(1),G=!0;else{for(br=Ne.length,qe=ye.length,j=0,Me+=2,Z=n(L/(ye[0]+1)),Z>1&&(ye=m(ye,Z,L),Ne=m(Ne,Z,L),qe=ye.length,br=Ne.length),kt=qe,ce=Ne.slice(0,qe),he=ce.length;he<qe;ce[he++]=0);bt=ye.slice(),bt=[0].concat(bt),Sr=ye[0],ye[1]>=L/2&&Sr++;do{if(Z=0,R=x(ye,ce,qe,he),R<0){if(Te=ce[0],qe!=he&&(Te=Te*L+(ce[1]||0)),Z=n(Te/Sr),Z>1)for(Z>=L&&(Z=L-1),te=m(ye,Z,L),le=te.length,he=ce.length;x(te,ce,le,he)==1;)Z--,I(te,qe<le?bt:ye,le,L),le=te.length,R=1;else Z==0&&(R=Z=1),te=ye.slice(),le=te.length;if(le<he&&(te=[0].concat(te)),I(ce,te,he,L),he=ce.length,R==-1)for(;x(ye,ce,qe,he)<1;)Z++,I(ce,qe<he?bt:ye,he,L),he=ce.length}else R===0&&(Z++,ce=[0]);we[j++]=Z,ce[0]?ce[he++]=Ne[kt]||0:(ce=[Ne[kt]],he=1)}while((kt++<br||ce[0]!=null)&&Me--);G=ce[0]!=null,we[0]||we.splice(0,1)}if(L==u){for(j=1,Me=we[0];Me>=10;Me/=10,j++);S(me,$+(me.e=j+X*h-1)+1,V,G)}else me.e=X,me.r=+G;return me}}();function ve(m,x,I,k){var M,$,V,L,R;if(I==null?I=U:E(I,0,8),!m.c)return m.toString();if(M=m.c[0],V=m.e,x==null)R=O(m.c),R=k==1||k==2&&(V<=B||V>=q)?D(R,V):_(R,V,"0");else if(m=S(new Y(m),x,I),$=m.e,R=O(m.c),L=R.length,k==1||k==2&&(x<=$||$<=B)){for(;L<x;R+="0",L++);R=D(R,$)}else if(x-=V,R=_(R,$,"0"),$+1>L){if(--x>0)for(R+=".";x--;R+="0");}else if(x+=$-L,x>0)for($+1==L&&(R+=".");x--;R+="0");return m.s<0&&M?"-"+R:R}function Re(m,x){for(var I,k,M=1,$=new Y(m[0]);M<m.length;M++)k=new Y(m[M]),(!k.s||(I=N($,k))===x||I===0&&$.s===x)&&($=k);return $}function F(m,x,I){for(var k=1,M=x.length;!x[--M];x.pop());for(M=x[0];M>=10;M/=10,k++);return(I=k+I*h-1)>W?m.c=m.e=null:I<z?m.c=[m.e=0]:(m.e=I,m.c=x),m}p=function(){var m=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,I=/^\.([^.]+)$/,k=/^-?(Infinity|NaN)$/,M=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function($,V,L,R){var X,j=L?V:V.replace(M,"");if(k.test(j))$.s=isNaN(j)?null:j<0?-1:1;else{if(!L&&(j=j.replace(m,function(G,Z,te){return X=(te=te.toLowerCase())=="x"?16:te=="b"?2:8,!R||R==X?Z:G}),R&&(X=R,j=j.replace(x,"$1").replace(I,"0.$1")),V!=j))return new Y(j,X);if(Y.DEBUG)throw Error(o+"Not a"+(R?" base "+R:"")+" number: "+V);$.s=null}$.c=$.e=null}}();function S(m,x,I,k){var M,$,V,L,R,X,j,G=m.c,Z=f;if(G){e:{for(M=1,L=G[0];L>=10;L/=10,M++);if($=x-M,$<0)$+=h,V=x,R=G[X=0],j=n(R/Z[M-V-1]%10);else if(X=s(($+1)/h),X>=G.length)if(k){for(;G.length<=X;G.push(0));R=j=0,M=1,$%=h,V=$-h+1}else break e;else{for(R=L=G[X],M=1;L>=10;L/=10,M++);$%=h,V=$-h+M,j=V<0?0:n(R/Z[M-V-1]%10)}if(k=k||x<0||G[X+1]!=null||(V<0?R:R%Z[M-V-1]),k=I<4?(j||k)&&(I==0||I==(m.s<0?3:2)):j>5||j==5&&(I==4||k||I==6&&($>0?V>0?R/Z[M-V]:0:G[X-1])%10&1||I==(m.s<0?8:7)),x<1||!G[0])return G.length=0,k?(x-=m.e+1,G[0]=Z[(h-x%h)%h],m.e=-x||0):G[0]=m.e=0,m;if($==0?(G.length=X,L=1,X--):(G.length=X+1,L=Z[h-$],G[X]=V>0?n(R/Z[M-V]%Z[V])*L:0),k)for(;;)if(X==0){for($=1,V=G[0];V>=10;V/=10,$++);for(V=G[0]+=L,L=1;V>=10;V/=10,L++);$!=L&&(m.e++,G[0]==u&&(G[0]=1));break}else{if(G[X]+=L,G[X]!=u)break;G[X--]=0,L=1}for($=G.length;G[--$]===0;G.pop());}m.e>W?m.c=m.e=null:m.e<z&&(m.c=[m.e=0])}return m}function H(m){var x,I=m.e;return I===null?m.toString():(x=O(m.c),x=I<=B||I>=q?D(x,I):_(x,I,"0"),m.s<0?"-"+x:x)}return b.absoluteValue=b.abs=function(){var m=new Y(this);return m.s<0&&(m.s=1),m},b.comparedTo=function(m,x){return N(this,new Y(m,x))},b.decimalPlaces=b.dp=function(m,x){var I,k,M,$=this;if(m!=null)return E(m,0,d),x==null?x=U:E(x,0,8),S(new Y($),m+$.e+1,x);if(!(I=$.c))return null;if(k=((M=I.length-1)-v(this.e/h))*h,M=I[M])for(;M%10==0;M/=10,k--);return k<0&&(k=0),k},b.dividedBy=b.div=function(m,x){return C(this,new Y(m,x),P,U)},b.dividedToIntegerBy=b.idiv=function(m,x){return C(this,new Y(m,x),0,1)},b.exponentiatedBy=b.pow=function(m,x){var I,k,M,$,V,L,R,X,j,G=this;if(m=new Y(m),m.c&&!m.isInteger())throw Error(o+"Exponent not an integer: "+H(m));if(x!=null&&(x=new Y(x)),L=m.e>14,!G.c||!G.c[0]||G.c[0]==1&&!G.e&&G.c.length==1||!m.c||!m.c[0])return j=new Y(Math.pow(+H(G),L?m.s*(2-g(m)):+H(m))),x?j.mod(x):j;if(R=m.s<0,x){if(x.c?!x.c[0]:!x.s)return new Y(NaN);k=!R&&G.isInteger()&&x.isInteger(),k&&(G=G.mod(x))}else{if(m.e>9&&(G.e>0||G.e<-1||(G.e==0?G.c[0]>1||L&&G.c[1]>=24e7:G.c[0]<8e13||L&&G.c[0]<=9999975e7)))return $=G.s<0&&g(m)?-0:0,G.e>-1&&($=1/$),new Y(R?1/$:$);Q&&($=s(Q/h+2))}for(L?(I=new Y(.5),R&&(m.s=1),X=g(m)):(M=Math.abs(+H(m)),X=M%2),j=new Y(A);;){if(X){if(j=j.times(G),!j.c)break;$?j.c.length>$&&(j.c.length=$):k&&(j=j.mod(x))}if(M){if(M=n(M/2),M===0)break;X=M%2}else if(m=m.times(I),S(m,m.e+1,1),m.e>14)X=g(m);else{if(M=+H(m),M===0)break;X=M%2}G=G.times(G),$?G.c&&G.c.length>$&&(G.c.length=$):k&&(G=G.mod(x))}return k?j:(R&&(j=A.div(j)),x?j.mod(x):$?S(j,Q,U,V):j)},b.integerValue=function(m){var x=new Y(this);return m==null?m=U:E(m,0,8),S(x,x.e+1,m)},b.isEqualTo=b.eq=function(m,x){return N(this,new Y(m,x))===0},b.isFinite=function(){return!!this.c},b.isGreaterThan=b.gt=function(m,x){return N(this,new Y(m,x))>0},b.isGreaterThanOrEqualTo=b.gte=function(m,x){return(x=N(this,new Y(m,x)))===1||x===0},b.isInteger=function(){return!!this.c&&v(this.e/h)>this.c.length-2},b.isLessThan=b.lt=function(m,x){return N(this,new Y(m,x))<0},b.isLessThanOrEqualTo=b.lte=function(m,x){return(x=N(this,new Y(m,x)))===-1||x===0},b.isNaN=function(){return!this.s},b.isNegative=function(){return this.s<0},b.isPositive=function(){return this.s>0},b.isZero=function(){return!!this.c&&this.c[0]==0},b.minus=function(m,x){var I,k,M,$,V=this,L=V.s;if(m=new Y(m,x),x=m.s,!L||!x)return new Y(NaN);if(L!=x)return m.s=-x,V.plus(m);var R=V.e/h,X=m.e/h,j=V.c,G=m.c;if(!R||!X){if(!j||!G)return j?(m.s=-x,m):new Y(G?V:NaN);if(!j[0]||!G[0])return G[0]?(m.s=-x,m):new Y(j[0]?V:U==3?-0:0)}if(R=v(R),X=v(X),j=j.slice(),L=R-X){for(($=L<0)?(L=-L,M=j):(X=R,M=G),M.reverse(),x=L;x--;M.push(0));M.reverse()}else for(k=($=(L=j.length)<(x=G.length))?L:x,L=x=0;x<k;x++)if(j[x]!=G[x]){$=j[x]<G[x];break}if($&&(M=j,j=G,G=M,m.s=-m.s),x=(k=G.length)-(I=j.length),x>0)for(;x--;j[I++]=0);for(x=u-1;k>L;){if(j[--k]<G[k]){for(I=k;I&&!j[--I];j[I]=x);--j[I],j[k]+=u}j[k]-=G[k]}for(;j[0]==0;j.splice(0,1),--X);return j[0]?F(m,j,X):(m.s=U==3?-1:1,m.c=[m.e=0],m)},b.modulo=b.mod=function(m,x){var I,k,M=this;return m=new Y(m,x),!M.c||!m.s||m.c&&!m.c[0]?new Y(NaN):!m.c||M.c&&!M.c[0]?new Y(M):(J==9?(k=m.s,m.s=1,I=C(M,m,0,3),m.s=k,I.s*=k):I=C(M,m,0,J),m=M.minus(I.times(m)),!m.c[0]&&J==1&&(m.s=M.s),m)},b.multipliedBy=b.times=function(m,x){var I,k,M,$,V,L,R,X,j,G,Z,te,le,me,we,ce=this,he=ce.c,Te=(m=new Y(m,x)).c;if(!he||!Te||!he[0]||!Te[0])return!ce.s||!m.s||he&&!he[0]&&!Te||Te&&!Te[0]&&!he?m.c=m.e=m.s=null:(m.s*=ce.s,!he||!Te?m.c=m.e=null:(m.c=[0],m.e=0)),m;for(k=v(ce.e/h)+v(m.e/h),m.s*=ce.s,R=he.length,G=Te.length,R<G&&(le=he,he=Te,Te=le,M=R,R=G,G=M),M=R+G,le=[];M--;le.push(0));for(me=u,we=l,M=G;--M>=0;){for(I=0,Z=Te[M]%we,te=Te[M]/we|0,V=R,$=M+V;$>M;)X=he[--V]%we,j=he[V]/we|0,L=te*X+j*Z,X=Z*X+L%we*we+le[$]+I,I=(X/me|0)+(L/we|0)+te*j,le[$--]=X%me;le[$]=I}return I?++k:le.splice(0,1),F(m,le,k)},b.negated=function(){var m=new Y(this);return m.s=-m.s||null,m},b.plus=function(m,x){var I,k=this,M=k.s;if(m=new Y(m,x),x=m.s,!M||!x)return new Y(NaN);if(M!=x)return m.s=-x,k.minus(m);var $=k.e/h,V=m.e/h,L=k.c,R=m.c;if(!$||!V){if(!L||!R)return new Y(M/0);if(!L[0]||!R[0])return R[0]?m:new Y(L[0]?k:M*0)}if($=v($),V=v(V),L=L.slice(),M=$-V){for(M>0?(V=$,I=R):(M=-M,I=L),I.reverse();M--;I.push(0));I.reverse()}for(M=L.length,x=R.length,M-x<0&&(I=R,R=L,L=I,x=M),M=0;x;)M=(L[--x]=L[x]+R[x]+M)/u|0,L[x]=u===L[x]?0:L[x]%u;return M&&(L=[M].concat(L),++V),F(m,L,V)},b.precision=b.sd=function(m,x){var I,k,M,$=this;if(m!=null&&m!==!!m)return E(m,1,d),x==null?x=U:E(x,0,8),S(new Y($),m,x);if(!(I=$.c))return null;if(M=I.length-1,k=M*h+1,M=I[M]){for(;M%10==0;M/=10,k--);for(M=I[0];M>=10;M/=10,k++);}return m&&$.e+1>k&&(k=$.e+1),k},b.shiftedBy=function(m){return E(m,-c,c),this.times("1e"+m)},b.squareRoot=b.sqrt=function(){var m,x,I,k,M,$=this,V=$.c,L=$.s,R=$.e,X=P+4,j=new Y("0.5");if(L!==1||!V||!V[0])return new Y(!L||L<0&&(!V||V[0])?NaN:V?$:1/0);if(L=Math.sqrt(+H($)),L==0||L==1/0?(x=O(V),(x.length+R)%2==0&&(x+="0"),L=Math.sqrt(+x),R=v((R+1)/2)-(R<0||R%2),L==1/0?x="5e"+R:(x=L.toExponential(),x=x.slice(0,x.indexOf("e")+1)+R),I=new Y(x)):I=new Y(L+""),I.c[0]){for(R=I.e,L=R+X,L<3&&(L=0);;)if(M=I,I=j.times(M.plus(C($,M,X,1))),O(M.c).slice(0,L)===(x=O(I.c)).slice(0,L))if(I.e<R&&--L,x=x.slice(L-3,L+1),x=="9999"||!k&&x=="4999"){if(!k&&(S(M,M.e+P+2,0),M.times(M).eq($))){I=M;break}X+=4,L+=4,k=1}else{(!+x||!+x.slice(1)&&x.charAt(0)=="5")&&(S(I,I.e+P+2,1),m=!I.times(I).eq($));break}}return S(I,I.e+P+1,U,m)},b.toExponential=function(m,x){return m!=null&&(E(m,0,d),m++),ve(this,m,x,1)},b.toFixed=function(m,x){return m!=null&&(E(m,0,d),m=m+this.e+1),ve(this,m,x)},b.toFormat=function(m,x,I){var k,M=this;if(I==null)m!=null&&x&&typeof x=="object"?(I=x,x=null):m&&typeof m=="object"?(I=m,m=x=null):I=re;else if(typeof I!="object")throw Error(o+"Argument not an object: "+I);if(k=M.toFixed(m,x),M.c){var $,V=k.split("."),L=+I.groupSize,R=+I.secondaryGroupSize,X=I.groupSeparator||"",j=V[0],G=V[1],Z=M.s<0,te=Z?j.slice(1):j,le=te.length;if(R&&($=L,L=R,R=$,le-=$),L>0&&le>0){for($=le%L||L,j=te.substr(0,$);$<le;$+=L)j+=X+te.substr($,L);R>0&&(j+=X+te.slice($)),Z&&(j="-"+j)}k=G?j+(I.decimalSeparator||"")+((R=+I.fractionGroupSize)?G.replace(new RegExp("\\d{"+R+"}\\B","g"),"$&"+(I.fractionGroupSeparator||"")):G):j}return(I.prefix||"")+k+(I.suffix||"")},b.toFraction=function(m){var x,I,k,M,$,V,L,R,X,j,G,Z,te=this,le=te.c;if(m!=null&&(L=new Y(m),!L.isInteger()&&(L.c||L.s!==1)||L.lt(A)))throw Error(o+"Argument "+(L.isInteger()?"out of range: ":"not an integer: ")+H(L));if(!le)return new Y(te);for(x=new Y(A),X=I=new Y(A),k=R=new Y(A),Z=O(le),$=x.e=Z.length-te.e-1,x.c[0]=f[(V=$%h)<0?h+V:V],m=!m||L.comparedTo(x)>0?$>0?x:X:L,V=W,W=1/0,L=new Y(Z),R.c[0]=0;j=C(L,x,0,1),M=I.plus(j.times(k)),M.comparedTo(m)!=1;)I=k,k=M,X=R.plus(j.times(M=X)),R=M,x=L.minus(j.times(M=x)),L=M;return M=C(m.minus(I),k,0,1),R=R.plus(M.times(X)),I=I.plus(M.times(k)),R.s=X.s=te.s,$=$*2,G=C(X,k,$,U).minus(te).abs().comparedTo(C(R,I,$,U).minus(te).abs())<1?[X,k]:[R,I],W=V,G},b.toNumber=function(){return+H(this)},b.toPrecision=function(m,x){return m!=null&&E(m,1,d),ve(this,m,x,2)},b.toString=function(m){var x,I=this,k=I.s,M=I.e;return M===null?k?(x="Infinity",k<0&&(x="-"+x)):x="NaN":(m==null?x=M<=B||M>=q?D(O(I.c),M):_(O(I.c),M,"0"):m===10&&pe?(I=S(new Y(I),P+M+1,U),x=_(O(I.c),I.e,"0")):(E(m,2,se.length,"Base"),x=T(_(O(I.c),M,"0"),10,m,k,!0)),k<0&&I.c[0]&&(x="-"+x)),x},b.valueOf=b.toJSON=function(){return H(this)},b._isBigNumber=!0,w!=null&&Y.set(w),Y}function v(w){var C=w|0;return w>0||w===C?C:C-1}function O(w){for(var C,T,p=1,b=w.length,A=w[0]+"";p<b;){for(C=w[p++]+"",T=h-C.length;T--;C="0"+C);A+=C}for(b=A.length;A.charCodeAt(--b)===48;);return A.slice(0,b+1||1)}function N(w,C){var T,p,b=w.c,A=C.c,P=w.s,U=C.s,B=w.e,q=C.e;if(!P||!U)return null;if(T=b&&!b[0],p=A&&!A[0],T||p)return T?p?0:-U:P;if(P!=U)return P;if(T=P<0,p=B==q,!b||!A)return p?0:!b^T?1:-1;if(!p)return B>q^T?1:-1;for(U=(B=b.length)<(q=A.length)?B:q,P=0;P<U;P++)if(b[P]!=A[P])return b[P]>A[P]^T?1:-1;return B==q?0:B>q^T?1:-1}function E(w,C,T,p){if(w<C||w>T||w!==n(w))throw Error(o+(p||"Argument")+(typeof w=="number"?w<C||w>T?" out of range: ":" not an integer: ":" not a primitive number: ")+String(w))}function g(w){var C=w.c.length-1;return v(w.e/h)==C&&w.c[C]%2!=0}function D(w,C){return(w.length>1?w.charAt(0)+"."+w.slice(1):w)+(C<0?"e":"e+")+C}function _(w,C,T){var p,b;if(C<0){for(b=T+".";++C;b+=T);w=b+w}else if(p=w.length,++C>p){for(b=T,C-=p;--C;b+=T);w+=b}else C<p&&(w=w.slice(0,C)+"."+w.slice(C));return w}r=y(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(ne)})(qa);var Ba=qa.exports;(function(t){var e=Ba,r=t.exports;(function(){var i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s,n,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},a;function u(c){return i.lastIndex=0,i.test(c)?'"'+c.replace(i,function(f){var l=o[f];return typeof l=="string"?l:"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function h(c,f){var l,d,y,v,O=s,N,E=f[c],g=E!=null&&(E instanceof e||e.isBigNumber(E));switch(E&&typeof E=="object"&&typeof E.toJSON=="function"&&(E=E.toJSON(c)),typeof a=="function"&&(E=a.call(f,c,E)),typeof E){case"string":return g?E:u(E);case"number":return isFinite(E)?String(E):"null";case"boolean":case"null":case"bigint":return String(E);case"object":if(!E)return"null";if(s+=n,N=[],Object.prototype.toString.apply(E)==="[object Array]"){for(v=E.length,l=0;l<v;l+=1)N[l]=h(l,E)||"null";return y=N.length===0?"[]":s?`[
`+s+N.join(`,
`+s)+`
`+O+"]":"["+N.join(",")+"]",s=O,y}if(a&&typeof a=="object")for(v=a.length,l=0;l<v;l+=1)typeof a[l]=="string"&&(d=a[l],y=h(d,E),y&&N.push(u(d)+(s?": ":":")+y));else Object.keys(E).forEach(function(D){var _=h(D,E);_&&N.push(u(D)+(s?": ":":")+_)});return y=N.length===0?"{}":s?`{
`+s+N.join(`,
`+s)+`
`+O+"}":"{"+N.join(",")+"}",s=O,y}}typeof r.stringify!="function"&&(r.stringify=function(c,f,l){var d;if(s="",n="",typeof l=="number")for(d=0;d<l;d+=1)n+=" ";else typeof l=="string"&&(n=l);if(a=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return h("",{"":c})})})()})(ja);var dl=ja.exports,zt=null;const ml=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,yl=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;var gl=function(t){var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction<"u")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction<"u")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var r,i,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},n,o=function(v){throw{name:"SyntaxError",message:v,at:r,text:n}},a=function(v){return v&&v!==i&&o("Expected '"+v+"' instead of '"+i+"'"),i=n.charAt(r),r+=1,i},u=function(){var v,O="";for(i==="-"&&(O="-",a("-"));i>="0"&&i<="9";)O+=i,a();if(i===".")for(O+=".";a()&&i>="0"&&i<="9";)O+=i;if(i==="e"||i==="E")for(O+=i,a(),(i==="-"||i==="+")&&(O+=i,a());i>="0"&&i<="9";)O+=i,a();if(v=+O,!isFinite(v))o("Bad number");else return zt==null&&(zt=Ba),O.length>15?e.storeAsString?O:e.useNativeBigInt?BigInt(O):new zt(O):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(v):new zt(v):v},h=function(){var v,O,N="",E;if(i==='"')for(var g=r;a();){if(i==='"')return r-1>g&&(N+=n.substring(g,r-1)),a(),N;if(i==="\\"){if(r-1>g&&(N+=n.substring(g,r-1)),a(),i==="u"){for(E=0,O=0;O<4&&(v=parseInt(a(),16),!!isFinite(v));O+=1)E=E*16+v;N+=String.fromCharCode(E)}else if(typeof s[i]=="string")N+=s[i];else break;g=r}}o("Bad string")},c=function(){for(;i&&i<=" ";)a()},f=function(){switch(i){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}o("Unexpected '"+i+"'")},l,d=function(){var v=[];if(i==="["){if(a("["),c(),i==="]")return a("]"),v;for(;i;){if(v.push(l()),c(),i==="]")return a("]"),v;a(","),c()}}o("Bad array")},y=function(){var v,O=Object.create(null);if(i==="{"){if(a("{"),c(),i==="}")return a("}"),O;for(;i;){if(v=h(),c(),a(":"),e.strict===!0&&Object.hasOwnProperty.call(O,v)&&o('Duplicate key "'+v+'"'),ml.test(v)===!0?e.protoAction==="error"?o("Object contains forbidden prototype property"):e.protoAction==="ignore"?l():O[v]=l():yl.test(v)===!0?e.constructorAction==="error"?o("Object contains forbidden constructor property"):e.constructorAction==="ignore"?l():O[v]=l():O[v]=l(),c(),i==="}")return a("}"),O;a(","),c()}}o("Bad object")};return l=function(){switch(c(),i){case"{":return y();case"[":return d();case'"':return h();case"-":return u();default:return i>="0"&&i<="9"?u():f()}},function(v,O){var N;return n=v+"",r=0,i=" ",N=l(),c(),i&&o("Syntax error"),typeof O=="function"?function E(g,D){var _,w=g[D];return w&&typeof w=="object"&&Object.keys(w).forEach(function(C){_=E(w,C),_!==void 0?w[C]=_:delete w[C]}),O.call(g,D,w)}({"":N},""):N}},vl=gl,Ua=dl.stringify,Xa=vl;dr.exports=function(t){return{parse:Xa(t),stringify:Ua}};dr.exports.parse=Xa();dr.exports.stringify=Ua;var Va=dr.exports,mr={};const wl="@alicloud/pop-core",El="1.8.0",bl="AliCloud POP SDK core",Sl="index.js",Ol="lib/rpc.d.ts",Tl={lint:"eslint --fix lib test",test:"mocha -R spec test/*.test.js","test-cov":"nyc -r=html -r=text -r=lcov mocha -t 3000 -R spec test/*.test.js","test-integration":"mocha -R spec test/*.integration.js",ci:"npm run lint && npm run test-cov"},Cl=["Aliyun","AliCloud","OpenAPI","POP","SDK","Core"],Dl="Jackson Tian",_l="MIT",Al={debug:"^3.1.0",httpx:"^2.1.2","json-bigint":"^1.0.0",kitx:"^1.2.1",xml2js:"^0.5.0"},Fl=["lib","index.js"],Nl={eslint:"^6.6.0","expect.js":"^0.3.1",mocha:"^4",muk:"^0.5.3",nyc:"^12.0.2",rewire:"^4.0.1"},xl={test:"test"},Il={node:">=8.0.0"},Pl={type:"git",url:"git+https://github.com/aliyun/openapi-core-nodejs-sdk.git"},Ll={url:"https://github.com/aliyun/openapi-core-nodejs-sdk/issues"},Ml="https://github.com/aliyun/openapi-core-nodejs-sdk#readme",$l={name:wl,version:El,description:bl,main:Sl,types:Ol,scripts:Tl,keywords:Cl,author:Dl,license:_l,dependencies:Al,files:Fl,devDependencies:Nl,directories:xl,engines:Il,repository:Pl,bugs:Ll,homepage:Ml},Uo=it,mi=$l;mr.DEFAULT_UA=`AlibabaCloud (${Uo.platform()}; ${Uo.arch()}) Node.js/${process.version} Core/${mi.version}`;mr.DEFAULT_CLIENT=`Node.js(${process.version}), ${mi.name}: ${mi.version}`;const Ot=ur,Xo=vt,et=Ci,Rl=Va,Vo=mr;function za(t){return t.slice(0,1).toUpperCase()+t.slice(1)}function kl(t){for(var e=Object.keys(t),r={},i=0;i<e.length;i++){var s=e[i];r[za(s)]=t[s]}return r}function zo(){var t=new Date,e=t.getUTCFullYear(),r=et.pad2(t.getUTCMonth()+1),i=et.pad2(t.getUTCDate()),s=et.pad2(t.getUTCHours()),n=et.pad2(t.getUTCMinutes()),o=et.pad2(t.getUTCSeconds());return`${e}-${r}-${i}T${s}:${n}:${o}Z`}function _t(t){var e=encodeURIComponent(t);return e.replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function yi(t,e,r){for(var i=0;i<r.length;i++){var s=r[i];if(Array.isArray(s))yi(t,`${e}.${i+1}`,s);else if(s&&typeof s=="object"){const o=Object.keys(s);for(var n=0;n<o.length;n++)Array.isArray(s[o[n]])?yi(t,`${e}.${i+1}.${o[n]}`,s[o[n]]):t[`${e}.${i+1}.${o[n]}`]=s[o[n]]}else t[`${e}.${i+1}`]=s}}function jl(t){var e={},r=Object.keys(t);for(let n=0;n<r.length;n++){var i=r[n],s=t[i];Array.isArray(s)?yi(e,i,s):e[i]=s}return e}function ql(t){var e=[],r=jl(t),i=Object.keys(r).sort();for(let o=0;o<i.length;o++){var s=i[o],n=r[s];e.push([_t(s),_t(n)])}return e}function ln(t){for(var e=[],r=0;r<t.length;r++){var[i,s]=t[r];e.push(i+"="+s)}return e.join("&")}let Bl=class{constructor(e,r){if(Ot(e,'must pass "config"'),Ot(e.endpoint,'must pass "config.endpoint"'),!e.endpoint.startsWith("https://")&&!e.endpoint.startsWith("http://"))throw new Error(`"config.endpoint" must starts with 'https://' or 'http://'.`);if(Ot(e.apiVersion,'must pass "config.apiVersion"'),e.credentialsProvider){if(typeof e.credentialsProvider.getCredentials!="function")throw new Error('must pass "config.credentialsProvider" with function "getCredentials()"');this.credentialsProvider=e.credentialsProvider}else{Ot(e.accessKeyId,'must pass "config.accessKeyId"');var i=e.secretAccessKey||e.accessKeySecret;Ot(i,'must pass "config.accessKeySecret"'),this.accessKeyId=e.accessKeyId,this.accessKeySecret=i,this.securityToken=e.securityToken,this.credentialsProvider={getCredentials:async()=>({accessKeyId:e.accessKeyId,accessKeySecret:i,securityToken:e.securityToken})}}if(e.endpoint.endsWith("/")&&(e.endpoint=e.endpoint.slice(0,-1)),this.endpoint=e.endpoint,this.apiVersion=e.apiVersion,this.verbose=r===!0,this.codes=new Set([200,"200","OK","Success","success"]),e.codes)for(var s of e.codes)this.codes.add(s);this.opts=e.opts||{};var n=this.endpoint.startsWith("https://")?ar:sr;this.keepAliveAgent=new n.Agent({keepAlive:!0,keepAliveMsecs:3e3})}async request(e,r={},i={}){const s=await this.credentialsProvider.getCredentials();i=Object.assign({headers:{"x-sdk-client":Vo.DEFAULT_CLIENT,"user-agent":Vo.DEFAULT_UA,"x-acs-action":e,"x-acs-version":this.apiVersion}},this.opts,i),i.formatAction!==!1&&(e=za(e)),i.formatParams!==!1&&(r=kl(r));const n={Format:"JSON",Timestamp:zo(),Version:this.apiVersion};s&&s.accessKeyId&&s.accessKeySecret&&(n.SignatureMethod="HMAC-SHA1",n.SignatureVersion="1.0",n.SignatureNonce=et.makeNonce(),n.AccessKeyId=s.accessKeyId,s.securityToken&&(n.SecurityToken=s.securityToken)),r=Object.assign({Action:e},n,r);const o=(i.method||"GET").toUpperCase(),a=ql(r);if(s&&s.accessKeyId&&s.accessKeySecret){const d=ln(a),y=`${o}&${_t("/")}&${_t(d)}`,v=s.accessKeySecret+"&",O=et.sha1(y,v,"base64");a.push(["Signature",_t(O)])}const u=i.method==="POST"?`${this.endpoint}/`:`${this.endpoint}/?${ln(a)}`,h={url:u,request:null,response:null};i&&!i.agent&&(i.agent=this.keepAliveAgent),i.method==="POST"&&(i.headers=i.headers||{},i.headers["content-type"]="application/x-www-form-urlencoded",i.data=ln(a));const c=await Xo.request(u,i);h.request={headers:c.req.getHeaders?c.req.getHeaders():c.req._headers},h.response={statusCode:c.statusCode,headers:c.headers};const f=await Xo.read(c),l=Rl.parse(f);if(l.Code&&!this.codes.has(l.Code)){const d=new Error(`${l.Message}, URL: ${u}`);throw d.name=l.Code+"Error",d.data=l,d.code=l.Code,d.url=u,d.entry=h,d}return this.verbose?[l,h]:l}_buildParams(){const e={Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureNonce:et.makeNonce(),SignatureVersion:"1.0",Timestamp:zo(),AccessKeyId:this.accessKeyId,Version:this.apiVersion};return this.securityToken&&(e.SecurityToken=this.securityToken),e}};var Wa=Bl,Qe={},fn={},Wo;function Di(){return Wo||(Wo=1,(function(){fn.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(ne)),fn}var hn={},We={},He={},Ho;function Ye(){return Ho||(Ho=1,(function(){var t,e,r,i,s,n,o,a=[].slice,u={}.hasOwnProperty;t=function(){var h,c,f,l,d,y;if(y=arguments[0],d=2<=arguments.length?a.call(arguments,1):[],s(Object.assign))Object.assign.apply(null,arguments);else for(h=0,f=d.length;h<f;h++)if(l=d[h],l!=null)for(c in l)u.call(l,c)&&(y[c]=l[c]);return y},s=function(h){return!!h&&Object.prototype.toString.call(h)==="[object Function]"},n=function(h){var c;return!!h&&((c=typeof h)=="function"||c==="object")},r=function(h){return s(Array.isArray)?Array.isArray(h):Object.prototype.toString.call(h)==="[object Array]"},i=function(h){var c;if(r(h))return!h.length;for(c in h)if(u.call(h,c))return!1;return!0},o=function(h){var c,f;return n(h)&&(f=Object.getPrototypeOf(h))&&(c=f.constructor)&&typeof c=="function"&&c instanceof c&&Function.prototype.toString.call(c)===Function.prototype.toString.call(Object)},e=function(h){return s(h.valueOf)?h.valueOf():h},He.assign=t,He.isFunction=s,He.isObject=n,He.isArray=r,He.isEmpty=i,He.isPlainObject=o,He.getValue=e}).call(ne)),He}var pn={exports:{}},Go;function Ha(){return Go||(Go=1,(function(){pn.exports=function(){function t(){}return t.prototype.hasFeature=function(e,r){return!0},t.prototype.createDocumentType=function(e,r,i){throw new Error("This DOM method is not implemented.")},t.prototype.createDocument=function(e,r,i){throw new Error("This DOM method is not implemented.")},t.prototype.createHTMLDocument=function(e){throw new Error("This DOM method is not implemented.")},t.prototype.getFeature=function(e,r){throw new Error("This DOM method is not implemented.")},t}()}).call(ne)),pn.exports}var dn={exports:{}},mn={exports:{}},yn={exports:{}},Yo;function Ul(){return Yo||(Yo=1,(function(){yn.exports=function(){function t(){}return t.prototype.handleError=function(e){throw new Error(e)},t}()}).call(ne)),yn.exports}var gn={exports:{}},Ko;function Xl(){return Ko||(Ko=1,(function(){gn.exports=function(){function t(e){this.arr=e||[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.arr.length}}),t.prototype.item=function(e){return this.arr[e]||null},t.prototype.contains=function(e){return this.arr.indexOf(e)!==-1},t}()}).call(ne)),gn.exports}var Jo;function Vl(){return Jo||(Jo=1,(function(){var t,e;t=Ul(),e=Xl(),mn.exports=function(){function r(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(r.prototype,"parameterNames",{get:function(){return new e(Object.keys(this.defaultParams))}}),r.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},r.prototype.canSetParameter=function(i,s){return!0},r.prototype.setParameter=function(i,s){return s!=null?this.params[i]=s:delete this.params[i]},r}()}).call(ne)),mn.exports}var vn={exports:{}},wn={exports:{}},En={exports:{}},Qo;function ge(){return Qo||(Qo=1,(function(){En.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(ne)),En.exports}var bn={exports:{}},Zo;function Ga(){return Zo||(Zo=1,(function(){var t;t=ge(),$e(),bn.exports=function(){function e(r,i,s){if(this.parent=r,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),i==null)throw new Error("Missing attribute name. "+this.debugInfo(i));this.name=this.stringify.name(i),this.value=this.stringify.attValue(s),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(r){return this.value=r||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(r){return this.options.writer.attribute(this,this.options.writer.filterOptions(r))},e.prototype.debugInfo=function(r){return r=r||this.name,r==null?"parent: <"+this.parent.name+">":"attribute: {"+r+"}, parent: <"+this.parent.name+">"},e.prototype.isEqualNode=function(r){return!(r.namespaceURI!==this.namespaceURI||r.prefix!==this.prefix||r.localName!==this.localName||r.value!==this.value)},e}()}).call(ne)),bn.exports}var Sn={exports:{}},es;function _i(){return es||(es=1,(function(){Sn.exports=function(){function t(e){this.nodes=e}return Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.getNamedItem=function(e){return this.nodes[e]},t.prototype.setNamedItem=function(e){var r;return r=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,r||null},t.prototype.removeNamedItem=function(e){var r;return r=this.nodes[e],delete this.nodes[e],r||null},t.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},t.prototype.getNamedItemNS=function(e,r){throw new Error("This DOM method is not implemented.")},t.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},t.prototype.removeNamedItemNS=function(e,r){throw new Error("This DOM method is not implemented.")},t}()}).call(ne)),Sn.exports}var ts;function Ai(){return ts||(ts=1,(function(){var t,e,r,i,s,n,o,a,u=function(c,f){for(var l in f)h.call(f,l)&&(c[l]=f[l]);function d(){this.constructor=c}return d.prototype=f.prototype,c.prototype=new d,c.__super__=f.prototype,c},h={}.hasOwnProperty;a=Ye(),o=a.isObject,n=a.isFunction,s=a.getValue,i=$e(),t=ge(),e=Ga(),r=_i(),wn.exports=function(c){u(f,c);function f(l,d,y){var v,O,N,E;if(f.__super__.constructor.call(this,l),d==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(d),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,y!=null&&this.attribute(y),l.type===t.Document&&(this.isRoot=!0,this.documentObject=l,l.rootObject=this,l.children)){for(E=l.children,O=0,N=E.length;O<N;O++)if(v=E[O],v.type===t.DocType){v.name=this.name;break}}}return Object.defineProperty(f.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(f.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(f.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(f.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(f.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(f.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(f.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(f.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new r(this.attribs)),this.attributeMap}}),f.prototype.clone=function(){var l,d,y,v;y=Object.create(this),y.isRoot&&(y.documentObject=null),y.attribs={},v=this.attribs;for(d in v)h.call(v,d)&&(l=v[d],y.attribs[d]=l.clone());return y.children=[],this.children.forEach(function(O){var N;return N=O.clone(),N.parent=y,y.children.push(N)}),y},f.prototype.attribute=function(l,d){var y,v;if(l!=null&&(l=s(l)),o(l))for(y in l)h.call(l,y)&&(v=l[y],this.attribute(y,v));else n(d)&&(d=d.apply()),this.options.keepNullAttributes&&d==null?this.attribs[l]=new e(this,l,""):d!=null&&(this.attribs[l]=new e(this,l,d));return this},f.prototype.removeAttribute=function(l){var d,y,v;if(l==null)throw new Error("Missing attribute name. "+this.debugInfo());if(l=s(l),Array.isArray(l))for(y=0,v=l.length;y<v;y++)d=l[y],delete this.attribs[d];else delete this.attribs[l];return this},f.prototype.toString=function(l){return this.options.writer.element(this,this.options.writer.filterOptions(l))},f.prototype.att=function(l,d){return this.attribute(l,d)},f.prototype.a=function(l,d){return this.attribute(l,d)},f.prototype.getAttribute=function(l){return this.attribs.hasOwnProperty(l)?this.attribs[l].value:null},f.prototype.setAttribute=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getAttributeNode=function(l){return this.attribs.hasOwnProperty(l)?this.attribs[l]:null},f.prototype.setAttributeNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.removeAttributeNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByTagName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getAttributeNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.setAttributeNS=function(l,d,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.removeAttributeNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getAttributeNodeNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.setAttributeNodeNS=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByTagNameNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.hasAttribute=function(l){return this.attribs.hasOwnProperty(l)},f.prototype.hasAttributeNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.setIdAttribute=function(l,d){return this.attribs.hasOwnProperty(l)?this.attribs[l].isId:d},f.prototype.setIdAttributeNS=function(l,d,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.setIdAttributeNode=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByTagName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByTagNameNS=function(l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByClassName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.isEqualNode=function(l){var d,y,v;if(!f.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.namespaceURI!==this.namespaceURI||l.prefix!==this.prefix||l.localName!==this.localName||l.attribs.length!==this.attribs.length)return!1;for(d=y=0,v=this.attribs.length-1;0<=v?y<=v:y>=v;d=0<=v?++y:--y)if(!this.attribs[d].isEqualNode(l.attribs[d]))return!1;return!0},f}(i)}).call(ne)),wn.exports}var On={exports:{}},Tn={exports:{}},rs;function yr(){return rs||(rs=1,(function(){var t,e=function(i,s){for(var n in s)r.call(s,n)&&(i[n]=s[n]);function o(){this.constructor=i}return o.prototype=s.prototype,i.prototype=new o,i.__super__=s.prototype,i},r={}.hasOwnProperty;t=$e(),Tn.exports=function(i){e(s,i);function s(n){s.__super__.constructor.call(this,n),this.value=""}return Object.defineProperty(s.prototype,"data",{get:function(){return this.value},set:function(n){return this.value=n||""}}),Object.defineProperty(s.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(s.prototype,"textContent",{get:function(){return this.value},set:function(n){return this.value=n||""}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.substringData=function(n,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.appendData=function(n){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.insertData=function(n,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.deleteData=function(n,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceData=function(n,o,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.isEqualNode=function(n){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(n)||n.data!==this.data)},s}(t)}).call(ne)),Tn.exports}var ns;function Fi(){return ns||(ns=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=ge(),e=yr(),On.exports=function(s){r(n,s);function n(o,a){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(a)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.cdata(this,this.options.writer.filterOptions(o))},n}(e)}).call(ne)),On.exports}var Cn={exports:{}},is;function Ni(){return is||(is=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=ge(),e=yr(),Cn.exports=function(s){r(n,s);function n(o,a){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(a)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.comment(this,this.options.writer.filterOptions(o))},n}(e)}).call(ne)),Cn.exports}var Dn={exports:{}},os;function xi(){return os||(os=1,(function(){var t,e,r,i=function(n,o){for(var a in o)s.call(o,a)&&(n[a]=o[a]);function u(){this.constructor=n}return u.prototype=o.prototype,n.prototype=new u,n.__super__=o.prototype,n},s={}.hasOwnProperty;r=Ye().isObject,e=$e(),t=ge(),Dn.exports=function(n){i(o,n);function o(a,u,h,c){var f;o.__super__.constructor.call(this,a),r(u)&&(f=u,u=f.version,h=f.encoding,c=f.standalone),u||(u="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(u),h!=null&&(this.encoding=this.stringify.xmlEncoding(h)),c!=null&&(this.standalone=this.stringify.xmlStandalone(c))}return o.prototype.toString=function(a){return this.options.writer.declaration(this,this.options.writer.filterOptions(a))},o}(e)}).call(ne)),Dn.exports}var _n={exports:{}},An={exports:{}},ss;function Ii(){return ss||(ss=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;e=$e(),t=ge(),An.exports=function(s){r(n,s);function n(o,a,u,h,c,f){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(u==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(a));if(!h)throw new Error("Missing DTD attribute type. "+this.debugInfo(a));if(!c)throw new Error("Missing DTD attribute default. "+this.debugInfo(a));if(c.indexOf("#")!==0&&(c="#"+c),!c.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(a));if(f&&!c.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(a));this.elementName=this.stringify.name(a),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(u),this.attributeType=this.stringify.dtdAttType(h),f&&(this.defaultValue=this.stringify.dtdAttDefault(f)),this.defaultValueType=c}return n.prototype.toString=function(o){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(o))},n}(e)}).call(ne)),An.exports}var Fn={exports:{}},as;function Pi(){return as||(as=1,(function(){var t,e,r,i=function(n,o){for(var a in o)s.call(o,a)&&(n[a]=o[a]);function u(){this.constructor=n}return u.prototype=o.prototype,n.prototype=new u,n.__super__=o.prototype,n},s={}.hasOwnProperty;r=Ye().isObject,e=$e(),t=ge(),Fn.exports=function(n){i(o,n);function o(a,u,h,c){if(o.__super__.constructor.call(this,a),h==null)throw new Error("Missing DTD entity name. "+this.debugInfo(h));if(c==null)throw new Error("Missing DTD entity value. "+this.debugInfo(h));if(this.pe=!!u,this.name=this.stringify.name(h),this.type=t.EntityDeclaration,!r(c))this.value=this.stringify.dtdEntityValue(c),this.internal=!0;else{if(!c.pubID&&!c.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(h));if(c.pubID&&!c.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(h));if(this.internal=!1,c.pubID!=null&&(this.pubID=this.stringify.dtdPubID(c.pubID)),c.sysID!=null&&(this.sysID=this.stringify.dtdSysID(c.sysID)),c.nData!=null&&(this.nData=this.stringify.dtdNData(c.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(h))}}return Object.defineProperty(o.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(o.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(o.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(o.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(o.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(o.prototype,"xmlVersion",{get:function(){return null}}),o.prototype.toString=function(a){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(a))},o}(e)}).call(ne)),Fn.exports}var Nn={exports:{}},us;function Li(){return us||(us=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;e=$e(),t=ge(),Nn.exports=function(s){r(n,s);function n(o,a,u){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing DTD element name. "+this.debugInfo());u||(u="(#PCDATA)"),Array.isArray(u)&&(u="("+u.join(",")+")"),this.name=this.stringify.name(a),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(u)}return n.prototype.toString=function(o){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(o))},n}(e)}).call(ne)),Nn.exports}var xn={exports:{}},cs;function Mi(){return cs||(cs=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;e=$e(),t=ge(),xn.exports=function(s){r(n,s);function n(o,a,u){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing DTD notation name. "+this.debugInfo(a));if(!u.pubID&&!u.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(a));this.name=this.stringify.name(a),this.type=t.NotationDeclaration,u.pubID!=null&&(this.pubID=this.stringify.dtdPubID(u.pubID)),u.sysID!=null&&(this.sysID=this.stringify.dtdSysID(u.sysID))}return Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),n.prototype.toString=function(o){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(o))},n}(e)}).call(ne)),xn.exports}var ls;function $i(){return ls||(ls=1,(function(){var t,e,r,i,s,n,o,a,u=function(c,f){for(var l in f)h.call(f,l)&&(c[l]=f[l]);function d(){this.constructor=c}return d.prototype=f.prototype,c.prototype=new d,c.__super__=f.prototype,c},h={}.hasOwnProperty;a=Ye().isObject,o=$e(),t=ge(),e=Ii(),i=Pi(),r=Li(),s=Mi(),n=_i(),_n.exports=function(c){u(f,c);function f(l,d,y){var v,O,N,E,g,D;if(f.__super__.constructor.call(this,l),this.type=t.DocType,l.children){for(E=l.children,O=0,N=E.length;O<N;O++)if(v=E[O],v.type===t.Element){this.name=v.name;break}}this.documentObject=l,a(d)&&(g=d,d=g.pubID,y=g.sysID),y==null&&(D=[d,y],y=D[0],d=D[1]),d!=null&&(this.pubID=this.stringify.dtdPubID(d)),y!=null&&(this.sysID=this.stringify.dtdSysID(y))}return Object.defineProperty(f.prototype,"entities",{get:function(){var l,d,y,v,O;for(v={},O=this.children,d=0,y=O.length;d<y;d++)l=O[d],l.type===t.EntityDeclaration&&!l.pe&&(v[l.name]=l);return new n(v)}}),Object.defineProperty(f.prototype,"notations",{get:function(){var l,d,y,v,O;for(v={},O=this.children,d=0,y=O.length;d<y;d++)l=O[d],l.type===t.NotationDeclaration&&(v[l.name]=l);return new n(v)}}),Object.defineProperty(f.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(f.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(f.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),f.prototype.element=function(l,d){var y;return y=new r(this,l,d),this.children.push(y),this},f.prototype.attList=function(l,d,y,v,O){var N;return N=new e(this,l,d,y,v,O),this.children.push(N),this},f.prototype.entity=function(l,d){var y;return y=new i(this,!1,l,d),this.children.push(y),this},f.prototype.pEntity=function(l,d){var y;return y=new i(this,!0,l,d),this.children.push(y),this},f.prototype.notation=function(l,d){var y;return y=new s(this,l,d),this.children.push(y),this},f.prototype.toString=function(l){return this.options.writer.docType(this,this.options.writer.filterOptions(l))},f.prototype.ele=function(l,d){return this.element(l,d)},f.prototype.att=function(l,d,y,v,O){return this.attList(l,d,y,v,O)},f.prototype.ent=function(l,d){return this.entity(l,d)},f.prototype.pent=function(l,d){return this.pEntity(l,d)},f.prototype.not=function(l,d){return this.notation(l,d)},f.prototype.up=function(){return this.root()||this.documentObject},f.prototype.isEqualNode=function(l){return!(!f.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.name!==this.name||l.publicId!==this.publicId||l.systemId!==this.systemId)},f}(o)}).call(ne)),_n.exports}var In={exports:{}},fs;function Ri(){return fs||(fs=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=ge(),e=$e(),In.exports=function(s){r(n,s);function n(o,a){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(a)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.raw(this,this.options.writer.filterOptions(o))},n}(e)}).call(ne)),In.exports}var Pn={exports:{}},hs;function ki(){return hs||(hs=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=ge(),e=yr(),Pn.exports=function(s){r(n,s);function n(o,a){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(a)}return Object.defineProperty(n.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"wholeText",{get:function(){var o,a,u;for(u="",a=this.previousSibling;a;)u=a.data+u,a=a.previousSibling;for(u+=this.data,o=this.nextSibling;o;)u=u+o.data,o=o.nextSibling;return u}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.text(this,this.options.writer.filterOptions(o))},n.prototype.splitText=function(o){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceWholeText=function(o){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(e)}).call(ne)),Pn.exports}var Ln={exports:{}},ps;function ji(){return ps||(ps=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;t=ge(),e=yr(),Ln.exports=function(s){r(n,s);function n(o,a,u){if(n.__super__.constructor.call(this,o),a==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(a),this.name=this.target,u&&(this.value=this.stringify.insValue(u))}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(o))},n.prototype.isEqualNode=function(o){return!(!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(o)||o.target!==this.target)},n}(e)}).call(ne)),Ln.exports}var Mn={exports:{}},ds;function Ya(){return ds||(ds=1,(function(){var t,e,r=function(s,n){for(var o in n)i.call(n,o)&&(s[o]=n[o]);function a(){this.constructor=s}return a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,s},i={}.hasOwnProperty;e=$e(),t=ge(),Mn.exports=function(s){r(n,s);function n(o){n.__super__.constructor.call(this,o),this.type=t.Dummy}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(o){return""},n}(e)}).call(ne)),Mn.exports}var $n={exports:{}},ms;function zl(){return ms||(ms=1,(function(){$n.exports=function(){function t(e){this.nodes=e}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes.length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.item=function(e){return this.nodes[e]||null},t}()}).call(ne)),$n.exports}var Rn={exports:{}},ys;function Wl(){return ys||(ys=1,(function(){Rn.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(ne)),Rn.exports}var gs;function $e(){return gs||(gs=1,(function(){var t,e,r,i,s,n,o,a,u,h,c,f,l,d,y,v,O,N={}.hasOwnProperty;O=Ye(),v=O.isObject,y=O.isFunction,d=O.isEmpty,l=O.getValue,a=null,r=null,i=null,s=null,n=null,c=null,f=null,h=null,o=null,e=null,u=null,t=null,vn.exports=function(){function E(g){this.parent=g,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=Ai(),r=Fi(),i=Ni(),s=xi(),n=$i(),c=Ri(),f=ki(),h=ji(),o=Ya(),e=ge(),u=zl(),_i(),t=Wl())}return Object.defineProperty(E.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(E.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(E.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(E.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(E.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new u(this.children)),this.childNodeList}}),Object.defineProperty(E.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(E.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(E.prototype,"previousSibling",{get:function(){var g;return g=this.parent.children.indexOf(this),this.parent.children[g-1]||null}}),Object.defineProperty(E.prototype,"nextSibling",{get:function(){var g;return g=this.parent.children.indexOf(this),this.parent.children[g+1]||null}}),Object.defineProperty(E.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(E.prototype,"textContent",{get:function(){var g,D,_,w,C;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(C="",w=this.children,D=0,_=w.length;D<_;D++)g=w[D],g.textContent&&(C+=g.textContent);return C}else return null},set:function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),E.prototype.setParent=function(g){var D,_,w,C,T;for(this.parent=g,g&&(this.options=g.options,this.stringify=g.stringify),C=this.children,T=[],_=0,w=C.length;_<w;_++)D=C[_],T.push(D.setParent(this));return T},E.prototype.element=function(g,D,_){var w,C,T,p,b,A,P,U,B,q,z;if(A=null,D===null&&_==null&&(B=[{},null],D=B[0],_=B[1]),D==null&&(D={}),D=l(D),v(D)||(q=[D,_],_=q[0],D=q[1]),g!=null&&(g=l(g)),Array.isArray(g))for(T=0,P=g.length;T<P;T++)C=g[T],A=this.element(C);else if(y(g))A=this.element(g.apply());else if(v(g)){for(b in g)if(N.call(g,b))if(z=g[b],y(z)&&(z=z.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&b.indexOf(this.stringify.convertAttKey)===0)A=this.attribute(b.substr(this.stringify.convertAttKey.length),z);else if(!this.options.separateArrayItems&&Array.isArray(z)&&d(z))A=this.dummy();else if(v(z)&&d(z))A=this.element(b);else if(!this.options.keepNullNodes&&z==null)A=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(z))for(p=0,U=z.length;p<U;p++)C=z[p],w={},w[b]=C,A=this.element(w);else v(z)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&b.indexOf(this.stringify.convertTextKey)===0?A=this.element(z):(A=this.element(b),A.element(z)):A=this.element(b,z)}else!this.options.keepNullNodes&&_===null?A=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&g.indexOf(this.stringify.convertTextKey)===0?A=this.text(_):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&g.indexOf(this.stringify.convertCDataKey)===0?A=this.cdata(_):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&g.indexOf(this.stringify.convertCommentKey)===0?A=this.comment(_):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&g.indexOf(this.stringify.convertRawKey)===0?A=this.raw(_):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&g.indexOf(this.stringify.convertPIKey)===0?A=this.instruction(g.substr(this.stringify.convertPIKey.length),_):A=this.node(g,D,_);if(A==null)throw new Error("Could not create any elements with: "+g+". "+this.debugInfo());return A},E.prototype.insertBefore=function(g,D,_){var w,C,T,p,b;if(g!=null&&g.type)return T=g,p=D,T.setParent(this),p?(C=children.indexOf(p),b=children.splice(C),children.push(T),Array.prototype.push.apply(children,b)):children.push(T),T;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(g));return C=this.parent.children.indexOf(this),b=this.parent.children.splice(C),w=this.parent.element(g,D,_),Array.prototype.push.apply(this.parent.children,b),w},E.prototype.insertAfter=function(g,D,_){var w,C,T;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(g));return C=this.parent.children.indexOf(this),T=this.parent.children.splice(C+1),w=this.parent.element(g,D,_),Array.prototype.push.apply(this.parent.children,T),w},E.prototype.remove=function(){var g;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return g=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[g,g-g+1].concat([])),this.parent},E.prototype.node=function(g,D,_){var w,C;return g!=null&&(g=l(g)),D||(D={}),D=l(D),v(D)||(C=[D,_],_=C[0],D=C[1]),w=new a(this,g,D),_!=null&&w.text(_),this.children.push(w),w},E.prototype.text=function(g){var D;return v(g)&&this.element(g),D=new f(this,g),this.children.push(D),this},E.prototype.cdata=function(g){var D;return D=new r(this,g),this.children.push(D),this},E.prototype.comment=function(g){var D;return D=new i(this,g),this.children.push(D),this},E.prototype.commentBefore=function(g){var D,_;return D=this.parent.children.indexOf(this),_=this.parent.children.splice(D),this.parent.comment(g),Array.prototype.push.apply(this.parent.children,_),this},E.prototype.commentAfter=function(g){var D,_;return D=this.parent.children.indexOf(this),_=this.parent.children.splice(D+1),this.parent.comment(g),Array.prototype.push.apply(this.parent.children,_),this},E.prototype.raw=function(g){var D;return D=new c(this,g),this.children.push(D),this},E.prototype.dummy=function(){var g;return g=new o(this),g},E.prototype.instruction=function(g,D){var _,w,C,T,p;if(g!=null&&(g=l(g)),D!=null&&(D=l(D)),Array.isArray(g))for(T=0,p=g.length;T<p;T++)_=g[T],this.instruction(_);else if(v(g))for(_ in g)N.call(g,_)&&(w=g[_],this.instruction(_,w));else y(D)&&(D=D.apply()),C=new h(this,g,D),this.children.push(C);return this},E.prototype.instructionBefore=function(g,D){var _,w;return _=this.parent.children.indexOf(this),w=this.parent.children.splice(_),this.parent.instruction(g,D),Array.prototype.push.apply(this.parent.children,w),this},E.prototype.instructionAfter=function(g,D){var _,w;return _=this.parent.children.indexOf(this),w=this.parent.children.splice(_+1),this.parent.instruction(g,D),Array.prototype.push.apply(this.parent.children,w),this},E.prototype.declaration=function(g,D,_){var w,C;return w=this.document(),C=new s(w,g,D,_),w.children.length===0?w.children.unshift(C):w.children[0].type===e.Declaration?w.children[0]=C:w.children.unshift(C),w.root()||w},E.prototype.dtd=function(g,D){var _,w,C,T,p,b,A,P,U,B;for(w=this.document(),C=new n(w,g,D),U=w.children,T=p=0,A=U.length;p<A;T=++p)if(_=U[T],_.type===e.DocType)return w.children[T]=C,C;for(B=w.children,T=b=0,P=B.length;b<P;T=++b)if(_=B[T],_.isRoot)return w.children.splice(T,0,C),C;return w.children.push(C),C},E.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},E.prototype.root=function(){var g;for(g=this;g;){if(g.type===e.Document)return g.rootObject;if(g.isRoot)return g;g=g.parent}},E.prototype.document=function(){var g;for(g=this;g;){if(g.type===e.Document)return g;g=g.parent}},E.prototype.end=function(g){return this.document().end(g)},E.prototype.prev=function(){var g;if(g=this.parent.children.indexOf(this),g<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[g-1]},E.prototype.next=function(){var g;if(g=this.parent.children.indexOf(this),g===-1||g===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[g+1]},E.prototype.importDocument=function(g){var D;return D=g.root().clone(),D.parent=this,D.isRoot=!1,this.children.push(D),this},E.prototype.debugInfo=function(g){var D,_;return g=g||this.name,g==null&&!((D=this.parent)!=null&&D.name)?"":g==null?"parent: <"+this.parent.name+">":(_=this.parent)!=null&&_.name?"node: <"+g+">, parent: <"+this.parent.name+">":"node: <"+g+">"},E.prototype.ele=function(g,D,_){return this.element(g,D,_)},E.prototype.nod=function(g,D,_){return this.node(g,D,_)},E.prototype.txt=function(g){return this.text(g)},E.prototype.dat=function(g){return this.cdata(g)},E.prototype.com=function(g){return this.comment(g)},E.prototype.ins=function(g,D){return this.instruction(g,D)},E.prototype.doc=function(){return this.document()},E.prototype.dec=function(g,D,_){return this.declaration(g,D,_)},E.prototype.e=function(g,D,_){return this.element(g,D,_)},E.prototype.n=function(g,D,_){return this.node(g,D,_)},E.prototype.t=function(g){return this.text(g)},E.prototype.d=function(g){return this.cdata(g)},E.prototype.c=function(g){return this.comment(g)},E.prototype.r=function(g){return this.raw(g)},E.prototype.i=function(g,D){return this.instruction(g,D)},E.prototype.u=function(){return this.up()},E.prototype.importXMLBuilder=function(g){return this.importDocument(g)},E.prototype.replaceChild=function(g,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.removeChild=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.appendChild=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.hasChildNodes=function(){return this.children.length!==0},E.prototype.cloneNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.isSupported=function(g,D){return!0},E.prototype.hasAttributes=function(){return this.attribs.length!==0},E.prototype.compareDocumentPosition=function(g){var D,_;return D=this,D===g?0:this.document()!==g.document()?(_=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?_|=t.Preceding:_|=t.Following,_):D.isAncestor(g)?t.Contains|t.Preceding:D.isDescendant(g)?t.Contains|t.Following:D.isPreceding(g)?t.Preceding:t.Following},E.prototype.isSameNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.lookupPrefix=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.isDefaultNamespace=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.lookupNamespaceURI=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.isEqualNode=function(g){var D,_,w;if(g.nodeType!==this.nodeType||g.children.length!==this.children.length)return!1;for(D=_=0,w=this.children.length-1;0<=w?_<=w:_>=w;D=0<=w?++_:--_)if(!this.children[D].isEqualNode(g.children[D]))return!1;return!0},E.prototype.getFeature=function(g,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.setUserData=function(g,D,_){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.getUserData=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.contains=function(g){return g?g===this||this.isDescendant(g):!1},E.prototype.isDescendant=function(g){var D,_,w,C,T;for(T=this.children,w=0,C=T.length;w<C;w++)if(D=T[w],g===D||(_=D.isDescendant(g),_))return!0;return!1},E.prototype.isAncestor=function(g){return g.isDescendant(this)},E.prototype.isPreceding=function(g){var D,_;return D=this.treePosition(g),_=this.treePosition(this),D===-1||_===-1?!1:D<_},E.prototype.isFollowing=function(g){var D,_;return D=this.treePosition(g),_=this.treePosition(this),D===-1||_===-1?!1:D>_},E.prototype.treePosition=function(g){var D,_;return _=0,D=!1,this.foreachTreeNode(this.document(),function(w){if(_++,!D&&w===g)return D=!0}),D?_:-1},E.prototype.foreachTreeNode=function(g,D){var _,w,C,T,p;for(g||(g=this.document()),T=g.children,w=0,C=T.length;w<C;w++){if(_=T[w],p=D(_))return p;if(p=this.foreachTreeNode(_,D),p)return p}},E}()}).call(ne)),vn.exports}var kn={exports:{}},vs;function Ka(){return vs||(vs=1,(function(){var t=function(r,i){return function(){return r.apply(i,arguments)}},e={}.hasOwnProperty;kn.exports=function(){function r(i){this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this);var s,n,o;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),n=i.stringify||{};for(s in n)e.call(n,s)&&(o=n[s],this[s]=o)}return r.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},r.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},r.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},r.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},r.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},r.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},r.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},r.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},r.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},r.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},r.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(i){var s,n;if(this.options.noValidation)return i;if(s="",this.options.version==="1.0"){if(s=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=i.match(s))throw new Error("Invalid character in string: "+i+" at index "+n.index)}else if(this.options.version==="1.1"&&(s=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=i.match(s)))throw new Error("Invalid character in string: "+i+" at index "+n.index);return i},r.prototype.assertLegalName=function(i){var s;if(this.options.noValidation)return i;if(this.assertLegalChar(i),s=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(s))throw new Error("Invalid character in name");return i},r.prototype.textEscape=function(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},r.prototype.attEscape=function(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},r}()}).call(ne)),kn.exports}var jn={exports:{}},qn={exports:{}},Bn={exports:{}},ws;function gr(){return ws||(ws=1,(function(){Bn.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(ne)),Bn.exports}var Es;function Ja(){return Es||(Es=1,(function(){var t,e,r,i={}.hasOwnProperty;r=Ye().assign,t=ge(),xi(),$i(),Fi(),Ni(),Ai(),Ri(),ki(),ji(),Ya(),Ii(),Li(),Pi(),Mi(),e=gr(),qn.exports=function(){function s(n){var o,a,u;n||(n={}),this.options=n,a=n.writer||{};for(o in a)i.call(a,o)&&(u=a[o],this["_"+o]=this[o],this[o]=u)}return s.prototype.filterOptions=function(n){var o,a,u,h,c,f,l,d;return n||(n={}),n=r({},this.options,n),o={writer:this},o.pretty=n.pretty||!1,o.allowEmpty=n.allowEmpty||!1,o.indent=(a=n.indent)!=null?a:"  ",o.newline=(u=n.newline)!=null?u:`
`,o.offset=(h=n.offset)!=null?h:0,o.dontPrettyTextNodes=(c=(f=n.dontPrettyTextNodes)!=null?f:n.dontprettytextnodes)!=null?c:0,o.spaceBeforeSlash=(l=(d=n.spaceBeforeSlash)!=null?d:n.spacebeforeslash)!=null?l:"",o.spaceBeforeSlash===!0&&(o.spaceBeforeSlash=" "),o.suppressPrettyCount=0,o.user={},o.state=e.None,o},s.prototype.indent=function(n,o,a){var u;return!o.pretty||o.suppressPrettyCount?"":o.pretty&&(u=(a||0)+o.offset+1,u>0)?new Array(u).join(o.indent):""},s.prototype.endline=function(n,o,a){return!o.pretty||o.suppressPrettyCount?"":o.newline},s.prototype.attribute=function(n,o,a){var u;return this.openAttribute(n,o,a),u=" "+n.name+'="'+n.value+'"',this.closeAttribute(n,o,a),u},s.prototype.cdata=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<![CDATA[",o.state=e.InsideTag,u+=n.value,o.state=e.CloseTag,u+="]]>"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.comment=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!-- ",o.state=e.InsideTag,u+=n.value,o.state=e.CloseTag,u+=" -->"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.declaration=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<?xml",o.state=e.InsideTag,u+=' version="'+n.version+'"',n.encoding!=null&&(u+=' encoding="'+n.encoding+'"'),n.standalone!=null&&(u+=' standalone="'+n.standalone+'"'),o.state=e.CloseTag,u+=o.spaceBeforeSlash+"?>",u+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.docType=function(n,o,a){var u,h,c,f,l;if(a||(a=0),this.openNode(n,o,a),o.state=e.OpenTag,f=this.indent(n,o,a),f+="<!DOCTYPE "+n.root().name,n.pubID&&n.sysID?f+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.sysID&&(f+=' SYSTEM "'+n.sysID+'"'),n.children.length>0){for(f+=" [",f+=this.endline(n,o,a),o.state=e.InsideTag,l=n.children,h=0,c=l.length;h<c;h++)u=l[h],f+=this.writeChildNode(u,o,a+1);o.state=e.CloseTag,f+="]"}return o.state=e.CloseTag,f+=o.spaceBeforeSlash+">",f+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),f},s.prototype.element=function(n,o,a){var u,h,c,f,l,d,y,v,O,N,E,g,D,_;a||(a=0),N=!1,E="",this.openNode(n,o,a),o.state=e.OpenTag,E+=this.indent(n,o,a)+"<"+n.name,g=n.attribs;for(O in g)i.call(g,O)&&(u=g[O],E+=this.attribute(u,o,a));if(c=n.children.length,f=c===0?null:n.children[0],c===0||n.children.every(function(w){return(w.type===t.Text||w.type===t.Raw)&&w.value===""}))o.allowEmpty?(E+=">",o.state=e.CloseTag,E+="</"+n.name+">"+this.endline(n,o,a)):(o.state=e.CloseTag,E+=o.spaceBeforeSlash+"/>"+this.endline(n,o,a));else if(o.pretty&&c===1&&(f.type===t.Text||f.type===t.Raw)&&f.value!=null)E+=">",o.state=e.InsideTag,o.suppressPrettyCount++,N=!0,E+=this.writeChildNode(f,o,a+1),o.suppressPrettyCount--,N=!1,o.state=e.CloseTag,E+="</"+n.name+">"+this.endline(n,o,a);else{if(o.dontPrettyTextNodes){for(D=n.children,l=0,y=D.length;l<y;l++)if(h=D[l],(h.type===t.Text||h.type===t.Raw)&&h.value!=null){o.suppressPrettyCount++,N=!0;break}}for(E+=">"+this.endline(n,o,a),o.state=e.InsideTag,_=n.children,d=0,v=_.length;d<v;d++)h=_[d],E+=this.writeChildNode(h,o,a+1);o.state=e.CloseTag,E+=this.indent(n,o,a)+"</"+n.name+">",N&&o.suppressPrettyCount--,E+=this.endline(n,o,a),o.state=e.None}return this.closeNode(n,o,a),E},s.prototype.writeChildNode=function(n,o,a){switch(n.type){case t.CData:return this.cdata(n,o,a);case t.Comment:return this.comment(n,o,a);case t.Element:return this.element(n,o,a);case t.Raw:return this.raw(n,o,a);case t.Text:return this.text(n,o,a);case t.ProcessingInstruction:return this.processingInstruction(n,o,a);case t.Dummy:return"";case t.Declaration:return this.declaration(n,o,a);case t.DocType:return this.docType(n,o,a);case t.AttributeDeclaration:return this.dtdAttList(n,o,a);case t.ElementDeclaration:return this.dtdElement(n,o,a);case t.EntityDeclaration:return this.dtdEntity(n,o,a);case t.NotationDeclaration:return this.dtdNotation(n,o,a);default:throw new Error("Unknown XML node type: "+n.constructor.name)}},s.prototype.processingInstruction=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<?",o.state=e.InsideTag,u+=n.target,n.value&&(u+=" "+n.value),o.state=e.CloseTag,u+=o.spaceBeforeSlash+"?>",u+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.raw=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a),o.state=e.InsideTag,u+=n.value,o.state=e.CloseTag,u+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.text=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a),o.state=e.InsideTag,u+=n.value,o.state=e.CloseTag,u+=this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.dtdAttList=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!ATTLIST",o.state=e.InsideTag,u+=" "+n.elementName+" "+n.attributeName+" "+n.attributeType,n.defaultValueType!=="#DEFAULT"&&(u+=" "+n.defaultValueType),n.defaultValue&&(u+=' "'+n.defaultValue+'"'),o.state=e.CloseTag,u+=o.spaceBeforeSlash+">"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.dtdElement=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!ELEMENT",o.state=e.InsideTag,u+=" "+n.name+" "+n.value,o.state=e.CloseTag,u+=o.spaceBeforeSlash+">"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.dtdEntity=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!ENTITY",o.state=e.InsideTag,n.pe&&(u+=" %"),u+=" "+n.name,n.value?u+=' "'+n.value+'"':(n.pubID&&n.sysID?u+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.sysID&&(u+=' SYSTEM "'+n.sysID+'"'),n.nData&&(u+=" NDATA "+n.nData)),o.state=e.CloseTag,u+=o.spaceBeforeSlash+">"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.dtdNotation=function(n,o,a){var u;return this.openNode(n,o,a),o.state=e.OpenTag,u=this.indent(n,o,a)+"<!NOTATION",o.state=e.InsideTag,u+=" "+n.name,n.pubID&&n.sysID?u+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.pubID?u+=' PUBLIC "'+n.pubID+'"':n.sysID&&(u+=' SYSTEM "'+n.sysID+'"'),o.state=e.CloseTag,u+=o.spaceBeforeSlash+">"+this.endline(n,o,a),o.state=e.None,this.closeNode(n,o,a),u},s.prototype.openNode=function(n,o,a){},s.prototype.closeNode=function(n,o,a){},s.prototype.openAttribute=function(n,o,a){},s.prototype.closeAttribute=function(n,o,a){},s}()}).call(ne)),qn.exports}var bs;function qi(){return bs||(bs=1,(function(){var t,e=function(i,s){for(var n in s)r.call(s,n)&&(i[n]=s[n]);function o(){this.constructor=i}return o.prototype=s.prototype,i.prototype=new o,i.__super__=s.prototype,i},r={}.hasOwnProperty;t=Ja(),jn.exports=function(i){e(s,i);function s(n){s.__super__.constructor.call(this,n)}return s.prototype.document=function(n,o){var a,u,h,c,f;for(o=this.filterOptions(o),c="",f=n.children,u=0,h=f.length;u<h;u++)a=f[u],c+=this.writeChildNode(a,o,0);return o.pretty&&c.slice(-o.newline.length)===o.newline&&(c=c.slice(0,-o.newline.length)),c},s}(t)}).call(ne)),jn.exports}var Ss;function Qa(){return Ss||(Ss=1,(function(){var t,e,r,i,s,n,o,a=function(h,c){for(var f in c)u.call(c,f)&&(h[f]=c[f]);function l(){this.constructor=h}return l.prototype=c.prototype,h.prototype=new l,h.__super__=c.prototype,h},u={}.hasOwnProperty;o=Ye().isPlainObject,r=Ha(),e=Vl(),i=$e(),t=ge(),n=Ka(),s=qi(),dn.exports=function(h){a(c,h);function c(f){c.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new e,f||(f={}),f.writer||(f.writer=new s),this.options=f,this.stringify=new n(f)}return Object.defineProperty(c.prototype,"implementation",{value:new r}),Object.defineProperty(c.prototype,"doctype",{get:function(){var f,l,d,y;for(y=this.children,l=0,d=y.length;l<d;l++)if(f=y[l],f.type===t.DocType)return f;return null}}),Object.defineProperty(c.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(c.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(c.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(c.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(c.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(c.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(c.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(c.prototype,"origin",{get:function(){return null}}),Object.defineProperty(c.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(c.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(c.prototype,"contentType",{get:function(){return null}}),c.prototype.end=function(f){var l;return l={},f?o(f)&&(l=f,f=this.options.writer):f=this.options.writer,f.document(this,f.filterOptions(l))},c.prototype.toString=function(f){return this.options.writer.document(this,this.options.writer.filterOptions(f))},c.prototype.createElement=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createTextNode=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createComment=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createCDATASection=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createProcessingInstruction=function(f,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createAttribute=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createEntityReference=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByTagName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.importNode=function(f,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createElementNS=function(f,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createAttributeNS=function(f,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByTagNameNS=function(f,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementById=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.adoptNode=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.renameNode=function(f,l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByClassName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createEvent=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createNodeIterator=function(f,l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createTreeWalker=function(f,l,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c}(i)}).call(ne)),dn.exports}var Un={exports:{}},Os;function Hl(){return Os||(Os=1,(function(){var t,e,r,i,s,n,o,a,u,h,c,f,l,d,y,v,O,N,E,g,D,_,w,C={}.hasOwnProperty;w=Ye(),D=w.isObject,g=w.isFunction,_=w.isPlainObject,E=w.getValue,t=ge(),f=Qa(),l=Ai(),i=Fi(),s=Ni(),y=Ri(),N=ki(),d=ji(),h=xi(),c=$i(),n=Ii(),a=Pi(),o=Li(),u=Mi(),r=Ga(),O=Ka(),v=qi(),e=gr(),Un.exports=function(){function T(p,b,A){var P;this.name="?xml",this.type=t.Document,p||(p={}),P={},p.writer?_(p.writer)&&(P=p.writer,p.writer=new v):p.writer=new v,this.options=p,this.writer=p.writer,this.writerOptions=this.writer.filterOptions(P),this.stringify=new O(p),this.onDataCallback=b||function(){},this.onEndCallback=A||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return T.prototype.createChildNode=function(p){var b,A,P,U,B,q,z,W;switch(p.type){case t.CData:this.cdata(p.value);break;case t.Comment:this.comment(p.value);break;case t.Element:P={},z=p.attribs;for(A in z)C.call(z,A)&&(b=z[A],P[A]=b.value);this.node(p.name,P);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(p.value);break;case t.Text:this.text(p.value);break;case t.ProcessingInstruction:this.instruction(p.target,p.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+p.constructor.name)}for(W=p.children,B=0,q=W.length;B<q;B++)U=W[B],this.createChildNode(U),U.type===t.Element&&this.up();return this},T.prototype.dummy=function(){return this},T.prototype.node=function(p,b,A){var P;if(p==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(p));return this.openCurrent(),p=E(p),b==null&&(b={}),b=E(b),D(b)||(P=[b,A],A=P[0],b=P[1]),this.currentNode=new l(this,p,b),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,A!=null&&this.text(A),this},T.prototype.element=function(p,b,A){var P,U,B,q,z,W;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(p)||D(p)||g(p))for(q=this.options.noValidation,this.options.noValidation=!0,W=new f(this.options).element("TEMP_ROOT"),W.element(p),this.options.noValidation=q,z=W.children,U=0,B=z.length;U<B;U++)P=z[U],this.createChildNode(P),P.type===t.Element&&this.up();else this.node(p,b,A);return this},T.prototype.attribute=function(p,b){var A,P;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(p));if(p!=null&&(p=E(p)),D(p))for(A in p)C.call(p,A)&&(P=p[A],this.attribute(A,P));else g(b)&&(b=b.apply()),this.options.keepNullAttributes&&b==null?this.currentNode.attribs[p]=new r(this,p,""):b!=null&&(this.currentNode.attribs[p]=new r(this,p,b));return this},T.prototype.text=function(p){var b;return this.openCurrent(),b=new N(this,p),this.onData(this.writer.text(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.cdata=function(p){var b;return this.openCurrent(),b=new i(this,p),this.onData(this.writer.cdata(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.comment=function(p){var b;return this.openCurrent(),b=new s(this,p),this.onData(this.writer.comment(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.raw=function(p){var b;return this.openCurrent(),b=new y(this,p),this.onData(this.writer.raw(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.instruction=function(p,b){var A,P,U,B,q;if(this.openCurrent(),p!=null&&(p=E(p)),b!=null&&(b=E(b)),Array.isArray(p))for(A=0,B=p.length;A<B;A++)P=p[A],this.instruction(P);else if(D(p))for(P in p)C.call(p,P)&&(U=p[P],this.instruction(P,U));else g(b)&&(b=b.apply()),q=new d(this,p,b),this.onData(this.writer.processingInstruction(q,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},T.prototype.declaration=function(p,b,A){var P;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return P=new h(this,p,b,A),this.onData(this.writer.declaration(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.doctype=function(p,b,A){if(this.openCurrent(),p==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new c(this,b,A),this.currentNode.rootNodeName=p,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},T.prototype.dtdElement=function(p,b){var A;return this.openCurrent(),A=new o(this,p,b),this.onData(this.writer.dtdElement(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.attList=function(p,b,A,P,U){var B;return this.openCurrent(),B=new n(this,p,b,A,P,U),this.onData(this.writer.dtdAttList(B,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.entity=function(p,b){var A;return this.openCurrent(),A=new a(this,!1,p,b),this.onData(this.writer.dtdEntity(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.pEntity=function(p,b){var A;return this.openCurrent(),A=new a(this,!0,p,b),this.onData(this.writer.dtdEntity(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.notation=function(p,b){var A;return this.openCurrent(),A=new u(this,p,b),this.onData(this.writer.dtdNotation(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},T.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},T.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},T.prototype.openNode=function(p){var b,A,P,U;if(!p.isOpen){if(!this.root&&this.currentLevel===0&&p.type===t.Element&&(this.root=p),A="",p.type===t.Element){this.writerOptions.state=e.OpenTag,A=this.writer.indent(p,this.writerOptions,this.currentLevel)+"<"+p.name,U=p.attribs;for(P in U)C.call(U,P)&&(b=U[P],A+=this.writer.attribute(b,this.writerOptions,this.currentLevel));A+=(p.children?">":"/>")+this.writer.endline(p,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,A=this.writer.indent(p,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+p.rootNodeName,p.pubID&&p.sysID?A+=' PUBLIC "'+p.pubID+'" "'+p.sysID+'"':p.sysID&&(A+=' SYSTEM "'+p.sysID+'"'),p.children?(A+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,A+=">"),A+=this.writer.endline(p,this.writerOptions,this.currentLevel);return this.onData(A,this.currentLevel),p.isOpen=!0}},T.prototype.closeNode=function(p){var b;if(!p.isClosed)return b="",this.writerOptions.state=e.CloseTag,p.type===t.Element?b=this.writer.indent(p,this.writerOptions,this.currentLevel)+"</"+p.name+">"+this.writer.endline(p,this.writerOptions,this.currentLevel):b=this.writer.indent(p,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(p,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(b,this.currentLevel),p.isClosed=!0},T.prototype.onData=function(p,b){return this.documentStarted=!0,this.onDataCallback(p,b+1)},T.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},T.prototype.debugInfo=function(p){return p==null?"":"node: <"+p+">"},T.prototype.ele=function(){return this.element.apply(this,arguments)},T.prototype.nod=function(p,b,A){return this.node(p,b,A)},T.prototype.txt=function(p){return this.text(p)},T.prototype.dat=function(p){return this.cdata(p)},T.prototype.com=function(p){return this.comment(p)},T.prototype.ins=function(p,b){return this.instruction(p,b)},T.prototype.dec=function(p,b,A){return this.declaration(p,b,A)},T.prototype.dtd=function(p,b,A){return this.doctype(p,b,A)},T.prototype.e=function(p,b,A){return this.element(p,b,A)},T.prototype.n=function(p,b,A){return this.node(p,b,A)},T.prototype.t=function(p){return this.text(p)},T.prototype.d=function(p){return this.cdata(p)},T.prototype.c=function(p){return this.comment(p)},T.prototype.r=function(p){return this.raw(p)},T.prototype.i=function(p,b){return this.instruction(p,b)},T.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},T.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},T.prototype.ent=function(p,b){return this.entity(p,b)},T.prototype.pent=function(p,b){return this.pEntity(p,b)},T.prototype.not=function(p,b){return this.notation(p,b)},T}()}).call(ne)),Un.exports}var Xn={exports:{}},Ts;function Gl(){return Ts||(Ts=1,(function(){var t,e,r,i=function(n,o){for(var a in o)s.call(o,a)&&(n[a]=o[a]);function u(){this.constructor=n}return u.prototype=o.prototype,n.prototype=new u,n.__super__=o.prototype,n},s={}.hasOwnProperty;t=ge(),r=Ja(),e=gr(),Xn.exports=function(n){i(o,n);function o(a,u){this.stream=a,o.__super__.constructor.call(this,u)}return o.prototype.endline=function(a,u,h){return a.isLastRootNode&&u.state===e.CloseTag?"":o.__super__.endline.call(this,a,u,h)},o.prototype.document=function(a,u){var h,c,f,l,d,y,v,O,N;for(v=a.children,c=f=0,d=v.length;f<d;c=++f)h=v[c],h.isLastRootNode=c===a.children.length-1;for(u=this.filterOptions(u),O=a.children,N=[],l=0,y=O.length;l<y;l++)h=O[l],N.push(this.writeChildNode(h,u,0));return N},o.prototype.attribute=function(a,u,h){return this.stream.write(o.__super__.attribute.call(this,a,u,h))},o.prototype.cdata=function(a,u,h){return this.stream.write(o.__super__.cdata.call(this,a,u,h))},o.prototype.comment=function(a,u,h){return this.stream.write(o.__super__.comment.call(this,a,u,h))},o.prototype.declaration=function(a,u,h){return this.stream.write(o.__super__.declaration.call(this,a,u,h))},o.prototype.docType=function(a,u,h){var c,f,l,d;if(h||(h=0),this.openNode(a,u,h),u.state=e.OpenTag,this.stream.write(this.indent(a,u,h)),this.stream.write("<!DOCTYPE "+a.root().name),a.pubID&&a.sysID?this.stream.write(' PUBLIC "'+a.pubID+'" "'+a.sysID+'"'):a.sysID&&this.stream.write(' SYSTEM "'+a.sysID+'"'),a.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(a,u,h)),u.state=e.InsideTag,d=a.children,f=0,l=d.length;f<l;f++)c=d[f],this.writeChildNode(c,u,h+1);u.state=e.CloseTag,this.stream.write("]")}return u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+">"),this.stream.write(this.endline(a,u,h)),u.state=e.None,this.closeNode(a,u,h)},o.prototype.element=function(a,u,h){var c,f,l,d,y,v,O,N,E;h||(h=0),this.openNode(a,u,h),u.state=e.OpenTag,this.stream.write(this.indent(a,u,h)+"<"+a.name),N=a.attribs;for(O in N)s.call(N,O)&&(c=N[O],this.attribute(c,u,h));if(l=a.children.length,d=l===0?null:a.children[0],l===0||a.children.every(function(g){return(g.type===t.Text||g.type===t.Raw)&&g.value===""}))u.allowEmpty?(this.stream.write(">"),u.state=e.CloseTag,this.stream.write("</"+a.name+">")):(u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+"/>"));else if(u.pretty&&l===1&&(d.type===t.Text||d.type===t.Raw)&&d.value!=null)this.stream.write(">"),u.state=e.InsideTag,u.suppressPrettyCount++,this.writeChildNode(d,u,h+1),u.suppressPrettyCount--,u.state=e.CloseTag,this.stream.write("</"+a.name+">");else{for(this.stream.write(">"+this.endline(a,u,h)),u.state=e.InsideTag,E=a.children,y=0,v=E.length;y<v;y++)f=E[y],this.writeChildNode(f,u,h+1);u.state=e.CloseTag,this.stream.write(this.indent(a,u,h)+"</"+a.name+">")}return this.stream.write(this.endline(a,u,h)),u.state=e.None,this.closeNode(a,u,h)},o.prototype.processingInstruction=function(a,u,h){return this.stream.write(o.__super__.processingInstruction.call(this,a,u,h))},o.prototype.raw=function(a,u,h){return this.stream.write(o.__super__.raw.call(this,a,u,h))},o.prototype.text=function(a,u,h){return this.stream.write(o.__super__.text.call(this,a,u,h))},o.prototype.dtdAttList=function(a,u,h){return this.stream.write(o.__super__.dtdAttList.call(this,a,u,h))},o.prototype.dtdElement=function(a,u,h){return this.stream.write(o.__super__.dtdElement.call(this,a,u,h))},o.prototype.dtdEntity=function(a,u,h){return this.stream.write(o.__super__.dtdEntity.call(this,a,u,h))},o.prototype.dtdNotation=function(a,u,h){return this.stream.write(o.__super__.dtdNotation.call(this,a,u,h))},o}(r)}).call(ne)),Xn.exports}var Cs;function Yl(){return Cs||(Cs=1,(function(){var t,e,r,i,s,n,o,a,u,h;h=Ye(),a=h.assign,u=h.isFunction,r=Ha(),i=Qa(),s=Hl(),o=qi(),n=Gl(),t=ge(),e=gr(),We.create=function(c,f,l,d){var y,v;if(c==null)throw new Error("Root element needs a name.");return d=a({},f,l,d),y=new i(d),v=y.element(c),d.headless||(y.declaration(d),(d.pubID!=null||d.sysID!=null)&&y.dtd(d)),v},We.begin=function(c,f,l){var d;return u(c)&&(d=[c,f],f=d[0],l=d[1],c={}),f?new s(c,f,l):new i(c)},We.stringWriter=function(c){return new o(c)},We.streamWriter=function(c,f){return new n(c,f)},We.implementation=new r,We.nodeType=t,We.writerState=e}).call(ne)),We}var Ds;function Kl(){return Ds||(Ds=1,(function(){var t,e,r,i,s,n={}.hasOwnProperty;t=Yl(),e=Di().defaults,i=function(o){return typeof o=="string"&&(o.indexOf("&")>=0||o.indexOf(">")>=0||o.indexOf("<")>=0)},s=function(o){return"<![CDATA["+r(o)+"]]>"},r=function(o){return o.replace("]]>","]]]]><![CDATA[>")},hn.Builder=function(){function o(a){var u,h,c;this.options={},h=e["0.2"];for(u in h)n.call(h,u)&&(c=h[u],this.options[u]=c);for(u in a)n.call(a,u)&&(c=a[u],this.options[u]=c)}return o.prototype.buildObject=function(a){var u,h,c,f,l;return u=this.options.attrkey,h=this.options.charkey,Object.keys(a).length===1&&this.options.rootName===e["0.2"].rootName?(l=Object.keys(a)[0],a=a[l]):l=this.options.rootName,c=function(d){return function(y,v){var O,N,E,g,D,_;if(typeof v!="object")d.options.cdata&&i(v)?y.raw(s(v)):y.txt(v);else if(Array.isArray(v)){for(g in v)if(n.call(v,g)){N=v[g];for(D in N)E=N[D],y=c(y.ele(D),E).up()}}else for(D in v)if(n.call(v,D))if(N=v[D],D===u){if(typeof N=="object")for(O in N)_=N[O],y=y.att(O,_)}else if(D===h)d.options.cdata&&i(N)?y=y.raw(s(N)):y=y.txt(N);else if(Array.isArray(N))for(g in N)n.call(N,g)&&(E=N[g],typeof E=="string"?d.options.cdata&&i(E)?y=y.ele(D).raw(s(E)).up():y=y.ele(D,E).up():y=c(y.ele(D),E).up());else typeof N=="object"?y=c(y.ele(D),N).up():typeof N=="string"&&d.options.cdata&&i(N)?y=y.ele(D).raw(s(N)).up():(N==null&&(N=""),y=y.ele(D,N.toString()).up());return y}}(this),f=t.create(l,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),c(f,a).end(this.options.renderOpts)},o}()}).call(ne)),hn}var Vn={},zn={},_s;function Jl(){return _s||(_s=1,function(t){(function(e){e.parser=function(F,S){return new i(F,S)},e.SAXParser=i,e.SAXStream=c,e.createStream=h,e.MAX_BUFFER_LENGTH=64*1024;var r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function i(F,S){if(!(this instanceof i))return new i(F,S);var H=this;n(H),H.q=H.c="",H.bufferCheckPosition=e.MAX_BUFFER_LENGTH,H.opt=S||{},H.opt.lowercase=H.opt.lowercase||H.opt.lowercasetags,H.looseCase=H.opt.lowercase?"toLowerCase":"toUpperCase",H.tags=[],H.closed=H.closedRoot=H.sawRoot=!1,H.tag=H.error=null,H.strict=!!F,H.noscript=!!(F||H.opt.noscript),H.state=p.BEGIN,H.strictEntities=H.opt.strictEntities,H.ENTITIES=H.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),H.attribList=[],H.opt.xmlns&&(H.ns=Object.create(v)),H.opt.unquotedAttributeValues===void 0&&(H.opt.unquotedAttributeValues=!F),H.trackPosition=H.opt.position!==!1,H.trackPosition&&(H.position=H.line=H.column=0),A(H,"onready")}Object.create||(Object.create=function(F){function S(){}S.prototype=F;var H=new S;return H}),Object.keys||(Object.keys=function(F){var S=[];for(var H in F)F.hasOwnProperty(H)&&S.push(H);return S});function s(F){for(var S=Math.max(e.MAX_BUFFER_LENGTH,10),H=0,m=0,x=r.length;m<x;m++){var I=F[r[m]].length;if(I>S)switch(r[m]){case"textNode":U(F);break;case"cdata":P(F,"oncdata",F.cdata),F.cdata="";break;case"script":P(F,"onscript",F.script),F.script="";break;default:q(F,"Max buffer length exceeded: "+r[m])}H=Math.max(H,I)}var k=e.MAX_BUFFER_LENGTH-H;F.bufferCheckPosition=k+F.position}function n(F){for(var S=0,H=r.length;S<H;S++)F[r[S]]=""}function o(F){U(F),F.cdata!==""&&(P(F,"oncdata",F.cdata),F.cdata=""),F.script!==""&&(P(F,"onscript",F.script),F.script="")}i.prototype={end:function(){z(this)},write:Re,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var a;try{a=require("stream").Stream}catch{a=function(){}}a||(a=function(){});var u=e.EVENTS.filter(function(F){return F!=="error"&&F!=="end"});function h(F,S){return new c(F,S)}function c(F,S){if(!(this instanceof c))return new c(F,S);a.apply(this),this._parser=new i(F,S),this.writable=!0,this.readable=!0;var H=this;this._parser.onend=function(){H.emit("end")},this._parser.onerror=function(m){H.emit("error",m),H._parser.error=null},this._decoder=null,u.forEach(function(m){Object.defineProperty(H,"on"+m,{get:function(){return H._parser["on"+m]},set:function(x){if(!x)return H.removeAllListeners(m),H._parser["on"+m]=x,x;H.on(m,x)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(a.prototype,{constructor:{value:c}}),c.prototype.write=function(F){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(F)){if(!this._decoder){var S=Qu.StringDecoder;this._decoder=new S("utf8")}F=this._decoder.write(F)}return this._parser.write(F.toString()),this.emit("data",F),!0},c.prototype.end=function(F){return F&&F.length&&this.write(F),this._parser.end(),!0},c.prototype.on=function(F,S){var H=this;return!H._parser["on"+F]&&u.indexOf(F)!==-1&&(H._parser["on"+F]=function(){var m=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);m.splice(0,0,F),H.emit.apply(H,m)}),a.prototype.on.call(H,F,S)};var f="[CDATA[",l="DOCTYPE",d="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/2000/xmlns/",v={xml:d,xmlns:y},O=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,N=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,E=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function D(F){return F===" "||F===`
`||F==="\r"||F==="	"}function _(F){return F==='"'||F==="'"}function w(F){return F===">"||D(F)}function C(F,S){return F.test(S)}function T(F,S){return!C(F,S)}var p=0;e.STATE={BEGIN:p++,BEGIN_WHITESPACE:p++,TEXT:p++,TEXT_ENTITY:p++,OPEN_WAKA:p++,SGML_DECL:p++,SGML_DECL_QUOTED:p++,DOCTYPE:p++,DOCTYPE_QUOTED:p++,DOCTYPE_DTD:p++,DOCTYPE_DTD_QUOTED:p++,COMMENT_STARTING:p++,COMMENT:p++,COMMENT_ENDING:p++,COMMENT_ENDED:p++,CDATA:p++,CDATA_ENDING:p++,CDATA_ENDING_2:p++,PROC_INST:p++,PROC_INST_BODY:p++,PROC_INST_ENDING:p++,OPEN_TAG:p++,OPEN_TAG_SLASH:p++,ATTRIB:p++,ATTRIB_NAME:p++,ATTRIB_NAME_SAW_WHITE:p++,ATTRIB_VALUE:p++,ATTRIB_VALUE_QUOTED:p++,ATTRIB_VALUE_CLOSED:p++,ATTRIB_VALUE_UNQUOTED:p++,ATTRIB_VALUE_ENTITY_Q:p++,ATTRIB_VALUE_ENTITY_U:p++,CLOSE_TAG:p++,CLOSE_TAG_SAW_WHITE:p++,SCRIPT:p++,SCRIPT_ENDING:p++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(F){var S=e.ENTITIES[F],H=typeof S=="number"?String.fromCharCode(S):S;e.ENTITIES[F]=H});for(var b in e.STATE)e.STATE[e.STATE[b]]=b;p=e.STATE;function A(F,S,H){F[S]&&F[S](H)}function P(F,S,H){F.textNode&&U(F),A(F,S,H)}function U(F){F.textNode=B(F.opt,F.textNode),F.textNode&&A(F,"ontext",F.textNode),F.textNode=""}function B(F,S){return F.trim&&(S=S.trim()),F.normalize&&(S=S.replace(/\s+/g," ")),S}function q(F,S){return U(F),F.trackPosition&&(S+=`
Line: `+F.line+`
Column: `+F.column+`
Char: `+F.c),S=new Error(S),F.error=S,A(F,"onerror",S),F}function z(F){return F.sawRoot&&!F.closedRoot&&W(F,"Unclosed root tag"),F.state!==p.BEGIN&&F.state!==p.BEGIN_WHITESPACE&&F.state!==p.TEXT&&q(F,"Unexpected end"),U(F),F.c="",F.closed=!0,A(F,"onend"),i.call(F,F.strict,F.opt),F}function W(F,S){if(typeof F!="object"||!(F instanceof i))throw new Error("bad call to strictFail");F.strict&&q(F,S)}function K(F){F.strict||(F.tagName=F.tagName[F.looseCase]());var S=F.tags[F.tags.length-1]||F,H=F.tag={name:F.tagName,attributes:{}};F.opt.xmlns&&(H.ns=S.ns),F.attribList.length=0,P(F,"onopentagstart",H)}function J(F,S){var H=F.indexOf(":"),m=H<0?["",F]:F.split(":"),x=m[0],I=m[1];return S&&F==="xmlns"&&(x="xmlns",I=""),{prefix:x,local:I}}function Q(F){if(F.strict||(F.attribName=F.attribName[F.looseCase]()),F.attribList.indexOf(F.attribName)!==-1||F.tag.attributes.hasOwnProperty(F.attribName)){F.attribName=F.attribValue="";return}if(F.opt.xmlns){var S=J(F.attribName,!0),H=S.prefix,m=S.local;if(H==="xmlns")if(m==="xml"&&F.attribValue!==d)W(F,"xml: prefix must be bound to "+d+`
Actual: `+F.attribValue);else if(m==="xmlns"&&F.attribValue!==y)W(F,"xmlns: prefix must be bound to "+y+`
Actual: `+F.attribValue);else{var x=F.tag,I=F.tags[F.tags.length-1]||F;x.ns===I.ns&&(x.ns=Object.create(I.ns)),x.ns[m]=F.attribValue}F.attribList.push([F.attribName,F.attribValue])}else F.tag.attributes[F.attribName]=F.attribValue,P(F,"onattribute",{name:F.attribName,value:F.attribValue});F.attribName=F.attribValue=""}function re(F,S){if(F.opt.xmlns){var H=F.tag,m=J(F.tagName);H.prefix=m.prefix,H.local=m.local,H.uri=H.ns[m.prefix]||"",H.prefix&&!H.uri&&(W(F,"Unbound namespace prefix: "+JSON.stringify(F.tagName)),H.uri=m.prefix);var x=F.tags[F.tags.length-1]||F;H.ns&&x.ns!==H.ns&&Object.keys(H.ns).forEach(function(Z){P(F,"onopennamespace",{prefix:Z,uri:H.ns[Z]})});for(var I=0,k=F.attribList.length;I<k;I++){var M=F.attribList[I],$=M[0],V=M[1],L=J($,!0),R=L.prefix,X=L.local,j=R===""?"":H.ns[R]||"",G={name:$,value:V,prefix:R,local:X,uri:j};R&&R!=="xmlns"&&!j&&(W(F,"Unbound namespace prefix: "+JSON.stringify(R)),G.uri=R),F.tag.attributes[$]=G,P(F,"onattribute",G)}F.attribList.length=0}F.tag.isSelfClosing=!!S,F.sawRoot=!0,F.tags.push(F.tag),P(F,"onopentag",F.tag),S||(!F.noscript&&F.tagName.toLowerCase()==="script"?F.state=p.SCRIPT:F.state=p.TEXT,F.tag=null,F.tagName=""),F.attribName=F.attribValue="",F.attribList.length=0}function se(F){if(!F.tagName){W(F,"Weird empty close tag."),F.textNode+="</>",F.state=p.TEXT;return}if(F.script){if(F.tagName!=="script"){F.script+="</"+F.tagName+">",F.tagName="",F.state=p.SCRIPT;return}P(F,"onscript",F.script),F.script=""}var S=F.tags.length,H=F.tagName;F.strict||(H=H[F.looseCase]());for(var m=H;S--;){var x=F.tags[S];if(x.name!==m)W(F,"Unexpected close tag");else break}if(S<0){W(F,"Unmatched closing tag: "+F.tagName),F.textNode+="</"+F.tagName+">",F.state=p.TEXT;return}F.tagName=H;for(var I=F.tags.length;I-- >S;){var k=F.tag=F.tags.pop();F.tagName=F.tag.name,P(F,"onclosetag",F.tagName);var M={};for(var $ in k.ns)M[$]=k.ns[$];var V=F.tags[F.tags.length-1]||F;F.opt.xmlns&&k.ns!==V.ns&&Object.keys(k.ns).forEach(function(L){var R=k.ns[L];P(F,"onclosenamespace",{prefix:L,uri:R})})}S===0&&(F.closedRoot=!0),F.tagName=F.attribValue=F.attribName="",F.attribList.length=0,F.state=p.TEXT}function pe(F){var S=F.entity,H=S.toLowerCase(),m,x="";return F.ENTITIES[S]?F.ENTITIES[S]:F.ENTITIES[H]?F.ENTITIES[H]:(S=H,S.charAt(0)==="#"&&(S.charAt(1)==="x"?(S=S.slice(2),m=parseInt(S,16),x=m.toString(16)):(S=S.slice(1),m=parseInt(S,10),x=m.toString(10))),S=S.replace(/^0+/,""),isNaN(m)||x.toLowerCase()!==S?(W(F,"Invalid character entity"),"&"+F.entity+";"):String.fromCodePoint(m))}function Y(F,S){S==="<"?(F.state=p.OPEN_WAKA,F.startTagPosition=F.position):D(S)||(W(F,"Non-whitespace before first tag."),F.textNode=S,F.state=p.TEXT)}function ve(F,S){var H="";return S<F.length&&(H=F.charAt(S)),H}function Re(F){var S=this;if(this.error)throw this.error;if(S.closed)return q(S,"Cannot write after close. Assign an onready handler.");if(F===null)return z(S);typeof F=="object"&&(F=F.toString());for(var H=0,m="";m=ve(F,H++),S.c=m,!!m;)switch(S.trackPosition&&(S.position++,m===`
`?(S.line++,S.column=0):S.column++),S.state){case p.BEGIN:if(S.state=p.BEGIN_WHITESPACE,m==="\uFEFF")continue;Y(S,m);continue;case p.BEGIN_WHITESPACE:Y(S,m);continue;case p.TEXT:if(S.sawRoot&&!S.closedRoot){for(var x=H-1;m&&m!=="<"&&m!=="&";)m=ve(F,H++),m&&S.trackPosition&&(S.position++,m===`
`?(S.line++,S.column=0):S.column++);S.textNode+=F.substring(x,H-1)}m==="<"&&!(S.sawRoot&&S.closedRoot&&!S.strict)?(S.state=p.OPEN_WAKA,S.startTagPosition=S.position):(!D(m)&&(!S.sawRoot||S.closedRoot)&&W(S,"Text data outside of root node."),m==="&"?S.state=p.TEXT_ENTITY:S.textNode+=m);continue;case p.SCRIPT:m==="<"?S.state=p.SCRIPT_ENDING:S.script+=m;continue;case p.SCRIPT_ENDING:m==="/"?S.state=p.CLOSE_TAG:(S.script+="<"+m,S.state=p.SCRIPT);continue;case p.OPEN_WAKA:if(m==="!")S.state=p.SGML_DECL,S.sgmlDecl="";else if(!D(m))if(C(O,m))S.state=p.OPEN_TAG,S.tagName=m;else if(m==="/")S.state=p.CLOSE_TAG,S.tagName="";else if(m==="?")S.state=p.PROC_INST,S.procInstName=S.procInstBody="";else{if(W(S,"Unencoded <"),S.startTagPosition+1<S.position){var I=S.position-S.startTagPosition;m=new Array(I).join(" ")+m}S.textNode+="<"+m,S.state=p.TEXT}continue;case p.SGML_DECL:if(S.sgmlDecl+m==="--"){S.state=p.COMMENT,S.comment="",S.sgmlDecl="";continue}S.doctype&&S.doctype!==!0&&S.sgmlDecl?(S.state=p.DOCTYPE_DTD,S.doctype+="<!"+S.sgmlDecl+m,S.sgmlDecl=""):(S.sgmlDecl+m).toUpperCase()===f?(P(S,"onopencdata"),S.state=p.CDATA,S.sgmlDecl="",S.cdata=""):(S.sgmlDecl+m).toUpperCase()===l?(S.state=p.DOCTYPE,(S.doctype||S.sawRoot)&&W(S,"Inappropriately located doctype declaration"),S.doctype="",S.sgmlDecl=""):m===">"?(P(S,"onsgmldeclaration",S.sgmlDecl),S.sgmlDecl="",S.state=p.TEXT):(_(m)&&(S.state=p.SGML_DECL_QUOTED),S.sgmlDecl+=m);continue;case p.SGML_DECL_QUOTED:m===S.q&&(S.state=p.SGML_DECL,S.q=""),S.sgmlDecl+=m;continue;case p.DOCTYPE:m===">"?(S.state=p.TEXT,P(S,"ondoctype",S.doctype),S.doctype=!0):(S.doctype+=m,m==="["?S.state=p.DOCTYPE_DTD:_(m)&&(S.state=p.DOCTYPE_QUOTED,S.q=m));continue;case p.DOCTYPE_QUOTED:S.doctype+=m,m===S.q&&(S.q="",S.state=p.DOCTYPE);continue;case p.DOCTYPE_DTD:m==="]"?(S.doctype+=m,S.state=p.DOCTYPE):m==="<"?(S.state=p.OPEN_WAKA,S.startTagPosition=S.position):_(m)?(S.doctype+=m,S.state=p.DOCTYPE_DTD_QUOTED,S.q=m):S.doctype+=m;continue;case p.DOCTYPE_DTD_QUOTED:S.doctype+=m,m===S.q&&(S.state=p.DOCTYPE_DTD,S.q="");continue;case p.COMMENT:m==="-"?S.state=p.COMMENT_ENDING:S.comment+=m;continue;case p.COMMENT_ENDING:m==="-"?(S.state=p.COMMENT_ENDED,S.comment=B(S.opt,S.comment),S.comment&&P(S,"oncomment",S.comment),S.comment=""):(S.comment+="-"+m,S.state=p.COMMENT);continue;case p.COMMENT_ENDED:m!==">"?(W(S,"Malformed comment"),S.comment+="--"+m,S.state=p.COMMENT):S.doctype&&S.doctype!==!0?S.state=p.DOCTYPE_DTD:S.state=p.TEXT;continue;case p.CDATA:m==="]"?S.state=p.CDATA_ENDING:S.cdata+=m;continue;case p.CDATA_ENDING:m==="]"?S.state=p.CDATA_ENDING_2:(S.cdata+="]"+m,S.state=p.CDATA);continue;case p.CDATA_ENDING_2:m===">"?(S.cdata&&P(S,"oncdata",S.cdata),P(S,"onclosecdata"),S.cdata="",S.state=p.TEXT):m==="]"?S.cdata+="]":(S.cdata+="]]"+m,S.state=p.CDATA);continue;case p.PROC_INST:m==="?"?S.state=p.PROC_INST_ENDING:D(m)?S.state=p.PROC_INST_BODY:S.procInstName+=m;continue;case p.PROC_INST_BODY:if(!S.procInstBody&&D(m))continue;m==="?"?S.state=p.PROC_INST_ENDING:S.procInstBody+=m;continue;case p.PROC_INST_ENDING:m===">"?(P(S,"onprocessinginstruction",{name:S.procInstName,body:S.procInstBody}),S.procInstName=S.procInstBody="",S.state=p.TEXT):(S.procInstBody+="?"+m,S.state=p.PROC_INST_BODY);continue;case p.OPEN_TAG:C(N,m)?S.tagName+=m:(K(S),m===">"?re(S):m==="/"?S.state=p.OPEN_TAG_SLASH:(D(m)||W(S,"Invalid character in tag name"),S.state=p.ATTRIB));continue;case p.OPEN_TAG_SLASH:m===">"?(re(S,!0),se(S)):(W(S,"Forward-slash in opening tag not followed by >"),S.state=p.ATTRIB);continue;case p.ATTRIB:if(D(m))continue;m===">"?re(S):m==="/"?S.state=p.OPEN_TAG_SLASH:C(O,m)?(S.attribName=m,S.attribValue="",S.state=p.ATTRIB_NAME):W(S,"Invalid attribute name");continue;case p.ATTRIB_NAME:m==="="?S.state=p.ATTRIB_VALUE:m===">"?(W(S,"Attribute without value"),S.attribValue=S.attribName,Q(S),re(S)):D(m)?S.state=p.ATTRIB_NAME_SAW_WHITE:C(N,m)?S.attribName+=m:W(S,"Invalid attribute name");continue;case p.ATTRIB_NAME_SAW_WHITE:if(m==="=")S.state=p.ATTRIB_VALUE;else{if(D(m))continue;W(S,"Attribute without value"),S.tag.attributes[S.attribName]="",S.attribValue="",P(S,"onattribute",{name:S.attribName,value:""}),S.attribName="",m===">"?re(S):C(O,m)?(S.attribName=m,S.state=p.ATTRIB_NAME):(W(S,"Invalid attribute name"),S.state=p.ATTRIB)}continue;case p.ATTRIB_VALUE:if(D(m))continue;_(m)?(S.q=m,S.state=p.ATTRIB_VALUE_QUOTED):(S.opt.unquotedAttributeValues||q(S,"Unquoted attribute value"),S.state=p.ATTRIB_VALUE_UNQUOTED,S.attribValue=m);continue;case p.ATTRIB_VALUE_QUOTED:if(m!==S.q){m==="&"?S.state=p.ATTRIB_VALUE_ENTITY_Q:S.attribValue+=m;continue}Q(S),S.q="",S.state=p.ATTRIB_VALUE_CLOSED;continue;case p.ATTRIB_VALUE_CLOSED:D(m)?S.state=p.ATTRIB:m===">"?re(S):m==="/"?S.state=p.OPEN_TAG_SLASH:C(O,m)?(W(S,"No whitespace between attributes"),S.attribName=m,S.attribValue="",S.state=p.ATTRIB_NAME):W(S,"Invalid attribute name");continue;case p.ATTRIB_VALUE_UNQUOTED:if(!w(m)){m==="&"?S.state=p.ATTRIB_VALUE_ENTITY_U:S.attribValue+=m;continue}Q(S),m===">"?re(S):S.state=p.ATTRIB;continue;case p.CLOSE_TAG:if(S.tagName)m===">"?se(S):C(N,m)?S.tagName+=m:S.script?(S.script+="</"+S.tagName,S.tagName="",S.state=p.SCRIPT):(D(m)||W(S,"Invalid tagname in closing tag"),S.state=p.CLOSE_TAG_SAW_WHITE);else{if(D(m))continue;T(O,m)?S.script?(S.script+="</"+m,S.state=p.SCRIPT):W(S,"Invalid tagname in closing tag."):S.tagName=m}continue;case p.CLOSE_TAG_SAW_WHITE:if(D(m))continue;m===">"?se(S):W(S,"Invalid characters in closing tag");continue;case p.TEXT_ENTITY:case p.ATTRIB_VALUE_ENTITY_Q:case p.ATTRIB_VALUE_ENTITY_U:var k,M;switch(S.state){case p.TEXT_ENTITY:k=p.TEXT,M="textNode";break;case p.ATTRIB_VALUE_ENTITY_Q:k=p.ATTRIB_VALUE_QUOTED,M="attribValue";break;case p.ATTRIB_VALUE_ENTITY_U:k=p.ATTRIB_VALUE_UNQUOTED,M="attribValue";break}if(m===";"){var $=pe(S);S.opt.unparsedEntities&&!Object.values(e.XML_ENTITIES).includes($)?(S.entity="",S.state=k,S.write($)):(S[M]+=$,S.entity="",S.state=k)}else C(S.entity.length?g:E,m)?S.entity+=m:(W(S,"Invalid character in entity name"),S[M]+="&"+S.entity+m,S.entity="",S.state=k);continue;default:throw new Error(S,"Unknown state: "+S.state)}return S.position>=S.bufferCheckPosition&&s(S),S}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var F=String.fromCharCode,S=Math.floor,H=function(){var m=16384,x=[],I,k,M=-1,$=arguments.length;if(!$)return"";for(var V="";++M<$;){var L=Number(arguments[M]);if(!isFinite(L)||L<0||L>1114111||S(L)!==L)throw RangeError("Invalid code point: "+L);L<=65535?x.push(L):(L-=65536,I=(L>>10)+55296,k=L%1024+56320,x.push(I,k)),(M+1===$||x.length>m)&&(V+=F.apply(null,x),x.length=0)}return V};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:H,configurable:!0,writable:!0}):String.fromCodePoint=H}()})(t)}(zn)),zn}var Wn={},As;function Ql(){return As||(As=1,(function(){Wn.stripBOM=function(t){return t[0]==="\uFEFF"?t.substring(1):t}}).call(ne)),Wn}var ot={},Fs;function Za(){return Fs||(Fs=1,(function(){var t;t=new RegExp(/(?!xmlns)^.*:/),ot.normalize=function(e){return e.toLowerCase()},ot.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},ot.stripPrefix=function(e){return e.replace(t,"")},ot.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},ot.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(ne)),ot}var Ns;function Zl(){return Ns||(Ns=1,function(t){(function(){var e,r,i,s,n,o,a,u,h=function(l,d){return function(){return l.apply(d,arguments)}},c=function(l,d){for(var y in d)f.call(d,y)&&(l[y]=d[y]);function v(){this.constructor=l}return v.prototype=d.prototype,l.prototype=new v,l.__super__=d.prototype,l},f={}.hasOwnProperty;a=Jl(),i=ct,e=Ql(),o=Za(),u=Zu.setImmediate,r=Di().defaults,s=function(l){return typeof l=="object"&&l!=null&&Object.keys(l).length===0},n=function(l,d,y){var v,O,N;for(v=0,O=l.length;v<O;v++)N=l[v],d=N(d,y);return d},t.Parser=function(l){c(d,l);function d(y){this.parseStringPromise=h(this.parseStringPromise,this),this.parseString=h(this.parseString,this),this.reset=h(this.reset,this),this.assignOrPush=h(this.assignOrPush,this),this.processAsync=h(this.processAsync,this);var v,O,N;if(!(this instanceof t.Parser))return new t.Parser(y);this.options={},O=r["0.2"];for(v in O)f.call(O,v)&&(N=O[v],this.options[v]=N);for(v in y)f.call(y,v)&&(N=y[v],this.options[v]=N);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(o.normalize)),this.reset()}return d.prototype.processAsync=function(){var y,v;try{return this.remaining.length<=this.options.chunkSize?(y=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(y),this.saxParser.close()):(y=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(y),u(this.processAsync))}catch(O){if(v=O,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(v)}},d.prototype.assignOrPush=function(y,v,O){return v in y?(y[v]instanceof Array||(y[v]=[y[v]]),y[v].push(O)):this.options.explicitArray?y[v]=[O]:y[v]=O},d.prototype.reset=function(){var y,v,O,N;return this.removeAllListeners(),this.saxParser=a.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(E){return function(g){if(E.saxParser.resume(),!E.saxParser.errThrown)return E.saxParser.errThrown=!0,E.emit("error",g)}}(this),this.saxParser.onend=function(E){return function(){if(!E.saxParser.ended)return E.saxParser.ended=!0,E.emit("end",E.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,N=[],y=this.options.attrkey,v=this.options.charkey,this.saxParser.onopentag=function(E){return function(g){var D,_,w,C,T;if(w=Object.create(null),w[v]="",!E.options.ignoreAttrs){T=g.attributes;for(D in T)f.call(T,D)&&(!(y in w)&&!E.options.mergeAttrs&&(w[y]=Object.create(null)),_=E.options.attrValueProcessors?n(E.options.attrValueProcessors,g.attributes[D],D):g.attributes[D],C=E.options.attrNameProcessors?n(E.options.attrNameProcessors,D):D,E.options.mergeAttrs?E.assignOrPush(w,C,_):w[y][C]=_)}return w["#name"]=E.options.tagNameProcessors?n(E.options.tagNameProcessors,g.name):g.name,E.options.xmlns&&(w[E.options.xmlnskey]={uri:g.uri,local:g.local}),N.push(w)}}(this),this.saxParser.onclosetag=function(E){return function(){var g,D,_,w,C,T,p,b,A,P;if(T=N.pop(),C=T["#name"],(!E.options.explicitChildren||!E.options.preserveChildrenOrder)&&delete T["#name"],T.cdata===!0&&(g=T.cdata,delete T.cdata),A=N[N.length-1],T[v].match(/^\s*$/)&&!g?(D=T[v],delete T[v]):(E.options.trim&&(T[v]=T[v].trim()),E.options.normalize&&(T[v]=T[v].replace(/\s{2,}/g," ").trim()),T[v]=E.options.valueProcessors?n(E.options.valueProcessors,T[v],C):T[v],Object.keys(T).length===1&&v in T&&!E.EXPLICIT_CHARKEY&&(T=T[v])),s(T)&&(typeof E.options.emptyTag=="function"?T=E.options.emptyTag():T=E.options.emptyTag!==""?E.options.emptyTag:D),E.options.validator!=null&&(P="/"+function(){var U,B,q;for(q=[],U=0,B=N.length;U<B;U++)w=N[U],q.push(w["#name"]);return q}().concat(C).join("/"),function(){var U;try{return T=E.options.validator(P,A&&A[C],T)}catch(B){return U=B,E.emit("error",U)}}()),E.options.explicitChildren&&!E.options.mergeAttrs&&typeof T=="object"){if(!E.options.preserveChildrenOrder)w=Object.create(null),E.options.attrkey in T&&(w[E.options.attrkey]=T[E.options.attrkey],delete T[E.options.attrkey]),!E.options.charsAsChildren&&E.options.charkey in T&&(w[E.options.charkey]=T[E.options.charkey],delete T[E.options.charkey]),Object.getOwnPropertyNames(T).length>0&&(w[E.options.childkey]=T),T=w;else if(A){A[E.options.childkey]=A[E.options.childkey]||[],p=Object.create(null);for(_ in T)f.call(T,_)&&(p[_]=T[_]);A[E.options.childkey].push(p),delete T["#name"],Object.keys(T).length===1&&v in T&&!E.EXPLICIT_CHARKEY&&(T=T[v])}}return N.length>0?E.assignOrPush(A,C,T):(E.options.explicitRoot&&(b=T,T=Object.create(null),T[C]=b),E.resultObject=T,E.saxParser.ended=!0,E.emit("end",E.resultObject))}}(this),O=function(E){return function(g){var D,_;if(_=N[N.length-1],_)return _[v]+=g,E.options.explicitChildren&&E.options.preserveChildrenOrder&&E.options.charsAsChildren&&(E.options.includeWhiteChars||g.replace(/\\n/g,"").trim()!=="")&&(_[E.options.childkey]=_[E.options.childkey]||[],D={"#name":"__text__"},D[v]=g,E.options.normalize&&(D[v]=D[v].replace(/\s{2,}/g," ").trim()),_[E.options.childkey].push(D)),_}}(this),this.saxParser.ontext=O,this.saxParser.oncdata=function(E){return function(g){var D;if(D=O(g),D)return D.cdata=!0}}()},d.prototype.parseString=function(y,v){var O;v!=null&&typeof v=="function"&&(this.on("end",function(N){return this.reset(),v(null,N)}),this.on("error",function(N){return this.reset(),v(N)}));try{return y=y.toString(),y.trim()===""?(this.emit("end",null),!0):(y=e.stripBOM(y),this.options.async?(this.remaining=y,u(this.processAsync),this.saxParser):this.saxParser.write(y).close())}catch(N){if(O=N,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw O}else return this.emit("error",O),this.saxParser.errThrown=!0}},d.prototype.parseStringPromise=function(y){return new Promise(function(v){return function(O,N){return v.parseString(y,function(E,g){return E?N(E):O(g)})}}(this))},d}(i),t.parseString=function(l,d,y){var v,O,N;return y!=null?(typeof y=="function"&&(v=y),typeof d=="object"&&(O=d)):(typeof d=="function"&&(v=d),O={}),N=new t.Parser(O),N.parseString(l,v)},t.parseStringPromise=function(l,d){var y,v;return typeof d=="object"&&(y=d),v=new t.Parser(y),v.parseStringPromise(l)}}).call(ne)}(Vn)),Vn}(function(){var t,e,r,i,s=function(o,a){for(var u in a)n.call(a,u)&&(o[u]=a[u]);function h(){this.constructor=o}return h.prototype=a.prototype,o.prototype=new h,o.__super__=a.prototype,o},n={}.hasOwnProperty;e=Di(),t=Kl(),r=Zl(),i=Za(),Qe.defaults=e.defaults,Qe.processors=i,Qe.ValidationError=function(o){s(a,o);function a(u){this.message=u}return a}(Error),Qe.Builder=t.Builder,Qe.Parser=r.Parser,Qe.parseString=r.parseString,Qe.parseStringPromise=r.parseStringPromise}).call(ne);var gi={exports:{}},Wt={exports:{}},Hn,xs;function eu(){if(xs)return Hn;xs=1;function t(e){i.debug=i,i.default=i,i.coerce=h,i.disable=a,i.enable=o,i.enabled=u,i.humanize=Na(),Object.keys(e).forEach(function(c){i[c]=e[c]}),i.instances=[],i.names=[],i.skips=[],i.formatters={};function r(c){for(var f=0,l=0;l<c.length;l++)f=(f<<5)-f+c.charCodeAt(l),f|=0;return i.colors[Math.abs(f)%i.colors.length]}i.selectColor=r;function i(c){var f;function l(){if(l.enabled){for(var d=arguments.length,y=new Array(d),v=0;v<d;v++)y[v]=arguments[v];var O=l,N=Number(new Date),E=N-(f||N);O.diff=E,O.prev=f,O.curr=N,f=N,y[0]=i.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");var g=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,function(_,w){if(_==="%%")return _;g++;var C=i.formatters[w];if(typeof C=="function"){var T=y[g];_=C.call(O,T),y.splice(g,1),g--}return _}),i.formatArgs.call(O,y);var D=O.log||i.log;D.apply(O,y)}}return l.namespace=c,l.enabled=i.enabled(c),l.useColors=i.useColors(),l.color=r(c),l.destroy=s,l.extend=n,typeof i.init=="function"&&i.init(l),i.instances.push(l),l}function s(){var c=i.instances.indexOf(this);return c!==-1?(i.instances.splice(c,1),!0):!1}function n(c,f){return i(this.namespace+(typeof f>"u"?":":f)+c)}function o(c){i.save(c),i.names=[],i.skips=[];var f,l=(typeof c=="string"?c:"").split(/[\s,]+/),d=l.length;for(f=0;f<d;f++)l[f]&&(c=l[f].replace(/\*/g,".*?"),c[0]==="-"?i.skips.push(new RegExp("^"+c.substr(1)+"$")):i.names.push(new RegExp("^"+c+"$")));for(f=0;f<i.instances.length;f++){var y=i.instances[f];y.enabled=i.enabled(y.namespace)}}function a(){i.enable("")}function u(c){if(c[c.length-1]==="*")return!0;var f,l;for(f=0,l=i.skips.length;f<l;f++)if(i.skips[f].test(c))return!1;for(f=0,l=i.names.length;f<l;f++)if(i.names[f].test(c))return!0;return!1}function h(c){return c instanceof Error?c.stack||c.message:c}return i.enable(i.load()),i}return Hn=t,Hn}var Is;function ef(){return Is||(Is=1,function(t,e){function r(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(l){return typeof l}:r=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},r(c)}e.log=n,e.formatArgs=s,e.save=o,e.load=a,e.useColors=i,e.storage=u(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!!this.useColors){var f="color: "+this.color;c.splice(1,0,f,"color: inherit");var l=0,d=0;c[0].replace(/%[a-zA-Z%]/g,function(y){y!=="%%"&&(l++,y==="%c"&&(d=l))}),c.splice(d,0,f)}}function n(){var c;return(typeof console>"u"?"undefined":r(console))==="object"&&console.log&&(c=console).log.apply(c,arguments)}function o(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function a(){var c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function u(){try{return localStorage}catch{}}t.exports=eu()(e);var h=t.exports.formatters;h.j=function(c){try{return JSON.stringify(c)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}}(Wt,Wt.exports)),Wt.exports}var Ht={exports:{}},Ps;function tf(){return Ps||(Ps=1,function(t,e){var r=Oi,i=Mt;e.init=f,e.log=u,e.formatArgs=o,e.save=h,e.load=c,e.useColors=n,e.colors=[6,2,3,4,5,1];try{var s=Ia();s&&(s.stderr||s).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}e.inspectOpts=Object.keys(process.env).filter(function(d){return/^debug_/i.test(d)}).reduce(function(d,y){var v=y.substring(6).toLowerCase().replace(/_([a-z])/g,function(N,E){return E.toUpperCase()}),O=process.env[y];return/^(yes|on|true|enabled)$/i.test(O)?O=!0:/^(no|off|false|disabled)$/i.test(O)?O=!1:O==="null"?O=null:O=Number(O),d[v]=O,d},{});function n(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:r.isatty(process.stderr.fd)}function o(d){var y=this.namespace,v=this.useColors;if(v){var O=this.color,N="\x1B[3"+(O<8?O:"8;5;"+O),E="  ".concat(N,";1m").concat(y," \x1B[0m");d[0]=E+d[0].split(`
`).join(`
`+E),d.push(N+"m+"+t.exports.humanize(this.diff)+"\x1B[0m")}else d[0]=a()+y+" "+d[0]}function a(){return e.inspectOpts.hideDate?"":new Date().toISOString()+" "}function u(){return process.stderr.write(i.format.apply(i,arguments)+`
`)}function h(d){d?process.env.DEBUG=d:delete process.env.DEBUG}function c(){return process.env.DEBUG}function f(d){d.inspectOpts={};for(var y=Object.keys(e.inspectOpts),v=0;v<y.length;v++)d.inspectOpts[y[v]]=e.inspectOpts[y[v]]}t.exports=eu()(e);var l=t.exports.formatters;l.o=function(d){return this.inspectOpts.colors=this.useColors,i.inspect(d,this.inspectOpts).split(`
`).map(function(y){return y.trim()}).join(" ")},l.O=function(d){return this.inspectOpts.colors=this.useColors,i.inspect(d,this.inspectOpts)}}(Ht,Ht.exports)),Ht.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?gi.exports=ef():gi.exports=tf();var rf=gi.exports;const Tt=ur,nf=Si,of=Ju,Ct=Ci,Ls=vt,sf=Qe,af=Va,uf=rf("roa"),Gt=mr;function cf(t){return t.replace(/[\t\n\r\f]/g," ")}function lf(t){const e=Object.keys(t),r={};for(let i=0;i<e.length;i++){const s=e[i];r[s.toLowerCase()]=t[s]}return r}function ff(t){const e="x-acs-",r=Object.keys(t),i=[];for(let n=0;n<r.length;n++){const o=r[n];o.startsWith(e)&&i.push(o)}i.sort();var s="";for(let n=0;n<i.length;n++){const o=i[n];s+=`${o}:${cf(t[o]).trim()}
`}return s}function hf(t,e){const r=Object.keys(e).sort();if(r.length===0)return t;for(var i=[],s=0;s<r.length;s++){const n=r[s];i.push(`${n}=${e[n]}`)}return`${t}?${i.join("&")}`}function pf(t,e,r,i){const s=r.accept,n=r["content-md5"]||"",o=r["content-type"]||"",a=r.date||"",u=`${t}
${s}
${n}
${o}
${a}
`,h=ff(r),c=hf(e,i);return`${u}${h}${c}`}function df(t){const e=new sf.Parser({});return new Promise((r,i)=>{e.parseString(t,(s,n)=>{if(s)return i(s);r(n)})})}class mf extends Error{constructor(e){const r=e.Message[0],i=e.Code[0],s=e.HostId[0],n=e.RequestId[0];super(`${r} hostid: ${s}, requestid: ${n}`),this.code=i}}class yf{constructor(e){if(Tt(e,'must pass "config"'),Tt(e.endpoint,'must pass "config.endpoint"'),!e.endpoint.startsWith("https://")&&!e.endpoint.startsWith("http://"))throw new Error(`"config.endpoint" must starts with 'https://' or 'http://'.`);if(Tt(e.apiVersion,'must pass "config.apiVersion"'),e.credentialsProvider){if(typeof e.credentialsProvider.getCredentials!="function")throw new Error('must pass "config.credentialsProvider" with function "getCredentials()"');this.credentialsProvider=e.credentialsProvider}else Tt(e.accessKeyId,'must pass "config.accessKeyId"'),Tt(e.accessKeySecret,'must pass "config.accessKeySecret"'),this.accessKeyId=e.accessKeyId,this.accessKeySecret=e.accessKeySecret,this.securityToken=e.securityToken,this.credentialsProvider={getCredentials:async()=>({accessKeyId:e.accessKeyId,accessKeySecret:e.accessKeySecret,securityToken:e.securityToken})};this.endpoint=e.endpoint,this.apiVersion=e.apiVersion,this.host=nf.parse(this.endpoint).hostname,this.opts=e.opts;var r=this.endpoint.startsWith("https://")?ar:sr;this.keepAliveAgent=new r.Agent({keepAlive:!0,keepAliveMsecs:3e3})}buildHeaders(){var r={accept:"application/json",date:new Date().toGMTString(),host:this.host,"x-acs-signature-nonce":Ct.makeNonce(),"x-acs-signature-method":"HMAC-SHA1","x-acs-signature-version":"1.0","x-acs-version":this.apiVersion,"user-agent":Gt.DEFAULT_UA,"x-sdk-client":Gt.DEFAULT_CLIENT};return this.securityToken&&(r["x-acs-accesskey-id"]=this.accessKeyId,r["x-acs-security-token"]=this.securityToken),r}signature(e){const r=Buffer.from(e,"utf8");return Ct.sha1(r,this.accessKeySecret,"base64")}buildAuthorization(e){return`acs ${this.accessKeyId}:${this.signature(e)}`}async request(e,r,i={},s="",n={},o={}){const a=await this.credentialsProvider.getCredentials();var h={accept:"application/json",date:new Date().toGMTString(),host:this.host,"x-acs-signature-nonce":Ct.makeNonce(),"x-acs-version":this.apiVersion,"user-agent":Gt.DEFAULT_UA,"x-sdk-client":Gt.DEFAULT_CLIENT};a&&a.accessKeyId&&a.accessKeySecret&&(h["x-acs-signature-method"]="HMAC-SHA1",h["x-acs-signature-version"]="1.0",a.securityToken&&(h["x-acs-accesskey-id"]=a.accessKeyId,h["x-acs-security-token"]=a.securityToken));var c=Object.assign(h,lf(n)),f=null;f=Buffer.from(s,"utf8"),c["content-md5"]=Ct.md5(f,"base64"),c["content-length"]=f.length;var l=`${this.endpoint}${r}`;if(Object.keys(i).length&&(l+=`?${of.stringify(i)}`),a&&a.accessKeyId&&a.accessKeySecret){const g=pf(e,r,c,i);uf("stringToSign: %s",g);const D=Buffer.from(g,"utf8"),_=Ct.sha1(D,a.accessKeySecret,"base64");c.authorization=`acs ${a.accessKeyId}:${_}`}const d=Object.assign({method:e,agent:this.keepAliveAgent,headers:c,data:f},this.opts,o),y=await Ls.request(l,d),v=await Ls.read(y,"utf8");if(o.rawBody)return v;const O=y.headers["content-type"]||"";if(O.startsWith("application/json")){const g=y.statusCode;if(g===204)return v;var N;try{N=af.parse(v)}catch(D){throw D.name="FormatError",D.message="parse response to json error",D.body=v,D}if(g>=400){const D=N.Message||N.errorMsg||"",_=N.Code||N.errorCode||"",w=N.RequestId||"";var E=new Error(`code: ${g}, ${D}, requestid: ${w}`);throw E.name=`${_}Error`,E.statusCode=g,E.result=N,E.code=_,E}return N}if(O.startsWith("text/xml")){const g=await df(v);if(g.Error)throw new mf(g.Error);return g}return v}put(e,r,i,s,n){return this.request("PUT",e,r,i,s,n)}post(e,r,i,s,n){return this.request("POST",e,r,i,s,n)}get(e,r,i,s){return this.request("GET",e,r,"",i,s)}delete(e,r,i,s){return this.request("DELETE",e,r,"",i,s)}}var gf=yf;pr.exports=Wa;pr.exports.ROAClient=gf;pr.exports.RPCClient=Wa;var vf=pr.exports;const wf=gt(vf);async function Ef(){const t=new wf({accessKeyId:rr.accessKeyId,accessKeySecret:rr.accessKeySecret,endpoint:"http://nls-meta.cn-shanghai.aliyuncs.com",apiVersion:"2019-02-28"});try{return(await t.request("CreateToken")).Token.Id}catch(e){return console.error("Error creating token:",e),null}}var tu={exports:{}},Gn,Ms;function bf(){if(Ms)return Gn;Ms=1,Gn=i,i.sync=s;var t=fe;function e(n,o){var a=o.pathExt!==void 0?o.pathExt:process.env.PATHEXT;if(!a||(a=a.split(";"),a.indexOf("")!==-1))return!0;for(var u=0;u<a.length;u++){var h=a[u].toLowerCase();if(h&&n.substr(-h.length).toLowerCase()===h)return!0}return!1}function r(n,o,a){return!n.isSymbolicLink()&&!n.isFile()?!1:e(o,a)}function i(n,o,a){t.stat(n,function(u,h){a(u,u?!1:r(h,n,o))})}function s(n,o){return r(t.statSync(n),n,o)}return Gn}var Yn,$s;function Sf(){if($s)return Yn;$s=1,Yn=e,e.sync=r;var t=fe;function e(n,o,a){t.stat(n,function(u,h){a(u,u?!1:i(h,o))})}function r(n,o){return i(t.statSync(n),o)}function i(n,o){return n.isFile()&&s(n,o)}function s(n,o){var a=n.mode,u=n.uid,h=n.gid,c=o.uid!==void 0?o.uid:process.getuid&&process.getuid(),f=o.gid!==void 0?o.gid:process.getgid&&process.getgid(),l=parseInt("100",8),d=parseInt("010",8),y=parseInt("001",8),v=l|d,O=a&y||a&d&&h===f||a&l&&u===c||a&v&&c===0;return O}return Yn}var nr;process.platform==="win32"||ne.TESTING_WINDOWS?nr=bf():nr=Sf();var Of=Bi;Bi.sync=Tf;function Bi(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,s){Bi(t,e||{},function(n,o){n?s(n):i(o)})})}nr(t,e||{},function(i,s){i&&(i.code==="EACCES"||e&&e.ignoreErrors)&&(i=null,s=!1),r(i,s)})}function Tf(t,e){try{return nr.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}var Cf=su;su.sync=_f;var vi=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",ru=ee,Df=vi?";":":",nu=Of;function iu(t){var e=new Error("not found: "+t);return e.code="ENOENT",e}function ou(t,e){var r=e.colon||Df,i=e.path||process.env.PATH||"",s=[""];i=i.split(r);var n="";return vi&&(i.unshift(process.cwd()),n=e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM",s=n.split(r),t.indexOf(".")!==-1&&s[0]!==""&&s.unshift("")),(t.match(/\//)||vi&&t.match(/\\/))&&(i=[""]),{env:i,ext:s,extExe:n}}function su(t,e,r){typeof e=="function"&&(r=e,e={});var i=ou(t,e),s=i.env,n=i.ext,o=i.extExe,a=[];(function u(h,c){if(h===c)return e.all&&a.length?r(null,a):r(iu(t));var f=s[h];f.charAt(0)==='"'&&f.slice(-1)==='"'&&(f=f.slice(1,-1));var l=ru.join(f,t);!f&&/^\.[\\\/]/.test(t)&&(l=t.slice(0,2)+l),function d(y,v){if(y===v)return u(h+1,c);var O=n[y];nu(l+O,{pathExt:o},function(N,E){if(!N&&E)if(e.all)a.push(l+O);else return r(null,l+O);return d(y+1,v)})}(0,n.length)})(0,s.length)}function _f(t,e){e=e||{};for(var r=ou(t,e),i=r.env,s=r.ext,n=r.extExe,o=[],a=0,u=i.length;a<u;a++){var h=i[a];h.charAt(0)==='"'&&h.slice(-1)==='"'&&(h=h.slice(1,-1));var c=ru.join(h,t);!h&&/^\.[\\\/]/.test(t)&&(c=t.slice(0,2)+c);for(var f=0,l=s.length;f<l;f++){var d=c+s[f],y;try{if(y=nu.sync(d,{pathExt:n}),y)if(e.all)o.push(d);else return d}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw iu(t)}or.exec;var Af=it.platform().match(/win(32|64)/),Ff=Cf,Rs=/\r\n|\r|\n/g,Dt=/^\[?(.*?)\]?$/,ks=/[,]/,Yt={};function Nf(t){var e={};t=t.replace(/=\s+/g,"=").trim();for(var r=t.split(" "),i=0;i<r.length;i++){var s=r[i].split("=",2),n=s[0],o=s[1];if(typeof o>"u")return null;e[n]=o}return e}var js=tu.exports={isWindows:Af,streamRegexp:Dt,copy:function(t,e){Object.keys(t).forEach(function(r){e[r]=t[r]})},args:function(){var t=[],e=function(){arguments.length===1&&Array.isArray(arguments[0])?t=t.concat(arguments[0]):t=t.concat([].slice.call(arguments))};return e.clear=function(){t=[]},e.get=function(){return t},e.find=function(r,i){var s=t.indexOf(r);if(s!==-1)return t.slice(s+1,s+1+(i||0))},e.remove=function(r,i){var s=t.indexOf(r);s!==-1&&t.splice(s,(i||0)+1)},e.clone=function(){var r=js.args();return r(t),r},e},makeFilterStrings:function(t){return t.map(function(e){if(typeof e=="string")return e;var r="";return Array.isArray(e.inputs)?r+=e.inputs.map(function(i){return i.replace(Dt,"[$1]")}).join(""):typeof e.inputs=="string"&&(r+=e.inputs.replace(Dt,"[$1]")),r+=e.filter,e.options&&(typeof e.options=="string"||typeof e.options=="number"?r+="="+e.options:Array.isArray(e.options)?r+="="+e.options.map(function(i){return typeof i=="string"&&i.match(ks)?"'"+i+"'":i}).join(":"):Object.keys(e.options).length&&(r+="="+Object.keys(e.options).map(function(i){var s=e.options[i];return typeof s=="string"&&s.match(ks)&&(s="'"+s+"'"),i+"="+s}).join(":"))),Array.isArray(e.outputs)?r+=e.outputs.map(function(i){return i.replace(Dt,"[$1]")}).join(""):typeof e.outputs=="string"&&(r+=e.outputs.replace(Dt,"[$1]")),r})},which:function(t,e){if(t in Yt)return e(null,Yt[t]);Ff(t,function(r,i){if(r)return e(null,Yt[t]="");e(null,Yt[t]=i)})},timemarkToSeconds:function(t){if(typeof t=="number")return t;if(t.indexOf(":")===-1&&t.indexOf(".")>=0)return Number(t);var e=t.split(":"),r=Number(e.pop());return e.length&&(r+=Number(e.pop())*60),e.length&&(r+=Number(e.pop())*3600),r},extractCodecData:function(t,e,r){var i=/Input #[0-9]+, ([^ ]+),/,s=/Duration\: ([^,]+)/,n=/Audio\: (.*)/,o=/Video\: (.*)/;"inputStack"in r||(r.inputStack=[],r.inputIndex=-1,r.inInput=!1);var a=r.inputStack,u=r.inputIndex,h=r.inInput,c,f,l,d;if(c=e.match(i))h=r.inInput=!0,u=r.inputIndex=r.inputIndex+1,a[u]={format:c[1],audio:"",video:"",duration:""};else if(h&&(f=e.match(s)))a[u].duration=f[1];else if(h&&(l=e.match(n)))l=l[1].split(", "),a[u].audio=l[0],a[u].audio_details=l;else if(h&&(d=e.match(o)))d=d[1].split(", "),a[u].video=d[0],a[u].video_details=d;else if(/Output #\d+/.test(e))h=r.inInput=!1;else if(/Stream mapping:|Press (\[q\]|ctrl-c) to stop/.test(e))return t.emit.apply(t,["codecData"].concat(a)),!0;return!1},extractProgress:function(t,e){var r=Nf(e);if(r){var i={frames:parseInt(r.frame,10),currentFps:parseInt(r.fps,10),currentKbps:r.bitrate?parseFloat(r.bitrate.replace("kbits/s","")):0,targetSize:parseInt(r.size||r.Lsize,10),timemark:r.time};if(t._ffprobeData&&t._ffprobeData.format&&t._ffprobeData.format.duration){var s=Number(t._ffprobeData.format.duration);isNaN(s)||(i.percent=js.timemarkToSeconds(i.timemark)/s*100)}t.emit("progress",i)}},extractError:function(t){return t.split(Rs).reduce(function(e,r){return r.charAt(0)===" "||r.charAt(0)==="["?[]:(e.push(r),e)},[]).join(`
`)},linesRing:function(t){var e=[],r=[],i=null,s=!1,n=t-1;function o(a){e.forEach(function(u){u(a)})}return{callback:function(a){r.forEach(function(u){a(u)}),e.push(a)},append:function(a){if(!s&&(a instanceof Buffer&&(a=""+a),!(!a||a.length===0))){var u=a.split(Rs);u.length===1?i!==null?i=i+u.shift():i=u.shift():(i!==null&&(i=i+u.shift(),o(i),r.push(i)),i=u.pop(),u.forEach(function(h){o(h),r.push(h)}),n>-1&&r.length>n&&r.splice(0,r.length-n))}},get:function(){return i!==null?r.concat([i]).join(`
`):r.join(`
`)},close:function(){s||(i!==null&&(o(i),r.push(i),n>-1&&r.length>n&&r.shift(),i=null),s=!0)}}}},Ke=tu.exports,Kn,qs;function xf(){if(qs)return Kn;qs=1;var t=Ke;return Kn=function(e){e.mergeAdd=e.addInput=e.input=function(r){var i=!1,s=!1;if(typeof r!="string"){if(!("readable"in r)||!r.readable)throw new Error("Invalid input");var n=this._inputs.some(function(a){return a.isStream});if(n)throw new Error("Only one input stream is supported");s=!0,r.pause()}else{var o=r.match(/^([a-z]{2,}):/i);i=!o||o[0]==="file"}return this._inputs.push(this._currentInput={source:r,isFile:i,isStream:s,options:t.args()}),this},e.withInputFormat=e.inputFormat=e.fromFormat=function(r){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-f",r),this},e.withInputFps=e.withInputFPS=e.withFpsInput=e.withFPSInput=e.inputFPS=e.inputFps=e.fpsInput=e.FPSInput=function(r){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-r",r),this},e.nativeFramerate=e.withNativeFramerate=e.native=function(){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-re"),this},e.setStartTime=e.seekInput=function(r){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-ss",r),this},e.loop=function(r){if(!this._currentInput)throw new Error("No input specified");return this._currentInput.options("-loop","1"),typeof r<"u"&&this.duration(r),this}},Kn}var Jn,Bs;function If(){if(Bs)return Jn;Bs=1;var t=Ke;return Jn=function(e){e.withNoAudio=e.noAudio=function(){return this._currentOutput.audio.clear(),this._currentOutput.audioFilters.clear(),this._currentOutput.audio("-an"),this},e.withAudioCodec=e.audioCodec=function(r){return this._currentOutput.audio("-acodec",r),this},e.withAudioBitrate=e.audioBitrate=function(r){return this._currentOutput.audio("-b:a",(""+r).replace(/k?$/,"k")),this},e.withAudioChannels=e.audioChannels=function(r){return this._currentOutput.audio("-ac",r),this},e.withAudioFrequency=e.audioFrequency=function(r){return this._currentOutput.audio("-ar",r),this},e.withAudioQuality=e.audioQuality=function(r){return this._currentOutput.audio("-aq",r),this},e.withAudioFilter=e.withAudioFilters=e.audioFilter=e.audioFilters=function(r){return arguments.length>1&&(r=[].slice.call(arguments)),Array.isArray(r)||(r=[r]),this._currentOutput.audioFilters(t.makeFilterStrings(r)),this}},Jn}var Qn,Us;function Pf(){if(Us)return Qn;Us=1;var t=Ke;return Qn=function(e){e.withNoVideo=e.noVideo=function(){return this._currentOutput.video.clear(),this._currentOutput.videoFilters.clear(),this._currentOutput.video("-vn"),this},e.withVideoCodec=e.videoCodec=function(r){return this._currentOutput.video("-vcodec",r),this},e.withVideoBitrate=e.videoBitrate=function(r,i){return r=(""+r).replace(/k?$/,"k"),this._currentOutput.video("-b:v",r),i&&this._currentOutput.video("-maxrate",r,"-minrate",r,"-bufsize","3M"),this},e.withVideoFilter=e.withVideoFilters=e.videoFilter=e.videoFilters=function(r){return arguments.length>1&&(r=[].slice.call(arguments)),Array.isArray(r)||(r=[r]),this._currentOutput.videoFilters(t.makeFilterStrings(r)),this},e.withOutputFps=e.withOutputFPS=e.withFpsOutput=e.withFPSOutput=e.withFps=e.withFPS=e.outputFPS=e.outputFps=e.fpsOutput=e.FPSOutput=e.fps=e.FPS=function(r){return this._currentOutput.video("-r",r),this},e.takeFrames=e.withFrames=e.frames=function(r){return this._currentOutput.video("-vframes",r),this}},Qn}var Zn,Xs;function Lf(){if(Xs)return Zn;Xs=1;function t(r,i,s,n){return[{filter:"scale",options:{w:"if(gt(a,"+s+"),"+r+",trunc("+i+"*a/2)*2)",h:"if(lt(a,"+s+"),"+i+",trunc("+r+"/a/2)*2)"}},{filter:"pad",options:{w:r,h:i,x:"if(gt(a,"+s+"),0,("+r+"-iw)/2)",y:"if(lt(a,"+s+"),0,("+i+"-ih)/2)",color:n}}]}function e(r,i,s){var n=r.sizeData=r.sizeData||{};if(n[i]=s,!("size"in n))return[];var o=n.size.match(/([0-9]+)x([0-9]+)/),a=n.size.match(/([0-9]+)x\?/),u=n.size.match(/\?x([0-9]+)/),h=n.size.match(/\b([0-9]{1,3})%/),c,f,l;if(h){var d=Number(h[1])/100;return[{filter:"scale",options:{w:"trunc(iw*"+d+"/2)*2",h:"trunc(ih*"+d+"/2)*2"}}]}else{if(o)return c=Math.round(Number(o[1])/2)*2,f=Math.round(Number(o[2])/2)*2,l=c/f,n.pad?t(c,f,l,n.pad):[{filter:"scale",options:{w:c,h:f}}];if(a||u)return"aspect"in n?(c=a?a[1]:Math.round(Number(u[1])*n.aspect),f=u?u[1]:Math.round(Number(a[1])/n.aspect),c=Math.round(c/2)*2,f=Math.round(f/2)*2,n.pad?t(c,f,n.aspect,n.pad):[{filter:"scale",options:{w:c,h:f}}]):a?[{filter:"scale",options:{w:Math.round(Number(a[1])/2)*2,h:"trunc(ow/a/2)*2"}}]:[{filter:"scale",options:{w:"trunc(oh*a/2)*2",h:Math.round(Number(u[1])/2)*2}}];throw new Error("Invalid size specified: "+n.size)}}return Zn=function(r){r.keepPixelAspect=r.keepDisplayAspect=r.keepDisplayAspectRatio=r.keepDAR=function(){return this.videoFilters([{filter:"scale",options:{w:"if(gt(sar,1),iw*sar,iw)",h:"if(lt(sar,1),ih/sar,ih)"}},{filter:"setsar",options:"1"}])},r.withSize=r.setSize=r.size=function(i){var s=e(this._currentOutput,"size",i);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(s),this},r.withAspect=r.withAspectRatio=r.setAspect=r.setAspectRatio=r.aspect=r.aspectRatio=function(i){var s=Number(i);if(isNaN(s)){var n=i.match(/^(\d+):(\d+)$/);if(n)s=Number(n[1])/Number(n[2]);else throw new Error("Invalid aspect ratio: "+i)}var o=e(this._currentOutput,"aspect",s);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(o),this},r.applyAutopadding=r.applyAutoPadding=r.applyAutopad=r.applyAutoPad=r.withAutopadding=r.withAutoPadding=r.withAutopad=r.withAutoPad=r.autoPad=r.autopad=function(i,s){typeof i=="string"&&(s=i,i=!0),typeof i>"u"&&(i=!0);var n=e(this._currentOutput,"pad",i?s||"black":!1);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(n),this}},Zn}var ei,Vs;function Mf(){if(Vs)return ei;Vs=1;var t=Ke;return ei=function(e){e.addOutput=e.output=function(r,i){var s=!1;if(!r&&this._currentOutput)throw new Error("Invalid output");if(r&&typeof r!="string"){if(!("writable"in r)||!r.writable)throw new Error("Invalid output")}else if(typeof r=="string"){var n=r.match(/^([a-z]{2,}):/i);s=!n||n[0]==="file"}if(r&&!("target"in this._currentOutput))this._currentOutput.target=r,this._currentOutput.isFile=s,this._currentOutput.pipeopts=i||{};else{if(r&&typeof r!="string"){var o=this._outputs.some(function(u){return typeof u.target!="string"});if(o)throw new Error("Only one output stream is supported")}this._outputs.push(this._currentOutput={target:r,isFile:s,flags:{},pipeopts:i||{}});var a=this;["audio","audioFilters","video","videoFilters","sizeFilters","options"].forEach(function(u){a._currentOutput[u]=t.args()}),r||delete this._currentOutput.target}return this},e.seekOutput=e.seek=function(r){return this._currentOutput.options("-ss",r),this},e.withDuration=e.setDuration=e.duration=function(r){return this._currentOutput.options("-t",r),this},e.toFormat=e.withOutputFormat=e.outputFormat=e.format=function(r){return this._currentOutput.options("-f",r),this},e.map=function(r){return this._currentOutput.options("-map",r.replace(t.streamRegexp,"[$1]")),this},e.updateFlvMetadata=e.flvmeta=function(){return this._currentOutput.flags.flvmeta=!0,this}},ei}var ti,zs;function $f(){if(zs)return ti;zs=1;var t=Ke;return ti=function(e){e.addInputOption=e.addInputOptions=e.withInputOption=e.withInputOptions=e.inputOption=e.inputOptions=function(r){if(!this._currentInput)throw new Error("No input specified");var i=!0;return arguments.length>1&&(r=[].slice.call(arguments),i=!1),Array.isArray(r)||(r=[r]),this._currentInput.options(r.reduce(function(s,n){var o=String(n).split(" ");return i&&o.length===2?s.push(o[0],o[1]):s.push(n),s},[])),this},e.addOutputOption=e.addOutputOptions=e.addOption=e.addOptions=e.withOutputOption=e.withOutputOptions=e.withOption=e.withOptions=e.outputOption=e.outputOptions=function(r){var i=!0;return arguments.length>1&&(r=[].slice.call(arguments),i=!1),Array.isArray(r)||(r=[r]),this._currentOutput.options(r.reduce(function(s,n){var o=String(n).split(" ");return i&&o.length===2?s.push(o[0],o[1]):s.push(n),s},[])),this},e.filterGraph=e.complexFilter=function(r,i){if(this._complexFilters.clear(),Array.isArray(r)||(r=[r]),this._complexFilters("-filter_complex",t.makeFilterStrings(r).join(";")),Array.isArray(i)){var s=this;i.forEach(function(n){s._complexFilters("-map",n.replace(t.streamRegexp,"[$1]"))})}else typeof i=="string"&&this._complexFilters("-map",i.replace(t.streamRegexp,"[$1]"));return this}},ti}function Rf(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ri,Ws;function kf(){if(Ws)return ri;Ws=1;var t=ee;return ri=function(e){e.usingPreset=e.preset=function(r){if(typeof r=="function")r(this);else try{var i=t.join(this.options.presets,r),s=Rf(i);if(typeof s.load=="function")s.load(this);else throw new Error("preset "+i+" has no load() function")}catch(n){throw new Error("preset "+i+" could not be loaded: "+n.message)}return this}},ri}var ni={exports:{}},Hs;function Ui(){return Hs||(Hs=1,function(t){(function(){var e={},r,i;r=this,r!=null&&(i=r.async),e.noConflict=function(){return r.async=i,e};function s(w){var C=!1;return function(){if(C)throw new Error("Callback was already called.");C=!0,w.apply(r,arguments)}}var n=function(w,C){if(w.forEach)return w.forEach(C);for(var T=0;T<w.length;T+=1)C(w[T],T,w)},o=function(w,C){if(w.map)return w.map(C);var T=[];return n(w,function(p,b,A){T.push(C(p,b,A))}),T},a=function(w,C,T){return w.reduce?w.reduce(C,T):(n(w,function(p,b,A){T=C(T,p,b,A)}),T)},u=function(w){if(Object.keys)return Object.keys(w);var C=[];for(var T in w)w.hasOwnProperty(T)&&C.push(T);return C};typeof process>"u"||!process.nextTick?typeof setImmediate=="function"?(e.nextTick=function(w){setImmediate(w)},e.setImmediate=e.nextTick):(e.nextTick=function(w){setTimeout(w,0)},e.setImmediate=e.nextTick):(e.nextTick=process.nextTick,typeof setImmediate<"u"?e.setImmediate=function(w){setImmediate(w)}:e.setImmediate=e.nextTick),e.each=function(w,C,T){if(T=T||function(){},!w.length)return T();var p=0;n(w,function(b){C(b,s(function(A){A?(T(A),T=function(){}):(p+=1,p>=w.length&&T(null))}))})},e.forEach=e.each,e.eachSeries=function(w,C,T){if(T=T||function(){},!w.length)return T();var p=0,b=function(){C(w[p],function(A){A?(T(A),T=function(){}):(p+=1,p>=w.length?T(null):b())})};b()},e.forEachSeries=e.eachSeries,e.eachLimit=function(w,C,T,p){var b=h(C);b.apply(null,[w,T,p])},e.forEachLimit=e.eachLimit;var h=function(w){return function(C,T,p){if(p=p||function(){},!C.length||w<=0)return p();var b=0,A=0,P=0;(function U(){if(b>=C.length)return p();for(;P<w&&A<C.length;)A+=1,P+=1,T(C[A-1],function(B){B?(p(B),p=function(){}):(b+=1,P-=1,b>=C.length?p():U())})})()}},c=function(w){return function(){var C=Array.prototype.slice.call(arguments);return w.apply(null,[e.each].concat(C))}},f=function(w,C){return function(){var T=Array.prototype.slice.call(arguments);return C.apply(null,[h(w)].concat(T))}},l=function(w){return function(){var C=Array.prototype.slice.call(arguments);return w.apply(null,[e.eachSeries].concat(C))}},d=function(w,C,T,p){var b=[];C=o(C,function(A,P){return{index:P,value:A}}),w(C,function(A,P){T(A.value,function(U,B){b[A.index]=B,P(U)})},function(A){p(A,b)})};e.map=c(d),e.mapSeries=l(d),e.mapLimit=function(w,C,T,p){return y(C)(w,T,p)};var y=function(w){return f(w,d)};e.reduce=function(w,C,T,p){e.eachSeries(w,function(b,A){T(C,b,function(P,U){C=U,A(P)})},function(b){p(b,C)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(w,C,T,p){var b=o(w,function(A){return A}).reverse();e.reduce(b,C,T,p)},e.foldr=e.reduceRight;var v=function(w,C,T,p){var b=[];C=o(C,function(A,P){return{index:P,value:A}}),w(C,function(A,P){T(A.value,function(U){U&&b.push(A),P()})},function(A){p(o(b.sort(function(P,U){return P.index-U.index}),function(P){return P.value}))})};e.filter=c(v),e.filterSeries=l(v),e.select=e.filter,e.selectSeries=e.filterSeries;var O=function(w,C,T,p){var b=[];C=o(C,function(A,P){return{index:P,value:A}}),w(C,function(A,P){T(A.value,function(U){U||b.push(A),P()})},function(A){p(o(b.sort(function(P,U){return P.index-U.index}),function(P){return P.value}))})};e.reject=c(O),e.rejectSeries=l(O);var N=function(w,C,T,p){w(C,function(b,A){T(b,function(P){P?(p(b),p=function(){}):A()})},function(b){p()})};e.detect=c(N),e.detectSeries=l(N),e.some=function(w,C,T){e.each(w,function(p,b){C(p,function(A){A&&(T(!0),T=function(){}),b()})},function(p){T(!1)})},e.any=e.some,e.every=function(w,C,T){e.each(w,function(p,b){C(p,function(A){A||(T(!1),T=function(){}),b()})},function(p){T(!0)})},e.all=e.every,e.sortBy=function(w,C,T){e.map(w,function(p,b){C(p,function(A,P){A?b(A):b(null,{value:p,criteria:P})})},function(p,b){if(p)return T(p);var A=function(P,U){var B=P.criteria,q=U.criteria;return B<q?-1:B>q?1:0};T(null,o(b.sort(A),function(P){return P.value}))})},e.auto=function(w,C){C=C||function(){};var T=u(w);if(!T.length)return C(null);var p={},b=[],A=function(B){b.unshift(B)},P=function(B){for(var q=0;q<b.length;q+=1)if(b[q]===B){b.splice(q,1);return}},U=function(){n(b.slice(0),function(B){B()})};A(function(){u(p).length===T.length&&(C(null,p),C=function(){})}),n(T,function(B){var q=w[B]instanceof Function?[w[B]]:w[B],z=function(Q){var re=Array.prototype.slice.call(arguments,1);if(re.length<=1&&(re=re[0]),Q){var se={};n(u(p),function(pe){se[pe]=p[pe]}),se[B]=re,C(Q,se),C=function(){}}else p[B]=re,e.setImmediate(U)},W=q.slice(0,Math.abs(q.length-1))||[],K=function(){return a(W,function(Q,re){return Q&&p.hasOwnProperty(re)},!0)&&!p.hasOwnProperty(B)};if(K())q[q.length-1](z,p);else{var J=function(){K()&&(P(J),q[q.length-1](z,p))};A(J)}})},e.waterfall=function(w,C){if(C=C||function(){},w.constructor!==Array){var T=new Error("First argument to waterfall must be an array of functions");return C(T)}if(!w.length)return C();var p=function(b){return function(A){if(A)C.apply(null,arguments),C=function(){};else{var P=Array.prototype.slice.call(arguments,1),U=b.next();U?P.push(p(U)):P.push(C),e.setImmediate(function(){b.apply(null,P)})}}};p(e.iterator(w))()};var E=function(w,C,T){if(T=T||function(){},C.constructor===Array)w.map(C,function(b,A){b&&b(function(P){var U=Array.prototype.slice.call(arguments,1);U.length<=1&&(U=U[0]),A.call(null,P,U)})},T);else{var p={};w.each(u(C),function(b,A){C[b](function(P){var U=Array.prototype.slice.call(arguments,1);U.length<=1&&(U=U[0]),p[b]=U,A(P)})},function(b){T(b,p)})}};e.parallel=function(w,C){E({map:e.map,each:e.each},w,C)},e.parallelLimit=function(w,C,T){E({map:y(C),each:h(C)},w,T)},e.series=function(w,C){if(C=C||function(){},w.constructor===Array)e.mapSeries(w,function(p,b){p&&p(function(A){var P=Array.prototype.slice.call(arguments,1);P.length<=1&&(P=P[0]),b.call(null,A,P)})},C);else{var T={};e.eachSeries(u(w),function(p,b){w[p](function(A){var P=Array.prototype.slice.call(arguments,1);P.length<=1&&(P=P[0]),T[p]=P,b(A)})},function(p){C(p,T)})}},e.iterator=function(w){var C=function(T){var p=function(){return w.length&&w[T].apply(null,arguments),p.next()};return p.next=function(){return T<w.length-1?C(T+1):null},p};return C(0)},e.apply=function(w){var C=Array.prototype.slice.call(arguments,1);return function(){return w.apply(null,C.concat(Array.prototype.slice.call(arguments)))}};var g=function(w,C,T,p){var b=[];w(C,function(A,P){T(A,function(U,B){b=b.concat(B||[]),P(U)})},function(A){p(A,b)})};e.concat=c(g),e.concatSeries=l(g),e.whilst=function(w,C,T){w()?C(function(p){if(p)return T(p);e.whilst(w,C,T)}):T()},e.doWhilst=function(w,C,T){w(function(p){if(p)return T(p);C()?e.doWhilst(w,C,T):T()})},e.until=function(w,C,T){w()?T():C(function(p){if(p)return T(p);e.until(w,C,T)})},e.doUntil=function(w,C,T){w(function(p){if(p)return T(p);C()?T():e.doUntil(w,C,T)})},e.queue=function(w,C){C===void 0&&(C=1);function T(A,P,U,B){P.constructor!==Array&&(P=[P]),n(P,function(q){var z={data:q,callback:typeof B=="function"?B:null};U?A.tasks.unshift(z):A.tasks.push(z),A.saturated&&A.tasks.length===C&&A.saturated(),e.setImmediate(A.process)})}var p=0,b={tasks:[],concurrency:C,saturated:null,empty:null,drain:null,push:function(A,P){T(b,A,!1,P)},unshift:function(A,P){T(b,A,!0,P)},process:function(){if(p<b.concurrency&&b.tasks.length){var A=b.tasks.shift();b.empty&&b.tasks.length===0&&b.empty(),p+=1;var P=function(){p-=1,A.callback&&A.callback.apply(A,arguments),b.drain&&b.tasks.length+p===0&&b.drain(),b.process()},U=s(P);w(A.data,U)}},length:function(){return b.tasks.length},running:function(){return p}};return b},e.cargo=function(w,C){var T=!1,p=[],b={tasks:p,payload:C,saturated:null,empty:null,drain:null,push:function(A,P){A.constructor!==Array&&(A=[A]),n(A,function(U){p.push({data:U,callback:typeof P=="function"?P:null}),b.saturated&&p.length===C&&b.saturated()}),e.setImmediate(b.process)},process:function A(){if(!T){if(p.length===0){b.drain&&b.drain();return}var P=typeof C=="number"?p.splice(0,C):p.splice(0),U=o(P,function(B){return B.data});b.empty&&b.empty(),T=!0,w(U,function(){T=!1;var B=arguments;n(P,function(q){q.callback&&q.callback.apply(null,B)}),A()})}},length:function(){return p.length},running:function(){return T}};return b};var D=function(w){return function(C){var T=Array.prototype.slice.call(arguments,1);C.apply(null,T.concat([function(p){var b=Array.prototype.slice.call(arguments,1);typeof console<"u"&&(p?console.error&&console.error(p):console[w]&&n(b,function(A){console[w](A)}))}]))}};e.log=D("log"),e.dir=D("dir"),e.memoize=function(w,C){var T={},p={};C=C||function(A){return A};var b=function(){var A=Array.prototype.slice.call(arguments),P=A.pop(),U=C.apply(null,A);U in T?P.apply(null,T[U]):U in p?p[U].push(P):(p[U]=[P],w.apply(null,A.concat([function(){T[U]=arguments;var B=p[U];delete p[U];for(var q=0,z=B.length;q<z;q++)B[q].apply(null,arguments)}])))};return b.memo=T,b.unmemoized=w,b},e.unmemoize=function(w){return function(){return(w.unmemoized||w).apply(null,arguments)}},e.times=function(w,C,T){for(var p=[],b=0;b<w;b++)p.push(b);return e.map(p,C,T)},e.timesSeries=function(w,C,T){for(var p=[],b=0;b<w;b++)p.push(b);return e.mapSeries(p,C,T)},e.compose=function(){var w=Array.prototype.reverse.call(arguments);return function(){var C=this,T=Array.prototype.slice.call(arguments),p=T.pop();e.reduce(w,T,function(b,A,P){A.apply(C,b.concat([function(){var U=arguments[0],B=Array.prototype.slice.call(arguments,1);P(U,B)}]))},function(b,A){p.apply(C,[b].concat(A))})}};var _=function(w,C){var T=function(){var b=this,A=Array.prototype.slice.call(arguments),P=A.pop();return w(C,function(U,B){U.apply(b,A.concat([B]))},P)};if(arguments.length>2){var p=Array.prototype.slice.call(arguments,2);return T.apply(this,p)}else return T};e.applyEach=c(_),e.applyEachSeries=l(_),e.forever=function(w,C){function T(p){if(p){if(C)return C(p);throw p}w(T)}T()},t.exports?t.exports=e:r.async=e})()}(ni)),ni.exports}var ii,Gs;function jf(){if(Gs)return ii;Gs=1;var t=or.spawn,e=Ui(),r=Ke;function i(s){s._inputs[0].isStream||s.ffprobe(0,function(o,a){s._ffprobeData=a})}return ii=function(s){s._spawnFfmpeg=function(n,o,a,u){typeof o=="function"&&(u=a,a=o,o={}),typeof u>"u"&&(u=a,a=function(){});var h="stdoutLines"in o?o.stdoutLines:this.options.stdoutLines;this._getFfmpegPath(function(c,f){if(c)return u(c);if(!f||f.length===0)return u(new Error("Cannot find ffmpeg"));o.niceness&&o.niceness!==0&&!r.isWindows&&(n.unshift("-n",o.niceness,f),f="nice");var l=r.linesRing(h),d=!1,y=r.linesRing(h),v=!1,O=t(f,n,o);O.stderr&&O.stderr.setEncoding("utf8"),O.on("error",function(D){u(D)});var N=null;function E(D){D&&(N=D),g&&(d||!o.captureStdout)&&v&&u(N,l,y)}var g=!1;O.on("exit",function(D,_){g=!0,_?E(new Error("ffmpeg was killed with signal "+_)):D?E(new Error("ffmpeg exited with code "+D)):E()}),o.captureStdout&&(O.stdout.on("data",function(D){l.append(D)}),O.stdout.on("close",function(){l.close(),d=!0,E()})),O.stderr.on("data",function(D){y.append(D)}),O.stderr.on("close",function(){y.close(),v=!0,E()}),a(O,l,y)})},s._getArguments=function(){var n=this._complexFilters.get(),o=this._outputs.some(function(a){return a.isFile});return[].concat(this._inputs.reduce(function(a,u){var h=typeof u.source=="string"?u.source:"pipe:0";return a.concat(u.options.get(),["-i",h])},[]),this._global.get(),o?["-y"]:[],n,this._outputs.reduce(function(a,u){var h=r.makeFilterStrings(u.sizeFilters.get()),c=u.audioFilters.get(),f=u.videoFilters.get().concat(h),l;return u.target?typeof u.target=="string"?l=[u.target]:l=["pipe:1"]:l=[],a.concat(u.audio.get(),c.length?["-filter:a",c.join(",")]:[],u.video.get(),f.length?["-filter:v",f.join(",")]:[],u.options.get(),l)},[]))},s._prepare=function(n,o){var a=this;e.waterfall([function(u){a._checkCapabilities(u)},function(u){if(!o)return u();a.ffprobe(0,function(h,c){h||(a._ffprobeData=c),u()})},function(u){var h=a._outputs.some(function(c){return c.flags.flvmeta&&!c.isFile&&(a.logger.warn("Updating flv metadata is only supported for files"),c.flags.flvmeta=!1),c.flags.flvmeta});h?a._getFlvtoolPath(function(c){u(c)}):u()},function(u){var h;try{h=a._getArguments()}catch(c){return u(c)}u(null,h)},function(u,h){a.availableEncoders(function(c,f){for(var l=0;l<u.length;l++)(u[l]==="-acodec"||u[l]==="-vcodec")&&(l++,u[l]in f&&f[u[l]].experimental&&(u.splice(l+1,0,"-strict","experimental"),l+=2));h(null,u)})}],n),o||(this.listeners("progress").length>0?i(this):this.once("newListener",function(u){u==="progress"&&i(this)}))},s.exec=s.execute=s.run=function(){var n=this,o=this._outputs.some(function(f){return"target"in f});if(!o)throw new Error("No output specified");var a=this._outputs.filter(function(f){return typeof f.target!="string"})[0],u=this._inputs.filter(function(f){return typeof f.source!="string"})[0],h=!1;function c(f,l,d){h||(h=!0,f?n.emit("error",f,l,d):n.emit("end",l,d))}return n._prepare(function(f,l){if(f)return c(f);n._spawnFfmpeg(l,{captureStdout:!a,niceness:n.options.niceness,cwd:n.options.cwd,windowsHide:!0},function(y,v,O){if(n.ffmpegProc=y,n.emit("start","ffmpeg "+l.join(" ")),u&&(u.source.on("error",function(g){var D=new Error("Input stream error: "+g.message);D.inputStreamError=g,c(D),y.kill()}),u.source.resume(),u.source.pipe(y.stdin),y.stdin.on("error",function(){})),n.options.timeout&&(n.processTimer=setTimeout(function(){var g="process ran into a timeout ("+n.options.timeout+"s)";c(new Error(g),v.get(),O.get()),y.kill()},n.options.timeout*1e3)),a&&(y.stdout.pipe(a.target,a.pipeopts),a.target.on("close",function(){n.logger.debug("Output stream closed, scheduling kill for ffmpeg process"),setTimeout(function(){c(new Error("Output stream closed")),y.kill()},20)}),a.target.on("error",function(g){n.logger.debug("Output stream error, killing ffmpeg process");var D=new Error("Output stream error: "+g.message);D.outputStreamError=g,c(D,v.get(),O.get()),y.kill("SIGKILL")})),O){if(n.listeners("stderr").length&&O.callback(function(g){n.emit("stderr",g)}),n.listeners("codecData").length){var N=!1,E={};O.callback(function(g){N||(N=r.extractCodecData(n,g,E))})}n.listeners("progress").length&&O.callback(function(g){r.extractProgress(n,g)})}},function(y,v,O){if(clearTimeout(n.processTimer),delete n.ffmpegProc,y)y.message.match(/ffmpeg exited with code/)&&(y.message+=": "+r.extractError(O.get())),c(y,v.get(),O.get());else{var N=n._outputs.filter(function(E){return E.flags.flvmeta});N.length?n._getFlvtoolPath(function(E,g){if(E)return c(E);e.each(N,function(D,_){t(g,["-U",D.target],{windowsHide:!0}).on("error",function(w){_(new Error("Error running "+g+" on "+D.target+": "+w.message))}).on("exit",function(w,C){w!==0||C?_(new Error(g+" "+(C?"received signal "+C:"exited with code "+w))+" when running on "+D.target):_()})},function(D){D?c(D):c(null,v.get(),O.get())})}):c(null,v.get(),O.get())}})}),this},s.renice=function(n){if(!r.isWindows&&(n=n||0,(n<-20||n>20)&&this.logger.warn("Invalid niceness value: "+n+", must be between -20 and 20"),n=Math.min(20,Math.max(-20,n)),this.options.niceness=n,this.ffmpegProc)){var o=this.logger,a=this.ffmpegProc.pid,u=t("renice",[n,"-p",a],{windowsHide:!0});u.on("error",function(h){o.warn("could not renice process "+a+": "+h.message)}),u.on("exit",function(h,c){c?o.warn("could not renice process "+a+": renice was killed by signal "+c):h?o.warn("could not renice process "+a+": renice exited with "+h):o.info("successfully reniced process "+a+" to "+n+" niceness")})}return this},s.kill=function(n){return this.ffmpegProc?this.ffmpegProc.kill(n||"SIGKILL"):this.logger.warn("No running ffmpeg process, cannot send signal"),this}},ii}var oi,Ys;function qf(){if(Ys)return oi;Ys=1;var t=fe,e=ee,r=Ui(),i=Ke,s=/^\s*([D ])([E ])([VAS])([S ])([D ])([T ]) ([^ ]+) +(.*)$/,n=/^\s*([D\.])([E\.])([VAS])([I\.])([L\.])([S\.]) ([^ ]+) +(.*)$/,o=/\(encoders:([^\)]+)\)/,a=/\(decoders:([^\)]+)\)/,u=/^\s*([VAS\.])([F\.])([S\.])([X\.])([B\.])([D\.]) ([^ ]+) +(.*)$/,h=/^\s*([D ])([E ])\s+([^ ]+)\s+(.*)$/,c=/\r\n|\r|\n/,f=/^(?: [T\.][S\.][C\.] )?([^ ]+) +(AA?|VV?|\|)->(AA?|VV?|\|) +(.*)$/,l={};return oi=function(d){d.setFfmpegPath=function(y){return l.ffmpegPath=y,this},d.setFfprobePath=function(y){return l.ffprobePath=y,this},d.setFlvtoolPath=function(y){return l.flvtoolPath=y,this},d._forgetPaths=function(){delete l.ffmpegPath,delete l.ffprobePath,delete l.flvtoolPath},d._getFfmpegPath=function(y){if("ffmpegPath"in l)return y(null,l.ffmpegPath);r.waterfall([function(v){process.env.FFMPEG_PATH?t.exists(process.env.FFMPEG_PATH,function(O){O?v(null,process.env.FFMPEG_PATH):v(null,"")}):v(null,"")},function(v,O){if(v.length)return O(null,v);i.which("ffmpeg",function(N,E){O(N,E)})}],function(v,O){v?y(v):y(null,l.ffmpegPath=O||"")})},d._getFfprobePath=function(y){var v=this;if("ffprobePath"in l)return y(null,l.ffprobePath);r.waterfall([function(O){process.env.FFPROBE_PATH?t.exists(process.env.FFPROBE_PATH,function(N){O(null,N?process.env.FFPROBE_PATH:"")}):O(null,"")},function(O,N){if(O.length)return N(null,O);i.which("ffprobe",function(E,g){N(E,g)})},function(O,N){if(O.length)return N(null,O);v._getFfmpegPath(function(E,g){if(E)N(E);else if(g.length){var D=i.isWindows?"ffprobe.exe":"ffprobe",_=e.join(e.dirname(g),D);t.exists(_,function(w){N(null,w?_:"")})}else N(null,"")})}],function(O,N){O?y(O):y(null,l.ffprobePath=N||"")})},d._getFlvtoolPath=function(y){if("flvtoolPath"in l)return y(null,l.flvtoolPath);r.waterfall([function(v){process.env.FLVMETA_PATH?t.exists(process.env.FLVMETA_PATH,function(O){v(null,O?process.env.FLVMETA_PATH:"")}):v(null,"")},function(v,O){if(v.length)return O(null,v);process.env.FLVTOOL2_PATH?t.exists(process.env.FLVTOOL2_PATH,function(N){O(null,N?process.env.FLVTOOL2_PATH:"")}):O(null,"")},function(v,O){if(v.length)return O(null,v);i.which("flvmeta",function(N,E){O(N,E)})},function(v,O){if(v.length)return O(null,v);i.which("flvtool2",function(N,E){O(N,E)})}],function(v,O){v?y(v):y(null,l.flvtoolPath=O||"")})},d.availableFilters=d.getAvailableFilters=function(y){if("filters"in l)return y(null,l.filters);this._spawnFfmpeg(["-filters"],{captureStdout:!0,stdoutLines:0},function(v,O){if(v)return y(v);var N=O.get(),E=N.split(`
`),g={},D={A:"audio",V:"video","|":"none"};E.forEach(function(_){var w=_.match(f);w&&(g[w[1]]={description:w[4],input:D[w[2].charAt(0)],multipleInputs:w[2].length>1,output:D[w[3].charAt(0)],multipleOutputs:w[3].length>1})}),y(null,l.filters=g)})},d.availableCodecs=d.getAvailableCodecs=function(y){if("codecs"in l)return y(null,l.codecs);this._spawnFfmpeg(["-codecs"],{captureStdout:!0,stdoutLines:0},function(v,O){if(v)return y(v);var N=O.get(),E=N.split(c),g={};E.forEach(function(D){var _=D.match(s);if(_&&_[7]!=="="&&(g[_[7]]={type:{V:"video",A:"audio",S:"subtitle"}[_[3]],description:_[8],canDecode:_[1]==="D",canEncode:_[2]==="E",drawHorizBand:_[4]==="S",directRendering:_[5]==="D",weirdFrameTruncation:_[6]==="T"}),_=D.match(n),_&&_[7]!=="="){var w=g[_[7]]={type:{V:"video",A:"audio",S:"subtitle"}[_[3]],description:_[8],canDecode:_[1]==="D",canEncode:_[2]==="E",intraFrameOnly:_[4]==="I",isLossy:_[5]==="L",isLossless:_[6]==="S"},C=w.description.match(o);C=C?C[1].trim().split(" "):[];var T=w.description.match(a);if(T=T?T[1].trim().split(" "):[],C.length||T.length){var p={};i.copy(w,p),delete p.canEncode,delete p.canDecode,C.forEach(function(b){g[b]={},i.copy(p,g[b]),g[b].canEncode=!0}),T.forEach(function(b){b in g||(g[b]={},i.copy(p,g[b])),g[b].canDecode=!0})}}}),y(null,l.codecs=g)})},d.availableEncoders=d.getAvailableEncoders=function(y){if("encoders"in l)return y(null,l.encoders);this._spawnFfmpeg(["-encoders"],{captureStdout:!0,stdoutLines:0},function(v,O){if(v)return y(v);var N=O.get(),E=N.split(c),g={};E.forEach(function(D){var _=D.match(u);_&&_[7]!=="="&&(g[_[7]]={type:{V:"video",A:"audio",S:"subtitle"}[_[1]],description:_[8],frameMT:_[2]==="F",sliceMT:_[3]==="S",experimental:_[4]==="X",drawHorizBand:_[5]==="B",directRendering:_[6]==="D"})}),y(null,l.encoders=g)})},d.availableFormats=d.getAvailableFormats=function(y){if("formats"in l)return y(null,l.formats);this._spawnFfmpeg(["-formats"],{captureStdout:!0,stdoutLines:0},function(v,O){if(v)return y(v);var N=O.get(),E=N.split(c),g={};E.forEach(function(D){var _=D.match(h);_&&_[3].split(",").forEach(function(w){w in g||(g[w]={description:_[4],canDemux:!1,canMux:!1}),_[1]==="D"&&(g[w].canDemux=!0),_[2]==="E"&&(g[w].canMux=!0)})}),y(null,l.formats=g)})},d._checkCapabilities=function(y){var v=this;r.waterfall([function(O){v.availableFormats(O)},function(O,N){var E;if(E=v._outputs.reduce(function(g,D){var _=D.options.find("-f",1);return _&&(!(_[0]in O)||!O[_[0]].canMux)&&g.push(_),g},[]),E.length===1)return N(new Error("Output format "+E[0]+" is not available"));if(E.length>1)return N(new Error("Output formats "+E.join(", ")+" are not available"));if(E=v._inputs.reduce(function(g,D){var _=D.options.find("-f",1);return _&&(!(_[0]in O)||!O[_[0]].canDemux)&&g.push(_[0]),g},[]),E.length===1)return N(new Error("Input format "+E[0]+" is not available"));if(E.length>1)return N(new Error("Input formats "+E.join(", ")+" are not available"));N()},function(O){v.availableEncoders(O)},function(O,N){var E;if(E=v._outputs.reduce(function(g,D){var _=D.audio.find("-acodec",1);return _&&_[0]!=="copy"&&(!(_[0]in O)||O[_[0]].type!=="audio")&&g.push(_[0]),g},[]),E.length===1)return N(new Error("Audio codec "+E[0]+" is not available"));if(E.length>1)return N(new Error("Audio codecs "+E.join(", ")+" are not available"));if(E=v._outputs.reduce(function(g,D){var _=D.video.find("-vcodec",1);return _&&_[0]!=="copy"&&(!(_[0]in O)||O[_[0]].type!=="video")&&g.push(_[0]),g},[]),E.length===1)return N(new Error("Video codec "+E[0]+" is not available"));if(E.length>1)return N(new Error("Video codecs "+E.join(", ")+" are not available"));N()}],y)}},oi}var si,Ks;function Bf(){if(Ks)return si;Ks=1;var t=or.spawn;function e(s){return s.match(/^TAG:/)}function r(s){return s.match(/^DISPOSITION:/)}function i(s){var n=s.split(/\r\n|\r|\n/);n=n.filter(function(f){return f.length>0});var o={streams:[],format:{},chapters:[]};function a(f){for(var l={},d=n.shift();typeof d<"u";){if(d.toLowerCase()=="[/"+f+"]")return l;if(d.match(/^\[/)){d=n.shift();continue}var y=d.match(/^([^=]+)=(.*)$/);y&&(!y[1].match(/^TAG:/)&&y[2].match(/^[0-9]+(\.[0-9]+)?$/)?l[y[1]]=Number(y[2]):l[y[1]]=y[2]),d=n.shift()}return l}for(var u=n.shift();typeof u<"u";){if(u.match(/^\[stream/i)){var h=a("stream");o.streams.push(h)}else if(u.match(/^\[chapter/i)){var c=a("chapter");o.chapters.push(c)}else u.toLowerCase()==="[format]"&&(o.format=a("format"));u=n.shift()}return o}return si=function(s){s.ffprobe=function(){var n,o=null,a=[],u,u=arguments[arguments.length-1],h=!1;function c(f,l){h||(h=!0,u(f,l))}switch(arguments.length){case 3:o=arguments[0],a=arguments[1];break;case 2:typeof arguments[0]=="number"?o=arguments[0]:Array.isArray(arguments[0])&&(a=arguments[0]);break}if(o===null){if(!this._currentInput)return c(new Error("No input specified"));n=this._currentInput}else if(n=this._inputs[o],!n)return c(new Error("Invalid input index"));this._getFfprobePath(function(f,l){if(f)return c(f);if(!l)return c(new Error("Cannot find ffprobe"));var d="",y=!1,v="",O=!1,N=n.isStream?"pipe:0":n.source,E=t(l,["-show_streams","-show_format"].concat(a,N),{windowsHide:!0});n.isStream&&(E.stdin.on("error",function(w){["ECONNRESET","EPIPE","EOF"].indexOf(w.code)>=0||c(w)}),E.stdin.on("close",function(){n.source.pause(),n.source.unpipe(E.stdin)}),n.source.pipe(E.stdin)),E.on("error",u);var g=null;function D(w){if(w&&(g=w),_&&y&&O){if(g)return v&&(g.message+=`
`+v),c(g);var C=i(d);[C.format].concat(C.streams).forEach(function(T){if(T){var p=Object.keys(T).filter(e);p.length&&(T.tags=T.tags||{},p.forEach(function(A){T.tags[A.substr(4)]=T[A],delete T[A]}));var b=Object.keys(T).filter(r);b.length&&(T.disposition=T.disposition||{},b.forEach(function(A){T.disposition[A.substr(12)]=T[A],delete T[A]}))}}),c(null,C)}}var _=!1;E.on("exit",function(w,C){_=!0,w?D(new Error("ffprobe exited with code "+w)):C?D(new Error("ffprobe was killed with signal "+C)):D()}),E.stdout.on("data",function(w){d+=w}),E.stdout.on("close",function(){y=!0,D()}),E.stderr.on("data",function(w){v+=w}),E.stderr.on("close",function(){O=!0,D()})})}},si}var ai,Js;function Uf(){if(Js)return ai;Js=1;var t=fe,e=ee,r=wa.PassThrough,i=Ui(),s=Ke;return ai=function(o){o.saveToFile=o.save=function(a){return this.output(a).run(),this},o.writeToStream=o.pipe=o.stream=function(a,u){if(a&&!("writable"in a)&&(u=a,a=void 0),!a){if(process.version.match(/v0\.8\./))throw new Error("PassThrough stream is not supported on node v0.8");a=new r}return this.output(a,u).run(),a},o.takeScreenshots=o.thumbnail=o.thumbnails=o.screenshot=o.screenshots=function(a,u){var h=this,c=this._currentInput.source;if(a=a||{count:1},typeof a=="number"&&(a={count:a}),"folder"in a||(a.folder=u||"."),"timestamps"in a&&(a.timemarks=a.timestamps),!("timemarks"in a)){if(!a.count)throw new Error("Cannot take screenshots: neither a count nor a timemark list are specified");var f=100/(1+a.count);a.timemarks=[];for(var l=0;l<a.count;l++)a.timemarks.push(f*(l+1)+"%")}if("size"in a){var d=a.size.match(/^(\d+)x(\d+)$/),y=a.size.match(/^(\d+)x\?$/),v=a.size.match(/^\?x(\d+)$/),O=a.size.match(/^(\d+)%$/);if(!d&&!y&&!v&&!O)throw new Error("Invalid size parameter: "+a.size)}var N;function E(g){N?g(null,N):h.ffprobe(function(D,_){N=_,g(D,_)})}return i.waterfall([function(D){if(a.timemarks.some(function(_){return(""+_).match(/^[\d.]+%$/)})){if(typeof c!="string")return D(new Error("Cannot compute screenshot timemarks with an input stream, please specify fixed timemarks"));E(function(_,w){if(_)D(_);else{var C=w.streams.reduce(function(p,b){return b.codec_type==="video"&&b.width*b.height>p.width*p.height?b:p},{width:0,height:0});if(C.width===0)return D(new Error("No video stream in input, cannot take screenshots"));var T=Number(C.duration);if(isNaN(T)&&(T=Number(w.format.duration)),isNaN(T))return D(new Error("Could not get input duration, please specify fixed timemarks"));a.timemarks=a.timemarks.map(function(p){return(""+p).match(/^([\d.]+)%$/)?T*parseFloat(p)/100:p}),D()}})}else D()},function(D){a.timemarks=a.timemarks.map(function(_){return s.timemarkToSeconds(_)}).sort(function(_,w){return _-w}),D()},function(D){var _=a.filename||"tn.png";if(_.indexOf(".")===-1&&(_+=".png"),a.timemarks.length>1&&!_.match(/%(s|0*i)/)){var w=e.extname(_);_=e.join(e.dirname(_),e.basename(_,w)+"_%i"+w)}D(null,_)},function(D,_){if(D.match(/%[bf]/)){if(typeof c!="string")return _(new Error("Cannot replace %f or %b when using an input stream"));D=D.replace(/%f/g,e.basename(c)).replace(/%b/g,e.basename(c,e.extname(c)))}_(null,D)},function(D,_){if(D.match(/%[whr]/)){if(d)return _(null,D,d[1],d[2]);E(function(w,C){if(w)return _(new Error("Could not determine video resolution to replace %w, %h or %r"));var T=C.streams.reduce(function(A,P){return P.codec_type==="video"&&P.width*P.height>A.width*A.height?P:A},{width:0,height:0});if(T.width===0)return _(new Error("No video stream in input, cannot replace %w, %h or %r"));var p=T.width,b=T.height;y?(b=b*Number(y[1])/p,p=Number(y[1])):v?(p=p*Number(v[1])/b,b=Number(v[1])):O&&(p=p*Number(O[1])/100,b=b*Number(O[1])/100),_(null,D,Math.round(p/2)*2,Math.round(b/2)*2)})}else _(null,D,-1,-1)},function(D,_,w,C){D=D.replace(/%r/g,"%wx%h").replace(/%w/g,_).replace(/%h/g,w),C(null,D)},function(D,_){var w=a.timemarks.map(function(C,T){return D.replace(/%s/g,s.timemarkToSeconds(C)).replace(/%(0*)i/g,function(p,b){var A=""+(T+1);return b.substr(0,Math.max(0,b.length+1-A.length))+A})});h.emit("filenames",w),_(null,w)},function(D,_){t.exists(a.folder,function(w){w?_(null,D):t.mkdir(a.folder,function(C){C?_(C):_(null,D)})})}],function(D,_){if(D)return h.emit("error",D);var w=a.timemarks.length,C,T=[C={filter:"split",options:w,outputs:[]}];if("size"in a){h.size(a.size);var p=h._currentOutput.sizeFilters.get().map(function(U,B){return B>0&&(U.inputs="size"+(B-1)),U.outputs="size"+B,U});C.inputs="size"+(p.length-1),T=p.concat(T),h._currentOutput.sizeFilters.clear()}for(var b=0,A=0;A<w;A++){var P="screen"+A;C.outputs.push(P),A===0&&(b=a.timemarks[A],h.seekInput(b)),h.output(e.join(a.folder,_[A])).frames(1).map(P),A>0&&h.seek(a.timemarks[A]-b)}h.complexFilter(T),h.run()}),this},o.mergeToFile=o.concatenate=o.concat=function(a,u){var h=this._inputs.filter(function(f){return!f.isStream})[0],c=this;return this.ffprobe(this._inputs.indexOf(h),function(f,l){if(f)return c.emit("error",f);var d=l.streams.some(function(v){return v.codec_type==="audio"}),y=l.streams.some(function(v){return v.codec_type==="video"});c.output(a,u).complexFilter({filter:"concat",options:{n:c._inputs.length,v:y?1:0,a:d?1:0}}).run()}),this}},ai}var Xf=ee,Vf=Mt,au=ct.EventEmitter,wi=Ke;function ae(t,e){if(!(this instanceof ae))return new ae(t,e);au.call(this),typeof t=="object"&&!("readable"in t)?e=t:(e=e||{},e.source=t),this._inputs=[],e.source&&this.input(e.source),this._outputs=[],this.output();var r=this;["_global","_complexFilters"].forEach(function(i){r[i]=wi.args()}),e.stdoutLines="stdoutLines"in e?e.stdoutLines:100,e.presets=e.presets||e.preset||Xf.join(__dirname,"presets"),e.niceness=e.niceness||e.priority||0,this.options=e,this.logger=e.logger||{debug:function(){},info:function(){},warn:function(){},error:function(){}}}Vf.inherits(ae,au);var zf=ae;ae.prototype.clone=function(){var t=new ae,e=this;return t.options=this.options,t.logger=this.logger,t._inputs=this._inputs.map(function(r){return{source:r.source,options:r.options.clone()}}),"target"in this._outputs[0]?(t._outputs=[],t.output()):(t._outputs=[t._currentOutput={flags:{}}],["audio","audioFilters","video","videoFilters","sizeFilters","options"].forEach(function(r){t._currentOutput[r]=e._currentOutput[r].clone()}),this._currentOutput.sizeData&&(t._currentOutput.sizeData={},wi.copy(this._currentOutput.sizeData,t._currentOutput.sizeData)),wi.copy(this._currentOutput.flags,t._currentOutput.flags)),["_global","_complexFilters"].forEach(function(r){t[r]=e[r].clone()}),t};xf()(ae.prototype);If()(ae.prototype);Pf()(ae.prototype);Lf()(ae.prototype);Mf()(ae.prototype);$f()(ae.prototype);kf()(ae.prototype);jf()(ae.prototype);qf()(ae.prototype);ae.setFfmpegPath=function(t){new ae().setFfmpegPath(t)};ae.setFfprobePath=function(t){new ae().setFfprobePath(t)};ae.setFlvtoolPath=function(t){new ae().setFlvtoolPath(t)};ae.availableFilters=ae.getAvailableFilters=function(t){new ae().availableFilters(t)};ae.availableCodecs=ae.getAvailableCodecs=function(t){new ae().availableCodecs(t)};ae.availableFormats=ae.getAvailableFormats=function(t){new ae().availableFormats(t)};ae.availableEncoders=ae.getAvailableEncoders=function(t){new ae().availableEncoders(t)};Bf()(ae.prototype);ae.ffprobe=function(t){var e=new ae(t);e.ffprobe.apply(e,Array.prototype.slice.call(arguments,1))};Uf()(ae.prototype);var Ft=zf;const uu=gt(Ft);function Wf(){try{let t,e;if(oe.app.isPackaged){const r=ee.join(process.resourcesPath,"bin");if(!fe.existsSync(r))throw new Error(`FFmpeg目录不存在: ${r}`);const i=process.platform==="win32"?".exe":"";if(t=ee.join(r,`ffmpeg${i}`),e=ee.join(r,`ffprobe${i}`),!fe.existsSync(t))throw new Error(`FFmpeg可执行文件不存在: ${t}`);if(!fe.existsSync(e))throw new Error(`FFprobe可执行文件不存在: ${e}`)}else{const r=ee.join(oe.app.getAppPath(),"bin"),i=process.platform==="win32"?".exe":"";t=require("@ffmpeg-installer/ffmpeg").path,e=require("@ffprobe-installer/ffprobe").path}return Ft.setFfmpegPath(t),Ft.setFfprobePath(e),ue.info("FFmpeg路径:",t),ue.info("FFprobe路径:",e),{ffmpegPath:t,ffprobePath:e}}catch(t){throw ue.error("FFmpeg初始化失败:",t),new Error(`视频处理引擎初始化失败: ${t.message}`)}}function Nt(t){return new Promise((e,r)=>{Ft.ffprobe(t,(i,s)=>{if(i)return r(i);e(s.format.duration||0)})})}async function Hf(t){return new Promise(e=>{Ft.ffprobe(t,(r,i)=>{if(r)return ue.error("FFprobe检测音频流失败:",{filePath:t,error:r.message}),e(!1);const s=i.streams.some(n=>n.codec_type==="audio");ue.verbose(`音频流检测结果: ${t} -> ${s?"有":"无"}音频`),e(s)})})}function Gf(){if(oe.app.isPackaged)return ee.join(process.resourcesPath,"fonts");{const t=ee.join(__dirname,"../../fonts");if(fe.existsSync(t))return t;{const e={win32:"C:/Windows/Fonts/",darwin:"/System/Library/Fonts/",linux:"/usr/share/fonts/"},r=process.platform;return ee.join(e[r]||"")}}}const pt="zhushou";function Yf(){return oe.app.isPackaged?ee.dirname(process.execPath):oe.app.getAppPath()}function $t(){try{const t=Yf(),e=ee.join(t,"data");return fe.existsSync(e)||fe.mkdirSync(e,{recursive:!0}),e}catch(t){switch(console.error("Failed to create zhushou directory:",t),process.platform){case"win32":return ee.join(oe.app.getPath("appData"),pt);case"darwin":return ee.join(oe.app.getPath("appData"),pt);case"linux":return ee.join(oe.app.getPath("appData"),pt);default:return ee.join(oe.app.getPath("documents"),pt)}}}function cu(){try{const t=$t();fe.existsSync(t)||(fe.mkdirSync(t),console.log("Created zhushou directory at:",t));try{fe.accessSync(t,fe.constants.W_OK)}catch{return console.error("No write permission for zhushou directory, falling back to documents"),ee.join(oe.app.getPath("documents"),pt)}return t}catch(t){return console.error("Failed to create zhushou directory:",t),ee.join(oe.app.getPath("documents"),pt)}}function Kf(){oe.ipcMain.handle("get-default-save-path",()=>cu())}async function lu(t){try{const e={text:t.text,voice:t.voice||"xiaoyun",format:t.format||"mp3",sample_rate:t.sample_rate||16e3,volume:t.volume||50,speech_rate:t.speech_rate||0,pitch_rate:t.pitch_rate||0},r=t.output_dir||$t(),i=t.outputFileName||`tts_${Date.now()}`,s=await Ef();Tr.existsSync(r)||Tr.mkdirSync(r,{recursive:!0});const n=new nl({url:rr.ttsUrl,appkey:rr.appkey,token:s}),o=ee.join(r,`${i}.${e.format||"mp3"}`),a=Tr.createWriteStream(o);return ue.log(o),new Promise((u,h)=>{n.on("meta",c=>{ue.info("接收到元信息:",c)}),n.on("data",c=>{try{a.write(c),ue.debug(`接收到数据块，大小: ${c.length} bytes`)}catch(f){ue.error("写入文件失败:",f),h(f)}}),n.on("completed",async()=>{a.end(),ue.info("语音合成完成");const c=await Nt(o);ue.info(`语音合成完成，时长: ${c}秒`),u({success:!0,outputFile:o,duration:c})}),n.on("closed",()=>{ue.info("连接已关闭")}),n.on("failed",c=>{a.end(),ue.error("语音合成失败:",c),h(c)}),n.start(e,!0,6e3)})}catch(e){throw ue.error("语音合成初始化失败:",e),e}}function Jf(){oe.ipcMain.handle("text2voice",async(t,e)=>{const r=JSON.parse(hi(e));return ue.log("accept params:"),ue.log(JSON.stringify(r)),lu(r)})}const Qf={...je.webcrypto.subtle,generateKey:async(t,e,r)=>je.webcrypto.subtle.generateKey(t,e,r)},Zf={getRandomValues:t=>{if(!t)return t;switch(!0){case t instanceof Int8Array:return je.webcrypto.getRandomValues(t);case t instanceof Uint8Array:return je.webcrypto.getRandomValues(t);case t instanceof Uint8ClampedArray:return je.webcrypto.getRandomValues(t);case t instanceof Int16Array:return je.webcrypto.getRandomValues(t);case t instanceof Uint16Array:return je.webcrypto.getRandomValues(t);case t instanceof Int32Array:return je.webcrypto.getRandomValues(t);case t instanceof Uint32Array:return je.webcrypto.getRandomValues(t);default:throw new Error("Unsupported ArrayBufferView type")}},randomUUID:()=>je.webcrypto.randomUUID(),subtle:Qf};var Pe={},Ee={};Ee.fromCallback=function(t){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")t.apply(this,e);else return new Promise((r,i)=>{e.push((s,n)=>s!=null?i(s):r(n)),t.apply(this,e)})},"name",{value:t.name})};Ee.fromPromise=function(t){return Object.defineProperty(function(...e){const r=e[e.length-1];if(typeof r!="function")return t.apply(this,e);e.pop(),t.apply(this,e).then(i=>r(null,i),r)},"name",{value:t.name})};var Je=ec,eh=process.cwd,tr=null,th=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return tr||(tr=eh.call(process)),tr};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var Qs=process.chdir;process.chdir=function(t){tr=null,Qs.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Qs)}var rh=nh;function nh(t){Je.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=n(t.chown),t.fchown=n(t.fchown),t.lchown=n(t.lchown),t.chmod=i(t.chmod),t.fchmod=i(t.fchmod),t.lchmod=i(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=s(t.chmodSync),t.fchmodSync=s(t.fchmodSync),t.lchmodSync=s(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=u(t.statSync),t.fstatSync=u(t.fstatSync),t.lstatSync=u(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(c,f,l){l&&process.nextTick(l)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(c,f,l,d){d&&process.nextTick(d)},t.lchownSync=function(){}),th==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:function(c){function f(l,d,y){var v=Date.now(),O=0;c(l,d,function N(E){if(E&&(E.code==="EACCES"||E.code==="EPERM"||E.code==="EBUSY")&&Date.now()-v<6e4){setTimeout(function(){t.stat(d,function(g,D){g&&g.code==="ENOENT"?c(l,d,N):y(E)})},O),O<100&&(O+=10);return}y&&y(E)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(t.rename)),t.read=typeof t.read!="function"?t.read:function(c){function f(l,d,y,v,O,N){var E;if(N&&typeof N=="function"){var g=0;E=function(D,_,w){if(D&&D.code==="EAGAIN"&&g<10)return g++,c.call(t,l,d,y,v,O,E);N.apply(this,arguments)}}return c.call(t,l,d,y,v,O,E)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:function(c){return function(f,l,d,y,v){for(var O=0;;)try{return c.call(t,f,l,d,y,v)}catch(N){if(N.code==="EAGAIN"&&O<10){O++;continue}throw N}}}(t.readSync);function e(c){c.lchmod=function(f,l,d){c.open(f,Je.O_WRONLY|Je.O_SYMLINK,l,function(y,v){if(y){d&&d(y);return}c.fchmod(v,l,function(O){c.close(v,function(N){d&&d(O||N)})})})},c.lchmodSync=function(f,l){var d=c.openSync(f,Je.O_WRONLY|Je.O_SYMLINK,l),y=!0,v;try{v=c.fchmodSync(d,l),y=!1}finally{if(y)try{c.closeSync(d)}catch{}else c.closeSync(d)}return v}}function r(c){Je.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(f,l,d,y){c.open(f,Je.O_SYMLINK,function(v,O){if(v){y&&y(v);return}c.futimes(O,l,d,function(N){c.close(O,function(E){y&&y(N||E)})})})},c.lutimesSync=function(f,l,d){var y=c.openSync(f,Je.O_SYMLINK),v,O=!0;try{v=c.futimesSync(y,l,d),O=!1}finally{if(O)try{c.closeSync(y)}catch{}else c.closeSync(y)}return v}):c.futimes&&(c.lutimes=function(f,l,d,y){y&&process.nextTick(y)},c.lutimesSync=function(){})}function i(c){return c&&function(f,l,d){return c.call(t,f,l,function(y){h(y)&&(y=null),d&&d.apply(this,arguments)})}}function s(c){return c&&function(f,l){try{return c.call(t,f,l)}catch(d){if(!h(d))throw d}}}function n(c){return c&&function(f,l,d,y){return c.call(t,f,l,d,function(v){h(v)&&(v=null),y&&y.apply(this,arguments)})}}function o(c){return c&&function(f,l,d){try{return c.call(t,f,l,d)}catch(y){if(!h(y))throw y}}}function a(c){return c&&function(f,l,d){typeof l=="function"&&(d=l,l=null);function y(v,O){O&&(O.uid<0&&(O.uid+=4294967296),O.gid<0&&(O.gid+=4294967296)),d&&d.apply(this,arguments)}return l?c.call(t,f,l,y):c.call(t,f,y)}}function u(c){return c&&function(f,l){var d=l?c.call(t,f,l):c.call(t,f);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function h(c){if(!c||c.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(c.code==="EINVAL"||c.code==="EPERM"))}}var Zs=wa.Stream,ih=oh;function oh(t){return{ReadStream:e,WriteStream:r};function e(i,s){if(!(this instanceof e))return new e(i,s);Zs.call(this);var n=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,s=s||{};for(var o=Object.keys(s),a=0,u=o.length;a<u;a++){var h=o[a];this[h]=s[h]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){n._read()});return}t.open(this.path,this.flags,this.mode,function(c,f){if(c){n.emit("error",c),n.readable=!1;return}n.fd=f,n.emit("open",f),n._read()})}function r(i,s){if(!(this instanceof r))return new r(i,s);Zs.call(this),this.path=i,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,s=s||{};for(var n=Object.keys(s),o=0,a=n.length;o<a;o++){var u=n[o];this[u]=s[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var sh=uh,ah=Object.getPrototypeOf||function(t){return t.__proto__};function uh(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:ah(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var de=fe,ch=rh,lh=ih,fh=sh,Kt=Mt,Oe,ir;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Oe=Symbol.for("graceful-fs.queue"),ir=Symbol.for("graceful-fs.previous")):(Oe="___graceful-fs.queue",ir="___graceful-fs.previous");function hh(){}function fu(t,e){Object.defineProperty(t,Oe,{get:function(){return e}})}var ut=hh;Kt.debuglog?ut=Kt.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(ut=function(){var t=Kt.format.apply(Kt,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});if(!de[Oe]){var ph=ne[Oe]||[];fu(de,ph),de.close=function(t){function e(r,i){return t.call(de,r,function(s){s||ea(),typeof i=="function"&&i.apply(this,arguments)})}return Object.defineProperty(e,ir,{value:t}),e}(de.close),de.closeSync=function(t){function e(r){t.apply(de,arguments),ea()}return Object.defineProperty(e,ir,{value:t}),e}(de.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){ut(de[Oe]),ur.equal(de[Oe].length,0)})}ne[Oe]||fu(ne,de[Oe]);var wt=Xi(fh(de));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!de.__patched&&(wt=Xi(de),de.__patched=!0);function Xi(t){ch(t),t.gracefulify=Xi,t.createReadStream=_,t.createWriteStream=w;var e=t.readFile;t.readFile=r;function r(p,b,A){return typeof b=="function"&&(A=b,b=null),P(p,b,A);function P(U,B,q,z){return e(U,B,function(W){W&&(W.code==="EMFILE"||W.code==="ENFILE")?ht([P,[U,B,q],W,z||Date.now(),Date.now()]):typeof q=="function"&&q.apply(this,arguments)})}}var i=t.writeFile;t.writeFile=s;function s(p,b,A,P){return typeof A=="function"&&(P=A,A=null),U(p,b,A,P);function U(B,q,z,W,K){return i(B,q,z,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?ht([U,[B,q,z,W],J,K||Date.now(),Date.now()]):typeof W=="function"&&W.apply(this,arguments)})}}var n=t.appendFile;n&&(t.appendFile=o);function o(p,b,A,P){return typeof A=="function"&&(P=A,A=null),U(p,b,A,P);function U(B,q,z,W,K){return n(B,q,z,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?ht([U,[B,q,z,W],J,K||Date.now(),Date.now()]):typeof W=="function"&&W.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=u);function u(p,b,A,P){return typeof A=="function"&&(P=A,A=0),U(p,b,A,P);function U(B,q,z,W,K){return a(B,q,z,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?ht([U,[B,q,z,W],J,K||Date.now(),Date.now()]):typeof W=="function"&&W.apply(this,arguments)})}}var h=t.readdir;t.readdir=f;var c=/^v[0-5]\./;function f(p,b,A){typeof b=="function"&&(A=b,b=null);var P=c.test(process.version)?function(q,z,W,K){return h(q,U(q,z,W,K))}:function(q,z,W,K){return h(q,z,U(q,z,W,K))};return P(p,b,A);function U(B,q,z,W){return function(K,J){K&&(K.code==="EMFILE"||K.code==="ENFILE")?ht([P,[B,q,z],K,W||Date.now(),Date.now()]):(J&&J.sort&&J.sort(),typeof z=="function"&&z.call(this,K,J))}}}if(process.version.substr(0,4)==="v0.8"){var l=lh(t);N=l.ReadStream,g=l.WriteStream}var d=t.ReadStream;d&&(N.prototype=Object.create(d.prototype),N.prototype.open=E);var y=t.WriteStream;y&&(g.prototype=Object.create(y.prototype),g.prototype.open=D),Object.defineProperty(t,"ReadStream",{get:function(){return N},set:function(p){N=p},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return g},set:function(p){g=p},enumerable:!0,configurable:!0});var v=N;Object.defineProperty(t,"FileReadStream",{get:function(){return v},set:function(p){v=p},enumerable:!0,configurable:!0});var O=g;Object.defineProperty(t,"FileWriteStream",{get:function(){return O},set:function(p){O=p},enumerable:!0,configurable:!0});function N(p,b){return this instanceof N?(d.apply(this,arguments),this):N.apply(Object.create(N.prototype),arguments)}function E(){var p=this;T(p.path,p.flags,p.mode,function(b,A){b?(p.autoClose&&p.destroy(),p.emit("error",b)):(p.fd=A,p.emit("open",A),p.read())})}function g(p,b){return this instanceof g?(y.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}function D(){var p=this;T(p.path,p.flags,p.mode,function(b,A){b?(p.destroy(),p.emit("error",b)):(p.fd=A,p.emit("open",A))})}function _(p,b){return new t.ReadStream(p,b)}function w(p,b){return new t.WriteStream(p,b)}var C=t.open;t.open=T;function T(p,b,A,P){return typeof A=="function"&&(P=A,A=null),U(p,b,A,P);function U(B,q,z,W,K){return C(B,q,z,function(J,Q){J&&(J.code==="EMFILE"||J.code==="ENFILE")?ht([U,[B,q,z,W],J,K||Date.now(),Date.now()]):typeof W=="function"&&W.apply(this,arguments)})}}return t}function ht(t){ut("ENQUEUE",t[0].name,t[1]),de[Oe].push(t),Vi()}var Jt;function ea(){for(var t=Date.now(),e=0;e<de[Oe].length;++e)de[Oe][e].length>2&&(de[Oe][e][3]=t,de[Oe][e][4]=t);Vi()}function Vi(){if(clearTimeout(Jt),Jt=void 0,de[Oe].length!==0){var t=de[Oe].shift(),e=t[0],r=t[1],i=t[2],s=t[3],n=t[4];if(s===void 0)ut("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-s>=6e4){ut("TIMEOUT",e.name,r);var o=r.pop();typeof o=="function"&&o.call(null,i)}else{var a=Date.now()-n,u=Math.max(n-s,1),h=Math.min(u*1.2,100);a>=h?(ut("RETRY",e.name,r),e.apply(null,r.concat([s]))):de[Oe].push(t)}Jt===void 0&&(Jt=setTimeout(Vi,0))}}(function(t){const e=Ee.fromCallback,r=wt,i=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(s=>typeof r[s]=="function");Object.assign(t,r),i.forEach(s=>{t[s]=e(r[s])}),t.exists=function(s,n){return typeof n=="function"?r.exists(s,n):new Promise(o=>r.exists(s,o))},t.read=function(s,n,o,a,u,h){return typeof h=="function"?r.read(s,n,o,a,u,h):new Promise((c,f)=>{r.read(s,n,o,a,u,(l,d,y)=>{if(l)return f(l);c({bytesRead:d,buffer:y})})})},t.write=function(s,n,...o){return typeof o[o.length-1]=="function"?r.write(s,n,...o):new Promise((a,u)=>{r.write(s,n,...o,(h,c,f)=>{if(h)return u(h);a({bytesWritten:c,buffer:f})})})},t.readv=function(s,n,...o){return typeof o[o.length-1]=="function"?r.readv(s,n,...o):new Promise((a,u)=>{r.readv(s,n,...o,(h,c,f)=>{if(h)return u(h);a({bytesRead:c,buffers:f})})})},t.writev=function(s,n,...o){return typeof o[o.length-1]=="function"?r.writev(s,n,...o):new Promise((a,u)=>{r.writev(s,n,...o,(h,c,f)=>{if(h)return u(h);a({bytesWritten:c,buffers:f})})})},typeof r.realpath.native=="function"?t.realpath.native=e(r.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(Pe);var zi={},hu={};const dh=ee;hu.checkPath=function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(dh.parse(e).root,""))){const i=new Error(`Path contains invalid characters: ${e}`);throw i.code="EINVAL",i}};const pu=Pe,{checkPath:du}=hu,mu=t=>{const e={mode:511};return typeof t=="number"?t:{...e,...t}.mode};zi.makeDir=async(t,e)=>(du(t),pu.mkdir(t,{mode:mu(e),recursive:!0}));zi.makeDirSync=(t,e)=>(du(t),pu.mkdirSync(t,{mode:mu(e),recursive:!0}));const mh=Ee.fromPromise,{makeDir:yh,makeDirSync:ui}=zi,ci=mh(yh);var Ve={mkdirs:ci,mkdirsSync:ui,mkdirp:ci,mkdirpSync:ui,ensureDir:ci,ensureDirSync:ui};const gh=Ee.fromPromise,yu=Pe;function vh(t){return yu.access(t).then(()=>!0).catch(()=>!1)}var ft={pathExists:gh(vh),pathExistsSync:yu.existsSync};const dt=Pe,wh=Ee.fromPromise;async function Eh(t,e,r){const i=await dt.open(t,"r+");let s=null;try{await dt.futimes(i,e,r)}finally{try{await dt.close(i)}catch(n){s=n}}if(s)throw s}function bh(t,e,r){const i=dt.openSync(t,"r+");return dt.futimesSync(i,e,r),dt.closeSync(i)}var gu={utimesMillis:wh(Eh),utimesMillisSync:bh};const mt=Pe,be=ee,ta=Ee.fromPromise;function Sh(t,e,r){const i=r.dereference?s=>mt.stat(s,{bigint:!0}):s=>mt.lstat(s,{bigint:!0});return Promise.all([i(t),i(e).catch(s=>{if(s.code==="ENOENT")return null;throw s})]).then(([s,n])=>({srcStat:s,destStat:n}))}function Oh(t,e,r){let i;const s=r.dereference?o=>mt.statSync(o,{bigint:!0}):o=>mt.lstatSync(o,{bigint:!0}),n=s(t);try{i=s(e)}catch(o){if(o.code==="ENOENT")return{srcStat:n,destStat:null};throw o}return{srcStat:n,destStat:i}}async function Th(t,e,r,i){const{srcStat:s,destStat:n}=await Sh(t,e,i);if(n){if(Rt(s,n)){const o=be.basename(t),a=be.basename(e);if(r==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:s,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!s.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(s.isDirectory()&&Wi(t,e))throw new Error(vr(t,e,r));return{srcStat:s,destStat:n}}function Ch(t,e,r,i){const{srcStat:s,destStat:n}=Oh(t,e,i);if(n){if(Rt(s,n)){const o=be.basename(t),a=be.basename(e);if(r==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:s,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!s.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(s.isDirectory()&&Wi(t,e))throw new Error(vr(t,e,r));return{srcStat:s,destStat:n}}async function vu(t,e,r,i){const s=be.resolve(be.dirname(t)),n=be.resolve(be.dirname(r));if(n===s||n===be.parse(n).root)return;let o;try{o=await mt.stat(n,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Rt(e,o))throw new Error(vr(t,r,i));return vu(t,e,n,i)}function wu(t,e,r,i){const s=be.resolve(be.dirname(t)),n=be.resolve(be.dirname(r));if(n===s||n===be.parse(n).root)return;let o;try{o=mt.statSync(n,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Rt(e,o))throw new Error(vr(t,r,i));return wu(t,e,n,i)}function Rt(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function Wi(t,e){const r=be.resolve(t).split(be.sep).filter(s=>s),i=be.resolve(e).split(be.sep).filter(s=>s);return r.every((s,n)=>i[n]===s)}function vr(t,e,r){return`Cannot ${r} '${t}' to a subdirectory of itself, '${e}'.`}var Et={checkPaths:ta(Th),checkPathsSync:Ch,checkParentPaths:ta(vu),checkParentPathsSync:wu,isSrcSubdir:Wi,areIdentical:Rt};const Fe=Pe,xt=ee,{mkdirs:Dh}=Ve,{pathExists:_h}=ft,{utimesMillis:Ah}=gu,It=Et;async function Fh(t,e,r={}){typeof r=="function"&&(r={filter:r}),r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");const{srcStat:i,destStat:s}=await It.checkPaths(t,e,"copy",r);if(await It.checkParentPaths(t,i,e,"copy"),!await Eu(t,e,r))return;const o=xt.dirname(e);await _h(o)||await Dh(o),await bu(s,t,e,r)}async function Eu(t,e,r){return r.filter?r.filter(t,e):!0}async function bu(t,e,r,i){const n=await(i.dereference?Fe.stat:Fe.lstat)(e);if(n.isDirectory())return Ph(n,t,e,r,i);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return Nh(n,t,e,r,i);if(n.isSymbolicLink())return Lh(t,e,r,i);throw n.isSocket()?new Error(`Cannot copy a socket file: ${e}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}async function Nh(t,e,r,i,s){if(!e)return ra(t,r,i,s);if(s.overwrite)return await Fe.unlink(i),ra(t,r,i,s);if(s.errorOnExist)throw new Error(`'${i}' already exists`)}async function ra(t,e,r,i){if(await Fe.copyFile(e,r),i.preserveTimestamps){xh(t.mode)&&await Ih(r,t.mode);const s=await Fe.stat(e);await Ah(r,s.atime,s.mtime)}return Fe.chmod(r,t.mode)}function xh(t){return(t&128)===0}function Ih(t,e){return Fe.chmod(t,e|128)}async function Ph(t,e,r,i,s){e||await Fe.mkdir(i);const n=[];for await(const o of await Fe.opendir(r)){const a=xt.join(r,o.name),u=xt.join(i,o.name);n.push(Eu(a,u,s).then(h=>{if(h)return It.checkPaths(a,u,"copy",s).then(({destStat:c})=>bu(c,a,u,s))}))}await Promise.all(n),e||await Fe.chmod(i,t.mode)}async function Lh(t,e,r,i){let s=await Fe.readlink(e);if(i.dereference&&(s=xt.resolve(process.cwd(),s)),!t)return Fe.symlink(s,r);let n=null;try{n=await Fe.readlink(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return Fe.symlink(s,r);throw o}if(i.dereference&&(n=xt.resolve(process.cwd(),n)),It.isSrcSubdir(s,n))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${n}'.`);if(It.isSrcSubdir(n,s))throw new Error(`Cannot overwrite '${n}' with '${s}'.`);return await Fe.unlink(r),Fe.symlink(s,r)}var Mh=Fh;const xe=wt,Pt=ee,$h=Ve.mkdirsSync,Rh=gu.utimesMillisSync,Lt=Et;function kh(t,e,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:i,destStat:s}=Lt.checkPathsSync(t,e,"copy",r);if(Lt.checkParentPathsSync(t,i,e,"copy"),r.filter&&!r.filter(t,e))return;const n=Pt.dirname(e);return xe.existsSync(n)||$h(n),Su(s,t,e,r)}function Su(t,e,r,i){const n=(i.dereference?xe.statSync:xe.lstatSync)(e);if(n.isDirectory())return zh(n,t,e,r,i);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return jh(n,t,e,r,i);if(n.isSymbolicLink())return Gh(t,e,r,i);throw n.isSocket()?new Error(`Cannot copy a socket file: ${e}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}function jh(t,e,r,i,s){return e?qh(t,r,i,s):Ou(t,r,i,s)}function qh(t,e,r,i){if(i.overwrite)return xe.unlinkSync(r),Ou(t,e,r,i);if(i.errorOnExist)throw new Error(`'${r}' already exists`)}function Ou(t,e,r,i){return xe.copyFileSync(e,r),i.preserveTimestamps&&Bh(t.mode,e,r),Hi(r,t.mode)}function Bh(t,e,r){return Uh(t)&&Xh(r,t),Vh(e,r)}function Uh(t){return(t&128)===0}function Xh(t,e){return Hi(t,e|128)}function Hi(t,e){return xe.chmodSync(t,e)}function Vh(t,e){const r=xe.statSync(t);return Rh(e,r.atime,r.mtime)}function zh(t,e,r,i,s){return e?Tu(r,i,s):Wh(t.mode,r,i,s)}function Wh(t,e,r,i){return xe.mkdirSync(r),Tu(e,r,i),Hi(r,t)}function Tu(t,e,r){const i=xe.opendirSync(t);try{let s;for(;(s=i.readSync())!==null;)Hh(s.name,t,e,r)}finally{i.closeSync()}}function Hh(t,e,r,i){const s=Pt.join(e,t),n=Pt.join(r,t);if(i.filter&&!i.filter(s,n))return;const{destStat:o}=Lt.checkPathsSync(s,n,"copy",i);return Su(o,s,n,i)}function Gh(t,e,r,i){let s=xe.readlinkSync(e);if(i.dereference&&(s=Pt.resolve(process.cwd(),s)),t){let n;try{n=xe.readlinkSync(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return xe.symlinkSync(s,r);throw o}if(i.dereference&&(n=Pt.resolve(process.cwd(),n)),Lt.isSrcSubdir(s,n))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${n}'.`);if(Lt.isSrcSubdir(n,s))throw new Error(`Cannot overwrite '${n}' with '${s}'.`);return Yh(s,r)}else return xe.symlinkSync(s,r)}function Yh(t,e){return xe.unlinkSync(e),xe.symlinkSync(t,e)}var Kh=kh;const Jh=Ee.fromPromise;var Gi={copy:Jh(Mh),copySync:Kh};const Cu=wt,Qh=Ee.fromCallback;function Zh(t,e){Cu.rm(t,{recursive:!0,force:!0},e)}function ep(t){Cu.rmSync(t,{recursive:!0,force:!0})}var wr={remove:Qh(Zh),removeSync:ep};const tp=Ee.fromPromise,Du=Pe,_u=ee,Au=Ve,Fu=wr,na=tp(async function(e){let r;try{r=await Du.readdir(e)}catch{return Au.mkdirs(e)}return Promise.all(r.map(i=>Fu.remove(_u.join(e,i))))});function ia(t){let e;try{e=Du.readdirSync(t)}catch{return Au.mkdirsSync(t)}e.forEach(r=>{r=_u.join(t,r),Fu.removeSync(r)})}var rp={emptyDirSync:ia,emptydirSync:ia,emptyDir:na,emptydir:na};const np=Ee.fromPromise,Nu=ee,Ge=Pe,xu=Ve;async function ip(t){let e;try{e=await Ge.stat(t)}catch{}if(e&&e.isFile())return;const r=Nu.dirname(t);let i=null;try{i=await Ge.stat(r)}catch(s){if(s.code==="ENOENT"){await xu.mkdirs(r),await Ge.writeFile(t,"");return}else throw s}i.isDirectory()?await Ge.writeFile(t,""):await Ge.readdir(r)}function op(t){let e;try{e=Ge.statSync(t)}catch{}if(e&&e.isFile())return;const r=Nu.dirname(t);try{Ge.statSync(r).isDirectory()||Ge.readdirSync(r)}catch(i){if(i&&i.code==="ENOENT")xu.mkdirsSync(r);else throw i}Ge.writeFileSync(t,"")}var sp={createFile:np(ip),createFileSync:op};const ap=Ee.fromPromise,Iu=ee,tt=Pe,Pu=Ve,{pathExists:up}=ft,{areIdentical:Lu}=Et;async function cp(t,e){let r;try{r=await tt.lstat(e)}catch{}let i;try{i=await tt.lstat(t)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}if(r&&Lu(i,r))return;const s=Iu.dirname(e);await up(s)||await Pu.mkdirs(s),await tt.link(t,e)}function lp(t,e){let r;try{r=tt.lstatSync(e)}catch{}try{const n=tt.lstatSync(t);if(r&&Lu(n,r))return}catch(n){throw n.message=n.message.replace("lstat","ensureLink"),n}const i=Iu.dirname(e);return tt.existsSync(i)||Pu.mkdirsSync(i),tt.linkSync(t,e)}var fp={createLink:ap(cp),createLinkSync:lp};const nt=ee,At=Pe,{pathExists:hp}=ft,pp=Ee.fromPromise;async function dp(t,e){if(nt.isAbsolute(t)){try{await At.lstat(t)}catch(n){throw n.message=n.message.replace("lstat","ensureSymlink"),n}return{toCwd:t,toDst:t}}const r=nt.dirname(e),i=nt.join(r,t);if(await hp(i))return{toCwd:i,toDst:t};try{await At.lstat(t)}catch(n){throw n.message=n.message.replace("lstat","ensureSymlink"),n}return{toCwd:t,toDst:nt.relative(r,t)}}function mp(t,e){if(nt.isAbsolute(t)){if(!At.existsSync(t))throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}const r=nt.dirname(e),i=nt.join(r,t);if(At.existsSync(i))return{toCwd:i,toDst:t};if(!At.existsSync(t))throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:nt.relative(r,t)}}var yp={symlinkPaths:pp(dp),symlinkPathsSync:mp};const Mu=Pe,gp=Ee.fromPromise;async function vp(t,e){if(e)return e;let r;try{r=await Mu.lstat(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}function wp(t,e){if(e)return e;let r;try{r=Mu.lstatSync(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}var Ep={symlinkType:gp(vp),symlinkTypeSync:wp};const bp=Ee.fromPromise,$u=ee,Xe=Pe,{mkdirs:Sp,mkdirsSync:Op}=Ve,{symlinkPaths:Tp,symlinkPathsSync:Cp}=yp,{symlinkType:Dp,symlinkTypeSync:_p}=Ep,{pathExists:Ap}=ft,{areIdentical:Ru}=Et;async function Fp(t,e,r){let i;try{i=await Xe.lstat(e)}catch{}if(i&&i.isSymbolicLink()){const[a,u]=await Promise.all([Xe.stat(t),Xe.stat(e)]);if(Ru(a,u))return}const s=await Tp(t,e);t=s.toDst;const n=await Dp(s.toCwd,r),o=$u.dirname(e);return await Ap(o)||await Sp(o),Xe.symlink(t,e,n)}function Np(t,e,r){let i;try{i=Xe.lstatSync(e)}catch{}if(i&&i.isSymbolicLink()){const a=Xe.statSync(t),u=Xe.statSync(e);if(Ru(a,u))return}const s=Cp(t,e);t=s.toDst,r=_p(s.toCwd,r);const n=$u.dirname(e);return Xe.existsSync(n)||Op(n),Xe.symlinkSync(t,e,r)}var xp={createSymlink:bp(Fp),createSymlinkSync:Np};const{createFile:oa,createFileSync:sa}=sp,{createLink:aa,createLinkSync:ua}=fp,{createSymlink:ca,createSymlinkSync:la}=xp;var Ip={createFile:oa,createFileSync:sa,ensureFile:oa,ensureFileSync:sa,createLink:aa,createLinkSync:ua,ensureLink:aa,ensureLinkSync:ua,createSymlink:ca,createSymlinkSync:la,ensureSymlink:ca,ensureSymlinkSync:la};function Pp(t,{EOL:e=`
`,finalEOL:r=!0,replacer:i=null,spaces:s}={}){const n=r?e:"";return JSON.stringify(t,i,s).replace(/\n/g,e)+n}function Lp(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}var Yi={stringify:Pp,stripBom:Lp};let yt;try{yt=wt}catch{yt=fe}const Er=Ee,{stringify:ku,stripBom:ju}=Yi;async function Mp(t,e={}){typeof e=="string"&&(e={encoding:e});const r=e.fs||yt,i="throws"in e?e.throws:!0;let s=await Er.fromCallback(r.readFile)(t,e);s=ju(s);let n;try{n=JSON.parse(s,e?e.reviver:null)}catch(o){if(i)throw o.message=`${t}: ${o.message}`,o;return null}return n}const $p=Er.fromPromise(Mp);function Rp(t,e={}){typeof e=="string"&&(e={encoding:e});const r=e.fs||yt,i="throws"in e?e.throws:!0;try{let s=r.readFileSync(t,e);return s=ju(s),JSON.parse(s,e.reviver)}catch(s){if(i)throw s.message=`${t}: ${s.message}`,s;return null}}async function kp(t,e,r={}){const i=r.fs||yt,s=ku(e,r);await Er.fromCallback(i.writeFile)(t,s,r)}const jp=Er.fromPromise(kp);function qp(t,e,r={}){const i=r.fs||yt,s=ku(e,r);return i.writeFileSync(t,s,r)}const Bp={readFile:$p,readFileSync:Rp,writeFile:jp,writeFileSync:qp};var Up=Bp;const Qt=Up;var Xp={readJson:Qt.readFile,readJsonSync:Qt.readFileSync,writeJson:Qt.writeFile,writeJsonSync:Qt.writeFileSync};const Vp=Ee.fromPromise,Ei=Pe,qu=ee,Bu=Ve,zp=ft.pathExists;async function Wp(t,e,r="utf-8"){const i=qu.dirname(t);return await zp(i)||await Bu.mkdirs(i),Ei.writeFile(t,e,r)}function Hp(t,...e){const r=qu.dirname(t);Ei.existsSync(r)||Bu.mkdirsSync(r),Ei.writeFileSync(t,...e)}var Ki={outputFile:Vp(Wp),outputFileSync:Hp};const{stringify:Gp}=Yi,{outputFile:Yp}=Ki;async function Kp(t,e,r={}){const i=Gp(e,r);await Yp(t,i,r)}var Jp=Kp;const{stringify:Qp}=Yi,{outputFileSync:Zp}=Ki;function ed(t,e,r){const i=Qp(e,r);Zp(t,i,r)}var td=ed;const rd=Ee.fromPromise,Ie=Xp;Ie.outputJson=rd(Jp);Ie.outputJsonSync=td;Ie.outputJSON=Ie.outputJson;Ie.outputJSONSync=Ie.outputJsonSync;Ie.writeJSON=Ie.writeJson;Ie.writeJSONSync=Ie.writeJsonSync;Ie.readJSON=Ie.readJson;Ie.readJSONSync=Ie.readJsonSync;var nd=Ie;const id=Pe,fa=ee,{copy:od}=Gi,{remove:Uu}=wr,{mkdirp:sd}=Ve,{pathExists:ad}=ft,ha=Et;async function ud(t,e,r={}){const i=r.overwrite||r.clobber||!1,{srcStat:s,isChangingCase:n=!1}=await ha.checkPaths(t,e,"move",r);await ha.checkParentPaths(t,s,e,"move");const o=fa.dirname(e);return fa.parse(o).root!==o&&await sd(o),cd(t,e,i,n)}async function cd(t,e,r,i){if(!i){if(r)await Uu(e);else if(await ad(e))throw new Error("dest already exists.")}try{await id.rename(t,e)}catch(s){if(s.code!=="EXDEV")throw s;await ld(t,e,r)}}async function ld(t,e,r){return await od(t,e,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),Uu(t)}var fd=ud;const Xu=wt,bi=ee,hd=Gi.copySync,Vu=wr.removeSync,pd=Ve.mkdirpSync,pa=Et;function dd(t,e,r){r=r||{};const i=r.overwrite||r.clobber||!1,{srcStat:s,isChangingCase:n=!1}=pa.checkPathsSync(t,e,"move",r);return pa.checkParentPathsSync(t,s,e,"move"),md(e)||pd(bi.dirname(e)),yd(t,e,i,n)}function md(t){const e=bi.dirname(t);return bi.parse(e).root===e}function yd(t,e,r,i){if(i)return li(t,e,r);if(r)return Vu(e),li(t,e,r);if(Xu.existsSync(e))throw new Error("dest already exists.");return li(t,e,r)}function li(t,e,r){try{Xu.renameSync(t,e)}catch(i){if(i.code!=="EXDEV")throw i;return gd(t,e,r)}}function gd(t,e,r){return hd(t,e,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),Vu(t)}var vd=dd;const wd=Ee.fromPromise;var Ed={move:wd(fd),moveSync:vd},bd={...Pe,...Gi,...rp,...Ip,...nd,...Ve,...Ed,...Ki,...ft,...wr};const Sd=gt(bd);function Od(){const t=!oe.app.isPackaged;ue.initialize({preload:!0,spyRendererConsole:t});const e=ee.join($t(),"logs"),r=ee.join(e,"app.log");Sd.ensureDirSync(e),ue.transports.file.level=t?"debug":"info",ue.transports.file.resolvePathFn=()=>r,ue.transports.file.maxSize=10*1024*1024,t&&(ue.transports.console.level="debug",ue.transports.file.format="[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}] {text}"),console.log(`[Logger] 日志文件路径: ${r}`)}var zu={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(ne,function(){var r=1e3,i=6e4,s=36e5,n="millisecond",o="second",a="minute",u="hour",h="day",c="week",f="month",l="quarter",d="year",y="date",v="Invalid Date",O=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(B){var q=["th","st","nd","rd"],z=B%100;return"["+B+(q[(z-20)%10]||q[z]||q[0])+"]"}},g=function(B,q,z){var W=String(B);return!W||W.length>=q?B:""+Array(q+1-W.length).join(z)+B},D={s:g,z:function(B){var q=-B.utcOffset(),z=Math.abs(q),W=Math.floor(z/60),K=z%60;return(q<=0?"+":"-")+g(W,2,"0")+":"+g(K,2,"0")},m:function B(q,z){if(q.date()<z.date())return-B(z,q);var W=12*(z.year()-q.year())+(z.month()-q.month()),K=q.clone().add(W,f),J=z-K<0,Q=q.clone().add(W+(J?-1:1),f);return+(-(W+(z-K)/(J?K-Q:Q-K))||0)},a:function(B){return B<0?Math.ceil(B)||0:Math.floor(B)},p:function(B){return{M:f,y:d,w:c,d:h,D:y,h:u,m:a,s:o,ms:n,Q:l}[B]||String(B||"").toLowerCase().replace(/s$/,"")},u:function(B){return B===void 0}},_="en",w={};w[_]=E;var C="$isDayjsObject",T=function(B){return B instanceof P||!(!B||!B[C])},p=function B(q,z,W){var K;if(!q)return _;if(typeof q=="string"){var J=q.toLowerCase();w[J]&&(K=J),z&&(w[J]=z,K=J);var Q=q.split("-");if(!K&&Q.length>1)return B(Q[0])}else{var re=q.name;w[re]=q,K=re}return!W&&K&&(_=K),K||!W&&_},b=function(B,q){if(T(B))return B.clone();var z=typeof q=="object"?q:{};return z.date=B,z.args=arguments,new P(z)},A=D;A.l=p,A.i=T,A.w=function(B,q){return b(B,{locale:q.$L,utc:q.$u,x:q.$x,$offset:q.$offset})};var P=function(){function B(z){this.$L=p(z.locale,null,!0),this.parse(z),this.$x=this.$x||z.x||{},this[C]=!0}var q=B.prototype;return q.parse=function(z){this.$d=function(W){var K=W.date,J=W.utc;if(K===null)return new Date(NaN);if(A.u(K))return new Date;if(K instanceof Date)return new Date(K);if(typeof K=="string"&&!/Z$/i.test(K)){var Q=K.match(O);if(Q){var re=Q[2]-1||0,se=(Q[7]||"0").substring(0,3);return J?new Date(Date.UTC(Q[1],re,Q[3]||1,Q[4]||0,Q[5]||0,Q[6]||0,se)):new Date(Q[1],re,Q[3]||1,Q[4]||0,Q[5]||0,Q[6]||0,se)}}return new Date(K)}(z),this.init()},q.init=function(){var z=this.$d;this.$y=z.getFullYear(),this.$M=z.getMonth(),this.$D=z.getDate(),this.$W=z.getDay(),this.$H=z.getHours(),this.$m=z.getMinutes(),this.$s=z.getSeconds(),this.$ms=z.getMilliseconds()},q.$utils=function(){return A},q.isValid=function(){return this.$d.toString()!==v},q.isSame=function(z,W){var K=b(z);return this.startOf(W)<=K&&K<=this.endOf(W)},q.isAfter=function(z,W){return b(z)<this.startOf(W)},q.isBefore=function(z,W){return this.endOf(W)<b(z)},q.$g=function(z,W,K){return A.u(z)?this[W]:this.set(K,z)},q.unix=function(){return Math.floor(this.valueOf()/1e3)},q.valueOf=function(){return this.$d.getTime()},q.startOf=function(z,W){var K=this,J=!!A.u(W)||W,Q=A.p(z),re=function(H,m){var x=A.w(K.$u?Date.UTC(K.$y,m,H):new Date(K.$y,m,H),K);return J?x:x.endOf(h)},se=function(H,m){return A.w(K.toDate()[H].apply(K.toDate("s"),(J?[0,0,0,0]:[23,59,59,999]).slice(m)),K)},pe=this.$W,Y=this.$M,ve=this.$D,Re="set"+(this.$u?"UTC":"");switch(Q){case d:return J?re(1,0):re(31,11);case f:return J?re(1,Y):re(0,Y+1);case c:var F=this.$locale().weekStart||0,S=(pe<F?pe+7:pe)-F;return re(J?ve-S:ve+(6-S),Y);case h:case y:return se(Re+"Hours",0);case u:return se(Re+"Minutes",1);case a:return se(Re+"Seconds",2);case o:return se(Re+"Milliseconds",3);default:return this.clone()}},q.endOf=function(z){return this.startOf(z,!1)},q.$set=function(z,W){var K,J=A.p(z),Q="set"+(this.$u?"UTC":""),re=(K={},K[h]=Q+"Date",K[y]=Q+"Date",K[f]=Q+"Month",K[d]=Q+"FullYear",K[u]=Q+"Hours",K[a]=Q+"Minutes",K[o]=Q+"Seconds",K[n]=Q+"Milliseconds",K)[J],se=J===h?this.$D+(W-this.$W):W;if(J===f||J===d){var pe=this.clone().set(y,1);pe.$d[re](se),pe.init(),this.$d=pe.set(y,Math.min(this.$D,pe.daysInMonth())).$d}else re&&this.$d[re](se);return this.init(),this},q.set=function(z,W){return this.clone().$set(z,W)},q.get=function(z){return this[A.p(z)]()},q.add=function(z,W){var K,J=this;z=Number(z);var Q=A.p(W),re=function(Y){var ve=b(J);return A.w(ve.date(ve.date()+Math.round(Y*z)),J)};if(Q===f)return this.set(f,this.$M+z);if(Q===d)return this.set(d,this.$y+z);if(Q===h)return re(1);if(Q===c)return re(7);var se=(K={},K[a]=i,K[u]=s,K[o]=r,K)[Q]||1,pe=this.$d.getTime()+z*se;return A.w(pe,this)},q.subtract=function(z,W){return this.add(-1*z,W)},q.format=function(z){var W=this,K=this.$locale();if(!this.isValid())return K.invalidDate||v;var J=z||"YYYY-MM-DDTHH:mm:ssZ",Q=A.z(this),re=this.$H,se=this.$m,pe=this.$M,Y=K.weekdays,ve=K.months,Re=K.meridiem,F=function(m,x,I,k){return m&&(m[x]||m(W,J))||I[x].slice(0,k)},S=function(m){return A.s(re%12||12,m,"0")},H=Re||function(m,x,I){var k=m<12?"AM":"PM";return I?k.toLowerCase():k};return J.replace(N,function(m,x){return x||function(I){switch(I){case"YY":return String(W.$y).slice(-2);case"YYYY":return A.s(W.$y,4,"0");case"M":return pe+1;case"MM":return A.s(pe+1,2,"0");case"MMM":return F(K.monthsShort,pe,ve,3);case"MMMM":return F(ve,pe);case"D":return W.$D;case"DD":return A.s(W.$D,2,"0");case"d":return String(W.$W);case"dd":return F(K.weekdaysMin,W.$W,Y,2);case"ddd":return F(K.weekdaysShort,W.$W,Y,3);case"dddd":return Y[W.$W];case"H":return String(re);case"HH":return A.s(re,2,"0");case"h":return S(1);case"hh":return S(2);case"a":return H(re,se,!0);case"A":return H(re,se,!1);case"m":return String(se);case"mm":return A.s(se,2,"0");case"s":return String(W.$s);case"ss":return A.s(W.$s,2,"0");case"SSS":return A.s(W.$ms,3,"0");case"Z":return Q}return null}(m)||Q.replace(":","")})},q.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},q.diff=function(z,W,K){var J,Q=this,re=A.p(W),se=b(z),pe=(se.utcOffset()-this.utcOffset())*i,Y=this-se,ve=function(){return A.m(Q,se)};switch(re){case d:J=ve()/12;break;case f:J=ve();break;case l:J=ve()/3;break;case c:J=(Y-pe)/6048e5;break;case h:J=(Y-pe)/864e5;break;case u:J=Y/s;break;case a:J=Y/i;break;case o:J=Y/r;break;default:J=Y}return K?J:A.a(J)},q.daysInMonth=function(){return this.endOf(f).$D},q.$locale=function(){return w[this.$L]},q.locale=function(z,W){if(!z)return this.$L;var K=this.clone(),J=p(z,W,!0);return J&&(K.$L=J),K},q.clone=function(){return A.w(this.$d,this)},q.toDate=function(){return new Date(this.valueOf())},q.toJSON=function(){return this.isValid()?this.toISOString():null},q.toISOString=function(){return this.$d.toISOString()},q.toString=function(){return this.$d.toUTCString()},B}(),U=P.prototype;return b.prototype=U,[["$ms",n],["$s",o],["$m",a],["$H",u],["$W",h],["$M",f],["$y",d],["$D",y]].forEach(function(B){U[B[1]]=function(q){return this.$g(q,B[0],B[1])}}),b.extend=function(B,q){return B.$i||(B(q,P,b),B.$i=!0),b},b.locale=p,b.isDayjs=T,b.unix=function(B){return b(1e3*B)},b.en=w[_],b.Ls=w,b.p={},b})})(zu);var Td=zu.exports;const Cd=gt(Td);function da(t,e,r,i,s,n,o){const{fontFamily:a,fontSize:u,fontWeight:h,underline:c,italic:f,textAlign:l,customStyle:d}=e;let y=e.fontColor.replace("#",""),v="000000",O="000000",N={left:s==="subtitles"?1:7,center:s==="subtitles"?2:8,right:s==="subtitles"?3:9};const E=n<o;let g=s==="subtitles"?100:30;E||(g=s==="subtitles"?10:0);const D=_d(o,i),_=s==="subtitles"?`Scroll up;${D}`:"";let w=1,C=1;d==="custom-style-1"?(C=2,v="1A1A1A",y="ffffff"):d==="custom-style-2"?(C=2,v="1A1A1A",y="627EE9"):d==="custom-style-3"?(C=2,v="1A1A1A",y="1A1A1A"):d==="custom-style-4"?(C=2,v="B463FE",y="B463FE"):d==="custom-style-5"?(C=2,v="FF9C20",y="FF9C20"):d==="custom-style-6"?(C=2,v="2278FF",y="2278FF"):d==="custom-style-7"?(w=3,C=2,v="1A1A1A",y="1A1A1A",O="FFE306"):d==="custom-style-8"?(C=2,v="1A1A1A",y="FAF5B0"):d==="custom-style-9"?(C=2,v="1A1A1A",y="FF9C20"):d==="custom-style-10"?(C=2,v="F09CAF",y="FFFFFF"):d==="custom-style-11"&&(C=2,v="F86F32",y="FDDC63");const T=`Style: ${s},Arial,${u},${fi(y)},&H000000FF&,${fi(v)},${fi(O)},${h==="bold"?1:0},${f?1:0},${c?1:0},0,100,100,0,0,${w},${C},0,${N[l]},30,30,${g},0`,p=`Dialogue: 0,${ma(r)},${ma(r+i)},${s},,0,0,0,${_},${t}`;return{style:T,dialogue:p}}function Dd(t,e,r,i,s){const o=Math.round(384*(s/i)),a=e.join(`
`),u=r.join(`
`),h=`
[Script Info]
Title: Dynamic Subtitles
ScriptType: v4.00+
PlayResX: 384
PlayResY: ${o}
ScaledBorderAndShadow: yes
WrapStyle: 0

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
${a}

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
${u}
  `;fe.writeFileSync(t,h.trim())}function ma(t){const e=Math.floor(t/3600),r=Math.floor(t%3600/60),i=Math.floor(t%60),s=Math.floor((t-Math.floor(t))*100);return`${e}:${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}.${s.toString().padStart(2,"0")}`}function fi(t,e="00"){const r=`${t.slice(4,6)}${t.slice(2,4)}${t.slice(0,2)}`;return`&H${e}${r}&`}function _d(t,e){return t*1.2/e}class Ad{constructor(e){ie(this,"value");ie(this,"next");this.value=e}}var Le,st,at;class Fd{constructor(){jt(this,Le,void 0);jt(this,st,void 0);jt(this,at,void 0);this.clear()}enqueue(e){const r=new Ad(e);ke(this,Le)?(ke(this,st).next=r,ze(this,st,r)):(ze(this,Le,r),ze(this,st,r)),Or(this,at)._++}dequeue(){const e=ke(this,Le);if(e)return ze(this,Le,ke(this,Le).next),Or(this,at)._--,e.value}peek(){if(ke(this,Le))return ke(this,Le).value}clear(){ze(this,Le,void 0),ze(this,st,void 0),ze(this,at,0)}get size(){return ke(this,at)}*[Symbol.iterator](){let e=ke(this,Le);for(;e;)yield e.value,e=e.next}*drain(){for(;ke(this,Le);)yield this.dequeue()}}Le=new WeakMap,st=new WeakMap,at=new WeakMap;function Nd(t){ya(t);const e=new Fd;let r=0;const i=()=>{r<t&&e.size>0&&(e.dequeue()(),r++)},s=()=>{r--,i()},n=async(u,h,c)=>{const f=(async()=>u(...c))();h(f);try{await f}catch{}s()},o=(u,h,c)=>{new Promise(f=>{e.enqueue(f)}).then(n.bind(void 0,u,h,c)),(async()=>(await Promise.resolve(),r<t&&i()))()},a=(u,...h)=>new Promise(c=>{o(u,c,h)});return Object.defineProperties(a,{activeCount:{get:()=>r},pendingCount:{get:()=>e.size},clearQueue:{value(){e.clear()}},concurrency:{get:()=>t,set(u){ya(u),t=u,queueMicrotask(()=>{for(;r<t&&e.size>0;)i()})}}}),a}function ya(t){if(!((Number.isInteger(t)||t===Number.POSITIVE_INFINITY)&&t>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up")}const ga=Nd(Math.max(1,require("os").cpus().length-1));async function xd(t){const{videoPath:e,audioPath:r,isOpenOriginAudio:i,startTime:s,currentDuration:n,outputPath:o,videoWidth:a,videoHeight:u,assFilePath:h}=t;return new Promise(async(c,f)=>{const l=uu().input(e).input(r),d=[{filter:"trim",options:{start:s,duration:n},inputs:"0:v",outputs:"trimmed_video"},{filter:"setpts",options:"PTS-STARTPTS",inputs:"trimmed_video",outputs:"video_pts"},{filter:"scale",options:{w:a,h:u,force_original_aspect_ratio:"decrease",eval:"frame"},inputs:"video_pts",outputs:"scaled_video"},{filter:"pad",options:{width:a,height:u,x:"(ow-iw)/2",y:"(oh-ih)/2",color:"black"},inputs:"scaled_video",outputs:"padded_video"}],y=Gf();d.push({filter:"subtitles",options:{filename:`'${Fo(h)}'`,fontsdir:`'${Fo(y)}'`,original_size:`${a}x${u}`},inputs:"padded_video",outputs:"video_with_subtitles"});const v=[];let O="";i&&await Hf(e)?(v.push({filter:"atrim",options:{start:s,duration:n},inputs:"0:a",outputs:"trimmed_original"},{filter:"asetpts",options:"PTS-STARTPTS",inputs:"trimmed_original",outputs:"original_pts"},{filter:"volume",options:"1.0",inputs:"original_pts",outputs:"original_audio"},{filter:"atrim",options:{start:0,duration:n},inputs:"1:a",outputs:"trimmed_new"},{filter:"asetpts",options:"PTS-STARTPTS",inputs:"trimmed_new",outputs:"new_pts"},{filter:"volume",options:"1.0",inputs:"new_pts",outputs:"new_audio"},{filter:"amix",options:{inputs:2,duration:"longest"},inputs:["original_audio","new_audio"],outputs:"mixed_audio"}),O="mixed_audio"):(v.push({filter:"atrim",options:{start:0,duration:n},inputs:"1:a",outputs:"trimmed_new"},{filter:"asetpts",options:"PTS-STARTPTS",inputs:"trimmed_new",outputs:"new_pts"},{filter:"volume",options:"1.0",inputs:"new_pts",outputs:"new_audio"}),O="new_audio"),l.complexFilter([...d,...v]).outputOptions(["-map [video_with_subtitles]",`-map [${O}]`,"-c:v libx264","-c:a aac","-preset fast"]),l.on("start",N=>{console.log("start to execute command: "+N)}).on("progress",N=>{console.log(`processing: ${Math.round(N.percent)}%`)}).on("end",()=>{console.log(`segment process done: ${o}`),c()}).on("error",N=>{console.error(`segment process error: ${N.message}`),f(N)}).save(o)})}async function Id(t,e,r,i){var _;const s=i.videoRatio,o=i.videoResolution.split("x").map(w=>parseInt(w)),a=s==="9:16"?o[0]:o[1],u=s==="9:16"?o[1]:o[0],h=t.zimuConfig.datas[0];if(!h.path){const w=t.zimuConfig.audioConfig,C=`${r}_${t.name}_${h.title}_${Cd().format("YYYYMMDDHHmmss")}`,T=await lu({text:h.text,voice:w.voice,speech_rate:w.speech_rate,volume:w.volume,pitch_rate:w.pitch_rate,outputFileName:C});h.path=T.outputFile,h.duration=T.duration}const c=h.path;let f=h.duration??await Nt(c);f=Math.ceil(f*100)/100;const l=t.videoList,d=t.isOpenOriginAudio??!0,y=[],v=`${r}_${t.name}_`,O=ee.join(e,`${r}_${t.name}.ass`),N=[],E=[],g=t.zimuConfig.datas[0],D=da(g.text,t.zimuConfig.textConfig,0,f,"subtitles",a,u);if(N.push(D.style),E.push(D.dialogue),t.videoTitleConfig){const w=(_=t.videoTitleConfig)==null?void 0:_.datas[0],C=w.duration||f,T=da(w.text,w.textConfig,w.start,C,"title",a,u);N.push(T.style),E.push(T.dialogue)}Dd(O,N,E,a,u);for(const w of l){const C=w.path,T=w.duration??await Nt(C),p=f,b=Math.ceil(T/p),A=v+ee.basename(C,ee.extname(C));for(let P=0;P<b;P++){const U=P*p,B=w.duration-U,q=Math.min(p,B),z=ee.join(e,`${A}_part${P+1}_${U}-${U+q}.mp4`);y.push({videoPath:C,audioPath:c,outputPath:z,startTime:U,currentDuration:q,isOpenOriginAudio:d,videoWidth:a,videoHeight:u,assFilePath:O})}}return y}async function Pd(t,e,r){const i=r.videoRatio,n=r.videoResolution.split("x").map(u=>parseInt(u)),o=i==="9:16"?n[0]:n[1],a=i==="9:16"?n[1]:n[0];return new Promise((u,h)=>{const c=uu();t.forEach(d=>{c.input(d)});const f=[];for(let d=0;d<t.length;d++)f.push(`[${d}:v]scale=${o}:${a}:force_original_aspect_ratio=decrease,pad=${o}:${a}:(ow-iw)/2:(oh-ih)/2,setsar=1[v${d}]`),f.push(`[${d}:a]aformat=sample_fmts=fltp:sample_rates=44100:channel_layouts=stereo[a${d}]`);const l=t.map((d,y)=>`[v${y}][a${y}]`).join("");f.push(`${l} concat=n=${t.length}:v=1:a=1[v][a]`),c.complexFilter(f).outputOptions(["-map [v]","-map [a]","-c:v libx264","-preset fast","-crf 23","-c:a aac","-b:a 128k","-movflags +faststart"]).on("start",d=>console.log("执行命令:",d)).on("progress",d=>console.log(`处理进度: ${Math.round(d.percent)}%`)).on("end",u).on("error",h).save(e)})}async function Ld(t){ue.log("accept params："),ue.log(JSON.stringify(t));const e=t.clips,r=t.outputFileName,i=t.outputDir??$t(),s=t.globalConfig;for(const c of e)c.segments=await Id(c,i,r,s);ue.log("split clip to segments done："),ue.log(JSON.stringify(e));const n=[];for(const c of e)n.push(...c.segments);ue.info("segments:"),ue.info(JSON.stringify(n));const o=n.map(c=>ga(()=>xd(c)));await Promise.all(o),ue.log("segment process done："),ue.log(JSON.stringify(n));let a=1;for(const c of e)(a===1||c.segments.length>1&&c.segments.length<a)&&(a=c.segments.length);ue.log(`we can generate ${a} videos`);const u=[];for(let c=0;c<a;c++){const f=[];let l=0;for(const d of e){const y=d.segments;let v;y.length===1?v=y[0]:v=y[c],f.push(v.outputPath),l+=v.currentDuration}u.push({videos:f,outputPath:ee.join(i,`${r}_${c+1}.mp4`),duration:l})}ue.log("concat videos start"),ue.log(JSON.stringify(u));const h=u.map(c=>ga(()=>Pd(c.videos,c.outputPath,s)));return await Promise.all(h),ue.log("concat videos done："),ue.log(JSON.stringify(u)),u.map(c=>({outputPath:c.outputPath,duration:c.duration}))}function Md(){oe.ipcMain.handle("video-mix-and-cut",async(t,e)=>{const r=JSON.parse(hi(e));return Ld(r)}),oe.ipcMain.handle("get-media-duration",async(t,e)=>{const r=JSON.parse(hi(e));return Nt(r.path)})}function $d(t){oe.ipcMain.handle("open-file-dialog",async(e,r)=>{if(!t)return null;const i=(r==null?void 0:r.defaultPath)||$t(),s=(r==null?void 0:r.properties)||["openFile"],n=(r==null?void 0:r.title)||"选择文件",o=(r==null?void 0:r.buttonLabel)||"选择",a=(r==null?void 0:r.filters)||[{name:"All Files",extensions:["*"]}];r!=null&&r.multiple&&!s.includes("multiSelections")&&s.push("multiSelections");const u=await oe.dialog.showOpenDialog(t,{title:n,defaultPath:i,buttonLabel:o,filters:a,properties:s});if(u.canceled)return[];{const h=u.filePaths.map(async c=>{const f=await Nt(c),l=`media://${encodeURIComponent(c)}`;return{path:ee.normalize(c),name:ee.basename(c),ext:ee.extname(c),mimeType:er(c),duration:f,url:l}});return await Promise.all(h)}})}async function Rd(t){const e=ee.normalize(t);if(e!==t||e.includes(".."))return!1;try{return await fe.promises.access(e,fe.constants.R_OK),!0}catch{return!1}}function kd(){oe.protocol.handle("media",async t=>{try{const e=t.url.slice(8),r=decodeURIComponent(e).replace(/\//g,"\\").replace(/^\\/,""),i=ee.normalize(r);if(!await Rd(i))return new Response("Access Denied",{status:403});const s=await fe.promises.stat(i);if(!s.isFile())return new Response("Not a file",{status:400});const n=t.headers.get("range"),o=s.size,a={"Content-Type":er(i),"Cache-Control":"public, max-age=31536000"};if(n){const u=n.replace(/bytes=/,"").split("-"),h=parseInt(u[0],10),c=u[1]?parseInt(u[1],10):o-1,f=c-h+1,l=fe.createReadStream(i,{start:h,end:c}),d=Ao(l);return new Response(d,{status:206,headers:{"Content-Range":`bytes ${h}-${c}/${o}`,"Accept-Ranges":"bytes","Content-Length":f.toString(),"Content-Type":await er(i),"Cache-Control":"public, max-age=31536000"}})}else{const u=fe.createReadStream(i),h=Ao(u);return new Response(h,{headers:{"Content-Length":o.toString(),"Content-Type":await er(i),"Cache-Control":"public, max-age=31536000"}})}}catch{return new Response("Not Found",{status:404})}})}function jd(t){oe.globalShortcut.register("CommandOrControl+R",()=>{t&&t.reload()})}global.crypto=Zf;process.env.LANG="zh_CN.UTF-8";process.env.LC_ALL="zh_CN.UTF-8";process.platform==="win32"&&(process.env.CHCP="65001");process.env.DIST=ee.join(__dirname,"../dist");process.env.VITE_PUBLIC=oe.app.isPackaged?process.env.DIST:ee.join(process.env.DIST,"../public");oe.app.commandLine.appendSwitch("js-flags","--max-old-space-size=8192");let Be;const va=process.env.VITE_DEV_SERVER_URL;function Wu(){Be=new oe.BrowserWindow({icon:ee.join(process.env.VITE_PUBLIC,"vite.svg"),webPreferences:{nodeIntegration:!0,contextIsolation:!0,preload:ee.join(__dirname,"preload.js")}}),Be.webContents.on("did-finish-load",()=>{Be==null||Be.webContents.send("main-process-message",new Date().toLocaleString())}),va?Be.loadURL(va):Be.loadFile(ee.join(process.env.DIST,"index.html"))}Od();rc();nc();Jf();Kf();Md();oe.app.whenReady().then(()=>{cu(),Wf(),kd(),Wu(),$d(Be),jd(Be)});oe.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(oe.app.quit(),Be=null)});oe.app.on("activate",()=>{oe.BrowserWindow.getAllWindows().length===0&&Wu()});oe.app.on("will-quit",()=>{oe.globalShortcut.unregisterAll()});
//# sourceMappingURL=main.js.map
