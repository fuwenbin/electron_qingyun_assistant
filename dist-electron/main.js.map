{"version":3,"file":"main.js","sources":["../electron/main.ts"],"sourcesContent":["import { app, BrowserWindow, ipcMain, dialog } from 'electron'\r\nimport path from 'path'\r\n\r\n// The built directory structure\r\n//\r\n// â”œâ”€â”¬â”€â”¬ dist\r\n// â”‚ â”‚ â””â”€â”€ index.html\r\n// â”‚ â”‚\r\n// â”‚ â”œâ”€â”¬ dist-electron\r\n// â”‚ â”‚ â”œâ”€â”€ main.js\r\n// â”‚ â”‚ â””â”€â”€ preload.js\r\n// â”‚\r\nprocess.env.DIST = path.join(__dirname, '../dist')\r\nprocess.env.VITE_PUBLIC = app.isPackaged ? process.env.DIST : path.join(process.env.DIST, '../public')\r\n\r\nlet win: BrowserWindow | null\r\n// ðŸš§ Use ['ENV_NAME'] avoid vite:define plugin\r\nconst VITE_DEV_SERVER_URL = process.env['VITE_DEV_SERVER_URL']\r\n\r\nfunction createWindow() {\r\n  win = new BrowserWindow({\r\n    icon: path.join(process.env.VITE_PUBLIC, 'electron-vite.svg'),\r\n    webPreferences: {\r\n      nodeIntegration: true,\r\n      contextIsolation: false,\r\n    },\r\n  })\r\n\r\n  // Test active push message to Renderer-process.\r\n  win.webContents.on('did-finish-load', () => {\r\n    win?.webContents.send('main-process-message', (new Date).toLocaleString())\r\n  })\r\n\r\n  if (VITE_DEV_SERVER_URL) {\r\n    win.loadURL(VITE_DEV_SERVER_URL)\r\n  } else {\r\n    // win.loadFile('dist/index.html')\r\n    win.loadFile(path.join(process.env.DIST, 'index.html'))\r\n  }\r\n}\r\n\r\napp.on('window-all-closed', () => {\r\n  if (process.platform !== 'darwin') {\r\n    app.quit()\r\n    win = null\r\n  }\r\n})\r\n\r\napp.whenReady().then(createWindow)\r\n\r\napp.on('activate', () => {\r\n  if (BrowserWindow.getAllWindows().length === 0) {\r\n    createWindow()\r\n  }\r\n}) "],"names":["path","app","win","VITE_DEV_SERVER_URL","createWindow","BrowserWindow"],"mappings":"2DAYA,QAAQ,IAAI,KAAOA,EAAK,KAAK,UAAW,SAAS,EACjD,QAAQ,IAAI,YAAcC,EAAI,IAAA,WAAa,QAAQ,IAAI,KAAOD,EAAK,KAAK,QAAQ,IAAI,KAAM,WAAW,EAErG,IAAIE,EAEJ,MAAMC,EAAsB,QAAQ,IAAI,oBAExC,SAASC,GAAe,CACtBF,EAAM,IAAIG,EAAAA,cAAc,CACtB,KAAML,EAAK,KAAK,QAAQ,IAAI,YAAa,mBAAmB,EAC5D,eAAgB,CACd,gBAAiB,GACjB,iBAAkB,EACpB,CAAA,CACD,EAGGE,EAAA,YAAY,GAAG,kBAAmB,IAAM,CAC1CA,GAAA,MAAAA,EAAK,YAAY,KAAK,uBAA6B,IAAA,KAAA,EAAM,iBAAgB,CAC1E,EAEGC,EACFD,EAAI,QAAQC,CAAmB,EAG/BD,EAAI,SAASF,EAAK,KAAK,QAAQ,IAAI,KAAM,YAAY,CAAC,CAE1D,CAEAC,EAAAA,IAAI,GAAG,oBAAqB,IAAM,CAC5B,QAAQ,WAAa,WACvBA,EAAA,IAAI,KAAK,EACHC,EAAA,KAEV,CAAC,EAEDD,EAAI,IAAA,UAAY,EAAA,KAAKG,CAAY,EAEjCH,EAAAA,IAAI,GAAG,WAAY,IAAM,CACnBI,gBAAc,gBAAgB,SAAW,GAC9BD,GAEjB,CAAC"}