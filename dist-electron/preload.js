"use strict";const r=require("electron");require("path");const s=require("fs"),c=require("crypto");require("iconv-lite");function d(e){return Buffer.from(e).toString("base64")}window.addEventListener("DOMContentLoaded",()=>{const e=(i,n)=>{const o=document.getElementById(i);o&&(o.innerText=n)};for(const i of["chrome","node","electron"])e(`${i}-version`,process.versions[i])});r.contextBridge.exposeInMainWorld("electronCrypto",{getRandomValues:e=>c.getRandomValues(e),randomUUID:()=>c.randomUUID()});r.contextBridge.exposeInMainWorld("electronAPI",{saveVideo:e=>r.ipcRenderer.invoke("save-video-blob",e),removeAllListeners:e=>{r.ipcRenderer.removeAllListeners(e)},showSaveDialog:e=>r.ipcRenderer.invoke("show-save-dialog",e),selectDirectory:()=>r.ipcRenderer.invoke("select-directory"),openFile:e=>r.ipcRenderer.invoke("open-file",e),onProgress:e=>(r.ipcRenderer.on("merge-progress",(i,n)=>e(n)),()=>r.ipcRenderer.removeAllListeners("merge-progress")),mergeMedia:e=>r.ipcRenderer.invoke("merge-media",e),composeVideo:e=>r.ipcRenderer.invoke("compose-video",e),getDefaultSavePath:()=>r.ipcRenderer.invoke("get-default-save-path"),text2voice:e=>r.ipcRenderer.invoke("text2voice",d(JSON.stringify(e))),videoMixAndCut:e=>r.ipcRenderer.invoke("video-mix-and-cut",d(JSON.stringify(e))),openFileDialog:e=>r.ipcRenderer.invoke("open-file-dialog",e),getMediaDuration:e=>r.ipcRenderer.invoke("get-media-duration",d(JSON.stringify({path:e}))),readFile:e=>new Promise((i,n)=>{s.readFile(e,(o,t)=>{o?n(o):i(t)})}),readFileBase64:e=>new Promise((i,n)=>{s.readFile(e,(o,t)=>{o&&n(o),i(Buffer.from(t).toString("base64"))})})});
//# sourceMappingURL=preload.js.map
